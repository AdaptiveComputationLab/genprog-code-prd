------------------------------------------------------------------------
r18420 | rmanfredi | 2011-01-20 14:12:12 -0500 (Thu, 20 Jan 2011) | 2 lines

Forgot to include User-Agent header in SSDP packet.

------------------------------------------------------------------------
r18419 | rmanfredi | 2011-01-20 12:59:43 -0500 (Thu, 20 Jan 2011) | 3 lines

dht_configured_mode_changed(): when switching from a non-active mode to
an active one, initiate a DHT bootstrap to fill the expanded routing table.

------------------------------------------------------------------------
r18418 | rmanfredi | 2011-01-20 12:44:04 -0500 (Thu, 20 Jan 2011) | 2 lines

Trace code path where incoming TCP traffic is detected.

------------------------------------------------------------------------
r18417 | rmanfredi | 2011-01-20 03:38:19 -0500 (Thu, 20 Jan 2011) | 2 lines

Trace requested port for sent connect-back messages.

------------------------------------------------------------------------
r18416 | rmanfredi | 2011-01-20 03:06:39 -0500 (Thu, 20 Jan 2011) | 4 lines

node_infostr(): simplify output for UDP nodes.
Adjusted debugging traces for vendor messages, adding some logs in untraced
messages.

------------------------------------------------------------------------
r18415 | rmanfredi | 2011-01-19 18:42:27 -0500 (Wed, 19 Jan 2011) | 2 lines

Shorten the port mapping description string, and add the protocol explicitly.

------------------------------------------------------------------------
r18414 | cbiere | 2011-01-19 18:09:50 -0500 (Wed, 19 Jan 2011) | 2 lines

Hopefully fixed old bug triggered by setting "listen_port" to 1 multiple times.

------------------------------------------------------------------------
r18413 | rmanfredi | 2011-01-19 18:00:59 -0500 (Wed, 19 Jan 2011) | 4 lines

UPnP monitoring of the IGD now also attempts to detect IGD reboots by
monitoring the "total packets received" counter on the IGD and ensuring
it is monotonically increasing.

------------------------------------------------------------------------
r18412 | rmanfredi | 2011-01-19 17:55:37 -0500 (Wed, 19 Jan 2011) | 3 lines

socket_shutdown(): avoid crash if either the TCP or the UDP listening socket
was not created.

------------------------------------------------------------------------
r18411 | cbiere | 2011-01-19 17:18:32 -0500 (Wed, 19 Jan 2011) | 2 lines

Changed type of "count" to match format string.

------------------------------------------------------------------------
r18410 | rmanfredi | 2011-01-19 16:59:00 -0500 (Wed, 19 Jan 2011) | 3 lines

node_check_local_firewalled_status(): do not send a proxying request to a host
that is already our push-proxy.

------------------------------------------------------------------------
r18409 | rmanfredi | 2011-01-19 16:01:37 -0500 (Wed, 19 Jan 2011) | 2 lines

Adjusted header protection and file group for XML files.

------------------------------------------------------------------------
r18408 | rmanfredi | 2011-01-19 15:57:28 -0500 (Wed, 19 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18407 | rmanfredi | 2011-01-19 15:55:51 -0500 (Wed, 19 Jan 2011) | 2 lines

Moved XML support files to dedicated src/xml/ directory.

------------------------------------------------------------------------
r18406 | rmanfredi | 2011-01-19 15:28:13 -0500 (Wed, 19 Jan 2011) | 7 lines

Allow dynamic disabling of UPnP.
Try to be smarter and avoid endless UPnP discoveries if we actually don't
need any UPnP because we're not firewalled.
Collect some state in properties that can then be monitored.
When we're firewalled (apparently), request TCP and UDP connect-back from
random neighbouring ultra peers at regular intervals.

------------------------------------------------------------------------
r18405 | rmanfredi | 2011-01-18 18:54:31 -0500 (Tue, 18 Jan 2011) | 2 lines

Removed obsolete files.

------------------------------------------------------------------------
r18404 | rmanfredi | 2011-01-18 18:46:20 -0500 (Tue, 18 Jan 2011) | 3 lines

Regenerated Makefiles.
Updated MANIFEST with new UPnP files.

------------------------------------------------------------------------
r18403 | rmanfredi | 2011-01-18 18:44:33 -0500 (Tue, 18 Jan 2011) | 2 lines

Added UPnP support.

------------------------------------------------------------------------
r18402 | rmanfredi | 2011-01-18 18:06:38 -0500 (Tue, 18 Jan 2011) | 2 lines

nv_pair_make_static_str(): make it possible to use an empty string as the value.

------------------------------------------------------------------------
r18401 | rmanfredi | 2011-01-18 14:43:04 -0500 (Tue, 18 Jan 2011) | 2 lines

Added recursive XML node lookups.

------------------------------------------------------------------------
r18400 | rmanfredi | 2011-01-18 11:47:53 -0500 (Tue, 18 Jan 2011) | 2 lines

OK, the declaration in mingw32.h was incorrect then.  Anyway...

------------------------------------------------------------------------
r18399 | rmanfredi | 2011-01-18 11:42:30 -0500 (Tue, 18 Jan 2011) | 2 lines

mingw_early_init(): was wrongly named mingw_init_early().

------------------------------------------------------------------------
r18398 | rmanfredi | 2011-01-18 11:40:35 -0500 (Tue, 18 Jan 2011) | 2 lines

stacktrace_auto_tune(): suppress logging message if we manage to auto-tune.

------------------------------------------------------------------------
r18397 | rmanfredi | 2011-01-18 11:23:57 -0500 (Tue, 18 Jan 2011) | 2 lines

mingw_early_init(): style fixed.

------------------------------------------------------------------------
r18396 | nonamer | 2011-01-18 10:41:49 -0500 (Tue, 18 Jan 2011) | 1 line

If compiled with -mwindows, redirect our output to the parent proces if available.
------------------------------------------------------------------------
r18395 | cbiere | 2011-01-18 04:01:30 -0500 (Tue, 18 Jan 2011) | 2 lines

Added spam filter rule.

------------------------------------------------------------------------
r18394 | cbiere | 2011-01-18 04:01:03 -0500 (Tue, 18 Jan 2011) | 2 lines

Added some MIME types and associations.

------------------------------------------------------------------------
r18393 | cbiere | 2011-01-18 02:54:06 -0500 (Tue, 18 Jan 2011) | 3 lines

Discard bogus results from Morpheus.
Tweaked filters to reduce false-positives once more.

------------------------------------------------------------------------
r18392 | cbiere | 2011-01-18 00:39:39 -0500 (Tue, 18 Jan 2011) | 2 lines

Expire dynamically caught hostiles after about 12 hours.

------------------------------------------------------------------------
r18391 | cbiere | 2011-01-18 00:37:47 -0500 (Tue, 18 Jan 2011) | 2 lines

Extended range.

------------------------------------------------------------------------
r18390 | cbiere | 2011-01-18 00:36:53 -0500 (Tue, 18 Jan 2011) | 2 lines

Tweaked Cabos workaround once more.

------------------------------------------------------------------------
r18389 | cbiere | 2011-01-18 00:24:58 -0500 (Tue, 18 Jan 2011) | 2 lines

Adjusted spam filter rules.

------------------------------------------------------------------------
r18388 | cbiere | 2011-01-17 23:50:16 -0500 (Mon, 17 Jan 2011) | 2 lines

Added tm_init(), tm_start_time() and tm_relative_time().

------------------------------------------------------------------------
r18387 | cbiere | 2011-01-17 23:47:43 -0500 (Mon, 17 Jan 2011) | 2 lines

Prevent warnings to make compiling with GCC flag -Werror possible.

------------------------------------------------------------------------
r18386 | cbiere | 2011-01-17 23:46:27 -0500 (Mon, 17 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18385 | cbiere | 2011-01-17 23:41:26 -0500 (Mon, 17 Jan 2011) | 2 lines

Reverted accidental change to line 250.

------------------------------------------------------------------------
r18384 | cbiere | 2011-01-17 23:25:37 -0500 (Mon, 17 Jan 2011) | 2 lines

Added FIXME tag.

------------------------------------------------------------------------
r18383 | rmanfredi | 2011-01-17 18:39:50 -0500 (Mon, 17 Jan 2011) | 2 lines

Added socket_local_addr() to extract local IP address from socket.

------------------------------------------------------------------------
r18382 | cbiere | 2011-01-17 17:57:16 -0500 (Mon, 17 Jan 2011) | 2 lines

Added workaround for Cabos (RimeWile) to reduce false-positives.

------------------------------------------------------------------------
r18381 | cbiere | 2011-01-17 17:27:36 -0500 (Mon, 17 Jan 2011) | 2 lines

Added FIXME tag regarding opendir() on Windows/MingW.

------------------------------------------------------------------------
r18380 | rmanfredi | 2011-01-16 17:14:44 -0500 (Sun, 16 Jan 2011) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r18379 | cbiere | 2011-01-16 16:51:46 -0500 (Sun, 16 Jan 2011) | 2 lines

Adjusted spam filter rule.

------------------------------------------------------------------------
r18378 | rmanfredi | 2011-01-16 16:01:54 -0500 (Sun, 16 Jan 2011) | 3 lines

Unless "allow_firewalled_ultra" is set, don't allow a firewalled node to run
in ultra mode.

------------------------------------------------------------------------
r18377 | cbiere | 2011-01-16 13:39:28 -0500 (Sun, 16 Jan 2011) | 2 lines

Inserted call to hostiles_dynamic_add().

------------------------------------------------------------------------
r18376 | cbiere | 2011-01-16 13:38:13 -0500 (Sun, 16 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18375 | rmanfredi | 2011-01-16 13:24:49 -0500 (Sun, 16 Jan 2011) | 2 lines

Disable INPUTEVT_DEBUGGING and INPUTEVT_SAFETY_ASSERT.

------------------------------------------------------------------------
r18374 | cbiere | 2011-01-16 13:23:45 -0500 (Sun, 16 Jan 2011) | 2 lines

Next please.

------------------------------------------------------------------------
r18373 | cbiere | 2011-01-16 13:10:49 -0500 (Sun, 16 Jan 2011) | 2 lines

Added some hostiles_dynamic_add().

------------------------------------------------------------------------
r18372 | cbiere | 2011-01-16 13:09:24 -0500 (Sun, 16 Jan 2011) | 4 lines

Added check for ttyname().
fread() returns size_t not int.
Reduced occurence of #ifdef MINGW32.

------------------------------------------------------------------------
r18371 | bpringlemeir | 2011-01-16 09:32:03 -0500 (Sun, 16 Jan 2011) | 3 lines

Add glib-missing for g_strlcpy() for frameworks where it is not present.


------------------------------------------------------------------------
r18370 | cbiere | 2011-01-16 01:04:31 -0500 (Sun, 16 Jan 2011) | 3 lines

Added FIXME tags regarding Unicode support.
Stick to "pathname" and "filename" for consistency and clarity.

------------------------------------------------------------------------
r18369 | cbiere | 2011-01-15 23:43:46 -0500 (Sat, 15 Jan 2011) | 2 lines

Added filter rule.

------------------------------------------------------------------------
r18368 | cbiere | 2011-01-15 22:45:11 -0500 (Sat, 15 Jan 2011) | 2 lines

Extended range.

------------------------------------------------------------------------
r18367 | cbiere | 2011-01-15 20:53:53 -0500 (Sat, 15 Jan 2011) | 2 lines

filename_sanitize(): Unconditionally strip all leading spaces.

------------------------------------------------------------------------
r18366 | cbiere | 2011-01-15 20:19:20 -0500 (Sat, 15 Jan 2011) | 8 lines

filename_sanitize():
 * ASCII parentheses are no longer considered evil characters and are not
   stripped from filenames anymore.
 * Trailing spaces and periods are stripped from filenames because Windows
   does not like them.
 * On MingW reserved filenames like con, com1 etc. are avoided.
 * Return "noname" instead of a possibly empty filename.

------------------------------------------------------------------------
r18365 | rmanfredi | 2011-01-15 19:27:18 -0500 (Sat, 15 Jan 2011) | 4 lines

s_logv(): be careful about recursion, especially when handling s_error().
Had to make crash_handler() visible to allow for configure pause() or exec()
to be invoked before terminating the process.

------------------------------------------------------------------------
r18364 | cbiere | 2011-01-15 18:59:15 -0500 (Sat, 15 Jan 2011) | 2 lines

Use parentheses around macro parameters.

------------------------------------------------------------------------
r18363 | rmanfredi | 2011-01-15 18:38:48 -0500 (Sat, 15 Jan 2011) | 3 lines

s_logv(): on Windows, unbuffering of stderr does not work so we need to
explicitly flush.

------------------------------------------------------------------------
r18362 | rmanfredi | 2011-01-15 17:34:25 -0500 (Sat, 15 Jan 2011) | 4 lines

Added cksave() / ckrestore() to be able to free up memory easily.
s_logv(): now frees the allocated string when logging from a signal handler
to avoid using up all the chunk with a few messages.

------------------------------------------------------------------------
r18361 | cbiere | 2011-01-15 16:29:57 -0500 (Sat, 15 Jan 2011) | 2 lines

Adjusted spam filter rule.

------------------------------------------------------------------------
r18360 | rmanfredi | 2011-01-15 15:53:32 -0500 (Sat, 15 Jan 2011) | 2 lines

Converted a g_warning() in a signal handler to s_warning().

------------------------------------------------------------------------
r18359 | rmanfredi | 2011-01-15 15:50:30 -0500 (Sat, 15 Jan 2011) | 2 lines

Allow a NULL chunk pointer argument in the interface, for robustness.

------------------------------------------------------------------------
r18358 | rmanfredi | 2011-01-15 15:10:49 -0500 (Sat, 15 Jan 2011) | 2 lines

s_logv(): forgot trailing "\n" in critical log message.

------------------------------------------------------------------------
r18357 | rmanfredi | 2011-01-15 14:26:50 -0500 (Sat, 15 Jan 2011) | 3 lines

Added s_error().
Added signal handler support in s_logv().

------------------------------------------------------------------------
r18356 | rmanfredi | 2011-01-15 14:25:53 -0500 (Sat, 15 Jan 2011) | 3 lines

Converted call to g_debug() to s_debug() in case omalloc() is invoked from
a signal handler.

------------------------------------------------------------------------
r18355 | rmanfredi | 2011-01-15 13:37:44 -0500 (Sat, 15 Jan 2011) | 2 lines

Optimize nested critical sections.

------------------------------------------------------------------------
r18354 | rmanfredi | 2011-01-15 13:29:22 -0500 (Sat, 15 Jan 2011) | 2 lines

Added signal_close() at exit time.

------------------------------------------------------------------------
r18353 | rmanfredi | 2011-01-15 13:27:31 -0500 (Sat, 15 Jan 2011) | 4 lines

signal_leave_critical(): factorized panic there if we can't leave the critical
region.
Added signal chunk for allocating memory within a signal handler.

------------------------------------------------------------------------
r18352 | rmanfredi | 2011-01-15 12:48:07 -0500 (Sat, 15 Jan 2011) | 3 lines

Added str_new_in_chunk() to safely allocate new str_t objects from signal
handlers.

------------------------------------------------------------------------
r18351 | rmanfredi | 2011-01-15 12:32:40 -0500 (Sat, 15 Jan 2011) | 3 lines

ckfree_all(): must enter a critical section during freeing.
Added ckcopy() and ckstrdup().

------------------------------------------------------------------------
r18350 | rmanfredi | 2011-01-15 12:22:07 -0500 (Sat, 15 Jan 2011) | 2 lines

Actually sigset_t is already defined by MinGW in <sys/types.h>.

------------------------------------------------------------------------
r18349 | cbiere | 2011-01-15 10:37:58 -0500 (Sat, 15 Jan 2011) | 2 lines

Adjusted spam filter rule.

------------------------------------------------------------------------
r18348 | rmanfredi | 2011-01-15 09:49:41 -0500 (Sat, 15 Jan 2011) | 3 lines

Improved support for strings with foreign pointers.
Allow safe formatting within a string made of a foreign pointer.

------------------------------------------------------------------------
r18347 | rmanfredi | 2011-01-15 09:48:18 -0500 (Sat, 15 Jan 2011) | 3 lines

Moved s_xxx() logging routines from stacktrace.c to log.c to be able to
generalize them to be useable in signal handlers as well.

------------------------------------------------------------------------
r18346 | rmanfredi | 2011-01-15 09:45:13 -0500 (Sat, 15 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18345 | rmanfredi | 2011-01-15 09:44:14 -0500 (Sat, 15 Jan 2011) | 2 lines

Added chunk allocator.

------------------------------------------------------------------------
r18344 | cbiere | 2011-01-15 09:32:30 -0500 (Sat, 15 Jan 2011) | 2 lines

Removed unnecessary signal handling for mmap() with write().

------------------------------------------------------------------------
r18343 | rmanfredi | 2011-01-15 09:00:46 -0500 (Sat, 15 Jan 2011) | 2 lines

str_vncatf(): fixed %p formmatting bug, and request lower-cased hexadecimal.

------------------------------------------------------------------------
r18342 | rmanfredi | 2011-01-14 19:25:25 -0500 (Fri, 14 Jan 2011) | 3 lines

stacktrace_auto_tune(): changed s_warning() into s_info() because there's
nothing to worry about.

------------------------------------------------------------------------
r18341 | rmanfredi | 2011-01-14 18:21:22 -0500 (Fri, 14 Jan 2011) | 6 lines

Adapted the stack_unwind() routine to use an auto-computed stack offset, so
that it can work correctly on UNIX and Windows (under MinGW).
Added stacktrace_caller_name() to allow routines to compute their own symbolic
name, or that of any caller earlier in the stack, at run-time, solely for
logging purposes.

------------------------------------------------------------------------
r18340 | rmanfredi | 2011-01-14 07:36:54 -0500 (Fri, 14 Jan 2011) | 2 lines

Added wfree0() to explicitly zero the object's content before freeing it.

------------------------------------------------------------------------
r18339 | rmanfredi | 2011-01-14 06:58:25 -0500 (Fri, 14 Jan 2011) | 3 lines

crash_handler(): use "volatile sig_atomic_t" declaration for the "crashed"
variable to be perfectly safe.

------------------------------------------------------------------------
r18338 | cbiere | 2011-01-13 22:39:44 -0500 (Thu, 13 Jan 2011) | 2 lines

Prevent soft assertion failure when restarting a passive search.

------------------------------------------------------------------------
r18337 | cbiere | 2011-01-13 22:38:54 -0500 (Thu, 13 Jan 2011) | 3 lines

Fixed stand-alone compilation the umpteenth time.
Spell out "interactive".

------------------------------------------------------------------------
r18336 | cbiere | 2011-01-13 22:20:38 -0500 (Thu, 13 Jan 2011) | 2 lines

Improved spam detection.

------------------------------------------------------------------------
r18335 | cbiere | 2011-01-13 21:39:45 -0500 (Thu, 13 Jan 2011) | 2 lines

Added range.

------------------------------------------------------------------------
r18334 | cbiere | 2011-01-13 20:19:42 -0500 (Thu, 13 Jan 2011) | 2 lines

Extended and added ranges.

------------------------------------------------------------------------
r18333 | rmanfredi | 2011-01-13 19:42:45 -0500 (Thu, 13 Jan 2011) | 2 lines

Make sure the shell runs when launched through an xterm under Cygwin.

------------------------------------------------------------------------
r18332 | rmanfredi | 2011-01-13 17:44:12 -0500 (Thu, 13 Jan 2011) | 2 lines

Use "sig_atomic_t" instead of "unsigned" to be perfectly safe.

------------------------------------------------------------------------
r18331 | rmanfredi | 2011-01-13 17:06:43 -0500 (Thu, 13 Jan 2011) | 4 lines

USE_LINT was probably meant to prevent "inline" before including <glib.h>.
And of course we need to reset glib-specific symbols after including <glib.h>
so we need two USE_LINT sections.

------------------------------------------------------------------------
r18330 | rmanfredi | 2011-01-13 17:02:06 -0500 (Thu, 13 Jan 2011) | 2 lines

mingw_fcntl(F_SETLK): fixed semantics when locking length is 0.

------------------------------------------------------------------------
r18329 | rmanfredi | 2011-01-13 15:56:01 -0500 (Thu, 13 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18328 | rmanfredi | 2011-01-13 15:55:13 -0500 (Thu, 13 Jan 2011) | 5 lines

Added signal trapping layer to be able to determine whether we are in signal
handler or not.
When dumping stack traces from critical points, allow symbolic traces by
loading symbols provided we are not within a signal handler.

------------------------------------------------------------------------
r18327 | rmanfredi | 2011-01-13 12:37:04 -0500 (Thu, 13 Jan 2011) | 3 lines

mingw_filename_nearby(): warn in the improbable case of GetModuleFileName()
failure.

------------------------------------------------------------------------
r18326 | rmanfredi | 2011-01-13 09:00:42 -0500 (Thu, 13 Jan 2011) | 2 lines

Fixed comment typo.

------------------------------------------------------------------------
r18325 | rmanfredi | 2011-01-13 09:00:22 -0500 (Thu, 13 Jan 2011) | 2 lines

stack_unwind(): ask compiler to not inline it.

------------------------------------------------------------------------
r18324 | rmanfredi | 2011-01-13 08:59:46 -0500 (Thu, 13 Jan 2011) | 4 lines

Removed duplicate USE_LINT block.
Reformatted some comments to use the "strategic comment format".
Added NO_INLINE, assumming this will be available for GCC >= 3.1 as well.

------------------------------------------------------------------------
r18323 | rmanfredi | 2011-01-13 01:33:14 -0500 (Thu, 13 Jan 2011) | 4 lines

Disabled backtrace() emulation on Windows: does not bring any added value
currently compared to the default implementation, and the Windows version
is non-portable accross architectures.

------------------------------------------------------------------------
r18322 | cbiere | 2011-01-12 17:56:56 -0500 (Wed, 12 Jan 2011) | 2 lines

inputevt_poll_idx_free(): Simplified code.

------------------------------------------------------------------------
r18321 | cbiere | 2011-01-12 17:50:45 -0500 (Wed, 12 Jan 2011) | 2 lines

inputevt_poll_idx_free(): Keep the pollfd array compact all the time.

------------------------------------------------------------------------
r18320 | cbiere | 2011-01-12 17:18:04 -0500 (Wed, 12 Jan 2011) | 2 lines

Your turn.

------------------------------------------------------------------------
r18319 | rmanfredi | 2011-01-12 17:00:13 -0500 (Wed, 12 Jan 2011) | 2 lines

Fixed harmful typo in assertion.

------------------------------------------------------------------------
r18318 | rmanfredi | 2011-01-12 13:48:30 -0500 (Wed, 12 Jan 2011) | 2 lines

inputevt_poll_idx_compact(): converted g_info() to g_debug().

------------------------------------------------------------------------
r18317 | rmanfredi | 2011-01-12 13:43:59 -0500 (Wed, 12 Jan 2011) | 2 lines

inputevt_poll_idx_compact(): fixed memory leak.

------------------------------------------------------------------------
r18316 | rmanfredi | 2011-01-12 12:37:24 -0500 (Wed, 12 Jan 2011) | 2 lines

Forgot to commit backtrace() trapping macro.

------------------------------------------------------------------------
r18315 | rmanfredi | 2011-01-12 11:59:50 -0500 (Wed, 12 Jan 2011) | 2 lines

Added experimental backtrace() emulation on Windows.

------------------------------------------------------------------------
r18314 | rmanfredi | 2011-01-12 11:47:57 -0500 (Wed, 12 Jan 2011) | 3 lines

Added metaconfig symbol to govern <execinfo.h> inclusion.
Fixed offsetting of the non-backtrace() version of stack_unwind().

------------------------------------------------------------------------
r18313 | cbiere | 2011-01-12 10:51:05 -0500 (Wed, 12 Jan 2011) | 2 lines

Optimized use of poll() by compacting the pollfd array.

------------------------------------------------------------------------
r18312 | cbiere | 2011-01-12 10:36:42 -0500 (Wed, 12 Jan 2011) | 3 lines

bit_generic_last_set(): Fixed out-of-bounds bug triggered when no bits were
	set and "from" was greater than 0 causing "i" to wrap around.

------------------------------------------------------------------------
r18311 | cbiere | 2011-01-11 19:06:06 -0500 (Tue, 11 Jan 2011) | 3 lines

Check whether a shared file matches the spam filter by name and size, so
that we don't have to wait for SHA-1 calculation finish.

------------------------------------------------------------------------
r18310 | rmanfredi | 2011-01-11 18:53:46 -0500 (Tue, 11 Jan 2011) | 2 lines

Was missing a parenthesis.

------------------------------------------------------------------------
r18309 | rmanfredi | 2011-01-11 18:51:51 -0500 (Tue, 11 Jan 2011) | 3 lines

mingw_filetime_to_timeval(): fixed units; one must first convert the value to
microseconds.  And then modulo and division were 10 times larger than needed.

------------------------------------------------------------------------
r18308 | cbiere | 2011-01-11 18:27:54 -0500 (Tue, 11 Jan 2011) | 4 lines

Also check whether shared files match the spam filters by name and size.
request_sha1(): Never free the shared_file structure. This is too difficult
	to handle for callers.

------------------------------------------------------------------------
r18307 | rmanfredi | 2011-01-11 18:25:40 -0500 (Tue, 11 Jan 2011) | 2 lines

Remap pipe() on MinGW for the "memory" shell command.

------------------------------------------------------------------------
r18306 | cbiere | 2011-01-11 17:33:37 -0500 (Tue, 11 Jan 2011) | 2 lines

Extended spam filter rule.

------------------------------------------------------------------------
r18305 | rmanfredi | 2011-01-11 16:24:22 -0500 (Tue, 11 Jan 2011) | 3 lines

Made log_rename() work on Windows.  As usual, nothing is straightforward
on that platform.

------------------------------------------------------------------------
r18304 | rmanfredi | 2011-01-11 14:54:25 -0500 (Tue, 11 Jan 2011) | 2 lines

Use local variable to shorten structure accesses.

------------------------------------------------------------------------
r18303 | rmanfredi | 2011-01-11 14:30:24 -0500 (Tue, 11 Jan 2011) | 2 lines

Casts of -1 to ssize_t were not systematic.

------------------------------------------------------------------------
r18302 | rmanfredi | 2011-01-11 14:28:29 -0500 (Tue, 11 Jan 2011) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r18301 | rmanfredi | 2011-01-11 14:06:27 -0500 (Tue, 11 Jan 2011) | 3 lines

Since log_set() is called very early, it must not attempt to allocate atoms
until the atom layer is up.

------------------------------------------------------------------------
r18300 | cbiere | 2011-01-11 13:29:18 -0500 (Tue, 11 Jan 2011) | 2 lines

Added spam filter rule.

------------------------------------------------------------------------
r18299 | cbiere | 2011-01-11 13:06:05 -0500 (Tue, 11 Jan 2011) | 3 lines

Don't add IP addresses to the dynamic list that are already statically listed.
Set ST_HOSTILE after calling hostiles_dynamic_add().

------------------------------------------------------------------------
r18298 | cbiere | 2011-01-11 11:55:30 -0500 (Tue, 11 Jan 2011) | 3 lines

Clamp values to UINT_MAX respectively INT_MAX as recv(), send(), sendto(),
	write() do not have parameters of size_t but int or unsigned int.

------------------------------------------------------------------------
r18297 | rmanfredi | 2011-01-11 11:44:13 -0500 (Tue, 11 Jan 2011) | 2 lines

Add ENOTSOCK mapping.

------------------------------------------------------------------------
r18296 | cbiere | 2011-01-11 11:25:28 -0500 (Tue, 11 Jan 2011) | 2 lines

Removed unnecessary MIN(size, INT_MAX) for s_read() and s_write().

------------------------------------------------------------------------
r18295 | rmanfredi | 2011-01-11 11:19:03 -0500 (Tue, 11 Jan 2011) | 4 lines

unix_read() and unix_write(): use s_read() and s_write() and protect MINGW32
code without #ifdef to improve readability.  This helps keep the complexity
hidden as much as possible into mingw32.[ch].

------------------------------------------------------------------------
r18294 | cbiere | 2011-01-11 11:12:18 -0500 (Tue, 11 Jan 2011) | 2 lines

Don't compare signed with unsigned values.

------------------------------------------------------------------------
r18293 | cbiere | 2011-01-11 11:09:43 -0500 (Tue, 11 Jan 2011) | 4 lines

Fixed stand-alone compilation of local shell.
[MINGW32] Try send() or recv() and fallback to write() or read() on ENOTSOCK
	respectively.

------------------------------------------------------------------------
r18292 | rmanfredi | 2011-01-11 11:03:21 -0500 (Tue, 11 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18291 | rmanfredi | 2011-01-11 11:00:38 -0500 (Tue, 11 Jan 2011) | 2 lines

Added a "log" command to the shell to manage logfiles.

------------------------------------------------------------------------
r18290 | rmanfredi | 2011-01-11 10:48:06 -0500 (Tue, 11 Jan 2011) | 2 lines

Further cleanup now that we have 64-bit saturation arithmetics.

------------------------------------------------------------------------
r18289 | cbiere | 2011-01-11 10:38:53 -0500 (Tue, 11 Jan 2011) | 7 lines

mingw_filetime_to_timeval(): Prevent integer overflow.
mingw_nanosleep():
	Prevent integer overflow.
	Always initialize "rem" which is required at least for EINTR.
	Use L or UL suffix for constants that would not fit into a 16-bit int.
	Always round up as allowed by the specification.

------------------------------------------------------------------------
r18288 | cbiere | 2011-01-11 10:08:21 -0500 (Tue, 11 Jan 2011) | 2 lines

Remove hostile peers periodically as the list is updated dynamically.

------------------------------------------------------------------------
r18287 | cbiere | 2011-01-11 10:04:08 -0500 (Tue, 11 Jan 2011) | 2 lines

Added guint64_saturate_add() and guint64_saturate_mult().

------------------------------------------------------------------------
r18286 | rmanfredi | 2011-01-11 06:52:20 -0500 (Tue, 11 Jan 2011) | 4 lines

Initialize MINGW32 as early as possible.
Emulate nanosleep() on Windows.
Use explicit WSASocket() instead of socket() to create new sockets.

------------------------------------------------------------------------
r18285 | cbiere | 2011-01-10 21:42:48 -0500 (Mon, 10 Jan 2011) | 2 lines

Catch spamming neighbours, too.

------------------------------------------------------------------------
r18284 | cbiere | 2011-01-10 21:34:57 -0500 (Mon, 10 Jan 2011) | 2 lines

Removed some unnecessary #ifdef.

------------------------------------------------------------------------
r18283 | cbiere | 2011-01-10 21:19:32 -0500 (Mon, 10 Jan 2011) | 2 lines

Renamed poll_ctx to ctx.

------------------------------------------------------------------------
r18282 | cbiere | 2011-01-10 21:02:15 -0500 (Mon, 10 Jan 2011) | 2 lines

Experimental optimization of select() on Windows.

------------------------------------------------------------------------
r18281 | cbiere | 2011-01-10 19:44:46 -0500 (Mon, 10 Jan 2011) | 3 lines

Removed dysfunctional USE_WIN_SELECT variant.
Removed glibberish like gint, guint, gpointer etc.

------------------------------------------------------------------------
r18280 | rmanfredi | 2011-01-10 19:05:31 -0500 (Mon, 10 Jan 2011) | 2 lines

Unplugged the experimental USE_WIN_SELECT variant.

------------------------------------------------------------------------
r18279 | rmanfredi | 2011-01-10 18:55:22 -0500 (Mon, 10 Jan 2011) | 3 lines

Added mingw_fd_is_opened() to check for a file being opened as a regular
file or as a socket.

------------------------------------------------------------------------
r18278 | cbiere | 2011-01-10 18:44:55 -0500 (Mon, 10 Jan 2011) | 2 lines

fcntl(): Added special handling for socket file descriptors.

------------------------------------------------------------------------
r18277 | cbiere | 2011-01-10 17:41:45 -0500 (Mon, 10 Jan 2011) | 2 lines

Added some assertions for debugging.

------------------------------------------------------------------------
r18276 | cbiere | 2011-01-10 17:35:55 -0500 (Mon, 10 Jan 2011) | 2 lines

update_poll_event_with_select(): Only ask for exceptions if polling for read or write, too.

------------------------------------------------------------------------
r18275 | cbiere | 2011-01-10 17:23:45 -0500 (Mon, 10 Jan 2011) | 2 lines

Removed buggy "optimizations" for MINGW32 with select().

------------------------------------------------------------------------
r18274 | cbiere | 2011-01-10 17:00:14 -0500 (Mon, 10 Jan 2011) | 2 lines

Fixed off-by-one bug with USE_WIN_SELECT.

------------------------------------------------------------------------
r18273 | cbiere | 2011-01-10 16:31:42 -0500 (Mon, 10 Jan 2011) | 2 lines

is_a_socket(): Fixed inverted logic in getsockopt() variant.

------------------------------------------------------------------------
r18272 | rmanfredi | 2011-01-10 16:26:21 -0500 (Mon, 10 Jan 2011) | 2 lines

Added statistics counter for dynamically caught hostiles.

------------------------------------------------------------------------
r18271 | cbiere | 2011-01-10 16:06:12 -0500 (Mon, 10 Jan 2011) | 2 lines

Added another safety assertion.

------------------------------------------------------------------------
r18270 | cbiere | 2011-01-10 13:49:57 -0500 (Mon, 10 Jan 2011) | 2 lines

More spam detection fine-tuning.

------------------------------------------------------------------------
r18269 | cbiere | 2011-01-10 13:45:32 -0500 (Mon, 10 Jan 2011) | 2 lines

Extended spam filter rule.

------------------------------------------------------------------------
r18268 | cbiere | 2011-01-10 12:41:24 -0500 (Mon, 10 Jan 2011) | 2 lines

Added spam filter rule

------------------------------------------------------------------------
r18267 | cbiere | 2011-01-10 12:38:41 -0500 (Mon, 10 Jan 2011) | 2 lines

Added filter rules and adjusted others.

------------------------------------------------------------------------
r18266 | cbiere | 2011-01-10 12:32:55 -0500 (Mon, 10 Jan 2011) | 2 lines

Added spam filter rule.

------------------------------------------------------------------------
r18265 | rmanfredi | 2011-01-10 12:31:43 -0500 (Mon, 10 Jan 2011) | 2 lines

is_strprefix() cannot cause UMR on NUL-terminated strings.

------------------------------------------------------------------------
r18264 | cbiere | 2011-01-10 12:17:59 -0500 (Mon, 10 Jan 2011) | 2 lines

More spam detection fine-tuning.

------------------------------------------------------------------------
r18263 | cbiere | 2011-01-10 12:16:52 -0500 (Mon, 10 Jan 2011) | 4 lines

is_strsuffix(): Use (size_t)-1 instead of 0 as hint to use strlen()
	and use memcmp() which should be more efficient and allows
	use of is_strsuffix() with unterminated strings.

------------------------------------------------------------------------
r18262 | rmanfredi | 2011-01-10 12:10:47 -0500 (Mon, 10 Jan 2011) | 3 lines

Done my homework.
Fixed mis-edited argument in s_read() call.

------------------------------------------------------------------------
r18261 | cbiere | 2011-01-10 11:50:44 -0500 (Mon, 10 Jan 2011) | 3 lines

Fixed typos.
Added spam filter rule.

------------------------------------------------------------------------
r18260 | cbiere | 2011-01-10 11:42:45 -0500 (Mon, 10 Jan 2011) | 3 lines

Added host_dynamic_add() for dynamically banning spamming peers with
verifiable ip addresses.

------------------------------------------------------------------------
r18259 | cbiere | 2011-01-10 11:39:57 -0500 (Mon, 10 Jan 2011) | 2 lines

Added spam filter rule.

------------------------------------------------------------------------
r18258 | cbiere | 2011-01-10 10:28:34 -0500 (Mon, 10 Jan 2011) | 4 lines

Moved path[] to the end of struct which should be more compact and cache
friendly since its the least accessed member.
Added several FIXME tags regarding read and partial write().

------------------------------------------------------------------------
r18257 | cbiere | 2011-01-10 09:50:12 -0500 (Mon, 10 Jan 2011) | 4 lines

Fixed compat_ms_sleep() again.
Of course, nanosleep() supports sleeping for one second and more, only
usleep() does not.

------------------------------------------------------------------------
r18256 | cbiere | 2011-01-10 09:23:52 -0500 (Mon, 10 Jan 2011) | 4 lines

Added some explanatory comments.
Readjusted limit per iteration.
Fixed calculation of timespec for nanosleep().

------------------------------------------------------------------------
r18255 | cbiere | 2011-01-10 08:55:17 -0500 (Mon, 10 Jan 2011) | 2 lines

Fixed API regarding resizing.

------------------------------------------------------------------------
r18254 | cbiere | 2011-01-10 08:49:06 -0500 (Mon, 10 Jan 2011) | 2 lines

inputevt_init(): Some I/O schemes don't use a special file descriptor.

------------------------------------------------------------------------
r18253 | cbiere | 2011-01-10 08:45:46 -0500 (Mon, 10 Jan 2011) | 3 lines

Reverted changes due to obvious API change.
BUG: Where is bit_array.t???

------------------------------------------------------------------------
r18252 | rmanfredi | 2011-01-10 04:58:15 -0500 (Mon, 10 Jan 2011) | 4 lines

Prefer nanosleep() over usleep().
Compute the proper amount of seconds for nanosleep(), making the per-loop
granularity much higher than before.

------------------------------------------------------------------------
r18251 | rmanfredi | 2011-01-10 02:19:59 -0500 (Mon, 10 Jan 2011) | 2 lines

Fixed obvious typos.

------------------------------------------------------------------------
r18250 | cbiere | 2011-01-09 23:00:20 -0500 (Sun, 09 Jan 2011) | 2 lines

MINGW32: Added some workaround for EINVAL from compat_poll().

------------------------------------------------------------------------
r18249 | cbiere | 2011-01-09 22:16:33 -0500 (Sun, 09 Jan 2011) | 2 lines

Removed some unnecessary #ifdef; inline hides warnings about being unused.

------------------------------------------------------------------------
r18248 | cbiere | 2011-01-09 22:07:39 -0500 (Sun, 09 Jan 2011) | 3 lines

Fixed direct use of select() and added some code for testing it on unix.
FIXME tags aside it seems to work on unix albeit not being more efficient.

------------------------------------------------------------------------
r18247 | cbiere | 2011-01-09 20:38:24 -0500 (Sun, 09 Jan 2011) | 3 lines

Allow USE_POLL and USE_WIN_SELECT at the same time so that WSAPoll() is
preferred if available.

------------------------------------------------------------------------
r18246 | cbiere | 2011-01-09 19:16:41 -0500 (Sun, 09 Jan 2011) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r18245 | cbiere | 2011-01-09 19:05:38 -0500 (Sun, 09 Jan 2011) | 2 lines

Added initial implementation of I/O scheme using select() on Windows.

------------------------------------------------------------------------
r18244 | rmanfredi | 2011-01-09 19:02:37 -0500 (Sun, 09 Jan 2011) | 2 lines

Fixed.

------------------------------------------------------------------------
r18243 | rmanfredi | 2011-01-09 18:59:20 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18242 | rmanfredi | 2011-01-09 18:54:02 -0500 (Sun, 09 Jan 2011) | 2 lines

Removed more generic #ifdef MINGW32 checks.

------------------------------------------------------------------------
r18241 | rmanfredi | 2011-01-09 17:43:51 -0500 (Sun, 09 Jan 2011) | 3 lines

When they are UDP-firewalled, don't run active unsolicited traffic checks too
often but space out the checks in time, up to a maximum limit.

------------------------------------------------------------------------
r18240 | rmanfredi | 2011-01-09 17:17:10 -0500 (Sun, 09 Jan 2011) | 2 lines

Added str_smsg() and str_smsg2() for generating temporary formatted strings.

------------------------------------------------------------------------
r18239 | cbiere | 2011-01-09 16:24:44 -0500 (Sun, 09 Jan 2011) | 2 lines

Moved canonize_path() to url_canonize_path().

------------------------------------------------------------------------
r18238 | cbiere | 2011-01-09 16:12:12 -0500 (Sun, 09 Jan 2011) | 3 lines

Cache the result of need_get_non_stdio() internally instead of adding a
second function.

------------------------------------------------------------------------
r18237 | rmanfredi | 2011-01-09 12:56:16 -0500 (Sun, 09 Jan 2011) | 3 lines

Moved logging of whether low file descriptors need to be reserved for stdio
to settings_init(), once we have determined what the logging level is.

------------------------------------------------------------------------
r18236 | rmanfredi | 2011-01-09 11:37:20 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18235 | rmanfredi | 2011-01-09 11:36:38 -0500 (Sun, 09 Jan 2011) | 2 lines

Forgot the $(_EXE) suffix.

------------------------------------------------------------------------
r18234 | rmanfredi | 2011-01-09 10:09:23 -0500 (Sun, 09 Jan 2011) | 2 lines

Handle Configure's new archlib variable.

------------------------------------------------------------------------
r18233 | rmanfredi | 2011-01-09 09:37:59 -0500 (Sun, 09 Jan 2011) | 2 lines

make_pathname(): factorize check for file starting with the separator character.

------------------------------------------------------------------------
r18232 | rmanfredi | 2011-01-09 09:28:12 -0500 (Sun, 09 Jan 2011) | 3 lines

load_symbols(): allow for stripped executables, relying on the installed nm
file to load symbols in that case.

------------------------------------------------------------------------
r18231 | rmanfredi | 2011-01-09 09:26:03 -0500 (Sun, 09 Jan 2011) | 2 lines

make_pathname(): better handling of '/' as a separator.

------------------------------------------------------------------------
r18230 | rmanfredi | 2011-01-09 09:21:05 -0500 (Sun, 09 Jan 2011) | 3 lines

make_pathname(): don't add a "\" to the pathname if none is already present,
given that "/" is a perfectly valid separator on all systems.

------------------------------------------------------------------------
r18229 | rmanfredi | 2011-01-09 09:15:43 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18228 | rmanfredi | 2011-01-09 09:00:50 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18227 | rmanfredi | 2011-01-09 08:59:13 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated with newest jmake template.

------------------------------------------------------------------------
r18226 | rmanfredi | 2011-01-09 08:53:57 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18225 | rmanfredi | 2011-01-09 08:53:10 -0500 (Sun, 09 Jan 2011) | 2 lines

Use ARCHLIB for storing architecture-dependent files.

------------------------------------------------------------------------
r18224 | rmanfredi | 2011-01-09 08:50:16 -0500 (Sun, 09 Jan 2011) | 5 lines

Reduced UDP solicited and incoming connection window to 30 mimutes.
inet_where(): only show a debugging stack if symbols were loaded.
inet_udp_got_unsolicited_incoming(): added debugging trace when receiving
unsolicited UDP and we thought we were UDP-firewalled.

------------------------------------------------------------------------
r18223 | rmanfredi | 2011-01-09 07:59:23 -0500 (Sun, 09 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18222 | rmanfredi | 2011-01-09 07:58:07 -0500 (Sun, 09 Jan 2011) | 2 lines

Generate and install gtk-gnutella.nm to be able to get symbolic stack traces.

------------------------------------------------------------------------
r18221 | rmanfredi | 2011-01-09 07:43:29 -0500 (Sun, 09 Jan 2011) | 2 lines

Added stacktrace_where_sym_print_offset().

------------------------------------------------------------------------
r18220 | rmanfredi | 2011-01-09 07:17:30 -0500 (Sun, 09 Jan 2011) | 2 lines

Forgot to include "fd.h" for is_open_fd().

------------------------------------------------------------------------
r18219 | rmanfredi | 2011-01-09 06:51:05 -0500 (Sun, 09 Jan 2011) | 6 lines

[GTK] New users were never able to see the preset filters in the menu.
filter_init_presets(): the preset filters were never added to the drop-down
list because filter_apply_changes() was not called to commit the changes.
They could only appear when loading user-defined filters from a previous
session, since at that time a commit of the changes was also done.

------------------------------------------------------------------------
r18218 | cbiere | 2011-01-09 06:45:48 -0500 (Sun, 09 Jan 2011) | 3 lines

mingw_dup2(): Also workaround dup2(fd, fd) bug on Windows.
mingw_fcntl(): Use mingw_dup2() instead of dup2().

------------------------------------------------------------------------
r18217 | rmanfredi | 2011-01-09 05:48:10 -0500 (Sun, 09 Jan 2011) | 3 lines

At startup, force UDP firewalled status if TCP is firewalled, as a conservative
precaution.

------------------------------------------------------------------------
r18216 | rmanfredi | 2011-01-09 04:50:46 -0500 (Sun, 09 Jan 2011) | 2 lines

Avoid use of uninitialized other[].

------------------------------------------------------------------------
r18215 | rmanfredi | 2011-01-09 04:44:25 -0500 (Sun, 09 Jan 2011) | 2 lines

Suppressed warnings on Windows, where socklen_t is signed.

------------------------------------------------------------------------
r18214 | rmanfredi | 2011-01-09 04:35:17 -0500 (Sun, 09 Jan 2011) | 4 lines

Declared mingw_dup2().
Removed "mingw protections" which are no longer necessary since the underlying
code works correctly on Windows now.

------------------------------------------------------------------------
r18213 | rmanfredi | 2011-01-09 04:29:22 -0500 (Sun, 09 Jan 2011) | 2 lines

Fixed compilation warnings.

------------------------------------------------------------------------
r18212 | rmanfredi | 2011-01-08 18:28:53 -0500 (Sat, 08 Jan 2011) | 3 lines

Traps and remaps dup2() on Windows to ajust the return code the UNIX way
and compute errno appropriately.

------------------------------------------------------------------------
r18211 | rmanfredi | 2011-01-08 18:21:34 -0500 (Sat, 08 Jan 2011) | 4 lines

fcntl(F_DUPFD): iterate until getdtablesize().
Adjusted indentation to be the same as F_SETLK, which avoids needless
shifting to the right.

------------------------------------------------------------------------
r18210 | cbiere | 2011-01-07 20:48:17 -0500 (Fri, 07 Jan 2011) | 2 lines

fcntl(fd, F_DUPFD, min): Also check that min is acceptable.

------------------------------------------------------------------------
r18209 | cbiere | 2011-01-07 20:31:15 -0500 (Fri, 07 Jan 2011) | 3 lines

fcntl(): Use _get_osfhandle() instead of _eof() to check file descriptors for
being opened.

------------------------------------------------------------------------
r18208 | cbiere | 2011-01-07 20:19:05 -0500 (Fri, 07 Jan 2011) | 3 lines

Apparently dup2() may return 0 on success instead of fd.
fcntl(): Make sure errno is actually set when dup2() failed.

------------------------------------------------------------------------
r18207 | cbiere | 2011-01-07 19:17:52 -0500 (Fri, 07 Jan 2011) | 2 lines

Added FIXME tags regarding potentially unnecessary special casing of MINGW.

------------------------------------------------------------------------
r18206 | cbiere | 2011-01-07 19:08:44 -0500 (Fri, 07 Jan 2011) | 2 lines

reserve_standard_file_descriptors(): Made it more robust.

------------------------------------------------------------------------
r18205 | cbiere | 2011-01-07 18:53:21 -0500 (Fri, 07 Jan 2011) | 2 lines

Added is_open_fd() and some documentation.

------------------------------------------------------------------------
r18204 | cbiere | 2011-01-07 18:43:13 -0500 (Fri, 07 Jan 2011) | 2 lines

fcntl(): Explicitely check for EBADF and use GetLastError() instead of errno.

------------------------------------------------------------------------
r18203 | cbiere | 2011-01-07 18:33:11 -0500 (Fri, 07 Jan 2011) | 3 lines

fcntl() must return EBADF if fd is not opened in all cases.
_eof() seems to be preferred over eof().

------------------------------------------------------------------------
r18202 | cbiere | 2011-01-07 17:55:30 -0500 (Fri, 07 Jan 2011) | 4 lines

fcntl() with F_DUPFD: Use eof() to detect used file descriptors which should
be cheaper than dup() and does not require close(). Also avoid dup2(fd, fd)
and set errno if the loop determinated without a call to dup().

------------------------------------------------------------------------
r18201 | cbiere | 2011-01-07 17:52:40 -0500 (Fri, 07 Jan 2011) | 2 lines

Added IGNORE_RESULT() because on crash nobody cares about failures of write().

------------------------------------------------------------------------
r18200 | rmanfredi | 2011-01-07 16:48:53 -0500 (Fri, 07 Jan 2011) | 2 lines

Forgot a break.

------------------------------------------------------------------------
r18199 | rmanfredi | 2011-01-07 15:05:55 -0500 (Fri, 07 Jan 2011) | 2 lines

Changed default column sizes for the gnutella statistics pane.

------------------------------------------------------------------------
r18198 | rmanfredi | 2011-01-07 15:04:39 -0500 (Fri, 07 Jan 2011) | 2 lines

gnet_stats_gui_shutdown(): was not saving tree view column positions.

------------------------------------------------------------------------
r18197 | rmanfredi | 2011-01-07 11:14:18 -0500 (Fri, 07 Jan 2011) | 2 lines

Shut up on datagram reception errors with errno == ECONNRESET.

------------------------------------------------------------------------
r18196 | rmanfredi | 2011-01-07 10:21:18 -0500 (Fri, 07 Jan 2011) | 3 lines

fcntl(F_DUPFD): once we determined ``i'' was free, no need to retry on a
failed dup2().

------------------------------------------------------------------------
r18195 | rmanfredi | 2011-01-07 10:19:16 -0500 (Fri, 07 Jan 2011) | 2 lines

Fixed F_DUPFD emulation now, hopefully.

------------------------------------------------------------------------
r18194 | rmanfredi | 2011-01-07 09:41:08 -0500 (Fri, 07 Jan 2011) | 3 lines

Added stacktrace_where_sym_print() to print a stacktrace only if it can
be symbolic, somehow.

------------------------------------------------------------------------
r18193 | rmanfredi | 2011-01-07 09:37:54 -0500 (Fri, 07 Jan 2011) | 3 lines

Correct implementation of F_DUPFD.
Random cleanup.

------------------------------------------------------------------------
r18192 | cbiere | 2011-01-07 08:45:50 -0500 (Fri, 07 Jan 2011) | 5 lines

Rename file_object_stat() to file_object_fstat() because the former was
misleading.
Return the result of fstat() without converting it to a boolean as this is
more straight-forward and reduces code (no need for "!= -1" and "!").

------------------------------------------------------------------------
r18191 | cbiere | 2011-01-07 08:23:41 -0500 (Fri, 07 Jan 2011) | 2 lines

Added FIXME tag regarding invalid F_DUPFD implementation.

------------------------------------------------------------------------
r18190 | rmanfredi | 2011-01-07 07:57:55 -0500 (Fri, 07 Jan 2011) | 3 lines

Renamed old str_chmop() as strchomp().
Added str_chomp() to the new dynamic string package.

------------------------------------------------------------------------
r18189 | rmanfredi | 2011-01-07 06:26:56 -0500 (Fri, 07 Jan 2011) | 2 lines

Avoid uninitialized usage suspicion from compiler.

------------------------------------------------------------------------
r18188 | rmanfredi | 2011-01-07 06:15:14 -0500 (Fri, 07 Jan 2011) | 2 lines

Made the script work under MinGW where no svn is installed.

------------------------------------------------------------------------
r18187 | rmanfredi | 2011-01-07 05:58:49 -0500 (Fri, 07 Jan 2011) | 4 lines

create_download(): suppressed the use_mesh argument.  This is now computed
by the routine directly to avoid needless and repetitive mesh scanning when
there cannot be anything new to process anyway.

------------------------------------------------------------------------
r18186 | rmanfredi | 2011-01-07 05:34:34 -0500 (Fri, 07 Jan 2011) | 3 lines

Suppressed compiler warnings.
Added support for F_DUPFD, just in case (should not be triggered today).

------------------------------------------------------------------------
r18185 | rmanfredi | 2011-01-07 05:30:00 -0500 (Fri, 07 Jan 2011) | 7 lines

Added file_object_unlink(), which will close opened descriptors on Windows
before attempting to unlink the file.
Converted the background move task to use file objects for reading the source
file and use file_object_unlink() when it's done.
Removed file_object_revoke() which is no longer required as it is now handled
through file_object_unlink().

------------------------------------------------------------------------
r18184 | cbiere | 2011-01-06 18:12:22 -0500 (Thu, 06 Jan 2011) | 2 lines

Prefer is_running_on_mingw() over #ifdef MINGW32.

------------------------------------------------------------------------
r18183 | cbiere | 2011-01-06 17:54:29 -0500 (Thu, 06 Jan 2011) | 2 lines

Avoid clashes with potentially defined macros using POSIX identifiers.

------------------------------------------------------------------------
r18182 | rmanfredi | 2011-01-06 17:48:12 -0500 (Thu, 06 Jan 2011) | 2 lines

Documented recent findings.

------------------------------------------------------------------------
r18181 | rmanfredi | 2011-01-06 17:12:27 -0500 (Thu, 06 Jan 2011) | 2 lines

file_object_rename(): was not restoring errno on failure.

------------------------------------------------------------------------
r18180 | rmanfredi | 2011-01-06 17:09:42 -0500 (Thu, 06 Jan 2011) | 2 lines

do_open(): warn when asked to open an absolute file and the path is relative.

------------------------------------------------------------------------
r18179 | rmanfredi | 2011-01-06 17:08:06 -0500 (Thu, 06 Jan 2011) | 4 lines

Added file_object_rename() for safe file renaming on Windows.
As a consequence, we now need to use file_object_revoke() only when the file
was actually moved accross filesystems.

------------------------------------------------------------------------
r18178 | rmanfredi | 2011-01-06 17:02:03 -0500 (Thu, 06 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18177 | rmanfredi | 2011-01-06 17:00:08 -0500 (Thu, 06 Jan 2011) | 2 lines

Removed socket_set_nonblocking().

------------------------------------------------------------------------
r18176 | cbiere | 2011-01-06 16:43:25 -0500 (Thu, 06 Jan 2011) | 2 lines

Removed unused files.

------------------------------------------------------------------------
r18175 | rmanfredi | 2011-01-06 15:50:16 -0500 (Thu, 06 Jan 2011) | 2 lines

Made is_same_file() work correctly on Windows.

------------------------------------------------------------------------
r18174 | rmanfredi | 2011-01-06 05:38:09 -0500 (Thu, 06 Jan 2011) | 2 lines

Code must use socket_non_blocking() on sockets to have any effect on Windows.

------------------------------------------------------------------------
r18173 | rmanfredi | 2011-01-06 05:35:03 -0500 (Thu, 06 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18172 | rmanfredi | 2011-01-06 05:33:19 -0500 (Thu, 06 Jan 2011) | 2 lines

Added src/lib/socket.[ch].

------------------------------------------------------------------------
r18171 | rmanfredi | 2011-01-06 02:32:14 -0500 (Thu, 06 Jan 2011) | 3 lines

Reverted to an argumentless version of #define shutdown, because this ends
up being the less intrusive option.

------------------------------------------------------------------------
r18170 | rmanfredi | 2011-01-06 01:45:58 -0500 (Thu, 06 Jan 2011) | 3 lines

Allow compilation under Windows now that we #define shutdown(x,y): cpp does
not like ->shutdown(x).

------------------------------------------------------------------------
r18169 | rmanfredi | 2011-01-05 18:23:15 -0500 (Wed, 05 Jan 2011) | 2 lines

Explicitly #define shutdown(x,y) to avoid having to #undef shutdown.

------------------------------------------------------------------------
r18168 | rmanfredi | 2011-01-05 18:08:10 -0500 (Wed, 05 Jan 2011) | 2 lines

Made sure we can include the "shutdown" command as well under Windows.

------------------------------------------------------------------------
r18167 | rmanfredi | 2011-01-05 17:55:13 -0500 (Wed, 05 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18166 | rmanfredi | 2011-01-05 17:36:50 -0500 (Wed, 05 Jan 2011) | 2 lines

Removed two #ifdef MINGW32.

------------------------------------------------------------------------
r18165 | rmanfredi | 2011-01-05 17:36:10 -0500 (Wed, 05 Jan 2011) | 2 lines

Always define mingw_init() and mingw_close().

------------------------------------------------------------------------
r18164 | rmanfredi | 2011-01-05 17:21:03 -0500 (Wed, 05 Jan 2011) | 3 lines

compat_accept_check(): add random CPU noise before denying access when
client presents a wrong cookie.

------------------------------------------------------------------------
r18163 | rmanfredi | 2011-01-05 16:55:30 -0500 (Wed, 05 Jan 2011) | 2 lines

Made the shell work on Windows.

------------------------------------------------------------------------
r18162 | rmanfredi | 2011-01-05 13:28:55 -0500 (Wed, 05 Jan 2011) | 2 lines

Stumbled on fd_close().

------------------------------------------------------------------------
r18161 | rmanfredi | 2011-01-05 13:15:19 -0500 (Wed, 05 Jan 2011) | 3 lines

Added file_close() to be able to close a file descriptor if not -1 already
and reset it to -1 after closing.

------------------------------------------------------------------------
r18160 | rmanfredi | 2011-01-05 03:22:14 -0500 (Wed, 05 Jan 2011) | 2 lines

Moved mingw_init() up so that it is run before we enter the shell.

------------------------------------------------------------------------
r18159 | rmanfredi | 2011-01-04 18:24:09 -0500 (Tue, 04 Jan 2011) | 2 lines

Less and less /8 networks are bogus now.

------------------------------------------------------------------------
r18158 | rmanfredi | 2011-01-04 18:21:58 -0500 (Tue, 04 Jan 2011) | 2 lines

Updated.

------------------------------------------------------------------------
r18157 | rmanfredi | 2011-01-04 17:58:12 -0500 (Tue, 04 Jan 2011) | 2 lines

Added comment.

------------------------------------------------------------------------
r18156 | rmanfredi | 2011-01-04 17:54:19 -0500 (Tue, 04 Jan 2011) | 2 lines

Replaced occurrences of "struct compat_sockaddr_un" with the matching typedef.

------------------------------------------------------------------------
r18155 | rmanfredi | 2011-01-04 17:44:13 -0500 (Tue, 04 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18154 | rmanfredi | 2011-01-04 17:17:17 -0500 (Tue, 04 Jan 2011) | 2 lines

Fixed compilation on Windows.

------------------------------------------------------------------------
r18153 | rmanfredi | 2011-01-04 17:15:34 -0500 (Tue, 04 Jan 2011) | 2 lines

Avoid warning when compiling for Windows.

------------------------------------------------------------------------
r18152 | rmanfredi | 2011-01-04 16:51:20 -0500 (Tue, 04 Jan 2011) | 2 lines

Fixed comment typos.

------------------------------------------------------------------------
r18151 | rmanfredi | 2011-01-04 16:49:54 -0500 (Tue, 04 Jan 2011) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18150 | rmanfredi | 2011-01-04 16:48:17 -0500 (Tue, 04 Jan 2011) | 2 lines

Added UNIX socket emulation layer to allow shell connections on Windows.

------------------------------------------------------------------------
r18149 | rmanfredi | 2011-01-04 15:55:14 -0500 (Tue, 04 Jan 2011) | 2 lines

crash_handler(): fixed inverted logic.

------------------------------------------------------------------------
r18148 | rmanfredi | 2011-01-03 08:05:41 -0500 (Mon, 03 Jan 2011) | 2 lines

crash_hander(): give raise() another chance during recursion.

------------------------------------------------------------------------
r18147 | rmanfredi | 2011-01-03 08:02:55 -0500 (Mon, 03 Jan 2011) | 3 lines

crash_handler(): allow for recursive trapping of harmful signals, with
progressive degradation on the amount of features we offer.

------------------------------------------------------------------------
r18146 | rmanfredi | 2011-01-03 08:00:30 -0500 (Mon, 03 Jan 2011) | 4 lines

set_signal(): attempt to use raw signal() on Windows.  Change semantics for
SIGBUS and SIGSEGV: for reset to default handler on delivery and unblock
signals in handler.

------------------------------------------------------------------------
r18145 | cbiere | 2011-01-03 07:37:27 -0500 (Mon, 03 Jan 2011) | 2 lines

Don't use inline before its guaranteed to be available..

------------------------------------------------------------------------
r18144 | cbiere | 2011-01-03 07:36:28 -0500 (Mon, 03 Jan 2011) | 2 lines

soap_process_reply(): Avoid pointless use of C99 features.

------------------------------------------------------------------------
r18143 | cbiere | 2011-01-03 07:35:34 -0500 (Mon, 03 Jan 2011) | 2 lines

Fixed compilation of stand-alone build.

------------------------------------------------------------------------
r18142 | cbiere | 2011-01-03 07:20:14 -0500 (Mon, 03 Jan 2011) | 2 lines

Keep enum values in range of int.

------------------------------------------------------------------------
r18141 | cbiere | 2011-01-03 07:18:14 -0500 (Mon, 03 Jan 2011) | 2 lines

socket_is_local(): Use assertion for impossible case.

------------------------------------------------------------------------
r18140 | rmanfredi | 2011-01-03 06:42:51 -0500 (Mon, 03 Jan 2011) | 4 lines

Protected all sockaddr_un usage with #ifdef HAS_SOCKADDR_UN.
No need to remap sockaddr_un to sockaddr_in on MinGW.  Even if it compiled,
it would not work properly anyway.

------------------------------------------------------------------------
r18139 | rmanfredi | 2011-01-03 05:46:23 -0500 (Mon, 03 Jan 2011) | 2 lines

Added check for presence of struct sockaddr_un.

------------------------------------------------------------------------
r18138 | rmanfredi | 2011-01-03 04:12:39 -0500 (Mon, 03 Jan 2011) | 2 lines

Fixed compilation under Windows.

------------------------------------------------------------------------
r18137 | cbiere | 2011-01-02 19:35:35 -0500 (Sun, 02 Jan 2011) | 3 lines

Removed unnecessary socket_set_nonblocking().
Replaced more MINGW32 checks.

------------------------------------------------------------------------
r18136 | cbiere | 2011-01-02 19:27:42 -0500 (Sun, 02 Jan 2011) | 3 lines

Replaced #ifdef with is_running_on_mingw() where possible for readability.
Added FIXME tags.

------------------------------------------------------------------------
r18135 | cbiere | 2011-01-02 19:21:32 -0500 (Sun, 02 Jan 2011) | 3 lines

Use volatile sig_atomic just in case.
log_init(): Disable stderr buffering instead of fflush() in log_handler().

------------------------------------------------------------------------
r18134 | cbiere | 2011-01-02 19:17:40 -0500 (Sun, 02 Jan 2011) | 2 lines

mingw_filename_nearby(): Don't require knowledge of the executable's name.

------------------------------------------------------------------------
r18133 | cbiere | 2011-01-02 19:15:21 -0500 (Sun, 02 Jan 2011) | 2 lines

Added is_dir_separator().

------------------------------------------------------------------------
r18132 | cbiere | 2011-01-02 19:12:56 -0500 (Sun, 02 Jan 2011) | 3 lines

Added is_running_on_mingw().
Added comments and FIXME tags concerning MINGW.

------------------------------------------------------------------------
r18131 | cbiere | 2011-01-02 19:11:32 -0500 (Sun, 02 Jan 2011) | 3 lines

Recognize Teredo addresses, too.
Replaced host_addr_6to4_to_ipv4() with host_addr_tunnel_client().

------------------------------------------------------------------------
r18130 | rmanfredi | 2011-01-02 15:15:17 -0500 (Sun, 02 Jan 2011) | 6 lines

Added http_field_starts_with() to check for initial token in a header field.
Added http_parameter_get() to extract named parameters from a header field.
Added support for explicit charset setting for XML parsing.
The SOAP layer now extracts the advertised charset in HTTP replies, if any
present, and configures the XML parser accordingly.

------------------------------------------------------------------------
r18129 | cbiere | 2011-01-01 22:58:34 -0500 (Sat, 01 Jan 2011) | 3 lines

Got rid of several unnecessary #ifdef MINGW32 by handling the actual problem.
Always use the socks_user property for SOCKS proxies.

------------------------------------------------------------------------
r18128 | rmanfredi | 2011-01-01 19:05:54 -0500 (Sat, 01 Jan 2011) | 2 lines

Prefer isfinite() to hacky "nv * 0 == 0" test.

------------------------------------------------------------------------
r18127 | rmanfredi | 2011-01-01 18:53:40 -0500 (Sat, 01 Jan 2011) | 2 lines

Fixed uninitialized 'p'.

------------------------------------------------------------------------
r18126 | rmanfredi | 2011-01-01 18:34:34 -0500 (Sat, 01 Jan 2011) | 2 lines

Before calling frexp(), make sure the float is defined.

------------------------------------------------------------------------
r18125 | rmanfredi | 2011-01-01 17:46:30 -0500 (Sat, 01 Jan 2011) | 2 lines

str_vncatf(): removed useless code.

------------------------------------------------------------------------
r18124 | rmanfredi | 2011-01-01 17:00:37 -0500 (Sat, 01 Jan 2011) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r18123 | rmanfredi | 2011-01-01 16:53:01 -0500 (Sat, 01 Jan 2011) | 2 lines

Use backtrace() if available to unwind the stack, instead of GCC macros.

------------------------------------------------------------------------
r18122 | cbiere | 2011-01-01 16:48:14 -0500 (Sat, 01 Jan 2011) | 2 lines

str_vncatf(): Don't recycle "i", use a local variable in each local context.

------------------------------------------------------------------------
r18121 | cbiere | 2011-01-01 16:29:34 -0500 (Sat, 01 Jan 2011) | 5 lines

str_vncatf():
	zeros must be size_t.
	Added local variable "hex" to avoid double use of "p".
	Use clamp_*() functions for clarity.

------------------------------------------------------------------------
r18120 | cbiere | 2011-01-01 16:24:20 -0500 (Sat, 01 Jan 2011) | 2 lines

Added clamp_memset() for convenience.

------------------------------------------------------------------------
r18119 | rmanfredi | 2011-01-01 16:08:10 -0500 (Sat, 01 Jan 2011) | 2 lines

Suppress compiler warning when not compiling with TRACK_ZALLOC or TRACK_MALLOC.

------------------------------------------------------------------------
r18118 | rmanfredi | 2011-01-01 15:52:43 -0500 (Sat, 01 Jan 2011) | 3 lines

Used pointer_hash_func() as the hash function in hash tables using pointers
as keys, instead of the default "direct hashing".

------------------------------------------------------------------------
r18117 | rmanfredi | 2011-01-01 15:50:25 -0500 (Sat, 01 Jan 2011) | 3 lines

Made pointer_hash_func() a non-inline function since it is always passed
as a pointer anyway, so it can't be inlined.

------------------------------------------------------------------------
r18116 | rmanfredi | 2011-01-01 15:26:17 -0500 (Sat, 01 Jan 2011) | 6 lines

Spread some more const.
Added str_new_not_leaking() so that both the string object and the arena
can be declared as not leaking.
buf_vprintf(): when vsnprintf() is missing, use str_vprintf() now instead
of g_strdup_vprintf().

------------------------------------------------------------------------
r18115 | rmanfredi | 2011-01-01 15:15:26 -0500 (Sat, 01 Jan 2011) | 3 lines

Added NOT_LEAKING_Z() for zalloc() and walloc() blocks.
zalloc_not_leaking(): protect against calls made very early during startup.

------------------------------------------------------------------------
r18114 | rmanfredi | 2011-01-01 14:01:31 -0500 (Sat, 01 Jan 2011) | 5 lines

No longer append a hidden trailing NUL during string operations.  However,
reserve memory for it in case they call str_2c(), which they will ultimately.
Made routines that can do nothing in case the index is out-of-bounds return
a boolean stating whether the operation was done.

------------------------------------------------------------------------
r18113 | rmanfredi | 2011-01-01 12:05:08 -0500 (Sat, 01 Jan 2011) | 3 lines

Minor style fixes.
str_ncat(): enforce presence of trailing NUL in buffer.

------------------------------------------------------------------------
r18112 | rmanfredi | 2011-01-01 11:19:08 -0500 (Sat, 01 Jan 2011) | 3 lines

Spread more const.
Use NULL, not 0 for pointers.

------------------------------------------------------------------------
r18111 | rmanfredi | 2011-01-01 11:06:55 -0500 (Sat, 01 Jan 2011) | 2 lines

Forgot to adjust pre-conditions to allow (size_t) -1 on input.

------------------------------------------------------------------------
r18110 | rmanfredi | 2011-01-01 11:00:49 -0500 (Sat, 01 Jan 2011) | 3 lines

Use (size_t) -1 as an indication that the length needs to be computed.
Removed any UMR threat in str_shift().

------------------------------------------------------------------------
r18109 | cbiere | 2011-01-01 10:00:50 -0500 (Sat, 01 Jan 2011) | 2 lines

Solved one FIXME issue.

------------------------------------------------------------------------
r18108 | rmanfredi | 2011-01-01 09:07:48 -0500 (Sat, 01 Jan 2011) | 4 lines

stack_unwind(): be extra careful in case the stack is corrupted.
stacktrace_where_cautious_print_offset(): call the stack unwinding
directly to be able to warn on a probable stack corruption.

------------------------------------------------------------------------
r18107 | cbiere | 2011-01-01 08:10:52 -0500 (Sat, 01 Jan 2011) | 10 lines

str_resize(): Removed unused and unnecessary return value.
str_vncat(): Stick to const where useful.
Replaced Nullch with standardized NULL.
Replaced MAXINT/MININT with standardized INT_MAX/INT_MIN.
Format %s with NULL arg is rare, not even valid, no need for optimization.
Handle base 10 explicitely and fail otherwise as it can't happen.
Replaced some loops with memcpy/memset.
Added FIXME tag regarding UMR.
Added FIXME tag regarding (-INT_MIN).

------------------------------------------------------------------------
r18106 | rmanfredi | 2011-01-01 07:47:09 -0500 (Sat, 01 Jan 2011) | 2 lines

Added SPAM counters to know where spam identification comes from.

------------------------------------------------------------------------
r18105 | rmanfredi | 2011-01-01 06:42:51 -0500 (Sat, 01 Jan 2011) | 2 lines

Slightly shortened long routine name to make user code fit in 80 columns.

------------------------------------------------------------------------
r18104 | rmanfredi | 2011-01-01 05:31:13 -0500 (Sat, 01 Jan 2011) | 4 lines

Only export str_s2c_null(), to avoid confusion with similar str_2c() call.
Also, since the string handle becomes invalid, it's best to nullify the pointer.
Made sure str_s2c() is never called on a static object.

------------------------------------------------------------------------
r18103 | bpringlemeir | 2010-12-31 18:30:09 -0500 (Fri, 31 Dec 2010) | 1 line

Use HFREE_NULL() for config_comment string.
------------------------------------------------------------------------
r18102 | rmanfredi | 2010-12-31 18:20:34 -0500 (Fri, 31 Dec 2010) | 2 lines

Restored optimization in is_strcaseprefix(), with comment.

------------------------------------------------------------------------
r18101 | rmanfredi | 2010-12-31 18:08:44 -0500 (Fri, 31 Dec 2010) | 2 lines

MIME type and subtypes are case-insensitive.

------------------------------------------------------------------------
r18100 | rmanfredi | 2010-12-31 18:08:04 -0500 (Fri, 31 Dec 2010) | 2 lines

MIME types and subtypes are case-insensitive.

------------------------------------------------------------------------
r18099 | rmanfredi | 2010-12-31 18:01:58 -0500 (Fri, 31 Dec 2010) | 2 lines

Added strtok_case_has() for case-insensitive lookups.

------------------------------------------------------------------------
r18098 | rmanfredi | 2010-12-31 18:00:27 -0500 (Fri, 31 Dec 2010) | 4 lines

is_strcaseprefix(): no need to compare a and b, only compare the output
of ascii_tolower() since that routine acts as the identity function for non
upper-cased characters.

------------------------------------------------------------------------
r18097 | cbiere | 2010-12-31 13:33:05 -0500 (Fri, 31 Dec 2010) | 2 lines

More saturation arithmetic.

------------------------------------------------------------------------
r18096 | cbiere | 2010-12-31 13:19:22 -0500 (Fri, 31 Dec 2010) | 2 lines

Extended pattern.

------------------------------------------------------------------------
r18095 | rmanfredi | 2010-12-31 13:14:50 -0500 (Fri, 31 Dec 2010) | 2 lines

Use saturating arithmetic to avoid size_t overflows.

------------------------------------------------------------------------
r18094 | rmanfredi | 2010-12-31 13:06:36 -0500 (Fri, 31 Dec 2010) | 2 lines

ostream_write(): was missing a break statement.

------------------------------------------------------------------------
r18093 | cbiere | 2010-12-31 12:58:59 -0500 (Fri, 31 Dec 2010) | 2 lines

Must include halloc.h.

------------------------------------------------------------------------
r18092 | cbiere | 2010-12-31 12:57:31 -0500 (Fri, 31 Dec 2010) | 4 lines

Suppress useless compiler warnings regarding uninitialized variables.
Added FIXME tag due to possible bug.
Can't return more than SSIZE_MAX with ssize_t.

------------------------------------------------------------------------
r18091 | cbiere | 2010-12-31 12:48:33 -0500 (Fri, 31 Dec 2010) | 4 lines

Removed bad type casts.
Fixed incorrect use of ctype functions by alternatives.
Added FIXME tags regarding integer overflows.

------------------------------------------------------------------------
r18090 | rmanfredi | 2010-12-31 12:34:28 -0500 (Fri, 31 Dec 2010) | 2 lines

Fixed typos.

------------------------------------------------------------------------
r18089 | rmanfredi | 2010-12-31 12:24:34 -0500 (Fri, 31 Dec 2010) | 2 lines

Only pass MAXINT as maximum size to str_vncatf() to keep it "positive".

------------------------------------------------------------------------
r18088 | rmanfredi | 2010-12-31 11:06:14 -0500 (Fri, 31 Dec 2010) | 5 lines

Fixed memory leak.
No need to call http_async_close() on EOF, the HTTP layer does it for us.
Apparently, SOAP specs don't mention that there must be any XML prologue,
so don't send it.

------------------------------------------------------------------------
r18087 | rmanfredi | 2010-12-31 11:00:49 -0500 (Fri, 31 Dec 2010) | 4 lines

Moved gnet_host_vec_to_string() out of GUI code into the lib.
Fixed memory leak in html_view.c.
Got rid of GString.

------------------------------------------------------------------------
r18086 | rmanfredi | 2010-12-31 07:18:24 -0500 (Fri, 31 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18085 | rmanfredi | 2010-12-31 07:16:02 -0500 (Fri, 31 Dec 2010) | 2 lines

Added string handling package to phase out usage of GString.

------------------------------------------------------------------------
r18084 | rmanfredi | 2010-12-30 19:07:39 -0500 (Thu, 30 Dec 2010) | 2 lines

Usage of is_strprefix() alone to check for Content-Type was not satisfactory.

------------------------------------------------------------------------
r18083 | rmanfredi | 2010-12-30 18:37:21 -0500 (Thu, 30 Dec 2010) | 2 lines

soap_process_reply(): must always enter the loop, even if XML node is NULL.

------------------------------------------------------------------------
r18082 | rmanfredi | 2010-12-30 18:29:51 -0500 (Thu, 30 Dec 2010) | 2 lines

Added SOAP trace / debug properties.

------------------------------------------------------------------------
r18081 | rmanfredi | 2010-12-30 18:26:05 -0500 (Thu, 30 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18080 | rmanfredi | 2010-12-30 18:24:52 -0500 (Thu, 30 Dec 2010) | 2 lines

Added SOAP layer.

------------------------------------------------------------------------
r18079 | rmanfredi | 2010-12-30 18:21:01 -0500 (Thu, 30 Dec 2010) | 2 lines

Aded support for asynchronous HTTP POST.

------------------------------------------------------------------------
r18078 | rmanfredi | 2010-12-30 18:01:38 -0500 (Thu, 30 Dec 2010) | 3 lines

xfmt_tree_dump(): use ostream_close(), not ostream_close_file() because
we do not want to close "f" as well.

------------------------------------------------------------------------
r18077 | rmanfredi | 2010-12-30 17:55:21 -0500 (Thu, 30 Dec 2010) | 2 lines

xnode_detach(): use parent->x, not xn->parent->x after nullifying xn->parent.

------------------------------------------------------------------------
r18076 | rmanfredi | 2010-12-30 17:45:42 -0500 (Thu, 30 Dec 2010) | 4 lines

Added debugging xnode_to_string() and friends.
Added xnode_within_namespace() and xnode_is_element_named() conveniences.
Added xnode_detach() to detach a node from the tree.

------------------------------------------------------------------------
r18075 | rmanfredi | 2010-12-30 17:43:10 -0500 (Thu, 30 Dec 2010) | 4 lines

Added xfmt_tree_dump() convenience routine.
xfmt_uri_declare(): must distinguish between an URI being seen in an element
or in an attribute for accurate "multiple occurrence" computation.

------------------------------------------------------------------------
r18074 | rmanfredi | 2010-12-30 15:30:59 -0500 (Thu, 30 Dec 2010) | 2 lines

Don't use str_chomp() on a const string.

------------------------------------------------------------------------
r18073 | rmanfredi | 2010-12-30 10:39:35 -0500 (Thu, 30 Dec 2010) | 2 lines

Forgot to declare ostream_open_pmsg().

------------------------------------------------------------------------
r18072 | rmanfredi | 2010-12-30 10:26:29 -0500 (Thu, 30 Dec 2010) | 2 lines

ostream_close_file(): documented returned value.

------------------------------------------------------------------------
r18071 | rmanfredi | 2010-12-30 10:13:54 -0500 (Thu, 30 Dec 2010) | 2 lines

Remove trailing "\n" from DBus error messages before logging.

------------------------------------------------------------------------
r18070 | rmanfredi | 2010-12-30 06:58:45 -0500 (Thu, 30 Dec 2010) | 3 lines

XML tree formatter can now collect declared "prefix -> URI" mappings from
elements and reuse them during the generation.

------------------------------------------------------------------------
r18069 | rmanfredi | 2010-12-29 15:21:09 -0500 (Wed, 29 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18068 | rmanfredi | 2010-12-29 15:18:33 -0500 (Wed, 29 Dec 2010) | 2 lines

Added an XML tree formatter, capable of dumping to memory or to a file.

------------------------------------------------------------------------
r18067 | rmanfredi | 2010-12-29 12:44:44 -0500 (Wed, 29 Dec 2010) | 4 lines

Testing shows that modern Windows versions support filesystem with holes,
on NTFS or FAT32 partitions.  No need to activate DOSISH behaviour when
compiling for Windows then.

------------------------------------------------------------------------
r18066 | rmanfredi | 2010-12-29 07:58:05 -0500 (Wed, 29 Dec 2010) | 2 lines

Reverted last fix, which was incorrect.  Culprit was in stacktrace.c.

------------------------------------------------------------------------
r18065 | rmanfredi | 2010-12-29 07:51:21 -0500 (Wed, 29 Dec 2010) | 2 lines

Do not show assertion_failure() and assertion_warning() in the stack trace.

------------------------------------------------------------------------
r18064 | rmanfredi | 2010-12-29 05:38:47 -0500 (Wed, 29 Dec 2010) | 2 lines

Added RFC describing URIs.

------------------------------------------------------------------------
r18063 | rmanfredi | 2010-12-29 03:41:13 -0500 (Wed, 29 Dec 2010) | 3 lines

cachepag(): when page was already in the cache, return TRUE regardless of
whether we flushed the page successfully since we keep data in memory for now.

------------------------------------------------------------------------
r18062 | rmanfredi | 2010-12-28 17:37:41 -0500 (Tue, 28 Dec 2010) | 2 lines

Added nv_pair_make_static_str().

------------------------------------------------------------------------
r18061 | rmanfredi | 2010-12-28 16:07:13 -0500 (Tue, 28 Dec 2010) | 3 lines

cachepag(): prepare for the new page created by makroom() to be already present
in the cache, but it should be empty and clean (in other words, a hole).

------------------------------------------------------------------------
r18060 | rmanfredi | 2010-12-28 09:00:15 -0500 (Tue, 28 Dec 2010) | 2 lines

Added h_strdup_len_vprintf().

------------------------------------------------------------------------
r18059 | rmanfredi | 2010-12-28 06:17:09 -0500 (Tue, 28 Dec 2010) | 2 lines

Made sure parsed XML tree is correct.

------------------------------------------------------------------------
r18058 | rmanfredi | 2010-12-28 06:02:18 -0500 (Tue, 28 Dec 2010) | 2 lines

Remove leading '_' from all routine names on Windows.

------------------------------------------------------------------------
r18057 | rmanfredi | 2010-12-28 05:49:12 -0500 (Tue, 28 Dec 2010) | 2 lines

Removed ':' from the list of harmful shell meta-characters.

------------------------------------------------------------------------
r18056 | nonamer | 2010-12-28 05:25:44 -0500 (Tue, 28 Dec 2010) | 1 line

Fixes compilation error on windows
------------------------------------------------------------------------
r18055 | rmanfredi | 2010-12-28 05:24:42 -0500 (Tue, 28 Dec 2010) | 3 lines

Added support for symbolic stack traces on Windows: if a gtk-gnutella.nm file
exists besides the gtk-gnutella.exe file, it is loaded to get routine names.

------------------------------------------------------------------------
r18054 | rmanfredi | 2010-12-28 05:06:10 -0500 (Tue, 28 Dec 2010) | 2 lines

Added mingw_filename_nearby().

------------------------------------------------------------------------
r18053 | rmanfredi | 2010-12-28 03:26:36 -0500 (Tue, 28 Dec 2010) | 2 lines

Use gm_hash_table_contains().

------------------------------------------------------------------------
r18052 | rmanfredi | 2010-12-28 03:24:09 -0500 (Tue, 28 Dec 2010) | 2 lines

Prefer h_strndup() over g_strndup().

------------------------------------------------------------------------
r18051 | rmanfredi | 2010-12-28 03:21:43 -0500 (Tue, 28 Dec 2010) | 2 lines

Added gm_hash_table_contains().

------------------------------------------------------------------------
r18050 | rmanfredi | 2010-12-27 19:00:42 -0500 (Mon, 27 Dec 2010) | 2 lines

Attempt ultimate stack tracing at crash time, if not already done.

------------------------------------------------------------------------
r18049 | cbiere | 2010-12-27 18:24:18 -0500 (Mon, 27 Dec 2010) | 2 lines

Extended rule.

------------------------------------------------------------------------
r18048 | cbiere | 2010-12-27 18:14:02 -0500 (Mon, 27 Dec 2010) | 2 lines

Added range.

------------------------------------------------------------------------
r18047 | cbiere | 2010-12-27 18:10:12 -0500 (Mon, 27 Dec 2010) | 4 lines

On Windows we must allow fd > FD_SETSIZE because file descriptors have arbitrary
values and are not assigned consecutively.
Fixed inverted logic in my previous commit.

------------------------------------------------------------------------
r18046 | cbiere | 2010-12-27 17:59:26 -0500 (Mon, 27 Dec 2010) | 2 lines

Corrected rules.

------------------------------------------------------------------------
r18045 | rmanfredi | 2010-12-27 17:56:28 -0500 (Mon, 27 Dec 2010) | 2 lines

emulate_poll_with_select(): removed costly check on Windows.

------------------------------------------------------------------------
r18044 | rmanfredi | 2010-12-27 17:51:58 -0500 (Mon, 27 Dec 2010) | 2 lines

Disabled debugging assertions but left them in place for documenting purposes.

------------------------------------------------------------------------
r18043 | rmanfredi | 2010-12-27 17:46:40 -0500 (Mon, 27 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18042 | rmanfredi | 2010-12-27 17:45:35 -0500 (Mon, 27 Dec 2010) | 2 lines

Added vxml_parse_tree() to create an XML tree out of the parsed data.

------------------------------------------------------------------------
r18041 | cbiere | 2010-12-27 17:43:12 -0500 (Mon, 27 Dec 2010) | 2 lines

Added rules.

------------------------------------------------------------------------
r18040 | cbiere | 2010-12-27 17:21:06 -0500 (Mon, 27 Dec 2010) | 2 lines

Prevent signedness mismatches in file descriptor comparions.

------------------------------------------------------------------------
r18039 | cbiere | 2010-12-27 17:14:33 -0500 (Mon, 27 Dec 2010) | 3 lines

Removed some debug left-over.
Replaced UNSIGNED() with cast_to_fd().

------------------------------------------------------------------------
r18038 | cbiere | 2010-12-27 17:09:28 -0500 (Mon, 27 Dec 2010) | 2 lines

Added cast_to_fd() and is_valid_fd().

------------------------------------------------------------------------
r18037 | rmanfredi | 2010-12-27 11:58:22 -0500 (Mon, 27 Dec 2010) | 2 lines

Added nv_table_insert_str().

------------------------------------------------------------------------
r18036 | rmanfredi | 2010-12-27 11:27:34 -0500 (Mon, 27 Dec 2010) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r18035 | rmanfredi | 2010-12-27 10:02:50 -0500 (Mon, 27 Dec 2010) | 3 lines

Added stacktrace_where_cautious_print_offset().
On assertion failures, attempt to dump a stack trace as well.

------------------------------------------------------------------------
r18034 | rmanfredi | 2010-12-27 09:57:23 -0500 (Mon, 27 Dec 2010) | 3 lines

header_reset(): now that we have a magic number and reference counting, we
cannot blindly reset the whole object.

------------------------------------------------------------------------
r18033 | rmanfredi | 2010-12-27 09:47:25 -0500 (Mon, 27 Dec 2010) | 2 lines

Added crash_signame().

------------------------------------------------------------------------
r18032 | cbiere | 2010-12-27 08:57:41 -0500 (Mon, 27 Dec 2010) | 4 lines

Replaced iovec_* macros with static inline functions.
Synchronized iovec_* macros with commont variant.
connect_http(): iovec_set_len() returns no value anymore.

------------------------------------------------------------------------
r18031 | rmanfredi | 2010-12-27 08:39:37 -0500 (Mon, 27 Dec 2010) | 2 lines

Expanded leading file comment.

------------------------------------------------------------------------
r18030 | rmanfredi | 2010-12-27 08:38:43 -0500 (Mon, 27 Dec 2010) | 2 lines

Prefer h_strndup() over g_strndup() when possible.

------------------------------------------------------------------------
r18029 | rmanfredi | 2010-12-27 07:02:58 -0500 (Mon, 27 Dec 2010) | 2 lines

vxml_read_char(): forgot to set *uc to 0 on fatal errors.

------------------------------------------------------------------------
r18028 | rmanfredi | 2010-12-27 07:01:22 -0500 (Mon, 27 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18027 | rmanfredi | 2010-12-27 06:59:54 -0500 (Mon, 27 Dec 2010) | 2 lines

Added proper management of XML attributes.

------------------------------------------------------------------------
r18026 | rmanfredi | 2010-12-27 04:54:25 -0500 (Mon, 27 Dec 2010) | 2 lines

Made the VA_COPY() comment even more explicit to avoid mis-interpretation.

------------------------------------------------------------------------
r18025 | rmanfredi | 2010-12-27 04:49:28 -0500 (Mon, 27 Dec 2010) | 2 lines

Added some usage comments on VA_COPY() for maintenance reference.

------------------------------------------------------------------------
r18024 | rmanfredi | 2010-12-27 04:48:06 -0500 (Mon, 27 Dec 2010) | 4 lines

h_strdup_vprintf(): removed wrong va_end() call, which is already done by the
caller.  This caused two va_end() being done on the argument list supplied
to h_strdup_printf(), probably causing havoc on some platforms.

------------------------------------------------------------------------
r18023 | rmanfredi | 2010-12-26 16:01:18 -0500 (Sun, 26 Dec 2010) | 2 lines

Prefer h_strndup() over g_strndup() when possible to limit heap usage.

------------------------------------------------------------------------
r18022 | rmanfredi | 2010-12-26 15:43:01 -0500 (Sun, 26 Dec 2010) | 4 lines

Use a more efficient representation for ordered nv_table() than an ohash_table.
An hash_list_t with suitable hashing/equality routines is sufficient and
imposes less memory and CPU overhead.

------------------------------------------------------------------------
r18021 | rmanfredi | 2010-12-26 15:41:17 -0500 (Sun, 26 Dec 2010) | 2 lines

Added G_GNUC_PRINTF() attributes to s_warning() and s_info().

------------------------------------------------------------------------
r18020 | rmanfredi | 2010-12-26 15:13:53 -0500 (Sun, 26 Dec 2010) | 5 lines

vxml_parser_error(): remove use of VA_COPY(), which seems un-needed here as
the variable arg list is only used once.  The routine is not used anywhere in
the code today, so it is unlikely that this was causing a problem on 64-bit
machines.

------------------------------------------------------------------------
r18019 | cbiere | 2010-12-23 10:45:58 -0500 (Thu, 23 Dec 2010) | 4 lines

vxml_parser_debug(): Added missing VA_COPY() which caused weird but
reproduceable behaviour in test case "bad prefix2" with vxml_debug below 6.
Added missing G_GNUC_FORMAT() attribute to prototypes to avoid format string bugs.

------------------------------------------------------------------------
r18018 | cbiere | 2010-12-23 10:13:38 -0500 (Thu, 23 Dec 2010) | 3 lines

Fixed bugs in vxml_namespace_make(): len was calculated but not used. Also
	the complete uri buffer was accessed and copied ignoring uri_len.

------------------------------------------------------------------------
r18017 | cbiere | 2010-12-23 06:06:32 -0500 (Thu, 23 Dec 2010) | 5 lines

Fixed -pedantic gcc warnings:
Keep enum values in range of int.
Omit comma at end of enumerator lists.
Use %f instead of %lf for printf-interfaces.

------------------------------------------------------------------------
r18016 | cbiere | 2010-12-22 21:01:38 -0500 (Wed, 22 Dec 2010) | 3 lines

compat_poll(): Reordered code so that WSAPoll() is used if available with
	fallback to select().

------------------------------------------------------------------------
r18015 | cbiere | 2010-12-22 20:38:23 -0500 (Wed, 22 Dec 2010) | 2 lines

I/O handling with poll() should be working now.

------------------------------------------------------------------------
r18014 | rmanfredi | 2010-12-22 13:44:34 -0500 (Wed, 22 Dec 2010) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r18013 | rmanfredi | 2010-12-22 13:43:26 -0500 (Wed, 22 Dec 2010) | 2 lines

Symbol table uses un-ordered name/value table.

------------------------------------------------------------------------
r18012 | rmanfredi | 2010-12-22 13:38:03 -0500 (Wed, 22 Dec 2010) | 2 lines

inputevt_close(): was not cleaning up poll_ctx->pollfds.

------------------------------------------------------------------------
r18011 | rmanfredi | 2010-12-22 13:34:00 -0500 (Wed, 22 Dec 2010) | 2 lines

Hide struct getline, and add magic number protection.

------------------------------------------------------------------------
r18010 | rmanfredi | 2010-12-22 13:32:57 -0500 (Wed, 22 Dec 2010) | 4 lines

Must not use gm_slist_free_null() here but a direct g_slist_free() since
we do not want gm_slist_free_null() to use the remapped g_slist_free()
when compiled under TRACK_MALLOC.

------------------------------------------------------------------------
r18009 | rmanfredi | 2010-12-22 12:40:56 -0500 (Wed, 22 Dec 2010) | 3 lines

The name/value table can now be optionally ordered.
Use an ordered table to record attributes during XML parsing.

------------------------------------------------------------------------
r18008 | rmanfredi | 2010-12-22 12:36:04 -0500 (Wed, 22 Dec 2010) | 2 lines

Updated leading comment.

------------------------------------------------------------------------
r18007 | rmanfredi | 2010-12-22 12:13:04 -0500 (Wed, 22 Dec 2010) | 2 lines

Added map_destroy_null().

------------------------------------------------------------------------
r18006 | rmanfredi | 2010-12-22 12:06:04 -0500 (Wed, 22 Dec 2010) | 2 lines

Added the ordered hash table as an implementation of a map.

------------------------------------------------------------------------
r18005 | rmanfredi | 2010-12-22 12:03:58 -0500 (Wed, 22 Dec 2010) | 4 lines

By symetry with other hash tables, use _destroy and not _free for destroying
the ordered hash table.
Added ohash_table_contains().

------------------------------------------------------------------------
r18004 | rmanfredi | 2010-12-22 11:49:00 -0500 (Wed, 22 Dec 2010) | 3 lines

Added ohash_table_t, an hash table keeping track of the key insertion order
and which can be traversed in that order.

------------------------------------------------------------------------
r18003 | rmanfredi | 2010-12-22 08:15:42 -0500 (Wed, 22 Dec 2010) | 2 lines

Updated leading description.

------------------------------------------------------------------------
r18002 | rmanfredi | 2010-12-21 07:29:33 -0500 (Tue, 21 Dec 2010) | 2 lines

Enforce valid namespace prefixes when parsing with namespace support.

------------------------------------------------------------------------
r18001 | rmanfredi | 2010-12-20 17:35:17 -0500 (Mon, 20 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r18000 | rmanfredi | 2010-12-20 17:33:39 -0500 (Mon, 20 Dec 2010) | 2 lines

Added support for XML namespaces.

------------------------------------------------------------------------
r17999 | rmanfredi | 2010-12-20 17:27:18 -0500 (Mon, 20 Dec 2010) | 2 lines

Added support for a name/value pair free routine.

------------------------------------------------------------------------
r17998 | rmanfredi | 2010-12-20 13:40:19 -0500 (Mon, 20 Dec 2010) | 4 lines

Added foreach iterators on the nv_table_t object.
Added nv_pair_free_value().
Spread some const.

------------------------------------------------------------------------
r17997 | rmanfredi | 2010-12-20 09:23:20 -0500 (Mon, 20 Dec 2010) | 2 lines

utf8_decode_char_buffer(): explicitly test for zero length.

------------------------------------------------------------------------
r17996 | rmanfredi | 2010-12-20 09:18:01 -0500 (Mon, 20 Dec 2010) | 2 lines

Manually adjusted lines not fitting in 80 columns.

------------------------------------------------------------------------
r17995 | rmanfredi | 2010-12-20 07:14:04 -0500 (Mon, 20 Dec 2010) | 3 lines

Path entries now managed with a structure to avoid spurious and needless
re-tokenization and regroup together what needs to be handled consistently.

------------------------------------------------------------------------
r17994 | rmanfredi | 2010-12-20 06:16:29 -0500 (Mon, 20 Dec 2010) | 4 lines

Initial support for sub-parsing.
Also strip namespace from attributes with VXML_O_STRIP_NS.
Detect duplicate attributes and optionally reject them with an error.

------------------------------------------------------------------------
r17993 | rmanfredi | 2010-12-19 13:41:50 -0500 (Sun, 19 Dec 2010) | 2 lines

Replaced "guint" with "unsigned".

------------------------------------------------------------------------
r17992 | rmanfredi | 2010-12-19 12:52:10 -0500 (Sun, 19 Dec 2010) | 9 lines

Added vxml_parser_depth(), vxml_parser_current_element(),
vxml_parser_parent_element() and vxml_parser_nth_parent_element() for
processing callbacks to query the parser.
As such, simplified the callback signatures by removing depth and path, which
are only seldom needed in practice and can now be queried if necessary.
For internal routines called from another internal routine, removed the
vxml_parser_check() initial assertion, which is really required only when
called from "user land".

------------------------------------------------------------------------
r17991 | rmanfredi | 2010-12-19 05:07:52 -0500 (Sun, 19 Dec 2010) | 5 lines

Made vxml_token_lookup() visible so that parsing callbacks may easily
tokenize string constants without writing their own lookup.
Added VXML_O_STRIP_BLANKS parsing option to strip leading and trailing blanks
in text, avoiding notifying callbacks for white spaces in the document.

------------------------------------------------------------------------
r17990 | rmanfredi | 2010-12-18 14:48:12 -0500 (Sat, 18 Dec 2010) | 2 lines

Added nv_table_lookup_str() convenience routine.

------------------------------------------------------------------------
r17989 | rmanfredi | 2010-12-18 14:23:49 -0500 (Sat, 18 Dec 2010) | 2 lines

Added user-defined errors.

------------------------------------------------------------------------
r17988 | rmanfredi | 2010-12-18 14:22:33 -0500 (Sat, 18 Dec 2010) | 2 lines

Added url_is_absolute() and url_absolute_within().

------------------------------------------------------------------------
r17987 | rmanfredi | 2010-12-18 14:21:29 -0500 (Sat, 18 Dec 2010) | 2 lines

Made h_strdup_vprintf() visible.

------------------------------------------------------------------------
r17986 | rmanfredi | 2010-12-18 12:22:16 -0500 (Sat, 18 Dec 2010) | 3 lines

Fixed indentation of canonize_path() which was not matching that of the other
routines.

------------------------------------------------------------------------
r17985 | rmanfredi | 2010-12-18 12:10:59 -0500 (Sat, 18 Dec 2010) | 2 lines

Hide struct url_params.

------------------------------------------------------------------------
r17984 | rmanfredi | 2010-12-18 12:10:25 -0500 (Sat, 18 Dec 2010) | 2 lines

Use new nv_pair_value_str().

------------------------------------------------------------------------
r17983 | rmanfredi | 2010-12-18 12:09:44 -0500 (Sat, 18 Dec 2010) | 2 lines

Added nv_pair_value_str() and nv_table_count().

------------------------------------------------------------------------
r17982 | rmanfredi | 2010-12-18 06:47:44 -0500 (Sat, 18 Dec 2010) | 2 lines

Added RFC 2774, describing the HTTP Extension Framework.

------------------------------------------------------------------------
r17981 | rmanfredi | 2010-12-18 06:25:26 -0500 (Sat, 18 Dec 2010) | 2 lines

Suppress compilation warnings on MinGW.

------------------------------------------------------------------------
r17980 | rmanfredi | 2010-12-17 18:48:50 -0500 (Fri, 17 Dec 2010) | 2 lines

Fixed typo in last commit.

------------------------------------------------------------------------
r17979 | rmanfredi | 2010-12-17 18:42:41 -0500 (Fri, 17 Dec 2010) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r17978 | rmanfredi | 2010-12-17 17:01:57 -0500 (Fri, 17 Dec 2010) | 2 lines

Implemented the VXML_O_NS_STRIP option for namespace stripping.

------------------------------------------------------------------------
r17977 | rmanfredi | 2010-12-17 16:38:12 -0500 (Fri, 17 Dec 2010) | 2 lines

Added new files.

------------------------------------------------------------------------
r17976 | rmanfredi | 2010-12-17 16:37:38 -0500 (Fri, 17 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17975 | rmanfredi | 2010-12-17 16:36:36 -0500 (Fri, 17 Dec 2010) | 5 lines

Added stacktrace_where_safe_print_offset() and made stacktrace_load_symbols()
visible.
Now that stack tracing routines can be called from log_handler(), be very
careful when logging to avoid fatal recursions.

------------------------------------------------------------------------
r17974 | rmanfredi | 2010-12-17 16:34:56 -0500 (Fri, 17 Dec 2010) | 2 lines

Added reference counting if header_t structures for asynchronous HTTP.

------------------------------------------------------------------------
r17973 | rmanfredi | 2010-12-17 16:33:23 -0500 (Fri, 17 Dec 2010) | 2 lines

Added debugging properties for UPnP and the XML layer.

------------------------------------------------------------------------
r17972 | rmanfredi | 2010-12-17 16:31:47 -0500 (Fri, 17 Dec 2010) | 2 lines

Added gm_xprintf_is_signal_safe().

------------------------------------------------------------------------
r17971 | rmanfredi | 2010-12-17 16:31:10 -0500 (Fri, 17 Dec 2010) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r17970 | rmanfredi | 2010-12-17 16:30:28 -0500 (Fri, 17 Dec 2010) | 2 lines

Enhancements to allow XML parsing.

------------------------------------------------------------------------
r17969 | rmanfredi | 2010-12-17 16:28:06 -0500 (Fri, 17 Dec 2010) | 2 lines

Show stacktrace on assertion_warning().

------------------------------------------------------------------------
r17968 | rmanfredi | 2010-12-17 16:27:23 -0500 (Fri, 17 Dec 2010) | 2 lines

Updated comment now that "struct iovec" must not be used.

------------------------------------------------------------------------
r17967 | rmanfredi | 2010-12-17 16:26:22 -0500 (Fri, 17 Dec 2010) | 2 lines

Moved logging routines out of main.c.

------------------------------------------------------------------------
r17966 | rmanfredi | 2010-12-17 16:24:46 -0500 (Fri, 17 Dec 2010) | 2 lines

Added versatile XML parser + name/value pair tables.

------------------------------------------------------------------------
r17965 | rmanfredi | 2010-12-16 14:34:41 -0500 (Thu, 16 Dec 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17964 | rmanfredi | 2010-12-16 07:10:38 -0500 (Thu, 16 Dec 2010) | 2 lines

Typo in comment.

------------------------------------------------------------------------
r17963 | rmanfredi | 2010-12-16 04:27:21 -0500 (Thu, 16 Dec 2010) | 3 lines

Added debugging defines to show what's going on and conditionally compile
"safety" assertions easily.

------------------------------------------------------------------------
r17962 | rmanfredi | 2010-12-14 19:14:21 -0500 (Tue, 14 Dec 2010) | 3 lines

Use g_main_context_set_poll_func() instead of deprecated routine
g_main_set_poll_func().

------------------------------------------------------------------------
r17961 | rmanfredi | 2010-12-14 19:12:06 -0500 (Tue, 14 Dec 2010) | 3 lines

Added default implementation for g_main_context_set_poll_func() and
g_main_context_get_poll_func() for glib 1.2.

------------------------------------------------------------------------
r17960 | rmanfredi | 2010-12-14 17:37:05 -0500 (Tue, 14 Dec 2010) | 2 lines

Suppress all compilation warnings on Windows.

------------------------------------------------------------------------
r17959 | rmanfredi | 2010-12-14 17:31:42 -0500 (Tue, 14 Dec 2010) | 2 lines

Fixed compilation under Windows to avoid warnings.

------------------------------------------------------------------------
r17958 | rmanfredi | 2010-12-14 17:20:12 -0500 (Tue, 14 Dec 2010) | 2 lines

mingw_poll(): fixed return error code when not supported.

------------------------------------------------------------------------
r17957 | rmanfredi | 2010-12-14 17:13:23 -0500 (Tue, 14 Dec 2010) | 2 lines

Was missing a MINGW32 protection on mingw_close() call.

------------------------------------------------------------------------
r17956 | rmanfredi | 2010-12-14 17:13:19 -0500 (Tue, 14 Dec 2010) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r17955 | rmanfredi | 2010-12-14 17:10:39 -0500 (Tue, 14 Dec 2010) | 4 lines

Problem is more complex: HAS_WSAPOLL is not correctly determined by Configure
since there is no static binding for WSAPoll() in MinGW.  A runtime check
is required.

------------------------------------------------------------------------
r17954 | rmanfredi | 2010-12-14 16:47:49 -0500 (Tue, 14 Dec 2010) | 3 lines

Make sure compat_poll() falls back to WSAPoll() if that routine is available.
This relies on HAS_WSAPOLL being correctly set by Configure.

------------------------------------------------------------------------
r17953 | nonamer | 2010-12-14 14:04:13 -0500 (Tue, 14 Dec 2010) | 1 line

Use WSAPoll on windows if available, fallback to compat_poll if not available.
------------------------------------------------------------------------
r17952 | rmanfredi | 2010-12-14 03:56:10 -0500 (Tue, 14 Dec 2010) | 2 lines

Suppressed warnings on Windows.

------------------------------------------------------------------------
r17951 | nonamer | 2010-12-14 03:55:23 -0500 (Tue, 14 Dec 2010) | 2 lines

* Adds mingw_init
* Moved socket init on windows to mingw_init
------------------------------------------------------------------------
r17950 | rmanfredi | 2010-12-14 03:50:38 -0500 (Tue, 14 Dec 2010) | 2 lines

Bis repetita placet.

------------------------------------------------------------------------
r17949 | rmanfredi | 2010-12-14 03:49:21 -0500 (Tue, 14 Dec 2010) | 2 lines

update_poll_event(): avoid compilation warning.

------------------------------------------------------------------------
r17948 | rmanfredi | 2010-12-14 03:46:46 -0500 (Tue, 14 Dec 2010) | 3 lines

Fixed broken logic for get_non_stdio_fd() on Windows.
Removed compilation warnings on Windows.

------------------------------------------------------------------------
r17947 | nonamer | 2010-12-14 02:40:32 -0500 (Tue, 14 Dec 2010) | 1 line

 char error should actually by a DWORD error. So the int error should do fine
------------------------------------------------------------------------
r17946 | cbiere | 2010-12-13 19:14:31 -0500 (Mon, 13 Dec 2010) | 2 lines

Fixed archaic int casts in debug messages.

------------------------------------------------------------------------
r17945 | cbiere | 2010-12-13 18:40:46 -0500 (Mon, 13 Dec 2010) | 3 lines

Removed emulated recvmsg().
mingw_s_readv(): Corrected return type to ssize_t.

------------------------------------------------------------------------
r17944 | rmanfredi | 2010-12-13 16:48:45 -0500 (Mon, 13 Dec 2010) | 2 lines

Added missing inclusion of lib/parse.h for parse_major_minor().

------------------------------------------------------------------------
r17943 | rmanfredi | 2010-12-13 16:47:29 -0500 (Mon, 13 Dec 2010) | 2 lines

Moved parse_major_minor() from misc.c to parse.c.

------------------------------------------------------------------------
r17942 | nonamer | 2010-12-13 16:42:30 -0500 (Mon, 13 Dec 2010) | 1 line

Removed unnecessary assertion checks
------------------------------------------------------------------------
r17941 | nonamer | 2010-12-13 14:45:27 -0500 (Mon, 13 Dec 2010) | 2 lines

* Adds assertion checks for readv error
* Fixes readv error on mingw32 for sockets
------------------------------------------------------------------------
r17940 | nonamer | 2010-12-13 13:10:03 -0500 (Mon, 13 Dec 2010) | 2 lines

* SO_ACCEPTCONN is invalid for DGRAM type, use SO_TYPE for is_valid_socket detection instead.
* Log error if select returns an error
------------------------------------------------------------------------
r17939 | nonamer | 2010-12-13 12:48:29 -0500 (Mon, 13 Dec 2010) | 1 line

Fix crash when UPnP was not detected
------------------------------------------------------------------------
r17938 | cbiere | 2010-12-12 19:58:59 -0500 (Sun, 12 Dec 2010) | 3 lines

poll_func(): Removed timeout hack. The issue was a symptom for the previously
	fixed bug with poll() and closed file descriptors.

------------------------------------------------------------------------
r17937 | cbiere | 2010-12-12 19:54:12 -0500 (Sun, 12 Dec 2010) | 4 lines

Fixed bug with poll(): Removed file descriptors weren't set to -1 in the
pollfd array so that they were used after close() resulting in ENOTSOCK
in compat_poll() on Windows.

------------------------------------------------------------------------
r17936 | cbiere | 2010-12-12 19:46:05 -0500 (Sun, 12 Dec 2010) | 2 lines

Fixed prototype of compat_poll().

------------------------------------------------------------------------
r17935 | cbiere | 2010-12-12 18:38:06 -0500 (Sun, 12 Dec 2010) | 2 lines

inputevt_add(): Added check to prevent polling anything but socket or pipes.

------------------------------------------------------------------------
r17934 | rmanfredi | 2010-12-12 18:37:31 -0500 (Sun, 12 Dec 2010) | 4 lines

Avoid dangling opening '{' due to #ifdef.
Principle of least surprise: use #ifdef MINGW32 instead of #ifndef since there
is a #else counterpart.

------------------------------------------------------------------------
r17933 | cbiere | 2010-12-12 18:33:56 -0500 (Sun, 12 Dec 2010) | 3 lines

Added is_a_fifo().
is_a_socket(): Use fstat() instead of getsockopt() if possible.

------------------------------------------------------------------------
r17932 | cbiere | 2010-12-12 18:15:59 -0500 (Sun, 12 Dec 2010) | 2 lines

Added is_a_socket().

------------------------------------------------------------------------
r17931 | cbiere | 2010-12-12 18:13:12 -0500 (Sun, 12 Dec 2010) | 3 lines

socket_udp_event(): Added FIXME tag. This needs documentation or should be
	corrected as it seems to be a misunderstanding.

------------------------------------------------------------------------
r17930 | nonamer | 2010-12-12 16:12:37 -0500 (Sun, 12 Dec 2010) | 1 line

Added assertion checks in mingw read functions
------------------------------------------------------------------------
r17929 | nonamer | 2010-12-12 14:44:43 -0500 (Sun, 12 Dec 2010) | 1 line

Check that fd is a socket before adding to the select() list.
------------------------------------------------------------------------
r17928 | cbiere | 2010-12-12 13:59:37 -0500 (Sun, 12 Dec 2010) | 2 lines

More fixes for bypassing GLib.

------------------------------------------------------------------------
r17927 | nonamer | 2010-12-12 13:42:40 -0500 (Sun, 12 Dec 2010) | 1 line

Adds errno setting to select() on windows
------------------------------------------------------------------------
r17926 | cbiere | 2010-12-12 13:40:33 -0500 (Sun, 12 Dec 2010) | 2 lines

Bypass GLib completely on MingW and dispatch manually.

------------------------------------------------------------------------
r17925 | cbiere | 2010-12-12 13:21:25 -0500 (Sun, 12 Dec 2010) | 2 lines

Attempt to fix file descriptor detection.

------------------------------------------------------------------------
r17924 | cbiere | 2010-12-12 12:59:05 -0500 (Sun, 12 Dec 2010) | 3 lines

Use compat_poll() instead of poll().
Added workaround preventing CPU thrashing.

------------------------------------------------------------------------
r17923 | cbiere | 2010-12-12 12:13:44 -0500 (Sun, 12 Dec 2010) | 3 lines

Use GLib's default poll function instead of compat_poll() for GLib's internal
file descriptors.

------------------------------------------------------------------------
r17922 | cbiere | 2010-12-12 11:53:19 -0500 (Sun, 12 Dec 2010) | 2 lines

compat_poll() with GLib IO channels is not necessary or useful.

------------------------------------------------------------------------
r17921 | cbiere | 2010-12-12 11:48:34 -0500 (Sun, 12 Dec 2010) | 2 lines

Experimental use of poll() without GLib for systems without better alternatives.

------------------------------------------------------------------------
r17920 | cbiere | 2010-12-12 10:55:55 -0500 (Sun, 12 Dec 2010) | 2 lines

mingw_fcntl(): Calculate length and offset pairs for F_SETLK.

------------------------------------------------------------------------
r17919 | cbiere | 2010-12-12 09:35:11 -0500 (Sun, 12 Dec 2010) | 2 lines

mingw_recvfrom(): Must use WSABUF for WSARecvFrom().

------------------------------------------------------------------------
r17918 | cbiere | 2010-12-12 09:29:29 -0500 (Sun, 12 Dec 2010) | 2 lines

mingw_recvfrom(): Use internal ifromLen in case socklen_t is not INT.

------------------------------------------------------------------------
r17917 | nonamer | 2010-12-12 09:13:19 -0500 (Sun, 12 Dec 2010) | 1 line

Minor compilation issues on windows
------------------------------------------------------------------------
r17916 | cbiere | 2010-12-12 08:35:50 -0500 (Sun, 12 Dec 2010) | 2 lines

compat_poll(): Also skip ignored file descriptors after select().

------------------------------------------------------------------------
r17915 | cbiere | 2010-12-12 08:31:58 -0500 (Sun, 12 Dec 2010) | 4 lines

compat_poll(): Changed second parameter to unsigned int for prototype
	compability. Also handle only at maximum FD_SETSIZE number of
	file descriptors.

------------------------------------------------------------------------
r17914 | cbiere | 2010-12-12 08:01:17 -0500 (Sun, 12 Dec 2010) | 2 lines

mingw_recvfrom(): Use addrlen pointer directly.

------------------------------------------------------------------------
r17913 | cbiere | 2010-12-12 07:56:44 -0500 (Sun, 12 Dec 2010) | 2 lines

mingw_recvfrom(): Added missing variable declaration.

------------------------------------------------------------------------
r17912 | rmanfredi | 2010-12-12 07:39:12 -0500 (Sun, 12 Dec 2010) | 5 lines

Regenerated Configure.
Fixed MANIFEST, removing files not committed yet.
Remove poll() defined from mingw32.h
Regenerated src/lib/Makefile.SH.

------------------------------------------------------------------------
r17911 | rmanfredi | 2010-12-12 07:35:04 -0500 (Sun, 12 Dec 2010) | 2 lines

Extracted compat_poll() into lib/.

------------------------------------------------------------------------
r17910 | cbiere | 2010-12-12 07:29:47 -0500 (Sun, 12 Dec 2010) | 2 lines

Don't try to emulate recvmsg() using WSARecvFrom() but use it for recvfrom().

------------------------------------------------------------------------
r17909 | rmanfredi | 2010-12-12 07:26:19 -0500 (Sun, 12 Dec 2010) | 2 lines

Fixed comment typo.

------------------------------------------------------------------------
r17908 | rmanfredi | 2010-12-12 07:24:17 -0500 (Sun, 12 Dec 2010) | 2 lines

Fixed too long a line.

------------------------------------------------------------------------
r17907 | cbiere | 2010-12-12 07:20:35 -0500 (Sun, 12 Dec 2010) | 2 lines

Check for availability of recvmsg().

------------------------------------------------------------------------
r17906 | cbiere | 2010-12-12 06:56:57 -0500 (Sun, 12 Dec 2010) | 2 lines

socket_udp_accept(): Use recvfrom() if recvmsg() is not available.

------------------------------------------------------------------------
r17905 | rmanfredi | 2010-12-12 05:43:57 -0500 (Sun, 12 Dec 2010) | 2 lines

Shuffled around some Windows bits to restore compilability.

------------------------------------------------------------------------
r17904 | rmanfredi | 2010-12-12 05:17:53 -0500 (Sun, 12 Dec 2010) | 3 lines

Fixed Configure to properly detect some features on Windows.
Hence removed forceful symbol definitions before calling Configure on MinGW.

------------------------------------------------------------------------
r17903 | rmanfredi | 2010-12-12 04:19:41 -0500 (Sun, 12 Dec 2010) | 4 lines

socket_udp_accept(): fixed conditional compilation for the part attempting
to detect datagram truncation so that we don't have to force something that
does not exist on Windows.

------------------------------------------------------------------------
r17902 | rmanfredi | 2010-12-11 18:48:02 -0500 (Sat, 11 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17901 | cbiere | 2010-12-11 14:32:11 -0500 (Sat, 11 Dec 2010) | 3 lines

socket_addr_getsockname(): Don't use is_host_addr() because for listening
	sockets this may be 0.0.0.0 respectively ::.

------------------------------------------------------------------------
r17900 | cbiere | 2010-12-11 14:07:54 -0500 (Sat, 11 Dec 2010) | 6 lines

Added comments explaining the loose interface.
Changed macro defintions abusing HAS_ prefix to clearer USE_ prefix.
Renamed misleading USE_POLL to USE_GLIB_IO_CHANNELS.
Added support for poll() and WSAPoll() with GLib IO Channels which
should allow using an arbitrary number of sockets with Vista or newer.

------------------------------------------------------------------------
r17899 | cbiere | 2010-12-11 13:33:40 -0500 (Sat, 11 Dec 2010) | 2 lines

Fixed linker flag.

------------------------------------------------------------------------
r17898 | cbiere | 2010-12-11 11:57:35 -0500 (Sat, 11 Dec 2010) | 2 lines

Must link against Ws2_32.dll on Windows for select().

------------------------------------------------------------------------
r17897 | cbiere | 2010-12-11 10:47:38 -0500 (Sat, 11 Dec 2010) | 3 lines

Check for presence of Winsock2.h for select().
Check for presence of sys/select.h before including it.

------------------------------------------------------------------------
r17896 | cbiere | 2010-12-11 10:30:32 -0500 (Sat, 11 Dec 2010) | 4 lines

Check for availability of WSAPoll().
Detect presence of Winsock.h file.
Removed unnecessary special casing of filesize_t on MingW.

------------------------------------------------------------------------
r17895 | rmanfredi | 2010-12-11 04:02:41 -0500 (Sat, 11 Dec 2010) | 4 lines

Added http_header_parse() to parse HTTP headers from a buffer.
Changed signature of http_async_wget() callback to include the HTTP status
code and the HTTP headers, to be able to interpret the payload correctly.

------------------------------------------------------------------------
r17894 | rmanfredi | 2010-12-10 08:04:06 -0500 (Fri, 10 Dec 2010) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r17893 | rmanfredi | 2010-12-09 16:04:11 -0500 (Thu, 09 Dec 2010) | 2 lines

Added GM_LIST_FOREACH().

------------------------------------------------------------------------
r17892 | rmanfredi | 2010-12-09 16:03:24 -0500 (Thu, 09 Dec 2010) | 2 lines

Simplified code by removing useless fifo_real_t and just keeping fifo_t opaque.

------------------------------------------------------------------------
r17891 | rmanfredi | 2010-12-08 17:23:22 -0500 (Wed, 08 Dec 2010) | 3 lines

Added gm_slist_free_null(), gm_list_free_null() and
gm_hash_table_destroy_null() for easier cleanup.

------------------------------------------------------------------------
r17890 | rmanfredi | 2010-12-08 17:04:24 -0500 (Wed, 08 Dec 2010) | 2 lines

Set explicit protocol in the socket() call.

------------------------------------------------------------------------
r17889 | rmanfredi | 2010-12-08 15:30:20 -0500 (Wed, 08 Dec 2010) | 2 lines

Added addrinfo_to_addr().

------------------------------------------------------------------------
r17888 | rmanfredi | 2010-12-06 06:31:27 -0500 (Mon, 06 Dec 2010) | 2 lines

Fixed compilation warnings on Windows.

------------------------------------------------------------------------
r17887 | rmanfredi | 2010-12-06 05:44:39 -0500 (Mon, 06 Dec 2010) | 2 lines

Fixed compilation warnings.

------------------------------------------------------------------------
r17886 | rmanfredi | 2010-12-05 09:16:06 -0500 (Sun, 05 Dec 2010) | 5 lines

Updated async HTTP layer to use the RX stack for data reception, thereby
fully supporting HTTP/1.1 and preparing for chunked output.
Make sure the RX stack sets errno before indicating an error.
Added high-level API http_async_wget().

------------------------------------------------------------------------
r17885 | rmanfredi | 2010-12-05 07:54:20 -0500 (Sun, 05 Dec 2010) | 2 lines

Fixed compilation warning.

------------------------------------------------------------------------
r17884 | rmanfredi | 2010-12-05 05:05:32 -0500 (Sun, 05 Dec 2010) | 2 lines

Added bandwidth schedulers for private (LAN) addresses.

------------------------------------------------------------------------
r17883 | rmanfredi | 2010-12-05 04:57:43 -0500 (Sun, 05 Dec 2010) | 2 lines

bsched_early_init(): fixed list-corrupting typo, which was non-harmful for now.

------------------------------------------------------------------------
r17882 | rmanfredi | 2010-12-04 15:01:27 -0500 (Sat, 04 Dec 2010) | 2 lines

random_collect(): Added paranoid assertions.

------------------------------------------------------------------------
r17881 | rmanfredi | 2010-12-04 10:58:16 -0500 (Sat, 04 Dec 2010) | 2 lines

parq_upload_remove(): fixed crash when the parq upload structure is freed.

------------------------------------------------------------------------
r17880 | cbiere | 2010-12-04 10:40:36 -0500 (Sat, 04 Dec 2010) | 9 lines

mingw_gethome(): Use g_strlcpy() on principle.
mingw_preadv(), mingw_pwritev(): Removed because workarounds are already
implemented in compat_pio.[ch].
mingw_recvmsg(): Check hdr->msg_iovlen before use in C99 VLA declaration.
mingw_cpufreq(): Use saturation arithmetic for allocation calculations.
mingw_vfree_fragment(), mingw_valloc(): Use inline functions for non-standard arithmetic with void pointers.
Style fixes.
Added FIXME tags.

------------------------------------------------------------------------
r17879 | rmanfredi | 2010-12-04 10:37:33 -0500 (Sat, 04 Dec 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17878 | rmanfredi | 2010-12-04 10:37:11 -0500 (Sat, 04 Dec 2010) | 4 lines

Added generic RPC over UDP layer.
Converted NTP detection to use this new layer, removing the need for special
processing in udp_received().

------------------------------------------------------------------------
r17877 | rmanfredi | 2010-12-04 10:34:23 -0500 (Sat, 04 Dec 2010) | 2 lines

Random cleanup.

------------------------------------------------------------------------
r17876 | rmanfredi | 2010-12-04 05:49:17 -0500 (Sat, 04 Dec 2010) | 3 lines

Decoupled the UDP socket layer from the Gnutella layer: the datagram reception
callback must now be specified when calling socket_udp_listen().

------------------------------------------------------------------------
r17875 | rmanfredi | 2010-12-04 04:17:01 -0500 (Sat, 04 Dec 2010) | 3 lines

Added note regarding the pio emulation: gtk-gnutella does not rely on the
offset of the file being preserved, so emulations do not bother maintaining it.

------------------------------------------------------------------------
r17874 | cbiere | 2010-12-02 10:32:37 -0500 (Thu, 02 Dec 2010) | 4 lines

mingw_fcntl(): Set errno on unhandled command.
mingw_writev(), mingw_readv(): Corrected return value for corner cases.
Added FIXME regarding replacing lseek() with seek_to_filepos().

------------------------------------------------------------------------
r17873 | cbiere | 2010-12-02 10:27:45 -0500 (Thu, 02 Dec 2010) | 3 lines

Added TODO.
Expand PATH correctly.

------------------------------------------------------------------------
r17872 | cbiere | 2010-12-02 10:26:26 -0500 (Thu, 02 Dec 2010) | 5 lines

Use uint16_to_string_buf() instead of sprintf.
Use guint16 instead of int for port values.
Removed unnecessary nullifying of static variables.
Style fixes.

------------------------------------------------------------------------
r17871 | cbiere | 2010-12-02 10:18:51 -0500 (Thu, 02 Dec 2010) | 2 lines

Fixed format string argument mismatch in debug message.

------------------------------------------------------------------------
r17870 | cbiere | 2010-12-02 10:08:05 -0500 (Thu, 02 Dec 2010) | 2 lines

Fixed format string argument mismatches in debug messages.

------------------------------------------------------------------------
r17869 | rmanfredi | 2010-12-02 07:54:34 -0500 (Thu, 02 Dec 2010) | 4 lines

Fixed logic of readv() and writev() emulations: must not artificially decrease
the total amount of bytes processed should the underlying system call return -1.
Fixed compiler warnings.

------------------------------------------------------------------------
r17868 | rmanfredi | 2010-11-30 15:29:02 -0500 (Tue, 30 Nov 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17867 | rmanfredi | 2010-11-30 15:24:35 -0500 (Tue, 30 Nov 2010) | 3 lines

Added pormap.[ch] to the MANIFEST, removed trailing \r and set keyword
expansion property on these files.

------------------------------------------------------------------------
r17866 | nonamer | 2010-11-30 10:07:08 -0500 (Tue, 30 Nov 2010) | 3 lines

 Added UPnP support. It is expected that windows users probably have an UPnP capable router. With UPnP we can request a direct portmap to the gtkg node.
UPnP support using miniupnp. Use -DSTATICLIB -DMINIUPNPC to compile with UPnP support, and add  -lminiupnpc -liphlpapi -lws2_32  as linked libraries.
* portmap.c needs to be added to the Makefile
------------------------------------------------------------------------
r17865 | rmanfredi | 2010-11-29 05:19:19 -0500 (Mon, 29 Nov 2010) | 2 lines

Fixed compilation warning.

------------------------------------------------------------------------
r17864 | rmanfredi | 2010-11-29 05:18:47 -0500 (Mon, 29 Nov 2010) | 4 lines

Don't automatically turn on MINGW32 if WINDOWS_SYSTEM is on: Cygwin is also
a WINDOWS_SYSTEM.  Should Cygwin be flagged as a WINDOWS_SYSTEM, that's
another question.

------------------------------------------------------------------------
r17863 | rmanfredi | 2010-11-28 18:11:07 -0500 (Sun, 28 Nov 2010) | 2 lines

Regenerated to allow "local_depend" target.

------------------------------------------------------------------------
r17862 | rmanfredi | 2010-11-28 17:13:02 -0500 (Sun, 28 Nov 2010) | 3 lines

Fixed socker library detection: if linking with -lsocker fails, we do not
want to use it.

------------------------------------------------------------------------
r17861 | rmanfredi | 2010-11-28 13:56:55 -0500 (Sun, 28 Nov 2010) | 2 lines

Some symbols were mistakenly left out due to a truncated MANIFEST file here.

------------------------------------------------------------------------
r17860 | nonamer | 2010-11-28 10:51:31 -0500 (Sun, 28 Nov 2010) | 1 line

Use BINARY mode on windows (always). Fixes short read and SHA1 verification failure
------------------------------------------------------------------------
r17859 | nonamer | 2010-11-28 05:39:33 -0500 (Sun, 28 Nov 2010) | 1 line

* Fixes mingw_read, fixes the short read error. It is a weird solution though.
------------------------------------------------------------------------
r17858 | rmanfredi | 2010-11-27 19:34:07 -0500 (Sat, 27 Nov 2010) | 3 lines

All units from U/new have been transferred to the standard metaconfig and
no longer need to be included here.

------------------------------------------------------------------------
r17857 | rmanfredi | 2010-11-27 19:32:11 -0500 (Sat, 27 Nov 2010) | 3 lines

Regenerated Configure with latest metaconfig.
Will now set MINGW32 automatically when compiled under Windows.

------------------------------------------------------------------------
r17856 | rmanfredi | 2010-11-27 09:43:03 -0500 (Sat, 27 Nov 2010) | 2 lines

Regenerated Configure with latest metaconfig.

------------------------------------------------------------------------
r17855 | rmanfredi | 2010-11-27 09:42:24 -0500 (Sat, 27 Nov 2010) | 2 lines

Reformatted to avoid too long lines.

------------------------------------------------------------------------
r17854 | rmanfredi | 2010-11-27 08:57:21 -0500 (Sat, 27 Nov 2010) | 2 lines

Also log offset when getting a "short read".

------------------------------------------------------------------------
r17853 | rmanfredi | 2010-11-27 05:18:46 -0500 (Sat, 27 Nov 2010) | 2 lines

Removed spurious \ escaping.

------------------------------------------------------------------------
r17852 | rmanfredi | 2010-11-27 04:37:13 -0500 (Sat, 27 Nov 2010) | 2 lines

Make sure DOSISH is defined when compiling for Windows.

------------------------------------------------------------------------
r17851 | rmanfredi | 2010-11-26 18:01:51 -0500 (Fri, 26 Nov 2010) | 2 lines

main_gui_early_init(): removed unused variable.

------------------------------------------------------------------------
r17850 | rmanfredi | 2010-11-26 17:45:32 -0500 (Fri, 26 Nov 2010) | 2 lines

File is meant to stay at the top.

------------------------------------------------------------------------
r17849 | rmanfredi | 2010-11-26 17:12:16 -0500 (Fri, 26 Nov 2010) | 4 lines

fcntl() emulation must return 0 on F_SETFL.
Added mingw_lseek() and make sure preadv() and pwritev() check the returned
value of lseek().

------------------------------------------------------------------------
r17848 | rmanfredi | 2010-11-26 16:50:42 -0500 (Fri, 26 Nov 2010) | 2 lines

Removed compiler warnings.

------------------------------------------------------------------------
r17847 | rmanfredi | 2010-11-26 16:40:27 -0500 (Fri, 26 Nov 2010) | 2 lines

Fixed compilation error...

------------------------------------------------------------------------
r17846 | rmanfredi | 2010-11-26 16:26:43 -0500 (Fri, 26 Nov 2010) | 3 lines

Fixed compilation when MALLOC_SAFE and MALLOC_SAFE_HEAD are used without
enabling TRACK_MALLOC.

------------------------------------------------------------------------
r17845 | rmanfredi | 2010-11-26 16:25:52 -0500 (Fri, 26 Nov 2010) | 3 lines

Flush stderr on Windows, since it is buffered by default.
Remove final "\r\n" from g_strerror() on Windows.

------------------------------------------------------------------------
r17844 | rmanfredi | 2010-11-26 14:22:34 -0500 (Fri, 26 Nov 2010) | 2 lines

Added MINGW build script wrapper.

------------------------------------------------------------------------
r17843 | nonamer | 2010-11-26 10:01:57 -0500 (Fri, 26 Nov 2010) | 1 line

* writev for files on windows. Not completed: often 'short read' warning and 'file shrunk?' messages. Also renaming for open files is impossible in windows, so renaming a file to completed or bad doesn't work
------------------------------------------------------------------------
r17842 | rmanfredi | 2010-11-25 16:58:46 -0500 (Thu, 25 Nov 2010) | 2 lines

Avoid compilation warning for unused variables on Windows.

------------------------------------------------------------------------
r17841 | rmanfredi | 2010-11-25 14:49:28 -0500 (Thu, 25 Nov 2010) | 3 lines

download_stop_v(): when we realize we're stopping a completed download,
force status to GTA_DL_COMPLETED.

------------------------------------------------------------------------
r17840 | rmanfredi | 2010-11-25 14:45:15 -0500 (Thu, 25 Nov 2010) | 3 lines

Now generates the "gtk-gnutella.nsi" file to be able to include the proper
version number automatically.

------------------------------------------------------------------------
r17839 | rmanfredi | 2010-11-24 12:40:18 -0500 (Wed, 24 Nov 2010) | 2 lines

Fixed compilation when TRACK_MALLOC is not enabled but MALLOC_SAFE is.

------------------------------------------------------------------------
r17838 | nonamer | 2010-11-24 11:26:38 -0500 (Wed, 24 Nov 2010) | 3 lines

* Fixed MINGW32 compilation
* Added NSIS installer 'make' file. Template from http://gtk-win.sourceforge.net/gsmartcontrol.nsi
* Wrapped stat function to return errno on windows 
------------------------------------------------------------------------
r17837 | rmanfredi | 2010-11-24 03:29:00 -0500 (Wed, 24 Nov 2010) | 6 lines

Renamed malloc_init() into malloc_show_settings() because it no longer performs
any initialization.
Do not show malloc settings until we know we're going to run the core, so
that simple shell usage is not polluted with messages when running under
any TRACK_xxx or MALLOC_xxx settings.

------------------------------------------------------------------------
r17836 | rmanfredi | 2010-11-24 02:54:02 -0500 (Wed, 24 Nov 2010) | 5 lines

check_cpu_usage(): should now compile and work properly on Windows.
Made stacktrace initialization explicit from main(), but defer loading
of symbols unless we're under MALLOC_FRAMES.  At least, wait until we know
we're not going to run the shell.

------------------------------------------------------------------------
r17835 | rmanfredi | 2010-11-23 16:42:32 -0500 (Tue, 23 Nov 2010) | 2 lines

Added Windows support for CPU frequency scaling detection.

------------------------------------------------------------------------
r17834 | rmanfredi | 2010-11-23 15:58:03 -0500 (Tue, 23 Nov 2010) | 2 lines

is_absolute_dir(): "/" are valid in Windows pathnames.

------------------------------------------------------------------------
r17833 | rmanfredi | 2010-11-23 13:40:17 -0500 (Tue, 23 Nov 2010) | 2 lines

Minor style issues.

------------------------------------------------------------------------
r17832 | rmanfredi | 2010-11-23 13:39:25 -0500 (Tue, 23 Nov 2010) | 3 lines

Changed ending criteria for bucket refreshes: now attempts to find k nodes
whose KUID falls into the bucket.

------------------------------------------------------------------------
r17831 | nonamer | 2010-11-23 12:52:03 -0500 (Tue, 23 Nov 2010) | 2 lines

* GTKG on windows can now bootstrap on its own.
* ADNS Async implementation not ready yet, uses sync method for the time being.
------------------------------------------------------------------------
r17830 | rmanfredi | 2010-11-22 16:45:46 -0500 (Mon, 22 Nov 2010) | 2 lines

Changed node_type() to return "UDP" for the UDP node.

------------------------------------------------------------------------
r17829 | rmanfredi | 2010-11-22 16:44:35 -0500 (Mon, 22 Nov 2010) | 6 lines

Robustified query hit parsing so that we can filter out (i.e. drop) invalid
hits where the filename tag contains NUL bytes, which is absolutely prohibited.
And indeed, we were not prepared to handle this garbage, resulting in bad hits
being displayed for the user (with filenames containing base32 SHA-1 parts,
invalid flags, wrong vendor codes, etc...).

------------------------------------------------------------------------
r17828 | rmanfredi | 2010-11-22 16:36:57 -0500 (Mon, 22 Nov 2010) | 2 lines

Converted a search_debug message into a query_debug.

------------------------------------------------------------------------
r17827 | rmanfredi | 2010-11-22 16:36:05 -0500 (Mon, 22 Nov 2010) | 3 lines

Added NODE_F_NOT_GENUINE node flag, set when we encounter a node claiming
to be some vendor and we have proof it cannot be.

------------------------------------------------------------------------
r17826 | rmanfredi | 2010-11-22 16:34:54 -0500 (Mon, 22 Nov 2010) | 2 lines

Removed useless UNSIGNED().

------------------------------------------------------------------------
r17825 | rmanfredi | 2010-11-22 16:34:28 -0500 (Mon, 22 Nov 2010) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r17824 | rmanfredi | 2010-11-22 15:05:43 -0500 (Mon, 22 Nov 2010) | 2 lines

mingw_process_is_alive(): minor style fix; removed duplicate CloseHandle() call.

------------------------------------------------------------------------
r17823 | nonamer | 2010-11-22 11:38:10 -0500 (Mon, 22 Nov 2010) | 1 line

Enable file lockin on windows.
------------------------------------------------------------------------
r17822 | nonamer | 2010-11-22 07:31:14 -0500 (Mon, 22 Nov 2010) | 1 line

Make mingw_process_is_alive do what it is supposed to do. When a previous recorded PID seems to be running doesn't mean our program is running. The PID might be reused or perhaps we got a reboot
------------------------------------------------------------------------
r17821 | rmanfredi | 2010-11-21 14:47:05 -0500 (Sun, 21 Nov 2010) | 4 lines

Removed useless casts to "void *".
Avoid using boolean operations like "!p" on pointers, preferring "NULL == p".
mingw_getpagesize(): cache the result.

------------------------------------------------------------------------
r17820 | rmanfredi | 2010-11-21 14:30:25 -0500 (Sun, 21 Nov 2010) | 2 lines

Fixed wrong indentation.

------------------------------------------------------------------------
r17819 | nonamer | 2010-11-21 14:03:06 -0500 (Sun, 21 Nov 2010) | 2 lines

* Make it compile on mingw ;)
* Updated the mingw VMM a bit to be able to alloc non-hinted memory after hinted memory allocation has begun
------------------------------------------------------------------------
r17818 | rmanfredi | 2010-11-21 11:13:44 -0500 (Sun, 21 Nov 2010) | 4 lines

Avoid calling *GetLastError() when no error is reported.
Was missing some error checking in socket calls.
When returned value is a boolean, don't use == in tests.

------------------------------------------------------------------------
r17817 | rmanfredi | 2010-11-21 09:11:16 -0500 (Sun, 21 Nov 2010) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r17816 | rmanfredi | 2010-11-21 08:54:38 -0500 (Sun, 21 Nov 2010) | 2 lines

Added Windows port credit.

------------------------------------------------------------------------
r17815 | nonamer | 2010-11-21 08:52:13 -0500 (Sun, 21 Nov 2010) | 3 lines

Detect x64 correctly when in WOW64
 Alternate mingw vmm mapper using reserved memory and always respecting the hint address.
Also make it compile and run with mingw again
------------------------------------------------------------------------
r17814 | rmanfredi | 2010-11-21 07:41:23 -0500 (Sun, 21 Nov 2010) | 5 lines

Removed compat_mkdir(): now maps mkdir() to mingw_mkdir() for Windows.
Added compat_process_is_alive() and mingw_process_is_alive().
Now remaps getdtablesize() to mingw_getdtablesize() on Windows, so removed
compat_max_fd().

------------------------------------------------------------------------
r17813 | rmanfredi | 2010-11-21 05:28:07 -0500 (Sun, 21 Nov 2010) | 2 lines

When debugging, dump a stacktrace for events leading to a status change.

------------------------------------------------------------------------
r17812 | rmanfredi | 2010-11-21 05:26:04 -0500 (Sun, 21 Nov 2010) | 2 lines

Added stacktrace_where_print_offset().

------------------------------------------------------------------------
r17811 | rmanfredi | 2010-11-21 05:25:27 -0500 (Sun, 21 Nov 2010) | 2 lines

log_handler(): restored upper-cased tagging of messages.

------------------------------------------------------------------------
r17810 | rmanfredi | 2010-11-20 16:25:04 -0500 (Sat, 20 Nov 2010) | 2 lines

Double maximum amout of values we accept to handle: now at 256 ki.

------------------------------------------------------------------------
r17809 | rmanfredi | 2010-11-20 16:16:48 -0500 (Sat, 20 Nov 2010) | 3 lines

node_infostr(): use larger buffer to accomodate for IPv6 address and long
vendor strings.

------------------------------------------------------------------------
r17808 | rmanfredi | 2010-11-20 13:00:49 -0500 (Sat, 20 Nov 2010) | 3 lines

Moved mingw_rename() and mingw_strerror() to mingw32.c.
Fixed mingw_rename() to have proper returned value.

------------------------------------------------------------------------
r17807 | rmanfredi | 2010-11-20 12:39:48 -0500 (Sat, 20 Nov 2010) | 2 lines

Since Windows lacks /dev/urandom, use CryptGenRandom() to grab random bytes.

------------------------------------------------------------------------
r17806 | nonamer | 2010-11-20 12:16:59 -0500 (Sat, 20 Nov 2010) | 2 lines

Make mingw_uname compile
 Problem in VMM, will leak a little bit now. But causes crashes otherwise. Needs a better solution
------------------------------------------------------------------------
r17805 | rmanfredi | 2010-11-20 11:08:27 -0500 (Sat, 20 Nov 2010) | 3 lines

compat_pagesize_intern(): no need for MINGW32 noise now that we emulate
getpagesize().

------------------------------------------------------------------------
r17804 | rmanfredi | 2010-11-20 11:07:41 -0500 (Sat, 20 Nov 2010) | 2 lines

Added drop-in replacements for uname() and getpagesize().

------------------------------------------------------------------------
r17803 | rmanfredi | 2010-11-20 09:28:02 -0500 (Sat, 20 Nov 2010) | 2 lines

Fixed PROT_xxx constants to be flags.

------------------------------------------------------------------------
r17802 | nonamer | 2010-11-20 09:14:24 -0500 (Sat, 20 Nov 2010) | 2 lines

Make mingw_filetime_to_timeval compilable
Fixed styling in mingw_getrusage
------------------------------------------------------------------------
r17801 | rmanfredi | 2010-11-20 09:13:00 -0500 (Sat, 20 Nov 2010) | 3 lines

Removed another MINGW32 conditional block: instead of using sbrk(0), use
the value of vmm_trap_page().

------------------------------------------------------------------------
r17800 | rmanfredi | 2010-11-20 09:07:42 -0500 (Sat, 20 Nov 2010) | 3 lines

Since getlogin() returns pointer to static data, use its value for additional
entropy collection.

------------------------------------------------------------------------
r17799 | rmanfredi | 2010-11-20 09:06:56 -0500 (Sat, 20 Nov 2010) | 3 lines

Forgot to declare mingw_getrusage() in header.
Added drop-in replacement for getlogin() on Windows.

------------------------------------------------------------------------
r17798 | rmanfredi | 2010-11-20 08:38:55 -0500 (Sat, 20 Nov 2010) | 2 lines

Removed already-fixed FIXME.

------------------------------------------------------------------------
r17797 | rmanfredi | 2010-11-20 08:33:34 -0500 (Sat, 20 Nov 2010) | 2 lines

g_strerror() is translated appropriately for Windows, so use it.

------------------------------------------------------------------------
r17796 | rmanfredi | 2010-11-20 08:30:16 -0500 (Sat, 20 Nov 2010) | 2 lines

Protect negative quantities.

------------------------------------------------------------------------
r17795 | rmanfredi | 2010-11-20 08:29:12 -0500 (Sat, 20 Nov 2010) | 2 lines

Added getrusage() emulation for Windows.

------------------------------------------------------------------------
r17794 | nonamer | 2010-11-20 08:06:04 -0500 (Sat, 20 Nov 2010) | 1 line

Add some well known windows locations
------------------------------------------------------------------------
r17793 | rmanfredi | 2010-11-20 07:28:09 -0500 (Sat, 20 Nov 2010) | 2 lines

Style issue.

------------------------------------------------------------------------
r17792 | rmanfredi | 2010-11-20 07:25:48 -0500 (Sat, 20 Nov 2010) | 2 lines

The "/" path should work on Windows, and access the "current disk" root.

------------------------------------------------------------------------
r17791 | rmanfredi | 2010-11-20 07:23:58 -0500 (Sat, 20 Nov 2010) | 2 lines

Added support for statvfs() on Windows.

------------------------------------------------------------------------
r17790 | nonamer | 2010-11-20 06:45:42 -0500 (Sat, 20 Nov 2010) | 1 line

Windows: Detect the amount of physical RAM
------------------------------------------------------------------------
r17789 | nonamer | 2010-11-20 05:33:09 -0500 (Sat, 20 Nov 2010) | 1 line

Allows mingw32 compilation again after cleanup
------------------------------------------------------------------------
r17788 | rmanfredi | 2010-11-19 19:55:06 -0500 (Fri, 19 Nov 2010) | 3 lines

Reduced the amount of Windows-specific code in vmm.c, moving code to mingw32.c.
Added mingw_mprotect() as a drop-in replacement for mprotect().

------------------------------------------------------------------------
r17787 | rmanfredi | 2010-11-19 17:03:02 -0500 (Fri, 19 Nov 2010) | 3 lines

main_gui_early_init(): fixed Windows code to use CONST_STRLEN() and avoid
magic constants.

------------------------------------------------------------------------
r17786 | rmanfredi | 2010-11-19 16:59:35 -0500 (Fri, 19 Nov 2010) | 2 lines

socket_set_nonblocking(): fixed signature for Windows.

------------------------------------------------------------------------
r17785 | rmanfredi | 2010-11-19 16:56:35 -0500 (Fri, 19 Nov 2010) | 2 lines

Adjusted is_absolute_path() for Windows.

------------------------------------------------------------------------
r17784 | rmanfredi | 2010-11-19 16:50:24 -0500 (Fri, 19 Nov 2010) | 2 lines

Added mingw_gethome().

------------------------------------------------------------------------
r17783 | rmanfredi | 2010-11-19 16:39:24 -0500 (Fri, 19 Nov 2010) | 2 lines

Added Windows-specific paths.

------------------------------------------------------------------------
r17782 | rmanfredi | 2010-11-19 16:33:04 -0500 (Fri, 19 Nov 2010) | 3 lines

Added mingw_truncate() so that we can transparently call truncate() in
the code without using #ifdef MINGW32.

------------------------------------------------------------------------
r17781 | rmanfredi | 2010-11-19 16:23:47 -0500 (Fri, 19 Nov 2010) | 3 lines

Allow code to say lstat() even if not supported, in which case it is
transparently remapped to stat().

------------------------------------------------------------------------
r17780 | rmanfredi | 2010-11-19 16:12:22 -0500 (Fri, 19 Nov 2010) | 2 lines

file_info_strip_trailer(): avoid file descriptor leak under Windows.

------------------------------------------------------------------------
r17779 | rmanfredi | 2010-11-19 16:06:17 -0500 (Fri, 19 Nov 2010) | 3 lines

Cleanup: reforamtting, removed some obvious parameter names in signatures
to keep most signatures on a single line.

------------------------------------------------------------------------
r17778 | rmanfredi | 2010-11-19 15:53:12 -0500 (Fri, 19 Nov 2010) | 3 lines

Cleanup up MINGW32 code.  Removed useless conditional compilation.
Removed unused "err" variable and fixed wrong use of "err" instead of "errno".

------------------------------------------------------------------------
r17777 | rmanfredi | 2010-11-19 15:41:00 -0500 (Fri, 19 Nov 2010) | 2 lines

lookup_handle_reply(): avoid compiler warning.

------------------------------------------------------------------------
r17776 | nonamer | 2010-11-19 15:34:42 -0500 (Fri, 19 Nov 2010) | 1 line

Don't compile mingw32.* when not under mingw32
------------------------------------------------------------------------
r17775 | nonamer | 2010-11-19 15:28:00 -0500 (Fri, 19 Nov 2010) | 2 lines

Compiles under MINGW32 native. GTK2, connecting and searching to the gnutella network works. DNS is not implemented and will make it crash. Compile with: ./Configure -der -Dgtkversion=2 -Dcc=gcc  -Dselect=define -Dmsghdr_msg_flags=define -Dgetaddrinfo=define -Doptimize='-O0' -Aoptimize='-g' -Accflags='-DMINGW32' -Accflags='-I/usr/local/include' -Alibs='-lwsock32' -Alibs='-lws2_32' -Alibs='-lregex' -Alibs='-lz' -Alibs='-liconv' -Alibs='-lws2_32'

------------------------------------------------------------------------
r17774 | rmanfredi | 2010-11-18 18:01:45 -0500 (Thu, 18 Nov 2010) | 2 lines

lookup_handle_reply(): ignored unsafe hosts in contacts logged at level 2.

------------------------------------------------------------------------
r17773 | rmanfredi | 2010-11-18 15:15:19 -0500 (Thu, 18 Nov 2010) | 3 lines

When bumping into a DHT-enabled host, send it a DHTIPP ping via TCP if the DHT
is not seeded yet.

------------------------------------------------------------------------
r17772 | rmanfredi | 2010-11-18 15:03:13 -0500 (Thu, 18 Nov 2010) | 4 lines

host_timer(): fixed bug in computing the "fan" value and make sure it is
always 1 at minimum.
When host caches are empty, contact an UHC immediately.

------------------------------------------------------------------------
r17771 | rmanfredi | 2010-11-18 15:01:45 -0500 (Thu, 18 Nov 2010) | 3 lines

When computing the k-ball furthest bits, add the mean standard error to the
computed mean to make sure we estimate with the largest amount of hosts.

------------------------------------------------------------------------
r17770 | rmanfredi | 2010-11-18 13:08:39 -0500 (Thu, 18 Nov 2010) | 2 lines

Added statx_stderr() to compute the standard error of the mean.

------------------------------------------------------------------------
r17769 | rmanfredi | 2010-11-17 18:08:33 -0500 (Wed, 17 Nov 2010) | 3 lines

Added "alive_debug".
Converted messages to use new node_infostr() routine for displaying nodes.

------------------------------------------------------------------------
r17768 | rmanfredi | 2010-11-17 17:03:35 -0500 (Wed, 17 Nov 2010) | 2 lines

Minor update before first publishing on the GDF.

------------------------------------------------------------------------
r17767 | rmanfredi | 2010-11-17 16:44:26 -0500 (Wed, 17 Nov 2010) | 2 lines

Track average servent downtime.

------------------------------------------------------------------------
r17766 | rmanfredi | 2010-11-17 16:26:52 -0500 (Wed, 17 Nov 2010) | 2 lines

We now come with the ARC4 pseudo-random number generator.

------------------------------------------------------------------------
r17765 | rmanfredi | 2010-11-17 15:56:51 -0500 (Wed, 17 Nov 2010) | 3 lines

Raised default ultrapeer connections in leaf mode to 4, the maximum now being 5.
This is consistent with the settings of a late pro servent.

------------------------------------------------------------------------
r17764 | rmanfredi | 2010-11-17 13:35:37 -0500 (Wed, 17 Nov 2010) | 5 lines

Protect the DHT routing table globally by also limiting allowed amount of nodes
from a given class-C network.
Added two other DHT size estimation algorithms and average their output to get
a better estimate, since they have different error patterns.

------------------------------------------------------------------------
r17763 | rmanfredi | 2010-11-17 13:27:23 -0500 (Wed, 17 Nov 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17762 | rmanfredi | 2010-11-17 13:26:32 -0500 (Wed, 17 Nov 2010) | 2 lines

Added empty files for Win32 cross-compiling.

------------------------------------------------------------------------
r17761 | rmanfredi | 2010-11-16 19:41:25 -0500 (Tue, 16 Nov 2010) | 2 lines

Fixed memory leak introduced in revision 17759.

------------------------------------------------------------------------
r17760 | rmanfredi | 2010-11-16 19:35:33 -0500 (Tue, 16 Nov 2010) | 2 lines

Ooops, wrong threshold adjustment.  Need to divide the constants by ln(2).

------------------------------------------------------------------------
r17759 | rmanfredi | 2010-11-16 18:57:40 -0500 (Tue, 16 Nov 2010) | 6 lines

Computation of Kullback-Leibler divergence updated after exchanging with
Thibault Cholez, the author of the paper on attack mitigation.
Now uses the new Kademlia parameter, the closeness factor c, with c != k,
the replication parameter.
During countermeasures, put back items in the path if the divergence rises.

------------------------------------------------------------------------
r17758 | rmanfredi | 2010-11-16 18:54:34 -0500 (Tue, 16 Nov 2010) | 3 lines

Added node_infostr() to pretty-print essential node information: node type,
Gnutella address and port, vendor string.

------------------------------------------------------------------------
r17757 | rmanfredi | 2010-11-16 18:52:59 -0500 (Tue, 16 Nov 2010) | 3 lines

Added new Kademlia parameter: KDA_C, the closeness factor used for attack
preventions.

------------------------------------------------------------------------
r17756 | rmanfredi | 2010-11-16 18:51:34 -0500 (Tue, 16 Nov 2010) | 2 lines

Added assertion.

------------------------------------------------------------------------
r17755 | rmanfredi | 2010-11-16 07:55:26 -0500 (Tue, 16 Nov 2010) | 2 lines

cproxy_create(): must not call cproxy_http_request() directly.

------------------------------------------------------------------------
r17754 | rmanfredi | 2010-11-15 18:53:58 -0500 (Mon, 15 Nov 2010) | 2 lines

Fixed security token memory leak.

------------------------------------------------------------------------
r17753 | rmanfredi | 2010-11-15 18:34:00 -0500 (Mon, 15 Nov 2010) | 3 lines

Forgot to update class-C net accounting when removing a node from the path
during active counter-measures.

------------------------------------------------------------------------
r17752 | rmanfredi | 2010-11-15 18:03:20 -0500 (Mon, 15 Nov 2010) | 2 lines

Constantly collect new randomness and persist it accross sessions.

------------------------------------------------------------------------
r17751 | rmanfredi | 2010-11-15 08:18:13 -0500 (Mon, 15 Nov 2010) | 3 lines

Updated current maintainer's address.
Expanded the list of supported features.

------------------------------------------------------------------------
r17750 | rmanfredi | 2010-11-15 07:00:08 -0500 (Mon, 15 Nov 2010) | 3 lines

The minimum for "kball_furthest" needs to be 0, not -1 (if we estimate a size
less than KDA_K).

------------------------------------------------------------------------
r17749 | rmanfredi | 2010-11-15 06:57:17 -0500 (Mon, 15 Nov 2010) | 3 lines

Don't do gm_snprintf() to construct an error message if we're not going
to display it because they're not debugging.

------------------------------------------------------------------------
r17748 | rmanfredi | 2010-11-14 18:52:48 -0500 (Sun, 14 Nov 2010) | 2 lines

Fixed typo that prevented proper k-ball computation.

------------------------------------------------------------------------
r17747 | rmanfredi | 2010-11-14 18:41:21 -0500 (Sun, 14 Nov 2010) | 3 lines

Fixed typo in original author's name.
Make arc4random_addrandom() visible in header.

------------------------------------------------------------------------
r17746 | rmanfredi | 2010-11-14 18:31:09 -0500 (Sun, 14 Nov 2010) | 2 lines

Update the roots cache after a value publish to remove timeouting nodes.

------------------------------------------------------------------------
r17745 | rmanfredi | 2010-11-14 16:38:07 -0500 (Sun, 14 Nov 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17744 | rmanfredi | 2010-11-14 16:33:08 -0500 (Sun, 14 Nov 2010) | 4 lines

Moved random functions from misc.c to random.c.
Now uses arc4random() for random number generation: either the native version
or the default implementation provided.

------------------------------------------------------------------------
r17743 | rmanfredi | 2010-11-14 15:47:28 -0500 (Sun, 14 Nov 2010) | 2 lines

Added arc4random() default implementation for systems without it.

------------------------------------------------------------------------
r17742 | rmanfredi | 2010-11-14 15:05:08 -0500 (Sun, 14 Nov 2010) | 2 lines

Make sure k-ball is wide enough if we are trapped in a crowded KUID region.

------------------------------------------------------------------------
r17741 | rmanfredi | 2010-11-14 11:52:40 -0500 (Sun, 14 Nov 2010) | 3 lines

Do not attempt to estimate the DHT size based on lookup results with an
actively adjusted path.

------------------------------------------------------------------------
r17740 | rmanfredi | 2010-11-14 11:50:24 -0500 (Sun, 14 Nov 2010) | 3 lines

dht_update_subspace_size_estimate(): we have a more accurate view of our
subspace if and only if we are an active node.

------------------------------------------------------------------------
r17739 | rmanfredi | 2010-11-14 09:35:00 -0500 (Sun, 14 Nov 2010) | 2 lines

highest_bit_set(): moved to a LUT-based implementation.

------------------------------------------------------------------------
r17738 | rmanfredi | 2010-11-14 06:47:24 -0500 (Sun, 14 Nov 2010) | 2 lines

lookup_load_path(): fixed memory leak.

------------------------------------------------------------------------
r17737 | rmanfredi | 2010-11-14 06:40:25 -0500 (Sun, 14 Nov 2010) | 4 lines

Implemented active attack-prevention rules to guard against Sybil attacks
on a given KUID, as described in the paper "Efficient DHT attack mitigation
through peers' ID distribution" by Thibault Cholez et al.

------------------------------------------------------------------------
r17736 | rmanfredi | 2010-11-14 06:34:22 -0500 (Sun, 14 Nov 2010) | 2 lines

knode_patricia_free(): added pre-condition.

------------------------------------------------------------------------
r17735 | rmanfredi | 2010-11-14 03:29:46 -0500 (Sun, 14 Nov 2010) | 2 lines

Fixed "memmory" typo.

------------------------------------------------------------------------
r17734 | rmanfredi | 2010-11-13 10:38:50 -0500 (Sat, 13 Nov 2010) | 2 lines

lookup_load_path(): do not free shortlisted nodes which are "unsafe".

------------------------------------------------------------------------
r17733 | rmanfredi | 2010-11-13 07:46:53 -0500 (Sat, 13 Nov 2010) | 2 lines

Added kuid_common_prefix() convenience routine.

------------------------------------------------------------------------
r17732 | rmanfredi | 2010-11-13 06:05:54 -0500 (Sat, 13 Nov 2010) | 5 lines

lk_handle_reply(): it is wrong to stop a value lookup just because we hit
the KUID we're looking for.  In practice this can't happen and if it does,
it's probably a Sybil attack on that KUID anyway, which we now trap and
prevent anyway.  Hence perfect KUID match can't happen anymore.

------------------------------------------------------------------------
r17731 | rmanfredi | 2010-11-13 04:35:09 -0500 (Sat, 13 Nov 2010) | 3 lines

Can attempt servicing even if the DHT is not bootstrapped: all we need are
enough DHT seeds to start lookups.

------------------------------------------------------------------------
r17730 | rmanfredi | 2010-11-13 04:26:45 -0500 (Sat, 13 Nov 2010) | 2 lines

lookup_iterate(): fixed node reference count handling for ignored entries.

------------------------------------------------------------------------
r17729 | rmanfredi | 2010-11-12 19:29:59 -0500 (Fri, 12 Nov 2010) | 3 lines

Implemented passive attack-prevention rules to guard against common Sybil
attacks on a given KUID and make them harder to succeed.

------------------------------------------------------------------------
r17728 | rmanfredi | 2010-11-12 16:20:16 -0500 (Fri, 12 Nov 2010) | 3 lines

download_stop_v(): if we have to call download_verify_sha1(), wait until the
download is fully stopped otherwise we'll be violating pre-conditions.

------------------------------------------------------------------------
r17727 | rmanfredi | 2010-11-12 09:53:03 -0500 (Fri, 12 Nov 2010) | 3 lines

Moved highest_bit_set() to pow2.c.
Added highest_bit_set64() to work on 64-bit quantities.

------------------------------------------------------------------------
r17726 | rmanfredi | 2010-11-12 06:53:16 -0500 (Fri, 12 Nov 2010) | 2 lines

Fully remove non-submitted file!

------------------------------------------------------------------------
r17725 | rmanfredi | 2010-11-12 06:48:49 -0500 (Fri, 12 Nov 2010) | 2 lines

Removed file not submitted.

------------------------------------------------------------------------
r17724 | rmanfredi | 2010-11-12 06:42:37 -0500 (Fri, 12 Nov 2010) | 5 lines

Callout queue interface change: events now reference the callout queue to which
they belong, so it is no longer required to pass that parameter when dealing
with events: cq_cancel(), cq_resched(), cq_expire(), etc...
Added the cq_main_insert() convenience routine.

------------------------------------------------------------------------
r17723 | rmanfredi | 2010-11-12 06:35:22 -0500 (Fri, 12 Nov 2010) | 2 lines

vmm_mmap_anonymous(): skip "hint not followed" logic if there is no hint.

------------------------------------------------------------------------
r17722 | rmanfredi | 2010-11-12 06:04:45 -0500 (Fri, 12 Nov 2010) | 2 lines

pmap_insert_region(): removed unused goto label.

------------------------------------------------------------------------
r17721 | rmanfredi | 2010-11-12 05:17:42 -0500 (Fri, 12 Nov 2010) | 4 lines

Better fix to account for us stopping freeing pages during shutdown: even if
we don't supply a hint in vmm_mmap_anonymous(), perform pmap_overrule() so
that there is no irregular case to handle in pmap_insert_region().

------------------------------------------------------------------------
r17720 | rmanfredi | 2010-11-12 05:08:06 -0500 (Fri, 12 Nov 2010) | 5 lines

search_results_are_requested(): fixed memory leak.
Added OOBv3 comments.
Added periodic search garbage collector to collect expired entries in the
background even if there is no activity.

------------------------------------------------------------------------
r17719 | rmanfredi | 2010-11-11 18:38:54 -0500 (Thu, 11 Nov 2010) | 2 lines

Added more entropy sources.

------------------------------------------------------------------------
r17718 | rmanfredi | 2010-11-11 17:49:44 -0500 (Thu, 11 Nov 2010) | 2 lines

Some structures were wrongly declared as "static" when they need not be.

------------------------------------------------------------------------
r17717 | rmanfredi | 2010-11-11 04:29:27 -0500 (Thu, 11 Nov 2010) | 2 lines

knode_still_alive_probability(): cache decimation computations.

------------------------------------------------------------------------
r17716 | rmanfredi | 2010-11-11 04:05:26 -0500 (Thu, 11 Nov 2010) | 2 lines

Fixed comment typo.

------------------------------------------------------------------------
r17715 | rmanfredi | 2010-11-11 04:01:49 -0500 (Thu, 11 Nov 2010) | 9 lines

Redesigned alive ping checks: they are now more frequent but rely on our
probability model to avoid pinging hosts likely to be alive.
Added more aggressive stale node detection and take the amount of consecutive
RPC timeouts into account somehow when estimating the still-alive probability.
Allow the routing table to contract by forcing bucket merges in areas of the
KUID space not too close to our node, when we don't use the extra split levels.
Pay attention to the bootstrap status of the routing table when merging buckets.
Fixed node accounting on bucket merges.

------------------------------------------------------------------------
r17714 | rmanfredi | 2010-11-11 03:55:58 -0500 (Thu, 11 Nov 2010) | 2 lines

pmap_insert_region(): Moved assertion to prevent crash during closing sequence.

------------------------------------------------------------------------
r17713 | rmanfredi | 2010-11-11 03:52:40 -0500 (Thu, 11 Nov 2010) | 3 lines

As a protection, user lookups are not serviced when the DHT is not bootstrapped
or when we think we're no longer connected to Internet.

------------------------------------------------------------------------
r17712 | rmanfredi | 2010-11-11 03:50:12 -0500 (Thu, 11 Nov 2010) | 2 lines

Added comments.

------------------------------------------------------------------------
r17711 | rmanfredi | 2010-11-09 16:41:09 -0500 (Tue, 09 Nov 2010) | 3 lines

entropy_collect(): use pointer to itself when computing randomness, not a
foreign pointer to random_init().

------------------------------------------------------------------------
r17710 | rmanfredi | 2010-11-09 14:03:28 -0500 (Tue, 09 Nov 2010) | 2 lines

Fixed wrong logic from previous commit.

------------------------------------------------------------------------
r17709 | rmanfredi | 2010-11-09 13:38:08 -0500 (Tue, 09 Nov 2010) | 3 lines

revent_pmsg_free(): forgot to update the kn->last_sent field to record the
time at which the last message was successfully sent to the node.

------------------------------------------------------------------------
r17708 | rmanfredi | 2010-11-08 02:06:54 -0500 (Mon, 08 Nov 2010) | 4 lines

Hopefully proper fix for bucket merging refcounting bug.
Added forget_merged_node() to account for eviction during merge but not free
the node immediately.

------------------------------------------------------------------------
r17707 | rmanfredi | 2010-11-08 01:34:56 -0500 (Mon, 08 Nov 2010) | 4 lines

insert_nodes(): don't call forget_node() on nodes we do not keep during
merging since the dropped nodes will be reclaimed when their holding bucket
is freed.

------------------------------------------------------------------------
r17706 | rmanfredi | 2010-11-07 17:55:54 -0500 (Sun, 07 Nov 2010) | 3 lines

Do not assume a leaf node which is TCP firewalled is also UDP firewalled.
Ergo, do not strip the OOB query flag of a TCP-firewalled host.

------------------------------------------------------------------------
r17705 | rmanfredi | 2010-11-07 17:11:57 -0500 (Sun, 07 Nov 2010) | 4 lines

Too ancient a bogons.txt file is dangerous now that IPv4 shortage is becoming
more and more accute.
Use delta_time() to compare times.

------------------------------------------------------------------------
r17704 | rmanfredi | 2010-11-07 16:47:38 -0500 (Sun, 07 Nov 2010) | 2 lines

Cosmetic: highlight float status.

------------------------------------------------------------------------
r17703 | rmanfredi | 2010-11-07 14:57:48 -0500 (Sun, 07 Nov 2010) | 3 lines

OOB proxying code was not considering MUID collisions, causing memory leaks
each time such a collision occurred.

------------------------------------------------------------------------
r17702 | rmanfredi | 2010-11-07 13:38:23 -0500 (Sun, 07 Nov 2010) | 3 lines

insert_nodes(): was missing a continue statement, causing assertion failure
later on in add_node_internal().

------------------------------------------------------------------------
r17701 | rmanfredi | 2010-11-07 13:30:34 -0500 (Sun, 07 Nov 2010) | 2 lines

Typo fixes in comment.

------------------------------------------------------------------------
r17700 | rmanfredi | 2010-11-07 09:59:36 -0500 (Sun, 07 Nov 2010) | 2 lines

Only send "DHT" in Gnutella pongs if the DHT runs in active mode.

------------------------------------------------------------------------
r17699 | rmanfredi | 2010-11-07 08:15:38 -0500 (Sun, 07 Nov 2010) | 2 lines

When looking for useless ultra nodes, consider lack of compressed TX as bad.

------------------------------------------------------------------------
r17698 | rmanfredi | 2010-11-07 07:00:37 -0500 (Sun, 07 Nov 2010) | 2 lines

Replaced g_assert(0) with g_assert_not_reached().

------------------------------------------------------------------------
r17697 | rmanfredi | 2010-11-07 06:43:30 -0500 (Sun, 07 Nov 2010) | 4 lines

pmap_insert_region(): at shutdown time, since we force a NULL hint during
allocation, we must also call pmap_overrule() when the kernel allocated
pages in what we throught was foreign space.

------------------------------------------------------------------------
r17696 | rmanfredi | 2010-11-07 05:16:14 -0500 (Sun, 07 Nov 2010) | 3 lines

Use _WHERE_ instead of __FILE__ to make sure the current directory is shown.
This helps disambiguate identically named files lying in different places.

------------------------------------------------------------------------
r17695 | rmanfredi | 2010-11-07 05:12:10 -0500 (Sun, 07 Nov 2010) | 3 lines

pmap_insert_region(): during shutdown, relax assertions because the kernel
can start allocating memory in areas we thought were foreign.

------------------------------------------------------------------------
r17694 | rmanfredi | 2010-11-07 04:52:52 -0500 (Sun, 07 Nov 2010) | 2 lines

insert_nodes(): give precedence to forced dropping.

------------------------------------------------------------------------
r17693 | rmanfredi | 2010-11-07 04:45:40 -0500 (Sun, 07 Nov 2010) | 2 lines

Plugged memory leak during bucket merging, when we have to drop nodes.

------------------------------------------------------------------------
r17692 | rmanfredi | 2010-11-07 04:24:30 -0500 (Sun, 07 Nov 2010) | 2 lines

bucket_refresh_status(): improved debugging message by detecting merges.

------------------------------------------------------------------------
r17691 | rmanfredi | 2010-11-06 15:24:06 -0400 (Sat, 06 Nov 2010) | 2 lines

dht_merge_siblings(): forgot to install alive and bucket refresh on new leaf.

------------------------------------------------------------------------
r17690 | rmanfredi | 2010-11-06 14:54:31 -0400 (Sat, 06 Nov 2010) | 2 lines

Avoid crash at vmm_close() time on FreeBSD with TRACK_VMM.

------------------------------------------------------------------------
r17689 | rmanfredi | 2010-11-06 14:39:07 -0400 (Sat, 06 Nov 2010) | 4 lines

Handle concurrent bucket merge and bucket refresh: must not access the old
bucket on refresh completion if the looked up KUID no longer falls in the
same bucket.

------------------------------------------------------------------------
r17688 | rmanfredi | 2010-11-06 14:27:03 -0400 (Sat, 06 Nov 2010) | 3 lines

Added k-bucket merging in case the size of the DHT shrinks and leaf buckets
become depleted enough.

------------------------------------------------------------------------
r17687 | rmanfredi | 2010-11-06 14:07:04 -0400 (Sat, 06 Nov 2010) | 2 lines

Also log ports of the hosts we collect through IPP.

------------------------------------------------------------------------
r17686 | rmanfredi | 2010-11-06 14:06:09 -0400 (Sat, 06 Nov 2010) | 2 lines

Log dropped unsollicited pongs when debugging.

------------------------------------------------------------------------
r17685 | rmanfredi | 2010-11-06 14:04:47 -0400 (Sat, 06 Nov 2010) | 3 lines

Always prepend new hosts to the cache lists and make sure hcache_prune()
removes hosts at the tail, i.e. the oldest entries.

------------------------------------------------------------------------
r17684 | rmanfredi | 2010-11-05 20:08:18 -0400 (Fri, 05 Nov 2010) | 3 lines

Active DHT nodes should always look for their own KUID after retrieving the
persisted routing table, even if they think they are completely bootstrapped.

------------------------------------------------------------------------
r17683 | rmanfredi | 2010-11-05 19:43:49 -0400 (Fri, 05 Nov 2010) | 2 lines

During alive checks, remove stale nodes which are likely dead.

------------------------------------------------------------------------
r17682 | rmanfredi | 2010-11-05 19:42:47 -0400 (Fri, 05 Nov 2010) | 2 lines

Added knode_still_alive_probability() convenience routine.

------------------------------------------------------------------------
r17681 | rmanfredi | 2010-11-05 18:30:53 -0400 (Fri, 05 Nov 2010) | 2 lines

Ignore too frequent stalling reports from a given address.

------------------------------------------------------------------------
r17680 | rmanfredi | 2010-11-05 18:28:28 -0400 (Fri, 05 Nov 2010) | 5 lines

Added persistence for the first time a node was seen.
Improved bootstrapping procedure to lookup for our KUID again at the end in
case we are an active node and the inital bootstrapping lookup did not return
complete results.

------------------------------------------------------------------------
r17679 | rmanfredi | 2010-11-05 18:26:45 -0400 (Fri, 05 Nov 2010) | 3 lines

Removed temporary code that was put in until 0.96.7 was released.
Now persists the time a node was first seen.

------------------------------------------------------------------------
r17678 | rmanfredi | 2010-11-05 18:25:17 -0400 (Fri, 05 Nov 2010) | 4 lines

Added stable_still_alive_probability() to return probability that a node
be still alive now knowing the first and last time we saw it.
Use probabilistic eviction from the database for entries older than 2 hours.

------------------------------------------------------------------------
r17677 | rmanfredi | 2010-11-05 18:21:43 -0400 (Fri, 05 Nov 2010) | 2 lines

Remember first time we see a node.

------------------------------------------------------------------------
r17676 | rmanfredi | 2010-11-05 18:20:14 -0400 (Fri, 05 Nov 2010) | 2 lines

Fixed @param in comment.

------------------------------------------------------------------------
r17675 | rmanfredi | 2010-11-05 18:19:40 -0400 (Fri, 05 Nov 2010) | 2 lines

Added timestamp_utc_to_string2().

------------------------------------------------------------------------
r17674 | rmanfredi | 2010-11-04 17:36:30 -0400 (Thu, 04 Nov 2010) | 2 lines

File comment update.

------------------------------------------------------------------------
r17673 | rmanfredi | 2010-11-04 16:37:23 -0400 (Thu, 04 Nov 2010) | 3 lines

When uniform scheduling is on, enforce only one use of a given source per
timeslice.

------------------------------------------------------------------------
r17672 | rmanfredi | 2010-11-04 15:34:33 -0400 (Thu, 04 Nov 2010) | 2 lines

There is no use for legacy "download overlapping checks" when we have a TTH.

------------------------------------------------------------------------
r17671 | rmanfredi | 2010-11-04 15:32:48 -0400 (Thu, 04 Nov 2010) | 7 lines

Removed legacy convoluted stalling detection now that watchdogs provide a
much cleaner alternative.
Added additional kick-in of uniform bandwidth allocation when two consecutive
upload stalls are detected.
Measure round-trip time between the end of a chunk and the time by which we
get their follow-up request: too large a time can indicate "stalling".

------------------------------------------------------------------------
r17670 | rmanfredi | 2010-11-04 15:28:05 -0400 (Thu, 04 Nov 2010) | 2 lines

Added bws_uniform_allocation() to force fixed bandwidth per slot.

------------------------------------------------------------------------
r17669 | rmanfredi | 2010-11-04 15:25:55 -0400 (Thu, 04 Nov 2010) | 3 lines

Added some sanity assertions.
Use VMM trap page for no metadata indication.

------------------------------------------------------------------------
r17668 | rmanfredi | 2010-11-04 15:24:22 -0400 (Thu, 04 Nov 2010) | 2 lines

wd_expire(): added quotes surrounding watchdog name.

------------------------------------------------------------------------
r17667 | rmanfredi | 2010-11-04 15:23:30 -0400 (Thu, 04 Nov 2010) | 3 lines

Added wd_is_awake().
wd_expire(): warn if callback turns watchdog back on using supplied object.

------------------------------------------------------------------------
r17666 | rmanfredi | 2010-11-04 15:22:03 -0400 (Thu, 04 Nov 2010) | 4 lines

Passive node should not refresh their own k-bucket more often.
Added alive_period() and alive_period_ms() to return proper period depending
on the current mode.

------------------------------------------------------------------------
r17665 | rmanfredi | 2010-11-03 19:36:53 -0400 (Wed, 03 Nov 2010) | 5 lines

Refactored bandwidth scheduling adjustments with watchdogs, to make code
easier to read and understand.
Shorten stalling detection timeouts to react more quickly when TCP clogs and
try to avoid avalanche effects.

------------------------------------------------------------------------
r17664 | rmanfredi | 2010-11-03 19:31:30 -0400 (Wed, 03 Nov 2010) | 2 lines

Use g_error() when qrp_hash() tests fail.

------------------------------------------------------------------------
r17663 | rmanfredi | 2010-11-03 18:09:42 -0400 (Wed, 03 Nov 2010) | 2 lines

Added wd_expire() to trigger callback and put watchdog to sleep.

------------------------------------------------------------------------
r17662 | rmanfredi | 2010-11-03 14:51:53 -0400 (Wed, 03 Nov 2010) | 8 lines

Avoid action at a distance (logic triggered when uploads start stalling).
Adapted b/w settings when uploads are stalling: on first signs of actual
stalling, prevent unsused b/w stealing so that others don't try to consume
what we cannot, apparently.
On true persistent stalling conditions, do not use stolen bandwidth from
other schedulers: we're already having problems flushing our pending data,
no need to stuff more to TCP.

------------------------------------------------------------------------
r17661 | rmanfredi | 2010-11-03 14:47:44 -0400 (Wed, 03 Nov 2010) | 2 lines

Added bws_ignore_stolen() to let a scheduler ignore stolen bandwidth.

------------------------------------------------------------------------
r17660 | rmanfredi | 2010-11-03 13:11:54 -0400 (Wed, 03 Nov 2010) | 4 lines

qrt_patch_slot(): was not counting set entries which are left unchanged
by the patch.
merge_table_into_arena(): optimized looping over the table being merged.

------------------------------------------------------------------------
r17659 | rmanfredi | 2010-11-03 13:06:33 -0400 (Wed, 03 Nov 2010) | 3 lines

During final stages, when we stop freeing pages, also stop providing hints
which are going to be wrong anyway!

------------------------------------------------------------------------
r17658 | rmanfredi | 2010-11-03 13:04:54 -0400 (Wed, 03 Nov 2010) | 4 lines

Ensure passive nodes have a balanced bucket tree instead of an unbalanced one
attracted by their KUID.   Same amount of buckets as before (16), only better
spread out in the KUID space.

------------------------------------------------------------------------
r17657 | rmanfredi | 2010-11-02 19:30:52 -0400 (Tue, 02 Nov 2010) | 2 lines

When uploads are stalling, disable HTTP outgoing bandwidth stealing.

------------------------------------------------------------------------
r17656 | rmanfredi | 2010-11-02 19:04:42 -0400 (Tue, 02 Nov 2010) | 4 lines

Removed dependency on old deprecated "dbg" property, adding "hcache_debug".
Now uses host atoms.
At startup time, sort cached entries to put most recent entries first.

------------------------------------------------------------------------
r17655 | rmanfredi | 2010-11-02 19:01:16 -0400 (Tue, 02 Nov 2010) | 2 lines

Added gnet_host_to_string2().

------------------------------------------------------------------------
r17654 | rmanfredi | 2010-11-02 18:31:28 -0400 (Tue, 02 Nov 2010) | 5 lines

A passive node never has to do key offloading.
A passive node must cache roots from STORE and FIND_VALUE lookups even if
they fall within the node's k-ball because the routing table is not maintained
as the one of an active node, with deep knowledge of the closest nodes.

------------------------------------------------------------------------
r17653 | rmanfredi | 2010-11-02 18:26:56 -0400 (Tue, 02 Nov 2010) | 2 lines

Comment update.

------------------------------------------------------------------------
r17652 | rmanfredi | 2010-11-02 15:35:28 -0400 (Tue, 02 Nov 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17651 | rmanfredi | 2010-11-02 15:12:10 -0400 (Tue, 02 Nov 2010) | 2 lines

Was too overzealous with g_debug().

------------------------------------------------------------------------
r17650 | rmanfredi | 2010-11-02 12:10:25 -0400 (Tue, 02 Nov 2010) | 2 lines

Only remember PING-ing hosts when we send them a PONG.

------------------------------------------------------------------------
r17649 | rmanfredi | 2010-11-02 11:57:39 -0400 (Tue, 02 Nov 2010) | 3 lines

Also avoid bumping UDP output when entering the queue warnzone with a
stalling upload condition.

------------------------------------------------------------------------
r17648 | rmanfredi | 2010-11-02 11:48:53 -0400 (Tue, 02 Nov 2010) | 2 lines

Be less strict limiting lookups for keys that are "nearby enough" our KUID.

------------------------------------------------------------------------
r17647 | rmanfredi | 2010-11-02 10:49:48 -0400 (Tue, 02 Nov 2010) | 2 lines

Ooops.

------------------------------------------------------------------------
r17646 | rmanfredi | 2010-11-02 10:46:27 -0400 (Tue, 02 Nov 2010) | 2 lines

Throttle lookups as a precaution against abuse from a rogue node.

------------------------------------------------------------------------
r17645 | rmanfredi | 2010-11-02 10:44:06 -0400 (Tue, 02 Nov 2010) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r17644 | rmanfredi | 2010-11-02 10:43:22 -0400 (Tue, 02 Nov 2010) | 2 lines

download_push_ack(): added pre-condition.

------------------------------------------------------------------------
r17643 | rmanfredi | 2010-11-02 09:50:45 -0400 (Tue, 02 Nov 2010) | 2 lines

Updated PING throttling debug message to show time elapsed since last PING.

------------------------------------------------------------------------
r17642 | rmanfredi | 2010-11-02 09:49:41 -0400 (Tue, 02 Nov 2010) | 2 lines

Added aging_age().

------------------------------------------------------------------------
r17641 | rmanfredi | 2010-11-02 09:28:16 -0400 (Tue, 02 Nov 2010) | 3 lines

Avoid bumping UDP output queues on flow-control conditions when uploads are
stalling, thereby indicating a probable bandwidth saturation condition already.

------------------------------------------------------------------------
r17640 | rmanfredi | 2010-11-02 09:27:00 -0400 (Tue, 02 Nov 2010) | 4 lines

Now that main() no longer needs to call kmsg_init(), move back that declaration
to the DHT includes.
Added missing kmsg_close() declaration.

------------------------------------------------------------------------
r17639 | rmanfredi | 2010-11-02 07:58:46 -0400 (Tue, 02 Nov 2010) | 2 lines

Throttle DHT pings from same IP address.

------------------------------------------------------------------------
r17638 | rmanfredi | 2010-11-02 07:42:43 -0400 (Tue, 02 Nov 2010) | 3 lines

knode_can_recontact(): double the delay before recontacting a node after
a timeout.

------------------------------------------------------------------------
r17637 | rmanfredi | 2010-11-02 07:41:06 -0400 (Tue, 02 Nov 2010) | 2 lines

Fixed improper #ifdef check.

------------------------------------------------------------------------
r17636 | rmanfredi | 2010-11-02 07:39:06 -0400 (Tue, 02 Nov 2010) | 3 lines

Also split dropped DHT messages by type in the stats instead of bundling
them under a common "DHT" line.

------------------------------------------------------------------------
r17635 | rmanfredi | 2010-11-02 07:31:15 -0400 (Tue, 02 Nov 2010) | 2 lines

Added missing include "lib/glib-missing.h" for g_info().

------------------------------------------------------------------------
r17634 | rmanfredi | 2010-11-01 20:29:57 -0400 (Mon, 01 Nov 2010) | 2 lines

More g_message() conversion!

------------------------------------------------------------------------
r17633 | rmanfredi | 2010-11-01 20:29:13 -0400 (Mon, 01 Nov 2010) | 4 lines

DHT message statistics are now done with the proper Kademlia granularity.
Added ability to register callback along with an UDP ping to monitor replies
or timeouts.

------------------------------------------------------------------------
r17632 | rmanfredi | 2010-11-01 19:46:56 -0400 (Mon, 01 Nov 2010) | 2 lines

Normalized g_message() string: no capitalization of first letter.

------------------------------------------------------------------------
r17631 | rmanfredi | 2010-11-01 19:45:48 -0400 (Mon, 01 Nov 2010) | 2 lines

Last g_message() conversion?

------------------------------------------------------------------------
r17630 | rmanfredi | 2010-11-01 19:44:15 -0400 (Mon, 01 Nov 2010) | 2 lines

Another g_message() conversion.

------------------------------------------------------------------------
r17629 | rmanfredi | 2010-11-01 19:42:44 -0400 (Mon, 01 Nov 2010) | 2 lines

More g_message() conversions.

------------------------------------------------------------------------
r17628 | rmanfredi | 2010-11-01 18:11:11 -0400 (Mon, 01 Nov 2010) | 3 lines

Typo fixes.
Made "Compact Status" a VLE-8 quantity.

------------------------------------------------------------------------
r17627 | rmanfredi | 2010-11-01 10:54:21 -0400 (Mon, 01 Nov 2010) | 2 lines

Fixed improper paragraph contradicted by following table.

------------------------------------------------------------------------
r17626 | rmanfredi | 2010-11-01 10:46:39 -0400 (Mon, 01 Nov 2010) | 2 lines

Initial draft.

------------------------------------------------------------------------
r17625 | bpringlemeir | 2010-10-31 17:37:29 -0400 (Sun, 31 Oct 2010) | 1 line

Update ignore properties for generated bit_array.h and bit_field.h
------------------------------------------------------------------------
r17624 | bpringlemeir | 2010-10-31 17:36:21 -0400 (Sun, 31 Oct 2010) | 1 line

Add glib-missing.h for definition of g_debug().
------------------------------------------------------------------------
r17622 | rmanfredi | 2010-10-31 16:00:55 -0400 (Sun, 31 Oct 2010) | 2 lines

Ultimate g_message() conversion.

------------------------------------------------------------------------
r17621 | rmanfredi | 2010-10-31 15:59:41 -0400 (Sun, 31 Oct 2010) | 2 lines

Last batch of g_message() conversions.

------------------------------------------------------------------------
r17620 | rmanfredi | 2010-10-31 15:53:29 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() conversions.

------------------------------------------------------------------------
r17619 | rmanfredi | 2010-10-31 15:34:20 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() adjustments.

------------------------------------------------------------------------
r17618 | rmanfredi | 2010-10-31 15:24:38 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() adjustments.

------------------------------------------------------------------------
r17617 | rmanfredi | 2010-10-31 15:11:08 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() adjustments.

------------------------------------------------------------------------
r17616 | rmanfredi | 2010-10-31 15:02:28 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() conversions.

------------------------------------------------------------------------
r17615 | rmanfredi | 2010-10-31 14:53:27 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() conversions.

------------------------------------------------------------------------
r17614 | rmanfredi | 2010-10-31 14:48:06 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() adjustments.

------------------------------------------------------------------------
r17613 | rmanfredi | 2010-10-31 14:41:32 -0400 (Sun, 31 Oct 2010) | 2 lines

More g_message() adjustments.

------------------------------------------------------------------------
r17612 | rmanfredi | 2010-10-31 14:20:28 -0400 (Sun, 31 Oct 2010) | 3 lines

oob_reply_ack_record(): use hash_list_moveto_tail() to make code much more
elegant.

------------------------------------------------------------------------
r17611 | rmanfredi | 2010-10-31 14:19:23 -0400 (Sun, 31 Oct 2010) | 3 lines

Debugging messages that cannot be understood by lambda users should not use
g_message() but rather g_debug().

------------------------------------------------------------------------
r17610 | rmanfredi | 2010-10-31 13:54:21 -0400 (Sun, 31 Oct 2010) | 2 lines

Messages displayed during startup are informative.

------------------------------------------------------------------------
r17609 | rmanfredi | 2010-10-31 13:49:56 -0400 (Sun, 31 Oct 2010) | 2 lines

kmsg_infostr_to_buf(): display size of extended header if present.

------------------------------------------------------------------------
r17608 | rmanfredi | 2010-10-31 06:01:53 -0400 (Sun, 31 Oct 2010) | 2 lines

Protect stack unwiding macros with HAS_GCC(3, 0) instead of simpler __GNUC__.

------------------------------------------------------------------------
r17607 | rmanfredi | 2010-10-31 05:59:23 -0400 (Sun, 31 Oct 2010) | 2 lines

Renamed HAVE_GCC() into HAS_GCC() so that it reads better after #if.

------------------------------------------------------------------------
r17606 | rmanfredi | 2010-10-31 05:36:29 -0400 (Sun, 31 Oct 2010) | 2 lines

Turned debugging messages into g_debug(), and informative ones as g_info().

------------------------------------------------------------------------
r17605 | rmanfredi | 2010-10-31 05:24:44 -0400 (Sun, 31 Oct 2010) | 2 lines

Glib 2.x defines g_debug() already.

------------------------------------------------------------------------
r17604 | rmanfredi | 2010-10-31 05:20:47 -0400 (Sun, 31 Oct 2010) | 2 lines

Added missing g_info() and g_debug() convenience logging macros.

------------------------------------------------------------------------
r17601 | rmanfredi | 2010-10-30 16:09:53 -0400 (Sat, 30 Oct 2010) | 4 lines

gnet_stats_count_received_payload(): don't read the payload size from the
Gnutella header, it may be wrong, especially for UDP messages.  Trust n->size
to accurately represent what was actually read.

------------------------------------------------------------------------
r17600 | rmanfredi | 2010-10-30 16:06:39 -0400 (Sat, 30 Oct 2010) | 2 lines

Typo fix in comment.

------------------------------------------------------------------------
r17599 | rmanfredi | 2010-10-30 14:47:58 -0400 (Sat, 30 Oct 2010) | 2 lines

dht_route_parse(): condensed expanded logic into a loop.

------------------------------------------------------------------------
r17598 | rmanfredi | 2010-10-30 12:54:39 -0400 (Sat, 30 Oct 2010) | 3 lines

buffers_reset_reading(): must not check for a valid socket because it may
not be the case if we come from here after a download_clone(), which clears it!

------------------------------------------------------------------------
r17597 | rmanfredi | 2010-10-30 12:44:36 -0400 (Sat, 30 Oct 2010) | 2 lines

download_stop_v(): must discard buffers before calling buffers_free().

------------------------------------------------------------------------
r17596 | rmanfredi | 2010-10-30 11:04:55 -0400 (Sat, 30 Oct 2010) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r17595 | rmanfredi | 2010-10-30 11:04:13 -0400 (Sat, 30 Oct 2010) | 2 lines

Delay expiration time of OOB query only when the requester is still interested.

------------------------------------------------------------------------
r17594 | rmanfredi | 2010-10-30 11:03:07 -0400 (Sat, 30 Oct 2010) | 3 lines

publish_cache_iterate(): forgot to put message back in the publish queue if we
detect that the message is still referenced by someone else.

------------------------------------------------------------------------
r17593 | cbiere | 2010-10-30 10:18:49 -0400 (Sat, 30 Oct 2010) | 2 lines

Reverting previous change; there was actually no issue.

------------------------------------------------------------------------
r17592 | cbiere | 2010-10-30 10:11:49 -0400 (Sat, 30 Oct 2010) | 2 lines

Modified shell syntax requires escaping of semi-colon, too.

------------------------------------------------------------------------
r17591 | rmanfredi | 2010-10-30 09:04:45 -0400 (Sat, 30 Oct 2010) | 2 lines

Fixed bad GUI status for fileinfo: do not say "SHA1 failed" unless it's true.

------------------------------------------------------------------------
r17590 | rmanfredi | 2010-10-30 08:55:52 -0400 (Sat, 30 Oct 2010) | 6 lines

download_stop_v(): if flushing buffered data makes the file complete, launch
the SHA1 verification.
This will hopefully close a small hole whereby completed downloads sit there
idle (the GUI wrongly reporting them as "SHA1 failed") without triggering
any verification.

------------------------------------------------------------------------
r17589 | rmanfredi | 2010-10-30 06:21:34 -0400 (Sat, 30 Oct 2010) | 2 lines

Show node type in debugging messages pertaining to security violations.

------------------------------------------------------------------------
r17588 | rmanfredi | 2010-10-30 05:20:57 -0400 (Sat, 30 Oct 2010) | 4 lines

Fixed hash_list_sort() and hash_list_sort_with_data() to unwrap the
hash_list_item keys before invoking the comparison function.


------------------------------------------------------------------------
r17587 | rmanfredi | 2010-10-29 11:49:04 -0400 (Fri, 29 Oct 2010) | 2 lines

Added serialization / deserialization support for fixed strings.

------------------------------------------------------------------------
r17586 | rmanfredi | 2010-10-29 11:43:35 -0400 (Fri, 29 Oct 2010) | 2 lines

Added file-level comment.

------------------------------------------------------------------------
r17585 | rmanfredi | 2010-10-29 11:22:56 -0400 (Fri, 29 Oct 2010) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r17584 | rmanfredi | 2010-10-29 11:21:18 -0400 (Fri, 29 Oct 2010) | 2 lines

Added gnet_host_t atoms.

------------------------------------------------------------------------
r17583 | rmanfredi | 2010-10-29 10:05:08 -0400 (Fri, 29 Oct 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17582 | rmanfredi | 2010-10-29 10:01:30 -0400 (Fri, 29 Oct 2010) | 2 lines

Added gm_slist_prepend_const().

------------------------------------------------------------------------
r17581 | rmanfredi | 2010-10-29 09:53:39 -0400 (Fri, 29 Oct 2010) | 2 lines

Remove generated source files on "realclean" only, not on "clean".

------------------------------------------------------------------------
r17580 | rmanfredi | 2010-10-29 09:52:29 -0400 (Fri, 29 Oct 2010) | 2 lines

Fixed small memory leak.

------------------------------------------------------------------------
r17579 | rmanfredi | 2010-10-29 09:29:45 -0400 (Fri, 29 Oct 2010) | 3 lines

Added hash_list_sort() and hash_list_sort_with_data(), with crude
implementations.

------------------------------------------------------------------------
r17578 | cbiere | 2010-10-29 02:15:26 -0400 (Fri, 29 Oct 2010) | 2 lines

Added GhostWhiteCrab.

------------------------------------------------------------------------
r17577 | rmanfredi | 2010-10-28 15:31:23 -0400 (Thu, 28 Oct 2010) | 3 lines

Bad #ifdef edit left vmm_alloc() undeclared for mainstream.  Surely a killer
for 64-bit platforms where int is not 64 bits.

------------------------------------------------------------------------
r17576 | rmanfredi | 2010-10-27 17:58:07 -0400 (Wed, 27 Oct 2010) | 3 lines

Normalized debugging messages for HEAD pings and pongs, to allow for simpler
grepping in the logs.

------------------------------------------------------------------------
r17575 | rmanfredi | 2010-10-27 16:11:51 -0400 (Wed, 27 Oct 2010) | 3 lines

Added the TRACK_VMM compilation option to track leaks from the VMM layer, as
well as correct usage monitoring during execution.

------------------------------------------------------------------------
r17574 | rmanfredi | 2010-10-27 12:47:05 -0400 (Wed, 27 Oct 2010) | 3 lines

Removed faulty static assertion which assumed that the strictest memory
alignment constraints applied to pointers.

------------------------------------------------------------------------
r17573 | cbiere | 2010-10-27 12:25:45 -0400 (Wed, 27 Oct 2010) | 2 lines

Added filter.

------------------------------------------------------------------------
r17572 | cbiere | 2010-10-27 12:01:53 -0400 (Wed, 27 Oct 2010) | 2 lines

Marked unfixed bug.

------------------------------------------------------------------------
r17571 | cbiere | 2010-10-27 12:01:00 -0400 (Wed, 27 Oct 2010) | 2 lines

Corrected hash function signature.

------------------------------------------------------------------------
r17570 | cbiere | 2010-10-27 11:18:53 -0400 (Wed, 27 Oct 2010) | 2 lines

Updated list of UHCs.

------------------------------------------------------------------------
r17569 | rmanfredi | 2010-10-26 18:40:07 -0400 (Tue, 26 Oct 2010) | 2 lines

Plugged "omalloc_debug" in.

------------------------------------------------------------------------
r17568 | rmanfredi | 2010-10-26 18:29:07 -0400 (Tue, 26 Oct 2010) | 2 lines

Protected z_leakset with TRACK_MALLOC since it's always used in that context.

------------------------------------------------------------------------
r17567 | rmanfredi | 2010-10-26 18:27:57 -0400 (Tue, 26 Oct 2010) | 2 lines

Added dedicated debug level.

------------------------------------------------------------------------
r17566 | rmanfredi | 2010-10-26 17:49:32 -0400 (Tue, 26 Oct 2010) | 2 lines

Added more information in logging messages, for health monitoring purposes.

------------------------------------------------------------------------
r17565 | rmanfredi | 2010-10-26 17:48:33 -0400 (Tue, 26 Oct 2010) | 2 lines

Consolidate leak summary among all zones, instead of per-zone as it used to be.

------------------------------------------------------------------------
r17564 | rmanfredi | 2010-10-26 16:46:24 -0400 (Tue, 26 Oct 2010) | 4 lines

At exit time, report "leaked" pages from the VMM layer, taking into account
the never-freed pages used by omalloc().
Changed the oder at exit time to call hdestroy() before the new vmm_close().

------------------------------------------------------------------------
r17563 | rmanfredi | 2010-10-26 16:42:18 -0400 (Tue, 26 Oct 2010) | 3 lines

Updated malloc and zalloc to use the new omalloc() layer and the new stack
tracing interface.

------------------------------------------------------------------------
r17562 | rmanfredi | 2010-10-26 16:38:58 -0400 (Tue, 26 Oct 2010) | 4 lines

Moved all the stack tracing logic to stacktrace.[ch], with a slight redesign
of the API to make it more useful.
Added omalloc(), a one-time memory allocator for never-freed memory.

------------------------------------------------------------------------
r17561 | rmanfredi | 2010-10-26 12:41:48 -0400 (Tue, 26 Oct 2010) | 2 lines

Fixed compilation warning.

------------------------------------------------------------------------
r17560 | rmanfredi | 2010-10-25 17:05:39 -0400 (Mon, 25 Oct 2010) | 2 lines

Fixed improper hop count display (always showing 2147483647).

------------------------------------------------------------------------
r17559 | rmanfredi | 2010-10-25 16:42:58 -0400 (Mon, 25 Oct 2010) | 2 lines

Passive nodes need not randomly ping others.

------------------------------------------------------------------------
r17558 | rmanfredi | 2010-10-25 14:22:42 -0400 (Mon, 25 Oct 2010) | 3 lines

pdht_close(): better cancel push-proxy publisher before erasing the other
hash tables, even though there should be no risk here.

------------------------------------------------------------------------
r17557 | rmanfredi | 2010-10-25 12:57:57 -0400 (Mon, 25 Oct 2010) | 2 lines

Oops, submitted with some debugging turned on.

------------------------------------------------------------------------
r17556 | rmanfredi | 2010-10-25 12:44:24 -0400 (Mon, 25 Oct 2010) | 4 lines

Enhanced zalloc() to support MALLOC_TIME as well.
Made MALLOC_TIME a global compilation directive since it can apply to both
zalloc() and malloc() now.

------------------------------------------------------------------------
r17555 | rmanfredi | 2010-10-24 18:33:34 -0400 (Sun, 24 Oct 2010) | 2 lines

pdht_publish_done(): avoid spurious uninitialized usage warning from compiler.

------------------------------------------------------------------------
r17554 | rmanfredi | 2010-10-24 18:31:03 -0400 (Sun, 24 Oct 2010) | 2 lines

host_addr_pack(): shut compiler warning up.

------------------------------------------------------------------------
r17553 | rmanfredi | 2010-10-24 18:28:48 -0400 (Sun, 24 Oct 2010) | 3 lines

sdbm_shrink(): avoid compiler optimization assuming there won't be an overflow
when we want to test that there isn't... Make all quantities unsigned.

------------------------------------------------------------------------
r17552 | rmanfredi | 2010-10-24 18:05:36 -0400 (Sun, 24 Oct 2010) | 3 lines

Internal memory allocation now uses g_malloc() instead of raw malloc() calls
so that we can benefit from leak detection when compiled under TRACK_MALLOC.

------------------------------------------------------------------------
r17551 | rmanfredi | 2010-10-24 15:10:08 -0400 (Sun, 24 Oct 2010) | 2 lines

Fixed improper placing of the NOT_LEAKING() call in lazy_ variants.

------------------------------------------------------------------------
r17550 | rmanfredi | 2010-10-24 15:08:46 -0400 (Sun, 24 Oct 2010) | 5 lines

malloc_not_leaking(): also check the address for tracked blocks which would
not have been allocated through real_malloc().
Emit a warning under MALLOC_VTABLE when we are given an unknown address to
ignore.

------------------------------------------------------------------------
r17549 | rmanfredi | 2010-10-24 14:41:00 -0400 (Sun, 24 Oct 2010) | 3 lines

Added inputevt_purge_removed() to explicitly purge removed descriptors at
final shutdown time (or they would be wrongly reported as leaks).

------------------------------------------------------------------------
r17548 | rmanfredi | 2010-10-24 14:12:10 -0400 (Sun, 24 Oct 2010) | 6 lines

trace_name(): protected against no symbols being loaded.  Also print the
hexadecimal PC if the trace entry happens to be the last symbol of the
executable (usually "_fini" at the end of the text segment, but hopefully
nothing really defined in our program that we would want to show).
As such. was able to simplify final leak tracing code.

------------------------------------------------------------------------
r17547 | rmanfredi | 2010-10-24 13:00:36 -0400 (Sun, 24 Oct 2010) | 3 lines

Added MALLOC_TIME to optionally record allocation/tracking time of blocks so
that final leak reports can tell us how old leaked object are.

------------------------------------------------------------------------
r17546 | rmanfredi | 2010-10-24 12:10:10 -0400 (Sun, 24 Oct 2010) | 8 lines

Information about tracked blocks (the struct block) is now allocated through
raw malloc(), not via real_malloc(): this is an internal data structure that
pollutes the otherwise application-tracked data and consumes needless hash
table space.
Simplified memory stats collected by periodic routine: separate memory into
"tracked" and "real" categories, knowing that the tracked items are allocated
using real_malloc() most of the time anyway.

------------------------------------------------------------------------
r17545 | rmanfredi | 2010-10-23 13:22:07 -0400 (Sat, 23 Oct 2010) | 6 lines

Fixed periodic statistics: was counting owned blocks twice!
First take at dumping all the remaining allocated blocks that are not directly
under our control (glib, GTK) and which were caputured via real_malloc()
and friends.  These are not real leaks, because there's little we can do
about them.

------------------------------------------------------------------------
r17544 | rmanfredi | 2010-10-23 11:13:12 -0400 (Sat, 23 Oct 2010) | 6 lines

Enhanced the malloc debugging layer, fixing some of the missed tracking spots.
By default, MALLOC_VTABLE is turned on when TRACK_MALLOC is enabled.
Allocation stack frames of "real" blocks is also kept when MALLOC_FRAMES is on.
Some important inconsistencies (indicative of likely severe memory corruption)
now cause a fatal error.

------------------------------------------------------------------------
r17543 | rmanfredi | 2010-10-21 17:48:42 -0400 (Thu, 21 Oct 2010) | 3 lines

gtk_clist_set_column_name(): mark allocated title as non-leaking since
GTK can free it.

------------------------------------------------------------------------
r17542 | rmanfredi | 2010-10-21 17:40:16 -0400 (Thu, 21 Oct 2010) | 10 lines

Made MALLOC_SAFE_HEAD work.
Allow TRACK_MALLOC and TRACK_ZALLOC to be used simultaneously.
real_free(): forgot to remove pointer from the "reals" table, resulting in
spurious warnings about missing freeing of blocks and causing false warnings
about corrupted blocks when MALLOC_PERIODIC was on.
Removed dependency on GNU lib's backtrace() by implementing our own
gcc-specific (but portable) stack unwinding.
zmove(): must update any non-leaking information if we move block around.
malloc_periodic(): report allocated memory size in message.

------------------------------------------------------------------------
r17541 | rmanfredi | 2010-10-20 18:20:44 -0400 (Wed, 20 Oct 2010) | 2 lines

Typo fix.

------------------------------------------------------------------------
r17540 | rmanfredi | 2010-10-20 18:18:53 -0400 (Wed, 20 Oct 2010) | 2 lines

For MALLOC_PERIODIC: count amount of blocks and warn when we have corruption.

------------------------------------------------------------------------
r17539 | rmanfredi | 2010-10-20 17:19:11 -0400 (Wed, 20 Oct 2010) | 3 lines

block_check_marks(): do not check blocks we did not allocate: they bear no
marking sentinels.

------------------------------------------------------------------------
r17538 | rmanfredi | 2010-10-20 17:12:11 -0400 (Wed, 20 Oct 2010) | 3 lines

block_check_marks(): flag block as corrupted if we detect changed sentinels
in order to avoid logging corruptions for the same block multiple times.

------------------------------------------------------------------------
r17537 | rmanfredi | 2010-10-20 16:45:36 -0400 (Wed, 20 Oct 2010) | 3 lines

Fixed compilation of conditional code that had not been turned on for a
long time...

------------------------------------------------------------------------
r17536 | rmanfredi | 2010-10-20 16:36:20 -0400 (Wed, 20 Oct 2010) | 2 lines

Made sure MALLOC_STATS and MALLOC_FRAMES can be used separately.

------------------------------------------------------------------------
r17535 | rmanfredi | 2010-10-20 13:47:46 -0400 (Wed, 20 Oct 2010) | 4 lines

Made it possible to use MALLOC_FRAMES with TRACK_ZALLOC.
Documented malloc debugging options.
Fixed typo that prevented MALLOC_DUP_FREE from taking effect.

------------------------------------------------------------------------
r17534 | rmanfredi | 2010-10-20 12:33:38 -0400 (Wed, 20 Oct 2010) | 4 lines

Added dht_is_active().
For passive DHT nodes, limit the depth of the bucket tree and increase the
duration between alive checks.

------------------------------------------------------------------------
r17533 | rmanfredi | 2010-10-19 15:37:54 -0400 (Tue, 19 Oct 2010) | 3 lines

Limit the size of the routing table for passive nodes, lowering the bandwidth
requirements for maintenance.

------------------------------------------------------------------------
r17532 | rmanfredi | 2010-10-19 15:24:26 -0400 (Tue, 19 Oct 2010) | 6 lines

The number of passive DHT hosts outnumbers the number of active ones: limit
the number of PINGs we answer from such hosts by using random drops when we
start to saturate bandwidth or the outgoing DHT UDP queue fills up.
Enforce passive mode if they choose to configure us that way by dropping all
incoming DHT RPC calls.

------------------------------------------------------------------------
r17531 | rmanfredi | 2010-10-19 15:19:52 -0400 (Tue, 19 Oct 2010) | 2 lines

dht_rpc_info(): allow calls with NULL addr/port argumenrs.

------------------------------------------------------------------------
r17530 | rmanfredi | 2010-10-19 12:09:07 -0400 (Tue, 19 Oct 2010) | 2 lines

DHT mode, state and bootstrap status is now managed through properties.

------------------------------------------------------------------------
r17529 | rmanfredi | 2010-10-19 12:06:30 -0400 (Tue, 19 Oct 2010) | 2 lines

Fixed comment typos.

------------------------------------------------------------------------
r17528 | rmanfredi | 2010-10-19 09:34:25 -0400 (Tue, 19 Oct 2010) | 2 lines

Fixed #include now that dht_mode_t moved.

------------------------------------------------------------------------
r17527 | rmanfredi | 2010-10-19 09:31:28 -0400 (Tue, 19 Oct 2010) | 2 lines

validpage(): was not passing the proper key number to getnkey().

------------------------------------------------------------------------
r17526 | rmanfredi | 2010-10-19 07:59:40 -0400 (Tue, 19 Oct 2010) | 3 lines

Moved DHT boot status to new "if/dht/routing.h" and prefixed constants with
DHT now that they are visible.

------------------------------------------------------------------------
r17525 | rmanfredi | 2010-10-19 02:35:21 -0400 (Tue, 19 Oct 2010) | 3 lines

answer_find_node(): was not setting proper debugging message when remote nodes
lookup our KUID explicitly.

------------------------------------------------------------------------
r17524 | rmanfredi | 2010-10-18 19:23:05 -0400 (Mon, 18 Oct 2010) | 4 lines

Display query hits requiring a push in "dark slate gray" so that they stand out.
Partial files being seeded (i.e. complete files) are displayed as if they were
library files shared instead of just partials.

------------------------------------------------------------------------
r17523 | rmanfredi | 2010-10-18 16:51:51 -0400 (Mon, 18 Oct 2010) | 4 lines

setdbit() and sdbm_shrink(): must mark dirbuf dirty regardless of whether
database is volatile in case flush_dirbuf() fails.
validpage(): must flush back to disk any deletion made.

------------------------------------------------------------------------
r17522 | rmanfredi | 2010-10-18 08:03:39 -0400 (Mon, 18 Oct 2010) | 3 lines

free_cached(): removed wrong assertion now that we can iterate on the
database without flushing all the dirty entries from the cache.

------------------------------------------------------------------------
r17521 | rmanfredi | 2010-10-17 14:08:04 -0400 (Sun, 17 Oct 2010) | 4 lines

When contacting a given push-proxy, always send an UDP push directly first,
waiting for a while to see if we get a connect back from the actual push target.
Only then do we try to initiate a TCP connection to the push-proxy.

------------------------------------------------------------------------
r17520 | rmanfredi | 2010-10-17 11:15:32 -0400 (Sun, 17 Oct 2010) | 2 lines

sdbm_shrink(): Avoid touching the .idx file if we don't have too.

------------------------------------------------------------------------
r17519 | rmanfredi | 2010-10-17 07:56:11 -0400 (Sun, 17 Oct 2010) | 4 lines

Work around possible incorrect key count causing assertion failures in
dbmap_remove().  Since this may not necessarily be a bookkeeping bug in
the DBMAP layer, be fault-tolerent but loudly report it.

------------------------------------------------------------------------
r17518 | rmanfredi | 2010-10-17 07:12:36 -0400 (Sun, 17 Oct 2010) | 2 lines

host_timer(): limit connection attempts to a given host to 1 per 2 minutes.

------------------------------------------------------------------------
r17517 | rmanfredi | 2010-10-17 06:54:31 -0400 (Sun, 17 Oct 2010) | 3 lines

validpage(): check returned value from delipair() to loudly complain about
any unexpected failure.

------------------------------------------------------------------------
r17516 | rmanfredi | 2010-10-17 06:53:18 -0400 (Sun, 17 Oct 2010) | 2 lines

delipair(): ensure key number is odd.

------------------------------------------------------------------------
r17515 | rmanfredi | 2010-10-17 06:00:45 -0400 (Sun, 17 Oct 2010) | 2 lines

Throttle UDP pings so that we do not bombard a single host with many requests.

------------------------------------------------------------------------
r17514 | rmanfredi | 2010-10-17 05:00:46 -0400 (Sun, 17 Oct 2010) | 3 lines

If I/O errors were detected during operations of a persisted DB, request key
checking at next startup.

------------------------------------------------------------------------
r17513 | rmanfredi | 2010-10-17 04:57:32 -0400 (Sun, 17 Oct 2010) | 2 lines

validpage(): show how many keys were on the page if we remove anything.

------------------------------------------------------------------------
r17512 | rmanfredi | 2010-10-16 20:14:45 -0400 (Sat, 16 Oct 2010) | 2 lines

dbmw_all_keys(): must sync cache before calling dbmap_all_keys().

------------------------------------------------------------------------
r17511 | rmanfredi | 2010-10-16 19:38:34 -0400 (Sat, 16 Oct 2010) | 3 lines

Added sdbm_firskey_safe() to start an iteration with extended page checks.
This is used by the DBMAP layer when opening a persisted database.

------------------------------------------------------------------------
r17510 | rmanfredi | 2010-10-16 18:39:03 -0400 (Sat, 16 Oct 2010) | 2 lines

sdbm_firstkey(): skip leading faulty pages, as getnext() will later on.

------------------------------------------------------------------------
r17509 | rmanfredi | 2010-10-16 16:34:04 -0400 (Sat, 16 Oct 2010) | 4 lines

Only sync deleted keys before iterations now.  The unflushed (new) keys that
are still cached and pending flush are now traversed explicitly, in order
to maximize the chance of write cache hits.

------------------------------------------------------------------------
r17508 | rmanfredi | 2010-10-16 16:30:15 -0400 (Sat, 16 Oct 2010) | 2 lines

sdbm_shrink(): also truncate the .dir file as necessary.

------------------------------------------------------------------------
r17507 | rmanfredi | 2010-10-16 16:27:49 -0400 (Sat, 16 Oct 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17506 | rmanfredi | 2010-10-16 16:26:44 -0400 (Sat, 16 Oct 2010) | 2 lines

Raised minimum bootstrap_debug level for tracing UDP IPP pongs to 3.

------------------------------------------------------------------------
r17505 | rmanfredi | 2010-10-16 09:11:14 -0400 (Sat, 16 Oct 2010) | 2 lines

During SDBM traversals, emit warnings should we bump into invalid keys.

------------------------------------------------------------------------
r17504 | rmanfredi | 2010-10-16 08:48:20 -0400 (Sat, 16 Oct 2010) | 2 lines

Fixed English mistakes.

------------------------------------------------------------------------
r17503 | rmanfredi | 2010-10-15 17:48:32 -0400 (Fri, 15 Oct 2010) | 6 lines

Removed dead UHCs.
Removed useless attempt counting logic: it is sufficient to limit reconnections
to the various UHCs.
Will now fallback to the GHC (Global Host Cache) if we get no reply from any
of the UHCs.

------------------------------------------------------------------------
r17502 | rmanfredi | 2010-10-15 17:46:31 -0400 (Fri, 15 Oct 2010) | 2 lines

udp_send_ping(): documented parameters.

------------------------------------------------------------------------
r17501 | rmanfredi | 2010-10-15 17:41:27 -0400 (Fri, 15 Oct 2010) | 4 lines

Added Global Host Cache as a last-resort bootstrapping mechanism when UDP is
not working and there is nothing exploitable in the host caches or in the DHT
routing table -- we're dealing with a true new Gnutella node instance.

------------------------------------------------------------------------
r17500 | rmanfredi | 2010-10-15 17:34:24 -0400 (Fri, 15 Oct 2010) | 4 lines

host_timer(): be smarter and prefer using DHT nodes over cached hosts, as
they are likely to be fresher.  Also, since DHT nodes are modern and support
UDP by definition, try to use them as an UHC to get more hosts in the cache.

------------------------------------------------------------------------
r17499 | rmanfredi | 2010-10-15 16:53:36 -0400 (Fri, 15 Oct 2010) | 3 lines

Use the DHT routing table as a source for new node addresses when the host
caches are depleted, before attempting to contact the UHCs.

------------------------------------------------------------------------
r17498 | rmanfredi | 2010-10-15 16:49:12 -0400 (Fri, 15 Oct 2010) | 2 lines

file_config_open(): fixed possible memory leak.

------------------------------------------------------------------------
r17497 | rmanfredi | 2010-10-15 16:48:00 -0400 (Fri, 15 Oct 2010) | 2 lines

Remove pragmas for inlined routines which were causing compiler errors.

------------------------------------------------------------------------
r17496 | rmanfredi | 2010-10-15 16:46:29 -0400 (Fri, 15 Oct 2010) | 2 lines

Added list_shift().

------------------------------------------------------------------------
r17495 | rmanfredi | 2010-10-15 12:47:48 -0400 (Fri, 15 Oct 2010) | 2 lines

Replaced "gpointer" with "void *" and made keys "const" in the signature.

------------------------------------------------------------------------
r17494 | rmanfredi | 2010-10-14 19:57:36 -0400 (Thu, 14 Oct 2010) | 2 lines

Added FrostWire's UHC.

------------------------------------------------------------------------
r17493 | rmanfredi | 2010-10-14 16:48:55 -0400 (Thu, 14 Oct 2010) | 3 lines

makroom(): count an unfixable split error if we cannot set the bit in
the forest bitmap after the page split has occurred and emit a warning.

------------------------------------------------------------------------
r17492 | rmanfredi | 2010-10-13 18:27:46 -0400 (Wed, 13 Oct 2010) | 2 lines

Updated with recent fixes.

------------------------------------------------------------------------
r17491 | rmanfredi | 2010-10-13 17:56:48 -0400 (Wed, 13 Oct 2010) | 3 lines

Ignore RPC timeouts when we appear to be no longer connected to the Internet,
so that we do not lose all our valid DHT nodes.

------------------------------------------------------------------------
r17490 | rmanfredi | 2010-10-13 15:31:26 -0400 (Wed, 13 Oct 2010) | 3 lines

Removed ShareMonkey URL support: they went out of business and
sharemonkey.com now redirects to a porn site.

------------------------------------------------------------------------
r17489 | rmanfredi | 2010-10-13 15:20:54 -0400 (Wed, 13 Oct 2010) | 2 lines

CPU frequencies are reported in kHz by /sys files.

------------------------------------------------------------------------
r17488 | rmanfredi | 2010-10-13 14:39:43 -0400 (Wed, 13 Oct 2010) | 2 lines

Adjusted debugging message: "frequency variation" -> "frequency scaling".

------------------------------------------------------------------------
r17487 | rmanfredi | 2010-10-13 14:21:43 -0400 (Wed, 13 Oct 2010) | 4 lines

Added CPU frequency scaling detection on Linux, to be able to adjust the
amount of CPU used, hence avoiding flagging a CPU overload when actually
the kernel slowed down the CPU.

------------------------------------------------------------------------
r17486 | rmanfredi | 2010-10-13 14:13:51 -0400 (Wed, 13 Oct 2010) | 5 lines

download_push_proxy_sleep(): invoke download_retry() before calling
download_queue_delay() to make sure the download is properly stopped and
also to be able to gradually increase the retry period as we get more
push-proxy failures.

------------------------------------------------------------------------
r17485 | rmanfredi | 2010-10-13 09:16:20 -0400 (Wed, 13 Oct 2010) | 2 lines

Removed useless download_no_push_proxies() callback.

------------------------------------------------------------------------
r17484 | rmanfredi | 2010-10-13 03:45:14 -0400 (Wed, 13 Oct 2010) | 3 lines

pdht_prox_done(): removed assertion and instead made the code enforce the
dynamic state we want to be in.

------------------------------------------------------------------------
r17483 | rmanfredi | 2010-10-12 19:29:46 -0400 (Tue, 12 Oct 2010) | 2 lines

Must synchronize the cache before iterating over the underlying DB map.

------------------------------------------------------------------------
r17482 | rmanfredi | 2010-10-12 19:26:17 -0400 (Tue, 12 Oct 2010) | 5 lines

dbmap_foreach_remove(): forgot to check returned value from sdbm_deletekey().
Also count invalid keys in the file (in case it got corrupted).
Always update count at the end of the iteration, regardless of whether I/O
errors occurred.

------------------------------------------------------------------------
r17481 | rmanfredi | 2010-10-12 19:20:27 -0400 (Tue, 12 Oct 2010) | 3 lines

getnext(): skip faulty pages so that we can iterate on as many values
as possible.

------------------------------------------------------------------------
r17480 | rmanfredi | 2010-10-12 18:33:50 -0400 (Tue, 12 Oct 2010) | 5 lines

download_timer(): when sending an HTTP push-proxy request, do not time out here.
It will be handled by the async HTTP layer.
download_fallback_to_push(): we must check for DOWNLOAD_IS_EXPECTING_GIV()
only when dealing with a user request.

------------------------------------------------------------------------
r17479 | rmanfredi | 2010-10-12 18:29:21 -0400 (Tue, 12 Oct 2010) | 2 lines

Factorized calls to download_fallback_to_push().

------------------------------------------------------------------------
r17478 | rmanfredi | 2010-10-12 18:16:00 -0400 (Tue, 12 Oct 2010) | 2 lines

Added comment for union socket_addr.

------------------------------------------------------------------------
r17477 | rmanfredi | 2010-10-10 17:11:43 -0400 (Sun, 10 Oct 2010) | 4 lines

tree_view_motion_timeout(): fixed uninitialized memory read detected by
valgrind; tree_view_motion_set_callback() was not initializing tvm->ready.
Switched to walloc() for allocating tree_view_motion_t objects.

------------------------------------------------------------------------
r17476 | rmanfredi | 2010-10-10 14:18:11 -0400 (Sun, 10 Oct 2010) | 4 lines

Raise the CPU usage level watermarks because it's a pain to use GTKG through
the GUI in "overloaded" mode when "overloading" stems from the CPU frequency
being downscaled by the kernel, thus making the relative CPU usage skyrock!

------------------------------------------------------------------------
r17475 | rmanfredi | 2010-10-10 14:15:18 -0400 (Sun, 10 Oct 2010) | 2 lines

Cosmetic changes in debugging messages.

------------------------------------------------------------------------
r17474 | rmanfredi | 2010-10-10 12:55:27 -0400 (Sun, 10 Oct 2010) | 2 lines

Clear empty databases at startup, attempt to shrink them otherwise.

------------------------------------------------------------------------
r17473 | rmanfredi | 2010-10-10 07:50:35 -0400 (Sun, 10 Oct 2010) | 3 lines

If we retain no entries from the persisted database at startup, clear it to
reclaim the disk space.

------------------------------------------------------------------------
r17472 | rmanfredi | 2010-10-10 07:46:30 -0400 (Sun, 10 Oct 2010) | 4 lines

Removed unused field "blkno" in the DBM structure.
Added sdbm_clear() to remove all entries from the opened database.
Enriched upper layers with dbmap_clear() and dbmw_clear().

------------------------------------------------------------------------
r17471 | rmanfredi | 2010-10-10 05:40:18 -0400 (Sun, 10 Oct 2010) | 6 lines

sdbm_shrink(): moved some of the code to "#else !LRU" since that code is
not required when we're compiled with the LRU cache.
Added counter for corrupted page reads.
Will now unconditionally emit warnings at SDBM close time if errors occurred
during operations.

------------------------------------------------------------------------
r17470 | rmanfredi | 2010-10-09 20:10:27 -0400 (Sat, 09 Oct 2010) | 3 lines

Account for split write errors and unfixable split errors (leading to wrong
data being present on the disk).

------------------------------------------------------------------------
r17469 | rmanfredi | 2010-10-09 19:45:11 -0400 (Sat, 09 Oct 2010) | 2 lines

Converted legacy printf() calls to g_message().

------------------------------------------------------------------------
r17468 | rmanfredi | 2010-10-09 19:13:29 -0400 (Sat, 09 Oct 2010) | 4 lines

Track read/write errors, and among write errors those happening during flushes.
Include error counts during final stats.
Fixed conditional compilation when LRU is off but BIGDATA is turned on.

------------------------------------------------------------------------
r17467 | rmanfredi | 2010-10-09 18:50:11 -0400 (Sat, 09 Oct 2010) | 4 lines

All iterations over an SDBM file need not bother with sdbm_error() calls,
since the sdbm_nextkey() call will return a null item as soon as an error
occurs.

------------------------------------------------------------------------
r17466 | rmanfredi | 2010-10-09 16:47:15 -0400 (Sat, 09 Oct 2010) | 6 lines

Changed behaviour after SDBM errors: if the database is marked as volatile,
we clear the SDBM error condition to continue the operations anyway.
It is up to upper layers to guard against inconsistencies resulting from
transient I/O errors and the SDBM layer itself must be robust enough to not
crash even if it gets inconsistent data from disk.

------------------------------------------------------------------------
r17465 | rmanfredi | 2010-10-09 16:42:04 -0400 (Sat, 09 Oct 2010) | 3 lines

Changed semantics of dbmw_has_ioerr(): now reports only whether an I/O error
occurred during the last operation.

------------------------------------------------------------------------
r17464 | rmanfredi | 2010-10-09 15:54:36 -0400 (Sat, 09 Oct 2010) | 2 lines

Silence get_contact() if there's nothing to worry about.

------------------------------------------------------------------------
r17463 | rmanfredi | 2010-10-09 04:19:09 -0400 (Sat, 09 Oct 2010) | 4 lines

Cleanup pending nodes with the "shutdowning" flag set: either they come back
to life or they get removed from the routing table after too many unsuccessful
probes.

------------------------------------------------------------------------
r17462 | rmanfredi | 2010-10-09 03:32:41 -0400 (Sat, 09 Oct 2010) | 2 lines

[GTK1] on_clipboard_selection_get(): prevent crash if text is NULL.

------------------------------------------------------------------------
r17461 | rmanfredi | 2010-10-07 14:19:36 -0400 (Thu, 07 Oct 2010) | 2 lines

Added periodic reclaiming of expired cached security tokens.

------------------------------------------------------------------------
r17460 | rmanfredi | 2010-10-07 14:16:50 -0400 (Thu, 07 Oct 2010) | 3 lines

dbmw_foreach_common(): must discard existing cached entry when iterating for
removal and the key is targeted for removal.

------------------------------------------------------------------------
r17459 | rmanfredi | 2010-10-07 14:10:49 -0400 (Thu, 07 Oct 2010) | 2 lines

Made tm_time() an inlined routine.

------------------------------------------------------------------------
r17458 | rmanfredi | 2010-10-07 01:38:15 -0400 (Thu, 07 Oct 2010) | 7 lines

During bucket alive checks, try to promote pending nodes if we are short
of good nodes.
Attempt to optimize sending of alive pings by skipping nodes for which we have
at least one RPC pending.
Count amount of such alive pings that get optimized out, as well as the number
of stale nodes that get put back to the good bucket on RPC reply.

------------------------------------------------------------------------
r17457 | rmanfredi | 2010-10-06 12:22:25 -0400 (Wed, 06 Oct 2010) | 3 lines

Had forgotten to also update download_push_proxy_sleep().
download_push(): Adjusted logic for DLS_A_DHT_PUBLISH flag handling.

------------------------------------------------------------------------
r17456 | rmanfredi | 2010-10-06 12:17:34 -0400 (Wed, 06 Oct 2010) | 2 lines

Added missing "const" in signatures.

------------------------------------------------------------------------
r17455 | rmanfredi | 2010-10-06 12:15:27 -0400 (Wed, 06 Oct 2010) | 2 lines

Added guint32_saturate_mult().

------------------------------------------------------------------------
r17454 | rmanfredi | 2010-10-06 11:49:41 -0400 (Wed, 06 Oct 2010) | 3 lines

Persist server support for DHT publishes by extending the magnet syntax again
with a new "x.dht" attribute.

------------------------------------------------------------------------
r17453 | rmanfredi | 2010-10-06 09:21:36 -0400 (Wed, 06 Oct 2010) | 3 lines

Cleanup useless note now that bit_array.h and bit_field.h are generated from
a common source.

------------------------------------------------------------------------
r17452 | rmanfredi | 2010-10-06 08:48:06 -0400 (Wed, 06 Oct 2010) | 4 lines

gdht_handle_aloc(): moved call to download_server_publishes_in_dht() within
the cleanup section so that we can also record the DHT support flag in the
newly created server, if it did not exist before.

------------------------------------------------------------------------
r17451 | rmanfredi | 2010-10-06 08:30:31 -0400 (Wed, 06 Oct 2010) | 4 lines

Record servers that are known to publish in the DHT so that we do not blindly
discard firewalled source pointing to them should they become unavailable for
a while.  This assumes such servers will have a sticky GUID, of course.

------------------------------------------------------------------------
r17450 | rmanfredi | 2010-10-06 07:46:15 -0400 (Wed, 06 Oct 2010) | 2 lines

Refreshed full list.

------------------------------------------------------------------------
r17449 | rmanfredi | 2010-10-06 07:35:19 -0400 (Wed, 06 Oct 2010) | 2 lines

Removed 223.0.0.0/8 from the bogons list: is now used, mostly by Asia Pacific.

------------------------------------------------------------------------
r17448 | rmanfredi | 2010-10-06 05:49:33 -0400 (Wed, 06 Oct 2010) | 3 lines

Must keep BIT_GENERIC_BITSIZE visible since it is now used by the exported
BIT_GENERIC_SIZE() macro.

------------------------------------------------------------------------
r17447 | rmanfredi | 2010-10-06 05:43:30 -0400 (Wed, 06 Oct 2010) | 2 lines

Cosmetic fixes.

------------------------------------------------------------------------
r17446 | rmanfredi | 2010-10-06 05:42:51 -0400 (Wed, 06 Oct 2010) | 5 lines

Introduced bit_field_t to get a portable bitfield set with predictable
endianness so that it can be used in serialized forms, for instance in SDBM
"big" files (.dat files).
Factorized common code from bit_array.h and bit_field.h into a generic template.

------------------------------------------------------------------------
r17445 | cbiere | 2010-10-05 18:37:22 -0400 (Tue, 05 Oct 2010) | 2 lines

 * Marked bug caused by misuse of bit_array_t. NOT fixed.

------------------------------------------------------------------------
r17444 | cbiere | 2010-10-05 18:35:56 -0400 (Tue, 05 Oct 2010) | 2 lines

 * bit_array_t: Avoid reading uninitialized memory.

------------------------------------------------------------------------
r17443 | cbiere | 2010-10-05 18:31:47 -0400 (Tue, 05 Oct 2010) | 2 lines

 * Fixed 64-bit compatibility issues in debug messages.

------------------------------------------------------------------------
r17442 | cbiere | 2010-10-05 18:27:33 -0400 (Tue, 05 Oct 2010) | 2 lines

 * More fine-tuning.

------------------------------------------------------------------------
r17441 | cbiere | 2010-10-05 18:27:07 -0400 (Tue, 05 Oct 2010) | 2 lines

 * Suppress harmless pedantic compiler warnings.

------------------------------------------------------------------------
r17440 | rmanfredi | 2010-10-04 18:45:14 -0400 (Mon, 04 Oct 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17439 | rmanfredi | 2010-09-11 09:04:17 -0400 (Sat, 11 Sep 2010) | 3 lines

Added assertions in upload stats to chase a possible bug (reported but not
reproducible so far).

------------------------------------------------------------------------
r17438 | rmanfredi | 2010-08-22 17:32:45 -0400 (Sun, 22 Aug 2010) | 3 lines

Documented the PGP signing command used to produce the detached ASCII
signature for the binaries.

------------------------------------------------------------------------
r17437 | rmanfredi | 2010-08-22 17:31:43 -0400 (Sun, 22 Aug 2010) | 3 lines

Avoid the ${nawk:-$awk} construct since it produces warnings in the Gentoo QA
checks, preferring a more verbose alternative which should be always OK.

------------------------------------------------------------------------
r17436 | rmanfredi | 2010-08-07 03:50:07 -0400 (Sat, 07 Aug 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17435 | rmanfredi | 2010-07-03 16:59:19 -0400 (Sat, 03 Jul 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17434 | rmanfredi | 2010-06-29 12:18:12 -0400 (Tue, 29 Jun 2010) | 5 lines

Prevent crash when running on linux kernels patched with grsecurity.
Indeed, in that case the kernel may choose to ignore the hint on mmap() calls
even though the space is actually free, which was breaking an implicit
assumption that this would never happen.

------------------------------------------------------------------------
r17433 | rmanfredi | 2010-06-29 12:15:41 -0400 (Tue, 29 Jun 2010) | 2 lines

node_remove_v(): prevent crash at shutdown time.

------------------------------------------------------------------------
r17432 | rmanfredi | 2010-06-02 13:30:55 -0400 (Wed, 02 Jun 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17431 | rmanfredi | 2010-06-02 13:30:18 -0400 (Wed, 02 Jun 2010) | 2 lines

More spam.

------------------------------------------------------------------------
r17430 | rmanfredi | 2010-06-02 13:28:25 -0400 (Wed, 02 Jun 2010) | 3 lines

Protect node_flushq() and node_unflushq() from nullified sockets (usually
on TLS write error conditions).

------------------------------------------------------------------------
r17429 | rmanfredi | 2010-06-02 13:27:28 -0400 (Wed, 02 Jun 2010) | 2 lines

Updated comment.

------------------------------------------------------------------------
r17428 | rmanfredi | 2010-05-09 13:52:23 -0400 (Sun, 09 May 2010) | 2 lines

yang.cloud.bishopston.net will disappear circa August 2010.

------------------------------------------------------------------------
r17427 | cbiere | 2010-05-07 16:53:46 -0400 (Fri, 07 May 2010) | 2 lines

 * Anti-spam fine-tuning.

------------------------------------------------------------------------
r17426 | rmanfredi | 2010-05-05 08:15:46 -0400 (Wed, 05 May 2010) | 2 lines

gdht_handle_nope(): fixed debugging message.

------------------------------------------------------------------------
r17425 | rmanfredi | 2010-05-04 13:37:56 -0400 (Tue, 04 May 2010) | 3 lines

download_known_guid(): when we have no known push-proxies, force a NULL
pointer back into the ``proxies'' argument.

------------------------------------------------------------------------
r17424 | rmanfredi | 2010-05-03 16:17:19 -0400 (Mon, 03 May 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17423 | cbiere | 2010-05-03 12:30:26 -0400 (Mon, 03 May 2010) | 2 lines

 * Use ticket.bitzi.com instead of bitzi.com as before.

------------------------------------------------------------------------
r17422 | cbiere | 2010-05-03 12:20:13 -0400 (Mon, 03 May 2010) | 2 lines

 * Anti-spam fine-tuning.

------------------------------------------------------------------------
r17421 | cbiere | 2010-05-01 22:15:55 -0400 (Sat, 01 May 2010) | 2 lines

 * Anti-spam fine-tuning.

------------------------------------------------------------------------
r17420 | cbiere | 2010-05-01 20:42:04 -0400 (Sat, 01 May 2010) | 3 lines

 * search_new(): Corrected oversight in g_strdup() -> h_strdup() conversion
   causing an assertion failure by hfree() when requesting a search by URN.

------------------------------------------------------------------------
r17419 | cbiere | 2010-05-01 20:23:35 -0400 (Sat, 01 May 2010) | 3 lines

 * Renamed offtime() to off_time() because NetBSD exposes a function with the
   same name from standard headers.

------------------------------------------------------------------------
r17418 | cbiere | 2010-05-01 20:12:34 -0400 (Sat, 01 May 2010) | 2 lines

 * Got rid of warning "GtkSpinButton: setting an adjustment with non-zero page size is deprecated".

------------------------------------------------------------------------
r17417 | rmanfredi | 2010-05-01 03:34:18 -0400 (Sat, 01 May 2010) | 3 lines

Added magic number checking for the RX stack, as well as a sanity check flag
for freed but not yet reclaimed stacks.

------------------------------------------------------------------------
r17416 | rmanfredi | 2010-05-01 02:24:28 -0400 (Sat, 01 May 2010) | 5 lines

download_get_server_name(): use the socket's address and not the server's
one when calling version_check() because firewalled servers may have an
invalid address recorded and if we call clock_update() we must supply a valid
IP address.

------------------------------------------------------------------------
r17415 | rmanfredi | 2010-04-30 18:41:00 -0400 (Fri, 30 Apr 2010) | 4 lines

download_ignore_data(): stop accepting messages as soon as we have reached
the end of the range.
download_ignore_data_ind(): restored initial assertion (undo commit r17414).

------------------------------------------------------------------------
r17414 | rmanfredi | 2010-04-30 12:15:10 -0400 (Fri, 30 Apr 2010) | 3 lines

download_ignore_data_ind(): amended wrong assertion now that we can ignore
data for finished downloads (to keep the connection opened).

------------------------------------------------------------------------
r17413 | rmanfredi | 2010-04-25 06:08:53 -0400 (Sun, 25 Apr 2010) | 2 lines

Forgot to remove an argument in previous commit.

------------------------------------------------------------------------
r17412 | rmanfredi | 2010-04-25 06:06:14 -0400 (Sun, 25 Apr 2010) | 6 lines

download_request(): when a download is passively queued, the server will not
keep alive the connection so there's no need to try to switch to another
download anyway.
download_stop_switch(): must clear any "actively queued flag" on the download
before invoking download_clone().

------------------------------------------------------------------------
r17411 | rmanfredi | 2010-04-17 15:38:02 -0400 (Sat, 17 Apr 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17410 | rmanfredi | 2010-04-05 13:43:55 -0400 (Mon, 05 Apr 2010) | 5 lines

download_start(): must not call download_stop() until download_start_prepare()
was called and returned TRUE.
Therefore, moved test for finished files until after we called that preparation
routine.

------------------------------------------------------------------------
r17409 | rmanfredi | 2010-04-01 04:48:42 -0400 (Thu, 01 Apr 2010) | 3 lines

Fixed token validation bug which leads to rejecting all remote tokens now that
0.96.6 has expired.

------------------------------------------------------------------------
r17407 | rmanfredi | 2010-03-21 10:23:35 -0400 (Sun, 21 Mar 2010) | 2 lines

pmap_lookup(): shut up compiler warning.

------------------------------------------------------------------------
r17405 | rmanfredi | 2010-03-21 09:34:05 -0400 (Sun, 21 Mar 2010) | 2 lines

Release 0.96.8 stable.

------------------------------------------------------------------------
r17404 | rmanfredi | 2010-03-21 09:30:35 -0400 (Sun, 21 Mar 2010) | 2 lines

More spam.

------------------------------------------------------------------------
r17403 | rmanfredi | 2010-03-21 06:04:32 -0400 (Sun, 21 Mar 2010) | 3 lines

No new keys for 0.96.8: will expire on March 29th, 2011 as 0.96.7 was
planned to, since it is a bug-fixing release only.

------------------------------------------------------------------------
r17402 | rmanfredi | 2010-03-21 05:49:24 -0400 (Sun, 21 Mar 2010) | 2 lines

Preparing for 0.96.8 release.

------------------------------------------------------------------------
r17401 | rmanfredi | 2010-03-21 05:36:06 -0400 (Sun, 21 Mar 2010) | 2 lines

Minor tweaks and updates.

------------------------------------------------------------------------
r17400 | rmanfredi | 2010-03-21 05:30:19 -0400 (Sun, 21 Mar 2010) | 2 lines

Try to use "nawk" when it is available to compute the GTKG version.

------------------------------------------------------------------------
r17399 | rmanfredi | 2010-03-21 04:47:43 -0400 (Sun, 21 Mar 2010) | 9 lines

Applied fix from The Blue Meanie to make sure we can compile with GTK < 2.5.0:
The supplied pbarcellrenderer.h header must not include "gtk/gui.h" since
it is always included from there and must never be included directly as it
is an add-on for earlier GTK versions.
Also fixed inclusion path from "gtk/gui.h" to add a leading "gtk2/" prefix.
This was an oversight when reorganization of the source code happened a long
time ago, and was missed because there are only a few people still compiling
with an old GTK version.

------------------------------------------------------------------------
r17398 | rmanfredi | 2010-03-20 15:29:55 -0400 (Sat, 20 Mar 2010) | 2 lines

Version information moved from src/common.h to src/gtk-gnutella.h.

------------------------------------------------------------------------
r17397 | rmanfredi | 2010-03-20 15:25:50 -0400 (Sat, 20 Mar 2010) | 2 lines

Added __sparc for Sun's C compiler since that is what it uses there.

------------------------------------------------------------------------
r17396 | rmanfredi | 2010-03-20 05:58:36 -0400 (Sat, 20 Mar 2010) | 3 lines

node_publish_dht_nope(): ultrapeers must not attempt to publish NOPE entries
in the DHT if the user has disabled the DHT.

------------------------------------------------------------------------
r17395 | rmanfredi | 2010-03-18 17:58:48 -0400 (Thu, 18 Mar 2010) | 2 lines

Added specific counter for dropped messages due to limits.

------------------------------------------------------------------------
r17394 | rmanfredi | 2010-03-18 13:10:27 -0400 (Thu, 18 Mar 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17393 | rmanfredi | 2010-03-18 13:04:45 -0400 (Thu, 18 Mar 2010) | 5 lines

Install the glib log handler for G_LOG_FLAG_RECURSION | G_LOG_FLAG_FATAL,
even though the glib 2.x implementation is buggy and will not call the
user-defined handler correctly on recursion but will call its default
implementation instead.

------------------------------------------------------------------------
r17392 | rmanfredi | 2010-03-18 13:02:16 -0400 (Thu, 18 Mar 2010) | 2 lines

Re-aligned comments.

------------------------------------------------------------------------
r17391 | rmanfredi | 2010-03-18 13:01:38 -0400 (Thu, 18 Mar 2010) | 4 lines

When issuing BYE messages, avoid calling socket_tx_shutdown() if we're using
a TLS connection since we have no idea whether the TLS layer will exchange
data with its peer.

------------------------------------------------------------------------
r17390 | rmanfredi | 2010-03-18 13:00:19 -0400 (Thu, 18 Mar 2010) | 6 lines

qrt_update_create(): must not use the default routing patch if its size
is not matching that of the current routing table.
This will fix the long-standing bug where gtk-gnutella rightfully reported
that another gtk-gnutella peer sent a patch sequence message that overflowed
the advertised table size (the wrong size was sent in the QRP RESET message).

------------------------------------------------------------------------
r17389 | rmanfredi | 2010-03-18 06:01:41 -0400 (Thu, 18 Mar 2010) | 2 lines

vmm_mmap_anonymous(): watch out when hint falls within the allocated segment.

------------------------------------------------------------------------
r17388 | rmanfredi | 2010-03-18 05:32:09 -0400 (Thu, 18 Mar 2010) | 3 lines

vmm_mmap_anonymous(): be smarter to identify foreign pages when allocating
blocks larger than a single page.

------------------------------------------------------------------------
r17387 | rmanfredi | 2010-03-18 04:53:13 -0400 (Thu, 18 Mar 2010) | 5 lines

Added pmap_overrule() to handle cases where the kernel would free up memory
we flagged as "foreign" earlier and starts allocating pages there.  The kernel
is always right, so if it starts allocating somewhere, we have to overrule any
previous indication we had.

------------------------------------------------------------------------
r17386 | rmanfredi | 2010-03-18 04:50:43 -0400 (Thu, 18 Mar 2010) | 3 lines

Let THEX downloads peruse any supplied Content-Length information from the
server (applicable only when the output is not chunked).

------------------------------------------------------------------------
r17385 | rmanfredi | 2010-03-18 04:48:36 -0400 (Thu, 18 Mar 2010) | 2 lines

dime_parse_record_header(): give more information in the logs on parsing errors.

------------------------------------------------------------------------
r17384 | rmanfredi | 2010-03-18 04:47:18 -0400 (Thu, 18 Mar 2010) | 2 lines

get_params(): make sure there is a space after a leading GET or HEAD word.

------------------------------------------------------------------------
r17383 | rmanfredi | 2010-03-18 04:44:53 -0400 (Thu, 18 Mar 2010) | 5 lines

When using SDBM, returned pointers to keys and values have no strict
boundary alignment, hence hashing functions working on the returned SDBM keys
must be prepared to handle unaligned parameters: introduced uint64_mem_hash()
and uint64_mem_eq() for this purpose.

------------------------------------------------------------------------
r17382 | rmanfredi | 2010-03-18 04:41:20 -0400 (Thu, 18 Mar 2010) | 2 lines

The future is not set.

------------------------------------------------------------------------
r17381 | rmanfredi | 2010-03-18 04:40:15 -0400 (Thu, 18 Mar 2010) | 3 lines

gdht_guid_found(): Removed harmful assertion that should have been removed
when support for NOPE values was introduced.

------------------------------------------------------------------------
r17380 | rmanfredi | 2010-03-17 14:04:49 -0400 (Wed, 17 Mar 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17379 | rmanfredi | 2010-03-17 14:03:46 -0400 (Wed, 17 Mar 2010) | 3 lines

Clear the LDFLAGS so that it can compile on Gentoo, where the build system
exports an LDFLAGS to the environment.

------------------------------------------------------------------------
r17378 | rmanfredi | 2010-03-10 04:18:37 -0500 (Wed, 10 Mar 2010) | 2 lines

Two hostile leaves.

------------------------------------------------------------------------
r17372 | rmanfredi | 2010-03-06 17:40:10 -0500 (Sat, 06 Mar 2010) | 2 lines

Grrr...

------------------------------------------------------------------------
r17370 | rmanfredi | 2010-03-06 17:03:18 -0500 (Sat, 06 Mar 2010) | 2 lines

Release 0.96.7 stable.

------------------------------------------------------------------------
r17369 | rmanfredi | 2010-03-06 16:02:44 -0500 (Sat, 06 Mar 2010) | 5 lines

Documented the new --compile-info option.
Added more leading blurb about Gnutella.
Removed Richard Eckart as the "active GUI maintainer" and redirect people
to the gtk-gnutella-devel list instead.

------------------------------------------------------------------------
r17368 | rmanfredi | 2010-03-06 14:52:40 -0500 (Sat, 06 Mar 2010) | 2 lines

Change summary for 0.96.7.

------------------------------------------------------------------------
r17367 | rmanfredi | 2010-03-06 14:39:11 -0500 (Sat, 06 Mar 2010) | 2 lines

Added keys for 0.96.7.

------------------------------------------------------------------------
r17366 | rmanfredi | 2010-03-06 14:17:50 -0500 (Sat, 06 Mar 2010) | 2 lines

download_push(): fixed comment placement.

------------------------------------------------------------------------
r17365 | rmanfredi | 2010-03-06 14:15:17 -0500 (Sat, 06 Mar 2010) | 2 lines

vmsg_send_head_ping(): Fixed leading comment.

------------------------------------------------------------------------
r17364 | rmanfredi | 2010-03-06 06:15:15 -0500 (Sat, 06 Mar 2010) | 4 lines

dht_route_parse(): insert persisted nodes in topological order so that changes
in our KUID do not result in too many bucket splits in parts of the KUID
space that do not require it.

------------------------------------------------------------------------
r17363 | rmanfredi | 2010-03-06 06:13:03 -0500 (Sat, 06 Mar 2010) | 2 lines

Made patricia and map iterator knode-free callbacks public.

------------------------------------------------------------------------
r17362 | rmanfredi | 2010-03-05 16:53:44 -0500 (Fri, 05 Mar 2010) | 5 lines

Disabled kernel pmap loading for the 0.06.7 release, until it can be made
compatible again with the new set of assertions that have been added to
make sure we do not mix vmm_mmap() and vmm_free() or do not call vmm_free()
on an invalid region.

------------------------------------------------------------------------
r17361 | rmanfredi | 2010-03-05 15:07:46 -0500 (Fri, 05 Mar 2010) | 4 lines

download_push(): removed contorted logic, making a "goto" go away.
download_check_status(): also reset number of attempts on 416 replies.
download_timer(): don't wait after a push timeout to attempt next push-proxy.

------------------------------------------------------------------------
r17360 | rmanfredi | 2010-03-05 15:04:03 -0500 (Fri, 05 Mar 2010) | 2 lines

More assertions.

------------------------------------------------------------------------
r17359 | rmanfredi | 2010-03-04 16:26:30 -0500 (Thu, 04 Mar 2010) | 3 lines

vpc_insert(): fixed bug when coalescing with previous chunk.
More assertions.

------------------------------------------------------------------------
r17358 | rmanfredi | 2010-03-04 15:12:20 -0500 (Thu, 04 Mar 2010) | 3 lines

Removed dead code (handling the so-called "connection shortage").
Edited comments and log messages for push-proxy / firewalled node detection.

------------------------------------------------------------------------
r17357 | rmanfredi | 2010-03-04 15:09:27 -0500 (Thu, 04 Mar 2010) | 2 lines

vmsg_send_features_supported(): added leading comment.

------------------------------------------------------------------------
r17356 | rmanfredi | 2010-03-04 01:26:14 -0500 (Thu, 04 Mar 2010) | 4 lines

download_start(): properly stop a finished download.
Since the soft assertion was failing, it shows that it was incorrect and the
proper behaviour if asked to start a completed download is to stop it!

------------------------------------------------------------------------
r17355 | rmanfredi | 2010-03-03 18:21:26 -0500 (Wed, 03 Mar 2010) | 4 lines

node_publish_dht_nope(): removed "n->guid != NULL" soft pre-condition.
This is true today but is not vital to the routine's operation: just handle
the case explicitly.

------------------------------------------------------------------------
r17354 | rmanfredi | 2010-03-03 17:54:50 -0500 (Wed, 03 Mar 2010) | 2 lines

kmsg_send_mb(): discard message if we can't get a node to send message to.

------------------------------------------------------------------------
r17353 | rmanfredi | 2010-03-03 16:17:42 -0500 (Wed, 03 Mar 2010) | 2 lines

Also trace the name of the resource being limited.

------------------------------------------------------------------------
r17352 | rmanfredi | 2010-03-03 16:13:40 -0500 (Wed, 03 Mar 2010) | 2 lines

When debugging, trace limited uploads.

------------------------------------------------------------------------
r17351 | rmanfredi | 2010-03-03 15:51:49 -0500 (Wed, 03 Mar 2010) | 3 lines

download_request(): don't transform a 503 into 416 if headers indicate that
queueing occurred.

------------------------------------------------------------------------
r17350 | rmanfredi | 2010-03-03 15:48:57 -0500 (Wed, 03 Mar 2010) | 2 lines

hfield_dump(): show the printable bytes in an otherwise non-printable string.

------------------------------------------------------------------------
r17349 | rmanfredi | 2010-03-03 12:48:20 -0500 (Wed, 03 Mar 2010) | 3 lines

Made sure we can publish NOPE for firewalled leaves who do not even know about
push-proxyfication.

------------------------------------------------------------------------
r17348 | rmanfredi | 2010-03-03 11:51:13 -0500 (Wed, 03 Mar 2010) | 2 lines

Updated specs.

------------------------------------------------------------------------
r17347 | rmanfredi | 2010-03-03 09:45:48 -0500 (Wed, 03 Mar 2010) | 3 lines

In the final crash message, indicate whether we're calling another program
or whether we're pausing.

------------------------------------------------------------------------
r17346 | rmanfredi | 2010-03-03 09:04:44 -0500 (Wed, 03 Mar 2010) | 2 lines

Moved check that creator is given with an IPv4 address to validate_quotas().

------------------------------------------------------------------------
r17345 | rmanfredi | 2010-03-03 07:27:56 -0500 (Wed, 03 Mar 2010) | 2 lines

More assertions.

------------------------------------------------------------------------
r17344 | rmanfredi | 2010-03-03 07:21:40 -0500 (Wed, 03 Mar 2010) | 3 lines

pdht_nope_done(): handle case where the node's GUID has been cleared (due to
the node being removed).

------------------------------------------------------------------------
r17343 | rmanfredi | 2010-03-03 06:26:59 -0500 (Wed, 03 Mar 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17342 | rmanfredi | 2010-03-03 06:16:51 -0500 (Wed, 03 Mar 2010) | 3 lines

Detect and fix improper 503 status codes from broken servents when 416 is
actually what they meant.

------------------------------------------------------------------------
r17341 | rmanfredi | 2010-03-03 06:14:35 -0500 (Wed, 03 Mar 2010) | 2 lines

More assertions.

------------------------------------------------------------------------
r17340 | rmanfredi | 2010-03-03 02:45:39 -0500 (Wed, 03 Mar 2010) | 3 lines

It is not necessary to be a DHT member to use firewalled alt-locs, provided
they come with valid push-proxies.

------------------------------------------------------------------------
r17339 | rmanfredi | 2010-03-02 16:22:48 -0500 (Tue, 02 Mar 2010) | 2 lines

Handle disabling of DHT that could happen during lookups (bootstrap, refresh).

------------------------------------------------------------------------
r17338 | rmanfredi | 2010-03-02 16:21:49 -0500 (Tue, 02 Mar 2010) | 2 lines

lookup_final_stats(): log type of lookup and amount of RPC replies we got.

------------------------------------------------------------------------
r17337 | rmanfredi | 2010-03-02 15:43:10 -0500 (Tue, 02 Mar 2010) | 2 lines

Was not cancelling DHT "NOPE" callback on explicit proxying removal.

------------------------------------------------------------------------
r17336 | rmanfredi | 2010-03-02 14:29:02 -0500 (Tue, 02 Mar 2010) | 2 lines

More assertions.

------------------------------------------------------------------------
r17335 | rmanfredi | 2010-03-02 14:11:41 -0500 (Tue, 02 Mar 2010) | 2 lines

Added assertions.

------------------------------------------------------------------------
r17334 | rmanfredi | 2010-03-02 09:02:50 -0500 (Tue, 02 Mar 2010) | 2 lines

Updated simplified Chinese translation: from Aron Xu <happyaron.xu@gmail.com>.

------------------------------------------------------------------------
r17333 | rmanfredi | 2010-03-01 18:21:25 -0500 (Mon, 01 Mar 2010) | 2 lines

Applied patch from Muddletoes <muddletoes@hotmail.com>.

------------------------------------------------------------------------
r17332 | rmanfredi | 2010-03-01 17:56:21 -0500 (Mon, 01 Mar 2010) | 2 lines

Adapted logging messages.

------------------------------------------------------------------------
r17331 | rmanfredi | 2010-03-01 16:30:41 -0500 (Mon, 01 Mar 2010) | 3 lines

Make sure to update the "inserted" timestamp of a firewalled location each
time its list of push-proxies is updated.

------------------------------------------------------------------------
r17330 | rmanfredi | 2010-03-01 16:28:31 -0500 (Mon, 01 Mar 2010) | 2 lines

Added missing closing brace in last commit.

------------------------------------------------------------------------
r17329 | rmanfredi | 2010-03-01 16:02:49 -0500 (Mon, 01 Mar 2010) | 3 lines

Only emit X-Features once per connection: was doing it once an upload had
started but not for actively queued uploads.

------------------------------------------------------------------------
r17328 | rmanfredi | 2010-03-01 15:39:34 -0500 (Mon, 01 Mar 2010) | 2 lines

Updated to include documentation about X-Falt.

------------------------------------------------------------------------
r17327 | rmanfredi | 2010-03-01 15:33:26 -0500 (Mon, 01 Mar 2010) | 2 lines

pmap_remove(): added assertion.

------------------------------------------------------------------------
r17326 | rmanfredi | 2010-03-01 15:32:47 -0500 (Mon, 01 Mar 2010) | 2 lines

node_supports_dht(): show node type as well in logging message.

------------------------------------------------------------------------
r17325 | rmanfredi | 2010-03-01 12:37:47 -0500 (Mon, 01 Mar 2010) | 2 lines

Trace node DHT-support level when debugging.

------------------------------------------------------------------------
r17324 | rmanfredi | 2010-03-01 12:36:14 -0500 (Mon, 01 Mar 2010) | 2 lines

Added dht_mode_to_string().

------------------------------------------------------------------------
r17323 | rmanfredi | 2010-03-01 12:32:29 -0500 (Mon, 01 Mar 2010) | 2 lines

Count detected SHA1 collisions in the DHT.

------------------------------------------------------------------------
r17322 | rmanfredi | 2010-02-28 11:04:30 -0500 (Sun, 28 Feb 2010) | 2 lines

dmesh_fwalt_string(): limit amount of push-proxies sent in firewalled alt-locs.

------------------------------------------------------------------------
r17321 | rmanfredi | 2010-02-28 09:05:36 -0500 (Sun, 28 Feb 2010) | 3 lines

kmsg_received(): revisited the contact patching logic to better handle hosts
behind a NAT router.

------------------------------------------------------------------------
r17320 | rmanfredi | 2010-02-28 09:03:48 -0500 (Sun, 28 Feb 2010) | 3 lines

Increase storage threshold limits per IP and class C network to account for
inevitable value caching.

------------------------------------------------------------------------
r17319 | rmanfredi | 2010-02-28 04:32:47 -0500 (Sun, 28 Feb 2010) | 2 lines

Be more careful to not encumber the download mesh with useless firewalled locs.

------------------------------------------------------------------------
r17318 | rmanfredi | 2010-02-27 18:46:55 -0500 (Sat, 27 Feb 2010) | 2 lines

Inverted arguments in logging message.

------------------------------------------------------------------------
r17317 | rmanfredi | 2010-02-27 18:41:12 -0500 (Sat, 27 Feb 2010) | 4 lines

Changed strategy for PROX/NOPE lookups: only conduct one lookup for ANY type
of value and sort it out if we get results.  That way, there is no penalty
for missing NOPE records.

------------------------------------------------------------------------
r17316 | rmanfredi | 2010-02-27 18:39:16 -0500 (Sat, 27 Feb 2010) | 3 lines

lookup_type_to_string(): for value lookups, also show the type of value being
searched for.

------------------------------------------------------------------------
r17315 | rmanfredi | 2010-02-27 14:57:54 -0500 (Sat, 27 Feb 2010) | 2 lines

node_publish_dht_nope(): avoid publishing of NOPE values for transient nodes.

------------------------------------------------------------------------
r17314 | rmanfredi | 2010-02-27 14:42:50 -0500 (Sat, 27 Feb 2010) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r17313 | rmanfredi | 2010-02-27 14:01:14 -0500 (Sat, 27 Feb 2010) | 2 lines

Fixed shutdown warnings.

------------------------------------------------------------------------
r17312 | rmanfredi | 2010-02-27 13:53:49 -0500 (Sat, 27 Feb 2010) | 2 lines

Trigger NOPE value lookups when PROX are not found.

------------------------------------------------------------------------
r17311 | rmanfredi | 2010-02-27 12:34:24 -0500 (Sat, 27 Feb 2010) | 2 lines

pdht_free_publish(): fixed oversight in previous commit.

------------------------------------------------------------------------
r17310 | rmanfredi | 2010-02-27 12:28:36 -0500 (Sat, 27 Feb 2010) | 4 lines

When we are acting as a push-proxy for "legacy nodes" (not capable or willing
to join the DHT), publish the fact we are their push proxy via a "NOPE" DHT
value (for Node Push Entry).

------------------------------------------------------------------------
r17309 | rmanfredi | 2010-02-27 09:12:50 -0500 (Sat, 27 Feb 2010) | 2 lines

download_got_push_proxies(): ignore the servent's own IP:port.

------------------------------------------------------------------------
r17308 | rmanfredi | 2010-02-27 08:52:16 -0500 (Sat, 27 Feb 2010) | 2 lines

Also attempt to collect push-proxies passively from relayed query hits.

------------------------------------------------------------------------
r17307 | rmanfredi | 2010-02-27 06:40:09 -0500 (Sat, 27 Feb 2010) | 2 lines

Added propagation of firewalled alt-locs in the download mesh.

------------------------------------------------------------------------
r17306 | rmanfredi | 2010-02-27 06:38:12 -0500 (Sat, 27 Feb 2010) | 2 lines

Removed spurious blank lines.

------------------------------------------------------------------------
r17305 | rmanfredi | 2010-02-27 06:36:26 -0500 (Sat, 27 Feb 2010) | 4 lines

header_get_feature(): make sure that looking for "bar" will not attempt to
match on "barcode" and that we will find "bar" eventually if it is present
afterwards.

------------------------------------------------------------------------
r17304 | rmanfredi | 2010-02-27 05:49:45 -0500 (Sat, 27 Feb 2010) | 3 lines

file_info_try_to_swarm_with_firewalled(): make sure debugging message can
handle a NULL proxy list.

------------------------------------------------------------------------
r17303 | rmanfredi | 2010-02-27 05:06:07 -0500 (Sat, 27 Feb 2010) | 2 lines

file_info_status_to_string(): removed spurious ";" in message.

------------------------------------------------------------------------
r17302 | rmanfredi | 2010-02-26 16:56:11 -0500 (Fri, 26 Feb 2010) | 2 lines

node_http_fw_node_info_add(): fixed memory leak.

------------------------------------------------------------------------
r17301 | rmanfredi | 2010-02-26 11:35:00 -0500 (Fri, 26 Feb 2010) | 2 lines

Signal server-side support of firewalled alt-locs.

------------------------------------------------------------------------
r17300 | rmanfredi | 2010-02-26 11:33:57 -0500 (Fri, 26 Feb 2010) | 3 lines

huge_collect_locations(): handle reception of X-Falt, regardless of whether
we are able to perform PROX lookups in the DHT.

------------------------------------------------------------------------
r17299 | rmanfredi | 2010-02-26 11:32:38 -0500 (Fri, 26 Feb 2010) | 2 lines

Define level of supported firewalled alt-locs cleanly.

------------------------------------------------------------------------
r17298 | rmanfredi | 2010-02-26 11:31:31 -0500 (Fri, 26 Feb 2010) | 2 lines

Advertise DHT mode in the features supported, when the DHT is enabled.

------------------------------------------------------------------------
r17297 | rmanfredi | 2010-02-26 03:21:00 -0500 (Fri, 26 Feb 2010) | 2 lines

Let a firewalled downloader emit an X-FW-Node-Info header with push proxies.

------------------------------------------------------------------------
r17296 | rmanfredi | 2010-02-26 03:11:51 -0500 (Fri, 26 Feb 2010) | 4 lines

upload_request(): do not use "0 == u->reqnum" to determine whether this
is the first request we answer to because this is not accurate when the
uploader is queued.

------------------------------------------------------------------------
r17295 | rmanfredi | 2010-02-25 17:24:00 -0500 (Thu, 25 Feb 2010) | 2 lines

download_found_server(): do nothing if called with a blank GUID.

------------------------------------------------------------------------
r17294 | rmanfredi | 2010-02-25 17:22:07 -0500 (Thu, 25 Feb 2010) | 3 lines

get_server(): simplified and fixed condition before calling
download_found_server().

------------------------------------------------------------------------
r17293 | rmanfredi | 2010-02-25 17:04:33 -0500 (Thu, 25 Feb 2010) | 3 lines

Fixed compile error.
get_server(): try to supersede non-usable IP:port in the returned server.

------------------------------------------------------------------------
r17292 | rmanfredi | 2010-02-25 16:42:15 -0500 (Thu, 25 Feb 2010) | 3 lines

download_proxy_dht_lookup_done(): as a precaution, record a starving GUID
if we end-up with no push-proxies.

------------------------------------------------------------------------
r17291 | rmanfredi | 2010-02-25 15:20:39 -0500 (Thu, 25 Feb 2010) | 2 lines

Added sequence_foreach().

------------------------------------------------------------------------
r17290 | rmanfredi | 2010-02-25 15:19:15 -0500 (Thu, 25 Feb 2010) | 2 lines

Added vector_foreach().

------------------------------------------------------------------------
r17289 | rmanfredi | 2010-02-25 12:06:34 -0500 (Thu, 25 Feb 2010) | 5 lines

Added support to trigger download requests as soon as a "route lost" condition
ends as we route a query hit from an orphaned GUID.
Do not immediately remove a pushed download when the push route is lost,
in case we manage to revitalize it later on.

------------------------------------------------------------------------
r17288 | rmanfredi | 2010-02-25 12:02:34 -0500 (Thu, 25 Feb 2010) | 2 lines

Added missing country "mf" (Saint Martin).

------------------------------------------------------------------------
r17287 | rmanfredi | 2010-02-24 17:51:59 -0500 (Wed, 24 Feb 2010) | 12 lines

Push download cleanup / buglet fixing:
* Removed useless d->push field, replaced by d->always_push and the
  DL_F_PUSH_IGN flag.
* Replaced gboolean in the download structure by bitfields for compaction.
* Added argument to download_send_push_request() to allow callers to select
  whether an UDP push and/or a Gnutella broadcast should be attempted.
* Made server consolidation possible when there are more than 2 server
  targets for a given GIV.
* Picking of download candidates at GIV reception was wrongly skipping
  waiting downloads that were not expecting a GIV... in essence all of them
  by construction!

------------------------------------------------------------------------
r17286 | rmanfredi | 2010-02-24 13:42:18 -0500 (Wed, 24 Feb 2010) | 5 lines

Fixed handling of HTTP status extra callbacks, which were unduly reset
at the entry of send_upload_error_v().
Make sure we do not send X-GUID headers back during HTTP follow-ups or active
queueing retry attempts.

------------------------------------------------------------------------
r17285 | rmanfredi | 2010-02-24 12:08:19 -0500 (Wed, 24 Feb 2010) | 2 lines

string_to_timestamp_utc(): fixed typo that produced compiler warning.

------------------------------------------------------------------------
r17284 | rmanfredi | 2010-02-23 17:56:04 -0500 (Tue, 23 Feb 2010) | 4 lines

download_verify_sha1(): make sure to clear the DL_F_CLONED flag of the
download source being verified so that we keep persisting this source
until we know the SHA-1 is correct.

------------------------------------------------------------------------
r17283 | rmanfredi | 2010-02-23 17:29:38 -0500 (Tue, 23 Feb 2010) | 2 lines

string_to_timestamp_utc(): parse an UTC timestamp, but return a local date.

------------------------------------------------------------------------
r17282 | rmanfredi | 2010-02-23 16:44:08 -0500 (Tue, 23 Feb 2010) | 2 lines

Display the fileinfo status "waiting for moving" in the GUI.

------------------------------------------------------------------------
r17281 | rmanfredi | 2010-02-23 16:33:42 -0500 (Tue, 23 Feb 2010) | 4 lines

Servers now add X-GUID if not firewalled and use the DHT so that their GUID
can be advertised: in case their IP:port changes, they will be locatable
again thanks to their PROX publishing in the DHT.

------------------------------------------------------------------------
r17280 | rmanfredi | 2010-02-23 16:27:56 -0500 (Tue, 23 Feb 2010) | 2 lines

dmesh_can_use_fwalt(): use dht_enabled() instead of GNET_PROPERTY(enable_dht).

------------------------------------------------------------------------
r17279 | rmanfredi | 2010-02-23 15:18:59 -0500 (Tue, 23 Feb 2010) | 2 lines

If they say "Force push mode", then do it.

------------------------------------------------------------------------
r17278 | rmanfredi | 2010-02-23 12:58:29 -0500 (Tue, 23 Feb 2010) | 2 lines

Updated copyright timestamp. :-)

------------------------------------------------------------------------
r17277 | rmanfredi | 2010-02-23 12:57:49 -0500 (Tue, 23 Feb 2010) | 2 lines

Added client-side support for firewalled alt-locs.

------------------------------------------------------------------------
r17276 | rmanfredi | 2010-02-23 12:30:31 -0500 (Tue, 23 Feb 2010) | 2 lines

Added header_features_add_guarded_function().

------------------------------------------------------------------------
r17275 | rmanfredi | 2010-02-23 12:27:55 -0500 (Tue, 23 Feb 2010) | 2 lines

Added string_to_timestamp_utc().

------------------------------------------------------------------------
r17274 | rmanfredi | 2010-02-23 12:26:04 -0500 (Tue, 23 Feb 2010) | 2 lines

Added parse_uint8().

------------------------------------------------------------------------
r17273 | rmanfredi | 2010-02-23 12:23:50 -0500 (Tue, 23 Feb 2010) | 2 lines

Fixed harmless compilation warning.

------------------------------------------------------------------------
r17272 | rmanfredi | 2010-02-22 12:50:23 -0500 (Mon, 22 Feb 2010) | 3 lines

Wonderful Shareaza now uses X-Alt, but continues to supply legacy
alternate locations in it, not a list of IP:port.

------------------------------------------------------------------------
r17271 | rmanfredi | 2010-02-21 14:18:13 -0500 (Sun, 21 Feb 2010) | 3 lines

Better change d->last_update when download is running or we could delay
further its scheduling if it was queued.

------------------------------------------------------------------------
r17270 | rmanfredi | 2010-02-21 14:03:04 -0500 (Sun, 21 Feb 2010) | 3 lines

Update last_update field of the download structure each time we send a
PUSH via UDP or each time we select a new push-proxy, to avoid timeouts.

------------------------------------------------------------------------
r17269 | rmanfredi | 2010-02-21 13:52:24 -0500 (Sun, 21 Feb 2010) | 4 lines

When user says "Force push mode", clear all the push-ignore flags we have set.
Added next_push_proxy() to loop through the TCP push-proxies more quickly
until one can relay our push.

------------------------------------------------------------------------
r17268 | rmanfredi | 2010-02-21 13:48:43 -0500 (Sun, 21 Feb 2010) | 4 lines

At shutdown time, also call file_info_store_if_dirty() after download_close()
in case some download had dirty data buffered.  This will prevent some
"found more recent metainfo" warnings at the next startup.

------------------------------------------------------------------------
r17267 | rmanfredi | 2010-02-21 13:39:45 -0500 (Sun, 21 Feb 2010) | 4 lines

cproxy_http_error_ind(): must not call download_proxy_failed() when invoked
at the end of the header processing phase (with HTTP_ASYNC_CLOSED).
cproxy_create(): forgot to initialize the state, leading to improper GUI status.

------------------------------------------------------------------------
r17266 | rmanfredi | 2010-02-21 13:36:22 -0500 (Sun, 21 Feb 2010) | 3 lines

Give noticeably more priority to STORE requests than to ALOC lookups due to
the extremely quick value timeouts within the DHT.

------------------------------------------------------------------------
r17265 | rmanfredi | 2010-02-20 14:50:51 -0500 (Sat, 20 Feb 2010) | 5 lines

Extended magnets used to persist download to store vendor and GUID information,
the latter allowing better resuming of pushed downloads.
download_push_proxy_wakeup(): was not scanning the right server list to
send UDP push requests to fresh push proxies we got.

------------------------------------------------------------------------
r17264 | rmanfredi | 2010-02-20 06:38:51 -0500 (Sat, 20 Feb 2010) | 4 lines

Do not timeout downloads for which we are looking up for push-proxies in
the DHT, since a DHT lookup is asynchronous and could also be deferred if
more urgent lookups are queued ahead.

------------------------------------------------------------------------
r17263 | rmanfredi | 2010-02-20 06:10:52 -0500 (Sat, 20 Feb 2010) | 3 lines

Due to inverted logic, we were no longer correctly falling back to sending
pushes when a direct connection to the host failed.

------------------------------------------------------------------------
r17262 | rmanfredi | 2010-02-20 05:33:43 -0500 (Sat, 20 Feb 2010) | 2 lines

Forgot a conversion G_FREE_NULL -> HFREE_NULL in commit r17260.

------------------------------------------------------------------------
r17261 | rmanfredi | 2010-02-19 17:25:02 -0500 (Fri, 19 Feb 2010) | 2 lines

Make sure the message "Waiting for TTH checking" will show up in the GUI.

------------------------------------------------------------------------
r17260 | rmanfredi | 2010-02-19 17:22:44 -0500 (Fri, 19 Feb 2010) | 2 lines

Use h_strdup() instead of g_strdup().

------------------------------------------------------------------------
r17259 | rmanfredi | 2010-02-19 12:35:36 -0500 (Fri, 19 Feb 2010) | 5 lines

* Show GUI progress on TTH computations for completed downloads.
* Normalized debugging TTH messages to include the leading string "TTH".
* The "tigertree_debug" property needs to be set to 2 at least now to force
  TTH verification when the SHA-1 verification was successful.

------------------------------------------------------------------------
r17258 | rmanfredi | 2010-02-19 12:32:29 -0500 (Fri, 19 Feb 2010) | 3 lines

qrt_build_query_target(): when debugging, dump query payloads if we're facing
an empty hash vector.

------------------------------------------------------------------------
r17257 | rmanfredi | 2010-02-19 12:30:25 -0500 (Fri, 19 Feb 2010) | 3 lines

Unconditionally call vmm_stop_freeing() at exit time before attempting to
shut down the GUI layer, due to bugs in the GTK1 freeing callbacks.

------------------------------------------------------------------------
r17256 | rmanfredi | 2010-02-18 10:04:59 -0500 (Thu, 18 Feb 2010) | 3 lines

Increased default number of ultra peer connections to 42 since most queries
emitted by LimeWire now bear a TTL of 3.

------------------------------------------------------------------------
r17255 | rmanfredi | 2010-02-17 16:43:36 -0500 (Wed, 17 Feb 2010) | 2 lines

pdht_bg_free_null(): was not freeing the object itself.

------------------------------------------------------------------------
r17254 | rmanfredi | 2010-02-17 16:39:55 -0500 (Wed, 17 Feb 2010) | 2 lines

lookup_handle_reply(): plugged small memory leak.

------------------------------------------------------------------------
r17253 | rmanfredi | 2010-02-17 16:38:56 -0500 (Wed, 17 Feb 2010) | 2 lines

Switched default to SDBM storage for DHT data.

------------------------------------------------------------------------
r17252 | rmanfredi | 2010-02-17 05:31:11 -0500 (Wed, 17 Feb 2010) | 2 lines

vmsg_init(): make sure the vmsg_weight_map[] table contains all known messages.

------------------------------------------------------------------------
r17251 | rmanfredi | 2010-02-17 04:45:23 -0500 (Wed, 17 Feb 2010) | 2 lines

Do not limit routed UDP PUSH.

------------------------------------------------------------------------
r17250 | rmanfredi | 2010-02-17 02:19:04 -0500 (Wed, 17 Feb 2010) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17249 | rmanfredi | 2010-02-16 07:53:45 -0500 (Tue, 16 Feb 2010) | 3 lines

Cygwin requires -lintl since stringify.c uses I18N, therefore need to propagate
the common linking libraries.

------------------------------------------------------------------------
r17248 | rmanfredi | 2010-02-14 11:27:29 -0500 (Sun, 14 Feb 2010) | 2 lines

file_info_slow_timer(): do nothing if ancient.

------------------------------------------------------------------------
r17247 | rmanfredi | 2010-02-14 11:14:14 -0500 (Sun, 14 Feb 2010) | 2 lines

We're in 2010 now...

------------------------------------------------------------------------
r17246 | rmanfredi | 2010-02-14 09:46:07 -0500 (Sun, 14 Feb 2010) | 3 lines

pcache_udp_ping_received(): Don't answer to pings from bad nodes, which include
"alien" hosts.

------------------------------------------------------------------------
r17245 | rmanfredi | 2010-02-14 06:20:24 -0500 (Sun, 14 Feb 2010) | 2 lines

send_upload_error_v(): force disconnection on limitation.

------------------------------------------------------------------------
r17244 | rmanfredi | 2010-02-14 05:07:41 -0500 (Sun, 14 Feb 2010) | 2 lines

Bumped date.

------------------------------------------------------------------------
r17243 | rmanfredi | 2010-02-14 05:06:57 -0500 (Sun, 14 Feb 2010) | 2 lines

Added comment.

------------------------------------------------------------------------
r17242 | rmanfredi | 2010-02-14 04:46:52 -0500 (Sun, 14 Feb 2010) | 2 lines

Make sure limited connections are correctly displayed in the GUI.

------------------------------------------------------------------------
r17241 | rmanfredi | 2010-02-14 04:46:06 -0500 (Sun, 14 Feb 2010) | 2 lines

No need to send an X-Ultrapeer header back during 4xx or 550 handshake replies.

------------------------------------------------------------------------
r17240 | rmanfredi | 2010-02-13 07:26:50 -0500 (Sat, 13 Feb 2010) | 2 lines

More conversions from g_malloc() to halloc().

------------------------------------------------------------------------
r17239 | rmanfredi | 2010-02-13 07:25:13 -0500 (Sat, 13 Feb 2010) | 2 lines

Adjusted debugging levels.

------------------------------------------------------------------------
r17238 | rmanfredi | 2010-02-13 07:23:47 -0500 (Sat, 13 Feb 2010) | 2 lines

Adjust comment alignment and raised debugging threshold for QRT dumping.

------------------------------------------------------------------------
r17237 | rmanfredi | 2010-02-13 07:20:58 -0500 (Sat, 13 Feb 2010) | 2 lines

Avoid using g_malloc().

------------------------------------------------------------------------
r17236 | rmanfredi | 2010-02-13 04:35:31 -0500 (Sat, 13 Feb 2010) | 2 lines

http_range_merge(): Fixed long-standing bug due to blind copy-n-paste.

------------------------------------------------------------------------
r17235 | rmanfredi | 2010-02-13 04:33:47 -0500 (Sat, 13 Feb 2010) | 2 lines

Updated comment.

------------------------------------------------------------------------
r17234 | rmanfredi | 2010-02-08 18:18:32 -0500 (Mon, 08 Feb 2010) | 2 lines

Restored compilation status of code protected by conditional USE_REMOTE_CTRL.

------------------------------------------------------------------------
r17233 | rmanfredi | 2010-02-06 10:58:51 -0500 (Sat, 06 Feb 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17232 | rmanfredi | 2010-01-30 07:10:19 -0500 (Sat, 30 Jan 2010) | 3 lines

http_range_merge(): better fix for the case of consecutive [a,b] and [c,b]
with c > a.

------------------------------------------------------------------------
r17231 | rmanfredi | 2010-01-30 06:54:32 -0500 (Sat, 30 Jan 2010) | 3 lines

http_range_merge(): fixed off-by-one comparison that could lead to the result
holding two consecutive ranges [a,b] and [c,b] with c > a.

------------------------------------------------------------------------
r17230 | rmanfredi | 2010-01-30 05:07:10 -0500 (Sat, 30 Jan 2010) | 3 lines

node_bye_v(): must make sure socket was not nullified after a write error
during our sending of the BYE message.

------------------------------------------------------------------------
r17229 | daichik | 2010-01-10 12:57:24 -0500 (Sun, 10 Jan 2010) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r17228 | daichik | 2010-01-10 12:55:48 -0500 (Sun, 10 Jan 2010) | 2 lines

Updated.

------------------------------------------------------------------------
r17227 | rmanfredi | 2009-11-11 19:20:31 -0500 (Wed, 11 Nov 2009) | 2 lines

Another printf -> g_message conversion.

------------------------------------------------------------------------
r17226 | rmanfredi | 2009-11-11 19:03:54 -0500 (Wed, 11 Nov 2009) | 8 lines

Fixed grave bugs:
* We were never forwarding to other ultra nodes queries that did not
  have a TTL of exactly 1.  The proper processing is to use an inter-UP
  QRP routing if the TTL is 1, but otherwise we need to blindly forward!
* Also fixed the non-initialization of the query hash vector when we
  did not consider a query for a local file match, which was causing such
  queries to be simply dropped.

------------------------------------------------------------------------
r17225 | rmanfredi | 2009-11-11 17:19:50 -0500 (Wed, 11 Nov 2009) | 2 lines

Logging message adjustments.

------------------------------------------------------------------------
r17224 | rmanfredi | 2009-11-11 17:19:09 -0500 (Wed, 11 Nov 2009) | 2 lines

Remove orphan entries from the persisted "published SHA1" table at close time.

------------------------------------------------------------------------
r17223 | rmanfredi | 2009-11-11 02:43:51 -0500 (Wed, 11 Nov 2009) | 2 lines

Avoid a variable named "true", it confuses weird compilers.

------------------------------------------------------------------------
r17222 | rmanfredi | 2009-11-10 17:27:29 -0500 (Tue, 10 Nov 2009) | 2 lines

Collect more entropy.

------------------------------------------------------------------------
r17221 | rmanfredi | 2009-11-10 17:26:30 -0500 (Tue, 10 Nov 2009) | 2 lines

roots_record(): avoid endless warnings in case the dht_roots DB is corrupted.

------------------------------------------------------------------------
r17220 | rmanfredi | 2009-11-10 13:48:45 -0500 (Tue, 10 Nov 2009) | 2 lines

More printf() -> g_message() conversions.

------------------------------------------------------------------------
r17219 | rmanfredi | 2009-11-10 01:50:39 -0500 (Tue, 10 Nov 2009) | 3 lines

ulq_close(): launched lookups will be properly cleaned up by lookup_close()
so we must blindly free the ulq_item structure without invoking any callback.

------------------------------------------------------------------------
r17218 | rmanfredi | 2009-11-09 17:51:55 -0500 (Mon, 09 Nov 2009) | 2 lines

ulq_close(): fixed fifo_free_all() to pass the new "exiting" parameter.

------------------------------------------------------------------------
r17217 | rmanfredi | 2009-11-09 17:39:05 -0500 (Mon, 09 Nov 2009) | 2 lines

Enhanced QRP patch overflow messages.

------------------------------------------------------------------------
r17216 | rmanfredi | 2009-11-09 16:40:41 -0500 (Mon, 09 Nov 2009) | 2 lines

Add more information on QRP patch overflow warnings.

------------------------------------------------------------------------
r17215 | rmanfredi | 2009-11-09 16:14:29 -0500 (Mon, 09 Nov 2009) | 4 lines

Make sure a plain DHT layer shutdown (as opposed to GTKG exiting) correctly
notifies the queued ULQ lookups to signal cancellation, so that the caller
may cleanup after itself.

------------------------------------------------------------------------
r17214 | rmanfredi | 2009-11-09 15:43:25 -0500 (Mon, 09 Nov 2009) | 2 lines

Forgot to declare timestamp_gmt_offset().

------------------------------------------------------------------------
r17213 | rmanfredi | 2009-11-09 12:13:18 -0500 (Mon, 09 Nov 2009) | 7 lines

Code cleanup:
* Use TM_YEAR_ORIGIN instead of magic constant 1900
* There were two different versions of diff_tm() -- use the one from glibc.
* Moved print_number() from lib/misc.h to lib/crash.h.
* Factorized GMT offset computation in timestamp_gmt_offset().
* Random code cleanup.

------------------------------------------------------------------------
r17212 | rmanfredi | 2009-11-08 18:24:07 -0500 (Sun, 08 Nov 2009) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r17211 | rmanfredi | 2009-11-08 18:18:22 -0500 (Sun, 08 Nov 2009) | 2 lines

Allow crashes and fast assertions "soft" failures to be timestamped.

------------------------------------------------------------------------
r17210 | rmanfredi | 2009-11-08 18:14:29 -0500 (Sun, 08 Nov 2009) | 2 lines

Added knowledge about the "CHAT" GGEP extension.

------------------------------------------------------------------------
r17209 | rmanfredi | 2009-11-08 16:37:28 -0500 (Sun, 08 Nov 2009) | 3 lines

deflate_flush(): handle the peculiar case when we're called at TX close
time and we have not actually sent any data because we were never given any.

------------------------------------------------------------------------
r17208 | rmanfredi | 2009-11-08 16:07:25 -0500 (Sun, 08 Nov 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17207 | rmanfredi | 2009-11-08 16:06:48 -0500 (Sun, 08 Nov 2009) | 2 lines

Avoid code duplication by sharing the print_str() macro definition.

------------------------------------------------------------------------
r17206 | rmanfredi | 2009-11-08 16:05:08 -0500 (Sun, 08 Nov 2009) | 2 lines

Made hex_escape() and control_escape() allocate their strings with halloc().

------------------------------------------------------------------------
r17205 | rmanfredi | 2009-11-08 16:01:48 -0500 (Sun, 08 Nov 2009) | 4 lines

More swithing from gmsg_infostr() to gmsg_node_infostr() when possible.
Adapted huge_sha1_extract32() and huge_tth_extract32() to get a node pointer
instead of a message header.

------------------------------------------------------------------------
r17204 | rmanfredi | 2009-11-07 14:38:16 -0500 (Sat, 07 Nov 2009) | 3 lines

[GTK] Defer upload stats updates to avoid consuming too much CPU when columns
are sorted and there is a sustained upload activity.

------------------------------------------------------------------------
r17203 | rmanfredi | 2009-11-07 08:24:28 -0500 (Sat, 07 Nov 2009) | 3 lines

[GTK1] Optimize updating of the statistics by selectively redrawing only the
pane that they are looking at.

------------------------------------------------------------------------
r17202 | rmanfredi | 2009-11-07 08:18:20 -0500 (Sat, 07 Nov 2009) | 2 lines

Fixed comment alignment.

------------------------------------------------------------------------
r17201 | rmanfredi | 2009-11-07 06:39:16 -0500 (Sat, 07 Nov 2009) | 5 lines

pdht_free_publish(): unconditionally free launched publishing activity, as
this is not linked to the "do_remove" condition.
pdht_close(): ask pdht_free_publish() to "remove" the PROX entry, since we're
not iterating over a container here, hence removal is safe.

------------------------------------------------------------------------
r17200 | rmanfredi | 2009-11-07 06:16:31 -0500 (Sat, 07 Nov 2009) | 3 lines

pdht_cancel_prox(): had forgotten to reset backgrounded indication when a
publishing was cancelled.

------------------------------------------------------------------------
r17199 | rmanfredi | 2009-11-05 18:37:56 -0500 (Thu, 05 Nov 2009) | 3 lines

Completed GGEP dumping / warning code factorization.
Use new gmsg_node_infostr() when logging messages.

------------------------------------------------------------------------
r17198 | rmanfredi | 2009-11-05 18:36:37 -0500 (Thu, 05 Nov 2009) | 2 lines

Added gmsg_node_infostr().

------------------------------------------------------------------------
r17197 | rmanfredi | 2009-11-05 18:35:51 -0500 (Thu, 05 Nov 2009) | 2 lines

Added knowledge about GGEP "M" (encoded MIME type for queries).

------------------------------------------------------------------------
r17196 | rmanfredi | 2009-11-05 18:34:22 -0500 (Thu, 05 Nov 2009) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r17195 | rmanfredi | 2009-11-05 16:51:30 -0500 (Thu, 05 Nov 2009) | 3 lines

ext_ggep_inflate(): detect problematic decompressions earlier, before we
allocate too much memory for things that will not decompress anyway.

------------------------------------------------------------------------
r17194 | rmanfredi | 2009-11-05 16:44:06 -0500 (Thu, 05 Nov 2009) | 3 lines

More removal of the deprecated "dbg" property.
New "reload_debug", "move_debug", "qhit_debug" and "version_debug" properties.

------------------------------------------------------------------------
r17193 | rmanfredi | 2009-11-05 16:00:52 -0500 (Thu, 05 Nov 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r17192 | rmanfredi | 2009-11-05 15:53:24 -0500 (Thu, 05 Nov 2009) | 2 lines

Flagged that significant modifications were made in 2009.

------------------------------------------------------------------------
r17191 | rmanfredi | 2009-11-05 04:41:53 -0500 (Thu, 05 Nov 2009) | 3 lines

pdht_init(): forgot to reset a static structure, which is necessary to
support dynamic DHT shutdowns and restarts.

------------------------------------------------------------------------
r17190 | rmanfredi | 2009-11-04 18:14:11 -0500 (Wed, 04 Nov 2009) | 2 lines

Fixed debugging levels and messages.

------------------------------------------------------------------------
r17189 | rmanfredi | 2009-11-04 17:13:26 -0500 (Wed, 04 Nov 2009) | 3 lines

Factorized GGEP logging code.
Avoid logging an unknown GGEP for LimeWire's return-path "RP" extensions.

------------------------------------------------------------------------
r17188 | rmanfredi | 2009-11-04 17:03:22 -0500 (Wed, 04 Nov 2009) | 2 lines

Adjusted debugging levels.

------------------------------------------------------------------------
r17187 | bpringlemeir | 2009-11-04 14:48:41 -0500 (Wed, 04 Nov 2009) | 1 line

In gtkg-devel thread "Crash after Bitzi Lookup attempt", the gcc nonnull attribute caused optimizations to take place.  h_strdup, h_strndup, and h_strconcat all handle the null case, so r17179 annotations of nonnull were removed.
------------------------------------------------------------------------
r17186 | rmanfredi | 2009-11-04 14:42:57 -0500 (Wed, 04 Nov 2009) | 3 lines

ext_ggep_inflate(): was not processing Z_BUF_ERROR returns from inflate().
Made sure debugging messages are protected by ggep_debug.

------------------------------------------------------------------------
r17185 | rmanfredi | 2009-11-04 14:41:03 -0500 (Wed, 04 Nov 2009) | 2 lines

Adjusted debug levels.

------------------------------------------------------------------------
r17184 | rmanfredi | 2009-11-04 13:51:10 -0500 (Wed, 04 Nov 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r17183 | rmanfredi | 2009-11-04 12:38:18 -0500 (Wed, 04 Nov 2009) | 2 lines

Log more information when we cannot decompress a GGEP payload.

------------------------------------------------------------------------
r17182 | rmanfredi | 2009-11-04 12:37:32 -0500 (Wed, 04 Nov 2009) | 3 lines

Added iso3166_code_is_valid() so that dl_server_valid() can check that
the server's country code remains valid at all times.

------------------------------------------------------------------------
r17181 | rmanfredi | 2009-11-04 12:35:20 -0500 (Wed, 04 Nov 2009) | 2 lines

Fixed English spelling in comments.

------------------------------------------------------------------------
r17180 | rmanfredi | 2009-11-04 12:32:04 -0500 (Wed, 04 Nov 2009) | 3 lines

Renamed local routines used in the glib memory allocation table to use the
prefix ha_ instead of gm_, and made them locally visible only.

------------------------------------------------------------------------
r17179 | bpringlemeir | 2009-11-04 00:34:24 -0500 (Wed, 04 Nov 2009) | 1 line

Quiet compiler.
------------------------------------------------------------------------
r17178 | bpringlemeir | 2009-11-03 20:00:53 -0500 (Tue, 03 Nov 2009) | 1 line

Fix white space.
------------------------------------------------------------------------
r17177 | bpringlemeir | 2009-11-03 19:58:46 -0500 (Tue, 03 Nov 2009) | 1 line

Update attributes for h_strdup, h_strndup, and h_strconcat
------------------------------------------------------------------------
r17176 | bpringlemeir | 2009-11-03 19:44:06 -0500 (Tue, 03 Nov 2009) | 1 line

zmove ibid, dont mark as attribute malloc.
------------------------------------------------------------------------
r17175 | bpringlemeir | 2009-11-03 19:37:08 -0500 (Tue, 03 Nov 2009) | 1 line

realloc() type function should not be annotated with G_GNUC_MALLOC (aka attribute malloc) as they may return the same pointer passed.  This implies the pointer is _restricted_, which it is not for realloc.
------------------------------------------------------------------------
r17174 | rmanfredi | 2009-11-03 15:51:30 -0500 (Tue, 03 Nov 2009) | 6 lines

Fixed inverted upload counts.
Fixed placement of Up and Down counters at the bottom to leave 1 space
before the rightmost margin for the downloaded byte counter.
Added browse host counts (fully served / requested), summing both HTML and
query hits counts.

------------------------------------------------------------------------
r17173 | rmanfredi | 2009-11-03 15:12:50 -0500 (Tue, 03 Nov 2009) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r17172 | rmanfredi | 2009-11-03 15:11:22 -0500 (Tue, 03 Nov 2009) | 2 lines

Bumped date.

------------------------------------------------------------------------
r17171 | rmanfredi | 2009-11-03 15:08:11 -0500 (Tue, 03 Nov 2009) | 2 lines

Added doxygen file-level comments to all shell commands.

------------------------------------------------------------------------
r17170 | rmanfredi | 2009-11-03 15:06:51 -0500 (Tue, 03 Nov 2009) | 3 lines

When requesting a "print" of an unknown property, the error message now
repeats the faulty property name in quotes.

------------------------------------------------------------------------
r17169 | rmanfredi | 2009-11-03 15:05:47 -0500 (Tue, 03 Nov 2009) | 5 lines

Further enhanced status display to show active downloads / uploads and
the amount of data downloaded / uploaded.
Added -i option to request display of current bandwidth instead of average.
Added extended help to document option and status flags (in upper-right).

------------------------------------------------------------------------
r17168 | rmanfredi | 2009-11-03 15:03:45 -0500 (Tue, 03 Nov 2009) | 4 lines

Added real shell-like string parsing, and fixed escaping to work correctly.
Added the ';' separator to be used to separate mutiple shell commands.
Error message for unknown commands now repeats the command between quotes.

------------------------------------------------------------------------
r17167 | rmanfredi | 2009-11-03 15:01:19 -0500 (Tue, 03 Nov 2009) | 2 lines

Added -v option to "props" to also display values along.

------------------------------------------------------------------------
r17166 | rmanfredi | 2009-11-03 15:00:22 -0500 (Tue, 03 Nov 2009) | 3 lines

Fixed status bar which lost the GTKG URL as soon as a new version was
announced.

------------------------------------------------------------------------
r17165 | rmanfredi | 2009-11-03 14:59:23 -0500 (Tue, 03 Nov 2009) | 5 lines

Added short_byte_size() as a synonym of short_size() but to display "B" only
and not "Bytes", so that it never gets translated.
Added short_kb_size2(), short_byte_size2() and compact_size2() to be able
to format two values in printf() statements.

------------------------------------------------------------------------
r17164 | rmanfredi | 2009-11-03 14:57:25 -0500 (Tue, 03 Nov 2009) | 3 lines

g_malloc() and g_malloc0() rewritten to make use of G_LIKELY, to be more
pipeline-friendly.

------------------------------------------------------------------------
r17163 | rmanfredi | 2009-11-03 14:55:28 -0500 (Tue, 03 Nov 2009) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r17162 | rmanfredi | 2009-11-03 14:55:08 -0500 (Tue, 03 Nov 2009) | 4 lines

Added liberal parsing of urn:sha1: and urn:bitprint to cope with clueless
sites using hexadecimal instead of base32 to encode the hashes.
Also enhanced urn:tree:tiger: to cope with hexadecimal, just in case.

------------------------------------------------------------------------
r17161 | rmanfredi | 2009-11-03 14:52:55 -0500 (Tue, 03 Nov 2009) | 4 lines

get_server(): removed wrong assertion when we discover a GUID: in case of
conflict with our own GUID, the download's GUID would not be fixed and
therefore not found in the hash table upon return from download_found_server().

------------------------------------------------------------------------
r17160 | rmanfredi | 2009-11-02 15:23:07 -0500 (Mon, 02 Nov 2009) | 2 lines

ulq_init(): forgot to reset scheduler information.

------------------------------------------------------------------------
r17159 | rmanfredi | 2009-11-02 13:14:33 -0500 (Mon, 02 Nov 2009) | 2 lines

pmsg_slist_append(): new buffers are created with a minimum size of 1 KiB.

------------------------------------------------------------------------
r17158 | rmanfredi | 2009-11-01 18:47:25 -0500 (Sun, 01 Nov 2009) | 3 lines

Enhanced shell status to display DHT traffic and an ASCII coding of the
small status icons.

------------------------------------------------------------------------
r17157 | rmanfredi | 2009-11-01 17:41:55 -0500 (Sun, 01 Nov 2009) | 6 lines

The DHT closing code needs to know whether the whole process is going to exit
or whether we're just closing the DHT subsystem.  Indeed, in the former case
we can blindly free lookup and publish requests, whereas in the latter we need
to explicitly cancel them so that the user code can cleanup after itself and
continue regular processing.

------------------------------------------------------------------------
r17156 | rmanfredi | 2009-11-01 15:22:05 -0500 (Sun, 01 Nov 2009) | 4 lines

Long-due renaming: changed host_hash() into gnet_host_hash() and host_eq()
into gnet_host_eq().
Also renamed currently unused host_cmp() as gnet_host_cmp().

------------------------------------------------------------------------
r17155 | rmanfredi | 2009-11-01 15:12:55 -0500 (Sun, 01 Nov 2009) | 2 lines

Was not including UDP Gnutella traffic under the Gnutella traffic stats.

------------------------------------------------------------------------
r17154 | rmanfredi | 2009-11-01 15:11:32 -0500 (Sun, 01 Nov 2009) | 3 lines

pdht_get_prox(): when including our own address as a push-proxy, make sure
to flag it as TLS-enabled if we support TLS.

------------------------------------------------------------------------
r17153 | rmanfredi | 2009-11-01 07:09:57 -0500 (Sun, 01 Nov 2009) | 4 lines

Only the first parameter of parse_xxx() routines is guaranteeed to be
non-null.  Others may be null, so do not optimize away tests for these.
Thanks to Jasen Betts for catching it.

------------------------------------------------------------------------
r17152 | rmanfredi | 2009-11-01 04:59:32 -0500 (Sun, 01 Nov 2009) | 2 lines

completion_iterate(): restored old debugging message.

------------------------------------------------------------------------
r17151 | rmanfredi | 2009-11-01 04:09:21 -0500 (Sun, 01 Nov 2009) | 2 lines

Added "PROX" publishing.

------------------------------------------------------------------------
r17150 | rmanfredi | 2009-10-31 17:24:22 -0400 (Sat, 31 Oct 2009) | 3 lines

update_cached_size_estimate(): only retain subspace estimates that fall
within one standard deviation of the mean, instead of two previously.

------------------------------------------------------------------------
r17149 | rmanfredi | 2009-10-31 16:51:27 -0400 (Sat, 31 Oct 2009) | 2 lines

parse_ipv6_addr(): avoid modifying the "s" parameter, use a copy.

------------------------------------------------------------------------
r17148 | rmanfredi | 2009-10-31 10:33:29 -0400 (Sat, 31 Oct 2009) | 2 lines

Split too long a line.

------------------------------------------------------------------------
r17147 | rmanfredi | 2009-10-31 06:50:14 -0400 (Sat, 31 Oct 2009) | 2 lines

node_proxy_cancel_all(): cleanup the push-proxy set as well.

------------------------------------------------------------------------
r17146 | rmanfredi | 2009-10-31 05:50:14 -0400 (Sat, 31 Oct 2009) | 5 lines

Due to an optimizer bug in gcc 4.2.1 (and maybe later verions), avoid
specifying the REGPARM(1) attribute in the assertion_xxx() routines
or the pointer being passed will be garbage, causing a segmentation fault
in assertion_message().

------------------------------------------------------------------------
r17145 | rmanfredi | 2009-10-30 19:09:15 -0400 (Fri, 30 Oct 2009) | 2 lines

Count amount of launched SHA-1 and TTH file verifications.

------------------------------------------------------------------------
r17144 | rmanfredi | 2009-10-30 18:51:54 -0400 (Fri, 30 Oct 2009) | 8 lines

Unified representation of the push-proxies we maintain for download servers
and our own push-proxies, in preparation for PROX publishing in the DHT: it
is now a set of IP:port.
When emitting proxies in query hits, always use our oldest known proxies,
hopefully the most stable of all.
Fixed bug whereby GUI node flags were not updated upon reception of the Push
Proxy Acknowledgement (indicating the node became one of our push-proxies).

------------------------------------------------------------------------
r17143 | rmanfredi | 2009-10-30 18:40:53 -0400 (Fri, 30 Oct 2009) | 4 lines

Added support for backward iteration, whenever possible (depends on the
underlying data structure), optionally falling back to forward iteration when
not supported (e.g. for single-linked lists).

------------------------------------------------------------------------
r17142 | rmanfredi | 2009-10-30 18:34:41 -0400 (Fri, 30 Oct 2009) | 2 lines

Added support for backward iterations on vectors.

------------------------------------------------------------------------
r17141 | rmanfredi | 2009-10-30 18:30:17 -0400 (Fri, 30 Oct 2009) | 7 lines

Fixed push-proxy support: requests (LIME/21) now only use v1 and acks (LIME/22)
only use v2 because this is what LimeWire expects and everybody should
understand the LIME/22v2 answer by now anyway.
GTKG used to send LIME/21v2 to indicate it understood LIME/22v2 answers, but
LimeWire never actually handled that former message version!
Prefixed all vendor message debugging messages with "VMSG ".

------------------------------------------------------------------------
r17140 | rmanfredi | 2009-10-30 13:08:27 -0400 (Fri, 30 Oct 2009) | 4 lines

publisher_handle(): partial files which are finished (i.e. seeded) must be
treated as library files when looking at the amount of known download mesh
entries.

------------------------------------------------------------------------
r17139 | rmanfredi | 2009-10-29 18:25:18 -0400 (Thu, 29 Oct 2009) | 5 lines

Missed that file in commit 17136.
Fixed improper management of periodic events: when inserted in the main
callout queue (as opposed to a subqueue), they must be explicitly cancelled
at close time.

------------------------------------------------------------------------
r17138 | rmanfredi | 2009-10-29 18:12:32 -0400 (Thu, 29 Oct 2009) | 2 lines

is_odd_guid(): make all constants unsigned.

------------------------------------------------------------------------
r17137 | rmanfredi | 2009-10-29 14:12:15 -0400 (Thu, 29 Oct 2009) | 3 lines

entropy_collect(): avoid uninitialized memory reads by zeroing the setjmp()
buffer.

------------------------------------------------------------------------
r17136 | rmanfredi | 2009-10-29 13:58:31 -0400 (Thu, 29 Oct 2009) | 4 lines

Fixed improper management of periodic events: when inserted in the main
callout queue (as opposed to a subqueue), they must be explicitly cancelled
at close time.

------------------------------------------------------------------------
r17135 | rmanfredi | 2009-10-29 13:56:44 -0400 (Thu, 29 Oct 2009) | 3 lines

Can now unconditionally call dht_attempt_bootstrap(), which will do nothing
if the DHT is not initialized properly.

------------------------------------------------------------------------
r17134 | rmanfredi | 2009-10-29 13:08:24 -0400 (Thu, 29 Oct 2009) | 3 lines

Changed the Bitzi ticket-requesting URL, as the previous one was no longer
responding correctly.

------------------------------------------------------------------------
r17133 | rmanfredi | 2009-10-28 12:49:23 -0400 (Wed, 28 Oct 2009) | 5 lines

node_process_handshake_header(): moved gathering of the remote node Gnet
IP:port information and checks for closed networks to the near top of the
routine so that we can deny useless connections at the earliest time.
(patch from Matthew Lye)

------------------------------------------------------------------------
r17132 | rmanfredi | 2009-10-28 07:30:54 -0400 (Wed, 28 Oct 2009) | 2 lines

Random code cleanups.

------------------------------------------------------------------------
r17131 | rmanfredi | 2009-10-28 07:30:05 -0400 (Wed, 28 Oct 2009) | 2 lines

Do not consider STORE_SC_FULL and STORE_SC_FULL_LOADED as retryable for STORE.

------------------------------------------------------------------------
r17130 | rmanfredi | 2009-10-28 07:29:04 -0400 (Wed, 28 Oct 2009) | 2 lines

socket_tx_shutdown(): do not log an error if connection was reset by peer.

------------------------------------------------------------------------
r17129 | rmanfredi | 2009-10-28 07:26:41 -0400 (Wed, 28 Oct 2009) | 3 lines

bitzi_host_error_ind(): use http_async_log_error_dbg() to log errors about
what is happening.

------------------------------------------------------------------------
r17128 | rmanfredi | 2009-10-28 07:24:54 -0400 (Wed, 28 Oct 2009) | 4 lines

Changed signature of http_async_log_error() and http_async_log_error_dbg()
to make them easier to use in various situations.
http_async_create(): did not supply SOCK_F_FORCE to socket_connect_by_name().

------------------------------------------------------------------------
r17127 | rmanfredi | 2009-10-28 04:06:45 -0400 (Wed, 28 Oct 2009) | 2 lines

Suppressed compiler warning about possible use of uninitialized "val.dptr".

------------------------------------------------------------------------
r17126 | rmanfredi | 2009-10-28 03:54:45 -0400 (Wed, 28 Oct 2009) | 3 lines

Regenerated all Makefile.SH files with latest jmake to ensure that "all" is
indeed the default target.

------------------------------------------------------------------------
r17125 | rmanfredi | 2009-10-28 03:51:14 -0400 (Wed, 28 Oct 2009) | 2 lines

Removed spurious trailing \ at the end of the filename list.

------------------------------------------------------------------------
r17124 | rmanfredi | 2009-10-27 18:33:24 -0400 (Tue, 27 Oct 2009) | 2 lines

Avoid compiler warnings when posix_fadvise() is not available.

------------------------------------------------------------------------
r17123 | rmanfredi | 2009-10-26 17:06:25 -0400 (Mon, 26 Oct 2009) | 2 lines

Added debugging information on publishing retries.

------------------------------------------------------------------------
r17122 | rmanfredi | 2009-10-26 15:06:22 -0400 (Mon, 26 Oct 2009) | 3 lines

Fixed ALOC processing to not ignore values associated with files for which we
do not know the size yet (e.g. entries created through source-less magnets).

------------------------------------------------------------------------
r17121 | rmanfredi | 2009-10-26 13:21:22 -0400 (Mon, 26 Oct 2009) | 2 lines

Fixed broken local: searches.

------------------------------------------------------------------------
r17120 | rmanfredi | 2009-10-25 08:20:10 -0400 (Sun, 25 Oct 2009) | 2 lines

Collect more push-proxies from PROX values.

------------------------------------------------------------------------
r17119 | rmanfredi | 2009-10-25 08:19:10 -0400 (Sun, 25 Oct 2009) | 4 lines

Prevent crashes when listening port is set to 0 and then to something else:
all the nodes from the routing table that are freed must then be reset to the
KNODE_UNKNOWN status in case they are still referenced somewhere else.

------------------------------------------------------------------------
r17118 | rmanfredi | 2009-10-25 07:46:36 -0400 (Sun, 25 Oct 2009) | 3 lines

file_info_store_binary(): unconditionally record publishing of SHA-1, which
will be a no-op if it is already recorded anyway.

------------------------------------------------------------------------
r17117 | rmanfredi | 2009-10-25 07:35:59 -0400 (Sun, 25 Oct 2009) | 2 lines

Added reminder to remove emission of GTKG.TLS in qhits after 0.96.7 is out.

------------------------------------------------------------------------
r17116 | rmanfredi | 2009-10-25 07:33:27 -0400 (Sun, 25 Oct 2009) | 2 lines

When debugging, also trace the values we get.

------------------------------------------------------------------------
r17115 | rmanfredi | 2009-10-25 07:31:33 -0400 (Sun, 25 Oct 2009) | 3 lines

Further fixes to prevent crashes when the listening port is set to 0, and then
back to some other non-zero value.

------------------------------------------------------------------------
r17114 | rmanfredi | 2009-10-25 07:28:36 -0400 (Sun, 25 Oct 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r17113 | rmanfredi | 2009-10-24 04:10:09 -0400 (Sat, 24 Oct 2009) | 3 lines

dht_update_size_estimate(): must use dht_enabled() instead of just checking
for "enable_dht" in case they reset the listening port to 0 or disabled UDP...

------------------------------------------------------------------------
r17112 | rmanfredi | 2009-10-23 15:34:07 -0400 (Fri, 23 Oct 2009) | 3 lines

fill_closest_in_bucket(): do not include stale nodes, since the usefullness
potential is limited.

------------------------------------------------------------------------
r17111 | rmanfredi | 2009-10-23 13:40:51 -0400 (Fri, 23 Oct 2009) | 2 lines

Avoid crash when listening port is set to 0.

------------------------------------------------------------------------
r17110 | rmanfredi | 2009-10-23 13:11:14 -0400 (Fri, 23 Oct 2009) | 2 lines

Restored broken TRACK_ZALLOC functionality.

------------------------------------------------------------------------
r17109 | rmanfredi | 2009-10-21 11:51:55 -0400 (Wed, 21 Oct 2009) | 5 lines

Count satisfactory publishings, i.e. either STORE operations where all the
identified k-closest nodes accepted the value, or partial STORE where the
estimated probability of presence of the value for the next hour is almost
guaranteed given the uptime of the roots we were able to store to.

------------------------------------------------------------------------
r17108 | rmanfredi | 2009-10-21 11:48:45 -0400 (Wed, 21 Oct 2009) | 3 lines

file_info_store_binary(): when flushing a fileinfo trailer for the first time,
request publishing of the SHA1 in the DHT.

------------------------------------------------------------------------
r17107 | rmanfredi | 2009-10-20 18:43:33 -0400 (Tue, 20 Oct 2009) | 2 lines

Bumped date.

------------------------------------------------------------------------
r17106 | rmanfredi | 2009-10-20 18:41:40 -0400 (Tue, 20 Oct 2009) | 7 lines

Model the node presence probability density function.
Keep track of the stable nodes so that we can measure the actual lifetime
of the store roots, the nodes to which we publish.
Use our probability model to estimate the probability that a published value
be present in the DHT before it is republished, and to boost the expiration
time of values published at our node that are republished by stable nodes.

------------------------------------------------------------------------
r17105 | rmanfredi | 2009-10-20 18:33:36 -0400 (Tue, 20 Oct 2009) | 3 lines

dht_rpc_answer(): propagate the "last_seen" timestamp from the receiving node
to the RPC node structure, if different.

------------------------------------------------------------------------
r17104 | rmanfredi | 2009-10-20 18:32:02 -0400 (Tue, 20 Oct 2009) | 4 lines

kmsg_received(): do not assume the node is firewalled just because its
advertised contact address is a non-routable address. If possible, use
the UDP address instead.

------------------------------------------------------------------------
r17103 | rmanfredi | 2009-10-20 13:01:48 -0400 (Tue, 20 Oct 2009) | 3 lines

Supply the SOCK_F_FORCE flag when establishing outbound HTTP connections to
remote web sites so that limit and hostile checks do not apply.

------------------------------------------------------------------------
r17102 | rmanfredi | 2009-10-20 04:36:45 -0400 (Tue, 20 Oct 2009) | 2 lines

Trivial code simplification.

------------------------------------------------------------------------
r17101 | rmanfredi | 2009-10-20 04:35:51 -0400 (Tue, 20 Oct 2009) | 2 lines

LimeWire actually increased republish period from 30 to 60 minutes.

------------------------------------------------------------------------
r17100 | rmanfredi | 2009-10-20 04:34:57 -0400 (Tue, 20 Oct 2009) | 2 lines

Added assertion.

------------------------------------------------------------------------
r17099 | rmanfredi | 2009-10-20 04:33:57 -0400 (Tue, 20 Oct 2009) | 2 lines

Trivial code simplification.

------------------------------------------------------------------------
r17098 | rmanfredi | 2009-10-20 04:33:00 -0400 (Tue, 20 Oct 2009) | 2 lines

Added keys_is_foreign().

------------------------------------------------------------------------
r17097 | rmanfredi | 2009-10-20 04:32:16 -0400 (Tue, 20 Oct 2009) | 4 lines

answer_find_node(): limit amount of replies for foreign keys when bandwidth
is saturated.  On the other hand, always reply fully for keys falling into
our k-ball, excepted when they are looking for our KUID.

------------------------------------------------------------------------
r17096 | rmanfredi | 2009-10-20 04:29:25 -0400 (Tue, 20 Oct 2009) | 2 lines

value_count_republish(): also trace the current value life.

------------------------------------------------------------------------
r17095 | rmanfredi | 2009-10-20 04:27:58 -0400 (Tue, 20 Oct 2009) | 2 lines

Added compact_time_to_buf() and compact_time2().

------------------------------------------------------------------------
r17094 | rmanfredi | 2009-10-18 17:02:39 -0400 (Sun, 18 Oct 2009) | 7 lines

When outgoing DHT queue is above the low watermark, limit FIND_NODE for
active nodes to 15 results only.
Also added contact patching workaround (to cope for LimeWire's bug) for nodes
that are known in the routing table and send us unsolicited requests (PINGs,
usually), so that we do not flag them as firewalled and remove them from
our own routing table as a consequence!

------------------------------------------------------------------------
r17093 | rmanfredi | 2009-10-18 11:11:38 -0400 (Sun, 18 Oct 2009) | 4 lines

Added version information to data structures stored in a persistent SDBM,
so that we can transparently "upgrade" them later on should the structures
be extended with more fields.

------------------------------------------------------------------------
r17092 | rmanfredi | 2009-10-18 11:10:05 -0400 (Sun, 18 Oct 2009) | 4 lines

Added extra TX flow control logic for FIND_NODE requests made by passive nodes.
Added workaround to LimeWire bug: a LW node does not always set up correctly
the contact IP:port in the Kademlia header, which we can fix for RPC replies.

------------------------------------------------------------------------
r17091 | rmanfredi | 2009-10-18 11:07:35 -0400 (Sun, 18 Oct 2009) | 4 lines

Node lookups must not insert in the lookup path nodes which are either
"firewalled" (not supposed to reply to a FIND_NODE anyway) or "shutdowning"
(since they're not going to stay around for long).

------------------------------------------------------------------------
r17090 | rmanfredi | 2009-10-18 11:05:28 -0400 (Sun, 18 Oct 2009) | 4 lines

Publishing must ignore answers from "firewalled" nodes (not supposed to be
able to answer a subsequent FIND_VALUE) and "shutdowning" nodes (about to go
down soon).

------------------------------------------------------------------------
r17089 | rmanfredi | 2009-10-18 11:02:56 -0400 (Sun, 18 Oct 2009) | 2 lines

bsched_saturated(): always return FALSE when the scheduler is disabled.

------------------------------------------------------------------------
r17088 | rmanfredi | 2009-10-18 11:01:49 -0400 (Sun, 18 Oct 2009) | 4 lines

Added mq_above_low_watermark() and node_dht_above_low_watermark() to allow
the DHT sending layer to know whether the outgoing UDP queue is already
starting to clog.

------------------------------------------------------------------------
r17087 | rmanfredi | 2009-10-18 11:00:27 -0400 (Sun, 18 Oct 2009) | 5 lines

dht_rpc_answer(): make sure we propagate "firewalled" and "shutdowning" flags
from the replying node down to the RPC answer processing layers, in case
the node instance is not shared.
Added dht_rpc_info().

------------------------------------------------------------------------
r17086 | rmanfredi | 2009-10-17 19:09:08 -0400 (Sat, 17 Oct 2009) | 2 lines

Updated comments for DHT bandwidth variables.

------------------------------------------------------------------------
r17085 | rmanfredi | 2009-10-17 18:58:24 -0400 (Sat, 17 Oct 2009) | 6 lines

Use an exponential decimation to compute republishing time based on the
number of roots that accepted our STORE.
Compute a minimum amount of nodes to which we need to publish before accepting
the value and not launching a background STORE.  Currently this amounts to 16
nodes, based on the current Kademlia parameters and the decimation formula.

------------------------------------------------------------------------
r17084 | rmanfredi | 2009-10-17 18:54:51 -0400 (Sat, 17 Oct 2009) | 2 lines

Removed unused constant.

------------------------------------------------------------------------
r17083 | rmanfredi | 2009-10-17 18:52:59 -0400 (Sat, 17 Oct 2009) | 3 lines

Reduced decimation base for keys falling outside our k-ball, in effect keeping
them longer locally.

------------------------------------------------------------------------
r17082 | rmanfredi | 2009-10-17 06:04:37 -0400 (Sat, 17 Oct 2009) | 2 lines

Forgot to plug-in urgent bandwidth stealing for flow-controlled DHT.

------------------------------------------------------------------------
r17081 | rmanfredi | 2009-10-17 06:03:42 -0400 (Sat, 17 Oct 2009) | 2 lines

Make sure outgoing DHT bandwidth scheduler is enabled at init time.

------------------------------------------------------------------------
r17080 | rmanfredi | 2009-10-17 06:02:50 -0400 (Sat, 17 Oct 2009) | 4 lines

Bandwidth scheduler debugging variable is now "bsched_debug", instead of old
deprecated "dbg".
Forgot to configure DHT stealing from unused outgoing leaf traffic.

------------------------------------------------------------------------
r17079 | rmanfredi | 2009-10-17 04:35:03 -0400 (Sat, 17 Oct 2009) | 2 lines

Forgot to wire DHT bandwidth setting changes.

------------------------------------------------------------------------
r17078 | rmanfredi | 2009-10-16 17:12:34 -0400 (Fri, 16 Oct 2009) | 3 lines

Move all gtk-gnutella version information and configuration variables to the
new header file "gtk-gnutella.h".

------------------------------------------------------------------------
r17077 | rmanfredi | 2009-10-16 16:51:38 -0400 (Fri, 16 Oct 2009) | 4 lines

Added current DHT bandwidth configuration parameters to the GUI.
The core now distinguishes between Gnutella UDP traffic and DHT traffic,
which the GUI can therefore display as such.

------------------------------------------------------------------------
r17076 | rmanfredi | 2009-10-16 16:23:06 -0400 (Fri, 16 Oct 2009) | 2 lines

publisher_done(): avoid compiler warning.

------------------------------------------------------------------------
r17075 | rmanfredi | 2009-10-16 16:18:52 -0400 (Fri, 16 Oct 2009) | 3 lines

pdht_publish_done(): to declare a key popular, we also require that no publish
be done in the last background run.

------------------------------------------------------------------------
r17074 | rmanfredi | 2009-10-15 14:36:45 -0400 (Thu, 15 Oct 2009) | 6 lines

Various background publish adjustments:
- Made sure we insert a pseudo non-retryable status in all the nodes that were
  not considered in an initial STORE so that subsequent ones do not use them.
- Was wrongly starting background publish at node #0 instead of first retryable.
- Count number of background publishes resulting in a STORE improvement.

------------------------------------------------------------------------
r17073 | rmanfredi | 2009-10-14 18:42:41 -0400 (Wed, 14 Oct 2009) | 5 lines

Added background STORE completion attempts when we cannot publish to all
the identified roots yet we do not get a sufficiently explicit error code
(the generic ERROR status) or we get a transient failure that could be worth
retrying.

------------------------------------------------------------------------
r17072 | rmanfredi | 2009-10-14 18:36:58 -0400 (Wed, 14 Oct 2009) | 2 lines

Added cq_remaining() to determine the (virtual) time until event firing.

------------------------------------------------------------------------
r17071 | rmanfredi | 2009-10-13 10:40:20 -0400 (Tue, 13 Oct 2009) | 6 lines

Renamed file_does_not_exist() as path_does_not_exist() and moved implementation
to lib/path.c.
Moved file_exists() to lib/file.c and makes sure the entry points to a file.
publisher_handle(): it is not enough to check that a fileinfo exists, we must
make sure the corresponding file still exists.

------------------------------------------------------------------------
r17070 | rmanfredi | 2009-10-13 10:32:32 -0400 (Tue, 13 Oct 2009) | 2 lines

Removed unsued FILE_INFO_COMPLETE_AFTER().

------------------------------------------------------------------------
r17069 | rmanfredi | 2009-10-13 10:29:47 -0400 (Tue, 13 Oct 2009) | 3 lines

Improved STORE roots lookup strategy: wait until we contacted one of the
k-closest nodes to the key before pre-loading the path with cached roots.

------------------------------------------------------------------------
r17068 | rmanfredi | 2009-10-13 10:27:08 -0400 (Tue, 13 Oct 2009) | 4 lines

publish_self(): count amount of self-publishing attempts.  If publishing
fails because the key is full locally, account for it as well so that we can
better assess the popularity of the key.

------------------------------------------------------------------------
r17067 | rmanfredi | 2009-10-12 15:38:55 -0400 (Mon, 12 Oct 2009) | 2 lines

Factorized deserialization error reporting in the DBMW layer.

------------------------------------------------------------------------
r17066 | rmanfredi | 2009-10-11 15:47:15 -0400 (Sun, 11 Oct 2009) | 6 lines

publisher_handle(): revisited the code because the determination of whether a
file is shared was bogus:  When not shared, we need to check for the fileinfo
existence in case we're dealing with a partial file whose size has not yet
reached the PFSP minimum, or PFSP could be disabled for now.
publisher_done(): re-arranged the code to avoid logic duplication.

------------------------------------------------------------------------
r17065 | rmanfredi | 2009-10-11 15:25:47 -0400 (Sun, 11 Oct 2009) | 4 lines

Added new STORE_SC_DB_IO (15) STORE status code to indicate a DB error.
Therefore we no longer report the legacy STORE_SC_ERROR indication, which
is far too little indicative.

------------------------------------------------------------------------
r17064 | rmanfredi | 2009-10-10 19:28:43 -0400 (Sat, 10 Oct 2009) | 3 lines

download_auto_new(): show basename of fileinfo for seeded orphans, not the
filename out of the query hit which may be very different.

------------------------------------------------------------------------
r17063 | rmanfredi | 2009-10-10 19:09:22 -0400 (Sat, 10 Oct 2009) | 4 lines

Keep track of information about published SHA-1 entries in a persistent
database so that we do not try to republish everything at startup time,
skipping these entries that were published recently enough in a previous run.

------------------------------------------------------------------------
r17062 | rmanfredi | 2009-10-10 17:36:26 -0400 (Sat, 10 Oct 2009) | 6 lines

dht_bucket_refresh(): allow forced refreshes, whereby we perform a full node
lookup on a random KUID instead of a limited lookup whereby we stop as soon as
the request path size is reached.
bucket_alive_check(): force a refresh on buckets where we have less than half
the maximum amount of good nodes.

------------------------------------------------------------------------
r17061 | rmanfredi | 2009-10-10 17:22:32 -0400 (Sat, 10 Oct 2009) | 2 lines

Generalized roots_sync_db() into new storage_sync().

------------------------------------------------------------------------
r17060 | rmanfredi | 2009-10-10 15:54:56 -0400 (Sat, 10 Oct 2009) | 4 lines

Statistics now distinguish between orphan re-seeding though query hits and
through upload requests.
upload requests.

------------------------------------------------------------------------
r17059 | rmanfredi | 2009-10-10 14:51:16 -0400 (Sat, 10 Oct 2009) | 2 lines

Trace IP:port of orphan seeders.

------------------------------------------------------------------------
r17058 | rmanfredi | 2009-10-10 11:13:14 -0400 (Sat, 10 Oct 2009) | 2 lines

Bumped date.

------------------------------------------------------------------------
r17057 | rmanfredi | 2009-10-10 11:11:20 -0400 (Sat, 10 Oct 2009) | 3 lines

publisher_handle(): do not publish the SHA-1 of a partial file for which
we know of at least two alternate locations.

------------------------------------------------------------------------
r17056 | rmanfredi | 2009-10-10 10:57:37 -0400 (Sat, 10 Oct 2009) | 3 lines

gdht_sha1_found(): do not count an ALOC lookup success if we see no other
value but what we ourselves published in the DHT for partial files we have.

------------------------------------------------------------------------
r17055 | rmanfredi | 2009-10-10 10:13:28 -0400 (Sat, 10 Oct 2009) | 2 lines

Added DHT "ALOC" publishing for partial files.

------------------------------------------------------------------------
r17054 | rmanfredi | 2009-10-10 06:40:51 -0400 (Sat, 10 Oct 2009) | 7 lines

Value publishing adjustments: count the number of STORE RPC replies we get so
that we do not attempt to contact more than KDA_K alive closest nodes.
We can also safely process late RPC replies we get, to more accurately count
the number of publishing roots.
publish_self(): only check whether our node is closer to the key than the
KDA_K-th node in the STORE set, regardless of whether key falls in the k-ball.

------------------------------------------------------------------------
r17053 | rmanfredi | 2009-10-10 06:36:40 -0400 (Sat, 10 Oct 2009) | 2 lines

Use shared_file_name_nfc() to get the file name, not shared_file_name_canonic().

------------------------------------------------------------------------
r17052 | rmanfredi | 2009-10-10 06:32:56 -0400 (Sat, 10 Oct 2009) | 2 lines

share_special_load(): avoid (improbable) file descriptor leak.

------------------------------------------------------------------------
r17051 | rmanfredi | 2009-10-10 03:51:54 -0400 (Sat, 10 Oct 2009) | 3 lines

publisher_done(): changed main log message to include timing stats and the
filename of the file being published.

------------------------------------------------------------------------
r17050 | rmanfredi | 2009-10-10 03:24:25 -0400 (Sat, 10 Oct 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r17049 | rmanfredi | 2009-10-10 03:23:57 -0400 (Sat, 10 Oct 2009) | 2 lines

shared_file_set_names(): added leading comment.

------------------------------------------------------------------------
r17048 | rmanfredi | 2009-10-10 03:23:06 -0400 (Sat, 10 Oct 2009) | 2 lines

No need for a "static" buffer, just grab space on the stack.

------------------------------------------------------------------------
r17047 | rmanfredi | 2009-10-09 17:54:38 -0400 (Fri, 09 Oct 2009) | 2 lines

publish_self(): fixed memory leak.

------------------------------------------------------------------------
r17046 | rmanfredi | 2009-10-09 17:40:20 -0400 (Fri, 09 Oct 2009) | 2 lines

Count values that cannot be republished in time.

------------------------------------------------------------------------
r17045 | rmanfredi | 2009-10-09 17:15:08 -0400 (Fri, 09 Oct 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17044 | rmanfredi | 2009-10-09 16:55:36 -0400 (Fri, 09 Oct 2009) | 2 lines

Added publishing of "ALOC" DHT values for shared files.

------------------------------------------------------------------------
r17043 | rmanfredi | 2009-10-09 16:46:50 -0400 (Fri, 09 Oct 2009) | 2 lines

Increased the lifetime of security tokens to make the token cache more useful.

------------------------------------------------------------------------
r17042 | rmanfredi | 2009-10-09 16:12:33 -0400 (Fri, 09 Oct 2009) | 2 lines

Added halloc_is_available().

------------------------------------------------------------------------
r17041 | rmanfredi | 2009-10-08 18:30:40 -0400 (Thu, 08 Oct 2009) | 2 lines

revent_pmsg_free(): fixed harmless argument swapping in debugging message.

------------------------------------------------------------------------
r17040 | rmanfredi | 2009-10-08 17:55:14 -0400 (Thu, 08 Oct 2009) | 2 lines

sha1_to_string(): completed fix started in r17039.

------------------------------------------------------------------------
r17039 | rmanfredi | 2009-10-08 17:13:51 -0400 (Thu, 08 Oct 2009) | 2 lines

sha1_to_string(): argument now passed via a pointer, not by value.

------------------------------------------------------------------------
r17038 | rmanfredi | 2009-10-08 17:04:33 -0400 (Thu, 08 Oct 2009) | 2 lines

dmesh_count(): attempt to expire entries if the record was not updated recently.

------------------------------------------------------------------------
r17037 | rmanfredi | 2009-10-08 13:08:51 -0400 (Thu, 08 Oct 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r17036 | rmanfredi | 2009-10-08 12:30:35 -0400 (Thu, 08 Oct 2009) | 4 lines

tls_global_init(): fixed the #if line that governs the call to the
gnutls_global_set_mem_functions().  Indeed halloc() is not available
when REMAP_ZALLOC or TRACK_MALLOC are defined.

------------------------------------------------------------------------
r17035 | rmanfredi | 2009-10-08 12:27:40 -0400 (Thu, 08 Oct 2009) | 2 lines

Configure libxml2 to use halloc() if available.

------------------------------------------------------------------------
r17034 | rmanfredi | 2009-10-05 16:52:46 -0400 (Mon, 05 Oct 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r17033 | rmanfredi | 2009-10-05 16:51:00 -0400 (Mon, 05 Oct 2009) | 4 lines

Made gtk-gnutella compile without warnings under the following gcc flags:
	-Wall -Wformat=2 -Wshadow -Wextra -Winit-self -Wfloat-equal
	-Wdeclaration-after-statement -Wundef -Wlogical-op

------------------------------------------------------------------------
r17032 | bpringlemeir | 2009-10-05 16:32:05 -0400 (Mon, 05 Oct 2009) | 1 line

header_get_feature() will set major/minor to 0/0 so nodes without HSEP fill match the prior conditions.  Check the status of header_get_feature() until the HSEP major mode changes to one.
------------------------------------------------------------------------
r17031 | bpringlemeir | 2009-10-05 15:48:36 -0400 (Mon, 05 Oct 2009) | 1 line

Add prototype of big_shrink().
------------------------------------------------------------------------
r17030 | rmanfredi | 2009-10-05 12:34:37 -0400 (Mon, 05 Oct 2009) | 2 lines

dq_launch_net(): fixed bug in logical operation (used '&&' instead of '&').

------------------------------------------------------------------------
r17029 | rmanfredi | 2009-10-04 11:41:06 -0400 (Sun, 04 Oct 2009) | 3 lines

Fixed harmless compilation warnings about redundant declarations and missing
previous declarations.

------------------------------------------------------------------------
r17028 | rmanfredi | 2009-10-04 11:39:42 -0400 (Sun, 04 Oct 2009) | 2 lines

Fixed harmless compilation warning.

------------------------------------------------------------------------
r17027 | rmanfredi | 2009-10-04 11:39:11 -0400 (Sun, 04 Oct 2009) | 2 lines

Reorganized routines in order to prevent forward declarations.

------------------------------------------------------------------------
r17026 | rmanfredi | 2009-10-04 11:38:23 -0400 (Sun, 04 Oct 2009) | 2 lines

No need to print statistics if the .dat file was never used.

------------------------------------------------------------------------
r17025 | rmanfredi | 2009-10-02 17:37:30 -0400 (Fri, 02 Oct 2009) | 3 lines

Improved granularity of the background task used to scan the library in order
to prevent noticeable processing freezes as much as possible.

------------------------------------------------------------------------
r17024 | rmanfredi | 2009-10-02 17:34:48 -0400 (Fri, 02 Oct 2009) | 3 lines

bg_task_ticks_used(): accept tick count larger than what was requested, but
cap it for the purpose of tick cost computations.

------------------------------------------------------------------------
r17023 | rmanfredi | 2009-10-02 13:44:11 -0400 (Fri, 02 Oct 2009) | 3 lines

After reclaiming cached DHT roots, and possibly expiring old entries, shrink
the database on disk to free up unused space.

------------------------------------------------------------------------
r17022 | rmanfredi | 2009-10-02 13:30:00 -0400 (Fri, 02 Oct 2009) | 4 lines

Only turn database read-only after a write I/O error occurs.
Added sdbm_shrink() to truncate files if trailing parts are empty.
Added the "truncate" (aka "shrink") command to dbu and made "insert" work.

------------------------------------------------------------------------
r17021 | rmanfredi | 2009-10-02 01:13:51 -0400 (Fri, 02 Oct 2009) | 4 lines

node_remove_*(): prefer "n->status != GTA_NODE_CONNECTED" to the older test
"!NODE_IS_ESTABLISHED(n)" because the latter would not filter out nodes that
are in the process of being removed already.

------------------------------------------------------------------------
r17020 | rmanfredi | 2009-10-01 17:23:22 -0400 (Thu, 01 Oct 2009) | 2 lines

Plugged memory leak introduced at r17013.

------------------------------------------------------------------------
r17019 | rmanfredi | 2009-10-01 14:35:37 -0400 (Thu, 01 Oct 2009) | 3 lines

lookup_token(): made it of type LOOKUP_STORE to be able to cache the returned
security token.

------------------------------------------------------------------------
r17018 | rmanfredi | 2009-10-01 14:33:38 -0400 (Thu, 01 Oct 2009) | 3 lines

publish_offload(): handle the case where we already got the cached security
token for the targetted node.

------------------------------------------------------------------------
r17017 | rmanfredi | 2009-10-01 14:31:28 -0400 (Thu, 01 Oct 2009) | 2 lines

Name cleanup: ULQ is for value-type and store-type lookups only.

------------------------------------------------------------------------
r17016 | rmanfredi | 2009-10-01 14:29:45 -0400 (Thu, 01 Oct 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r17015 | rmanfredi | 2009-10-01 14:28:58 -0400 (Thu, 01 Oct 2009) | 2 lines

Added compilation for the security token cache.

------------------------------------------------------------------------
r17014 | rmanfredi | 2009-10-01 14:28:13 -0400 (Thu, 01 Oct 2009) | 2 lines

Added more sanity assertions in the zone garbage collecting code.

------------------------------------------------------------------------
r17013 | rmanfredi | 2009-10-01 14:25:10 -0400 (Thu, 01 Oct 2009) | 5 lines

Added security token cache to accelerate DHT re-publishing.
Enable the DHT by default now to make sure it is widely tested before
the 0.96.7 release.
Added lookup_store_nodes() to find suitable nodes to store a value.

------------------------------------------------------------------------
r17012 | bpringlemeir | 2009-09-30 23:58:35 -0400 (Wed, 30 Sep 2009) | 1 line

Add dba, dbu generated files to ignore list.
------------------------------------------------------------------------
r17011 | rmanfredi | 2009-09-30 12:41:21 -0400 (Wed, 30 Sep 2009) | 2 lines

Plugged memory leaks.

------------------------------------------------------------------------
r17010 | rmanfredi | 2009-09-30 12:40:53 -0400 (Wed, 30 Sep 2009) | 2 lines

Fixed #include lines now that "lib/misc.h" was split into several headers.

------------------------------------------------------------------------
r17009 | rmanfredi | 2009-09-30 12:39:34 -0400 (Wed, 30 Sep 2009) | 2 lines

Fixed oops() compilation warnings by making it a true varargs routine.

------------------------------------------------------------------------
r17008 | rmanfredi | 2009-09-30 01:37:54 -0400 (Wed, 30 Sep 2009) | 3 lines

pmap_extend(): watch out for the kernel pmap being reloaded whilst extending.
free_pages_forced(): do not update pmap when "stop_freeing" was set.

------------------------------------------------------------------------
r17007 | rmanfredi | 2009-09-29 14:09:22 -0400 (Tue, 29 Sep 2009) | 2 lines

adns_init(): use fd_set_nonblocking() instead of socket_set_nonblocking().

------------------------------------------------------------------------
r17006 | rmanfredi | 2009-09-29 03:04:42 -0400 (Tue, 29 Sep 2009) | 2 lines

socket_accept(): forgot a return statement after erasing the socket structure.

------------------------------------------------------------------------
r17005 | rmanfredi | 2009-09-27 18:04:25 -0400 (Sun, 27 Sep 2009) | 3 lines

Turned a g_return_if_fail() into a real test since this can happen and
it's not a bug.

------------------------------------------------------------------------
r17004 | rmanfredi | 2009-09-27 17:54:18 -0400 (Sun, 27 Sep 2009) | 9 lines

Revamped whitelist management:
* Perform asynchronous DNS lookups.
* Perform periodic DNS resolution of hostnames, to catch dynamic IP rotations.
* Remember TLS hosts, update the TLS cache and initiate TLS node connections.
* Monitor periodically for whitelist changes or creation, instead of doing it
  each time whitelist_check() was called (which was incapable of handling
  runtime whitelist file creation).
* Added new "whitelist_debug" property.

------------------------------------------------------------------------
r17003 | rmanfredi | 2009-09-27 12:28:20 -0400 (Sun, 27 Sep 2009) | 2 lines

Sum up length of all keys and values and display total at the end.

------------------------------------------------------------------------
r17002 | rmanfredi | 2009-09-27 10:22:23 -0400 (Sun, 27 Sep 2009) | 3 lines

Reception of a FIND_NODE request is also an indication that we can receive
unsolicited UDP messages on the configured port.

------------------------------------------------------------------------
r17001 | rmanfredi | 2009-09-27 06:20:06 -0400 (Sun, 27 Sep 2009) | 2 lines

Added missing include.

------------------------------------------------------------------------
r17000 | rmanfredi | 2009-09-27 06:15:23 -0400 (Sun, 27 Sep 2009) | 2 lines

Bumped date.

------------------------------------------------------------------------
r16999 | rmanfredi | 2009-09-27 06:13:09 -0400 (Sun, 27 Sep 2009) | 5 lines

Optimized memory allocation to avoid doing both vmm_first_hole() and then
vmm_find_hole() at a later stage: if we can find a first hole of the proper
size before calling alloc_pages(), supply it and we can skip calling
vmm_find_hole().

------------------------------------------------------------------------
r16998 | rmanfredi | 2009-09-27 05:15:18 -0400 (Sun, 27 Sep 2009) | 2 lines

Plugged cache limit.

------------------------------------------------------------------------
r16997 | rmanfredi | 2009-09-27 05:14:20 -0400 (Sun, 27 Sep 2009) | 2 lines

No need to pay the lookup price if an option is not configured anywhere.

------------------------------------------------------------------------
r16996 | rmanfredi | 2009-09-27 05:09:37 -0400 (Sun, 27 Sep 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16995 | rmanfredi | 2009-09-26 18:50:43 -0400 (Sat, 26 Sep 2009) | 7 lines

Optimized socket_connect_finalize() to avoid redoing checks for hostiles if
they have already been conducted by socket_connect_prepare().
Receptions of "GIV" and "QUEUE" were not checking whether the remote address
was an hostile one.
Added "log_dropped_gnutella" boolean property to determine whether dropped
messages should be logged instead of relying on the deprecated "dbg" variable.

------------------------------------------------------------------------
r16994 | rmanfredi | 2009-09-26 18:04:53 -0400 (Sat, 26 Sep 2009) | 3 lines

iso3166_encode_cc(): prevent crash when given an invalid country; the initial
alphanumeric validation was not catching "zz" for instance.

------------------------------------------------------------------------
r16993 | rmanfredi | 2009-09-26 03:40:45 -0400 (Sat, 26 Sep 2009) | 2 lines

Removed useless inclusion of "hostiles.h".

------------------------------------------------------------------------
r16992 | rmanfredi | 2009-09-25 15:07:30 -0400 (Fri, 25 Sep 2009) | 2 lines

skip_ascii_alnum(): Fixed leading comment.

------------------------------------------------------------------------
r16991 | rmanfredi | 2009-09-25 11:26:00 -0400 (Fri, 25 Sep 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16990 | rmanfredi | 2009-09-25 11:23:43 -0400 (Fri, 25 Sep 2009) | 5 lines

Refactored lib/misc.[ch] to split some of the routines among several files
to make the library more modular and avoid linking (almost) everything
when misc.o happened to be needed.
Additional random cleanup.

------------------------------------------------------------------------
r16989 | rmanfredi | 2009-09-23 18:30:06 -0400 (Wed, 23 Sep 2009) | 2 lines

Also report total amount of large keys and large values found.

------------------------------------------------------------------------
r16988 | rmanfredi | 2009-09-23 18:19:23 -0400 (Wed, 23 Sep 2009) | 2 lines

Made "dba" report on the amount of used blocks within a .dat file, if present.

------------------------------------------------------------------------
r16987 | rmanfredi | 2009-09-23 18:17:31 -0400 (Wed, 23 Sep 2009) | 3 lines

Within a DB iterator loop, it's more efficient to use the new sdbm_value()
routine to get at the current value.

------------------------------------------------------------------------
r16986 | rmanfredi | 2009-09-23 02:20:13 -0400 (Wed, 23 Sep 2009) | 3 lines

Increase the buffer size of datagram sockets to 32KiB to allow reception of
bigger messages: it is not uncommon to get OOB query hits larger than 4KiB.

------------------------------------------------------------------------
r16985 | rmanfredi | 2009-09-23 02:17:12 -0400 (Wed, 23 Sep 2009) | 2 lines

Fixed inverted arguments in two g_warning() calls.

------------------------------------------------------------------------
r16984 | rmanfredi | 2009-09-23 02:15:46 -0400 (Wed, 23 Sep 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r16983 | rmanfredi | 2009-09-22 17:22:11 -0400 (Tue, 22 Sep 2009) | 6 lines

dbmap_insert(): use new sdbm_replace() instead of issuing two sdbm_store()
calls, one with DBM_INSERT to see whether the value existed and one with
DBM_REPLACE to replace an existing value.  The new sdbm_replace() routine
replaces an existing value or inserts a new one, as needed, and reports on
what it did so we can keep the key count accurate.

------------------------------------------------------------------------
r16982 | rmanfredi | 2009-09-22 17:17:53 -0400 (Tue, 22 Sep 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16981 | rmanfredi | 2009-09-22 17:15:33 -0400 (Tue, 22 Sep 2009) | 22 lines

Many improvements to the sdbm library:
* Optimized sdbm_store(DBM_REPLACE) when the new value being written has the
  same size as the old value: the new value is written in-place without having
  to update anything else on the page.
* Enforce errno = 0 on sdbm_delete() for a non-existing key.
* Optimized sdbm_deletekey() to prevent reading the key.
* Added sdbm_replace() to update a possibly existing key and get to know
  whether the key existed or whether it was created.
* Whenever an I/O error occurs, put the database in read-only mode by denying
  further updates until they call sdbm_clearerr().
* In the advent of an I/O error during page splits, undo the operation and
  restore a consistent disk image, as if the last (incomplete) split had never
  been attempted.
* Adapted dbu so that it can compile with the new sdbm library and can properly
  initialize the memory layer from gtk-gnutella's library, on which this
  version of sdbm relies.
* Added support for large keys and values, offloaded to an extra .dat file.
  The sum of key and value data cannot exceed 250 KiB, currently.  Large keys
  should be avoided if possible because they slow down lookups.
Large keys/values support is completely untested so far and is not used by
gtk-gnutella anyway for now.

------------------------------------------------------------------------
r16980 | rmanfredi | 2009-09-22 16:27:17 -0400 (Tue, 22 Sep 2009) | 4 lines

When the LRU cache cannot flush a dirty page, try to reuse a cache slot
occupied by a clean page and keep the dirty page in core, to defer I/O errors
as much as possible.

------------------------------------------------------------------------
r16979 | rmanfredi | 2009-09-22 16:24:03 -0400 (Tue, 22 Sep 2009) | 2 lines

Removed dependency from external debugging() function.

------------------------------------------------------------------------
r16978 | rmanfredi | 2009-09-22 16:22:31 -0400 (Tue, 22 Sep 2009) | 4 lines

Added file_absolute_open() to open files whose path must be absolute.
The file_open() routine can now be used with relative pathnames, making it
a suitable replacement for open() calls.

------------------------------------------------------------------------
r16977 | rmanfredi | 2009-09-21 17:46:02 -0400 (Mon, 21 Sep 2009) | 7 lines

When compiling with USE_HALLOC, which remaps the malloc() routine to halloc(),
we muse be careful at shutdown time when we are performing the final memory
cleanup: some parts of glib and of libc expect to be able to access freed
memory and do not like when the addresses have been invalidated.
Therefore, disable freeing of memory and invalidation of addresses by calling
vmm_stop_freeing() right before the final memory cleanup sequence.

------------------------------------------------------------------------
r16976 | rmanfredi | 2009-09-21 12:03:04 -0400 (Mon, 21 Sep 2009) | 3 lines

Another patch from Matthew Lye to remove an uncompressed ultra connection when
we're full of Gnet connections and get a new compressed one.

------------------------------------------------------------------------
r16975 | rmanfredi | 2009-09-17 15:45:46 -0400 (Thu, 17 Sep 2009) | 2 lines

Ooops, fixed stupid line inversion that prevented any outgoing connection.

------------------------------------------------------------------------
r16974 | rmanfredi | 2009-09-16 01:36:31 -0400 (Wed, 16 Sep 2009) | 2 lines

max_bad_hosts_cached_changed(): now also prunes the "alien" cache.

------------------------------------------------------------------------
r16973 | rmanfredi | 2009-09-16 01:35:33 -0400 (Wed, 16 Sep 2009) | 3 lines

stop_mass_update(): made sure we will no longer forget adding a new cache
there by making all the cases explicit in the switch.

------------------------------------------------------------------------
r16972 | bpringlemeir | 2009-09-15 21:08:16 -0400 (Tue, 15 Sep 2009) | 1 line

Add HCACHE_ALIEN to stop_mass_update(), globbed with BAD host count.
------------------------------------------------------------------------
r16971 | rmanfredi | 2009-09-15 10:39:16 -0400 (Tue, 15 Sep 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r16970 | rmanfredi | 2009-09-14 15:37:26 -0400 (Mon, 14 Sep 2009) | 8 lines

feed_host_cache_from_headers(): added vendor parameter for logging in case
we cannot parse the value.
Integrated another patch from Matthew Lye which discards "hubs" listed in
a X-Try-Hubs header and fixed a villain bug in parse_ip_port().
Also added caching of hosts that we identify as belonging to another network
in the new "alien" cache so that we no longer attempt connecting to them nor
add them back to our host cache.

------------------------------------------------------------------------
r16969 | rmanfredi | 2009-09-14 15:33:25 -0400 (Mon, 14 Sep 2009) | 3 lines

Added the non-persistent "alien" cache to keep track of IP:port of nodes
that do not belong to the Gnutella network.

------------------------------------------------------------------------
r16968 | rmanfredi | 2009-09-14 15:31:40 -0400 (Mon, 14 Sep 2009) | 4 lines

Make sure magic number is the first field of the file_object structure.
file_object_find(): adjusted lookup logic to always look in alternate tables
if the O_RDWR access mode is not what we're looking for.

------------------------------------------------------------------------
r16967 | rmanfredi | 2009-09-12 09:59:20 -0400 (Sat, 12 Sep 2009) | 3 lines

Also reject connections from BearShare nodes requesting an authentication
through the specific FP-Auth-Challenge handshake header.

------------------------------------------------------------------------
r16966 | rmanfredi | 2009-09-09 16:08:22 -0400 (Wed, 09 Sep 2009) | 2 lines

Ooops, fixed untested code.

------------------------------------------------------------------------
r16965 | rmanfredi | 2009-09-09 16:03:50 -0400 (Wed, 09 Sep 2009) | 5 lines

Finished incomplete patch for ignoring servents making up a private network.
Added node_intuit_address() to parse handshake headers and look for a valid
node address, for incoming connections.  This information is then used to
purge the address from the host cache.

------------------------------------------------------------------------
r16964 | rmanfredi | 2009-09-09 16:01:27 -0400 (Wed, 09 Sep 2009) | 2 lines

Fixed English typo in comment.

------------------------------------------------------------------------
r16963 | rmanfredi | 2009-09-09 14:02:17 -0400 (Wed, 09 Sep 2009) | 3 lines

lk_handle_reply(): do not access ``nl'' after calling lookup_completed() since
the object has been freed by then.

------------------------------------------------------------------------
r16962 | rmanfredi | 2009-09-09 14:00:43 -0400 (Wed, 09 Sep 2009) | 2 lines

Cache more contacts in RAM.

------------------------------------------------------------------------
r16961 | rmanfredi | 2009-09-07 15:36:42 -0400 (Mon, 07 Sep 2009) | 5 lines

Applied patch from Matthew Lye to reject node connections presenting an
X-Auth-Challenge header during handshaking.
Also made sure the address of such a host is removed from fresh/valid host
caches to prevent further propagation or reuse of that address.

------------------------------------------------------------------------
r16960 | rmanfredi | 2009-08-31 18:23:44 -0400 (Mon, 31 Aug 2009) | 3 lines

At startup, do not emit any warning on completed download files lacking a
fileinfo trailer, since that is the expected state for a completed file.

------------------------------------------------------------------------
r16959 | rmanfredi | 2009-08-31 18:21:10 -0400 (Mon, 31 Aug 2009) | 2 lines

Added is_strsuffix().

------------------------------------------------------------------------
r16958 | rmanfredi | 2009-08-29 08:47:47 -0400 (Sat, 29 Aug 2009) | 4 lines

Partly undo change #16954: the old logic in pmap_insert_region() was correct.
Added coalescing in pmap_add() because the kernel does not seem to always
coalesce contiguous similar regions.

------------------------------------------------------------------------
r16957 | rmanfredi | 2009-08-23 08:22:45 -0400 (Sun, 23 Aug 2009) | 2 lines

Bumped date.

------------------------------------------------------------------------
r16956 | rmanfredi | 2009-08-23 08:21:48 -0400 (Sun, 23 Aug 2009) | 4 lines

Forgot to unfreeze all PARQ entries from the IP after serving a quick slot,
which could potentially lead to having several frozen entries for some IP with
no escape possible.

------------------------------------------------------------------------
r16955 | rmanfredi | 2009-08-23 08:19:37 -0400 (Sun, 23 Aug 2009) | 2 lines

Documented the ``which'' argument of dbmw_sync().

------------------------------------------------------------------------
r16954 | rmanfredi | 2009-08-23 08:17:56 -0400 (Sun, 23 Aug 2009) | 4 lines

Forgot to coalesce pmap chunks with the previous chunk when inserting.
That could potentially lead to assertion failure when attempting to release
a memory chunk that would overlap two wrongly uncoalesced chunks.

------------------------------------------------------------------------
r16953 | rmanfredi | 2009-08-23 08:14:01 -0400 (Sun, 23 Aug 2009) | 8 lines

Do not unduly rewrite fileinfo trailers on restart, messing with the "mtime"
filesystem information:
file_info_got_tigertree() is now given an extra boolean flag to indicate
whether the fileinfo should be flagged as dirty after getting a TTH.
Previously, all files for which we knew the TTH were modified on restart,
even though no new data were added to the file, because their fileinfo trailer
was marked as dirty.

------------------------------------------------------------------------
r16952 | cbiere | 2009-08-07 09:35:30 -0400 (Fri, 07 Aug 2009) | 2 lines

 * Fixed HTML browsing which was broken since parsing with strtok_has().

------------------------------------------------------------------------
r16951 | cbiere | 2009-07-27 21:12:38 -0400 (Mon, 27 Jul 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16950 | cbiere | 2009-07-27 20:56:33 -0400 (Mon, 27 Jul 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16949 | cbiere | 2009-07-24 20:44:23 -0400 (Fri, 24 Jul 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16948 | cbiere | 2009-07-19 09:18:02 -0400 (Sun, 19 Jul 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16947 | rmanfredi | 2009-07-14 02:57:35 -0400 (Tue, 14 Jul 2009) | 4 lines

On some systems (e.g. DragonFly) the FILE structure is opaque and thus cannot
be used as an entropy source.  Get rid of that since we already collect enough
entropy out of the system.

------------------------------------------------------------------------
r16946 | cbiere | 2009-07-14 00:13:12 -0400 (Tue, 14 Jul 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16945 | rmanfredi | 2009-06-30 13:26:31 -0400 (Tue, 30 Jun 2009) | 3 lines

We must always remove the node's KUID from the "queried" and "pending" maps
when the message is dropped from the UDP queue, even if done synchronously.

------------------------------------------------------------------------
r16944 | cbiere | 2009-06-19 19:23:07 -0400 (Fri, 19 Jun 2009) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r16943 | rmanfredi | 2009-06-14 10:32:05 -0400 (Sun, 14 Jun 2009) | 3 lines

Fixed bug in bit_array_first_clear() that prevented the installation of
the optimized version.

------------------------------------------------------------------------
r16942 | rmanfredi | 2009-06-14 05:03:31 -0400 (Sun, 14 Jun 2009) | 4 lines

Moved g_mem_set_vtable() and related functions to the tail of the file since
they undef g_malloc and friends, thereby creating untracked objects if the
routines following them use g_malloc().

------------------------------------------------------------------------
r16941 | cbiere | 2009-06-13 19:08:23 -0400 (Sat, 13 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16940 | cbiere | 2009-06-13 11:20:26 -0400 (Sat, 13 Jun 2009) | 2 lines

 * Corrected inverted preprocessor check.

------------------------------------------------------------------------
r16939 | cbiere | 2009-06-13 09:33:34 -0400 (Sat, 13 Jun 2009) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r16938 | rmanfredi | 2009-06-13 06:18:10 -0400 (Sat, 13 Jun 2009) | 2 lines

Further adjustments to allow compilation under TRACK_MALLOC.

------------------------------------------------------------------------
r16937 | rmanfredi | 2009-06-13 05:40:27 -0400 (Sat, 13 Jun 2009) | 2 lines

Avoid false leak reports.

------------------------------------------------------------------------
r16936 | rmanfredi | 2009-06-13 05:39:54 -0400 (Sat, 13 Jun 2009) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r16935 | rmanfredi | 2009-06-13 05:39:23 -0400 (Sat, 13 Jun 2009) | 2 lines

Restored compilability with REMAP_ZALLOC and TRACK_MALLOC.

------------------------------------------------------------------------
r16934 | rmanfredi | 2009-06-13 05:37:57 -0400 (Sat, 13 Jun 2009) | 2 lines

Raised logging level for search string logging since this happens frequently.

------------------------------------------------------------------------
r16933 | cbiere | 2009-06-12 08:13:05 -0400 (Fri, 12 Jun 2009) | 3 lines

 * Swapped leaf and ultrapeer slots for GGEP UP in compliance with LimeWire
   which does not follow the published specification.

------------------------------------------------------------------------
r16932 | cbiere | 2009-06-11 20:11:31 -0400 (Thu, 11 Jun 2009) | 3 lines

 * get_results_set(): Log the source address of hostile UDP packets.
 * update_neighbour_info(): Ignore address for LAN/loopback connections.

------------------------------------------------------------------------
r16931 | cbiere | 2009-06-10 18:31:03 -0400 (Wed, 10 Jun 2009) | 2 lines

 * More centralizing of checks.

------------------------------------------------------------------------
r16930 | cbiere | 2009-06-09 17:55:04 -0400 (Tue, 09 Jun 2009) | 2 lines

 * Don't put implementation details into public header files.

------------------------------------------------------------------------
r16924 | cbiere | 2009-06-06 19:30:15 -0400 (Sat, 06 Jun 2009) | 4 lines

 * Extracted concat_strings_v() from concat_strings() to reduce duplicated
   code.
 * w_concat_strings(), h_strconcat(): Use concat_strings_v().

------------------------------------------------------------------------
r16923 | cbiere | 2009-06-06 17:52:52 -0400 (Sat, 06 Jun 2009) | 3 lines

 * download_build_url(): Use the full bitprint or we would still lose
   the TTH as before.

------------------------------------------------------------------------
r16922 | cbiere | 2009-06-06 17:18:51 -0400 (Sat, 06 Jun 2009) | 3 lines

 * download_build_magnet(): The TTH wasn't added to the magnet, so it was
   lost between sessions unless a fileinfo entry existed at shutdown time.

------------------------------------------------------------------------
r16921 | cbiere | 2009-06-06 16:51:04 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Added video codec.

------------------------------------------------------------------------
r16920 | cbiere | 2009-06-06 16:50:09 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Removed unnecessary check.

------------------------------------------------------------------------
r16919 | cbiere | 2009-06-06 16:48:20 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Replaced gnet_host_vec_create() with gnet_host_vec_from_vector().

------------------------------------------------------------------------
r16918 | cbiere | 2009-06-06 16:41:03 -0400 (Sat, 06 Jun 2009) | 4 lines

 * Added vector implementation to sequence interface.
 * Replaced gnet_host_vec_create() with gnet_host_vec_t *gnet_host_vec_from_vector()
   to avoid duplicated code.

------------------------------------------------------------------------
r16917 | cbiere | 2009-06-06 16:13:28 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Added vendor codes.

------------------------------------------------------------------------
r16916 | cbiere | 2009-06-06 13:05:39 -0400 (Sat, 06 Jun 2009) | 2 lines

 * gnet_host_vec_create(): Bugfix: Another missing break-statement!

------------------------------------------------------------------------
r16915 | cbiere | 2009-06-06 12:37:07 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r16914 | cbiere | 2009-06-06 12:34:49 -0400 (Sat, 06 Jun 2009) | 5 lines

 * gnet_host_vec_from_sequence(): Bugfix: Missing break-statement!
 * Prefer sizeof array[0] over *array for arrays.
 * gnet_host_vec_add(): wrealloc() handles NULL pointers itself now.
 * gnet_host_dup(): Just use wcopy().

------------------------------------------------------------------------
r16913 | cbiere | 2009-06-06 02:47:46 -0400 (Sat, 06 Jun 2009) | 2 lines

  * Corrected copy and paste mistake.

------------------------------------------------------------------------
r16912 | cbiere | 2009-06-06 01:40:26 -0400 (Sat, 06 Jun 2009) | 2 lines

 * Added check for odd GUIDs.

------------------------------------------------------------------------
r16911 | cbiere | 2009-06-05 23:14:55 -0400 (Fri, 05 Jun 2009) | 3 lines

 * Copy filenames from query hits only when absolutely necessary and
   point directly into the packet, otherwise.

------------------------------------------------------------------------
r16910 | cbiere | 2009-06-05 21:32:11 -0400 (Fri, 05 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16909 | cbiere | 2009-06-05 19:49:38 -0400 (Fri, 05 Jun 2009) | 2 lines

 * Removed hardly used flag_t, set_flags() and clear_flags().

------------------------------------------------------------------------
r16908 | cbiere | 2009-06-04 21:50:51 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Added some checks to avoid false-positives with Cabos.

------------------------------------------------------------------------
r16907 | cbiere | 2009-06-04 21:25:35 -0400 (Thu, 04 Jun 2009) | 4 lines

 * size_saturate_mult(): Since it checks for zero anyway, it can just as well
   skip multiplying.
 * guint32_saturate_add(): Fixed incorrect return type.

------------------------------------------------------------------------
r16906 | cbiere | 2009-06-04 20:08:15 -0400 (Thu, 04 Jun 2009) | 3 lines

 * Added comand-line switch --compile-info to print some information
   that is hardcoded at compile-time.

------------------------------------------------------------------------
r16905 | rmanfredi | 2009-06-04 18:27:55 -0400 (Thu, 04 Jun 2009) | 3 lines

pmap_load_data(): added missing word in comment, and moved dirtying of buf[]
until after we know the open() succeeds.

------------------------------------------------------------------------
r16904 | cbiere | 2009-06-04 18:09:18 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Tuned wording even further.

------------------------------------------------------------------------
r16903 | cbiere | 2009-06-04 16:55:08 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16902 | cbiere | 2009-06-04 16:33:29 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Added filename extension "rmi".

------------------------------------------------------------------------
r16901 | cbiere | 2009-06-04 16:19:26 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16900 | cbiere | 2009-06-04 16:14:26 -0400 (Thu, 04 Jun 2009) | 2 lines

 * pmap_load_data(): Clear buffer in advance to force mapped pages.

------------------------------------------------------------------------
r16899 | cbiere | 2009-06-04 16:08:16 -0400 (Thu, 04 Jun 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16898 | rmanfredi | 2009-06-04 14:58:57 -0400 (Thu, 04 Jun 2009) | 2 lines

Fixed typo and reworded sentence to avoid repeating "gtk-gnutella".

------------------------------------------------------------------------
r16897 | cbiere | 2009-06-03 20:40:05 -0400 (Wed, 03 Jun 2009) | 2 lines

 * Another optimization.

------------------------------------------------------------------------
r16896 | rmanfredi | 2009-06-03 17:12:28 -0400 (Wed, 03 Jun 2009) | 3 lines

Whenever a node is moved from one list to another, attempt to possibly move
it around as well if we're only referencing it from the routing table.

------------------------------------------------------------------------
r16895 | rmanfredi | 2009-06-03 17:11:17 -0400 (Wed, 03 Jun 2009) | 2 lines

Added "shutdown_debug" to trace final shutdown calls.

------------------------------------------------------------------------
r16894 | rmanfredi | 2009-06-03 17:10:25 -0400 (Wed, 03 Jun 2009) | 2 lines

Added knode_refcnt().

------------------------------------------------------------------------
r16893 | rmanfredi | 2009-06-03 17:08:07 -0400 (Wed, 03 Jun 2009) | 2 lines

Added wmove().

------------------------------------------------------------------------
r16892 | cbiere | 2009-06-03 08:54:03 -0400 (Wed, 03 Jun 2009) | 2 lines

 * skip_handshake(): Corrected integer type.

------------------------------------------------------------------------
r16891 | cbiere | 2009-06-02 23:05:42 -0400 (Tue, 02 Jun 2009) | 3 lines

 * Overhauled spam checks.
 * Simplified code with clamp_strncpy().

------------------------------------------------------------------------
r16890 | cbiere | 2009-06-02 19:18:09 -0400 (Tue, 02 Jun 2009) | 2 lines

 * 2474 new items.

------------------------------------------------------------------------
r16889 | cbiere | 2009-06-02 16:24:00 -0400 (Tue, 02 Jun 2009) | 2 lines

 * Call gnutls_global_deinit() on shutdown to avoid memory leak warnings.

------------------------------------------------------------------------
r16888 | cbiere | 2009-06-02 12:13:02 -0400 (Tue, 02 Jun 2009) | 2 lines

 * Let GNUTLS use halloc(), too.

------------------------------------------------------------------------
r16887 | cbiere | 2009-06-02 10:44:17 -0400 (Tue, 02 Jun 2009) | 2 lines

 * Added more MIME types and filename extension mappings.

------------------------------------------------------------------------
r16886 | cbiere | 2009-06-01 21:12:30 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16885 | cbiere | 2009-06-01 20:58:14 -0400 (Mon, 01 Jun 2009) | 2 lines

 * download_switchable(): Added missing NULL check.

------------------------------------------------------------------------
r16884 | cbiere | 2009-06-01 19:52:10 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Fixed blatant bug in previous edit.

------------------------------------------------------------------------
r16883 | cbiere | 2009-06-01 18:44:03 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16882 | cbiere | 2009-06-01 17:38:48 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16881 | cbiere | 2009-06-01 17:33:59 -0400 (Mon, 01 Jun 2009) | 2 lines

 * pmap_load(): Separated inner code into pmap_load_data().

------------------------------------------------------------------------
r16880 | cbiere | 2009-06-01 17:26:10 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Dump gnutella packets received through browse host downloads, too.

------------------------------------------------------------------------
r16879 | cbiere | 2009-06-01 17:24:23 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Simplified code.

------------------------------------------------------------------------
r16878 | cbiere | 2009-06-01 17:10:42 -0400 (Mon, 01 Jun 2009) | 3 lines

 * Added missing #include.
 * Removed bogus whitespace.

------------------------------------------------------------------------
r16877 | cbiere | 2009-06-01 16:58:15 -0400 (Mon, 01 Jun 2009) | 3 lines

 * upload_request_handle_user_agent(): Replaced g_strlcpy() with
   concat_strings().

------------------------------------------------------------------------
r16876 | cbiere | 2009-06-01 16:52:51 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Removed unnecessary checks. make_pathname() doesn't return on failure.

------------------------------------------------------------------------
r16875 | cbiere | 2009-06-01 16:46:26 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Replaced g_strlcpy() with clamp_strcpy().

------------------------------------------------------------------------
r16874 | cbiere | 2009-06-01 16:02:14 -0400 (Mon, 01 Jun 2009) | 4 lines

 * Moved and renamed file_close() to fd_close().
 * Moved and renamed file_set_nonblocking() to fd_set_nonblocking().
 * Replaced many close() with fd_close().

------------------------------------------------------------------------
r16873 | cbiere | 2009-06-01 15:54:18 -0400 (Mon, 01 Jun 2009) | 3 lines

 * Added inline keyword to supress warnings about unused functions.
 * Replaced g_strlcpy() with clamp_strncpy().

------------------------------------------------------------------------
r16872 | cbiere | 2009-06-01 15:46:27 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Replaced g_strlcpy() with clamp_strcpy().

------------------------------------------------------------------------
r16871 | cbiere | 2009-06-01 15:40:16 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Replaced g_strlcpy() with clamp_strcpy().

------------------------------------------------------------------------
r16870 | cbiere | 2009-06-01 15:30:51 -0400 (Mon, 01 Jun 2009) | 2 lines

 * Added some MIME types and file extension mappings.

------------------------------------------------------------------------
r16869 | rmanfredi | 2009-06-01 09:15:55 -0400 (Mon, 01 Jun 2009) | 2 lines

Free RX buffers that happen to be memory fragments.

------------------------------------------------------------------------
r16868 | rmanfredi | 2009-06-01 08:57:21 -0400 (Mon, 01 Jun 2009) | 3 lines

gm_mem_set_safe_vtable(): we want real_malloc() there, not malloc() which
would be redefined when compiling with TRACK_MALLOC.

------------------------------------------------------------------------
r16867 | rmanfredi | 2009-06-01 08:40:52 -0400 (Mon, 01 Jun 2009) | 3 lines

Allow proper cleanup of zalloc and walloc even though g_malloc() was redefined
through the use of g_mem_set_vtable().

------------------------------------------------------------------------
r16866 | rmanfredi | 2009-06-01 04:42:36 -0400 (Mon, 01 Jun 2009) | 4 lines

Moved logging of the VMM non-standard settings to vmm_post_init(), which is
called after the arguments are handled and thus will not be printed out
on each "gtk-gnutella --shell" invocation, for instance.

------------------------------------------------------------------------
r16865 | cbiere | 2009-05-31 23:42:54 -0400 (Sun, 31 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16864 | cbiere | 2009-05-31 20:34:57 -0400 (Sun, 31 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16863 | rmanfredi | 2009-05-31 18:39:18 -0400 (Sun, 31 May 2009) | 2 lines

rpc_delay(): don't let a huge amount of timeouts overflow the integer.

------------------------------------------------------------------------
r16862 | cbiere | 2009-05-31 18:03:25 -0400 (Sun, 31 May 2009) | 4 lines

 * Removed unnecessary GLibberish.
 * Replaced some flag variables with volatile sig_atomic_t.
 * Use proper exit codes instead of 0/1.

------------------------------------------------------------------------
r16861 | cbiere | 2009-05-31 16:55:49 -0400 (Sun, 31 May 2009) | 2 lines

 * parse_arguments(): The arg member of options shouldn't mix allocators.

------------------------------------------------------------------------
r16860 | rmanfredi | 2009-05-31 14:41:32 -0400 (Sun, 31 May 2009) | 2 lines

Fixed typo in log message.

------------------------------------------------------------------------
r16859 | cbiere | 2009-05-31 13:55:34 -0400 (Sun, 31 May 2009) | 4 lines

 * spam_sha1_check():
   * Removed assertion.
   * NULL == tab doesn't imply NULL != dw. If no file was loaded both are NULL.

------------------------------------------------------------------------
r16858 | cbiere | 2009-05-31 13:25:30 -0400 (Sun, 31 May 2009) | 2 lines

 * spam_sha1_check(): Added assertion.

------------------------------------------------------------------------
r16857 | cbiere | 2009-05-31 08:37:13 -0400 (Sun, 31 May 2009) | 3 lines

 * h_strdup(): Smaller, efficient implementation.
 * h_strndup(): Added comment.

------------------------------------------------------------------------
r16856 | cbiere | 2009-05-31 07:35:10 -0400 (Sun, 31 May 2009) | 4 lines

 * normalize_dir_separators(): Modify the string in-place since the length
   doesn't change.
 * filename_to_utf8_normalized() always returns a newly allocated string.

------------------------------------------------------------------------
r16855 | cbiere | 2009-05-31 07:07:36 -0400 (Sun, 31 May 2009) | 2 lines

 * page_cache_find_pages(): Use size_saturate_mult().

------------------------------------------------------------------------
r16854 | rmanfredi | 2009-05-31 06:04:28 -0400 (Sun, 31 May 2009) | 2 lines

Homework assignments.

------------------------------------------------------------------------
r16853 | rmanfredi | 2009-05-31 05:56:22 -0400 (Sun, 31 May 2009) | 2 lines

More halloc() invasion.

------------------------------------------------------------------------
r16852 | rmanfredi | 2009-05-31 05:48:43 -0400 (Sun, 31 May 2009) | 2 lines

Be careful about the kernel pmap being reloaded in the middle of updates.

------------------------------------------------------------------------
r16851 | cbiere | 2009-05-30 21:25:08 -0400 (Sat, 30 May 2009) | 2 lines

 * page_cache_find_pages(): Added three FIXME to mark homework.

------------------------------------------------------------------------
r16850 | cbiere | 2009-05-30 21:11:23 -0400 (Sat, 30 May 2009) | 3 lines

 * shell_parse_command(): Fixed memory leak which would occured
   there were too many arguments.

------------------------------------------------------------------------
r16849 | cbiere | 2009-05-30 20:38:04 -0400 (Sat, 30 May 2009) | 2 lines

 * 375 new items.

------------------------------------------------------------------------
r16848 | cbiere | 2009-05-30 20:14:50 -0400 (Sat, 30 May 2009) | 5 lines

 * print_node_info():
   * Use clamp_strcpy() instead of g_strlcpy() because we don't care about
     truncation here.
   * Allow wider User-Agent.

------------------------------------------------------------------------
r16847 | cbiere | 2009-05-30 20:04:12 -0400 (Sat, 30 May 2009) | 2 lines

 * local_shell() cannot be called before setttings_early_init().

------------------------------------------------------------------------
r16846 | cbiere | 2009-05-30 19:43:22 -0400 (Sat, 30 May 2009) | 6 lines

 * Call misc_init() as soon as possible because it is crucial.
 * --pause-on-crash was not working as of recently because
   crash_init() was called before any arguments were parsed.
 * Arguments like --version, --help, --shell etc. should be
   handled as soon as possible.

------------------------------------------------------------------------
r16845 | cbiere | 2009-05-30 19:35:46 -0400 (Sat, 30 May 2009) | 2 lines

 * html_entities_close(): Added missing check.

------------------------------------------------------------------------
r16844 | cbiere | 2009-05-30 19:24:29 -0400 (Sat, 30 May 2009) | 4 lines

 * Don't call html_entities_init() in misc_init() so that
   misc_init() can be called earlier as it is crucial to
   initialize the tables as soon as possible.

------------------------------------------------------------------------
r16843 | cbiere | 2009-05-30 19:18:07 -0400 (Sat, 30 May 2009) | 3 lines

 * vmm_validate_pages(): No need for madvise() here.
 * vmm_malloc_inited(): Disabled extremely annoying debug output.

------------------------------------------------------------------------
r16842 | cbiere | 2009-05-30 18:03:17 -0400 (Sat, 30 May 2009) | 2 lines

 * dump_hex_line(): Print all ASCII printables (especially space).

------------------------------------------------------------------------
r16841 | cbiere | 2009-05-30 17:28:29 -0400 (Sat, 30 May 2009) | 3 lines

 * d_step_copy(): Make sure ticks cannot overflow and use less obscure
   arithmetic.

------------------------------------------------------------------------
r16840 | rmanfredi | 2009-05-30 16:36:36 -0400 (Sat, 30 May 2009) | 6 lines

Added vmm_pre_close() to stop logging on final shutdown.
Added vmm_first_hole() to determine where the first hole is in the VM space.
Refuse to use a cached page that would be "after" the first hole, to avoid
further fragmentation.  This policy should keep fragmentation low over a long
period of time.

------------------------------------------------------------------------
r16839 | rmanfredi | 2009-05-30 16:33:16 -0400 (Sat, 30 May 2009) | 3 lines

zclose(): do not cleanup when USE_HALLOC is set, i.e. when halloc() replaces
the system's malloc().

------------------------------------------------------------------------
r16838 | cbiere | 2009-05-30 16:13:40 -0400 (Sat, 30 May 2009) | 2 lines

 * vmm_malloc_inited(): settings wasn't correctly initialized.

------------------------------------------------------------------------
r16837 | cbiere | 2009-05-30 15:15:42 -0400 (Sat, 30 May 2009) | 2 lines

 * vprintf_get_size(): Better ignore "errno" on failure.

------------------------------------------------------------------------
r16836 | rmanfredi | 2009-05-30 15:14:53 -0400 (Sat, 30 May 2009) | 3 lines

wrealloc_track(): use same semantics as wrealloc() when supplied with
a NULL pointer.

------------------------------------------------------------------------
r16835 | rmanfredi | 2009-05-30 15:12:36 -0400 (Sat, 30 May 2009) | 3 lines

wrealloc(): allocate new block when given a NULL pointer, to match the
semantics of realloc().

------------------------------------------------------------------------
r16834 | cbiere | 2009-05-30 14:36:59 -0400 (Sat, 30 May 2009) | 4 lines

 * vprintf_get_size():
   * Simplified code and extended comment.
   * Use walloc() since we track size anyway.

------------------------------------------------------------------------
r16833 | cbiere | 2009-05-30 14:17:10 -0400 (Sat, 30 May 2009) | 4 lines

 * vprintf_get_size(): Corrected compatibility with older vsnprintf()
   which return a non-positive(!) value on error respectively if the
   size argument is zero.

------------------------------------------------------------------------
r16832 | cbiere | 2009-05-30 13:47:02 -0400 (Sat, 30 May 2009) | 5 lines

 * vprintf_get_string():
   * Avoid memory leak on failure albeit we abort anyway.
   * Use a larger buffer for the first non-zero attempt to reduce
     number of rounds; the buffer is released immediately anyway.

------------------------------------------------------------------------
r16831 | cbiere | 2009-05-30 13:36:06 -0400 (Sat, 30 May 2009) | 5 lines

 * h_strdup_vprintf(): Don't use g_printf_string_upper_bound() because
   it is broken buggy nonsense.
 * Removed unnecessary uses of VA_COPY(). va_start() can be used multiple
   times.

------------------------------------------------------------------------
r16830 | cbiere | 2009-05-30 11:39:22 -0400 (Sat, 30 May 2009) | 2 lines

 * Added check because halloc() must strictly succeed or not return at all.

------------------------------------------------------------------------
r16829 | rmanfredi | 2009-05-30 11:31:49 -0400 (Sat, 30 May 2009) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r16828 | rmanfredi | 2009-05-30 10:40:25 -0400 (Sat, 30 May 2009) | 2 lines

h_strdup_vprintf(): fixed improper varargs management!

------------------------------------------------------------------------
r16827 | rmanfredi | 2009-05-30 09:56:29 -0400 (Sat, 30 May 2009) | 4 lines

Reset WALLOC_MAX to default 4 KiB, since even 64-bit PCs have a page size of
4 KiB.  The only 64-bit CPU having hardware PTEs requiring a minimum of 8 KiB
for pages is the DEC Alpha chip.  Even the Itanium uses 4 KiB!

------------------------------------------------------------------------
r16826 | rmanfredi | 2009-05-30 09:49:10 -0400 (Sat, 30 May 2009) | 2 lines

Added magic number.

------------------------------------------------------------------------
r16825 | rmanfredi | 2009-05-30 09:48:41 -0400 (Sat, 30 May 2009) | 2 lines

Do not define h_*() routines when compiling with TRACK_MALLOC.

------------------------------------------------------------------------
r16824 | rmanfredi | 2009-05-30 09:47:23 -0400 (Sat, 30 May 2009) | 2 lines

zdestroy(): do not remove zone from hash table if we're iterating on it.

------------------------------------------------------------------------
r16823 | rmanfredi | 2009-05-30 08:04:53 -0400 (Sat, 30 May 2009) | 3 lines

vmm_find_hole(): avoid hinting addresses not in the proper VM range, as
determined at initialization time.

------------------------------------------------------------------------
r16822 | rmanfredi | 2009-05-30 07:37:44 -0400 (Sat, 30 May 2009) | 2 lines

More halloc() usage.

------------------------------------------------------------------------
r16821 | cbiere | 2009-05-30 06:56:41 -0400 (Sat, 30 May 2009) | 3 lines

 * There was no reason to rip vmm_trap_page() apart to initialize it early.
 * Added some const.

------------------------------------------------------------------------
r16820 | cbiere | 2009-05-30 04:32:59 -0400 (Sat, 30 May 2009) | 2 lines

 * Corrected printing of size_t variables.

------------------------------------------------------------------------
r16819 | cbiere | 2009-05-29 20:39:50 -0400 (Fri, 29 May 2009) | 2 lines

 * download_remove_all_thex(): No warning required for sha1 being NULL.

------------------------------------------------------------------------
r16818 | cbiere | 2009-05-29 17:01:29 -0400 (Fri, 29 May 2009) | 2 lines

 * page_table_destroy(): Fixed assertion failure on shutdown.

------------------------------------------------------------------------
r16817 | cbiere | 2009-05-29 16:32:17 -0400 (Fri, 29 May 2009) | 3 lines

 * vmm_munmap(): Test for success rather than non-failure and print
   a warning on failure.

------------------------------------------------------------------------
r16816 | rmanfredi | 2009-05-29 16:01:01 -0400 (Fri, 29 May 2009) | 3 lines

Bad edit had corrupted vmm_munmap(), causing mapings to not be cleared on
successful munmap().

------------------------------------------------------------------------
r16815 | rmanfredi | 2009-05-29 15:38:32 -0400 (Fri, 29 May 2009) | 2 lines

vmm_reserve_stack(): moved assertion further down.

------------------------------------------------------------------------
r16814 | rmanfredi | 2009-05-29 15:34:29 -0400 (Fri, 29 May 2009) | 5 lines

Fixed improper zg_free accounting.
zgc_zmove(): optimize research for a free subzone by using zg_free.  Also look
for the earliest subzone, so that the block is moved as close as possible to
the bottom of the VM space.

------------------------------------------------------------------------
r16813 | cbiere | 2009-05-29 13:09:20 -0400 (Fri, 29 May 2009) | 2 lines

 * pmap_insert_region(): Hide warning unless debugging.

------------------------------------------------------------------------
r16812 | cbiere | 2009-05-29 13:04:08 -0400 (Fri, 29 May 2009) | 2 lines

 * Updated comment.

------------------------------------------------------------------------
r16811 | rmanfredi | 2009-05-29 12:47:51 -0400 (Fri, 29 May 2009) | 2 lines

Trace how many blocks remain in the previous subzone after a move.

------------------------------------------------------------------------
r16810 | cbiere | 2009-05-29 12:41:02 -0400 (Fri, 29 May 2009) | 2 lines

 * Replaced walloc_can_use_halloc with halloc_threshold.

------------------------------------------------------------------------
r16809 | rmanfredi | 2009-05-29 12:35:10 -0400 (Fri, 29 May 2009) | 3 lines

Increased WALLOC_MAX to 8 KiB on 64-bit systems, assuming they will have
a larger page size than 32-bit ones.

------------------------------------------------------------------------
r16808 | rmanfredi | 2009-05-29 12:16:13 -0400 (Fri, 29 May 2009) | 9 lines

Allow walloc() to use halloc() and not malloc(), which is possible when
WALLOC_MAX is greater than or equal to the page size.
Added zmove() to be able to move blocks around in a zone.
Taught zalloc() to use a different allocation logic depending on the way
memory grows.
wrealloc(): now calls zmove() to move block around if it is interesting.
hrealloc(): invoke wrealloc() directly for small-sized blocks to benefit
from the ability to zmove() them around.

------------------------------------------------------------------------
r16807 | rmanfredi | 2009-05-29 12:09:54 -0400 (Fri, 29 May 2009) | 7 lines

vmm_mmap_anonymous(): forgot to call vmm_reserve_stack() again when reloading
the kernel memory map.
vmm_find_hole(): forgot to truncate pointer to the start of the page when
memory grows with decreasing addresses, thereby failing when the given
size was not a multiple of the page size.
Added vmm_grows_upwards() for upper layers to know how memory grows.

------------------------------------------------------------------------
r16806 | rmanfredi | 2009-05-29 12:04:32 -0400 (Fri, 29 May 2009) | 3 lines

download_request(): fixed invalid boundary test when server shrinks the
requested chunk.

------------------------------------------------------------------------
r16805 | cbiere | 2009-05-29 11:50:52 -0400 (Fri, 29 May 2009) | 5 lines

 * vmm_map_anonymous(): vmm_find_hole() seems to expect size being a
   multiple of the pagesize.
 * posix_memalign() and memalign() don't guarantee zero-filled memory,
   thus clear it manually.

------------------------------------------------------------------------
r16804 | cbiere | 2009-05-29 11:00:44 -0400 (Fri, 29 May 2009) | 2 lines

 * Replaced vmf_mark_foreign() with vmf_set_end().

------------------------------------------------------------------------
r16803 | cbiere | 2009-05-29 10:25:43 -0400 (Fri, 29 May 2009) | 2 lines

 * Added booleanize() macro.

------------------------------------------------------------------------
r16802 | cbiere | 2009-05-29 09:17:21 -0400 (Fri, 29 May 2009) | 2 lines

 * pmap_insert_region(): Added check to increase strictness.

------------------------------------------------------------------------
r16801 | cbiere | 2009-05-29 09:08:14 -0400 (Fri, 29 May 2009) | 4 lines

 * pmap_remove(): Stick to vmf_is_foreign().
 * prot_strdup(): Fixed recently added bug: The string may span over multiple
   pages, so the whole region must be recorded, not just the first page.

------------------------------------------------------------------------
r16800 | cbiere | 2009-05-29 07:32:47 -0400 (Fri, 29 May 2009) | 9 lines

 * Renamed ptr_add_offset_const() to const_ptr_add_offset().
 * ptr_add_offset(), const_ptr_add_offset(): Use size_t instead of 'char *'
   because some users naively assume pointer arithmetic wraps which is
   actually only true for unsigned integers.
 * pmap_insert_region(): Ignore foreign existing overlapping regions. This
   is necessary for mmap() with MAP_FIXED as used in core/bsched.c.
 * page_start(), vmm_reserve_stack(): Preserve const-qualifier whenever
   possible.

------------------------------------------------------------------------
r16799 | rmanfredi | 2009-05-28 19:06:21 -0400 (Thu, 28 May 2009) | 5 lines

VMM: make sure we do not prevent the stack from growing sufficiently.
Added vmm_mmap() and vmm_munmap() wrappers that must be used instead of the
raw mmap() and munmap() system calls so that the VMM layer knows about the
extra mappings in the VM space.

------------------------------------------------------------------------
r16798 | rmanfredi | 2009-05-28 18:59:14 -0400 (Thu, 28 May 2009) | 2 lines

Use walloc() instead of g_malloc(), especially for short-lifespan data.

------------------------------------------------------------------------
r16797 | rmanfredi | 2009-05-28 18:56:29 -0400 (Thu, 28 May 2009) | 2 lines

More uses of halloc() instead of g_malloc().

------------------------------------------------------------------------
r16796 | bpringlemeir | 2009-05-27 23:55:19 -0400 (Wed, 27 May 2009) | 1 line

Use void for parameterless handle_arguments.
------------------------------------------------------------------------
r16795 | bpringlemeir | 2009-05-27 23:53:09 -0400 (Wed, 27 May 2009) | 1 line

Compile in headless mode, where running_topless is a define.  Remove unused parameter to handle_arguments.
------------------------------------------------------------------------
r16794 | cbiere | 2009-05-27 20:35:30 -0400 (Wed, 27 May 2009) | 5 lines

 * print_node_info():
   * Allow wider User-Agent.
   * Don't require NODE_IS_ESTABLISHED() because it hides some nodes visible
     in the GUI.

------------------------------------------------------------------------
r16793 | cbiere | 2009-05-27 18:30:10 -0400 (Wed, 27 May 2009) | 2 lines

 * iobuffer_readline(): Reverted incorrect last-minute optimization.

------------------------------------------------------------------------
r16792 | rmanfredi | 2009-05-27 18:16:12 -0400 (Wed, 27 May 2009) | 4 lines

Applied patch for Christian Biere (could not test code locally): cleanup the
pmap_load() code by encapsulating the I/O reading neatly, so that it's nicer
to read and grasp than the original barebone buffering.

------------------------------------------------------------------------
r16791 | cbiere | 2009-05-27 15:18:54 -0400 (Wed, 27 May 2009) | 2 lines

 * Since prune_page_cache() was removed the timeout is no longer used.

------------------------------------------------------------------------
r16790 | rmanfredi | 2009-05-27 14:42:25 -0400 (Wed, 27 May 2009) | 2 lines

Calls to hrealloc() are a chance to move VM fragments out of the way.

------------------------------------------------------------------------
r16789 | rmanfredi | 2009-05-27 14:40:10 -0400 (Wed, 27 May 2009) | 7 lines

Added vmm_post_init().  Allocate the VM trap page early.
Invoke crash_init() early since it uses prot_strdup(): we want these pages
at the bottom of the VM space, if possible.
Added vmm_is_fragment() for upper layers to check for fragmented regions.
Use ptr_cmp() to compare generic pointers.
Show compiled VM options at startup.  Default is VMM_INVALIDATE_FREE_PAGES off.

------------------------------------------------------------------------
r16788 | rmanfredi | 2009-05-27 14:33:18 -0400 (Wed, 27 May 2009) | 2 lines

Added ptr_cmp().

------------------------------------------------------------------------
r16787 | rmanfredi | 2009-05-27 12:18:22 -0400 (Wed, 27 May 2009) | 4 lines

Minor adjustments to the cache usage policy which should have a major
impact on the long-term fragmentation of the VM space.
pmap_extend(): watch out for possible recursion through alloc_pages().

------------------------------------------------------------------------
r16786 | rmanfredi | 2009-05-26 16:12:22 -0400 (Tue, 26 May 2009) | 2 lines

Take virtual memory fragmentation avoidance to the next (lower) level.

------------------------------------------------------------------------
r16785 | rmanfredi | 2009-05-26 16:07:48 -0400 (Tue, 26 May 2009) | 2 lines

Added comment to parse_pointer().

------------------------------------------------------------------------
r16784 | rmanfredi | 2009-05-26 16:07:06 -0400 (Tue, 26 May 2009) | 2 lines

Fixed typo in log message arguments.

------------------------------------------------------------------------
r16783 | rmanfredi | 2009-05-26 16:06:22 -0400 (Tue, 26 May 2009) | 3 lines

When we're trapping a foreign exit(), act as if we were running topless to
avoid any GUI interaction, which could be fatal if the X connection was broken.

------------------------------------------------------------------------
r16782 | rmanfredi | 2009-05-24 17:29:36 -0400 (Sun, 24 May 2009) | 2 lines

Added debugging trace for coalesced regions within the same cache line.

------------------------------------------------------------------------
r16781 | cbiere | 2009-05-24 17:27:52 -0400 (Sun, 24 May 2009) | 2 lines

 * page_cache_coalesce_pages(): Reduced plus-minus-one-ing.

------------------------------------------------------------------------
r16780 | cbiere | 2009-05-24 16:38:51 -0400 (Sun, 24 May 2009) | 6 lines

 * Forgot to install audiotags tool.
 * Fixed typo.
 * Print unrecognized audio/video codec/format.
 * Skip audio duration calculation for audio formats which
   are not supported by Bitzi.

------------------------------------------------------------------------
r16779 | rmanfredi | 2009-05-24 14:04:29 -0400 (Sun, 24 May 2009) | 3 lines

Do not cache (and possibly split) large memory regions to limit fragmentation.
These are allocated and freed as a whole, on demand.

------------------------------------------------------------------------
r16778 | rmanfredi | 2009-05-24 13:20:23 -0400 (Sun, 24 May 2009) | 2 lines

More uses of halloc() over g_malloc().

------------------------------------------------------------------------
r16777 | rmanfredi | 2009-05-24 13:15:14 -0400 (Sun, 24 May 2009) | 6 lines

To avoid excessive virtual memory fragmentation, never split 128 KiB regions
(highest-order cache line) unless the kernel is unable to allocate virtual
memory any more.
Fixed off-by-one bug, hitting when a cache lines was full and we were trying
to append something at the tail of the cache.

------------------------------------------------------------------------
r16776 | bpringlemeir | 2009-05-24 11:52:16 -0400 (Sun, 24 May 2009) | 1 line

Fix comment.
------------------------------------------------------------------------
r16775 | cbiere | 2009-05-24 10:58:35 -0400 (Sun, 24 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16774 | rmanfredi | 2009-05-24 10:30:27 -0400 (Sun, 24 May 2009) | 3 lines

Prefer halloc() to g_malloc() for commonly allocated large chunks of memory
in order to fully benefit from the page cache in the VMM layer.

------------------------------------------------------------------------
r16773 | cbiere | 2009-05-24 10:30:21 -0400 (Sun, 24 May 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16772 | cbiere | 2009-05-24 09:51:15 -0400 (Sun, 24 May 2009) | 4 lines

 * Added missing unsigned long casts.
 * vpc_lookup(): Fixed undefined behavior caused by undefined pointer comparisons.
 * vpc_insert(): vpc_insert() and page_cache_insert() return nothing.

------------------------------------------------------------------------
r16771 | rmanfredi | 2009-05-24 09:35:56 -0400 (Sun, 24 May 2009) | 3 lines

Remap halloc() to g_malloc() also when TRACK_MALLOC is defined.
Added hcopy().

------------------------------------------------------------------------
r16770 | rmanfredi | 2009-05-24 08:58:40 -0400 (Sun, 24 May 2009) | 7 lines

Revisited the VMM caching layer: added region coalescing, and systematic cache
lookups (with splitting as necessary) before requesting new core from the
kernel.
Always compile halloc(), but do not remap malloc() to it unless USE_HALLOC.
Optimized hrealloc() further by avoiding reallocation if the new size, rounded
to the next page boundary, equals the old one.

------------------------------------------------------------------------
r16769 | rmanfredi | 2009-05-24 08:52:20 -0400 (Sun, 24 May 2009) | 2 lines

Added comment.

------------------------------------------------------------------------
r16768 | rmanfredi | 2009-05-24 08:49:49 -0400 (Sun, 24 May 2009) | 5 lines

Fixed oversight in commit at r16765.
Prefer sizeof(item[0]) instead of sizeof(struct ...).
zgc_subzone_free(): after 5 times the minimum subzone lifetime, free a subzone
even if it leaves no free blocks.

------------------------------------------------------------------------
r16767 | cbiere | 2009-05-24 08:41:31 -0400 (Sun, 24 May 2009) | 2 lines

 * Always check whether realloc() and malloc() returned NULL.

------------------------------------------------------------------------
r16766 | cbiere | 2009-05-24 07:46:27 -0400 (Sun, 24 May 2009) | 2 lines

 * Added cast_to_void_ptr().

------------------------------------------------------------------------
r16765 | cbiere | 2009-05-24 07:44:39 -0400 (Sun, 24 May 2009) | 4 lines

 * Fixed undefined behavior caused by undefined pointer comparisons.
 * zgc_find_subzone(), zgc_extend(): Merged duplicated code.
 * Don't cast size_t to unsigned.

------------------------------------------------------------------------
r16764 | cbiere | 2009-05-24 07:33:43 -0400 (Sun, 24 May 2009) | 2 lines

 * real_free(): Moved variable declarations to beginning of block.

------------------------------------------------------------------------
r16763 | cbiere | 2009-05-24 06:06:59 -0400 (Sun, 24 May 2009) | 3 lines

 * Replaced void pointer arithmetic with ptr_diff().
 * Memory isn't measured in Kelvin.

------------------------------------------------------------------------
r16762 | cbiere | 2009-05-23 19:39:38 -0400 (Sat, 23 May 2009) | 2 lines

 * 347 new items.

------------------------------------------------------------------------
r16761 | cbiere | 2009-05-23 17:01:40 -0400 (Sat, 23 May 2009) | 4 lines

 * socket_udp_event(): The duration of handling an UDP packet differs vastly
   between packet types. Break out of the loop after 150 ms to avoid
   monopolizing I/O for too long.

------------------------------------------------------------------------
r16760 | cbiere | 2009-05-23 12:45:50 -0400 (Sat, 23 May 2009) | 2 lines

 * 2393 new items.

------------------------------------------------------------------------
r16759 | rmanfredi | 2009-05-23 03:23:31 -0400 (Sat, 23 May 2009) | 2 lines

Yet another range.

------------------------------------------------------------------------
r16758 | cbiere | 2009-05-22 19:00:19 -0400 (Fri, 22 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16757 | cbiere | 2009-05-22 18:50:38 -0400 (Fri, 22 May 2009) | 2 lines

 * Regrouped entry.

------------------------------------------------------------------------
r16756 | rmanfredi | 2009-05-22 18:33:09 -0400 (Fri, 22 May 2009) | 2 lines

One more spammer.

------------------------------------------------------------------------
r16755 | rmanfredi | 2009-05-21 13:04:59 -0400 (Thu, 21 May 2009) | 6 lines

Tuned zone garbage collector to avoid freeing/allocating subzones when an
allocation burst followed by a free burst happen: wait at least 5 seconds
to free a subzone.
Limit the total amount of subzones we can free up during a garbage collection
cycle, and even more so when the CPU is overloaded.

------------------------------------------------------------------------
r16754 | rmanfredi | 2009-05-21 10:56:43 -0400 (Thu, 21 May 2009) | 4 lines

Prevent crash at exit time: do not check for presence in the hash table
for an explicitly freed query, as we may compare to items in the hash table
that have already been freed.

------------------------------------------------------------------------
r16753 | rmanfredi | 2009-05-21 10:51:51 -0400 (Thu, 21 May 2009) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r16752 | rmanfredi | 2009-05-20 17:52:11 -0400 (Wed, 20 May 2009) | 5 lines

Added new "zalloc_always_gc" property, TRUE by default, to make zalloc() run
with all the zones in garbage-collecting mode.  This strategy allows a smaller
memory footprint since allocation bursts are unlikely to result in subzones
we cannot collect back once the burst is over.

------------------------------------------------------------------------
r16751 | rmanfredi | 2009-05-20 17:46:20 -0400 (Wed, 20 May 2009) | 2 lines

Allow walloc() to use zalloc() for blocks up to WALLOC_MAX bytes, included.

------------------------------------------------------------------------
r16750 | rmanfredi | 2009-05-20 17:45:16 -0400 (Wed, 20 May 2009) | 2 lines

Fixed debugging message which was showing wrong (scaled) EMA values.

------------------------------------------------------------------------
r16749 | cbiere | 2009-05-20 17:03:38 -0400 (Wed, 20 May 2009) | 2 lines

 * 672 new items.

------------------------------------------------------------------------
r16748 | rmanfredi | 2009-05-19 18:00:11 -0400 (Tue, 19 May 2009) | 3 lines

round_size(): no need for MAX(n, align) when we know "n" is aligned.
round_size_fast(): removed the assertion to make it faster than round_size().

------------------------------------------------------------------------
r16747 | rmanfredi | 2009-05-19 16:40:56 -0400 (Tue, 19 May 2009) | 2 lines

Need to include "lib/palloc.h" for pgc().

------------------------------------------------------------------------
r16746 | rmanfredi | 2009-05-19 16:39:31 -0400 (Tue, 19 May 2009) | 2 lines

Fixed pool threshold computation.

------------------------------------------------------------------------
r16745 | rmanfredi | 2009-05-19 16:29:08 -0400 (Tue, 19 May 2009) | 2 lines

Fixed grammar in comment.

------------------------------------------------------------------------
r16744 | rmanfredi | 2009-05-19 16:26:03 -0400 (Tue, 19 May 2009) | 5 lines

Added "palloc_debug" and "rxbuf_debug".
Pool allocator is now capable of auto-sizing itself.  Added regular pgc() calls
to garbage collect the pools.
Allocate RX buffers via vmm_alloc().

------------------------------------------------------------------------
r16743 | rmanfredi | 2009-05-19 16:23:16 -0400 (Tue, 19 May 2009) | 3 lines

Forgot to clear magic.
Make sure the magic number is at the beginning of the structure.

------------------------------------------------------------------------
r16742 | rmanfredi | 2009-05-19 16:22:25 -0400 (Tue, 19 May 2009) | 2 lines

Use round_size_fast() when alignment is known to be a power of 2.

------------------------------------------------------------------------
r16741 | rmanfredi | 2009-05-19 16:21:52 -0400 (Tue, 19 May 2009) | 2 lines

Added round_size_fast().

------------------------------------------------------------------------
r16740 | rmanfredi | 2009-05-19 16:21:07 -0400 (Tue, 19 May 2009) | 2 lines

Use walloc() instead of g_malloc() for creating the message.

------------------------------------------------------------------------
r16739 | rmanfredi | 2009-05-19 16:19:58 -0400 (Tue, 19 May 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r16738 | rmanfredi | 2009-05-19 16:19:26 -0400 (Tue, 19 May 2009) | 3 lines

Avoid crashes at shutdown time: do not ever try to run mq_check() when the
queue is marked with MQ_CLEAR or MQ_DISCARD.  Drop messages immediately.

------------------------------------------------------------------------
r16737 | rmanfredi | 2009-05-19 16:18:02 -0400 (Tue, 19 May 2009) | 2 lines

Root contacts now use a KUID atom instead of an expanded one.

------------------------------------------------------------------------
r16736 | rmanfredi | 2009-05-19 16:17:18 -0400 (Tue, 19 May 2009) | 2 lines

Track subzone lifetime and trace it during garbage collection.

------------------------------------------------------------------------
r16735 | rmanfredi | 2009-05-19 16:13:27 -0400 (Tue, 19 May 2009) | 6 lines

Creation of a DBMW now requires an extra parameter: the maximum size of the
serialized value.  This allows to specify the size of the structure containing
the value and the size of the serialized data separately and allows for
dynamic allocation of data during deserialization.
Root contacts now use a KUID atom instead of an expanded one.

------------------------------------------------------------------------
r16734 | cbiere | 2009-05-19 14:16:38 -0400 (Tue, 19 May 2009) | 2 lines

 * 744 new items.

------------------------------------------------------------------------
r16733 | rmanfredi | 2009-05-17 12:56:31 -0400 (Sun, 17 May 2009) | 2 lines

When debugging, log malformed URN requests and bad Range headers.

------------------------------------------------------------------------
r16732 | rmanfredi | 2009-05-17 12:55:22 -0400 (Sun, 17 May 2009) | 2 lines

Fixed broken X-Available parsing.

------------------------------------------------------------------------
r16731 | rmanfredi | 2009-05-15 16:04:51 -0400 (Fri, 15 May 2009) | 3 lines

wrealloc(): because we have fewer zones now, it pays to see whether we need to
do anything or whether the new size would fall in the same zone as the old one.

------------------------------------------------------------------------
r16730 | rmanfredi | 2009-05-15 16:02:11 -0400 (Fri, 15 May 2009) | 9 lines

Tuned zone garbage collector: wait 90 seconds instead of 30 to decide whether
a zone is oversized to avoid reacting to frequent bursts.
All subzones are now allocated via VM pages, and max subzone size is now 32 KiB.
Tuned block size to avoid wasting too much bytes in zones, adjusting the hint
accordingly.  This also lowers the amount of distinct zones that will be used
by walloc() and helps reducing the memory footprint (less overhead and waste).
Never change the hint of an already allocated zone, the garbage collector
expects this to be set once and be constant throughout all the subzones.

------------------------------------------------------------------------
r16729 | rmanfredi | 2009-05-15 15:56:32 -0400 (Fri, 15 May 2009) | 2 lines

Always call zgc() when idle, regardless of whether CPU is overloaded.

------------------------------------------------------------------------
r16728 | cbiere | 2009-05-14 17:07:51 -0400 (Thu, 14 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16727 | rmanfredi | 2009-05-14 12:37:01 -0400 (Thu, 14 May 2009) | 5 lines

Renamed alloc_pages() as vmm_alloc() and free_pages() as vmm_free() so that
they are consistent with the other *alloc() and *free() routines.  Also
the name ending with _pages() could mislead on the unit of the size parameter,
which is in bytes, not in pages.

------------------------------------------------------------------------
r16726 | rmanfredi | 2009-05-13 19:01:53 -0400 (Wed, 13 May 2009) | 8 lines

Added long-due zone garbage collector, called when gtk-gnutella is "idle".
zn_cram(): was not recording last block in arenas!
subzone_alloc_arena(): always ask for a page size multiple.
New property "zalloc_debug" to monitor the zone garbage collector activity.
Added zclose() to forcefully free still referenced zones.
With ZONE_SAFE, the block's zone is also remembered to be able to track zfree()
calls made on the wrong zone.

------------------------------------------------------------------------
r16725 | rmanfredi | 2009-05-13 18:56:08 -0400 (Wed, 13 May 2009) | 3 lines

Fixed too long a line.
Added comment.

------------------------------------------------------------------------
r16724 | rmanfredi | 2009-05-13 18:55:40 -0400 (Wed, 13 May 2009) | 4 lines

When the UDP queue is clogged, the RPC can timeout but the message can still
be stuck in the UDP queue.  Detect that and delay iterating since we need
the message block to be un-referenced before we can continue.

------------------------------------------------------------------------
r16723 | cbiere | 2009-05-13 18:32:54 -0400 (Wed, 13 May 2009) | 2 lines

 * 1559 new items.

------------------------------------------------------------------------
r16722 | cbiere | 2009-05-12 22:57:09 -0400 (Tue, 12 May 2009) | 4 lines

 * file_info_get(): Attempt to fix bug. If there's a size mismatch
   and the size is known, we must not continue and not resize
   the file.

------------------------------------------------------------------------
r16721 | cbiere | 2009-05-11 18:39:34 -0400 (Mon, 11 May 2009) | 3 lines

 * Renamed function for better grepability and semantics.
 * Wrapped overlong line.

------------------------------------------------------------------------
r16720 | cbiere | 2009-05-11 18:13:11 -0400 (Mon, 11 May 2009) | 4 lines

 * Don't refuse to start if the download directory is already locked.
 * Added settings_is_unique_instance() to get rid of "check_only"
   in interface which should never be TRUE for external callers anyway.

------------------------------------------------------------------------
r16719 | cbiere | 2009-05-11 18:02:22 -0400 (Mon, 11 May 2009) | 2 lines

 * Handle missing directory path gracefully.

------------------------------------------------------------------------
r16718 | cbiere | 2009-05-11 17:56:50 -0400 (Mon, 11 May 2009) | 3 lines

 * Changed definition of N_() when NLS is enabled, too, to avoid
   pedantic compiler warnings.

------------------------------------------------------------------------
r16717 | cbiere | 2009-05-11 17:26:49 -0400 (Mon, 11 May 2009) | 2 lines

 * prop_save_to_file(): Store a string with value NULL as empty string.

------------------------------------------------------------------------
r16716 | rmanfredi | 2009-05-11 16:26:40 -0400 (Mon, 11 May 2009) | 3 lines

Avoid duplicate callback definitions for "save_file_path" updates.
save_file_path_changed(): avoid truncating path.

------------------------------------------------------------------------
r16715 | cbiere | 2009-05-11 12:45:47 -0400 (Mon, 11 May 2009) | 7 lines

 * prop_set_string(): Fixed multiple bugs:
   * If the new value was NULL, the memory was released but the
     pointer not updated.
   * The new value must be copied before releasing the old
     because "old" could be the current pointer.
   * NULL must not be passed to printf().

------------------------------------------------------------------------
r16714 | cbiere | 2009-05-10 22:18:23 -0400 (Sun, 10 May 2009) | 2 lines

 * Changed defintion of N_() macro to avoid a pedantic GCC warning.

------------------------------------------------------------------------
r16713 | cbiere | 2009-05-10 20:29:20 -0400 (Sun, 10 May 2009) | 2 lines

 * 929 new items.

------------------------------------------------------------------------
r16712 | cbiere | 2009-05-10 20:19:33 -0400 (Sun, 10 May 2009) | 2 lines

 * file_info_scandir(): Take even more advantage of dir_entry_mode().

------------------------------------------------------------------------
r16711 | cbiere | 2009-05-10 19:38:31 -0400 (Sun, 10 May 2009) | 5 lines

 * Moved dir_entry_mode() to misc.h and added more file types.
 * recursive_scan_dir(): Skip over all unsupported file types right away.
 * file_info_scandir(): Skip hidden files (filenames starting with a dot)
   and take advantage of dir_entry_mode().

------------------------------------------------------------------------
r16710 | rmanfredi | 2009-05-10 17:03:40 -0400 (Sun, 10 May 2009) | 2 lines

Adjusted debugging levels.

------------------------------------------------------------------------
r16709 | rmanfredi | 2009-05-10 15:55:45 -0400 (Sun, 10 May 2009) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r16708 | rmanfredi | 2009-05-10 14:00:23 -0400 (Sun, 10 May 2009) | 5 lines

When calling clock_update(), be sure to use d->socket->addr and not the
download_addr(d) value, which refers to the server's key structure (i.e. the
address by which we know the server), not the address of the connection.
The former can be invalid whilst the latter cannot.

------------------------------------------------------------------------
r16707 | rmanfredi | 2009-05-10 13:33:49 -0400 (Sun, 10 May 2009) | 5 lines

download_has_enough_active_sources(): as correctly pointed out by Lloyd Bryant,
we must also account for the actively queued sources there.  Note that the
max amount of sources per file can only be a hint, as it is not possible to
know the fate of passively queued sources (may become active at any time).

------------------------------------------------------------------------
r16706 | cbiere | 2009-05-10 11:45:25 -0400 (Sun, 10 May 2009) | 2 lines

 * Code clean-ups.

------------------------------------------------------------------------
r16705 | rmanfredi | 2009-05-10 03:11:57 -0400 (Sun, 10 May 2009) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r16704 | cbiere | 2009-05-09 20:57:47 -0400 (Sat, 09 May 2009) | 2 lines

 * 768 new items.

------------------------------------------------------------------------
r16703 | rmanfredi | 2009-05-09 15:48:40 -0400 (Sat, 09 May 2009) | 6 lines

Protect the "incomplete" save directory with a lock to prevent two instances
of gtk-gnutella from using the same one.  Indeed, since we do not protect
accesses to the incomplete files with a lock, having two processes happily
update the files could lead to data loss or other undefined / unexpected
behaviour.

------------------------------------------------------------------------
r16702 | rmanfredi | 2009-05-09 15:46:47 -0400 (Sat, 09 May 2009) | 3 lines

When calling spam_sha1_add() externally, must be careful to use the proper
SDBM encapsulation, which depends on the state.

------------------------------------------------------------------------
r16701 | rmanfredi | 2009-05-09 15:45:28 -0400 (Sat, 09 May 2009) | 3 lines

storage_delete(): no use for the "base" parameter now that the dbmap layer
takes care of unlinking SDBM files, provided the map was flagged as volatile.

------------------------------------------------------------------------
r16700 | rmanfredi | 2009-05-09 15:43:24 -0400 (Sat, 09 May 2009) | 2 lines

Added "lockfile_debug".

------------------------------------------------------------------------
r16699 | rmanfredi | 2009-05-09 15:42:35 -0400 (Sat, 09 May 2009) | 2 lines

Moved MAX_PATH_LEN definition from lib/malloc.c to common.h.

------------------------------------------------------------------------
r16698 | cbiere | 2009-05-09 14:07:30 -0400 (Sat, 09 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16697 | cbiere | 2009-05-08 21:44:06 -0400 (Fri, 08 May 2009) | 2 lines

 * 2245 new items.

------------------------------------------------------------------------
r16696 | rmanfredi | 2009-05-08 09:29:19 -0400 (Fri, 08 May 2009) | 2 lines

Signature of "handling_rpc" callbacks have change to include the replying node.

------------------------------------------------------------------------
r16695 | rmanfredi | 2009-05-08 09:25:52 -0400 (Fri, 08 May 2009) | 5 lines

Handle cases where the IP:port of a node changes, but not its KUID: whenever
we learn about a new IP:port for a node within a lookup and we get no answer
from the old address, try the new one.
Included "hack alert" on new field placement within structure!

------------------------------------------------------------------------
r16694 | rmanfredi | 2009-05-08 09:22:28 -0400 (Fri, 08 May 2009) | 2 lines

Increase the size of the DBMW cache from default (128 items) to 512.

------------------------------------------------------------------------
r16693 | rmanfredi | 2009-05-08 09:21:50 -0400 (Fri, 08 May 2009) | 2 lines

Forgot to reset the magic when freeing an ulq_item.

------------------------------------------------------------------------
r16692 | rmanfredi | 2009-05-08 09:21:00 -0400 (Fri, 08 May 2009) | 4 lines

knode_check(): also check the refcount.
knode_dispose(): can no longer use knode_check() since we're called when
nobody references the node.

------------------------------------------------------------------------
r16691 | rmanfredi | 2009-05-07 19:44:56 -0400 (Thu, 07 May 2009) | 3 lines

When retrieving previous contacts from persisted database, make sure to spot
and clean orphaned contacts, otherwise the database could grow without limits.

------------------------------------------------------------------------
r16690 | rmanfredi | 2009-05-07 18:21:46 -0400 (Thu, 07 May 2009) | 4 lines

When we know we got an unsolicited PING message, tell the firewall detection
logic that we did!
Remove obsolete legacy printf() debugging statements, replaced by g_message().

------------------------------------------------------------------------
r16689 | cbiere | 2009-05-07 17:50:42 -0400 (Thu, 07 May 2009) | 2 lines

 * option_match(): Didn't like how the pointer moves beyond the NUL of b.

------------------------------------------------------------------------
r16688 | rmanfredi | 2009-05-07 17:18:15 -0400 (Thu, 07 May 2009) | 6 lines

Re-ordered initialization order a bit.
Separate option parsing (collecting them) from option processing (acting on
them) to allow early logfile opening before malloc_init() and atoms_init()
are called, so that malloc and atoms settings can be logged in files instead
of just stderr.

------------------------------------------------------------------------
r16687 | rmanfredi | 2009-05-07 15:28:22 -0400 (Thu, 07 May 2009) | 3 lines

Force checks for unsolicited incoming UDP traffic immediately when the
listening port changes.

------------------------------------------------------------------------
r16686 | rmanfredi | 2009-05-07 10:56:48 -0400 (Thu, 07 May 2009) | 6 lines

Dissociate internal malloc settings from TRACK_MALLOC.
Added MALLOC_PERIODIC to regularily check consistency of malloc'ed blocks.
Let malloc and atoms settings be logged at startup, so that it is known
what the setup was for a particular run.  Whenver such settings are active,
we are debugging anyway, so this logging is unconditional.

------------------------------------------------------------------------
r16685 | cbiere | 2009-05-07 08:22:17 -0400 (Thu, 07 May 2009) | 2 lines

 * Added assertion to prevent insane ARENA_OFFSET definitions.

------------------------------------------------------------------------
r16684 | cbiere | 2009-05-07 07:51:20 -0400 (Thu, 07 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16683 | rmanfredi | 2009-05-07 03:06:57 -0400 (Thu, 07 May 2009) | 2 lines

Fixed second part of ARENA_OFFSET computation.

------------------------------------------------------------------------
r16682 | rmanfredi | 2009-05-07 03:04:33 -0400 (Thu, 07 May 2009) | 2 lines

Fixed wrong ARENA_OFFSET computation.

------------------------------------------------------------------------
r16681 | cbiere | 2009-05-06 13:27:50 -0400 (Wed, 06 May 2009) | 3 lines

 * struct atom: Moved refcnt to reduce internal structure alignment padding
   on 64-bit archs (even if it just matters when testing).

------------------------------------------------------------------------
r16680 | rmanfredi | 2009-05-06 12:53:43 -0400 (Wed, 06 May 2009) | 3 lines

Magic number must be put at the start of the structure.
Fixed too long a line.

------------------------------------------------------------------------
r16679 | rmanfredi | 2009-05-06 12:52:55 -0400 (Wed, 06 May 2009) | 2 lines

Introducing KUID_HEX_BUFLEN.

------------------------------------------------------------------------
r16678 | cbiere | 2009-05-06 10:08:05 -0400 (Wed, 06 May 2009) | 2 lines

 * Added macro FOURCC_NATIVE().

------------------------------------------------------------------------
r16677 | cbiere | 2009-05-06 09:42:37 -0400 (Wed, 06 May 2009) | 3 lines

 * struct knode: Moved refcnt to reduce internal structure alignment padding
   on 64-bit archs.

------------------------------------------------------------------------
r16676 | rmanfredi | 2009-05-05 20:06:15 -0400 (Tue, 05 May 2009) | 4 lines

dht_rpc_answer(): use the node that was given to us at RPC creation time
instead of the node replying: they may be different instances if one is in
the routing table and the other is not.

------------------------------------------------------------------------
r16675 | rmanfredi | 2009-05-05 20:00:51 -0400 (Tue, 05 May 2009) | 7 lines

Added more options for malloc() tracking / debugging.
Allow glib's vtable to be optionally used to complement tracking for things
we would otherwise never see (a block given to GTK and freed there, for
instance).
Optimized GString tracking to avoid huge bookkeeping activities each time
a character is appended to it.

------------------------------------------------------------------------
r16674 | rmanfredi | 2009-05-05 19:49:32 -0400 (Tue, 05 May 2009) | 3 lines

Avoid using kuid_to_hex_string2() from knode_to_string().
Forgot to reset the magic number when destroying.

------------------------------------------------------------------------
r16673 | rmanfredi | 2009-05-05 19:48:09 -0400 (Tue, 05 May 2009) | 5 lines

Added "spam_debug" and "spam_lut_in_memory" variables.
When "spam_lut_in_memory" is true, the spam_sha1.txt file is not loaded in
memory but to an SDBM database to reduce the memory pressure, at the price
of doing more disk I/Os (but caching helps to keep that mostly unnoticeable).

------------------------------------------------------------------------
r16672 | cbiere | 2009-05-05 19:39:20 -0400 (Tue, 05 May 2009) | 2 lines

 * 661 new items.

------------------------------------------------------------------------
r16671 | rmanfredi | 2009-05-05 19:30:49 -0400 (Tue, 05 May 2009) | 3 lines

Added knode_refcnt_dec() to be used instead of knode_free() when we want
to emphasize the fact that we do not expect the final reference to be cut.

------------------------------------------------------------------------
r16670 | rmanfredi | 2009-05-05 19:28:38 -0400 (Tue, 05 May 2009) | 2 lines

Increase default amount of cached SDBM pages for the "root contacts" database.

------------------------------------------------------------------------
r16669 | rmanfredi | 2009-05-05 19:26:30 -0400 (Tue, 05 May 2009) | 2 lines

Added hash_table_replace().

------------------------------------------------------------------------
r16668 | rmanfredi | 2009-05-05 18:36:51 -0400 (Tue, 05 May 2009) | 4 lines

Added optional magic numbers to internal data structures, enabled when
PATRICIA_MEMCHECK is defined.
Forgot to reset the magic number when the PATRICIA tree was destroyed.

------------------------------------------------------------------------
r16667 | rmanfredi | 2009-05-05 18:33:54 -0400 (Tue, 05 May 2009) | 2 lines

Added magic numbers.

------------------------------------------------------------------------
r16666 | rmanfredi | 2009-05-05 14:27:04 -0400 (Tue, 05 May 2009) | 2 lines

Regroup enums together at the beginning of the structure to minimize gaps.

------------------------------------------------------------------------
r16665 | cbiere | 2009-05-05 13:06:03 -0400 (Tue, 05 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16664 | cbiere | 2009-05-05 04:39:55 -0400 (Tue, 05 May 2009) | 2 lines

 * Fixed atom arena alignment again.

------------------------------------------------------------------------
r16663 | cbiere | 2009-05-05 02:09:42 -0400 (Tue, 05 May 2009) | 2 lines

 * Removed unnecessary ZALLOC_ALIGNBITS.

------------------------------------------------------------------------
r16662 | cbiere | 2009-05-04 19:43:53 -0400 (Mon, 04 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16661 | rmanfredi | 2009-05-04 19:09:29 -0400 (Mon, 04 May 2009) | 2 lines

Made map_remove() return a boolean indication of whether key was found.

------------------------------------------------------------------------
r16660 | rmanfredi | 2009-05-04 19:08:24 -0400 (Mon, 04 May 2009) | 2 lines

Added magic numbers.

------------------------------------------------------------------------
r16659 | cbiere | 2009-05-04 15:09:55 -0400 (Mon, 04 May 2009) | 2 lines

 *Ü1195 new items.

------------------------------------------------------------------------
r16658 | rmanfredi | 2009-05-03 18:50:06 -0400 (Sun, 03 May 2009) | 2 lines

Added magic number.

------------------------------------------------------------------------
r16657 | rmanfredi | 2009-05-03 18:39:33 -0400 (Sun, 03 May 2009) | 2 lines

Made sure SDBM compiles cleanly when LRU is not defined.

------------------------------------------------------------------------
r16656 | rmanfredi | 2009-05-03 17:59:57 -0400 (Sun, 03 May 2009) | 2 lines

As a precaution, also reset db->pagbuf to NULL when resizing the cache.

------------------------------------------------------------------------
r16655 | rmanfredi | 2009-05-03 08:43:54 -0400 (Sun, 03 May 2009) | 3 lines

storage_delete(): no longer necessary to unlink SDBM files as the DB map
reclaims them provided it was flagged as volatile.

------------------------------------------------------------------------
r16654 | rmanfredi | 2009-05-03 08:42:25 -0400 (Sun, 03 May 2009) | 3 lines

Save the SDBM path to be able to automatically unlink the DB files at close
time if the map was marked volatile.

------------------------------------------------------------------------
r16653 | rmanfredi | 2009-05-03 08:40:56 -0400 (Sun, 03 May 2009) | 3 lines

sdbm_sync(): forgot to flush possibly dirty dir buffer.
sdbm_close(): if database is non-volatile, also flush dirty dir buffer.

------------------------------------------------------------------------
r16652 | rmanfredi | 2009-05-03 08:39:27 -0400 (Sun, 03 May 2009) | 2 lines

Show which database is loaded.

------------------------------------------------------------------------
r16651 | rmanfredi | 2009-05-03 07:26:14 -0400 (Sun, 03 May 2009) | 2 lines

Reset LRU cache stats when the cache size is changed.

------------------------------------------------------------------------
r16650 | rmanfredi | 2009-05-03 07:22:15 -0400 (Sun, 03 May 2009) | 2 lines

Always use exact time when logging.

------------------------------------------------------------------------
r16649 | rmanfredi | 2009-05-03 05:56:24 -0400 (Sun, 03 May 2009) | 2 lines

Optimized seepair() slightly.

------------------------------------------------------------------------
r16648 | rmanfredi | 2009-05-03 05:30:59 -0400 (Sun, 03 May 2009) | 3 lines

Added magic number to dbmap_t.
Allow the {NULL, 0} value to be stored in a memory map.

------------------------------------------------------------------------
r16647 | rmanfredi | 2009-05-03 05:29:08 -0400 (Sun, 03 May 2009) | 3 lines

Added magic number to dbmw_t.
Added dbmw_set_map_cache().

------------------------------------------------------------------------
r16646 | cbiere | 2009-05-03 04:03:35 -0400 (Sun, 03 May 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16645 | rmanfredi | 2009-05-03 03:39:37 -0400 (Sun, 03 May 2009) | 7 lines

Renamed flush_dirty() as flush_dirtypag() to avoid tags collision.
flush_dirtypag(): do not iterate past cache->next, in case the cache pages were
not fully used.
Added cachepag() to add a memory-held split page to the cache.  This is used
for volatile databases to avoid committing the twin page to disk immediately.
Added some assertions to avoid negative page numbers.

------------------------------------------------------------------------
r16644 | cbiere | 2009-05-03 01:49:15 -0400 (Sun, 03 May 2009) | 3 lines

 * Fixed bug: --import skipped over judgement and explanation.
 * Added some format/codec combinations.

------------------------------------------------------------------------
r16643 | cbiere | 2009-05-02 21:00:37 -0400 (Sat, 02 May 2009) | 2 lines

 * Added FIXME regarding crawler pongs vs. IPv6.

------------------------------------------------------------------------
r16642 | cbiere | 2009-05-02 19:56:55 -0400 (Sat, 02 May 2009) | 2 lines

 * Use MEM_ALIGNBYTES so that long double is taken into account.

------------------------------------------------------------------------
r16641 | rmanfredi | 2009-05-02 18:32:52 -0400 (Sat, 02 May 2009) | 2 lines

Commented address range that is already encompassed by another one below.

------------------------------------------------------------------------
r16640 | rmanfredi | 2009-05-02 18:29:04 -0400 (Sat, 02 May 2009) | 5 lines

On cache size changes, the current page number must be invalidated since the
cached page addresses are going to change.  This will force a refresh of
the page address, and possibly a reload from disk if the page is no longer
in the cache after resizing.

------------------------------------------------------------------------
r16639 | rmanfredi | 2009-05-02 17:04:10 -0400 (Sat, 02 May 2009) | 2 lines

For volatile databases, we can also defer writes of the current dir buffer.

------------------------------------------------------------------------
r16638 | cbiere | 2009-05-02 17:02:33 -0400 (Sat, 02 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16637 | rmanfredi | 2009-05-02 13:47:27 -0400 (Sat, 02 May 2009) | 4 lines

Since the root contacts around a KUID target is a persistent DB, we sync it
explicitly every minute to avoid losing too much information in the advent
of a crash.

------------------------------------------------------------------------
r16636 | rmanfredi | 2009-05-02 13:45:03 -0400 (Sat, 02 May 2009) | 4 lines

Configure deferred writes on the SDBM back-end.
When a database is recreated each time, mark it as volatile to avoid needless
disk writes.

------------------------------------------------------------------------
r16635 | rmanfredi | 2009-05-02 13:43:36 -0400 (Sat, 02 May 2009) | 4 lines

Extended dbmw_sync() to be able to flush independely the DBMW cache and the
underlying SDBM database, if needed.  Now returns the amount of data sync'ed.
Added dbmw_set_volatile().

------------------------------------------------------------------------
r16634 | rmanfredi | 2009-05-02 13:41:40 -0400 (Sat, 02 May 2009) | 3 lines

Added dbmap_sync(), dbmap_set_cachesize(), dbmap_set_deferred_writes() and
dbmap_set_volatile().

------------------------------------------------------------------------
r16633 | rmanfredi | 2009-05-02 13:40:08 -0400 (Sat, 02 May 2009) | 4 lines

Added cache / deferred write configuration from userland.
Even with deferred writes enabled, flush the outcome of page splits to disk
to avoid inconsistencies, unless the database is marked as volatile.

------------------------------------------------------------------------
r16632 | cbiere | 2009-05-02 12:33:53 -0400 (Sat, 02 May 2009) | 3 lines

 * Stabilize sorting of results to prevent shuffling of order of logically
   equivalent items each time a result is added/removed/downloaded.

------------------------------------------------------------------------
r16631 | cbiere | 2009-05-02 11:31:35 -0400 (Sat, 02 May 2009) | 2 lines

 * Get rid of this %lf nonsense.

------------------------------------------------------------------------
r16630 | cbiere | 2009-05-02 11:00:03 -0400 (Sat, 02 May 2009) | 7 lines

 * Splitted search_check_results_set() into search_results_set_flag_records()
   and search_results_set_auto_download() because results weren't flagged
   as spam or owned under some circumstances.
 * search_results_check_alt_locs():
   * Avoid signed int like the swine flu.
   * Moved to avoid additional prototype.

------------------------------------------------------------------------
r16629 | rmanfredi | 2009-05-02 03:35:56 -0400 (Sat, 02 May 2009) | 2 lines

Realigned comments.

------------------------------------------------------------------------
r16628 | cbiere | 2009-05-02 00:38:56 -0400 (Sat, 02 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16627 | cbiere | 2009-05-02 00:31:22 -0400 (Sat, 02 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16626 | cbiere | 2009-05-02 00:07:28 -0400 (Sat, 02 May 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16625 | cbiere | 2009-05-01 22:16:30 -0400 (Fri, 01 May 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16624 | rmanfredi | 2009-05-01 18:42:45 -0400 (Fri, 01 May 2009) | 2 lines

New sdbm files.

------------------------------------------------------------------------
r16623 | rmanfredi | 2009-05-01 18:42:10 -0400 (Fri, 01 May 2009) | 3 lines

Added LRU cache, with write-back support, to limit the amount of read/write
system calls.  Currently hardwired to 64 pages, with deferred writes.

------------------------------------------------------------------------
r16622 | rmanfredi | 2009-05-01 18:38:16 -0400 (Fri, 01 May 2009) | 2 lines

Log message enhancement.

------------------------------------------------------------------------
r16621 | cbiere | 2009-05-01 16:59:31 -0400 (Fri, 01 May 2009) | 2 lines

 * 1034 new items.

------------------------------------------------------------------------
r16620 | rmanfredi | 2009-05-01 16:18:17 -0400 (Fri, 01 May 2009) | 2 lines

Show statistics only when "lib_stats" allows.

------------------------------------------------------------------------
r16619 | rmanfredi | 2009-05-01 16:04:18 -0400 (Fri, 01 May 2009) | 4 lines

Added "lib_stats" to control the amount of runtime statistics that library
code should emit, to decouple that from "lib_debug", the debug level:
one may wish to see stats logged but not otherwise care about debugging.

------------------------------------------------------------------------
r16618 | rmanfredi | 2009-05-01 15:50:08 -0400 (Fri, 01 May 2009) | 4 lines

Modified dba's output to show the space used by keys and values, and to
highlight pages with low free space (unable to add a new key/value pair,
given the average size of the existing entries on the page).

------------------------------------------------------------------------
r16617 | rmanfredi | 2009-05-01 15:46:53 -0400 (Fri, 01 May 2009) | 2 lines

Propagated enhancements made to chkpage() into okpage().

------------------------------------------------------------------------
r16616 | rmanfredi | 2009-04-30 17:18:48 -0400 (Thu, 30 Apr 2009) | 2 lines

More debugging logs.

------------------------------------------------------------------------
r16615 | rmanfredi | 2009-04-30 17:16:52 -0400 (Thu, 30 Apr 2009) | 3 lines

Clear corrupted pages: there's nothing we can do to recover the data anyway,
and we can keep operating that way (with forever lost data).

------------------------------------------------------------------------
r16614 | rmanfredi | 2009-04-30 17:14:47 -0400 (Thu, 30 Apr 2009) | 2 lines

dbmap_foreach_remove(): fixed memory leak when removing data from a map.

------------------------------------------------------------------------
r16613 | rmanfredi | 2009-04-30 16:47:31 -0400 (Thu, 30 Apr 2009) | 3 lines

dbmap_foreach_remove(): update count after iterating on the memory map, in
case some values were removed during iteration.

------------------------------------------------------------------------
r16612 | rmanfredi | 2009-04-30 13:26:44 -0400 (Thu, 30 Apr 2009) | 8 lines

Tuned node lookups to move from a "loose parallelism" mode to a "bounded
parallelism" when we approach the amount of nodes we want.
Cache the results from value lookups to the closest node in the path that
did not return the value.
Cache k-closest root nodes found during a value lookup and seed the shortlist
from the cache, in order to accelerate lookups, limit the amount of
queried nodes, the bandwidth used for lookups, and optimize the lookup time.

------------------------------------------------------------------------
r16611 | rmanfredi | 2009-04-30 13:23:04 -0400 (Thu, 30 Apr 2009) | 4 lines

Added key offloading logic.
No longer crash (on assertion failure) when an I/O error from SDBM occurs:
instead we silently ignore the error and abort the operation.

------------------------------------------------------------------------
r16610 | rmanfredi | 2009-04-30 13:21:18 -0400 (Thu, 30 Apr 2009) | 4 lines

Added publishing for:
- caching values we found.
- offloading keys to a newly discovered k-closest neighbour.

------------------------------------------------------------------------
r16609 | rmanfredi | 2009-04-30 13:17:07 -0400 (Thu, 30 Apr 2009) | 3 lines

Initialize the root node cache.
Request key offloading when we add a new k-closest node to our routing table.

------------------------------------------------------------------------
r16608 | rmanfredi | 2009-04-30 13:15:13 -0400 (Thu, 30 Apr 2009) | 4 lines

Added kmsg_build_store() to build STORE messages.
When we're flow-controlled or nearing that condition, answer FIND_NODE
requests for our node ID without sending any contact, only our security token.

------------------------------------------------------------------------
r16607 | rmanfredi | 2009-04-30 13:12:16 -0400 (Thu, 30 Apr 2009) | 4 lines

Renamed store_error_to_string() as dht_store_error_to_string().
No longer crash (on assertion failure) when an I/O error from SDBM occurs:
instead we silently ignore the error and abort the operation.

------------------------------------------------------------------------
r16606 | rmanfredi | 2009-04-30 13:10:19 -0400 (Thu, 30 Apr 2009) | 2 lines

Moved DHT STORE error code from "storage.h" to "if/dht/value.h".

------------------------------------------------------------------------
r16605 | rmanfredi | 2009-04-30 13:08:16 -0400 (Thu, 30 Apr 2009) | 2 lines

More lookup error codes.

------------------------------------------------------------------------
r16604 | rmanfredi | 2009-04-30 13:07:06 -0400 (Thu, 30 Apr 2009) | 2 lines

Regnerated.

------------------------------------------------------------------------
r16603 | rmanfredi | 2009-04-30 13:05:53 -0400 (Thu, 30 Apr 2009) | 2 lines

Added root node caching (k-closest nodes of a target KUID).

------------------------------------------------------------------------
r16602 | rmanfredi | 2009-04-30 13:03:28 -0400 (Thu, 30 Apr 2009) | 2 lines

A Kademlia node can now be flagged as being "cached".

------------------------------------------------------------------------
r16601 | rmanfredi | 2009-04-30 13:01:52 -0400 (Thu, 30 Apr 2009) | 3 lines

kademlia_header_end(): take a generic pointer as argument, it's way more
convenient as type safety is irrelevant here.

------------------------------------------------------------------------
r16600 | rmanfredi | 2009-04-30 13:00:43 -0400 (Thu, 30 Apr 2009) | 2 lines

Added "dht_roots_debug".

------------------------------------------------------------------------
r16599 | rmanfredi | 2009-04-30 12:58:55 -0400 (Thu, 30 Apr 2009) | 3 lines

Added some more DHT statistics about cached root targets, value caching and
key offloading.

------------------------------------------------------------------------
r16598 | rmanfredi | 2009-04-30 12:56:05 -0400 (Thu, 30 Apr 2009) | 4 lines

Added dbmw_foreach() and dbmw_foreach_remove() iterators.
Added dbmw_store() to persist a wrapped map.
Added dbmw_copy() to copy key/value pairs from a wrapped DB map into another.

------------------------------------------------------------------------
r16597 | rmanfredi | 2009-04-30 12:53:24 -0400 (Thu, 30 Apr 2009) | 4 lines

Added dbmap_foreach() and dbmap_foreach_remove() iterators.
Added dbmap_store() to persist a DB map to SDBM, or freeze an SDBM file.
Added dbmap_copy() to copy key/values from a map into another.

------------------------------------------------------------------------
r16596 | rmanfredi | 2009-04-30 12:50:53 -0400 (Thu, 30 Apr 2009) | 2 lines

Added pmsg_free_null().

------------------------------------------------------------------------
r16595 | rmanfredi | 2009-04-30 12:48:11 -0400 (Thu, 30 Apr 2009) | 2 lines

Added hash_list_clear().

------------------------------------------------------------------------
r16594 | rmanfredi | 2009-04-30 12:47:34 -0400 (Thu, 30 Apr 2009) | 2 lines

Added bstr_read_be64().

------------------------------------------------------------------------
r16593 | rmanfredi | 2009-04-30 12:45:20 -0400 (Thu, 30 Apr 2009) | 2 lines

Realigned comments.

------------------------------------------------------------------------
r16592 | rmanfredi | 2009-04-30 12:43:05 -0400 (Thu, 30 Apr 2009) | 2 lines

chkpage(): make sure no key/data offset points to the ino[] zone of the page.

------------------------------------------------------------------------
r16591 | rmanfredi | 2009-04-30 12:40:42 -0400 (Thu, 30 Apr 2009) | 2 lines

Random code cleanup.

------------------------------------------------------------------------
r16590 | cbiere | 2009-04-29 19:06:09 -0400 (Wed, 29 Apr 2009) | 3 lines

 * Allow more characters in the authentication cookie.
 * Added support for some codec/format combinations.

------------------------------------------------------------------------
r16589 | rmanfredi | 2009-04-29 18:20:20 -0400 (Wed, 29 Apr 2009) | 4 lines

sdbm_deletekey(): once key is deleted, decrease db->keyptr before attempting
to flush the page to disk: even if we fail, we have deleted the key anyway,
so this preserves the most consistent internal state.

------------------------------------------------------------------------
r16588 | rmanfredi | 2009-04-29 18:02:07 -0400 (Wed, 29 Apr 2009) | 13 lines

* Factorized page reading and flushing into fetch_pagbuf() and flush_pagbuf().
* All functions returning a boolean had their return type changed from int
  to gboolean to make that explicit.  Constants TRUE and FALSE replace 1 and 0.
* Protected getnext() against DB modifications during the key traversal. This
  is forbidden and will now trigger an assertion failure.
* Fixed chkpage() to ensure ino[0] is always an even number.
* Added sdbm_deletekey() to delete the current key during traversals.
* Added getnval() to get the n-th value from current page and sdbm_value() to
  return the current value during key iteration.
* Added sdbm_set_name() and sdbm_name(), for logging purposes.
* Call g_warning() unconditionally on low-level I/O errors to leave a trail
  when things start to go wrong.

------------------------------------------------------------------------
r16587 | rmanfredi | 2009-04-29 17:56:53 -0400 (Wed, 29 Apr 2009) | 5 lines

Only cache expired keys that fall within our k-ball.  Anything outside is
just cached data and their expiring must not be remembered because the
creator will likely never publish anything at our node (since we're outside
the k-closest neighbours for the key).

------------------------------------------------------------------------
r16586 | cbiere | 2009-04-29 16:10:07 -0400 (Wed, 29 Apr 2009) | 3 lines

 * Fixed bugs in tigertree verification that would crashes and incorrect
   deletion of slices on TTH mismatch.

------------------------------------------------------------------------
r16585 | rmanfredi | 2009-04-29 14:01:16 -0400 (Wed, 29 Apr 2009) | 2 lines

Aligned comment.

------------------------------------------------------------------------
r16584 | rmanfredi | 2009-04-29 12:38:49 -0400 (Wed, 29 Apr 2009) | 3 lines

download_got_eof(): flush / discard pending buffered data so that we do not
come to download_clone() with unflushed buffers.

------------------------------------------------------------------------
r16583 | cbiere | 2009-04-28 19:05:08 -0400 (Tue, 28 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16582 | cbiere | 2009-04-28 17:48:37 -0400 (Tue, 28 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16581 | cbiere | 2009-04-28 17:28:58 -0400 (Tue, 28 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16580 | cbiere | 2009-04-28 09:55:09 -0400 (Tue, 28 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16579 | cbiere | 2009-04-27 18:03:09 -0400 (Mon, 27 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16578 | cbiere | 2009-04-27 17:30:36 -0400 (Mon, 27 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16577 | cbiere | 2009-04-26 20:14:03 -0400 (Sun, 26 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16576 | cbiere | 2009-04-26 20:01:21 -0400 (Sun, 26 Apr 2009) | 2 lines

 * 593 new items.

------------------------------------------------------------------------
r16574 | cbiere | 2009-04-25 15:33:29 -0400 (Sat, 25 Apr 2009) | 3 lines

 * Added pattern.
 * Removed incorrect comment.

------------------------------------------------------------------------
r16573 | cbiere | 2009-04-25 05:54:37 -0400 (Sat, 25 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16572 | cbiere | 2009-04-25 05:30:10 -0400 (Sat, 25 Apr 2009) | 2 lines

 * 191 new items.

------------------------------------------------------------------------
r16571 | rmanfredi | 2009-04-25 02:24:55 -0400 (Sat, 25 Apr 2009) | 4 lines

node_count(): fixed compution, hopefully.  Problems arose because the hash
table tracking connected nodes could be facing duplicates which were then
not properly accounted for.

------------------------------------------------------------------------
r16570 | rmanfredi | 2009-04-24 17:31:48 -0400 (Fri, 24 Apr 2009) | 2 lines

node_count(): there is still a bug.

------------------------------------------------------------------------
r16569 | cbiere | 2009-04-24 17:19:44 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16568 | cbiere | 2009-04-24 16:50:22 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16567 | cbiere | 2009-04-24 16:36:37 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16566 | cbiere | 2009-04-24 13:42:17 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Sync'ed files.

------------------------------------------------------------------------
r16565 | rmanfredi | 2009-04-24 13:36:42 -0400 (Fri, 24 Apr 2009) | 2 lines

Removed unnecessary variable.

------------------------------------------------------------------------
r16564 | cbiere | 2009-04-24 13:32:12 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Removed unnecessary compat.[ch].

------------------------------------------------------------------------
r16563 | cbiere | 2009-04-24 13:29:18 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Removed unnecessary compat.[ch].

------------------------------------------------------------------------
r16562 | rmanfredi | 2009-04-24 13:15:44 -0400 (Fri, 24 Apr 2009) | 2 lines

Fixed node_count(), and documented what connected_nodes() and node_count() do.

------------------------------------------------------------------------
r16561 | cbiere | 2009-04-24 13:10:31 -0400 (Fri, 24 Apr 2009) | 4 lines

 * Fixed bug in compat_mono_time() when using clock_gettime().
 * Fixed bug in timer event handling when using kqueue().
 * Avoided pedantic C compiler warnings.

------------------------------------------------------------------------
r16560 | cbiere | 2009-04-24 12:48:49 -0400 (Fri, 24 Apr 2009) | 5 lines

 * Added workaround for NetBSD.
 * Avoided pedantic C compiler warnings.
 * Fixed typo in README.
 * Corrected config.sh to always define used variables even if unset.

------------------------------------------------------------------------
r16559 | cbiere | 2009-04-24 08:53:07 -0400 (Fri, 24 Apr 2009) | 2 lines

 * node_count(): Replaced failing assertion with warning.

------------------------------------------------------------------------
r16558 | cbiere | 2009-04-24 08:42:59 -0400 (Fri, 24 Apr 2009) | 2 lines

 * Moved to doc/RFCs.

------------------------------------------------------------------------
r16557 | cbiere | 2009-04-23 22:29:33 -0400 (Thu, 23 Apr 2009) | 5 lines

 * Removed obsolete shell scripts.
 * No more coffee during the release process.
 * Moved certain documentation into directory RFCs. See:
   http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=524975

------------------------------------------------------------------------
r16556 | cbiere | 2009-04-23 15:27:33 -0400 (Thu, 23 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16555 | cbiere | 2009-04-23 15:11:20 -0400 (Thu, 23 Apr 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r16554 | rmanfredi | 2009-04-23 14:06:56 -0400 (Thu, 23 Apr 2009) | 2 lines

Avoid lines greater than 80 chars.

------------------------------------------------------------------------
r16553 | cbiere | 2009-04-23 13:21:53 -0400 (Thu, 23 Apr 2009) | 2 lines

 * Fixed signed vs. unsigned comparison warning.

------------------------------------------------------------------------
r16552 | rmanfredi | 2009-04-22 17:27:12 -0400 (Wed, 22 Apr 2009) | 3 lines

Reduce DHT querying period to 20 minutes (base time subject to modification
depending on the amount of available sources).

------------------------------------------------------------------------
r16551 | rmanfredi | 2009-04-22 15:04:49 -0400 (Wed, 22 Apr 2009) | 3 lines

node_keep_missing(): return a signed quantity, even if we return a positive
quantity, because caller then uses signed arithmetic on the result.

------------------------------------------------------------------------
r16550 | rmanfredi | 2009-04-22 14:58:36 -0400 (Wed, 22 Apr 2009) | 2 lines

Say "x > 0" even if x is unsigned.

------------------------------------------------------------------------
r16549 | rmanfredi | 2009-04-22 13:57:07 -0400 (Wed, 22 Apr 2009) | 5 lines

Fixed inverted logic that caused gtk-gnutella to always (and repeatedly)
query UHCs when it was missing some connections to reach its minimum values.
Removed obsolete "dbg" usage and replaced it with new "host_debug", along
with new debugging messages to make sure behaviour is sane.

------------------------------------------------------------------------
r16548 | rmanfredi | 2009-04-22 13:52:51 -0400 (Wed, 22 Apr 2009) | 7 lines

node_count(): was wrongly using connected_node_count instead of
connected_node_cnt.  This caused gtk-gnutella to sometimes fail to reconnect
to more nodes after disconnections.
Suppressed useless connected_node_count variable.
Added node_decrement_counters() to factorize *_cnt accounting.
Use *_is_positive() routines for unsigned quantities.

------------------------------------------------------------------------
r16547 | rmanfredi | 2009-04-22 13:46:58 -0400 (Wed, 22 Apr 2009) | 2 lines

Added "host_debug".

------------------------------------------------------------------------
r16546 | rmanfredi | 2009-04-22 13:45:50 -0400 (Wed, 22 Apr 2009) | 2 lines

More *_is_positive() and *_is_non_negative() checks.

------------------------------------------------------------------------
r16545 | rmanfredi | 2009-04-22 13:44:59 -0400 (Wed, 22 Apr 2009) | 2 lines

Re-aligned comments.

------------------------------------------------------------------------
r16544 | rmanfredi | 2009-04-22 13:44:07 -0400 (Wed, 22 Apr 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r16539 | rmanfredi | 2009-04-21 16:09:52 -0400 (Tue, 21 Apr 2009) | 4 lines

Make sure hash_table_*_real() routines are only visible from the tracking
malloc code.  Other clients of the hash table must use the regular routines
to have their allocation / free tracked properly.

------------------------------------------------------------------------
r16538 | rmanfredi | 2009-04-21 12:22:22 -0400 (Tue, 21 Apr 2009) | 4 lines

udp_is_valid_gnet(): adjusted logic slightly.  Check for truncated packets
early, since we won't process those anyway.  And when the size of the header
is flagged GMSG_INVALID, we're probably facing garbage.

------------------------------------------------------------------------
r16537 | rmanfredi | 2009-04-21 12:18:21 -0400 (Tue, 21 Apr 2009) | 4 lines

download_has_enough_active_sources(): use fi->recvcount, not fi->lifecount as
the latter refers to all the known sources, not necessarily the ones that
end-up being active.

------------------------------------------------------------------------
r16536 | rmanfredi | 2009-04-21 01:30:19 -0400 (Tue, 21 Apr 2009) | 2 lines

Missed a space in warning message about bad packets.

------------------------------------------------------------------------
r16535 | rmanfredi | 2009-04-20 12:42:44 -0400 (Mon, 20 Apr 2009) | 3 lines

Was missing some "const".
Make sure to define TRACK_MALLOC if MALLOC_STATS before including "hashtable.h".

------------------------------------------------------------------------
r16534 | rmanfredi | 2009-04-20 12:36:21 -0400 (Mon, 20 Apr 2009) | 5 lines

Factorized DHT value serialization code in kmsg_serialize_dht_value().
Added kmsg_send_store() to issue STORE requests.
kmsg_received(): Enhanced logging of bad packets by showing the raw size
and decompiling the data from the Kademlia header, if possible.

------------------------------------------------------------------------
r16533 | rmanfredi | 2009-04-20 12:33:20 -0400 (Mon, 20 Apr 2009) | 4 lines

udp_is_valid_gnet(): if we cannot get an UDP node, assume the address/port
combination is invalid.  Enhanced logging of bad packets by showing the
raw size and decompiling the data from the Gnutella header, if possible.

------------------------------------------------------------------------
r16532 | rmanfredi | 2009-04-20 12:24:08 -0400 (Mon, 20 Apr 2009) | 3 lines

gmsg_infostr_full(): refuse to decipher message if less than the size of
a Gnutella header is supplied.  This is meant to be a convenience to callers.

------------------------------------------------------------------------
r16531 | rmanfredi | 2009-04-20 12:22:48 -0400 (Mon, 20 Apr 2009) | 2 lines

Added ptr_add_offset_const() to add offsets to a const pointer.

------------------------------------------------------------------------
r16530 | cbiere | 2009-04-19 17:53:53 -0400 (Sun, 19 Apr 2009) | 2 lines

 * 44 new items.

------------------------------------------------------------------------
r16529 | rmanfredi | 2009-04-19 17:34:32 -0400 (Sun, 19 Apr 2009) | 3 lines

Fixed memory leak when enqueuing a local search that is already present
in the search queue: the query hash vector is not freed.

------------------------------------------------------------------------
r16508 | cbiere | 2009-04-19 12:01:13 -0400 (Sun, 19 Apr 2009) | 5 lines

 * Fixed bug: When renaming a download file, "dl_count_by_name" wasn't
   updated causing internal inconsistency. Removed this hashtable because
   it isn't required at all anymore.
 * download_has_enough_sources(): Use fi->lifecount instead.

------------------------------------------------------------------------
r16506 | cbiere | 2009-04-19 09:38:48 -0400 (Sun, 19 Apr 2009) | 2 lines

 * Removed gwcalpha.servebeer.com; suspected hostile.

------------------------------------------------------------------------
r16505 | cbiere | 2009-04-18 14:59:18 -0400 (Sat, 18 Apr 2009) | 4 lines

 * header_get_feature():
   * Use a string literal instead of a pointer.
   * Removed unnecessary initializer.

------------------------------------------------------------------------
r16504 | rmanfredi | 2009-04-18 13:48:44 -0400 (Sat, 18 Apr 2009) | 2 lines

Do not turn on the -pedantic and -Wno-long-long compiler flags by default.

------------------------------------------------------------------------
r16503 | rmanfredi | 2009-04-18 13:46:56 -0400 (Sat, 18 Apr 2009) | 2 lines

Do not allow the "memory" command unless compiled with MALLOC_STATS.

------------------------------------------------------------------------
r16502 | rmanfredi | 2009-04-18 10:46:15 -0400 (Sat, 18 Apr 2009) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r16501 | cbiere | 2009-04-16 20:24:26 -0400 (Thu, 16 Apr 2009) | 2 lines

 * Banned ranges used by OpenDNS for DNS manipulation.

------------------------------------------------------------------------
r16500 | cbiere | 2009-04-16 20:19:58 -0400 (Thu, 16 Apr 2009) | 2 lines

 * Banned ranges as first primitive DNS manipulation counter-measure.

------------------------------------------------------------------------
r16499 | cbiere | 2009-04-13 12:10:27 -0400 (Mon, 13 Apr 2009) | 2 lines

 * Added pointer_to_string().

------------------------------------------------------------------------
r16498 | cbiere | 2009-04-12 20:08:03 -0400 (Sun, 12 Apr 2009) | 3 lines

 * Added comments.
 * Use GString rather than a local buffer for safety.

------------------------------------------------------------------------
r16497 | cbiere | 2009-04-12 18:42:32 -0400 (Sun, 12 Apr 2009) | 2 lines

 * Renamed bstr_destroy() to bstr_free() and added nullifying.

------------------------------------------------------------------------
r16496 | cbiere | 2009-04-12 15:23:31 -0400 (Sun, 12 Apr 2009) | 2 lines

 * bstr_destroy(): Call bstr_close().

------------------------------------------------------------------------
r16495 | cbiere | 2009-04-12 14:55:03 -0400 (Sun, 12 Apr 2009) | 10 lines

 * Corrected unused bstr_read_le32(): guint32 instead of guint16.
 * Removed unnecessary GLibberish.
 * Use peek_u8().
 * bstr_read_base(): Added const-qualifier.
 * expect(): Stick to size_t instead of ssize_t.
 * Reordered functions to make extra prototype unnecessary.
 * struct bstr:
   * Added const-qualifier to rptr.
   * Reordered members for compactness.

------------------------------------------------------------------------
r16494 | cbiere | 2009-04-12 14:33:45 -0400 (Sun, 12 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16493 | cbiere | 2009-04-12 13:55:11 -0400 (Sun, 12 Apr 2009) | 2 lines

 * Added size_t_to_string_buf() and size_t_to_string().

------------------------------------------------------------------------
r16492 | cbiere | 2009-04-11 18:48:08 -0400 (Sat, 11 Apr 2009) | 2 lines

 * Removed careless int casts.

------------------------------------------------------------------------
r16491 | cbiere | 2009-04-11 18:23:57 -0400 (Sat, 11 Apr 2009) | 4 lines

 * struct rpc_cb: Added magic.
 * rpc_cb_free(): Removed unnecessary parameter "can_remove" because it is
   only FALSE if "in_shutdown" is TRUE.

------------------------------------------------------------------------
r16490 | cbiere | 2009-04-11 17:13:23 -0400 (Sat, 11 Apr 2009) | 2 lines

 * Added src/shell/memory.c.

------------------------------------------------------------------------
r16489 | cbiere | 2009-04-11 17:09:14 -0400 (Sat, 11 Apr 2009) | 2 lines

 * Added shell command "memory dump".

------------------------------------------------------------------------
r16488 | cbiere | 2009-04-11 16:53:16 -0400 (Sat, 11 Apr 2009) | 3 lines

 * Added parse_uint(), parse_ulong(), parse_size(), parse_pointer(),
   pointer_to_string_buf().

------------------------------------------------------------------------
r16487 | cbiere | 2009-04-11 14:31:23 -0400 (Sat, 11 Apr 2009) | 2 lines

 * 126 new items.

------------------------------------------------------------------------
r16486 | cbiere | 2009-04-11 08:37:07 -0400 (Sat, 11 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16485 | cbiere | 2009-04-10 21:23:38 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Rewritten alignbytes.U (MEMALIGN_BYTES) to be suitable for cross-compiling.

------------------------------------------------------------------------
r16484 | cbiere | 2009-04-10 19:38:19 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Corrected buggy alignbytes.U.

------------------------------------------------------------------------
r16483 | cbiere | 2009-04-10 19:03:43 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Changed prototype of binary_hash().

------------------------------------------------------------------------
r16482 | rmanfredi | 2009-04-10 18:30:43 -0400 (Fri, 10 Apr 2009) | 2 lines

Consider an HEAD Ping message to be unsolicited UDP traffic.

------------------------------------------------------------------------
r16481 | rmanfredi | 2009-04-10 18:28:02 -0400 (Fri, 10 Apr 2009) | 4 lines

Made HASH_ITEMS_GROW a multiple of HASH_ITEMS_PER_BIN.
Do different resizing checks before inserting and after removing values.
Removed first parameter from hash_id_key() and hash_id_eq() (edit mistake).

------------------------------------------------------------------------
r16480 | cbiere | 2009-04-10 17:44:05 -0400 (Fri, 10 Apr 2009) | 3 lines

 * Minor optimizations.
 * Corrected edit style hint to reflect reality.

------------------------------------------------------------------------
r16479 | cbiere | 2009-04-10 17:33:55 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r16478 | rmanfredi | 2009-04-10 17:32:32 -0400 (Fri, 10 Apr 2009) | 2 lines

Caught another range.

------------------------------------------------------------------------
r16477 | cbiere | 2009-04-10 16:58:05 -0400 (Fri, 10 Apr 2009) | 4 lines

 * ptr_add_offset():
   * Use readable, obvious parameter names.
   * Don't deconstify the pointer.

------------------------------------------------------------------------
r16476 | rmanfredi | 2009-04-10 16:41:48 -0400 (Fri, 10 Apr 2009) | 2 lines

Optimize memory footprint by allocating bins and items in a contiguous region.

------------------------------------------------------------------------
r16475 | rmanfredi | 2009-04-10 16:40:32 -0400 (Fri, 10 Apr 2009) | 2 lines

Added ptr_add_offset().

------------------------------------------------------------------------
r16474 | cbiere | 2009-04-10 14:31:31 -0400 (Fri, 10 Apr 2009) | 2 lines

 * real_free(): Removed pointless cast.

------------------------------------------------------------------------
r16473 | rmanfredi | 2009-04-10 14:13:55 -0400 (Fri, 10 Apr 2009) | 4 lines

Internal malloc tracking no longer uses GHashTable but hash_table_t.
Added real_malloc() and real_free() to be used in client code that can
be triggered from malloc tracking.

------------------------------------------------------------------------
r16472 | rmanfredi | 2009-04-10 14:11:58 -0400 (Fri, 10 Apr 2009) | 5 lines

Fixed improper downsizing.
Extended to have optional key hash and key compare functions.
Make sure it can be used under TRACK_MALLOC by adding special _real variants
that are guaranteed to use the real malloc() and free() routines.

------------------------------------------------------------------------
r16471 | rmanfredi | 2009-04-10 14:09:00 -0400 (Fri, 10 Apr 2009) | 2 lines

got_no_udp_unsolicited(): factorize return.

------------------------------------------------------------------------
r16470 | cbiere | 2009-04-10 12:36:45 -0400 (Fri, 10 Apr 2009) | 5 lines

 * write_data(): Indicate failure on EPIPE. Otherwise, if the pipe reader
   hangs up, the shell process hangs indefinitely.
 * local_shell_mainloop(): Reset SIGINT to the default behavior so that
   it isn't ignore but terminates the process.

------------------------------------------------------------------------
r16469 | cbiere | 2009-04-10 10:45:04 -0400 (Fri, 10 Apr 2009) | 3 lines

 * Reverted change to hash_table_resize() because it is incorrect and
   causes assertion failures.

------------------------------------------------------------------------
r16468 | cbiere | 2009-04-10 09:29:24 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Avoid pedantic compiler warnings concerning function pointers.

------------------------------------------------------------------------
r16467 | cbiere | 2009-04-10 08:38:46 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r16466 | cbiere | 2009-04-10 08:19:52 -0400 (Fri, 10 Apr 2009) | 4 lines

 * map_test():
   * Don't run benchmark unless debugging.
   * ZOMFstruct.

------------------------------------------------------------------------
r16465 | rmanfredi | 2009-04-10 08:16:51 -0400 (Fri, 10 Apr 2009) | 4 lines

Do not turn on more costly assertions unless HASH_TABLE_CHECKS is defined.
Allow downsizing of hash table if the next HASH_ITEMS_GROW insertions would
succeed without causing the hash table to be resized again.

------------------------------------------------------------------------
r16464 | cbiere | 2009-04-10 07:47:03 -0400 (Fri, 10 Apr 2009) | 2 lines

 * Minor style corrections.

------------------------------------------------------------------------
r16463 | cbiere | 2009-04-09 19:36:07 -0400 (Thu, 09 Apr 2009) | 2 lines

 * Avoid pedantic compiler warnings concerning function pointers.

------------------------------------------------------------------------
r16462 | cbiere | 2009-04-09 18:51:32 -0400 (Thu, 09 Apr 2009) | 2 lines

 * Avoid pedantic compiler warnings concerning function pointers.

------------------------------------------------------------------------
r16461 | cbiere | 2009-04-09 18:02:22 -0400 (Thu, 09 Apr 2009) | 2 lines

 * Use inline keyword to suppress warnings about unused functions.

------------------------------------------------------------------------
r16460 | cbiere | 2009-04-09 17:44:36 -0400 (Thu, 09 Apr 2009) | 3 lines

 * tt_check(): Fixed pedantic compiler warnings; C89 doesn't guarantee
   support of string literals longer than 509 characters.

------------------------------------------------------------------------
r16459 | rmanfredi | 2009-04-09 16:57:55 -0400 (Thu, 09 Apr 2009) | 2 lines

Another spammer range.

------------------------------------------------------------------------
r16458 | cbiere | 2009-04-09 16:34:09 -0400 (Thu, 09 Apr 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16457 | rmanfredi | 2009-04-09 14:42:10 -0400 (Thu, 09 Apr 2009) | 5 lines

Ultrapeers now configure their compressing TX layer in such a way that it
reduces by 4 the amount of required deflate context per connection, with no
visible impact on the actual compression ratio.  This saves 288 KiB of RAM
per node connection (be it to a leaf or to another ultra).

------------------------------------------------------------------------
r16456 | rmanfredi | 2009-04-09 14:38:48 -0400 (Thu, 09 Apr 2009) | 3 lines

download_open(): use file_open_missing() instead of file_open() to not cause
a warning each time we start a new download!

------------------------------------------------------------------------
r16455 | rmanfredi | 2009-04-09 14:37:26 -0400 (Thu, 09 Apr 2009) | 7 lines

Do not constantly monitor for unsolicited UDP traffic!  Do that only once
every other FW_SOLICITED_WINDOW seconds, and stop as soon as we do get real
unsolicited traffic.  This should help reducing the amount of CPU usage.
Made inet_udp_got_unsolicited_incoming() public in preparation for the future
where we can unambiguously qualify some traffic as unsolicited.
Converted old code to use aging tables.

------------------------------------------------------------------------
r16454 | rmanfredi | 2009-04-09 14:32:23 -0400 (Thu, 09 Apr 2009) | 2 lines

Made node_error_cleanup() a periodic callout event.

------------------------------------------------------------------------
r16453 | rmanfredi | 2009-04-09 14:31:25 -0400 (Thu, 09 Apr 2009) | 3 lines

hash_list_iterator_at(): will now return NULL if the key is not present.
Random PARQ code cleanup.

------------------------------------------------------------------------
r16452 | rmanfredi | 2009-04-09 14:29:52 -0400 (Thu, 09 Apr 2009) | 2 lines

stats_array_dump(): flush stdio buffer at the end.

------------------------------------------------------------------------
r16451 | rmanfredi | 2009-04-09 14:28:49 -0400 (Thu, 09 Apr 2009) | 2 lines

Compression ratio can be negative in some pathological cases.

------------------------------------------------------------------------
r16450 | cbiere | 2009-04-08 17:56:57 -0400 (Wed, 08 Apr 2009) | 4 lines

 * Merged some code into internal hash_list_iter_new().
 * Removed unnecessary GLibberish.
 * Removed unnecessary typedefs for enums only used once.

------------------------------------------------------------------------
r16449 | cbiere | 2009-04-08 17:49:38 -0400 (Wed, 08 Apr 2009) | 2 lines

 * Fixed obvious bugs in previous commit (dead lines, uninitialized variable).

------------------------------------------------------------------------
r16448 | rmanfredi | 2009-04-08 16:28:40 -0400 (Wed, 08 Apr 2009) | 5 lines

Fixed sending of QUEUE callbacks to avoid hammering remote host, or stopping
alltogether at the first timeout detection.
Use a local periodic event to persist the PARQ queue.
Turned some lists into hashlists to avoid too many costly traversals.

------------------------------------------------------------------------
r16447 | rmanfredi | 2009-04-08 16:24:51 -0400 (Wed, 08 Apr 2009) | 2 lines

Use a callout queue periodic event to invoke qrp_monitor().

------------------------------------------------------------------------
r16446 | rmanfredi | 2009-04-08 16:24:09 -0400 (Wed, 08 Apr 2009) | 2 lines

aging_destroy(): now takes a pointer to the table to be able to nullify it.

------------------------------------------------------------------------
r16445 | rmanfredi | 2009-04-08 16:21:43 -0400 (Wed, 08 Apr 2009) | 4 lines

Distinguish between hash_list_contains() and hash_list_find(): the first
does not need to retrieve the key pointer.
Added hash_list_iterator_at() to start iterating at a given key.

------------------------------------------------------------------------
r16444 | rmanfredi | 2009-04-08 16:17:05 -0400 (Wed, 08 Apr 2009) | 4 lines

Fixed statistics computation: some signed variable was actually made unsigned.
Added where() for debugging purposes.
Added additional header legend to stats reports.

------------------------------------------------------------------------
r16443 | rmanfredi | 2009-04-08 16:06:34 -0400 (Wed, 08 Apr 2009) | 3 lines

node_timer(): fixed MAJOR BREAKAGE, possibly leading to huge memory leaks.
node_remove_by_addr(): must precompute next item before removing node.

------------------------------------------------------------------------
r16442 | rmanfredi | 2009-04-07 17:27:44 -0400 (Tue, 07 Apr 2009) | 2 lines

Updated to reflect new features of MALLOC_FRAMES.

------------------------------------------------------------------------
r16441 | rmanfredi | 2009-04-07 16:15:08 -0400 (Tue, 07 Apr 2009) | 3 lines

Made code clearer by converting incoming traffic monitoring from raw callout
queue events to watchdogs.

------------------------------------------------------------------------
r16440 | rmanfredi | 2009-04-07 15:26:03 -0400 (Tue, 07 Apr 2009) | 2 lines

Hide wd_free() since we have wd_free_null().

------------------------------------------------------------------------
r16439 | rmanfredi | 2009-04-07 15:24:24 -0400 (Tue, 07 Apr 2009) | 6 lines

Added cq_free_null().
Outgoing connection detection logic now uses a watchdog.
Firewall detection debug messages protected by the new "fw_debug" property.
Added parameter descriptions for cq_periodic_add() and cq_idle_add().
Relaxed precondition of cq_insert() to allow a delay of 0.

------------------------------------------------------------------------
r16438 | rmanfredi | 2009-04-07 15:18:46 -0400 (Tue, 07 Apr 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16437 | rmanfredi | 2009-04-07 15:15:33 -0400 (Tue, 07 Apr 2009) | 2 lines

Added "fw_debug".

------------------------------------------------------------------------
r16436 | rmanfredi | 2009-04-07 15:13:35 -0400 (Tue, 07 Apr 2009) | 2 lines

Introducing watchdogs.

------------------------------------------------------------------------
r16435 | rmanfredi | 2009-04-07 13:36:49 -0400 (Tue, 07 Apr 2009) | 2 lines

Added ranges.

------------------------------------------------------------------------
r16434 | cbiere | 2009-04-07 11:20:46 -0400 (Tue, 07 Apr 2009) | 2 lines

 * Exit if freopen() fails.

------------------------------------------------------------------------
r16433 | cbiere | 2009-04-07 11:17:17 -0400 (Tue, 07 Apr 2009) | 2 lines

 * The main script was kind of absent.

------------------------------------------------------------------------
r16432 | rmanfredi | 2009-04-06 17:51:32 -0400 (Mon, 06 Apr 2009) | 3 lines

Converted, where possible, to use cq_periodic_add() instead of managing the
callback manually each time.

------------------------------------------------------------------------
r16431 | rmanfredi | 2009-04-06 17:31:44 -0400 (Mon, 06 Apr 2009) | 2 lines

gmsg_cmp(): made code more readable. Use message size as the final criteria.

------------------------------------------------------------------------
r16430 | rmanfredi | 2009-04-06 17:21:15 -0400 (Mon, 06 Apr 2009) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r16429 | rmanfredi | 2009-04-06 17:01:11 -0400 (Mon, 06 Apr 2009) | 4 lines

Added periodic and idle events to the callout queue.
Added the ability to make callout subqueues to avoid cluttering the main
callout queue and have different heartbeat periods.

------------------------------------------------------------------------
r16428 | rmanfredi | 2009-04-06 16:52:55 -0400 (Mon, 06 Apr 2009) | 2 lines

Debugging message cleanup.

------------------------------------------------------------------------
r16427 | rmanfredi | 2009-04-05 16:26:11 -0400 (Sun, 05 Apr 2009) | 4 lines

Removed unneeded TRANSPARENT conditional compilation.
Ensure arguments of macros in "malloc.h" are evaluated only once.  All cases
of multiple evaluations were not needed anyway.

------------------------------------------------------------------------
r16426 | rmanfredi | 2009-04-05 15:37:33 -0400 (Sun, 05 Apr 2009) | 5 lines

Fixed gmsg_cmp(): was not passing the start of the data to vmsg_weight().
Added gmsg_infostr_split_to_buf() and make sure data follows header and
has a length matching that of the Gnutella header before using
kmsg_infostr_to_buf() to pretty-print DHT messages.

------------------------------------------------------------------------
r16425 | cbiere | 2009-04-05 15:29:26 -0400 (Sun, 05 Apr 2009) | 4 lines

 * filename_to_utf8_normalized(): Closed memory leak.
 * Added missing documentation.
 * Use UNSIGNED() instead of a cast to int and a check against zero.

------------------------------------------------------------------------
r16424 | rmanfredi | 2009-04-05 14:45:53 -0400 (Sun, 05 Apr 2009) | 5 lines

Added vmsg_weight() to be able to assign a non uniform comparison weight
to vendor messages.
Upgraded gmsg_cmp() to use vmsg_weight().
handle_oob_proxy_veto(): ignore messages from non-leaf nodes as well.

------------------------------------------------------------------------
r16423 | rmanfredi | 2009-04-05 14:16:04 -0400 (Sun, 05 Apr 2009) | 2 lines

Removed wrong precondition.

------------------------------------------------------------------------
r16422 | rmanfredi | 2009-04-05 13:43:59 -0400 (Sun, 05 Apr 2009) | 2 lines

Another non-leak.

------------------------------------------------------------------------
r16421 | rmanfredi | 2009-04-05 13:41:31 -0400 (Sun, 05 Apr 2009) | 2 lines

Other non-leaks.

------------------------------------------------------------------------
r16420 | rmanfredi | 2009-04-05 13:36:15 -0400 (Sun, 05 Apr 2009) | 2 lines

Another false leak.

------------------------------------------------------------------------
r16419 | rmanfredi | 2009-04-05 12:37:37 -0400 (Sun, 05 Apr 2009) | 4 lines

make_room_internal(): use message length instead of just boolean to signal
a whole PDU, so that we can use gmsg_infostr_full() if we need to print
out the message description.

------------------------------------------------------------------------
r16418 | rmanfredi | 2009-04-05 11:53:11 -0400 (Sun, 05 Apr 2009) | 2 lines

malloc_not_leaking(): silently ignore memory blocks we do not know about.

------------------------------------------------------------------------
r16417 | bpringlemeir | 2009-04-05 11:16:46 -0400 (Sun, 05 Apr 2009) | 1 line

Allow a more generic function pointer with cast_pointer_to_func() macro.  The previous revision restricted to functions with no paramaters.  The use in src/ui/gtk/uploads_cb.c uses a GFunc, which has additional parameters.  I don't think anything is lost in type safety; the casting has already done this.
------------------------------------------------------------------------
r16416 | cbiere | 2009-04-05 10:05:50 -0400 (Sun, 05 Apr 2009) | 2 lines

 * Use the recursive scan context for tick counting.

------------------------------------------------------------------------
r16415 | rmanfredi | 2009-04-05 09:24:42 -0400 (Sun, 05 Apr 2009) | 3 lines

Added parq_close_pre() which can be called after upload_close().
Reserve parq_close() call ater download_close().

------------------------------------------------------------------------
r16414 | rmanfredi | 2009-04-05 09:15:23 -0400 (Sun, 05 Apr 2009) | 2 lines

Added make_room_internal() to be able to cope with full message comparisons.

------------------------------------------------------------------------
r16413 | rmanfredi | 2009-04-05 08:36:14 -0400 (Sun, 05 Apr 2009) | 2 lines

Include "if/core/main.h" for debugging().

------------------------------------------------------------------------
r16412 | rmanfredi | 2009-04-05 08:33:58 -0400 (Sun, 05 Apr 2009) | 7 lines

Revisited the gmsg_log*() routines to make sure we always specify the length
of the message or of the data, to avoid reading bad memory regions if the
header of the message is incorrect.  All logging now done via g_message().
Fixed gmsg_cmp() to explictly tell whether the second message is given as a
whole PDU or just as a header.
Added gmsg_log_dropped_pmsg() to log a message block more conveniently.

------------------------------------------------------------------------
r16411 | rmanfredi | 2009-04-05 08:30:20 -0400 (Sun, 05 Apr 2009) | 3 lines

parq_download_parse_queue_status() was wrongly triggering an assertion failure
by expecting queue status information on return codes other than 503.

------------------------------------------------------------------------
r16410 | rmanfredi | 2009-04-05 08:26:19 -0400 (Sun, 05 Apr 2009) | 4 lines

For the purpose of more accurate tick cost computation, consider that
adding a file to the library is a more intensive operation than just
opening / reading a directory entry.

------------------------------------------------------------------------
r16409 | rmanfredi | 2009-04-05 08:25:01 -0400 (Sun, 05 Apr 2009) | 5 lines

Cleanup in header_get_feature():
 * Avoid usage of the "dbg" property.
 * Factorize static string.
 * Do not dump the whole headers on problem, just the X-Features line.

------------------------------------------------------------------------
r16408 | rmanfredi | 2009-04-05 07:41:46 -0400 (Sun, 05 Apr 2009) | 3 lines

Plugged memory leak happening when enqueing a query to the global queue
and another pending query for the same search was already present.

------------------------------------------------------------------------
r16407 | rmanfredi | 2009-04-05 07:32:28 -0400 (Sun, 05 Apr 2009) | 2 lines

Plugged memory leak happening each time we issued a random DHT ping.

------------------------------------------------------------------------
r16406 | rmanfredi | 2009-04-04 19:13:14 -0400 (Sat, 04 Apr 2009) | 6 lines

PARQ must not complain about lack of X-Queued header if the HTTP status is
not 503.
Even if bandwidth is tight, force emission of the X-Hostname header under
certain circumstances because this information is precious: hosts that use
this most probably have a dynamic IP.

------------------------------------------------------------------------
r16405 | rmanfredi | 2009-04-04 19:09:53 -0400 (Sat, 04 Apr 2009) | 2 lines

Declare misc_close().

------------------------------------------------------------------------
r16404 | rmanfredi | 2009-04-04 18:30:54 -0400 (Sat, 04 Apr 2009) | 2 lines

More data cleanup at shutdown and false-leak reporting avoidance.

------------------------------------------------------------------------
r16403 | rmanfredi | 2009-04-04 17:32:20 -0400 (Sat, 04 Apr 2009) | 4 lines

Cleanup more data at shutdown time to avoid false leaks.
For data that cannot be cleaned up and which is not a blatant leak, use the
new NOT_LEAKING() hint to shut up the leak reporter.

------------------------------------------------------------------------
r16402 | rmanfredi | 2009-04-04 17:27:27 -0400 (Sat, 04 Apr 2009) | 4 lines

Made the ``file'' argument of all tracking routines a "const char *".
Added the NOT_LEAKING() hint that can be used by lazy and once routines to
avoid having their returned pointer be flagged as a leaked block.

------------------------------------------------------------------------
r16401 | rmanfredi | 2009-04-04 17:24:42 -0400 (Sat, 04 Apr 2009) | 3 lines

Added gm_hash_table_remove() as a substitute for g_hash_table_remove() since
the glib 1.x version does not return anything.

------------------------------------------------------------------------
r16400 | rmanfredi | 2009-04-04 15:10:13 -0400 (Sat, 04 Apr 2009) | 4 lines

inputevt_close(): perform clean up.
Call inputevt_close() at shutdown time to remove some background noise in
the memory leak summary.

------------------------------------------------------------------------
r16399 | rmanfredi | 2009-04-04 14:39:25 -0400 (Sat, 04 Apr 2009) | 2 lines

patricia_test(): cleanup everything.

------------------------------------------------------------------------
r16398 | rmanfredi | 2009-04-04 14:36:03 -0400 (Sat, 04 Apr 2009) | 2 lines

Code cleanup with added safety checks.

------------------------------------------------------------------------
r16397 | cbiere | 2009-04-04 13:42:58 -0400 (Sat, 04 Apr 2009) | 2 lines

 * gtk_clist_set_column_name(): Accept and handle NULL as title, too.

------------------------------------------------------------------------
r16396 | rmanfredi | 2009-04-04 13:30:42 -0400 (Sat, 04 Apr 2009) | 3 lines

gtk_clist_set_column_name(): avoid constant free'ing and strdup'ing if the
column title is not changing.

------------------------------------------------------------------------
r16395 | rmanfredi | 2009-04-04 13:29:39 -0400 (Sat, 04 Apr 2009) | 4 lines

Move around some MALLOC_FRAMES code that does not explicitly require that
MALLOC_STATS be also configured.
Still, it cannot compile with MALLOC_FRAMES alone.

------------------------------------------------------------------------
r16394 | rmanfredi | 2009-04-04 12:49:57 -0400 (Sat, 04 Apr 2009) | 2 lines

Plugged two memory leaks.

------------------------------------------------------------------------
r16393 | rmanfredi | 2009-04-04 10:12:52 -0400 (Sat, 04 Apr 2009) | 2 lines

Prefix all runtime warnings with "MALLOC" to make them easier to spot.

------------------------------------------------------------------------
r16392 | rmanfredi | 2009-04-04 09:51:57 -0400 (Sat, 04 Apr 2009) | 2 lines

Converted to use the new RPC event layer.

------------------------------------------------------------------------
r16391 | rmanfredi | 2009-04-04 09:49:42 -0400 (Sat, 04 Apr 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16390 | rmanfredi | 2009-04-04 09:48:40 -0400 (Sat, 04 Apr 2009) | 2 lines

Added layer to manage asynchronous events for iterative RPCs.

------------------------------------------------------------------------
r16389 | rmanfredi | 2009-04-04 09:10:46 -0400 (Sat, 04 Apr 2009) | 6 lines

Avoid compiler warnings when compiling with TRACK_MALLOC: undef strndup
and make sure to say "NULL != (s) ?" instead of just "(s) ?" for redefined
g_strdup() and friends in case we're dup'ing a value from a constant array.
When compiling with MALLOC_FRAMES, output the allocation stack frame for
each leaked block, using symbolic names if possible.

------------------------------------------------------------------------
r16388 | rmanfredi | 2009-04-03 05:51:52 -0400 (Fri, 03 Apr 2009) | 4 lines

The DBMW layer can now be given a free routine to clean any dynamically
allocated memory during value deserialization that is still referenced by
the value.

------------------------------------------------------------------------
r16387 | cbiere | 2009-04-02 18:41:45 -0400 (Thu, 02 Apr 2009) | 4 lines

 * main_get_build():
   * Do not ever use atoi().
   * Do not run this multiple times, if parsing fails.

------------------------------------------------------------------------
r16386 | cbiere | 2009-04-02 17:06:13 -0400 (Thu, 02 Apr 2009) | 2 lines

 * Documented alternate upload option using scp.

------------------------------------------------------------------------
r16385 | rmanfredi | 2009-04-02 16:43:12 -0400 (Thu, 02 Apr 2009) | 2 lines

Let max value of counters be INT_MAX instead of 999999.

------------------------------------------------------------------------
r16384 | rmanfredi | 2009-04-02 16:41:08 -0400 (Thu, 02 Apr 2009) | 2 lines

Added trace when a DHT value is found locally.

------------------------------------------------------------------------
r16383 | rmanfredi | 2009-04-02 16:39:45 -0400 (Thu, 02 Apr 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r16382 | rmanfredi | 2009-04-02 16:38:04 -0400 (Thu, 02 Apr 2009) | 2 lines

Forgot to declare sdbm as a subdir.

------------------------------------------------------------------------
r16381 | cbiere | 2009-04-02 15:33:30 -0400 (Thu, 02 Apr 2009) | 3 lines

 * Removed function pointer from debug messages due to pedantic warnings.
   These aren't interesting anymore anyway.

------------------------------------------------------------------------
r16380 | rmanfredi | 2009-04-02 15:28:58 -0400 (Thu, 02 Apr 2009) | 3 lines

download_clone(): always try to clear s->getline if present.
Documented that GGEP "HNAME" can also be present in ALOC DHT values.

------------------------------------------------------------------------
r16379 | rmanfredi | 2009-04-02 15:09:27 -0400 (Thu, 02 Apr 2009) | 2 lines

Updated release instruction to match the new sourceforge procedures.

------------------------------------------------------------------------
r16378 | rmanfredi | 2009-04-02 15:07:15 -0400 (Thu, 02 Apr 2009) | 6 lines

Replaced str_not_empty() by !is_null_or_empty().
Documents that size_is_positive() means STRICTLY positive.
When a browse host or a THEX download ends with an error, we must free the
io_opaque structure in download_clone() in case we're going to switch to
another download.

------------------------------------------------------------------------
r16377 | rmanfredi | 2009-04-02 15:03:59 -0400 (Thu, 02 Apr 2009) | 2 lines

Added magic number.

------------------------------------------------------------------------
r16376 | cbiere | 2009-04-02 14:54:49 -0400 (Thu, 02 Apr 2009) | 2 lines

 * Fixed metaconf unit for systems without kqueue().

------------------------------------------------------------------------
r16375 | cbiere | 2009-04-02 14:06:43 -0400 (Thu, 02 Apr 2009) | 2 lines

 * Fixed pedantic compiler warning.

------------------------------------------------------------------------
r16374 | cbiere | 2009-04-02 13:25:59 -0400 (Thu, 02 Apr 2009) | 3 lines

 *ÜIncreased verbosity of some metaconf units.
 * Added -Wno-long-long -pedantic for GCC (temporarily).

------------------------------------------------------------------------
r16373 | rmanfredi | 2009-04-02 13:22:55 -0400 (Thu, 02 Apr 2009) | 6 lines

Added the "clock_debug" property.
Migrated all debugging clock calls to g_message() and protect them with the
new "clock_debug" property.
Added additional pre-condition to clock_update() since we then assert that
the address is initialized in val_free(), for instance.

------------------------------------------------------------------------
r16372 | rmanfredi | 2009-04-02 13:19:19 -0400 (Thu, 02 Apr 2009) | 2 lines

Do not emit any PFSP header when seeding a finished file.

------------------------------------------------------------------------
r16371 | rmanfredi | 2009-04-02 13:18:07 -0400 (Thu, 02 Apr 2009) | 2 lines

Removed faulty assertion that no longer holds with download_force_stop().

------------------------------------------------------------------------
r16370 | rmanfredi | 2009-04-02 13:16:24 -0400 (Thu, 02 Apr 2009) | 4 lines

Fixed oversight in token validation: make sure expired versions pick the
latest token they have, and when validating a version, limit ourselves to
the set of keys they know about.

------------------------------------------------------------------------
r16369 | cbiere | 2009-04-02 12:54:32 -0400 (Thu, 02 Apr 2009) | 2 lines

 * Fixed many pedantic warnings.

------------------------------------------------------------------------
r16368 | cbiere | 2009-04-02 10:05:01 -0400 (Thu, 02 Apr 2009) | 2 lines

 * Removed misplaced semi-colon.

------------------------------------------------------------------------
r16367 | cbiere | 2009-04-02 09:59:27 -0400 (Thu, 02 Apr 2009) | 3 lines

 * Removed spurious array declaration that caused compile error
   with GCC -pedantic.

------------------------------------------------------------------------
r16366 | cbiere | 2009-04-02 07:42:48 -0400 (Thu, 02 Apr 2009) | 8 lines

 * struct header_fmt:
   * Don't embed the separator as it typically wastes memory.
   * Stick to size_t for string lengths and buffer sizes.
   * Use bit-fields for boolean members because gboolean wastes memory.
 * header_fmt_to_string(), header_fmt_string(): Added const-qualifier to
   returned pointer.
 * header_fmt_free(): Use an indirect pointer and nullify it. 

------------------------------------------------------------------------
r16365 | cbiere | 2009-04-02 07:26:38 -0400 (Thu, 02 Apr 2009) | 4 lines

 * clamp_strlen(): Since "size" may exceed the actual size of the
   memory object, endptr should not be used as it strictly isn't a
   valid pointer.

------------------------------------------------------------------------
r16364 | rmanfredi | 2009-04-02 02:34:42 -0400 (Thu, 02 Apr 2009) | 2 lines

Forgot to free header formatter in file_info_available().

------------------------------------------------------------------------
r16363 | cbiere | 2009-04-01 20:05:15 -0400 (Wed, 01 Apr 2009) | 3 lines

 * fi_missing_coverage(): Fixed obvious bug in previous commit causing
   access of uninitialized "fi".

------------------------------------------------------------------------
r16362 | cbiere | 2009-04-01 18:02:27 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Added spammer range.

------------------------------------------------------------------------
r16361 | cbiere | 2009-04-01 17:57:30 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Update provided by Alexander Nicolaysen Sørnes .

------------------------------------------------------------------------
r16360 | cbiere | 2009-04-01 17:22:25 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Added enum definitions for query flags.

------------------------------------------------------------------------
r16359 | cbiere | 2009-04-01 16:54:51 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Added "--verbose" switch to request more verbose output from Configure.

------------------------------------------------------------------------
r16358 | rmanfredi | 2009-04-01 16:48:53 -0400 (Wed, 01 Apr 2009) | 2 lines

Recognize and flag swapped query flags (sent by RAZA).

------------------------------------------------------------------------
r16357 | rmanfredi | 2009-04-01 14:28:39 -0400 (Wed, 01 Apr 2009) | 2 lines

Re-aligned constants.

------------------------------------------------------------------------
r16356 | rmanfredi | 2009-04-01 13:59:31 -0400 (Wed, 01 Apr 2009) | 4 lines

Align to LimeWire's settings for expiration and republishing periods.
We don't want the DHT to lose the values we'll publish, so we must abide by
these insane values.

------------------------------------------------------------------------
r16355 | rmanfredi | 2009-04-01 13:56:06 -0400 (Wed, 01 Apr 2009) | 3 lines

Call version_ancient_warn() periodically to be able to flag the version
as expired as soon as it happens, and not at the next run.

------------------------------------------------------------------------
r16354 | rmanfredi | 2009-04-01 13:53:33 -0400 (Wed, 01 Apr 2009) | 7 lines

Implemented PFSP 1.0a: now emits and handles new X-Available header.
Do not reset HTTP ranges we parse at each download response, merge them
with what we already gathered on the grounds that the remote host will
not usually remove parts of what has been downloaded.
Flag partial sources with an explicit flag so that we know when to mark a
file as completely available.

------------------------------------------------------------------------
r16353 | cbiere | 2009-04-01 13:49:39 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Always reset temporary variable "result" before using it.

------------------------------------------------------------------------
r16352 | cbiere | 2009-04-01 13:39:47 -0400 (Wed, 01 Apr 2009) | 2 lines

 * Corrected detection of largefile support.

------------------------------------------------------------------------
r16351 | cbiere | 2009-04-01 13:37:07 -0400 (Wed, 01 Apr 2009) | 3 lines

 * Rename "KEEPALIVE" to "KEEP_ALIVE" because metaconfig confuses
   it with SO_KEEPALIVE.

------------------------------------------------------------------------
r16350 | rmanfredi | 2009-04-01 13:25:17 -0400 (Wed, 01 Apr 2009) | 3 lines

Cleanup HSEP structures  correctly at shutdown time.
Also separately count GUID collisions between two neighbours.

------------------------------------------------------------------------
r16349 | rmanfredi | 2009-04-01 13:11:02 -0400 (Wed, 01 Apr 2009) | 4 lines

Removed obsolete leading comment for version_ancient_warn().
Only emit the warning about old version once, so that version_ancient_warn()
can be called periodically.

------------------------------------------------------------------------
r16348 | rmanfredi | 2009-04-01 13:09:12 -0400 (Wed, 01 Apr 2009) | 2 lines

The RPC info structure was leaking for each found value.

------------------------------------------------------------------------
r16347 | rmanfredi | 2009-04-01 12:55:31 -0400 (Wed, 01 Apr 2009) | 3 lines

Distinguish between GUID collisions in general and GUID collisions happening
with our own GUID.

------------------------------------------------------------------------
r16346 | cbiere | 2009-04-01 11:20:08 -0400 (Wed, 01 Apr 2009) | 2 lines

 * search_results_handle_trailer(): Don't show warning unless debugging.

------------------------------------------------------------------------
r16345 | cbiere | 2009-04-01 11:04:28 -0400 (Wed, 01 Apr 2009) | 7 lines

 * Added preliminal support for GGEP XQ (eXtended Query) as used by
   LimeWire for search terms longer than about 30 characters.
 * Try to decipher incorrectly encoded query flags from notoriously buggy
   software such as Shareaza.
 * search_request() doesn't need to return anything due to
   search_request_preprocess().

------------------------------------------------------------------------
r16344 | cbiere | 2009-04-01 10:52:11 -0400 (Wed, 01 Apr 2009) | 3 lines

 * node_got_bye(): Only dump the BYE message up to the first NUL. Nobody
   wants NULs in the logs.

------------------------------------------------------------------------
r16343 | cbiere | 2009-04-01 10:43:32 -0400 (Wed, 01 Apr 2009) | 2 lines

 * node_got_bye(): Made code slightly clearer.

------------------------------------------------------------------------
r16342 | cbiere | 2009-04-01 10:24:18 -0400 (Wed, 01 Apr 2009) | 2 lines

 * get_protocol_version(): Always use size_t for strlen().

------------------------------------------------------------------------
r16341 | cbiere | 2009-04-01 10:21:28 -0400 (Wed, 01 Apr 2009) | 4 lines

 * node_got_bye(): Added missing brackets. Due to incorrect indentation
   the code seemed conditional but actually wasn't, so all BYE messages
   are now dumped to stderr.

------------------------------------------------------------------------
r16339 | rmanfredi | 2009-04-01 01:25:43 -0400 (Wed, 01 Apr 2009) | 2 lines

Got rid of check for "QTRAX2_CONNECTION" queries.

------------------------------------------------------------------------
r16337 | cbiere | 2009-03-31 17:16:14 -0400 (Tue, 31 Mar 2009) | 3 lines

 * Added ggep_utf8_string_extract().
 * ggep_hname_extract(): Use the above.

------------------------------------------------------------------------
r16336 | cbiere | 2009-03-31 17:01:45 -0400 (Tue, 31 Mar 2009) | 2 lines

 * utf8_is_valid_string(): Corrected obviously wrong documentation.

------------------------------------------------------------------------
r16335 | rmanfredi | 2009-03-31 16:59:03 -0400 (Tue, 31 Mar 2009) | 4 lines

Updated doc, fixed some errors, reformated examples.
Added section 5, documenting a gtk-gnutella extension to PFSP.
Added appendix to track changes to this specification.

------------------------------------------------------------------------
r16334 | rmanfredi | 2009-03-31 16:42:04 -0400 (Tue, 31 Mar 2009) | 2 lines

Stop being paranoid -- qsort() is properly implemented.

------------------------------------------------------------------------
r16333 | cbiere | 2009-03-31 16:14:07 -0400 (Tue, 31 Mar 2009) | 2 lines

 * Added GGEP "XQ" (eXtended Queries) to list of known extensions.

------------------------------------------------------------------------
r16332 | rmanfredi | 2009-03-31 15:29:24 -0400 (Tue, 31 Mar 2009) | 5 lines

Increased DB cache for values to 1024, and raw data to 512.
Suppressed any caching for expired key/value pairs, cache hit rates remain
very low for this kind of data.
Collect some debugging statistics about values.

------------------------------------------------------------------------
r16331 | rmanfredi | 2009-03-31 15:26:16 -0400 (Tue, 31 Mar 2009) | 7 lines

Avoid calling qsort() with 0 items, just for safety.
Fixed behaviour on value lookups when the key exists but is not holding the
proper value types.  Unless they ask explicitly for secondary keys, we must
reply as if the key was not present locally.  Otherwise, caching of a
particular type of data for a given key would completely mask out other types
stored under the same key in the k-closest nodes further down the path.

------------------------------------------------------------------------
r16330 | rmanfredi | 2009-03-31 15:20:35 -0400 (Tue, 31 Mar 2009) | 4 lines

Increased DB cache size to 512 items for keys (was using default of 128).
Restored harsher decimation exponent base (1.5) to make sure cached keys
expire rather quickly, as they shadow real values.

------------------------------------------------------------------------
r16329 | rmanfredi | 2009-03-31 14:45:20 -0400 (Tue, 31 Mar 2009) | 2 lines

Emit low-level warnings/messages only when http_debug is set.

------------------------------------------------------------------------
r16328 | rmanfredi | 2009-03-31 14:42:15 -0400 (Tue, 31 Mar 2009) | 2 lines

Use shifts rather than hexadecimal masks for defining flags.

------------------------------------------------------------------------
r16327 | rmanfredi | 2009-03-31 03:07:07 -0400 (Tue, 31 Mar 2009) | 6 lines

Planned for using GGEP "HNAME" in ALOC DHT values (why invent yet another
extension name like LimeWire did for the GGEP extensions there?).
Reduced blackout period between two DNS server name lookups to 30 minutes.
Flag server as supporting TLS (avoids TLS cache lookups) and when the server
changes its IP address, remove its old IP:port from the TLS cache.

------------------------------------------------------------------------
r16326 | rmanfredi | 2009-03-31 03:02:31 -0400 (Tue, 31 Mar 2009) | 2 lines

Use str_not_empty() to check for valid server hostname.

------------------------------------------------------------------------
r16325 | rmanfredi | 2009-03-31 03:01:25 -0400 (Tue, 31 Mar 2009) | 2 lines

Added str_not_empty() and guint32_saturate_add() inline routines.

------------------------------------------------------------------------
r16324 | rmanfredi | 2009-03-31 03:00:23 -0400 (Tue, 31 Mar 2009) | 2 lines

Added tls_cache_remove() convenience routine.

------------------------------------------------------------------------
r16323 | rmanfredi | 2009-03-31 02:59:52 -0400 (Tue, 31 Mar 2009) | 2 lines

Removed magic constant.

------------------------------------------------------------------------
r16322 | rmanfredi | 2009-03-30 16:44:01 -0400 (Mon, 30 Mar 2009) | 2 lines

Put surrounding quotes for the subspace ID in log messages.

------------------------------------------------------------------------
r16321 | rmanfredi | 2009-03-30 16:40:47 -0400 (Mon, 30 Mar 2009) | 2 lines

Do not request any caching in the DBMW layer when the backend is not SDBM.

------------------------------------------------------------------------
r16320 | rmanfredi | 2009-03-30 15:07:52 -0400 (Mon, 30 Mar 2009) | 2 lines

Since we now halt the callout queue during shutdown, this is no longer needed.

------------------------------------------------------------------------
r16315 | cbiere | 2009-03-30 12:22:46 -0400 (Mon, 30 Mar 2009) | 2 lines

 * Updated credits.

------------------------------------------------------------------------
r16314 | cbiere | 2009-03-30 12:19:54 -0400 (Mon, 30 Mar 2009) | 2 lines

 * Removed private internal tags.

------------------------------------------------------------------------
r16310 | cbiere | 2009-03-30 10:32:26 -0400 (Mon, 30 Mar 2009) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r16309 | cbiere | 2009-03-30 10:00:22 -0400 (Mon, 30 Mar 2009) | 2 lines

 * Back to the future.

------------------------------------------------------------------------
r16301 | rmanfredi | 2009-03-29 11:31:34 -0400 (Sun, 29 Mar 2009) | 2 lines

Release 0.96.6 stable.

------------------------------------------------------------------------
r16300 | rmanfredi | 2009-03-29 10:34:28 -0400 (Sun, 29 Mar 2009) | 2 lines

Added missing files.

------------------------------------------------------------------------
r16299 | rmanfredi | 2009-03-29 10:14:50 -0400 (Sun, 29 Mar 2009) | 2 lines

Last changes for 0.96.6.

------------------------------------------------------------------------
r16298 | rmanfredi | 2009-03-29 10:11:10 -0400 (Sun, 29 Mar 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r16297 | rmanfredi | 2009-03-29 09:49:27 -0400 (Sun, 29 Mar 2009) | 2 lines

Release 0.96.6 imminent, removing source location from all .po files.

------------------------------------------------------------------------
r16296 | rmanfredi | 2009-03-29 09:43:42 -0400 (Sun, 29 Mar 2009) | 2 lines

Avoid compiler warning.

------------------------------------------------------------------------
r16295 | rmanfredi | 2009-03-29 09:18:50 -0400 (Sun, 29 Mar 2009) | 4 lines

Removed duplicate code, moved to download_connected().
Removed wrong discarding of the server's hostname when a connection cannot
be established after a DNS name lookup.  Good old bugs...

------------------------------------------------------------------------
r16294 | rmanfredi | 2009-03-29 09:11:34 -0400 (Sun, 29 Mar 2009) | 2 lines

Removed factorized code.

------------------------------------------------------------------------
r16293 | rmanfredi | 2009-03-29 09:02:15 -0400 (Sun, 29 Mar 2009) | 2 lines

Upgraded PARQ to version 1.1.

------------------------------------------------------------------------
r16292 | rmanfredi | 2009-03-29 08:37:30 -0400 (Sun, 29 Mar 2009) | 3 lines

Made server_host_info() public.
Change server address if we spot a change after a DNS lookup.

------------------------------------------------------------------------
r16291 | rmanfredi | 2009-03-29 05:11:14 -0400 (Sun, 29 Mar 2009) | 2 lines

Clear cache content before retrieving from disk.

------------------------------------------------------------------------
r16290 | rmanfredi | 2009-03-29 04:44:45 -0400 (Sun, 29 Mar 2009) | 7 lines

When launching from a magnet with a SHA1, the URI is NULL anyway.  Assume we
can query through /uri-res/ if we have a SHA1, because that's what we do
when using modern alt-locs anyway.
Was sometimes losing the server's hostname due to the delayed DNS name
resolution: if we had an alt-loc in the mesh for the IP address, the subsequent
download coming after name resolution was identified as a duplicate.

------------------------------------------------------------------------
r16289 | rmanfredi | 2009-03-29 04:41:43 -0400 (Sun, 29 Mar 2009) | 5 lines

Plan for possible evolutions in HSEP: record their major/minor to know which
messages to send them and how to parse theirs.  Also assume GTKG will remain
backward compatible at a given major version (i.e. will understand all past
minor versions).

------------------------------------------------------------------------
r16288 | rmanfredi | 2009-03-28 20:39:52 -0400 (Sat, 28 Mar 2009) | 4 lines

Was not marking downloads coming from magnets as being capable of being
requested via a /uri-res/N2R request, causing problems later on when we tried
to "convert" them and they ended up being duplicates!

------------------------------------------------------------------------
r16287 | rmanfredi | 2009-03-28 17:56:51 -0400 (Sat, 28 Mar 2009) | 3 lines

Avoid server hammering: space out connection attempts in case we have multiple
files waiting to be downloaded on the same server.

------------------------------------------------------------------------
r16286 | rmanfredi | 2009-03-28 17:20:50 -0400 (Sat, 28 Mar 2009) | 2 lines

Consolidated and regroupped iWeb addresses.

------------------------------------------------------------------------
r16285 | rmanfredi | 2009-03-28 17:18:01 -0400 (Sat, 28 Mar 2009) | 2 lines

Do not log non-printable requests from hostiles.

------------------------------------------------------------------------
r16284 | cbiere | 2009-03-28 17:11:40 -0400 (Sat, 28 Mar 2009) | 2 lines

 * Made GCC STFU regarding g_slist_delete_link().

------------------------------------------------------------------------
r16283 | cbiere | 2009-03-28 17:03:49 -0400 (Sat, 28 Mar 2009) | 3 lines

 * dmesh_collect_sha1(): Initialize found to FALSE.
 * Avoid casting random garbage to int.

------------------------------------------------------------------------
r16282 | cbiere | 2009-03-28 16:23:16 -0400 (Sat, 28 Mar 2009) | 8 lines

 * Added assertion checks.
 * stripped_strlen(): Use size_t instead of int.
 * header_fmt_value_fits(): Use saturation arithmetic for safety and
   correctness.
 * header_fmt_append(): Use clamp_strncpy() because it's simpler, doesn't
   pad the complete destination buffer and only reads as far from the
   source as required.

------------------------------------------------------------------------
r16281 | cbiere | 2009-03-28 16:03:21 -0400 (Sat, 28 Mar 2009) | 4 lines

 * Added clamp_memcpy() for safer truncating copying of data.
 * Added clamp_strcpy(), clamp_strncpy() for safer and potentially faster
   truncating copying of strings.

------------------------------------------------------------------------
r16280 | rmanfredi | 2009-03-28 15:39:38 -0400 (Sat, 28 Mar 2009) | 2 lines

Increased default value for download_retry_timeout_max to 1 hour.

------------------------------------------------------------------------
r16279 | rmanfredi | 2009-03-28 15:28:46 -0400 (Sat, 28 Mar 2009) | 2 lines

Oops, swapped minor and major.

------------------------------------------------------------------------
r16278 | rmanfredi | 2009-03-28 14:20:47 -0400 (Sat, 28 Mar 2009) | 3 lines

If status line from handshakes is printable, show it as a string instead of
an hexadecimal dump.

------------------------------------------------------------------------
r16277 | rmanfredi | 2009-03-28 14:19:42 -0400 (Sat, 28 Mar 2009) | 2 lines

Do not let header_dump() output non-printable chars.

------------------------------------------------------------------------
r16276 | rmanfredi | 2009-03-28 14:18:07 -0400 (Sat, 28 Mar 2009) | 2 lines

Added is_printable_iso8859_string().

------------------------------------------------------------------------
r16275 | rmanfredi | 2009-03-28 13:40:31 -0400 (Sat, 28 Mar 2009) | 5 lines

Changed header_dump() signature to be closer to that of dump_string().
Avoid using "%.*s" to dump HTTP headers, since the string is truncated to
about 1000 characters, regardless of the length.  Now calls dump_string()
to dump the whole thing in a predictable way.

------------------------------------------------------------------------
r16274 | rmanfredi | 2009-03-28 13:37:09 -0400 (Sat, 28 Mar 2009) | 2 lines

Added dump_string().

------------------------------------------------------------------------
r16273 | rmanfredi | 2009-03-28 13:21:01 -0400 (Sat, 28 Mar 2009) | 2 lines

Added some const.

------------------------------------------------------------------------
r16272 | cbiere | 2009-03-28 12:40:38 -0400 (Sat, 28 Mar 2009) | 2 lines

 * Removed redundant definition.

------------------------------------------------------------------------
r16271 | rmanfredi | 2009-03-28 12:25:38 -0400 (Sat, 28 Mar 2009) | 7 lines

Revisited header formatting: use an explicit pointer instead of a generic one,
and specify a maximum header line size at header_fmt_make() time.
Then let each header_fmt_append_value() return whether it could append data
or not, making header_fmt_value_fits() quasi-obsolete.
Also, if the total header line size is smaller than the header name alone,
ensure we leave the header totally empty.

------------------------------------------------------------------------
r16270 | rmanfredi | 2009-03-28 12:21:32 -0400 (Sat, 28 Mar 2009) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r16269 | rmanfredi | 2009-03-28 08:29:21 -0400 (Sat, 28 Mar 2009) | 3 lines

Do not set the ``host'' field of the http_async structure if it is a numeric
IP address.  We want only a hostname, otherwise NULL.

------------------------------------------------------------------------
r16268 | rmanfredi | 2009-03-28 05:08:21 -0400 (Sat, 28 Mar 2009) | 6 lines

Added http_async_remote_host_port() to compute suitable Host header for the
target of the HTTP request.
Fixed asynchronous request building callback signatures: no need to pass host
and port, callee must invoke http_async_remote_host_port().
Added systematic http_async_check() calls.

------------------------------------------------------------------------
r16267 | rmanfredi | 2009-03-27 19:35:59 -0400 (Fri, 27 Mar 2009) | 3 lines

Converted iterations through hash_list_head() / hash_list_next() that did
not alter the structure being iterated over into an iterator-style traversal.

------------------------------------------------------------------------
r16266 | rmanfredi | 2009-03-27 19:32:50 -0400 (Fri, 27 Mar 2009) | 2 lines

Was not sending proper Host header in push-proxy HTTP requests.

------------------------------------------------------------------------
r16265 | rmanfredi | 2009-03-27 17:26:21 -0400 (Fri, 27 Mar 2009) | 5 lines

During the final shutdown sequence, the callout queue is halted, hence the
TX stack Nagle algorithm is not triggering to flush buffered data in the
deflated layer.  Therefore, we must call mq_flush() explicitly at regular
intervals to be able to send data on a compressed connection.

------------------------------------------------------------------------
r16264 | rmanfredi | 2009-03-27 17:24:11 -0400 (Fri, 27 Mar 2009) | 2 lines

Added mq_flush().

------------------------------------------------------------------------
r16263 | rmanfredi | 2009-03-27 17:05:47 -0400 (Fri, 27 Mar 2009) | 2 lines

The browse-host feature must be announced only when the feature is enabled.

------------------------------------------------------------------------
r16262 | rmanfredi | 2009-03-27 17:04:01 -0400 (Fri, 27 Mar 2009) | 3 lines

Added header_features_add_guarded() to conditionally emit a feature based
on the runtime value of a guard variable.

------------------------------------------------------------------------
r16261 | rmanfredi | 2009-03-27 16:43:20 -0400 (Fri, 27 Mar 2009) | 8 lines

Added upload_request_special() to handle special uploads (browse & THEX).
Increment request number when we send back errors and keep the connection
opened, or after serving a HEAD reqest.
Added upload_http_extra_callback_add_once() to make sure we do not add
a given callback more than once.
Emit Content-Disposition only once per file.
Emit X-Hostname and X-Features only once per connection.

------------------------------------------------------------------------
r16260 | rmanfredi | 2009-03-27 12:59:44 -0400 (Fri, 27 Mar 2009) | 3 lines

Found another case where we need to use extract_bitprint() instead of calling
urn_get_bitprint() directly in case we have a header containing several URNs.

------------------------------------------------------------------------
r16259 | rmanfredi | 2009-03-27 12:58:28 -0400 (Fri, 27 Mar 2009) | 2 lines

Also parse any incoming X-Content-URN if X-Gnutella-Content-URN is missing.

------------------------------------------------------------------------
r16258 | rmanfredi | 2009-03-27 12:57:08 -0400 (Fri, 27 Mar 2009) | 2 lines

Use string tokenizer in dmesh_collect_sha1() instead of manual parsing.

------------------------------------------------------------------------
r16257 | rmanfredi | 2009-03-27 12:42:39 -0400 (Fri, 27 Mar 2009) | 2 lines

Added unit tests.

------------------------------------------------------------------------
r16256 | rmanfredi | 2009-03-27 11:27:52 -0400 (Fri, 27 Mar 2009) | 3 lines

There can be several X-Content-URN headers and we have no assurance that
urn:bitprint will come first.

------------------------------------------------------------------------
r16255 | rmanfredi | 2009-03-27 11:25:31 -0400 (Fri, 27 Mar 2009) | 3 lines

Added strtok_next_length() to return the length of the next token, thereby
avoiding having to call strlen() on it.

------------------------------------------------------------------------
r16254 | rmanfredi | 2009-03-27 11:23:09 -0400 (Fri, 27 Mar 2009) | 2 lines

Show looked-up value type in debugging message.

------------------------------------------------------------------------
r16253 | rmanfredi | 2009-03-27 10:57:27 -0400 (Fri, 27 Mar 2009) | 2 lines

Added range.

------------------------------------------------------------------------
r16252 | rmanfredi | 2009-03-27 10:45:04 -0400 (Fri, 27 Mar 2009) | 3 lines

Added comment to hash_list_next(), documenting its benefit, counter-balanced
by bearing more overhead compared to iterator traversal.

------------------------------------------------------------------------
r16251 | rmanfredi | 2009-03-27 10:33:59 -0400 (Fri, 27 Mar 2009) | 3 lines

Fixed typo in download_slow_timer(): we really want to iterate on all the
downloads.

------------------------------------------------------------------------
r16250 | rmanfredi | 2009-03-27 09:35:00 -0400 (Fri, 27 Mar 2009) | 2 lines

Comment typo fix.

------------------------------------------------------------------------
r16249 | rmanfredi | 2009-03-27 04:23:53 -0400 (Fri, 27 Mar 2009) | 2 lines

Updated Spanish translation from Larry Nieves.

------------------------------------------------------------------------
r16248 | rmanfredi | 2009-03-26 19:05:39 -0400 (Thu, 26 Mar 2009) | 2 lines

Fixed improper implementation of hash_list_insert_sorted().

------------------------------------------------------------------------
r16247 | rmanfredi | 2009-03-26 19:03:44 -0400 (Thu, 26 Mar 2009) | 3 lines

Added missing g_list_insert_before() for glib 1.x.
Added corresponding malloc-tracking routine track_list_insert_before().

------------------------------------------------------------------------
r16246 | rmanfredi | 2009-03-26 17:54:43 -0400 (Thu, 26 Mar 2009) | 4 lines

When promoting a pending node, it must be inserted at the right position
in the good node list.  Furthermore, if we haven't heard about the node for
a while, ping it after promoting it.

------------------------------------------------------------------------
r16245 | cbiere | 2009-03-24 16:20:25 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Additional hint regarding accelerator keys.

------------------------------------------------------------------------
r16244 | cbiere | 2009-03-24 15:58:49 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Corrected translations with unstripped contexts.

------------------------------------------------------------------------
r16243 | cbiere | 2009-03-24 15:21:16 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Removed another misplaced const-qualifier.

------------------------------------------------------------------------
r16242 | cbiere | 2009-03-24 15:04:20 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Avoid use and mention of g_free.

------------------------------------------------------------------------
r16241 | cbiere | 2009-03-24 14:56:26 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Display the clock skew properly and with a sign.

------------------------------------------------------------------------
r16240 | cbiere | 2009-03-24 14:52:51 -0400 (Tue, 24 Mar 2009) | 2 lines

 * Removed misplaced const-qualifiers.

------------------------------------------------------------------------
r16239 | rmanfredi | 2009-03-23 15:26:49 -0400 (Mon, 23 Mar 2009) | 2 lines

Changed push:// syntax to avoid using possibly problematic "," separators.

------------------------------------------------------------------------
r16238 | rmanfredi | 2009-03-23 09:31:54 -0400 (Mon, 23 Mar 2009) | 2 lines

Reverted change that turned magnet strings into const variables.

------------------------------------------------------------------------
r16237 | rmanfredi | 2009-03-23 09:29:47 -0400 (Mon, 23 Mar 2009) | 3 lines

Regardless of the key's STORE load, we must access FIND_NODE requests from
our k-closest neighbours if the targeted key falls in our k-ball.

------------------------------------------------------------------------
r16236 | rmanfredi | 2009-03-22 19:20:20 -0400 (Sun, 22 Mar 2009) | 3 lines

Avoid replying to FIND_NODE messages if the UDP queue is flow-controlled or
would enter flow-control due to our response.

------------------------------------------------------------------------
r16235 | rmanfredi | 2009-03-22 05:02:58 -0400 (Sun, 22 Mar 2009) | 2 lines

Updated documentation to reflect new format used as of gtk-gnutella/0.96.6.

------------------------------------------------------------------------
r16234 | rmanfredi | 2009-03-22 04:38:29 -0400 (Sun, 22 Mar 2009) | 3 lines

Fixed legacy push:// parsing support: we no longer pay attention to ms->addr
and ms->port for these sources.

------------------------------------------------------------------------
r16233 | rmanfredi | 2009-03-22 04:19:57 -0400 (Sun, 22 Mar 2009) | 8 lines

Extended magnet syntax for push:// exact sources to be able to list all the
known push proxies (including none if we don't have any). For push://, only
the servent GUID is necessary, since push-proxies can be discovered through
the DHT and the servent's address is not important.
Made magnet_source_to_string() public and added magnet_proxies_to_string().
Defined some strings returned for magnet as "const", which caused some ripple
effects on the code.

------------------------------------------------------------------------
r16232 | rmanfredi | 2009-03-22 04:12:19 -0400 (Sun, 22 Mar 2009) | 4 lines

When exiting, don't run most of the timers.  The list of timers actually
launched from main_timer() at shutdown time (during the grace period)
could perhaps be further reduced.

------------------------------------------------------------------------
r16231 | rmanfredi | 2009-03-22 04:08:18 -0400 (Sun, 22 Mar 2009) | 4 lines

Added gnet_host_vec_from_gslist().
Created internal gnet_host_vec_from_sequence() to factorize implementation
code between gnet_host_vec_from_gslist() and gnet_host_vec_from_hash_list().

------------------------------------------------------------------------
r16230 | rmanfredi | 2009-03-22 04:05:47 -0400 (Sun, 22 Mar 2009) | 4 lines

Made "struct sequence" visible in sequence.h, so that it may be actually
declared on the stack.
Added sequence_is_empty().

------------------------------------------------------------------------
r16229 | rmanfredi | 2009-03-22 04:03:35 -0400 (Sun, 22 Mar 2009) | 2 lines

Added G_FREE_NULL_CONST() for freeing const variables.

------------------------------------------------------------------------
r16228 | rmanfredi | 2009-03-21 11:58:27 -0400 (Sat, 21 Mar 2009) | 3 lines

Added the sequence abstraction to be able to iterate over traversable
structures of various types in a uniform way.

------------------------------------------------------------------------
r16227 | rmanfredi | 2009-03-21 11:53:33 -0400 (Sat, 21 Mar 2009) | 3 lines

This file is not meant to be included only by "common.h".
Must use g_assert_not_reached() in case fast assertions are not compiled in.

------------------------------------------------------------------------
r16226 | rmanfredi | 2009-03-21 11:48:20 -0400 (Sat, 21 Mar 2009) | 2 lines

Parameter of map_implementation() is const.

------------------------------------------------------------------------
r16225 | rmanfredi | 2009-03-21 10:46:09 -0400 (Sat, 21 Mar 2009) | 2 lines

Simplified map data structure.

------------------------------------------------------------------------
r16224 | rmanfredi | 2009-03-21 04:21:19 -0400 (Sat, 21 Mar 2009) | 2 lines

When debugging, log seeding of orphans, from QHIT or DHT.

------------------------------------------------------------------------
r16223 | rmanfredi | 2009-03-20 17:48:03 -0400 (Fri, 20 Mar 2009) | 3 lines

Regroupped all Gnutella host routines in lib/gnet_host.[ch], moving them
out of the core for easier reuse.

------------------------------------------------------------------------
r16222 | rmanfredi | 2009-03-20 17:43:12 -0400 (Fri, 20 Mar 2009) | 2 lines

Document some recent changes.

------------------------------------------------------------------------
r16221 | rmanfredi | 2009-03-20 17:41:14 -0400 (Fri, 20 Mar 2009) | 2 lines

Use binary search to parse magnet keys.

------------------------------------------------------------------------
r16220 | rmanfredi | 2009-03-20 13:09:28 -0400 (Fri, 20 Mar 2009) | 8 lines

Must really locate all the k-closest nodes to a value, k/2 is not sufficient
due to churning problems.
Optimized lookup_closest_ok(): no need to traverse anything if we don't have
enough items in the path yet.
Flag terminated lookups for which we simply await the final RPCs, so that we
do not "expire" them unduly if the maximum lifetime hits us before waiting is
complete.

------------------------------------------------------------------------
r16219 | rmanfredi | 2009-03-19 19:33:24 -0400 (Thu, 19 Mar 2009) | 2 lines

Made parq_upload_save_queue() a private routine.

------------------------------------------------------------------------
r16218 | rmanfredi | 2009-03-19 19:31:37 -0400 (Thu, 19 Mar 2009) | 3 lines

Removed spurious logical test which happened to be made at the same time
we were checking for node_debug.

------------------------------------------------------------------------
r16217 | rmanfredi | 2009-03-19 19:28:31 -0400 (Thu, 19 Mar 2009) | 10 lines

Renamed all "parq_ul" variables as "puq" (for PARQ Upload Queued).
Always reset puq->has_slot to FALSE when removing an upload.
Do not send QUEUE if the host is not valid; flag that information.
Was not saving active slots due to a logic bug: at some point in time, all
active slots necessarily appear as "expired".
Removed check for parq_still_sharing() before deciding wheether a QUEUE has
to be sent. Now that we keep the connection open on HTTP errors, they may
decide to switch to another resource when they an error back after requesting
the queued resource.

------------------------------------------------------------------------
r16216 | rmanfredi | 2009-03-19 19:13:16 -0400 (Thu, 19 Mar 2009) | 3 lines

Turned push-proxy list in the server into an hash list so that we can manage
duplicates and keep more entries, whilst still keeping the freshest ones.

------------------------------------------------------------------------
r16215 | rmanfredi | 2009-03-19 19:09:40 -0400 (Thu, 19 Mar 2009) | 3 lines

Don't compute a DHT size estimate when lookup results are made on the same
subspace as our KUID.

------------------------------------------------------------------------
r16214 | rmanfredi | 2009-03-19 19:07:56 -0400 (Thu, 19 Mar 2009) | 3 lines

Fixed typo that caused value lookups to only search for 1 closest node instead
of the expected KDA_K / 2.

------------------------------------------------------------------------
r16213 | rmanfredi | 2009-03-19 19:06:09 -0400 (Thu, 19 Mar 2009) | 2 lines

Log the DHT value when rejecting STORE operations due to an invalid creator.

------------------------------------------------------------------------
r16212 | cbiere | 2009-03-19 14:54:34 -0400 (Thu, 19 Mar 2009) | 4 lines

 * Modified trylink to clean-up garbage before each run to
   avoid interference with possible chunk from previous
   compiler/linker checks.

------------------------------------------------------------------------
r16211 | rmanfredi | 2009-03-19 12:06:24 -0400 (Thu, 19 Mar 2009) | 2 lines

Adjusted debug levels.

------------------------------------------------------------------------
r16210 | rmanfredi | 2009-03-19 08:58:55 -0400 (Thu, 19 Mar 2009) | 4 lines

Now that publish.[ch] is there, removed needless #if protections.
Do not count a KUID collision with ourselves if the contact is bearing our
own address and port.

------------------------------------------------------------------------
r16209 | rmanfredi | 2009-03-19 08:55:55 -0400 (Thu, 19 Mar 2009) | 2 lines

Added place-holder for DHT publishing.

------------------------------------------------------------------------
r16208 | rmanfredi | 2009-03-18 18:39:47 -0400 (Wed, 18 Mar 2009) | 3 lines

Moved some #define statements from routing.h to routing.c.  We don't need to
expose these outside of the C file.

------------------------------------------------------------------------
r16207 | rmanfredi | 2009-03-18 18:31:52 -0400 (Wed, 18 Mar 2009) | 3 lines

When rejecting values on quota ground, display the values as well so we
can see whether we really were the target of the stores.

------------------------------------------------------------------------
r16206 | cbiere | 2009-03-18 16:32:02 -0400 (Wed, 18 Mar 2009) | 2 lines

 * Forgot to reset "result".

------------------------------------------------------------------------
r16205 | rmanfredi | 2009-03-18 16:21:07 -0400 (Wed, 18 Mar 2009) | 2 lines

Use new "node_udp_sendqueue_size" property to size the UDP message queue.

------------------------------------------------------------------------
r16204 | rmanfredi | 2009-03-18 16:03:57 -0400 (Wed, 18 Mar 2009) | 4 lines

Hide "struct mqueue" definition and other private values from the outside.
Make good use of new "mq_tcp_debug" and "mq_udp_debug" properties, instead of
the obsolete global "dbg" property.

------------------------------------------------------------------------
r16203 | cbiere | 2009-03-18 15:59:15 -0400 (Wed, 18 Mar 2009) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r16202 | cbiere | 2009-03-18 15:53:49 -0400 (Wed, 18 Mar 2009) | 2 lines

 * Do a recursive clean-up after compile tests.

------------------------------------------------------------------------
r16201 | rmanfredi | 2009-03-18 15:49:19 -0400 (Wed, 18 Mar 2009) | 2 lines

Added mq_tcp_debug and mq_udp_debug.

------------------------------------------------------------------------
r16200 | rmanfredi | 2009-03-18 15:43:17 -0400 (Wed, 18 Mar 2009) | 6 lines

Had forgotten to initialize kmsg_weight[] for DHT messages!
Revised Kademlia message priorities.
Fixed gmsg_cmp() to be able to properly handle comparison of Gnutella and
Kademlia messages.
Made gmsg_infostr_to_buf() able to format DHT messages as well.

------------------------------------------------------------------------
r16199 | rmanfredi | 2009-03-18 15:40:27 -0400 (Wed, 18 Mar 2009) | 2 lines

Made kmsg_infostr_to_buf() visible.

------------------------------------------------------------------------
r16198 | rmanfredi | 2009-03-18 15:38:17 -0400 (Wed, 18 Mar 2009) | 4 lines

Halt the callout queue before entering final waiting loop, to prevent callbacks
from not being able to cope nicely with the fact that a lot of subsystems have
been closed or shutdown at this point.

------------------------------------------------------------------------
r16197 | cbiere | 2009-03-18 14:20:24 -0400 (Wed, 18 Mar 2009) | 2 lines

 * Re-added bitter and socker, without symlinks this time.

------------------------------------------------------------------------
r16196 | cbiere | 2009-03-18 13:59:16 -0400 (Wed, 18 Mar 2009) | 2 lines

 * Removing tools with dead symlinks.

------------------------------------------------------------------------
r16195 | rmanfredi | 2009-03-18 08:39:42 -0400 (Wed, 18 Mar 2009) | 2 lines

Added source code locations to facilitate the work of translators.

------------------------------------------------------------------------
r16194 | rmanfredi | 2009-03-18 08:15:24 -0400 (Wed, 18 Mar 2009) | 3 lines

Removed the --no-location flag to xgettext so that source code location
is perserved.

------------------------------------------------------------------------
r16193 | rmanfredi | 2009-03-18 04:29:54 -0400 (Wed, 18 Mar 2009) | 6 lines

Call dht_update_subspace_size_estimate() when we have completed a lookup
to provide data for the DHT size estimation algorithm.
Switched value lookups to loose parallelism: strict parallelism is too slow
when nodes are not replying.  Also raised the amount of nodes we want in the
closest subset from 1/4th to 1/2 of KDA_K.

------------------------------------------------------------------------
r16192 | rmanfredi | 2009-03-18 04:26:28 -0400 (Wed, 18 Mar 2009) | 2 lines

Use new statx_t type.

------------------------------------------------------------------------
r16191 | rmanfredi | 2009-03-18 04:17:27 -0400 (Wed, 18 Mar 2009) | 7 lines

Enahanced remote DHT size recording logic to keep separate data points per
KUID subspace, with expiration of stale estimates.
Added the dht_update_subspace_size_estimate() entry point for computing
DHT size estimates based on a set of nodes and a target KUID.  This is now
used internally to compute our own local estimate based on DHT lookup results.
Factorized DHT size computation in dht_compute_size_estimate().

------------------------------------------------------------------------
r16190 | rmanfredi | 2009-03-17 15:28:28 -0400 (Tue, 17 Mar 2009) | 2 lines

Reduced RPC delays slightly.

------------------------------------------------------------------------
r16189 | rmanfredi | 2009-03-17 13:43:35 -0400 (Tue, 17 Mar 2009) | 2 lines

Use explicit "statx_t *" instead of "gpointer".

------------------------------------------------------------------------
r16188 | rmanfredi | 2009-03-17 13:42:15 -0400 (Tue, 17 Mar 2009) | 3 lines

Introduced statx_t and made it possible to compute statistics without keeping
a copy of the data.

------------------------------------------------------------------------
r16187 | rmanfredi | 2009-03-17 13:39:32 -0400 (Tue, 17 Mar 2009) | 2 lines

Added kuid_set64() and kuid_leading_u8().

------------------------------------------------------------------------
r16186 | rmanfredi | 2009-03-17 13:38:16 -0400 (Tue, 17 Mar 2009) | 2 lines

Avoid floating point arithmetics, assume DHT size < 2^64.

------------------------------------------------------------------------
r16185 | rmanfredi | 2009-03-17 04:01:25 -0400 (Tue, 17 Mar 2009) | 2 lines

Show where IP/network quota restrictions are from when they hit.

------------------------------------------------------------------------
r16184 | rmanfredi | 2009-03-17 03:52:21 -0400 (Tue, 17 Mar 2009) | 3 lines

Forgot to saturate the value on multiplication overflow, which can happen when
we don't know enough nodes and the ones we have in our sample are sparse.

------------------------------------------------------------------------
r16183 | rmanfredi | 2009-03-17 03:50:26 -0400 (Tue, 17 Mar 2009) | 2 lines

Added kuid_add_u8().

------------------------------------------------------------------------
r16182 | rmanfredi | 2009-03-16 19:48:27 -0400 (Mon, 16 Mar 2009) | 5 lines

Local DHT size estimation is now done using statistical sparseness measurement
over the 100 closest nodes to ourselves.
Averaged DHT size computation now uses 64-bit integer arithmetic instead
of floating point.

------------------------------------------------------------------------
r16181 | rmanfredi | 2009-03-16 19:12:11 -0400 (Mon, 16 Mar 2009) | 2 lines

Added more binary integer arithmetic routines on KUIDs.

------------------------------------------------------------------------
r16180 | rmanfredi | 2009-03-16 19:11:00 -0400 (Mon, 16 Mar 2009) | 2 lines

Added peek_be64().

------------------------------------------------------------------------
r16179 | rmanfredi | 2009-03-16 14:16:53 -0400 (Mon, 16 Mar 2009) | 2 lines

Removed workarounds for dealing with broken 0.96.2 nodes and earlier 0.95.x.

------------------------------------------------------------------------
r16178 | rmanfredi | 2009-03-16 13:51:14 -0400 (Mon, 16 Mar 2009) | 2 lines

Updated set of strings to be translated.

------------------------------------------------------------------------
r16177 | rmanfredi | 2009-03-16 13:44:43 -0400 (Mon, 16 Mar 2009) | 2 lines

Added 5 more PARQ-related statistics counters.

------------------------------------------------------------------------
r16176 | rmanfredi | 2009-03-16 13:42:36 -0400 (Mon, 16 Mar 2009) | 3 lines

Allow "quick" to be translated.
Also flag quick uploads when waiting for follow-up requests.

------------------------------------------------------------------------
r16175 | rmanfredi | 2009-03-16 13:41:34 -0400 (Mon, 16 Mar 2009) | 6 lines

Fixed updates to PROP_UL_RUNNING, avoiding race conditions between the time
the upload finishes and the time the next request comes: now once an upload
has been declared as running, it stays so, even through upload_clone().
This should keep the amount of uploads to the maximum configured (plus
some optional quick slots).

------------------------------------------------------------------------
r16174 | rmanfredi | 2009-03-16 13:36:26 -0400 (Mon, 16 Mar 2009) | 3 lines

Moved counting of push-proxy UDP relayed pushes to a more convenient place,
avoiding any further GUID comparisons.

------------------------------------------------------------------------
r16173 | rmanfredi | 2009-03-15 18:07:57 -0400 (Sun, 15 Mar 2009) | 2 lines

Was not initializing ki->flags for keys falling within the k-ball.

------------------------------------------------------------------------
r16172 | rmanfredi | 2009-03-15 16:17:34 -0400 (Sun, 15 Mar 2009) | 3 lines

Revisited the keys_update_kball() algorithm to determine automatically
whether we are seeded or not, based on the results of routing table queries.

------------------------------------------------------------------------
r16171 | rmanfredi | 2009-03-15 15:22:28 -0400 (Sun, 15 Mar 2009) | 3 lines

Was blindly sending hostname in query hits without paying attention to the
"give_server_hostname" property!

------------------------------------------------------------------------
r16170 | rmanfredi | 2009-03-15 14:40:01 -0400 (Sun, 15 Mar 2009) | 3 lines

Queries coming from the network and sent to leaves are routed, not emitted
by our local node.

------------------------------------------------------------------------
r16169 | rmanfredi | 2009-03-15 14:23:47 -0400 (Sun, 15 Mar 2009) | 3 lines

For TX dump purposes, dynamic query messages sent for non-local queries are
actually to be considered as being relayed.

------------------------------------------------------------------------
r16168 | rmanfredi | 2009-03-15 13:21:17 -0400 (Sun, 15 Mar 2009) | 2 lines

LIME/24 is HEAD Pong.

------------------------------------------------------------------------
r16167 | rmanfredi | 2009-03-15 12:54:17 -0400 (Sun, 15 Mar 2009) | 3 lines

Always dump vendor message payload as raw data if not explicitly handled.
For Push-Proxy ACK messages, decompile address and port as appropriate.

------------------------------------------------------------------------
r16166 | rmanfredi | 2009-03-15 12:38:29 -0400 (Sun, 15 Mar 2009) | 2 lines

Corrected order.

------------------------------------------------------------------------
r16165 | rmanfredi | 2009-03-15 12:29:56 -0400 (Sun, 15 Mar 2009) | 2 lines

Declared GGEP extensions "DHT" and "DHTIPP".

------------------------------------------------------------------------
r16164 | rmanfredi | 2009-03-15 12:21:21 -0400 (Sun, 15 Mar 2009) | 2 lines

Renamed parameter of keys_update_kball() to new semantics.

------------------------------------------------------------------------
r16163 | rmanfredi | 2009-03-15 12:12:09 -0400 (Sun, 15 Mar 2009) | 2 lines

Protect queues against deadly recursion in the middle of an mq_clear().

------------------------------------------------------------------------
r16162 | rmanfredi | 2009-03-15 11:34:13 -0400 (Sun, 15 Mar 2009) | 2 lines

Updated Norvegian translation by Alexander Nicolaysen Sornes.

------------------------------------------------------------------------
r16161 | rmanfredi | 2009-03-15 11:30:10 -0400 (Sun, 15 Mar 2009) | 2 lines

dump_close(): also close TX dumping if initialized.

------------------------------------------------------------------------
r16160 | rmanfredi | 2009-03-15 11:22:28 -0400 (Sun, 15 Mar 2009) | 4 lines

Added outgoing Gnutella traffic dumping.
We only log enqueued packets, not what is actually transmitted (i.e. what has
been enqueued could be dropped later).

------------------------------------------------------------------------
r16159 | rmanfredi | 2009-03-15 08:00:00 -0400 (Sun, 15 Mar 2009) | 3 lines

More DHT stats: count publishing and removals processed, plus rejected
creations due to bad creator specifications.

------------------------------------------------------------------------
r16158 | rmanfredi | 2009-03-15 07:33:43 -0400 (Sun, 15 Mar 2009) | 2 lines

Fixed statistics strings.

------------------------------------------------------------------------
r16157 | rmanfredi | 2009-03-15 07:28:30 -0400 (Sun, 15 Mar 2009) | 2 lines

Extracted node RX traffic dump to a separate file.

------------------------------------------------------------------------
r16156 | rmanfredi | 2009-03-15 07:25:32 -0400 (Sun, 15 Mar 2009) | 2 lines

Fixed too long a line.

------------------------------------------------------------------------
r16155 | rmanfredi | 2009-03-15 07:15:24 -0400 (Sun, 15 Mar 2009) | 2 lines

Fixed cpp inclusion protections:  file is in core, not lib.

------------------------------------------------------------------------
r16154 | rmanfredi | 2009-03-15 07:12:23 -0400 (Sun, 15 Mar 2009) | 2 lines

Fixed copyright.

------------------------------------------------------------------------
r16153 | rmanfredi | 2009-03-15 06:35:01 -0400 (Sun, 15 Mar 2009) | 2 lines

Added knowledge about "SO" and "PR" GGEP extensions.

------------------------------------------------------------------------
r16152 | rmanfredi | 2009-03-14 18:01:57 -0400 (Sat, 14 Mar 2009) | 3 lines

dht_close(): don't do anything if the DHT was never initialized.
Don't make dht_route_store() public.

------------------------------------------------------------------------
r16151 | rmanfredi | 2009-03-14 16:47:18 -0400 (Sat, 14 Mar 2009) | 2 lines

We can start the k-ball computation as soon as we are seeded.

------------------------------------------------------------------------
r16150 | rmanfredi | 2009-03-14 16:33:26 -0400 (Sat, 14 Mar 2009) | 2 lines

More routing table statistics gathering.

------------------------------------------------------------------------
r16149 | rmanfredi | 2009-03-14 15:21:06 -0400 (Sat, 14 Mar 2009) | 4 lines

Increased max amount of values we can store from 64K to 128K, to be certain
we can absorb foreseen traffic increase for the next 2-3 years!
Added more DHT stats on the routing table, bucket refresh and alive checks.

------------------------------------------------------------------------
r16148 | rmanfredi | 2009-03-14 14:34:25 -0400 (Sat, 14 Mar 2009) | 2 lines

Buglets.

------------------------------------------------------------------------
r16147 | rmanfredi | 2009-03-14 13:14:32 -0400 (Sat, 14 Mar 2009) | 6 lines

Count actually retained routes when forwarding a push, as opposed to the
raw list we got from the routing table.
route_push(): fixed improper change made in r16145: we only record the route,
we don't actually send the message immediately, so we cannot use stack
variables.  Record the neighbouring GUID in the routing table instead.

------------------------------------------------------------------------
r16146 | rmanfredi | 2009-03-14 12:03:36 -0400 (Sat, 14 Mar 2009) | 4 lines

Added statistics about the k-ball and the estimated DHT size.
Half the current DHT size estimate because our quick method over-estimates.
Keep 64 other estimated sizes from other nodes.

------------------------------------------------------------------------
r16145 | rmanfredi | 2009-03-14 11:20:25 -0400 (Sat, 14 Mar 2009) | 5 lines

Try harder to find a route to the proper GUID: if we can spot a neighbouring
node that bears the GUID, we have a local route.
Count the amount of push messages we relay via a local route and via the
routing table.

------------------------------------------------------------------------
r16144 | rmanfredi | 2009-03-14 11:16:54 -0400 (Sat, 14 Mar 2009) | 3 lines

Try harder to locate the GUID target amongst our neighbours and count the
found routes that were not proxied.

------------------------------------------------------------------------
r16143 | rmanfredi | 2009-03-14 11:14:22 -0400 (Sat, 14 Mar 2009) | 2 lines

Detect and count collisions with our own GUID.

------------------------------------------------------------------------
r16142 | rmanfredi | 2009-03-14 11:11:59 -0400 (Sat, 14 Mar 2009) | 2 lines

Defined 4 new statistics counters.

------------------------------------------------------------------------
r16141 | rmanfredi | 2009-03-14 11:04:37 -0400 (Sat, 14 Mar 2009) | 2 lines

Edited comment.

------------------------------------------------------------------------
r16140 | rmanfredi | 2009-03-13 18:30:35 -0400 (Fri, 13 Mar 2009) | 5 lines

Separate cache initialization in two routines: ipp_cache_init() which must
be called before settings_init(), and ipp_cache_load_all() which must be
called after settings_init(), once we know the variables are properly
initialized.

------------------------------------------------------------------------
r16139 | rmanfredi | 2009-03-13 17:05:25 -0400 (Fri, 13 Mar 2009) | 3 lines

Must take pointers to the actual properties to be able to dynamically adjust
the cache behaviour when these properties change.

------------------------------------------------------------------------
r16138 | rmanfredi | 2009-03-13 16:58:24 -0400 (Fri, 13 Mar 2009) | 2 lines

Added X_PROPERTY_PTR() macro returning a pointer to the property variable.

------------------------------------------------------------------------
r16137 | rmanfredi | 2009-03-13 16:50:30 -0400 (Fri, 13 Mar 2009) | 5 lines

Added extra logging callbacks to the asynchronous HTTP interface to allow
clients to redefine the way they do the logging.
Fixed one instance of incoming push-proxy request tracing which still relied
on push_proxy_debug instead of push_proxy_trace.

------------------------------------------------------------------------
r16136 | rmanfredi | 2009-03-13 13:54:16 -0400 (Fri, 13 Mar 2009) | 4 lines

Previous version had resource switching, but it was improved by data ignoring,
and switching after some error codes.
Added browse host response sorting.

------------------------------------------------------------------------
r16135 | rmanfredi | 2009-03-13 13:31:00 -0400 (Fri, 13 Mar 2009) | 2 lines

Identified more changes.

------------------------------------------------------------------------
r16134 | rmanfredi | 2009-03-13 12:25:38 -0400 (Fri, 13 Mar 2009) | 2 lines

First compilation of changes since last release.

------------------------------------------------------------------------
r16133 | rmanfredi | 2009-03-13 09:00:20 -0400 (Fri, 13 Mar 2009) | 4 lines

Added cache of the IP:port that our local peer is using, to be able to
ignore alt-locs bearing our recent IP:port and avoid launching downloads
to these IP:port.  Fixes bug #2628899.

------------------------------------------------------------------------
r16132 | rmanfredi | 2009-03-13 07:57:50 -0400 (Fri, 13 Mar 2009) | 2 lines

Added class-C network.

------------------------------------------------------------------------
r16131 | rmanfredi | 2009-03-12 17:30:26 -0400 (Thu, 12 Mar 2009) | 2 lines

Merged g2_cache.c and tls_cache.c into new ipp_cache.c.

------------------------------------------------------------------------
r16130 | rmanfredi | 2009-03-12 08:31:23 -0400 (Thu, 12 Mar 2009) | 3 lines

dmesh_alternate_location(): activated good alt-loc filtering for incomplete
files.

------------------------------------------------------------------------
r16129 | rmanfredi | 2009-03-12 02:47:48 -0400 (Thu, 12 Mar 2009) | 2 lines

Good bye "gdouble" and "gfloat".

------------------------------------------------------------------------
r16128 | rmanfredi | 2009-03-12 02:36:53 -0400 (Thu, 12 Mar 2009) | 2 lines

Also log processing time of socket_udp_event() when debugging.

------------------------------------------------------------------------
r16127 | cbiere | 2009-03-11 19:18:10 -0400 (Wed, 11 Mar 2009) | 3 lines

 * socket_udp_event(): Cast size_t to unsigned long for printf-like purposes
   by unwritten convention.

------------------------------------------------------------------------
r16126 | rmanfredi | 2009-03-11 16:41:39 -0400 (Wed, 11 Mar 2009) | 4 lines

Fixed subzone management by removing the zn_next pointer and linking
everything out of the embedded subzone.  That way, traversing of the subzones
is straightforward.

------------------------------------------------------------------------
r16125 | rmanfredi | 2009-03-11 16:15:26 -0400 (Wed, 11 Mar 2009) | 6 lines

Changed signature of keys_get() to return whether the key was cached (in the
Kademlia sense, i.e. falling outside of our k-ball).
Count the amount of returned expanded values and secondary keys, as well as
claimed values through secondary keys.  Duplicate these counters for the
subset of cached keys (Kademlia sense).

------------------------------------------------------------------------
r16124 | rmanfredi | 2009-03-11 16:11:10 -0400 (Wed, 11 Mar 2009) | 5 lines

As soon as we have completed the initial lookup for our KUID, we know enough
to compute the size of our k-ball.
Factorized collision logging code and count KUID collisions and KUID clashes
with our own KUID.

------------------------------------------------------------------------
r16123 | rmanfredi | 2009-03-11 16:09:13 -0400 (Wed, 11 Mar 2009) | 2 lines

Added 8 more DHT stats counters.

------------------------------------------------------------------------
r16122 | rmanfredi | 2009-03-11 12:39:44 -0400 (Wed, 11 Mar 2009) | 4 lines

Modified rpc_cb_free() to invoke the timeout callback when shutting down to
let callers who registered the RPC clean up their data structures and
avoid false-positives in leak reports.

------------------------------------------------------------------------
r16121 | rmanfredi | 2009-03-11 12:37:49 -0400 (Wed, 11 Mar 2009) | 4 lines

Modified keys_update_kball() so that we get notified when the DHT is fully
bootstrapped.  Flag the keys that fall outside of our k-ball as cached ones.
Count all the cached keys we hold and how often we get hits on these keys.

------------------------------------------------------------------------
r16120 | rmanfredi | 2009-03-10 19:06:55 -0400 (Tue, 10 Mar 2009) | 2 lines

Count the amount of bytes read from the UDP RX buffer, used for debugging info.

------------------------------------------------------------------------
r16119 | rmanfredi | 2009-03-10 18:23:58 -0400 (Tue, 10 Mar 2009) | 4 lines

Read more UDP datagrams per I/O event triggering: it helps drain the small
UDP receive buffer, and the more we read, the less we have to pay the system
overhead of scheduling an I/O event when receiving UDP bursts.

------------------------------------------------------------------------
r16118 | rmanfredi | 2009-03-10 16:57:49 -0400 (Tue, 10 Mar 2009) | 3 lines

Reduced decimation factor outside our k-ball from 1.5 to 1.2.  Being too
harsh on decimation removes some usefulness to Kademlia's caching mechanism.

------------------------------------------------------------------------
r16117 | rmanfredi | 2009-03-10 16:14:17 -0400 (Tue, 10 Mar 2009) | 3 lines

socket_udp_event(): debugging message is now logging at least 2 loops,
so we know it's always a plural.

------------------------------------------------------------------------
r16116 | cbiere | 2009-03-10 16:06:57 -0400 (Tue, 10 Mar 2009) | 2 lines

 * socket_udp_event(): Don't do weird stuff with iterators in for-loops.

------------------------------------------------------------------------
r16115 | rmanfredi | 2009-03-10 15:53:38 -0400 (Tue, 10 Mar 2009) | 3 lines

Reflected some message string updates in statistics.
Fixed some really weird French translation messages.

------------------------------------------------------------------------
r16114 | rmanfredi | 2009-03-10 15:51:37 -0400 (Tue, 10 Mar 2009) | 5 lines

Count UDP-received pushes relayed to a single host with a matching GUID as
a successful UDP push-proxy relaying, in "push_proxy_udp_relayed".
Renamed old statistic variable "push_proxy_relayed" as "push_proxy_tcp_relayed"
for symmetrical reasons.

------------------------------------------------------------------------
r16113 | rmanfredi | 2009-03-10 14:50:57 -0400 (Tue, 10 Mar 2009) | 4 lines

socket_udp_event(): when no kqueue() is available, we can't know beforehand
how much unread data there is, so assume there is a lot and iterate until
we cannot read anything more.

------------------------------------------------------------------------
r16112 | rmanfredi | 2009-03-10 11:41:33 -0400 (Tue, 10 Mar 2009) | 2 lines

Regenerated properties.

------------------------------------------------------------------------
r16111 | rmanfredi | 2009-03-10 11:32:51 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gint" and "gchar".

------------------------------------------------------------------------
r16110 | rmanfredi | 2009-03-10 11:27:43 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gchar" and "gint".

------------------------------------------------------------------------
r16109 | rmanfredi | 2009-03-10 11:22:47 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gchar" and "gint".

------------------------------------------------------------------------
r16108 | rmanfredi | 2009-03-10 11:19:52 -0400 (Tue, 10 Mar 2009) | 2 lines

Bye bye "gint".

------------------------------------------------------------------------
r16107 | rmanfredi | 2009-03-10 11:17:38 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gchar" and "gint".

------------------------------------------------------------------------
r16106 | rmanfredi | 2009-03-10 11:16:31 -0400 (Tue, 10 Mar 2009) | 2 lines

Bye bye "gint".

------------------------------------------------------------------------
r16105 | rmanfredi | 2009-03-10 10:58:50 -0400 (Tue, 10 Mar 2009) | 2 lines

Bye bye "gchar" and "gint".

------------------------------------------------------------------------
r16104 | rmanfredi | 2009-03-10 10:58:09 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gchar".

------------------------------------------------------------------------
r16103 | rmanfredi | 2009-03-10 10:53:39 -0400 (Tue, 10 Mar 2009) | 2 lines

Good bye "gchar".

------------------------------------------------------------------------
r16102 | rmanfredi | 2009-03-10 10:46:14 -0400 (Tue, 10 Mar 2009) | 2 lines

Removed all "gchar".

------------------------------------------------------------------------
r16101 | rmanfredi | 2009-03-10 10:44:05 -0400 (Tue, 10 Mar 2009) | 2 lines

Removed all "gchar".

------------------------------------------------------------------------
r16100 | rmanfredi | 2009-03-10 10:42:31 -0400 (Tue, 10 Mar 2009) | 10 lines

Removed all use of "gchar".
Count duplicate downloads encountered during server consolidation.
Forgot to call download_unqueue() in download_force_stop(), since contrary to
download_stop(), we can be called on a queued download.  This was causing
duplicate downloads to stick around in the GUI.
Moved duplicate code from download_remove() to download_unqueue(), adding an
extra boolean parameter to know when called from download_unqueue().
Warn when calling download_remove() on a download that is still supposed to
be used by a background task.

------------------------------------------------------------------------
r16099 | rmanfredi | 2009-03-10 09:43:22 -0400 (Tue, 10 Mar 2009) | 2 lines

Cound UDP messages with blank source address as "udp_bogus_source_ip".

------------------------------------------------------------------------
r16098 | rmanfredi | 2009-03-10 05:27:34 -0400 (Tue, 10 Mar 2009) | 2 lines

Fixed statistic message string: "uploaders" -> "upload requests".

------------------------------------------------------------------------
r16097 | rmanfredi | 2009-03-10 05:20:35 -0400 (Tue, 10 Mar 2009) | 3 lines

download_force_stop(): must mark the download as "unavailable" to have it
cleared from the GUI.

------------------------------------------------------------------------
r16096 | rmanfredi | 2009-03-10 05:13:01 -0400 (Tue, 10 Mar 2009) | 4 lines

Count number of GUID changes we spot.
Relaxed assertion in get_server(): possible GUID clashing makes it difficult
to be too strong here.

------------------------------------------------------------------------
r16095 | rmanfredi | 2009-03-10 02:23:16 -0400 (Tue, 10 Mar 2009) | 4 lines

Had forgotten to update the dl_by_host table when discovering the GUIDs,
which could possibly cause corruption in the hash table since we were modifying
the key without rehashing it.

------------------------------------------------------------------------
r16094 | cbiere | 2009-03-09 17:26:22 -0400 (Mon, 09 Mar 2009) | 4 lines

 * socket_udp_accept():
   * Reject UDP packets from unspecified addresses.
   * Use a local buffer on the stack for control data.

------------------------------------------------------------------------
r16093 | cbiere | 2009-03-09 15:06:46 -0400 (Mon, 09 Mar 2009) | 3 lines

 * settings_addr_changed(): Accept unusable addresses like "0.0.0.0" and "::".
   They are rejected for not being routable anyway.

------------------------------------------------------------------------
r16092 | cbiere | 2009-03-09 14:05:35 -0400 (Mon, 09 Mar 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16091 | rmanfredi | 2009-03-08 17:58:25 -0400 (Sun, 08 Mar 2009) | 2 lines

Fixed some strings.

------------------------------------------------------------------------
r16090 | rmanfredi | 2009-03-08 16:08:15 -0400 (Sun, 08 Mar 2009) | 3 lines

Honour download's retry_after time when switching after an error condition,
to avoid switching back and forth between two downloads on the same host.

------------------------------------------------------------------------
r16089 | rmanfredi | 2009-03-08 14:03:52 -0400 (Sun, 08 Mar 2009) | 4 lines

Parse X-FW-Node-Info information we get from uploaders and propagate that
to the download layer so that we may consolidate server information for
hosts we know about already, and get the freshest push-proxies.

------------------------------------------------------------------------
r16088 | cbiere | 2009-03-08 13:58:23 -0400 (Sun, 08 Mar 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r16087 | rmanfredi | 2009-03-08 08:32:32 -0400 (Sun, 08 Mar 2009) | 2 lines

Count discovered server GUIDs.

------------------------------------------------------------------------
r16086 | rmanfredi | 2009-03-08 08:14:37 -0400 (Sun, 08 Mar 2009) | 2 lines

Count amount of server consolidations we perform.

------------------------------------------------------------------------
r16085 | rmanfredi | 2009-03-08 07:48:25 -0400 (Sun, 08 Mar 2009) | 2 lines

Removed spurious trailing ")" in messages.

------------------------------------------------------------------------
r16084 | rmanfredi | 2009-03-08 07:39:03 -0400 (Sun, 08 Mar 2009) | 3 lines

Count amount of DHT value fetch issued through secondary keys, and the amount
of duplicate values we get back.

------------------------------------------------------------------------
r16083 | rmanfredi | 2009-03-08 07:16:39 -0400 (Sun, 08 Mar 2009) | 2 lines

Count amount of Retry-After violations we see and how much kicks out it causes.

------------------------------------------------------------------------
r16082 | rmanfredi | 2009-03-08 06:38:43 -0400 (Sun, 08 Mar 2009) | 3 lines

Show error count as "E=%u" if we have a follow-up request after we reported
some errors already.

------------------------------------------------------------------------
r16081 | rmanfredi | 2009-03-08 06:35:52 -0400 (Sun, 08 Mar 2009) | 4 lines

Allow resource switching after some well-defined server errors if it kept
the connection open and error does not require us to setup content sinking.
Count the amount of occurrences of error-triggered switching. 

------------------------------------------------------------------------
r16080 | rmanfredi | 2009-03-08 06:19:22 -0400 (Sun, 08 Mar 2009) | 2 lines

Comment editing.

------------------------------------------------------------------------
r16079 | rmanfredi | 2009-03-07 15:38:04 -0500 (Sat, 07 Mar 2009) | 5 lines

Restored "library rebuild", "SHA-1/TTH recomputed" errors to 503, since they
are transient and can be retried after a short period of time.
Count the number of follow-up requests clients make after we returned an error
code, keeping the connection alive.

------------------------------------------------------------------------
r16078 | rmanfredi | 2009-03-07 14:53:09 -0500 (Sat, 07 Mar 2009) | 5 lines

Be consistent, prefix all defined symbols with STRTOK.
To make the delimiter optimization useful when dealing with non-ASCII (e.g.
latin-1 or UTF-8), read and write chars as 8-bit unsigned quantities.
As a precaution, use saturated integer arithmetic when growing the token buffer.

------------------------------------------------------------------------
r16077 | rmanfredi | 2009-03-07 13:25:40 -0500 (Sat, 07 Mar 2009) | 3 lines

Added counter for remote HTTP requests issued after we sent back an error
code on a kept-alive connection.

------------------------------------------------------------------------
r16076 | rmanfredi | 2009-03-07 13:24:15 -0500 (Sat, 07 Mar 2009) | 2 lines

Sunk HTTP data must also be shown as a byte count.

------------------------------------------------------------------------
r16075 | rmanfredi | 2009-03-07 12:41:11 -0500 (Sat, 07 Mar 2009) | 2 lines

Removed spurious \n in trace: header already ends with a \r\n sequence anyway.

------------------------------------------------------------------------
r16074 | rmanfredi | 2009-03-07 12:39:27 -0500 (Sat, 07 Mar 2009) | 6 lines

When sending a non-fatal error back, do not close the HTTP connection until
we are sending too many errors...  This allows them to adjust the request or
the resource they want, preserving the connection they got.
Removed the GTA_UL_PFSP_WAITING state which was now a special-case of our new
non-closing policy.

------------------------------------------------------------------------
r16073 | rmanfredi | 2009-03-07 10:22:47 -0500 (Sat, 07 Mar 2009) | 2 lines

Show remove message for completed chunks, if one was supplied.

------------------------------------------------------------------------
r16072 | rmanfredi | 2009-03-07 06:48:33 -0500 (Sat, 07 Mar 2009) | 3 lines

Replaced inlined code by call to seckeys_free().
Plugged memory leak in seckeys_free().

------------------------------------------------------------------------
r16071 | rmanfredi | 2009-03-07 06:12:11 -0500 (Sat, 07 Mar 2009) | 2 lines

Added 2 class C networks.

------------------------------------------------------------------------
r16070 | rmanfredi | 2009-03-07 05:54:41 -0500 (Sat, 07 Mar 2009) | 2 lines

Added counter for sunk data.

------------------------------------------------------------------------
r16069 | rmanfredi | 2009-03-07 05:51:10 -0500 (Sat, 07 Mar 2009) | 2 lines

Removed FIXME comment, since fix was done.

------------------------------------------------------------------------
r16068 | rmanfredi | 2009-03-07 05:48:47 -0500 (Sat, 07 Mar 2009) | 2 lines

We don't even need to collect the token when looking for a match.

------------------------------------------------------------------------
r16067 | rmanfredi | 2009-03-07 05:44:52 -0500 (Sat, 07 Mar 2009) | 2 lines

Optimized strtok_has() to avoid double string comparisons.

------------------------------------------------------------------------
r16066 | rmanfredi | 2009-03-07 02:52:43 -0500 (Sat, 07 Mar 2009) | 5 lines

Plugged in new string tokenizer, replacing legacy strtok() calls with new
ones and making formal parsing of Accept headers and other Content-Encoding...
Removed obsolete code and fixed one range checking test which was obvisouly
wrong.

------------------------------------------------------------------------
r16065 | rmanfredi | 2009-03-07 02:49:35 -0500 (Sat, 07 Mar 2009) | 3 lines

Added string tokenizer that does not modify the parsed string, contrary to
the way plain stock strtok() is implemented.

------------------------------------------------------------------------
r16064 | cbiere | 2009-03-04 14:49:13 -0500 (Wed, 04 Mar 2009) | 2 lines

 * socket_connect_prepare(): Handle error to avoid later assertion failure.

------------------------------------------------------------------------
r16063 | cbiere | 2009-03-04 14:44:31 -0500 (Wed, 04 Mar 2009) | 4 lines

 * Don't include a non-standard header like malloc.h, especially not unconditionally.
 * Rearranged code so that memalign() and posix_memalign() are not seen by the
   compiler at all if mmap() is available. cygwin should have mmap().

------------------------------------------------------------------------
r16062 | cbiere | 2009-03-04 14:38:35 -0500 (Wed, 04 Mar 2009) | 2 lines

 * Removed non-existing files.

------------------------------------------------------------------------
r16061 | cbiere | 2009-03-04 14:33:56 -0500 (Wed, 04 Mar 2009) | 4 lines

 * Removed glibberish as far as possible.
 * Prevented compiler warnings.
 * Replaced opaque pointers with typed pointers in interface.

------------------------------------------------------------------------
r16060 | cbiere | 2009-03-04 14:27:37 -0500 (Wed, 04 Mar 2009) | 2 lines

 * http_send_status: Prevent uninitialized variable.

------------------------------------------------------------------------
r16059 | rmanfredi | 2009-03-04 07:37:51 -0500 (Wed, 04 Mar 2009) | 2 lines

Removed deleted files from includes and Makefiles.

------------------------------------------------------------------------
r16058 | rmanfredi | 2009-03-04 07:36:44 -0500 (Wed, 04 Mar 2009) | 2 lines

Need to include <malloc.h> on cygwin to get the declaration of memalign().

------------------------------------------------------------------------
r16057 | rmanfredi | 2009-03-04 07:35:39 -0500 (Wed, 04 Mar 2009) | 3 lines

The name "infinity" is reserved on cygwin (defined in <math.h>) and cannot
be used as a function parameter name.

------------------------------------------------------------------------
r16056 | rmanfredi | 2009-03-03 18:13:16 -0500 (Tue, 03 Mar 2009) | 2 lines

Had swapped two lines: spurious OOB hits and unrequested OOB hits received.

------------------------------------------------------------------------
r16055 | rmanfredi | 2009-03-03 17:04:33 -0500 (Tue, 03 Mar 2009) | 6 lines

Made download_reparent() smarter, to avoid duplicate downloads.
After a download_reparent_all(), make sure the duplicate server cannot be
returned by a subsequent get_server().
Added ability to merge two servers into one, when we discover duplicates
upon reception of a GIV string.

------------------------------------------------------------------------
r16054 | rmanfredi | 2009-03-03 16:58:00 -0500 (Tue, 03 Mar 2009) | 4 lines

Each unsuccessful verification start accounts for 1/10th of a CPU-intensive
tick, to avoid under-estimating the time spent opening files and checking
for presence in cache.

------------------------------------------------------------------------
r16053 | rmanfredi | 2009-03-03 11:56:12 -0500 (Tue, 03 Mar 2009) | 2 lines

Removed references to suppressed files.

------------------------------------------------------------------------
r16052 | rmanfredi | 2009-03-03 09:52:50 -0500 (Tue, 03 Mar 2009) | 2 lines

Removed empty files.

------------------------------------------------------------------------
r16051 | rmanfredi | 2009-03-03 08:49:54 -0500 (Tue, 03 Mar 2009) | 4 lines

Revisited server / GUID tracking logic.  For resource switching to be as
efficient as possible, we need to accurately track downloads per server and
consolidate what belongs together.

------------------------------------------------------------------------
r16050 | rmanfredi | 2009-03-03 08:47:24 -0500 (Tue, 03 Mar 2009) | 2 lines

Count discarded QUEUE callbacks.

------------------------------------------------------------------------
r16049 | rmanfredi | 2009-03-03 08:41:09 -0500 (Tue, 03 Mar 2009) | 2 lines

Added counters for GIV and QUEUE server callbacks that end-up being discarded.

------------------------------------------------------------------------
r16048 | rmanfredi | 2009-03-03 08:39:45 -0500 (Tue, 03 Mar 2009) | 3 lines

Avoid endless aggressive chunk splitting.  When the result would be less
than FI_MIN_CHUNK_SPLIT byte long, steal the whole remaining part!

------------------------------------------------------------------------
r16047 | rmanfredi | 2009-03-02 15:36:46 -0500 (Mon, 02 Mar 2009) | 4 lines

Renamed host_port_addr_to_string() as port_host_addr_to_string() to both
emphasize its oddity and to avoid (visual) confusion with the often used
host_addr_port_to_string().

------------------------------------------------------------------------
r16046 | rmanfredi | 2009-03-02 15:02:45 -0500 (Mon, 02 Mar 2009) | 2 lines

Reverted previous "fix", not sure the old flow was the root of the problem.

------------------------------------------------------------------------
r16045 | cbiere | 2009-03-02 14:17:14 -0500 (Mon, 02 Mar 2009) | 2 lines

 * Simplified code and prevented use of uninitialized variables.

------------------------------------------------------------------------
r16044 | rmanfredi | 2009-03-02 11:57:20 -0500 (Mon, 02 Mar 2009) | 2 lines

Fixed debugging message.

------------------------------------------------------------------------
r16043 | rmanfredi | 2009-03-02 11:34:02 -0500 (Mon, 02 Mar 2009) | 4 lines

Plugged memory leak.
Fixed unfortunate bug that caused all secondary-fetched values for a key
to be discarded.

------------------------------------------------------------------------
r16042 | rmanfredi | 2009-03-02 10:55:15 -0500 (Mon, 02 Mar 2009) | 3 lines

If the verify_start() callback returns FALSE, the entry must be skipped but
we must not shutdown the whole verification process.

------------------------------------------------------------------------
r16041 | rmanfredi | 2009-03-02 10:26:43 -0500 (Mon, 02 Mar 2009) | 2 lines

Count SHA-1 resource switches we see occurring at the PARQ slot level.

------------------------------------------------------------------------
r16040 | rmanfredi | 2009-03-02 09:19:52 -0500 (Mon, 02 Mar 2009) | 2 lines

Send out X-FW-Node-Info and/or X-Push-Proxies on HTTP errors as well.

------------------------------------------------------------------------
r16039 | rmanfredi | 2009-03-02 09:19:03 -0500 (Mon, 02 Mar 2009) | 6 lines

node_http_proxies_add() will now exmit X-FW-Node-Info if we are firewalled,
and X-Push-Proxies if we have known push-proxies.  These are sent as two
separate headers to accomodate legacy servents who know only about the
X-Push-Proxies header, the X-FW-Node-Info being LimeWire-specific and not
specified publicly.

------------------------------------------------------------------------
r16038 | rmanfredi | 2009-03-02 09:16:58 -0500 (Mon, 02 Mar 2009) | 3 lines

Parse X-FW-Node-Info first, and if we do not see any push-proxies, fallback
to parsing X-Push-Proxy.

------------------------------------------------------------------------
r16037 | rmanfredi | 2009-03-02 09:15:42 -0500 (Mon, 02 Mar 2009) | 2 lines

Added host_port_addr_to_string_buf() and host_port_addr_to_string().

------------------------------------------------------------------------
r16036 | rmanfredi | 2009-03-02 09:15:06 -0500 (Mon, 02 Mar 2009) | 2 lines

Static initialization of ipv4_loopback must account for host byte order.

------------------------------------------------------------------------
r16035 | rmanfredi | 2009-03-02 09:13:40 -0500 (Mon, 02 Mar 2009) | 2 lines

stripped_strlen(): use is_ascii_blank() to spot trailing blanks.

------------------------------------------------------------------------
r16034 | rmanfredi | 2009-03-02 09:12:50 -0500 (Mon, 02 Mar 2009) | 2 lines

is_local_addr(): always compare with the default loopback addresses.

------------------------------------------------------------------------
r16033 | rmanfredi | 2009-03-02 04:23:59 -0500 (Mon, 02 Mar 2009) | 3 lines

Added parsing of X-FW-Node-Info headers to grab push-proxies from firewalled
hosts, as well as gather the proper GUID and host address/port.

------------------------------------------------------------------------
r16032 | rmanfredi | 2009-03-02 04:22:20 -0500 (Mon, 02 Mar 2009) | 2 lines

Added string_to_port_host_addr() to parse "port:IP" strings.

------------------------------------------------------------------------
r16031 | rmanfredi | 2009-03-02 04:20:27 -0500 (Mon, 02 Mar 2009) | 2 lines

Broke up too long a line.

------------------------------------------------------------------------
r16030 | rmanfredi | 2009-03-02 04:19:31 -0500 (Mon, 02 Mar 2009) | 2 lines

Fixed brace mixup, sorry.

------------------------------------------------------------------------
r16029 | bpringlemeir | 2009-03-01 22:16:58 -0500 (Sun, 01 Mar 2009) | 2 lines

Brace for it: Fixed syntax.  Previous revision will not compile.

------------------------------------------------------------------------
r16028 | rmanfredi | 2009-03-01 13:21:03 -0500 (Sun, 01 Mar 2009) | 5 lines

Allow resource switching in PARQ uploads.
Flag special uploads: normally we always allow these to go through, but they
can be used through a slot via resource switching, so we must make sure
parq_still_sharing() returns TRUE for them.

------------------------------------------------------------------------
r16027 | rmanfredi | 2009-03-01 09:59:18 -0500 (Sun, 01 Mar 2009) | 2 lines

Count remote resource switching that we manage to spot.

------------------------------------------------------------------------
r16026 | rmanfredi | 2009-03-01 07:47:48 -0500 (Sun, 01 Mar 2009) | 3 lines

Was wrongly defining FILE_REV_OFFSET instead USED_REV_OFFSET when only
ZONE_SAFE was defined.

------------------------------------------------------------------------
r16025 | rmanfredi | 2009-03-01 07:33:12 -0500 (Sun, 01 Mar 2009) | 2 lines

Fixed memory leak: forgot to call ext_reset().

------------------------------------------------------------------------
r16024 | rmanfredi | 2009-03-01 07:24:17 -0500 (Sun, 01 Mar 2009) | 5 lines

Made lookup_free_value_results() and lookup_free_results() static routines:
the result set is now clear automatically upon callback return.  It is up to
the callback to copy any data it would want to preserve.
Fixed lookup_free_value_results() which was not freeing value data.

------------------------------------------------------------------------
r16023 | rmanfredi | 2009-03-01 07:02:52 -0500 (Sun, 01 Mar 2009) | 2 lines

Avoid defining both an inlined routine and a macro bearing the same name.

------------------------------------------------------------------------
r16022 | rmanfredi | 2009-03-01 07:02:10 -0500 (Sun, 01 Mar 2009) | 2 lines

Use wcopy().

------------------------------------------------------------------------
r16021 | rmanfredi | 2009-03-01 06:43:23 -0500 (Sun, 01 Mar 2009) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r16020 | rmanfredi | 2009-03-01 05:21:56 -0500 (Sun, 01 Mar 2009) | 2 lines

Use _WHERE_ instead of __FILE__ to track allocation file names.

------------------------------------------------------------------------
r16019 | rmanfredi | 2009-03-01 04:51:00 -0500 (Sun, 01 Mar 2009) | 2 lines

Always seed completed files (whose SHA-1 has been verified).

------------------------------------------------------------------------
r16018 | rmanfredi | 2009-03-01 04:37:19 -0500 (Sun, 01 Mar 2009) | 3 lines

Always seed completed files, regardless of their size (no PFSP minimum as with
partial files).

------------------------------------------------------------------------
r16017 | rmanfredi | 2009-02-28 19:01:19 -0500 (Sat, 28 Feb 2009) | 3 lines

Plugged in new counter for successful plain file switching.
Added debugging messages when SHA1 or TTH verification is launched.

------------------------------------------------------------------------
r16016 | rmanfredi | 2009-02-28 18:59:09 -0500 (Sat, 28 Feb 2009) | 3 lines

Added counter for successful plain file switching (i.e. not between a THEX
or browse download and a plain file, but between two plain files).

------------------------------------------------------------------------
r16015 | rmanfredi | 2009-02-28 18:56:20 -0500 (Sat, 28 Feb 2009) | 2 lines

Fized zdump_used() to make it work properly with subzones.

------------------------------------------------------------------------
r16014 | rmanfredi | 2009-02-28 18:55:31 -0500 (Sat, 28 Feb 2009) | 2 lines

Use _WHERE_ instead of __FILE__ to track allocation file names.

------------------------------------------------------------------------
r16013 | rmanfredi | 2009-02-28 17:01:16 -0500 (Sat, 28 Feb 2009) | 2 lines

Forgot to free cache entry during final cleanup.

------------------------------------------------------------------------
r16012 | rmanfredi | 2009-02-28 16:59:44 -0500 (Sat, 28 Feb 2009) | 2 lines

Forgot to commit this file when adding new ignoring stats.

------------------------------------------------------------------------
r16011 | rmanfredi | 2009-02-28 16:58:32 -0500 (Sat, 28 Feb 2009) | 2 lines

Removed obsolete comment.

------------------------------------------------------------------------
r16010 | rmanfredi | 2009-02-28 16:57:46 -0500 (Sat, 28 Feb 2009) | 2 lines

Use new "verify_debug" property for debugging instead of obsolete "dbg".

------------------------------------------------------------------------
r16009 | rmanfredi | 2009-02-28 16:56:39 -0500 (Sat, 28 Feb 2009) | 2 lines

Added the "verify_debug" property.

------------------------------------------------------------------------
r16008 | rmanfredi | 2009-02-28 11:29:50 -0500 (Sat, 28 Feb 2009) | 3 lines

Count occurrences when we cannot ignore due to hardwired sanity checks: data
too large or ignoring would take too long given the current server throughput.

------------------------------------------------------------------------
r16007 | rmanfredi | 2009-02-28 09:34:55 -0500 (Sat, 28 Feb 2009) | 2 lines

Can advertise the "browse" feature during download requests as well.

------------------------------------------------------------------------
r16006 | rmanfredi | 2009-02-28 09:24:28 -0500 (Sat, 28 Feb 2009) | 4 lines

Added counters for each ignoring request case: after data mismatch, during
aggressive swarming or to preserve a connection before switching to another
download.

------------------------------------------------------------------------
r16005 | rmanfredi | 2009-02-28 09:11:50 -0500 (Sat, 28 Feb 2009) | 2 lines

Fixed assertions for download_silent_flush().

------------------------------------------------------------------------
r16004 | rmanfredi | 2009-02-28 09:01:26 -0500 (Sat, 28 Feb 2009) | 2 lines

Forgot to switch FI_F_SUSPEND to FI_F_VERIFYING here.

------------------------------------------------------------------------
r16003 | rmanfredi | 2009-02-28 08:49:23 -0500 (Sat, 28 Feb 2009) | 2 lines

Commit pending buffered data to disk before ignoring further data.

------------------------------------------------------------------------
r16002 | rmanfredi | 2009-02-28 08:18:22 -0500 (Sat, 28 Feb 2009) | 2 lines

Added explicit fileinfo flag to mark files being verified.

------------------------------------------------------------------------
r16001 | rmanfredi | 2009-02-27 12:10:33 -0500 (Fri, 27 Feb 2009) | 2 lines

Documented new "stats" command.

------------------------------------------------------------------------
r16000 | rmanfredi | 2009-02-27 12:08:51 -0500 (Fri, 27 Feb 2009) | 2 lines

Added detailed help for the "echo" command.

------------------------------------------------------------------------
r15999 | rmanfredi | 2009-02-27 12:06:27 -0500 (Fri, 27 Feb 2009) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r15998 | rmanfredi | 2009-02-27 12:02:46 -0500 (Fri, 27 Feb 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r15997 | rmanfredi | 2009-02-27 12:01:27 -0500 (Fri, 27 Feb 2009) | 2 lines

Added new shell command "stats" to print general counters.

------------------------------------------------------------------------
r15996 | rmanfredi | 2009-02-27 11:59:21 -0500 (Fri, 27 Feb 2009) | 3 lines

Added gnet_stats_general_to_string() to convert a counter index into a
variable name string.

------------------------------------------------------------------------
r15995 | rmanfredi | 2009-02-27 11:57:46 -0500 (Fri, 27 Feb 2009) | 2 lines

Declared new parq_upload_update_downloaded().

------------------------------------------------------------------------
r15994 | rmanfredi | 2009-02-27 11:56:21 -0500 (Fri, 27 Feb 2009) | 3 lines

Parse X-Downloaded: and remember it in PARQ structures, for better ETA
computations.

------------------------------------------------------------------------
r15993 | rmanfredi | 2009-02-27 11:40:34 -0500 (Fri, 27 Feb 2009) | 2 lines

Emit new X-Downloaded header.

------------------------------------------------------------------------
r15992 | rmanfredi | 2009-02-27 11:39:26 -0500 (Fri, 27 Feb 2009) | 2 lines

Added a "const" in the signature of huge_collect_locations().

------------------------------------------------------------------------
r15991 | rmanfredi | 2009-02-27 04:14:08 -0500 (Fri, 27 Feb 2009) | 4 lines

Added *_trace config variable that can govern tracing of headers independently
from debug levels.  One can trace nothing, input only, output only, or both
for each of downloads, uploads, gnet, push-proxy and other HTTP connections.

------------------------------------------------------------------------
r15990 | rmanfredi | 2009-02-27 01:28:15 -0500 (Fri, 27 Feb 2009) | 4 lines

Make sure we do not call download_verify_sha1() from download_rx_done() if the
download was not actively receiving data (i.e. ignoring only).  That would
break the pre-conditions of download_verify_sha1().

------------------------------------------------------------------------
r15989 | rmanfredi | 2009-02-26 17:18:08 -0500 (Thu, 26 Feb 2009) | 4 lines

Collect more data about slot usage and slot removals to better estimate the
ETA of downloads in a "more realistic" way than assuming they'll download
the whole file.

------------------------------------------------------------------------
r15988 | rmanfredi | 2009-02-26 17:15:40 -0500 (Thu, 26 Feb 2009) | 3 lines

Allow scheduling of special downloads without considering per-host limits,
as these are of a much shorter duration.

------------------------------------------------------------------------
r15987 | rmanfredi | 2009-02-26 17:03:37 -0500 (Thu, 26 Feb 2009) | 4 lines

Added statx_remove_oldest().
Fixed pre-condition for statx_var(): need at least 2 points to compute the
variance.

------------------------------------------------------------------------
r15986 | rmanfredi | 2009-02-24 12:53:25 -0500 (Tue, 24 Feb 2009) | 5 lines

Ignored downloads now open /dev/null to avoid accidents and also provide a
writable file descriptor to the regular code, minimizing special-casing.
Added download_slow_timer(), whose sole purpose currently is to restart
PARQ pending downloads that are not actively nor passively queued yet.

------------------------------------------------------------------------
r15985 | rmanfredi | 2009-02-24 12:50:51 -0500 (Tue, 24 Feb 2009) | 2 lines

Refactored upload punishing logic (lack of Retry-After support).

------------------------------------------------------------------------
r15984 | rmanfredi | 2009-02-24 05:34:10 -0500 (Tue, 24 Feb 2009) | 2 lines

Favor smaller downloads when picking among follow-up candidates.

------------------------------------------------------------------------
r15983 | rmanfredi | 2009-02-24 05:29:53 -0500 (Tue, 24 Feb 2009) | 3 lines

Changed debugging messages to use short_time() to present times, and include
the amount of times we caught an early upload request attempt.

------------------------------------------------------------------------
r15982 | rmanfredi | 2009-02-23 15:37:37 -0500 (Mon, 23 Feb 2009) | 2 lines

Added messages at exit time.

------------------------------------------------------------------------
r15981 | rmanfredi | 2009-02-23 15:33:44 -0500 (Mon, 23 Feb 2009) | 5 lines

Now counts successful resource switches and switches that end-up with the
download being actively queued.
Fixed THEX switching logic: must save the SHA1 from the THEX context early
in download_continue() since the context is disposed of by download_stop().

------------------------------------------------------------------------
r15980 | rmanfredi | 2009-02-22 14:20:37 -0500 (Sun, 22 Feb 2009) | 7 lines

Added statistics counters for:
  - Ignored downloaded data
  - Attempted resource switching
Improved download_pick_followup() to allow picking of "push-sent" downloads
as well, which are actually in "running" mode.  Since we have a connection
to the remote server, better attempt to use it than wait for the GIV callback.

------------------------------------------------------------------------
r15979 | rmanfredi | 2009-02-22 14:15:23 -0500 (Sun, 22 Feb 2009) | 3 lines

Removed needless special case: It's best to always trim the lifetime
of the queue entry to MIN_LIFE_TIME at most.

------------------------------------------------------------------------
r15978 | rmanfredi | 2009-02-22 14:01:33 -0500 (Sun, 22 Feb 2009) | 3 lines

Renamed shared_file_is_complete() as shared_file_is_finished().
For consistency, renamed sha1_of_complete_file() as sha1_of_finished_file().

------------------------------------------------------------------------
r15977 | rmanfredi | 2009-02-22 08:59:06 -0500 (Sun, 22 Feb 2009) | 3 lines

Changed the active queuing logic to force queuing of the next slots that are
most likely to be scheduled soon.

------------------------------------------------------------------------
r15976 | rmanfredi | 2009-02-22 08:57:24 -0500 (Sun, 22 Feb 2009) | 6 lines

Improved download_pick_followup(): make sure we only switch from a THEX
download to the download for the file whose THEX we downloaded.
Also do not switch the connection to an actively / passively queued download
for that would most probably be considered a timing violation on the server
side.

------------------------------------------------------------------------
r15975 | rmanfredi | 2009-02-22 08:54:10 -0500 (Sun, 22 Feb 2009) | 5 lines

Distinguish complete files (shared or seeded) from incomplete ones: the
expiration time of sources for complete files is much lower than those for
incomplete ones, and we make sure to propagate only good sources for incomplete
files.

------------------------------------------------------------------------
r15974 | rmanfredi | 2009-02-22 08:38:21 -0500 (Sun, 22 Feb 2009) | 2 lines

Added shared_file_is_complete().

------------------------------------------------------------------------
r15973 | rmanfredi | 2009-02-22 08:32:31 -0500 (Sun, 22 Feb 2009) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r15972 | rmanfredi | 2009-02-22 08:30:56 -0500 (Sun, 22 Feb 2009) | 3 lines

Increased default value for parq_ban_bad_maxcountwait to be nicer to the
legacy servents.

------------------------------------------------------------------------
r15971 | rmanfredi | 2009-02-11 17:37:29 -0500 (Wed, 11 Feb 2009) | 2 lines

Ensure download_flush() can only be called when receiving data.

------------------------------------------------------------------------
r15970 | rmanfredi | 2009-02-11 17:36:24 -0500 (Wed, 11 Feb 2009) | 2 lines

Handle case of shared files changing of SHA1 between runs.

------------------------------------------------------------------------
r15967 | rmanfredi | 2009-02-11 08:00:52 -0500 (Wed, 11 Feb 2009) | 4 lines

Do not test a (possibly dynamically alterable) property to decide whether
or not we store DHT data in memory or on the disk.  Rather, test the
database type explicitly.

------------------------------------------------------------------------
r15966 | cbiere | 2009-02-09 13:44:10 -0500 (Mon, 09 Feb 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15965 | cbiere | 2009-02-08 10:59:49 -0500 (Sun, 08 Feb 2009) | 2 lines

 * download_pick_random_byte(): Use get_random_file_offset().

------------------------------------------------------------------------
r15964 | cbiere | 2009-02-08 10:55:18 -0500 (Sun, 08 Feb 2009) | 2 lines

 * Moved get_random_file_offset() from fileinfo.c to misc.c.

------------------------------------------------------------------------
r15963 | rmanfredi | 2009-02-08 10:41:31 -0500 (Sun, 08 Feb 2009) | 3 lines

Fixed compile error from last commit.
Fixed download_pick_random_byte() for large size.

------------------------------------------------------------------------
r15962 | cbiere | 2009-02-08 10:35:40 -0500 (Sun, 08 Feb 2009) | 2 lines

 * Display complete and seeding files on the page for "Finished" files, too.

------------------------------------------------------------------------
r15961 | cbiere | 2009-02-08 10:30:07 -0500 (Sun, 08 Feb 2009) | 2 lines

 * map_contains(): g_hash_table_lookup_extended() accepts NULL.

------------------------------------------------------------------------
r15960 | rmanfredi | 2009-02-08 10:26:51 -0500 (Sun, 08 Feb 2009) | 4 lines

Factorized code into download_pick_random_byte().
When a chunk is done, there's no need to ignore if there is nothing more to
get from the server.

------------------------------------------------------------------------
r15959 | rmanfredi | 2009-02-08 09:41:59 -0500 (Sun, 08 Feb 2009) | 3 lines

Fixed dbmap insertion when key was present.
Added map_replace().

------------------------------------------------------------------------
r15958 | rmanfredi | 2009-02-08 09:25:45 -0500 (Sun, 08 Feb 2009) | 2 lines

Forgot to check for prior existence when inserting within the memory map.

------------------------------------------------------------------------
r15957 | rmanfredi | 2009-02-08 07:26:04 -0500 (Sun, 08 Feb 2009) | 4 lines

Do not switch away from plain regular incomplete files unless we're doing so
in favor of a special download (browse host or THEX file): the risk of losing
the slot completely is too high.

------------------------------------------------------------------------
r15956 | rmanfredi | 2009-02-08 06:35:47 -0500 (Sun, 08 Feb 2009) | 4 lines

Had forgotten to request ignoring when an active download bumps into a
completed chunk and the whole file is also complete, but the requested chunk
was not fully received yet.

------------------------------------------------------------------------
r15955 | rmanfredi | 2009-02-08 05:15:18 -0500 (Sun, 08 Feb 2009) | 3 lines

Do not cache expired keys when DHT data are kept in core.
It prevents only little duplicates anyway as of today, so no big deal.

------------------------------------------------------------------------
r15954 | rmanfredi | 2009-02-08 05:01:54 -0500 (Sun, 08 Feb 2009) | 5 lines

Removed spurious timeout/retry delay checks from download_pick_followup().
Enhanced download resource switching logic to attempt switching files when
the current file is completed.  Also favor incoming connections, trying to
preserve them, even if it means ignoring more data than we would normally allow.

------------------------------------------------------------------------
r15953 | cbiere | 2009-02-07 19:23:11 -0500 (Sat, 07 Feb 2009) | 2 lines

 * Reverted incorrectly added comment.

------------------------------------------------------------------------
r15952 | cbiere | 2009-02-07 19:17:20 -0500 (Sat, 07 Feb 2009) | 3 lines

 * Added property dht_storage_in_memory to avoid using diskspace for
   DHT storage as a full disk would cause a crash currently.

------------------------------------------------------------------------
r15951 | cbiere | 2009-02-07 18:36:20 -0500 (Sat, 07 Feb 2009) | 2 lines

 * Use POSIX definitions instead of raw numbers for file modes.

------------------------------------------------------------------------
r15950 | cbiere | 2009-02-07 15:57:26 -0500 (Sat, 07 Feb 2009) | 2 lines

 * Check for obviously corrupted vendor codes.

------------------------------------------------------------------------
r15949 | cbiere | 2009-02-07 14:45:10 -0500 (Sat, 07 Feb 2009) | 2 lines

 * 1408 new items.

------------------------------------------------------------------------
r15948 | rmanfredi | 2009-02-07 12:18:13 -0500 (Sat, 07 Feb 2009) | 2 lines

Fixed cut-n-paste comment typo.

------------------------------------------------------------------------
r15947 | rmanfredi | 2009-02-07 09:31:05 -0500 (Sat, 07 Feb 2009) | 3 lines

Removed wrong check that prevented switching the slot we have on the remote
server to another download when the file being downloaded was complete.

------------------------------------------------------------------------
r15946 | rmanfredi | 2009-02-06 13:53:29 -0500 (Fri, 06 Feb 2009) | 4 lines

If the query contains an invalid IP:port, clear the OOB flag only when
it comes from a leaf node (and we may then OOB-proxy it); otherwise drop
a relayed query (results cannot be sent back, no need to propagate further).

------------------------------------------------------------------------
r15945 | cbiere | 2009-02-06 13:24:38 -0500 (Fri, 06 Feb 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15944 | cbiere | 2009-02-05 20:10:43 -0500 (Thu, 05 Feb 2009) | 2 lines

 * Ensure SIZE_MAX is defined.

------------------------------------------------------------------------
r15943 | cbiere | 2009-02-05 13:28:36 -0500 (Thu, 05 Feb 2009) | 2 lines

 * Added more shell interface documentation.

------------------------------------------------------------------------
r15942 | rmanfredi | 2009-02-05 01:22:16 -0500 (Thu, 05 Feb 2009) | 5 lines

Make sure we only check the return address of OOB queries when they come
directly from a leaf node: from an UP, it could be an OOB-proxied query
with an adjusted ttl/hops that make them appear as coming from the UP only,
whereas the query has been relayed already by the UP.

------------------------------------------------------------------------
r15941 | cbiere | 2009-01-31 18:29:27 -0500 (Sat, 31 Jan 2009) | 5 lines

 * Refresh bitzi tickets if the user explicitely requests bitzi
   metadata. Cached tickets are automatically displayed anyway and
   because tickets expire only after months, the cached information
   may be very outdated.

------------------------------------------------------------------------
r15940 | cbiere | 2009-01-31 13:58:00 -0500 (Sat, 31 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15939 | cbiere | 2009-01-28 21:36:22 -0500 (Wed, 28 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15938 | cbiere | 2009-01-28 21:11:58 -0500 (Wed, 28 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15937 | cbiere | 2009-01-28 18:36:23 -0500 (Wed, 28 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15936 | cbiere | 2009-01-27 16:45:12 -0500 (Tue, 27 Jan 2009) | 2 lines

 * filter_init_presets(): Added some additional filename extensions.

------------------------------------------------------------------------
r15935 | cbiere | 2009-01-26 23:20:35 -0500 (Mon, 26 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15934 | cbiere | 2009-01-26 21:59:07 -0500 (Mon, 26 Jan 2009) | 2 lines

 * 1689 new items.

------------------------------------------------------------------------
r15933 | cbiere | 2009-01-26 21:07:29 -0500 (Mon, 26 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15932 | cbiere | 2009-01-26 16:26:44 -0500 (Mon, 26 Jan 2009) | 3 lines

 * search_gui_handle_url(): This should never create searches but
   downloads, thus pass directly to download handling code.

------------------------------------------------------------------------
r15931 | cbiere | 2009-01-26 16:15:51 -0500 (Mon, 26 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15930 | cbiere | 2009-01-25 22:15:13 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Relaxed one rule.

------------------------------------------------------------------------
r15929 | cbiere | 2009-01-25 22:14:15 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Corrected URN of LICENSE.

------------------------------------------------------------------------
r15928 | cbiere | 2009-01-25 22:13:06 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Removed outdated URL.

------------------------------------------------------------------------
r15927 | cbiere | 2009-01-25 22:09:39 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Replaced GLib names with standard names as far as possible.

------------------------------------------------------------------------
r15926 | cbiere | 2009-01-25 22:04:51 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Corrected typo in comment.

------------------------------------------------------------------------
r15925 | cbiere | 2009-01-25 21:59:38 -0500 (Sun, 25 Jan 2009) | 5 lines

 * Changed metaconfig test for "__attribute__"; checking for "warning"
   is not a good idea.
 * Don't try to define __attribute__ in any case, standard C explicitely
   forbids it. Just check for HASATTRIBUTE.

------------------------------------------------------------------------
r15924 | cbiere | 2009-01-25 21:49:44 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Display advises for yum users.

------------------------------------------------------------------------
r15923 | bpringlemeir | 2009-01-25 19:53:43 -0500 (Sun, 25 Jan 2009) | 1 line

Don't re-define system/compiler names __attribute__.  Config may find a warning about this, but re-defining this as empty is not good, ever.  Created un-imaginative GTKG_ATTRIBUTE define which will be either __attribute__ or nothing.  An upgrade to gcc 4.3 caused a warning to be emitted by the config check.  This results in the call to "connect" to have a *bad* prototype.
------------------------------------------------------------------------
r15922 | cbiere | 2009-01-25 16:29:44 -0500 (Sun, 25 Jan 2009) | 2 lines

 * LimeWire doesn't seem to like more than 10 hits per QHIT packet.

------------------------------------------------------------------------
r15921 | cbiere | 2009-01-25 16:14:16 -0500 (Sun, 25 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15920 | cbiere | 2009-01-24 19:04:11 -0500 (Sat, 24 Jan 2009) | 2 lines

 * 1464 new items.

------------------------------------------------------------------------
r15919 | cbiere | 2009-01-24 09:30:26 -0500 (Sat, 24 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15918 | cbiere | 2009-01-23 21:02:48 -0500 (Fri, 23 Jan 2009) | 2 lines

 * 4090 new items.

------------------------------------------------------------------------
r15917 | cbiere | 2009-01-23 20:49:39 -0500 (Fri, 23 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15916 | cbiere | 2009-01-23 18:23:14 -0500 (Fri, 23 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15915 | cbiere | 2009-01-22 20:46:56 -0500 (Thu, 22 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15914 | cbiere | 2009-01-22 09:02:50 -0500 (Thu, 22 Jan 2009) | 2 lines

 * 1606 new items.

------------------------------------------------------------------------
r15913 | cbiere | 2009-01-21 15:23:21 -0500 (Wed, 21 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15912 | cbiere | 2009-01-19 14:28:39 -0500 (Mon, 19 Jan 2009) | 2 lines

 * 5137 new items.

------------------------------------------------------------------------
r15911 | rmanfredi | 2009-01-18 16:57:12 -0500 (Sun, 18 Jan 2009) | 4 lines

When looking up push-proxies via the DHT, we must be prepared for the
server to have been reclaimed when the reply comes back (after too many
timeouts, for instance).

------------------------------------------------------------------------
r15910 | rmanfredi | 2009-01-18 06:39:26 -0500 (Sun, 18 Jan 2009) | 4 lines

Added header object to some of the I/O header parsing callbacks in order
to parse and report remote servent vendor along with errors, to see who
is misbehaving.

------------------------------------------------------------------------
r15909 | rmanfredi | 2009-01-18 06:38:13 -0500 (Sun, 18 Jan 2009) | 4 lines

Added header object to some of the I/O header parsing callbacks in order
to parse and report remote servent vendor along with errors, to see who
is misbehaving.

------------------------------------------------------------------------
r15908 | rmanfredi | 2009-01-17 03:51:38 -0500 (Sat, 17 Jan 2009) | 3 lines

Ban Gnutella nodes sending too many weird packets for some time, from both
Gnutella and HTTP standpoints.

------------------------------------------------------------------------
r15907 | cbiere | 2009-01-16 14:49:39 -0500 (Fri, 16 Jan 2009) | 2 lines

 * search_request_preprocess(): Non-ASCII UTF-8 queries were not counted properly.

------------------------------------------------------------------------
r15906 | cbiere | 2009-01-16 14:45:14 -0500 (Fri, 16 Jan 2009) | 3 lines

 * search_handle_magnet(): Create a plain old URN search if the magnet
   provides no filename.

------------------------------------------------------------------------
r15905 | cbiere | 2009-01-16 14:03:30 -0500 (Fri, 16 Jan 2009) | 3 lines

 * search_gui_handle_magnet(): Don't create a download for a "magnet"
   providing no filename such as a plain URN search.

------------------------------------------------------------------------
r15904 | cbiere | 2009-01-16 13:53:59 -0500 (Fri, 16 Jan 2009) | 2 lines

 * [GTK] Repaired drag & drop of download file details.

------------------------------------------------------------------------
r15903 | rmanfredi | 2009-01-16 13:00:01 -0500 (Fri, 16 Jan 2009) | 2 lines

Updated.

------------------------------------------------------------------------
r15902 | rmanfredi | 2009-01-16 12:57:27 -0500 (Fri, 16 Jan 2009) | 2 lines

Regenerated.

------------------------------------------------------------------------
r15901 | rmanfredi | 2009-01-16 12:56:49 -0500 (Fri, 16 Jan 2009) | 2 lines

Disabled bogons update.

------------------------------------------------------------------------
r15900 | cbiere | 2009-01-09 17:09:23 -0500 (Fri, 09 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15899 | cbiere | 2009-01-03 09:42:46 -0500 (Sat, 03 Jan 2009) | 2 lines

 * 834 new items.

------------------------------------------------------------------------
r15898 | cbiere | 2009-01-02 07:57:19 -0500 (Fri, 02 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15897 | cbiere | 2009-01-02 06:06:22 -0500 (Fri, 02 Jan 2009) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15896 | rmanfredi | 2009-01-02 05:23:22 -0500 (Fri, 02 Jan 2009) | 3 lines

Removed token older than 3 years: these versions should be gone from the
network now.

------------------------------------------------------------------------
r15895 | rmanfredi | 2009-01-02 05:13:59 -0500 (Fri, 02 Jan 2009) | 2 lines

Don't let ancient versions run as ultra nodes.

------------------------------------------------------------------------
r15894 | cbiere | 2009-01-02 03:57:51 -0500 (Fri, 02 Jan 2009) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15893 | cbiere | 2009-01-01 06:55:19 -0500 (Thu, 01 Jan 2009) | 2 lines

 * get_results_set(): Consider a vendor code as mandatory.

------------------------------------------------------------------------
r15892 | cbiere | 2008-12-31 08:53:45 -0500 (Wed, 31 Dec 2008) | 2 lines

 * 2 new items.

------------------------------------------------------------------------
r15891 | cbiere | 2008-12-31 08:49:49 -0500 (Wed, 31 Dec 2008) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15890 | daichik | 2008-12-30 01:16:27 -0500 (Tue, 30 Dec 2008) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r15889 | daichik | 2008-12-30 01:09:43 -0500 (Tue, 30 Dec 2008) | 2 lines

Updated.

------------------------------------------------------------------------
r15888 | cbiere | 2008-12-04 15:27:54 -0500 (Thu, 04 Dec 2008) | 2 lines

 * 1621 new items.

------------------------------------------------------------------------
r15887 | cbiere | 2008-11-29 11:37:06 -0500 (Sat, 29 Nov 2008) | 2 lines

 * size_t is better cast to unsigned long instead of unsigned int.

------------------------------------------------------------------------
r15886 | rmanfredi | 2008-11-29 06:52:32 -0500 (Sat, 29 Nov 2008) | 2 lines

Bumped date.

------------------------------------------------------------------------
r15885 | rmanfredi | 2008-11-29 06:50:56 -0500 (Sat, 29 Nov 2008) | 2 lines

Fixed reported compiler warning.

------------------------------------------------------------------------
r15884 | rmanfredi | 2008-11-29 06:48:01 -0500 (Sat, 29 Nov 2008) | 2 lines

Since we don't publish yet, we must not include "publish.h".

------------------------------------------------------------------------
r15883 | rmanfredi | 2008-11-27 15:43:37 -0500 (Thu, 27 Nov 2008) | 3 lines

Since dht_fill_random() is called outside of the DHT realm, we must handle
disabled DHT code properly.

------------------------------------------------------------------------
r15882 | cbiere | 2008-11-26 17:36:09 -0500 (Wed, 26 Nov 2008) | 2 lines

 * 626 new items.

------------------------------------------------------------------------
r15881 | cbiere | 2008-11-26 01:17:47 -0500 (Wed, 26 Nov 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15880 | cbiere | 2008-11-26 00:47:34 -0500 (Wed, 26 Nov 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15879 | cbiere | 2008-11-25 23:39:41 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15878 | cbiere | 2008-11-25 23:20:08 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15877 | cbiere | 2008-11-25 23:09:24 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15876 | cbiere | 2008-11-25 14:57:50 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added 9 items.

------------------------------------------------------------------------
r15875 | cbiere | 2008-11-25 14:03:06 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15874 | cbiere | 2008-11-25 13:16:53 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15873 | cbiere | 2008-11-25 12:03:22 -0500 (Tue, 25 Nov 2008) | 2 lines

 * Added filter.

------------------------------------------------------------------------
r15872 | cbiere | 2008-11-14 18:22:53 -0500 (Fri, 14 Nov 2008) | 2 lines

 * Added bitzify (alternative for bitcollider).

------------------------------------------------------------------------
r15871 | cbiere | 2008-11-14 17:55:25 -0500 (Fri, 14 Nov 2008) | 2 lines

 * Added socker and guppy.

------------------------------------------------------------------------
r15870 | cbiere | 2008-11-13 22:41:33 -0500 (Thu, 13 Nov 2008) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r15869 | cbiere | 2008-11-12 19:02:35 -0500 (Wed, 12 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15868 | cbiere | 2008-11-12 17:49:19 -0500 (Wed, 12 Nov 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15867 | cbiere | 2008-11-12 17:35:43 -0500 (Wed, 12 Nov 2008) | 2 lines

 * Added filter.

------------------------------------------------------------------------
r15866 | cbiere | 2008-11-12 14:02:15 -0500 (Wed, 12 Nov 2008) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r15865 | cbiere | 2008-11-12 13:55:41 -0500 (Wed, 12 Nov 2008) | 2 lines

 * Extended filters.

------------------------------------------------------------------------
r15864 | cbiere | 2008-11-12 13:50:01 -0500 (Wed, 12 Nov 2008) | 3 lines

 * search_results_handle_trailer(): Finally mark unrequested query hits as
   spam since it seems to be actively exploited.

------------------------------------------------------------------------
r15863 | rmanfredi | 2008-11-11 13:19:24 -0500 (Tue, 11 Nov 2008) | 3 lines

Must only count re-seeding after going through the whole logic of
download_auto_new_common() to make sure we did not toss the new source away.

------------------------------------------------------------------------
r15862 | rmanfredi | 2008-11-11 08:17:25 -0500 (Tue, 11 Nov 2008) | 2 lines

download_auto_new(): fi can be NULL.

------------------------------------------------------------------------
r15861 | rmanfredi | 2008-11-11 08:05:58 -0500 (Tue, 11 Nov 2008) | 4 lines

Fixed counting of DHT re-seeding: was wrongly using lifecount instead
of refcount.
Also count re-seeding of downloads out of query hits.

------------------------------------------------------------------------
r15860 | cbiere | 2008-11-08 14:05:20 -0500 (Sat, 08 Nov 2008) | 2 lines

 * Added bitter (command-line tool to calculate SHA-1 and TTH).

------------------------------------------------------------------------
r15859 | rmanfredi | 2008-11-07 14:16:39 -0500 (Fri, 07 Nov 2008) | 3 lines

Moved search_shutdown() call down since we can get queries in the waiting loop,
whilst lingering to let all connections shut down.

------------------------------------------------------------------------
r15858 | rmanfredi | 2008-11-07 14:15:10 -0500 (Fri, 07 Nov 2008) | 3 lines

Added more DHT stats to keep track of issued lookups, successful lookups,
and how many orphan downloads we manage to re-seed from DHT alt-locs lookups.

------------------------------------------------------------------------
r15857 | cbiere | 2008-10-31 01:44:07 -0400 (Fri, 31 Oct 2008) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r15856 | cbiere | 2008-10-29 23:36:01 -0400 (Wed, 29 Oct 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15855 | cbiere | 2008-10-29 21:27:36 -0400 (Wed, 29 Oct 2008) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15854 | cbiere | 2008-10-29 21:23:36 -0400 (Wed, 29 Oct 2008) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r15853 | cbiere | 2008-10-25 01:10:06 -0400 (Sat, 25 Oct 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15852 | cbiere | 2008-09-19 09:41:00 -0400 (Fri, 19 Sep 2008) | 2 lines

 * Fixed syntactic error.

------------------------------------------------------------------------
r15851 | cbiere | 2008-09-19 09:35:20 -0400 (Fri, 19 Sep 2008) | 3 lines

 * Fixed format string bugs in debug messages.
 * Added missing booktthv.xpm.

------------------------------------------------------------------------
r15850 | cbiere | 2008-09-18 14:45:27 -0400 (Thu, 18 Sep 2008) | 3 lines

 * Keep track of dynamic queries through a 64-bit ID
   instead of an address and an ID.

------------------------------------------------------------------------
r15849 | cbiere | 2008-09-18 13:37:16 -0400 (Thu, 18 Sep 2008) | 2 lines

 * Reduced size of qrp_can_route_* further.

------------------------------------------------------------------------
r15848 | cbiere | 2008-09-18 12:45:16 -0400 (Thu, 18 Sep 2008) | 2 lines

 * Added more variants for RT_SLOT_READ and selected the smallest.

------------------------------------------------------------------------
r15847 | cbiere | 2008-09-18 11:18:16 -0400 (Thu, 18 Sep 2008) | 3 lines

 * Optimized qrp_can_route_* further and added some alternative code that
   might be worth benchmarking.

------------------------------------------------------------------------
r15846 | cbiere | 2008-09-17 17:00:35 -0400 (Wed, 17 Sep 2008) | 2 lines

 * lookup_free(), free_lookup(): Fixed bug in previous edit: 'nl' isn't the key anymore.

------------------------------------------------------------------------
r15845 | cbiere | 2008-09-17 15:15:51 -0400 (Wed, 17 Sep 2008) | 2 lines

 * Keep track of lookups through a 64-bit ID instead of a pointer and an ID.

------------------------------------------------------------------------
r15844 | bpringlemeir | 2008-09-17 12:57:25 -0400 (Wed, 17 Sep 2008) | 2 lines

Fix C++ style comment.

------------------------------------------------------------------------
r15843 | bpringlemeir | 2008-09-17 08:46:40 -0400 (Wed, 17 Sep 2008) | 18 lines

Change qrp_can_route to use a function pointer in the routing_table
structure. Groups of route decision routines optimize for tables
tables from 16k to 2M (corresponding to 14 to 21 bits), in URN and
non-URN version are 'templated'.  The fixed shift allows compilers to
do a much better job of precomputing work.

Profiling indicates that the 2^16 and 2^17 are the most common tables
sizes (most likely due to lime wire).  However, all variants were
left.  The code size is very small compared to the table sizes.  Also,
the hottest routines will be cached.  It may be more sensible to order
the URN and non-URN together (same cache page).  However, it seems
that URN searches are very rare (not supported by LW?).

Alternate data structures could be employed with the function pointer
method.  Sparse tables could be represented by a trees.  Alternate
function pointers could decode tables in either array format or tree
format; However, the tree structure would trade time for space.

------------------------------------------------------------------------
r15842 | bpringlemeir | 2008-09-16 11:27:40 -0400 (Tue, 16 Sep 2008) | 1 line

Ignore generated files in sdbm.
------------------------------------------------------------------------
r15841 | rmanfredi | 2008-09-16 11:02:48 -0400 (Tue, 16 Sep 2008) | 2 lines

Added missing "else" block.

------------------------------------------------------------------------
r15840 | cbiere | 2008-09-16 08:41:02 -0400 (Tue, 16 Sep 2008) | 2 lines

 * guid_changed(): Just use "struct guid" instead of casts.

------------------------------------------------------------------------
r15839 | rmanfredi | 2008-09-16 01:59:11 -0400 (Tue, 16 Sep 2008) | 2 lines

Added another missing cast for "struct guid *" conversion.

------------------------------------------------------------------------
r15838 | rmanfredi | 2008-09-16 01:56:51 -0400 (Tue, 16 Sep 2008) | 3 lines

Fixed compiler warnings by adding casts (left-over of the "struct guid *"
conversion).

------------------------------------------------------------------------
r15837 | cbiere | 2008-09-09 21:36:04 -0400 (Tue, 09 Sep 2008) | 2 lines

 * [GTK2] Added support for renaming target files of downloads.

------------------------------------------------------------------------
r15836 | cbiere | 2008-09-09 21:31:52 -0400 (Tue, 09 Sep 2008) | 4 lines

 * Added fi_rename().
 * file_info_rename(): If requested filename and current filename are identical
   do nothing and indicate success.

------------------------------------------------------------------------
r15835 | cbiere | 2008-09-09 20:58:54 -0400 (Tue, 09 Sep 2008) | 2 lines

 * on_cell_edited(): Fixed minor memory leak.

------------------------------------------------------------------------
r15834 | cbiere | 2008-09-09 19:08:38 -0400 (Tue, 09 Sep 2008) | 2 lines

 * Added shell command "download rename".

------------------------------------------------------------------------
r15833 | cbiere | 2008-09-09 14:10:33 -0400 (Tue, 09 Sep 2008) | 3 lines

 * Use peek_u8() for reading guid bytes to enforce consistent results
   on platforms with signed and unsigned chars.

------------------------------------------------------------------------
r15832 | rmanfredi | 2008-09-09 08:47:21 -0400 (Tue, 09 Sep 2008) | 3 lines

Added init-time checking of guid_random_muid() to make sure it correctly
generates properly marked GUIDs that can be identified as GTKG's.

------------------------------------------------------------------------
r15831 | bpringlemeir | 2008-09-08 22:49:11 -0400 (Mon, 08 Sep 2008) | 4 lines

Correct assertion in dht_fill_random().  hcnt parameter should by 1/2
the maximum integer value.  Most likely a typo, but caused occasional
assertions in DHT mode.

------------------------------------------------------------------------
r15830 | rmanfredi | 2008-09-07 09:38:51 -0400 (Sun, 07 Sep 2008) | 6 lines

Better management of concurrency by taking the size of messages into account
and the parallelism of requests.
Avoid enqueing new lookups if that would cause the UDP node to flow-control.
Keep an exponentially decaying count of dropped messages to also avoid adding
too many lookups if we have to drop messages anyway.

------------------------------------------------------------------------
r15829 | rmanfredi | 2008-09-07 09:36:22 -0400 (Sun, 07 Sep 2008) | 2 lines

Adjusted logging levels.

------------------------------------------------------------------------
r15828 | rmanfredi | 2008-09-07 09:35:37 -0400 (Sun, 07 Sep 2008) | 3 lines

Added node_udp_would_flow_control() to check whether additional traffic
would cause the UDP node to flow-control.

------------------------------------------------------------------------
r15827 | rmanfredi | 2008-09-07 09:34:29 -0400 (Sun, 07 Sep 2008) | 3 lines

Adjusted looging levels.
Added dht_value_clone().

------------------------------------------------------------------------
r15826 | rmanfredi | 2008-09-07 09:33:07 -0400 (Sun, 07 Sep 2008) | 4 lines

Created a "public" type for security tokens, moving allocation and freeing to
token.c.
Adjusted logging levels for lookups.

------------------------------------------------------------------------
r15825 | rmanfredi | 2008-09-07 09:30:37 -0400 (Sun, 07 Sep 2008) | 3 lines

Added mq_would_flow_control() to check whether enqueing additional bytes
would trigger a flow-control condition.

------------------------------------------------------------------------
r15824 | rmanfredi | 2008-09-07 09:28:55 -0400 (Sun, 07 Sep 2008) | 2 lines

Added "dht_ulq_debug".

------------------------------------------------------------------------
r15823 | cbiere | 2008-09-07 02:59:22 -0400 (Sun, 07 Sep 2008) | 3 lines

 * shell_exec_props(): Don't use multiple columns for listing properties;
   the current hardcoded width is already to narrow for some property names.

------------------------------------------------------------------------
r15822 | rmanfredi | 2008-09-07 02:44:58 -0400 (Sun, 07 Sep 2008) | 2 lines

Fixed Copyright.

------------------------------------------------------------------------
r15821 | cbiere | 2008-09-07 02:44:42 -0400 (Sun, 07 Sep 2008) | 2 lines

 * Added "download list" command which simply lists all IDs.

------------------------------------------------------------------------
r15820 | cbiere | 2008-09-07 02:19:37 -0400 (Sun, 07 Sep 2008) | 2 lines

 * shell_exec_download_show(): Fixed bitprint case.

------------------------------------------------------------------------
r15819 | cbiere | 2008-09-07 02:07:22 -0400 (Sun, 07 Sep 2008) | 2 lines

 * Added shell command "download show" to display properties of a download.

------------------------------------------------------------------------
r15818 | cbiere | 2008-09-07 02:05:22 -0400 (Sun, 07 Sep 2008) | 2 lines

 * Added shell command "echo".

------------------------------------------------------------------------
r15817 | cbiere | 2008-09-07 02:02:28 -0400 (Sun, 07 Sep 2008) | 3 lines

 * shell_get_token(): Fixed tokenizer; leading spaces weren't eleminated
   but turned into an argument each.

------------------------------------------------------------------------
r15816 | cbiere | 2008-09-07 00:21:29 -0400 (Sun, 07 Sep 2008) | 2 lines

 * Added shell commands to abort, pause and resume downloads by ID.

------------------------------------------------------------------------
r15815 | cbiere | 2008-09-06 23:46:53 -0400 (Sat, 06 Sep 2008) | 6 lines

 * struct gnet_fi_info:
   * Removed "aliases" because nobody uses it and there is already
     fi_get_aliases().
   * Added "guid".
 * print_download_info(): Display the fileinfo ID, too.

------------------------------------------------------------------------
r15814 | cbiere | 2008-09-06 23:09:56 -0400 (Sat, 06 Sep 2008) | 9 lines

 * bin_to_hex_buf(): Fixed off-by-one bug; base16_encode() is not a string
   function and therefore does not reserve one byte for a trailing NUL.
 * hex_to_guid(): Use base16_decode().
 * struct gnet_node_status: Changed some counters to 64-bit integers.
 * prop_to_string(): Fixed memory leak with PROP_TYPE_STORAGE.
 * guid_hec(): You cannot point before an object; use guid_hec_oob() instead.
 * Changed type from generic char array to "struct guid" for all GUID/MUID
   variables and parameters for additional type safety.

------------------------------------------------------------------------
r15813 | cbiere | 2008-09-06 23:05:11 -0400 (Sat, 06 Sep 2008) | 3 lines

 * base16_decode(): Since ``len'' is guaranteed to be even now, read two
   chars per step.

------------------------------------------------------------------------
r15812 | cbiere | 2008-09-06 22:54:44 -0400 (Sat, 06 Sep 2008) | 3 lines

 * base16_decode(): Fixed off-by-one bug which would trigger if the source
   length is odd and more than twice as large as the destination buffer.

------------------------------------------------------------------------
r15811 | cbiere | 2008-09-06 22:16:28 -0400 (Sat, 06 Sep 2008) | 3 lines

 * shell_set_msg(): Fixed memory leak.
 * shell_exec_quit(): Shortened REPLY_GOOD_BYE to REPLY_BYE.

------------------------------------------------------------------------
r15810 | cbiere | 2008-09-06 16:53:42 -0400 (Sat, 06 Sep 2008) | 2 lines

 * Added some MIME type mappings.

------------------------------------------------------------------------
r15809 | cbiere | 2008-09-05 22:48:57 -0400 (Fri, 05 Sep 2008) | 3 lines

 * Generate a secondary index sorted by directory and filename for sorted
   listings such as browsing.

------------------------------------------------------------------------
r15808 | cbiere | 2008-09-05 21:09:14 -0400 (Fri, 05 Sep 2008) | 5 lines

 * Added BSCHED_BWS_LOOPBACK_IN so that loopback transfers are not
   bandwidth limited.
 * Set the SOCK_F_FORCE flag for magnets, so that downloading from
   local and blocked addresses is possible.

------------------------------------------------------------------------
r15807 | cbiere | 2008-09-05 19:43:32 -0400 (Fri, 05 Sep 2008) | 4 lines

 * Added BSCHED_BWS_LOOPBACK_OUT to be used with loopback connections,
   so that bandwidth scheduling does not lump them together with
   WAN connections.

------------------------------------------------------------------------
r15806 | cbiere | 2008-09-05 16:14:09 -0400 (Fri, 05 Sep 2008) | 5 lines

 * Fixed bug: Use the pathname instead of the filename for the
   upload_stats because sharing two different files with the same name
   and size causes an assertion failure otherwise. Old stats which use
   only filenames are translated but duplicate entries are discarded.

------------------------------------------------------------------------
r15805 | cbiere | 2008-09-04 18:42:37 -0400 (Thu, 04 Sep 2008) | 2 lines

 * Removed unnecessary #include.

------------------------------------------------------------------------
r15804 | cbiere | 2008-09-04 18:41:07 -0400 (Thu, 04 Sep 2008) | 5 lines

 * Decode HTML entities and numeric character references in Bitzi tickets
   and avoid Mojibake by converting ISO-8859-1 back to UTF-8.
 * [GTK1] Don't handle URLs dropped to the search entry immediately, just
   insert the text.

------------------------------------------------------------------------
r15803 | cbiere | 2008-09-04 18:33:53 -0400 (Thu, 04 Sep 2008) | 3 lines

 * Removed unused utf8_to_iso8859().
 * Added utf8_to_iso8859_1().

------------------------------------------------------------------------
r15802 | cbiere | 2008-09-04 18:29:48 -0400 (Thu, 04 Sep 2008) | 2 lines

 * parse_named_entity(): Use html_decode_entity().

------------------------------------------------------------------------
r15801 | rmanfredi | 2008-09-04 14:50:03 -0400 (Thu, 04 Sep 2008) | 2 lines

Updated by stegozor <stegozor@gmail.com>.

------------------------------------------------------------------------
r15800 | rmanfredi | 2008-09-04 14:26:53 -0400 (Thu, 04 Sep 2008) | 3 lines

Use fstat() on file descriptor instead of stat() on path to avoid another
path-to-inode lookup in the kernel.

------------------------------------------------------------------------
r15799 | cbiere | 2008-09-04 14:02:05 -0400 (Thu, 04 Sep 2008) | 4 lines

 * html_decode_entity():
   * Use a hashtable for better performance
   * Decode numeric character references too.

------------------------------------------------------------------------
r15798 | cbiere | 2008-09-03 19:13:07 -0400 (Wed, 03 Sep 2008) | 6 lines

 * k_handle_find_value(): Fixed bug: The debug level check is meant to make
   printing of the debug message conditional. The return statement must
   not depend on it.
 * Use UNSIGNED() instead of explicit casts and avoid casting to int
   under all circumstances.

------------------------------------------------------------------------
r15797 | cbiere | 2008-09-03 16:56:56 -0400 (Wed, 03 Sep 2008) | 3 lines

 * There is already a hashtable mapping property names to IDs.
   Just use prop_get_by_name().

------------------------------------------------------------------------
r15796 | rmanfredi | 2008-09-03 14:44:11 -0400 (Wed, 03 Sep 2008) | 4 lines

On startup, reset the GUID and KUID if we detect the configuration file
was copied from another instance, to avoid harmful ID collisions.
Otherwise GUID and KUID are persistent by default but this can be superseded.

------------------------------------------------------------------------
r15795 | rmanfredi | 2008-09-03 14:41:32 -0400 (Wed, 03 Sep 2008) | 4 lines

Added "sticky_guid" and "sticky_kuid" properties.
Added cast_to_guid_ptr_const().
Declared dht_reset_kuid().

------------------------------------------------------------------------
r15794 | rmanfredi | 2008-09-03 14:39:19 -0400 (Wed, 03 Sep 2008) | 4 lines

Extended gmsg_cmp() to be able to compare Gnutella and Kademlia messages
in terms of flow-control weights, since they share the same UDP queue.
Made gmsg_can_drop() delegate Kademlia message checks to kmsg_can_drop().

------------------------------------------------------------------------
r15793 | rmanfredi | 2008-09-03 14:36:34 -0400 (Wed, 03 Sep 2008) | 2 lines

Added dht_rpc_cancel_if_no_callback().

------------------------------------------------------------------------
r15792 | rmanfredi | 2008-09-03 14:35:27 -0400 (Wed, 03 Sep 2008) | 2 lines

Added kmsg_can_drop().

------------------------------------------------------------------------
r15791 | rmanfredi | 2008-09-03 14:34:21 -0400 (Wed, 03 Sep 2008) | 2 lines

Added kuid_is_blank().

------------------------------------------------------------------------
r15790 | rmanfredi | 2008-09-03 14:26:25 -0400 (Wed, 03 Sep 2008) | 4 lines

Avoid O(n*n) processing of property names during loading.  Precompute a
hash table of all known names before parsing.
Added detection of copied property files by tagging each saved copy uniquely.

------------------------------------------------------------------------
r15789 | rmanfredi | 2008-09-03 14:22:21 -0400 (Wed, 03 Sep 2008) | 4 lines

GUID duplicates are not properly handled, which causes a bug because the
push-proxy fetching through the DHT silently assumes GUIDs are unique.
Added bug workaround for now to avoid the symptoms.

------------------------------------------------------------------------
r15788 | cbiere | 2008-09-02 21:08:15 -0400 (Tue, 02 Sep 2008) | 2 lines

 * Fixed memory leak in previous commit.

------------------------------------------------------------------------
r15787 | cbiere | 2008-09-02 20:49:33 -0400 (Tue, 02 Sep 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15786 | cbiere | 2008-09-02 17:33:36 -0400 (Tue, 02 Sep 2008) | 3 lines

 * Applied patch by Mitch Harder (aka DontPanic).
 * Some clean-up.

------------------------------------------------------------------------
r15785 | cbiere | 2008-09-02 15:21:30 -0400 (Tue, 02 Sep 2008) | 2 lines

 * Flush the queue faster when the results are unsorted.

------------------------------------------------------------------------
r15784 | cbiere | 2008-09-02 14:34:43 -0400 (Tue, 02 Sep 2008) | 5 lines

 * search_gui_update_status_label(): Show the queue status if there are
   still pending results.
 * Replaced bogus "#ifdef GTK_TREE_SORTABLE_UNSORTED_SORT_COLUMN_ID"
   with check for Gtk+ 2.6.0. [Noticed by Mitch Harder]

------------------------------------------------------------------------
r15783 | rmanfredi | 2008-09-02 13:38:17 -0400 (Tue, 02 Sep 2008) | 6 lines

Changed handling of push-proxy DHT lookups: we now look for servers by GUID
only, and notify of new discovered IP:port whenever we find a mismatch with
already recorded data (GUID collisions are as harmful as usual).
Finally, we immediately send UDP push requests when we get back new proxies
from the DHT.

------------------------------------------------------------------------
r15782 | cbiere | 2008-09-02 13:34:38 -0400 (Tue, 02 Sep 2008) | 2 lines

 * lookup_rpc_cb(): Hide debug message when not debugging.

------------------------------------------------------------------------
r15781 | rmanfredi | 2008-09-02 12:30:18 -0400 (Tue, 02 Sep 2008) | 4 lines

Extracted ASCII string / character handling routines out of misc.[ch] into
dedicated files.  A lot of places including "lib/misc.h" are now happy just
including "lib/ascii.h".

------------------------------------------------------------------------
r15780 | rmanfredi | 2008-09-02 01:28:40 -0400 (Tue, 02 Sep 2008) | 3 lines

Fixed correctly flagged off-by-one error.
It was harmless though because the last 2 message numbers are unused nowadays.

------------------------------------------------------------------------
r15779 | cbiere | 2008-09-02 00:18:52 -0400 (Tue, 02 Sep 2008) | 3 lines

 * Show "Unrated" instead of an incorrect "Not in database", if a
   bitzi ticket features no judgement.

------------------------------------------------------------------------
r15778 | cbiere | 2008-09-01 23:38:29 -0400 (Mon, 01 Sep 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15777 | cbiere | 2008-09-01 22:43:14 -0400 (Mon, 01 Sep 2008) | 3 lines

 * search_results_handle_trailer(): Used wrong port when adding the
   IPv6 address as push proxy.

------------------------------------------------------------------------
r15776 | cbiere | 2008-09-01 22:17:08 -0400 (Mon, 01 Sep 2008) | 6 lines

 * search_matched(): Don't skip results when browsing and the
   browsed peer is firewalled.
 * search_gui_magnet_add_source(): Always use the push proxies
   if present because (non-)firewalled status can be fragile
   and it picks up added IPv6/UDP push proxies.

------------------------------------------------------------------------
r15775 | cbiere | 2008-09-01 22:12:42 -0400 (Mon, 01 Sep 2008) | 2 lines

 * Removed unused #include.

------------------------------------------------------------------------
r15774 | cbiere | 2008-09-01 22:10:52 -0400 (Mon, 01 Sep 2008) | 3 lines

 * url_fix_escape(): Don't touch '[]' either because it breaks URLs
   with IPv6 addresses.

------------------------------------------------------------------------
r15773 | cbiere | 2008-09-01 22:06:28 -0400 (Mon, 01 Sep 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15772 | cbiere | 2008-09-01 21:45:02 -0400 (Mon, 01 Sep 2008) | 3 lines

 * search_results_handle_trailer(): Add the IPv6 as push proxy instead of
   overwriting the IPv4 address.

------------------------------------------------------------------------
r15771 | cbiere | 2008-09-01 20:37:29 -0400 (Mon, 01 Sep 2008) | 4 lines

 * udp_send_mb(): Just using g_return_if_fail() causes a memory leak on
   failure. This is reproducable by enforcing IPv6 only with the DHT
   enabled.

------------------------------------------------------------------------
r15770 | cbiere | 2008-09-01 20:25:06 -0400 (Mon, 01 Sep 2008) | 2 lines

 * FIXME: Marked possible off-by-one bug.

------------------------------------------------------------------------
r15769 | cbiere | 2008-09-01 19:39:12 -0400 (Mon, 01 Sep 2008) | 4 lines

 * search_results_handle_trailer(): For OOB results, add the route address to
   the list of push proxies because we should be able to use it as UDP push
   proxy.

------------------------------------------------------------------------
r15768 | cbiere | 2008-09-01 19:21:18 -0400 (Mon, 01 Sep 2008) | 3 lines

 * download_start(): Honour the SOCK_F_FORCE flag, so that it's possible,
   for example, to browse peers in the LAN .

------------------------------------------------------------------------
r15767 | rmanfredi | 2008-09-01 17:59:24 -0400 (Mon, 01 Sep 2008) | 2 lines

Avoid possible buffer overflow.

------------------------------------------------------------------------
r15766 | rmanfredi | 2008-09-01 17:16:48 -0400 (Mon, 01 Sep 2008) | 7 lines

Added lookups for push-proxies through the DHT ("PROX" values).
This is useful under two circumstances:
* When restarting gtk-gnutella or when using an old search results with
  stale push-proxies.
* When getting a firewalled alt-loc through the DHT "ALOC" values, where
  we have the GUID of the servent but no initial push-proxies.

------------------------------------------------------------------------
r15765 | rmanfredi | 2008-09-01 17:10:46 -0400 (Mon, 01 Sep 2008) | 2 lines

Added definitions of GGEP keys found in "PROX" DHT values (push-proxies).

------------------------------------------------------------------------
r15764 | rmanfredi | 2008-09-01 17:09:36 -0400 (Mon, 01 Sep 2008) | 2 lines

Added guid_is_blank().

------------------------------------------------------------------------
r15763 | rmanfredi | 2008-09-01 17:07:07 -0400 (Mon, 01 Sep 2008) | 4 lines

When the UDP queue is busy, artificially increase the EMA of per-lookup
bandwidth in order to avoid flushing out too many lookups when the flow
control condition ends.

------------------------------------------------------------------------
r15762 | rmanfredi | 2008-09-01 15:41:19 -0400 (Mon, 01 Sep 2008) | 2 lines

Added bstr_read_ipv4_addr() and bstr_read_ipv6_addr().

------------------------------------------------------------------------
r15761 | rmanfredi | 2008-09-01 15:39:55 -0400 (Mon, 01 Sep 2008) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r15760 | rmanfredi | 2008-08-31 14:48:41 -0400 (Sun, 31 Aug 2008) | 4 lines

There can be multiple calls to lookup_value_delay() when UDP messages
are immediately dropped by the queue.  Therefore, register the callback
delay only when none is already pending.

------------------------------------------------------------------------
r15759 | cbiere | 2008-08-30 13:05:10 -0400 (Sat, 30 Aug 2008) | 2 lines

 * Handle int properly.

------------------------------------------------------------------------
r15758 | cbiere | 2008-08-30 12:59:45 -0400 (Sat, 30 Aug 2008) | 3 lines

 * ulq_queue_status(): Use size_t instead of int and handle trailing
  comma avoidance the usual way.

------------------------------------------------------------------------
r15757 | rmanfredi | 2008-08-30 11:34:50 -0400 (Sat, 30 Aug 2008) | 4 lines

Added support for multiple lookup queues, with different weigth for scheduling.
Plugged in statistics hook for lookups, so that we can adjust the amount
of concurrency dynamically using their configured bandwidth hints.

------------------------------------------------------------------------
r15756 | rmanfredi | 2008-08-30 11:30:53 -0400 (Sat, 30 Aug 2008) | 4 lines

Added support for statistics gathering hook.
When giving a chance for pending RPCs, wait for all of them to either come
back or time out before returning the collected values.

------------------------------------------------------------------------
r15755 | rmanfredi | 2008-08-30 11:28:49 -0400 (Sat, 30 Aug 2008) | 5 lines

Added ability to configure incoming and outgoing bandwidth hints for DHT
lookups from the shell.
Added DHT messages to the list of known messages for drop reason filtering
in the GUI.

------------------------------------------------------------------------
r15754 | rmanfredi | 2008-08-30 11:26:57 -0400 (Sat, 30 Aug 2008) | 2 lines

Adjusted logging levels.

------------------------------------------------------------------------
r15753 | rmanfredi | 2008-08-27 12:29:35 -0400 (Wed, 27 Aug 2008) | 4 lines

Added counters for republished and replicated values we hold.
Fixed accounting bug in networks/IP which did handle republishing by creators
from another address.

------------------------------------------------------------------------
r15752 | rmanfredi | 2008-08-27 12:26:03 -0400 (Wed, 27 Aug 2008) | 3 lines

Delete keyinfo asynchronously.  This simplifies the code, removes potential
pitfalls and allows for regular cleanup of expired values.

------------------------------------------------------------------------
r15751 | rmanfredi | 2008-08-27 12:24:30 -0400 (Wed, 27 Aug 2008) | 3 lines

Cache deleted values and remember existing keys when the DB is used in "search
table" mode with zero-lengthed values.

------------------------------------------------------------------------
r15750 | rmanfredi | 2008-08-26 17:57:30 -0400 (Tue, 26 Aug 2008) | 3 lines

Added server-side support for DHTIPP in pings, returning a packed list of
DHT hosts in the pong, within the same DHTIPP extension.

------------------------------------------------------------------------
r15749 | rmanfredi | 2008-08-26 17:54:23 -0400 (Tue, 26 Aug 2008) | 2 lines

Added dht_fill_random() to collect host information from random nodes.

------------------------------------------------------------------------
r15748 | rmanfredi | 2008-08-26 14:20:42 -0400 (Tue, 26 Aug 2008) | 3 lines

Use g_hash_table_lookup_extended() for map_contains() to safely allow
NULL as a value.

------------------------------------------------------------------------
r15747 | rmanfredi | 2008-08-26 13:17:27 -0400 (Tue, 26 Aug 2008) | 2 lines

dbmap_remove() now returns a sucess status.

------------------------------------------------------------------------
r15746 | rmanfredi | 2008-08-26 13:09:52 -0400 (Tue, 26 Aug 2008) | 4 lines

Added deferred key removal, which prevents undue deletion and recreation of
a given key when all its values have expired (and we notice that during
the processing of a STORE request for that key).

------------------------------------------------------------------------
r15745 | rmanfredi | 2008-08-26 13:06:43 -0400 (Tue, 26 Aug 2008) | 2 lines

Record only one servicing event for the queue.

------------------------------------------------------------------------
r15744 | rmanfredi | 2008-08-26 12:58:51 -0400 (Tue, 26 Aug 2008) | 5 lines

Forgot that dht_value_type_t is an enum for practical reasons, but by no
means does it contain ALL the known values.  Therefore, need a default
statement in dht_value_lifetime() to catch unknown values.
Added BTAL value type for bittorrent alt-locs.

------------------------------------------------------------------------
r15743 | rmanfredi | 2008-08-25 16:00:41 -0400 (Mon, 25 Aug 2008) | 6 lines

Added value expiration, which is lazily done: we do not actively seek for
expired values, we do so only when that would prevent insertion of new
values or when we get replications.
Added two new counters: amount of successful value lookups served by our node
and amount of stale replications detected from neighbours.

------------------------------------------------------------------------
r15742 | rmanfredi | 2008-08-25 15:57:04 -0400 (Mon, 25 Aug 2008) | 4 lines

Avoid launching too many lookups when the UDP queue is flow-controlled,
as DHT lookups are quite avid of sending many messages.  Better to let
the UDP queue flush for a while.

------------------------------------------------------------------------
r15741 | rmanfredi | 2008-08-25 13:38:59 -0400 (Mon, 25 Aug 2008) | 4 lines

Added node_udp_is_flow_controlled().
When the UDP queue is entering the warn zone or is becoming flow-controlled,
request urgent bandwidth stealing to accelerate its flushing.

------------------------------------------------------------------------
r15740 | rmanfredi | 2008-08-25 13:36:35 -0400 (Mon, 25 Aug 2008) | 4 lines

Added ability to request urgent bandwidth allocation during the stealing phase.
This is meant to be used for the UDP queue, to prevent it being clogged for
too long.

------------------------------------------------------------------------
r15739 | rmanfredi | 2008-08-25 11:58:03 -0400 (Mon, 25 Aug 2008) | 4 lines

Was counting incoming UDP traffic twice: socket_udp_accept() already
invokes bws_udp_count_read(), no need to do it again in udp_received().
Better leave that at the low socket level with other bandwidth accounting.

------------------------------------------------------------------------
r15738 | rmanfredi | 2008-08-24 18:06:17 -0400 (Sun, 24 Aug 2008) | 3 lines

Allow zero-sized values.
Avoid divisions by zero, not always fatal depending on the FPU, but ugly.

------------------------------------------------------------------------
r15737 | cbiere | 2008-08-24 15:31:38 -0400 (Sun, 24 Aug 2008) | 2 lines

 * Added __ppc__ because it is an alias for __powerpc__.

------------------------------------------------------------------------
r15736 | rmanfredi | 2008-08-24 05:50:44 -0400 (Sun, 24 Aug 2008) | 3 lines

Changed gnet_stats_count_general() to take a signed delta parameter.
Removed gnet_stats_update_general(), which was also used by the GTK2 code.

------------------------------------------------------------------------
r15735 | rmanfredi | 2008-08-24 05:43:00 -0400 (Sun, 24 Aug 2008) | 4 lines

Now supecting a formatting bug for %.2f when the float value is something like
1.435e-35, i.e. close to 0 but not quite.  Remove that possibility by making
sure the printed value is rounded to exactly 2 decimals.

------------------------------------------------------------------------
r15734 | rmanfredi | 2008-08-23 19:11:55 -0400 (Sat, 23 Aug 2008) | 2 lines

Parse TTH root from ALOC and verify it matches that of the fileinfo.

------------------------------------------------------------------------
r15733 | rmanfredi | 2008-08-23 18:42:55 -0400 (Sat, 23 Aug 2008) | 4 lines

Added time_delta_add(), adding an unsigned long to a time_delta_t with
saturation at TIME_DELTA_T_MAX.
Use time_delta_add() to compute the DHT retry period.

------------------------------------------------------------------------
r15732 | rmanfredi | 2008-08-23 18:10:06 -0400 (Sat, 23 Aug 2008) | 6 lines

UDP bandwidth was miscalculated because bsched_early_init() is called before
settings_init().  Therefore, default settings were used.
Also it does not make sense to limit incoming UDP bandwidth: once the messages
have been received, they'd better be timely processed or the incoming TX queue
will fill and they will be dropped by the kernel.

------------------------------------------------------------------------
r15731 | rmanfredi | 2008-08-23 16:53:34 -0400 (Sat, 23 Aug 2008) | 3 lines

Do not prevent DHT queries for files with known sources or even with active
sources.  Just delay things more to space them out further.

------------------------------------------------------------------------
r15730 | rmanfredi | 2008-08-23 15:16:36 -0400 (Sat, 23 Aug 2008) | 2 lines

Removed XXX.

------------------------------------------------------------------------
r15729 | cbiere | 2008-08-23 14:53:47 -0400 (Sat, 23 Aug 2008) | 2 lines

 * Corrected indentation and sort order.

------------------------------------------------------------------------
r15728 | rmanfredi | 2008-08-23 14:52:46 -0400 (Sat, 23 Aug 2008) | 2 lines

Show when port mismatch in ALOC is affecting a firewalled source.

------------------------------------------------------------------------
r15727 | cbiere | 2008-08-23 14:50:05 -0400 (Sat, 23 Aug 2008) | 3 lines

 * Added architecture checks to avoid compiling on a machine that
   isn't known to IEEE 754 floats. Not cool but better than no check.

------------------------------------------------------------------------
r15726 | rmanfredi | 2008-08-23 14:47:28 -0400 (Sat, 23 Aug 2008) | 2 lines

Adjusted logging levels.

------------------------------------------------------------------------
r15725 | rmanfredi | 2008-08-23 12:24:49 -0400 (Sat, 23 Aug 2008) | 2 lines

Added DHT key and value counters in the general stats.

------------------------------------------------------------------------
r15724 | rmanfredi | 2008-08-23 12:19:55 -0400 (Sat, 23 Aug 2008) | 2 lines

Rats, had forgotten an argument in g_message().

------------------------------------------------------------------------
r15723 | rmanfredi | 2008-08-23 12:03:42 -0400 (Sat, 23 Aug 2008) | 4 lines

Do not iterate on value fetching if we have a pending RPC.
Forgotted to add the already held items when computing the needed size of
the value vector.

------------------------------------------------------------------------
r15722 | rmanfredi | 2008-08-23 07:50:10 -0400 (Sat, 23 Aug 2008) | 2 lines

Do not query the DHT if not bootstrapped.

------------------------------------------------------------------------
r15721 | rmanfredi | 2008-08-23 07:47:48 -0400 (Sat, 23 Aug 2008) | 2 lines

Immediately schedule a DHT search when facing a sourceless magnet with a SHA1.

------------------------------------------------------------------------
r15720 | rmanfredi | 2008-08-23 03:56:35 -0400 (Sat, 23 Aug 2008) | 2 lines

Better handling of synchronous UDP drops.

------------------------------------------------------------------------
r15719 | cbiere | 2008-08-23 03:10:07 -0400 (Sat, 23 Aug 2008) | 3 lines

 * search_handle_magnet(): Don't initiate an URN search by sha1
   anymore because it's outdated technology.

------------------------------------------------------------------------
r15718 | cbiere | 2008-08-23 03:08:18 -0400 (Sat, 23 Aug 2008) | 2 lines

 * Added QRP_MAX_CUT_CHARS.

------------------------------------------------------------------------
r15717 | cbiere | 2008-08-23 01:43:39 -0400 (Sat, 23 Aug 2008) | 2 lines

 * fi_dht_check(): Don't initiate lookups for paused or finished files.

------------------------------------------------------------------------
r15716 | cbiere | 2008-08-23 01:19:41 -0400 (Sat, 23 Aug 2008) | 7 lines

 * Do not insert sha1 URNs into the QRT anymore. LimeWire has
   blocked URN searches for a long time and the DHT support
   can already locate sources by SHA-1 which is more efficient
   and reliable.
 * Limit truncation to 5 characters (not bytes) at most.
   LimeWire limits it 3 but their QRTs are tiny.

------------------------------------------------------------------------
r15715 | cbiere | 2008-08-22 22:13:31 -0400 (Fri, 22 Aug 2008) | 4 lines

 * create_download(): Fixed bugs in previous edit:
   * atom leak.
   * firewalled sources are rejected.

------------------------------------------------------------------------
r15714 | cbiere | 2008-08-22 19:07:18 -0400 (Fri, 22 Aug 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15713 | cbiere | 2008-08-22 18:17:36 -0400 (Fri, 22 Aug 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15712 | cbiere | 2008-08-22 17:48:39 -0400 (Fri, 22 Aug 2008) | 2 lines

 * urn_get_tth(): Fixed parsing of "urn:tree:tiger:".

------------------------------------------------------------------------
r15711 | rmanfredi | 2008-08-22 17:44:42 -0400 (Fri, 22 Aug 2008) | 3 lines

Must not send messages whilst iterating over the PATRICIA tree in case
of synchronous UDP drops.

------------------------------------------------------------------------
r15710 | rmanfredi | 2008-08-22 17:31:26 -0400 (Fri, 22 Aug 2008) | 3 lines

When message is dropped by the UDP queue, it must be removed from nl->queried
before attempting to put it back to the shortlist due to assertions.

------------------------------------------------------------------------
r15709 | rmanfredi | 2008-08-22 17:05:50 -0400 (Fri, 22 Aug 2008) | 2 lines

There can be no secondary keys, only expanded values.

------------------------------------------------------------------------
r15708 | cbiere | 2008-08-22 17:01:01 -0400 (Fri, 22 Aug 2008) | 3 lines

 * Sanitizied interface: Use kuid_t * and avoid casting as much as possible.
   kuid_t has char alignment.

------------------------------------------------------------------------
r15707 | rmanfredi | 2008-08-22 16:50:35 -0400 (Fri, 22 Aug 2008) | 2 lines

Changed debugging messages to have pathname at the end.

------------------------------------------------------------------------
r15706 | rmanfredi | 2008-08-22 16:45:34 -0400 (Fri, 22 Aug 2008) | 2 lines

Bump date for DHT milestone.

------------------------------------------------------------------------
r15705 | rmanfredi | 2008-08-22 16:44:12 -0400 (Fri, 22 Aug 2008) | 2 lines

Do not schedule a DHT lookup if the fileinfo has no SHA1.

------------------------------------------------------------------------
r15704 | rmanfredi | 2008-08-22 16:38:59 -0400 (Fri, 22 Aug 2008) | 2 lines

Closed potential race condition during the update of nl->queried.

------------------------------------------------------------------------
r15703 | rmanfredi | 2008-08-22 16:27:44 -0400 (Fri, 22 Aug 2008) | 2 lines

Fixed setting of boot_status.

------------------------------------------------------------------------
r15702 | rmanfredi | 2008-08-22 16:05:58 -0400 (Fri, 22 Aug 2008) | 2 lines

Added GGEP "DHTIPP" support to accelerate DHT bootstrapping.

------------------------------------------------------------------------
r15701 | rmanfredi | 2008-08-22 15:36:30 -0400 (Fri, 22 Aug 2008) | 2 lines

Declared GGEP "DHTIPP" extension.

------------------------------------------------------------------------
r15700 | rmanfredi | 2008-08-22 15:35:55 -0400 (Fri, 22 Aug 2008) | 4 lines

No need to send an RPC for the bootstrapping ping.  Any incoming traffic
will actually do, so send a single ping without recording its MUID.
Added dht_probe() for when we support DHTIPP to accelerate the bootstraps.

------------------------------------------------------------------------
r15699 | rmanfredi | 2008-08-22 15:34:21 -0400 (Fri, 22 Aug 2008) | 2 lines

Removed superfluous blank line.

------------------------------------------------------------------------
r15698 | cbiere | 2008-08-22 15:11:53 -0400 (Fri, 22 Aug 2008) | 2 lines

 * ulq_launch(): Ensure 'nl' is initialized and abort on invalid values.

------------------------------------------------------------------------
r15697 | rmanfredi | 2008-08-22 14:41:22 -0400 (Fri, 22 Aug 2008) | 3 lines

Added interface between Gnutella and the DHT.
It is only able to look for alt-locs for now.

------------------------------------------------------------------------
r15696 | rmanfredi | 2008-08-22 14:34:36 -0400 (Fri, 22 Aug 2008) | 3 lines

The real end of value lookups is lookup_value_terminate(), so this is where
final stats need to be emitted.

------------------------------------------------------------------------
r15695 | rmanfredi | 2008-08-22 14:22:49 -0400 (Fri, 22 Aug 2008) | 4 lines

Renamed ggept_lf_encode() as ggept_filesize_encode() and
ggept_lf_extract() as ggept_filesize_extract() since they can also be
used to extract filesize in other GGEP keys.

------------------------------------------------------------------------
r15694 | rmanfredi | 2008-08-22 14:20:28 -0400 (Fri, 22 Aug 2008) | 2 lines

Fixed too long a line.

------------------------------------------------------------------------
r15693 | rmanfredi | 2008-08-22 14:19:20 -0400 (Fri, 22 Aug 2008) | 2 lines

Plugged user lookup queue initialization and shutdown in.

------------------------------------------------------------------------
r15692 | rmanfredi | 2008-08-22 14:17:21 -0400 (Fri, 22 Aug 2008) | 10 lines

For vectors, use "sizeof v[0]" instead of "sizeof *v" to make it more apparent
that it is an array.
In case we end a FIND_VALUE early, do not report LOOKUP_E_NO_REPLY if we
got at least KDA_ALPHA replies.
Be paranoid: ignore extra VALUE replies during extra fetching: since we can
in theory re-emit the same query twice, the host could reply quickly to both
the old and the new request.
Make sure we do not request a secondary key we already have fetched from
another node.

------------------------------------------------------------------------
r15691 | rmanfredi | 2008-08-22 14:09:32 -0400 (Fri, 22 Aug 2008) | 3 lines

Do not create a download if we are given an unspecified IPv4 address.
This allows proper handling of magnet: with no sources.

------------------------------------------------------------------------
r15690 | rmanfredi | 2008-08-21 17:11:18 -0400 (Thu, 21 Aug 2008) | 3 lines

For caller's convenience, lookup_free_results() now takes a const parameter
since this is what the callback will get.

------------------------------------------------------------------------
r15689 | rmanfredi | 2008-08-21 17:07:53 -0400 (Thu, 21 Aug 2008) | 3 lines

For caller's convenience, lookup_free_value_results() now takes a const
parameter since this is what the callback will get.

------------------------------------------------------------------------
r15688 | rmanfredi | 2008-08-21 17:05:20 -0400 (Thu, 21 Aug 2008) | 5 lines

Reworked additional value fetching from secondary key.  The previous code was
too simple and did not handle multiple values being returned by multiple
nodes with some bearing secondary keys, others expanded values or a mix of
the two.

------------------------------------------------------------------------
r15687 | rmanfredi | 2008-08-21 16:58:27 -0400 (Thu, 21 Aug 2008) | 3 lines

Move kuid_to*string() routines from dht/kuid.h to if/dht/kuid.h
so that they can be used from the core.

------------------------------------------------------------------------
r15686 | rmanfredi | 2008-08-21 15:53:31 -0400 (Thu, 21 Aug 2008) | 2 lines

On value deletion, log creator and key for easier grepping in logs.

------------------------------------------------------------------------
r15685 | rmanfredi | 2008-08-21 15:51:30 -0400 (Thu, 21 Aug 2008) | 2 lines

Added missing blank line.

------------------------------------------------------------------------
r15684 | cbiere | 2008-08-21 14:18:48 -0400 (Thu, 21 Aug 2008) | 2 lines

 * Avoid casts, use implicit conversions.

------------------------------------------------------------------------
r15683 | rmanfredi | 2008-08-21 13:54:58 -0400 (Thu, 21 Aug 2008) | 3 lines

Do not perform the comparison before the assertion that guarantees the
index is within the array...

------------------------------------------------------------------------
r15682 | rmanfredi | 2008-08-21 13:29:00 -0400 (Thu, 21 Aug 2008) | 2 lines

Avoid signed values for counters.

------------------------------------------------------------------------
r15681 | rmanfredi | 2008-08-21 12:50:39 -0400 (Thu, 21 Aug 2008) | 6 lines

Replaced () with [] in log message to avoid triggering a bug in glib 1.2.
Fixed improper assertion when removing a key.
Do not mix store and get loads, handle them separately.
Pre-compute the EMA to see whether the current requests in the period will
cause the EMA to reach the "loaded" threshold on both get and store.

------------------------------------------------------------------------
r15680 | rmanfredi | 2008-08-21 12:46:51 -0400 (Thu, 21 Aug 2008) | 2 lines

Forgot to commit this at r15678.

------------------------------------------------------------------------
r15679 | rmanfredi | 2008-08-21 12:45:13 -0400 (Thu, 21 Aug 2008) | 2 lines

Lowered token lifetime to 62 minutes.

------------------------------------------------------------------------
r15678 | rmanfredi | 2008-08-21 12:43:05 -0400 (Thu, 21 Aug 2008) | 5 lines

Added DHT message statistics for:
* Invalid security tokens.
* Too many STORE requests causing dropping of corresponding FIND_NODE.
* Unparseable messages.

------------------------------------------------------------------------
r15677 | rmanfredi | 2008-08-20 16:51:48 -0400 (Wed, 20 Aug 2008) | 4 lines

Added keys_is_store_loaded().
When getting a FIND_NODE request for a loaded STORE key, do not reply.
This will lower the STORE traffic and avoid wasting bandwidth.

------------------------------------------------------------------------
r15676 | rmanfredi | 2008-08-20 14:39:15 -0400 (Wed, 20 Aug 2008) | 2 lines

Moved load checking code into validate_load().

------------------------------------------------------------------------
r15675 | rmanfredi | 2008-08-20 13:54:35 -0400 (Wed, 20 Aug 2008) | 7 lines

Measure store load request as well, with a higher threshold than
get requests before declaring ourselves "loaded".
On STORE requests, when getting a new value, check full and loaded
conditions earlier.
Added support for deletion of values, and handle stores with a
zero-lengthed value as a delete request.

------------------------------------------------------------------------
r15674 | rmanfredi | 2008-08-20 13:47:54 -0400 (Wed, 20 Aug 2008) | 4 lines

Adjusted RPC timeouts.  Measurement over a large amount of RPCs has shown
that it is exceptional to have replies after 5 seconds, 99% of the replies
coming back within 4 seconds.

------------------------------------------------------------------------
r15673 | cbiere | 2008-08-20 11:03:11 -0400 (Wed, 20 Aug 2008) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r15672 | rmanfredi | 2008-08-19 16:56:10 -0400 (Tue, 19 Aug 2008) | 2 lines

Added DHT "ALOC" GGEP extensions.

------------------------------------------------------------------------
r15671 | rmanfredi | 2008-08-19 14:05:30 -0400 (Tue, 19 Aug 2008) | 2 lines

Finished implementation.

------------------------------------------------------------------------
r15670 | rmanfredi | 2008-08-19 13:55:39 -0400 (Tue, 19 Aug 2008) | 4 lines

Added LOOKUP_E_EMPTY_ROUTE error code.
When performing a value lookup, check whether our node is not already
holding the key.

------------------------------------------------------------------------
r15669 | rmanfredi | 2008-08-19 13:00:02 -0400 (Tue, 19 Aug 2008) | 3 lines

The DB map will now count SDBM keys in opened datafile.
Added new store status code: STORE_SC_EXPIRED.

------------------------------------------------------------------------
r15668 | rmanfredi | 2008-08-19 12:55:29 -0400 (Tue, 19 Aug 2008) | 3 lines

Added count_needs_sync flag to avoid requesting needless syncs when they
ask for the amount of keys.

------------------------------------------------------------------------
r15667 | rmanfredi | 2008-08-19 12:53:18 -0400 (Tue, 19 Aug 2008) | 5 lines

Fixed bug in getnext(), which flagged an I/O error when iterating over
an empty database.
Indented all comments within a function to match general gtk-gnutella style.
Added trailing vi comments for VIM.

------------------------------------------------------------------------
r15666 | rmanfredi | 2008-08-18 17:18:24 -0400 (Mon, 18 Aug 2008) | 4 lines

Added "if/dht/lookup.h" for user value lookup interface.
Added user lookup queue to avoid launching too many concurrent user lookup
requests at the same time.

------------------------------------------------------------------------
r15665 | rmanfredi | 2008-08-18 16:05:08 -0400 (Mon, 18 Aug 2008) | 3 lines

Do not include stale nodes in closest set if it timed out more than once.
Randomly ping nodes advertising DHT support collected from Gnutella pongs.

------------------------------------------------------------------------
r15664 | rmanfredi | 2008-08-18 15:03:45 -0400 (Mon, 18 Aug 2008) | 3 lines

Had misunderstood the meaning of the third byte of the "DHT" GGEP extension
in pongs.  It is not flags but the DHT mode the host is in.

------------------------------------------------------------------------
r15663 | rmanfredi | 2008-08-17 16:54:35 -0400 (Sun, 17 Aug 2008) | 4 lines

Renamed host_addr_is_valid() as host_address_is_usable().
Upon restoration of the persisted routing table, check hosts
against the possibly new bogons / hostiles.

------------------------------------------------------------------------
r15662 | rmanfredi | 2008-08-17 16:39:44 -0400 (Sun, 17 Aug 2008) | 2 lines

Accept creators bearing a port of 0.  This usually indicates a firewalled host.

------------------------------------------------------------------------
r15661 | rmanfredi | 2008-08-17 16:33:13 -0400 (Sun, 17 Aug 2008) | 2 lines

Added knode_addr_is_usable().

------------------------------------------------------------------------
r15660 | rmanfredi | 2008-08-17 16:30:03 -0400 (Sun, 17 Aug 2008) | 2 lines

Added host_addr_is_valid().

------------------------------------------------------------------------
r15659 | rmanfredi | 2008-08-17 16:03:52 -0400 (Sun, 17 Aug 2008) | 2 lines

Completed value lookups by adding iterative fetching of returned secondary keys.

------------------------------------------------------------------------
r15658 | rmanfredi | 2008-08-17 15:40:29 -0400 (Sun, 17 Aug 2008) | 2 lines

Declare and use DHT_RPC_FIND_VALUE.

------------------------------------------------------------------------
r15657 | rmanfredi | 2008-08-17 15:39:40 -0400 (Sun, 17 Aug 2008) | 2 lines

Added ALOC and PROX value types.

------------------------------------------------------------------------
r15656 | cbiere | 2008-08-17 13:33:10 -0400 (Sun, 17 Aug 2008) | 5 lines

 * Show "No UDP traffic yet" instead of "Connected" for the UDP pseudo node.
 * Changed types of some status items from signed integers to unsigned
   integers. As these are 32-bit some of them can easily overflow after
   several days.

------------------------------------------------------------------------
r15655 | rmanfredi | 2008-08-17 06:51:55 -0400 (Sun, 17 Aug 2008) | 2 lines

Warn when we see a node bearing our KUID.

------------------------------------------------------------------------
r15654 | rmanfredi | 2008-08-17 06:50:57 -0400 (Sun, 17 Aug 2008) | 2 lines

Flag patched contact's address in DHT values.

------------------------------------------------------------------------
r15653 | rmanfredi | 2008-08-17 06:35:53 -0400 (Sun, 17 Aug 2008) | 6 lines

Patch non-routable contact addresses with UDP source IP:port to work around
broken LimeWire hosts.
Also patch creator's IP address on the fly when it comes from a patched node
to avoid the value being rejected because the creator's IP is not acceptable.
Changed knode stringification to include markup when the IP address was patched.

------------------------------------------------------------------------
r15652 | rmanfredi | 2008-08-17 05:33:57 -0400 (Sun, 17 Aug 2008) | 3 lines

Avoid exposing internal DHT interface to the Gnutella core.
Initial (incomplete still) support for value lookups.

------------------------------------------------------------------------
r15651 | rmanfredi | 2008-08-17 04:16:25 -0400 (Sun, 17 Aug 2008) | 2 lines

Added interface files for KUID, DHT value and Kademlia nodes.

------------------------------------------------------------------------
r15650 | cbiere | 2008-08-16 22:37:11 -0400 (Sat, 16 Aug 2008) | 2 lines

 * 5864 new items.

------------------------------------------------------------------------
r15649 | rmanfredi | 2008-08-16 18:09:46 -0400 (Sat, 16 Aug 2008) | 2 lines

Factorized common valuedata filling code.

------------------------------------------------------------------------
r15648 | rmanfredi | 2008-08-16 17:50:23 -0400 (Sat, 16 Aug 2008) | 4 lines

DHT messages are masquerading as Gnutella messages but are NOT Gnutella ones,
therefore what appears to be a TTL of 0 is actually referring to a version
number...

------------------------------------------------------------------------
r15647 | rmanfredi | 2008-08-16 17:12:38 -0400 (Sat, 16 Aug 2008) | 4 lines

Added safe_list_count() to return 0 when bucket is not a leaf any more.
This can happen on return from a bucket refresh, which is asynchronous
and can start on a leaf and end with the original bucket having been split!

------------------------------------------------------------------------
r15646 | rmanfredi | 2008-08-16 04:04:31 -0400 (Sat, 16 Aug 2008) | 2 lines

Small adjustment to logs and nodes switching lists.

------------------------------------------------------------------------
r15645 | rmanfredi | 2008-08-16 04:00:56 -0400 (Sat, 16 Aug 2008) | 3 lines

Had forgottten to update value data information when creator supersedes an
older published value.

------------------------------------------------------------------------
r15644 | cbiere | 2008-08-16 03:56:08 -0400 (Sat, 16 Aug 2008) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r15643 | cbiere | 2008-08-16 03:09:21 -0400 (Sat, 16 Aug 2008) | 2 lines

 * w_concat_strings(), concat_strings(): Increased robustness.

------------------------------------------------------------------------
r15642 | cbiere | 2008-08-16 03:05:52 -0400 (Sat, 16 Aug 2008) | 2 lines

 * Improved readability slightly.

------------------------------------------------------------------------
r15641 | cbiere | 2008-08-16 02:53:28 -0400 (Sat, 16 Aug 2008) | 3 lines

 * Avoid signed integers when not useful.
 * Removed unnecessary casts.

------------------------------------------------------------------------
r15640 | cbiere | 2008-08-16 02:31:42 -0400 (Sat, 16 Aug 2008) | 2 lines

 * multiple_alt: Replaced int by bool because the count isn't used.

------------------------------------------------------------------------
r15639 | cbiere | 2008-08-16 02:15:42 -0400 (Sat, 16 Aug 2008) | 2 lines

 * Removed unnecessary and unused code.

------------------------------------------------------------------------
r15638 | cbiere | 2008-08-16 01:14:35 -0400 (Sat, 16 Aug 2008) | 2 lines

 * search_results_handle_trailer(): Fixed some glaring memory leaks.

------------------------------------------------------------------------
r15637 | cbiere | 2008-08-15 20:36:30 -0400 (Fri, 15 Aug 2008) | 2 lines

 * Minor optimization.

------------------------------------------------------------------------
r15636 | rmanfredi | 2008-08-15 17:32:38 -0400 (Fri, 15 Aug 2008) | 3 lines

Added dht_value_type_to_string2().
Forgot to call acct_net_free() at shutdown time.

------------------------------------------------------------------------
r15635 | cbiere | 2008-08-15 17:14:19 -0400 (Fri, 15 Aug 2008) | 2 lines

 * Added functions for size_t saturation arithmetic.

------------------------------------------------------------------------
r15634 | cbiere | 2008-08-15 11:03:12 -0400 (Fri, 15 Aug 2008) | 2 lines

 * dht_route_parse(): goto considered useful.

------------------------------------------------------------------------
r15633 | cbiere | 2008-08-15 10:51:49 -0400 (Fri, 15 Aug 2008) | 4 lines

 * boot_status_to_string(): Corrected boundary check.
 * dht_route_parse(): Initialize "seen", compiler warning
   seems to be false-positive though.

------------------------------------------------------------------------
r15632 | rmanfredi | 2008-08-15 10:11:18 -0400 (Fri, 15 Aug 2008) | 5 lines

When restarting soon after shutdowning, consider the DHT bootstrapped (but
initiate bucket refreshes still for non-full buckets.
When getting traffic, do not leave a node in a "pending" list if the sum of
"good" and "stale" nodes we have is less than "k".

------------------------------------------------------------------------
r15631 | rmanfredi | 2008-08-15 07:16:27 -0400 (Fri, 15 Aug 2008) | 3 lines

Count a write cache hit only when writing into a dirty entry.  Otheriwse it's
just deferred writing but not a cache hit per se.

------------------------------------------------------------------------
r15630 | rmanfredi | 2008-08-15 07:11:38 -0400 (Fri, 15 Aug 2008) | 4 lines

knode_can_recontact(): removed kn->rpc_timeouts upper threshold checking.
After the grace period we compute, we must always try to recontact the node
or we would never be able to speak to a stale node again.

------------------------------------------------------------------------
r15629 | rmanfredi | 2008-08-15 07:04:55 -0400 (Fri, 15 Aug 2008) | 3 lines

Added parameter to dht_value_free() to be able to free up the dht_value_t
encapsulation whilst preserving the data payload.

------------------------------------------------------------------------
r15628 | rmanfredi | 2008-08-15 07:03:08 -0400 (Fri, 15 Aug 2008) | 2 lines

Fixed comment to be in line with error code string.

------------------------------------------------------------------------
r15627 | rmanfredi | 2008-08-15 05:01:47 -0400 (Fri, 15 Aug 2008) | 3 lines

Changed promotion algorithm to the "good" list: now can also promote pending
nodes but only when the "stale" list is empty.

------------------------------------------------------------------------
r15626 | rmanfredi | 2008-08-15 05:00:34 -0400 (Fri, 15 Aug 2008) | 2 lines

Do not log new creator twice.

------------------------------------------------------------------------
r15625 | rmanfredi | 2008-08-15 03:39:00 -0400 (Fri, 15 Aug 2008) | 2 lines

Ooops, size_is_positive() does not include 0.

------------------------------------------------------------------------
r15624 | rmanfredi | 2008-08-15 03:24:29 -0400 (Fri, 15 Aug 2008) | 2 lines

Added basic assertions.

------------------------------------------------------------------------
r15623 | rmanfredi | 2008-08-15 03:22:31 -0400 (Fri, 15 Aug 2008) | 2 lines

Fixed improper reading of secondary keys in FIND_VALUE messages.

------------------------------------------------------------------------
r15622 | cbiere | 2008-08-14 20:43:08 -0400 (Thu, 14 Aug 2008) | 2 lines

  * Added ranges.

------------------------------------------------------------------------
r15621 | cbiere | 2008-08-14 20:07:50 -0400 (Thu, 14 Aug 2008) | 2 lines

 * hex_to_bin_buf(): Use "void *" instead of "char *" for the source pointer.

------------------------------------------------------------------------
r15620 | cbiere | 2008-08-14 19:45:15 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Corrected format strings in debug messages.

------------------------------------------------------------------------
r15619 | cbiere | 2008-08-14 19:29:56 -0400 (Thu, 14 Aug 2008) | 3 lines

 * Replaced lseek() followed by write() with compat_pwrite().
 * Replaced lseek() followed by read() with compat_read().

------------------------------------------------------------------------
r15618 | rmanfredi | 2008-08-14 19:21:38 -0400 (Thu, 14 Aug 2008) | 3 lines

When refreshing our k-bucket, use a find_node instead of a simple refresh
to not end the search when we have k entries in the path.

------------------------------------------------------------------------
r15617 | rmanfredi | 2008-08-14 19:01:38 -0400 (Thu, 14 Aug 2008) | 3 lines

Fixed bug causing crashes at shutdown time if we have a zero-lengthed value
in the cache.

------------------------------------------------------------------------
r15616 | rmanfredi | 2008-08-14 18:59:57 -0400 (Thu, 14 Aug 2008) | 3 lines

Optimize k-bucket refreshes: it is not necessary to refresh a non-splitable
full bucket as we will do nothing with the new nodes we may learn about.

------------------------------------------------------------------------
r15615 | rmanfredi | 2008-08-14 18:37:15 -0400 (Thu, 14 Aug 2008) | 4 lines

Added kbucket_to_string() to normalize k-bucket logging.
Call dht_record_activity() before dht_add_node_to_bucket() to get nicer logs:
the node will be marked alive and will not appear as a "zombie".

------------------------------------------------------------------------
r15614 | rmanfredi | 2008-08-14 17:03:27 -0400 (Thu, 14 Aug 2008) | 2 lines

Had misplaced the return type on inlined routine definitions.

------------------------------------------------------------------------
r15613 | rmanfredi | 2008-08-14 16:50:27 -0400 (Thu, 14 Aug 2008) | 2 lines

Added knode_check() to factorize common assertions.

------------------------------------------------------------------------
r15612 | cbiere | 2008-08-14 16:44:40 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added pattern.

------------------------------------------------------------------------
r15611 | cbiere | 2008-08-14 15:59:48 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15610 | cbiere | 2008-08-14 14:03:36 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15609 | rmanfredi | 2008-08-14 13:49:25 -0400 (Thu, 14 Aug 2008) | 2 lines

Emit GGEP "DHT" in our pongs if not UDP firewalled and the DHT is bootstrapped.

------------------------------------------------------------------------
r15608 | cbiere | 2008-08-14 13:41:30 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Moved the compat code to lib/compat_pio.[ch].

------------------------------------------------------------------------
r15607 | rmanfredi | 2008-08-14 13:33:47 -0400 (Thu, 14 Aug 2008) | 2 lines

Set boot_status to BOOT_NONE on dht_route_close().

------------------------------------------------------------------------
r15606 | cbiere | 2008-08-14 13:29:37 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added compatibility wrappers for pread(), pwrite(), preadv(), pwritev().

------------------------------------------------------------------------
r15605 | rmanfredi | 2008-08-14 13:25:10 -0400 (Thu, 14 Aug 2008) | 2 lines

Forgot to restore the last_seen value on retrieved nodes.

------------------------------------------------------------------------
r15604 | rmanfredi | 2008-08-14 13:22:43 -0400 (Thu, 14 Aug 2008) | 3 lines

Renamed old dht_bootstrapped() as dht_seeded() and made it private.
New dht_bootstrapped() returns TRUE only when bootstrapping is complete.

------------------------------------------------------------------------
r15603 | rmanfredi | 2008-08-14 13:07:06 -0400 (Thu, 14 Aug 2008) | 2 lines

Do not use GGEP "DHT" to boostrap if it indicates the node is firewalled.

------------------------------------------------------------------------
r15602 | rmanfredi | 2008-08-14 12:01:21 -0400 (Thu, 14 Aug 2008) | 2 lines

Rats, I meant "addr", not "n->addr" since "n" is not initialized at that point.

------------------------------------------------------------------------
r15601 | rmanfredi | 2008-08-14 11:57:18 -0400 (Thu, 14 Aug 2008) | 4 lines

Fixed dbmw_read() bug when a null item is returned.
Make sure to never call memcpy() when length is zero (because the destination
pointer could be NULL and that is a no-no).

------------------------------------------------------------------------
r15600 | rmanfredi | 2008-08-14 11:43:59 -0400 (Thu, 14 Aug 2008) | 2 lines

Must not change status of nodes not in the routing table now.

------------------------------------------------------------------------
r15599 | rmanfredi | 2008-08-14 11:38:48 -0400 (Thu, 14 Aug 2008) | 7 lines

Added assertions and re-engineered knode freeing a little to spot when
a node that is still referenced by the routing table gets freed, a sure signal
that knode_refcnt_inc() was missed somewhere or knode_free() is not needed.
Fixed missing knode_refcnt_inc() thanks to the above checks.
Improved FIND_NODE to only reply to remote hosts with known-to-be-alive hosts.
Handle nodes becoming firewalled a little bit better.

------------------------------------------------------------------------
r15598 | cbiere | 2008-08-14 11:22:49 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added peek/poke_float_be32().

------------------------------------------------------------------------
r15597 | cbiere | 2008-08-14 11:04:11 -0400 (Thu, 14 Aug 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15596 | rmanfredi | 2008-08-14 03:37:32 -0400 (Thu, 14 Aug 2008) | 2 lines

Updated manual page to reflect code changes (int -> size_t).

------------------------------------------------------------------------
r15595 | rmanfredi | 2008-08-14 03:33:24 -0400 (Thu, 14 Aug 2008) | 2 lines

Mark significant changes to the sdbm distribution.

------------------------------------------------------------------------
r15594 | cbiere | 2008-08-13 23:50:25 -0400 (Wed, 13 Aug 2008) | 3 lines

 * Use size_t instead of int where suitable to avoid conversions,
   casts and potential integer overflows.

------------------------------------------------------------------------
r15593 | cbiere | 2008-08-13 22:33:15 -0400 (Wed, 13 Aug 2008) | 22 lines

 * Prefixed all public SDBM macros with "DBM_".
 * Removed "register" keyword.
 * Removed unnecessary "(void)" in front of function calls.
 * struct DBM:
   * Keep implementation details hidden in sdbm.c.
   * Sorted members by size for compactness.
   * Allocate extra buffers for pagbuf and dirbuf
     because the code expects these to be aligned
     for "short int".
 * Replaced macros by (static inline) functions where possible.
 * Removed comma-operator. This should be reserved to macros
   or the like where it may be necessary and not used to save
   lines or look fancy.
 * sdbm_store(): val.dptr must be a valid pointer and non-NULL
   because the internal code uses memcpy() etc. without further
   checks.
 * Added sdbm_is_storable() to avoid integer overflows when
   calculating the required space.
 * sdbm_open():
   * Compose the filenames properly.
   * Additional file type and size checks.

------------------------------------------------------------------------
r15592 | cbiere | 2008-08-13 21:08:59 -0400 (Wed, 13 Aug 2008) | 2 lines

 * Added file_close().

------------------------------------------------------------------------
r15591 | cbiere | 2008-08-13 21:07:34 -0400 (Wed, 13 Aug 2008) | 2 lines

 * Store timestamps with UTC instead of local timezone.

------------------------------------------------------------------------
r15590 | cbiere | 2008-08-13 20:15:01 -0400 (Wed, 13 Aug 2008) | 2 lines

 * Added kuid_atom_free_null() and kuid_atom_change().

------------------------------------------------------------------------
r15589 | cbiere | 2008-08-13 19:06:48 -0400 (Wed, 13 Aug 2008) | 2 lines

 * keys_close(): Fixed crash on exit if the DHT feature is disabled.

------------------------------------------------------------------------
r15588 | cbiere | 2008-08-13 16:42:58 -0400 (Wed, 13 Aug 2008) | 3 lines

 * Added "mode" parameter to file_open() so that it's a drop-in replacement
   for open().

------------------------------------------------------------------------
r15587 | rmanfredi | 2008-08-13 16:42:52 -0400 (Wed, 13 Aug 2008) | 2 lines

Spread more assertions.

------------------------------------------------------------------------
r15586 | rmanfredi | 2008-08-13 16:37:24 -0400 (Wed, 13 Aug 2008) | 2 lines

Updated.

------------------------------------------------------------------------
r15585 | rmanfredi | 2008-08-13 16:26:57 -0400 (Wed, 13 Aug 2008) | 2 lines

Split the "update" target to be able to update bogons and geoip separately.

------------------------------------------------------------------------
r15584 | rmanfredi | 2008-08-13 16:22:22 -0400 (Wed, 13 Aug 2008) | 2 lines

Manually updated.

------------------------------------------------------------------------
r15583 | rmanfredi | 2008-08-13 15:56:05 -0400 (Wed, 13 Aug 2008) | 2 lines

Another mixup between Kademlia header flags and knode flags.

------------------------------------------------------------------------
r15582 | cbiere | 2008-08-13 14:42:16 -0400 (Wed, 13 Aug 2008) | 2 lines

 * Added proper bounds checking for size_t values.

------------------------------------------------------------------------
r15581 | rmanfredi | 2008-08-13 13:41:30 -0400 (Wed, 13 Aug 2008) | 3 lines

Fixed assertions for dbmw_write(): it is not a problem to write a NULL
value (NULL pointer, zero length).

------------------------------------------------------------------------
r15580 | rmanfredi | 2008-08-13 13:15:23 -0400 (Wed, 13 Aug 2008) | 12 lines

Handle STORE up to values_store() even if there is an invalid security token
supplied (but fail with STORE_SC_BAD_TOKEN naturally), provided the node
sending the STORE is one of our k-closest neighbours.  This ensures we get
consistent traces and it helps our neighbour notice it needs to refresh
its token.
Fixed typo that caused STORE_ACK rather than VALUE messages to be sent back
when value is found!
When incoming messages comes from a host supplying a bad contact address,
force the "firewalled" flag to avoid spurious warnings and to prevent insertion
of that host in our routing table.
Peek at the DHT value type early to be able to log it in the traces.

------------------------------------------------------------------------
r15579 | rmanfredi | 2008-08-13 13:06:11 -0400 (Wed, 13 Aug 2008) | 3 lines

When removing a node from the good list to be able to insert back a stale
node, do not discard the good node but try to stuff it to the pending list.

------------------------------------------------------------------------
r15578 | rmanfredi | 2008-08-13 13:03:41 -0400 (Wed, 13 Aug 2008) | 2 lines

Fixed terminology in comment.

------------------------------------------------------------------------
r15577 | rmanfredi | 2008-08-13 13:02:02 -0400 (Wed, 13 Aug 2008) | 3 lines

Added keys_within_kball().
Forgot to increase request count when we get a request for a key.

------------------------------------------------------------------------
r15576 | rmanfredi | 2008-08-13 12:50:08 -0400 (Wed, 13 Aug 2008) | 2 lines

Added STORE_SC_BAD_TOKEN error code.

------------------------------------------------------------------------
r15575 | rmanfredi | 2008-08-13 12:48:37 -0400 (Wed, 13 Aug 2008) | 2 lines

Allow bstr_skip() calls with a zeroed count, for convenience.

------------------------------------------------------------------------
r15574 | rmanfredi | 2008-08-13 07:58:48 -0400 (Wed, 13 Aug 2008) | 5 lines

Change the way the security token is generated: we now get a knode instead of
the addr/port, and this allows us to handle firewalled nodes specially.
Also increased the lifetime of the tokens we generate to 2 hours (> Kademlia
republishing period).

------------------------------------------------------------------------
r15573 | rmanfredi | 2008-08-13 07:18:18 -0400 (Wed, 13 Aug 2008) | 2 lines

Must now link with sdbm.

------------------------------------------------------------------------
r15572 | rmanfredi | 2008-08-13 07:16:54 -0400 (Wed, 13 Aug 2008) | 2 lines

Plugged support for FIND_VALUE and STORE operations.

------------------------------------------------------------------------
r15571 | rmanfredi | 2008-08-13 07:15:26 -0400 (Wed, 13 Aug 2008) | 3 lines

Contact deserialization is now done via kmsg_deserialize_contact().
Whether host is usable or not is now done via knode_is_usable().

------------------------------------------------------------------------
r15570 | rmanfredi | 2008-08-13 07:13:36 -0400 (Wed, 13 Aug 2008) | 2 lines

Accounting of class C networks was factorized in acct.c.

------------------------------------------------------------------------
r15569 | rmanfredi | 2008-08-13 07:11:48 -0400 (Wed, 13 Aug 2008) | 2 lines

Added minimal key management (initial store, no refresh nor expiration).

------------------------------------------------------------------------
r15568 | rmanfredi | 2008-08-13 07:05:09 -0400 (Wed, 13 Aug 2008) | 2 lines

Made knode_to_string_buf() public.

------------------------------------------------------------------------
r15567 | rmanfredi | 2008-08-13 06:47:52 -0400 (Wed, 13 Aug 2008) | 2 lines

New files added for value management and DHT storage.

------------------------------------------------------------------------
r15566 | rmanfredi | 2008-08-13 06:44:06 -0400 (Wed, 13 Aug 2008) | 3 lines

Added DB map abstraction and DB map wrapper with transparent serialization and
read/write cache support.

------------------------------------------------------------------------
r15565 | rmanfredi | 2008-08-13 06:40:42 -0400 (Wed, 13 Aug 2008) | 4 lines

Added bstr_read_base() to return the current reading position.
Added bstr_read_float_be() to read floats in big-endian.
For local serialization, added bstr_read_time() and bstr_read_boolean().

------------------------------------------------------------------------
r15564 | rmanfredi | 2008-08-13 06:21:21 -0400 (Wed, 13 Aug 2008) | 4 lines

Added pmsg_write_be64(), pmsg_write_le64().
Added pmsg_write_float_be() and pmsg_write_ipv4_or_ipv6_addr().
For local serialization, added pmsg_write_time() and pmsg_write_boolean().

------------------------------------------------------------------------
r15563 | rmanfredi | 2008-08-13 04:34:01 -0400 (Wed, 13 Aug 2008) | 2 lines

Added map_count().

------------------------------------------------------------------------
r15562 | rmanfredi | 2008-08-12 07:55:35 -0400 (Tue, 12 Aug 2008) | 2 lines

Added knode_is_usable().

------------------------------------------------------------------------
r15561 | rmanfredi | 2008-08-10 18:18:35 -0400 (Sun, 10 Aug 2008) | 3 lines

Added pre-condition for zdestroy(): better have an assertion failure there
than a segmentation fault.

------------------------------------------------------------------------
r15560 | rmanfredi | 2008-08-10 16:48:48 -0400 (Sun, 10 Aug 2008) | 3 lines

Added bstr_create(), bstr_close() and bstr_reset() to be able to reuse the
same stream object over different arenas.

------------------------------------------------------------------------
r15559 | rmanfredi | 2008-08-10 16:45:32 -0400 (Sun, 10 Aug 2008) | 2 lines

Added pmsg_reset().

------------------------------------------------------------------------
r15558 | rmanfredi | 2008-08-10 04:35:11 -0400 (Sun, 10 Aug 2008) | 2 lines

Remove dbm.c, submitted by error.

------------------------------------------------------------------------
r15557 | rmanfredi | 2008-08-10 04:00:42 -0400 (Sun, 10 Aug 2008) | 2 lines

Moved core/pmsg.[ch] to lib.

------------------------------------------------------------------------
r15556 | rmanfredi | 2008-08-09 17:34:11 -0400 (Sat, 09 Aug 2008) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r15555 | rmanfredi | 2008-08-09 17:30:23 -0400 (Sat, 09 Aug 2008) | 2 lines

Added public-domain sdbm, taken out of Perl 5.10.0 and adapted to fit in GTKG.

------------------------------------------------------------------------
r15554 | rmanfredi | 2008-08-09 17:14:48 -0400 (Sat, 09 Aug 2008) | 2 lines

First skeleton for key management.

------------------------------------------------------------------------
r15553 | rmanfredi | 2008-08-09 17:13:23 -0400 (Sat, 09 Aug 2008) | 2 lines

Handle improbable MUID generation collision, up to some point.

------------------------------------------------------------------------
r15552 | rmanfredi | 2008-08-09 15:50:25 -0400 (Sat, 09 Aug 2008) | 2 lines

Moved common_leading_bits() from patricia.c to misc.c.

------------------------------------------------------------------------
r15551 | rmanfredi | 2008-08-09 15:22:29 -0400 (Sat, 09 Aug 2008) | 2 lines

Added "dht_storage_debug" and "dht_publish_debug" properties.

------------------------------------------------------------------------
r15550 | rmanfredi | 2008-08-09 13:05:54 -0400 (Sat, 09 Aug 2008) | 2 lines

Fixed dates.

------------------------------------------------------------------------
r15549 | rmanfredi | 2008-08-09 12:04:12 -0400 (Sat, 09 Aug 2008) | 6 lines

Added accounting of ticks really used to do CPU-intensive tasks otherwise
the scheduler would have too small a tick cost and would freeze everything
for 30+ seconds the first time TTH computation kicked in.
Fixed debugging message to specify unit for "elapsed", which is in usecs,
whilst the reported "total" is in msecs.

------------------------------------------------------------------------
r15548 | rmanfredi | 2008-08-09 11:48:18 -0400 (Sat, 09 Aug 2008) | 2 lines

Added cautionary assertion.

------------------------------------------------------------------------
r15547 | rmanfredi | 2008-08-09 07:38:54 -0400 (Sat, 09 Aug 2008) | 2 lines

Protect against user mis-editing the saved DHT nodes and creating dups.

------------------------------------------------------------------------
r15546 | rmanfredi | 2008-08-09 07:17:33 -0400 (Sat, 09 Aug 2008) | 2 lines

Changed the TEA interface to hide tea_block_t.

------------------------------------------------------------------------
r15545 | rmanfredi | 2008-08-08 18:19:57 -0400 (Fri, 08 Aug 2008) | 2 lines

Plugged security token generation in.

------------------------------------------------------------------------
r15544 | rmanfredi | 2008-08-08 18:11:12 -0400 (Fri, 08 Aug 2008) | 2 lines

Added security token generation / verification.

------------------------------------------------------------------------
r15543 | rmanfredi | 2008-08-08 16:21:43 -0400 (Fri, 08 Aug 2008) | 2 lines

Node verification was missing ref-counting.

------------------------------------------------------------------------
r15542 | rmanfredi | 2008-08-08 10:46:57 -0400 (Fri, 08 Aug 2008) | 3 lines

Refresh our k-bucket more often, so that we always have an accurate and
hopefully complete view on our closest subtree.

------------------------------------------------------------------------
r15541 | rmanfredi | 2008-08-08 10:27:30 -0400 (Fri, 08 Aug 2008) | 2 lines

Show routing table's version of the status when changing status of twins.

------------------------------------------------------------------------
r15540 | cbiere | 2008-08-08 10:25:57 -0400 (Fri, 08 Aug 2008) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r15539 | rmanfredi | 2008-08-08 10:13:37 -0400 (Fri, 08 Aug 2008) | 5 lines

Added incremental bootstrap process to avoid huge amount of UDP incoming
traffic.
Also deny bucket refreshes until we are completely bootstrapped to avoid
being overwhelmed with UDP traffic at startup.

------------------------------------------------------------------------
r15538 | rmanfredi | 2008-08-08 09:24:47 -0400 (Fri, 08 Aug 2008) | 2 lines

Added kuid_random_within() and kuid_flip_nth_leading_bit().

------------------------------------------------------------------------
r15537 | rmanfredi | 2008-08-08 08:11:28 -0400 (Fri, 08 Aug 2008) | 2 lines

Fixed bug in dht_fill_closest() which messed up with the amount of entries.

------------------------------------------------------------------------
r15536 | rmanfredi | 2008-08-08 07:53:10 -0400 (Fri, 08 Aug 2008) | 2 lines

Added KDA_B parameter in <if/dht/kademlia.h> and reduced it from 5 to 4.

------------------------------------------------------------------------
r15535 | rmanfredi | 2008-08-08 07:32:41 -0400 (Fri, 08 Aug 2008) | 2 lines

Remove unused "refcounting" feature during closest filling.

------------------------------------------------------------------------
r15534 | rmanfredi | 2008-08-08 07:01:02 -0400 (Fri, 08 Aug 2008) | 2 lines

Use different parallelism modes depending on the lookup type.

------------------------------------------------------------------------
r15533 | rmanfredi | 2008-08-08 06:58:46 -0400 (Fri, 08 Aug 2008) | 2 lines

Fixed handling of node verification.

------------------------------------------------------------------------
r15532 | rmanfredi | 2008-08-07 19:27:58 -0400 (Thu, 07 Aug 2008) | 2 lines

Must handle "twins" in dht_remove_node_from_bucket() as well.

------------------------------------------------------------------------
r15531 | rmanfredi | 2008-08-07 19:27:12 -0400 (Thu, 07 Aug 2008) | 2 lines

More log message tweaking.

------------------------------------------------------------------------
r15530 | rmanfredi | 2008-08-07 17:59:17 -0400 (Thu, 07 Aug 2008) | 3 lines

Forgot to propagate the parent bucket split_depth to children (the depth
where the bucket left our tree space).

------------------------------------------------------------------------
r15529 | rmanfredi | 2008-08-07 17:07:56 -0400 (Thu, 07 Aug 2008) | 7 lines

Adjust the firing time of period checks by +/- 5% to avoid all of them
firing at the same time for all the buckets and causing a sudden activity
burst, traffic-wise.
Fixed bucket splitting, which was not properly propagating the "ours" flag,
thereby causing extra bucket splitting in parts of the tree where this was
not necessary.

------------------------------------------------------------------------
r15528 | rmanfredi | 2008-08-07 17:03:47 -0400 (Thu, 07 Aug 2008) | 4 lines

Was too "trigger happy" with queries.  Do not consider replies from an RPC
issued at an earlier hop to iterate, unless we have no more outstanding
RPC for that lookup.

------------------------------------------------------------------------
r15527 | rmanfredi | 2008-08-07 16:03:38 -0400 (Thu, 07 Aug 2008) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r15526 | rmanfredi | 2008-08-07 16:02:41 -0400 (Thu, 07 Aug 2008) | 2 lines

Remove useless tracing.

------------------------------------------------------------------------
r15525 | rmanfredi | 2008-08-07 16:00:40 -0400 (Thu, 07 Aug 2008) | 2 lines

Fixed harmful confusion in assertion.

------------------------------------------------------------------------
r15524 | rmanfredi | 2008-08-07 13:43:26 -0400 (Thu, 07 Aug 2008) | 4 lines

Added workaround for bootstrapping finalization.
Fixed wrong assertion.
Make sure we install_bucket_refresh() before dht_bucket_refresh().

------------------------------------------------------------------------
r15523 | rmanfredi | 2008-08-07 12:53:05 -0400 (Thu, 07 Aug 2008) | 5 lines

Need to account for "twin nodes", that is copies of nodes lying in the routing
table.  This is inevitable due to the fact nodes are only inserted in the
table when we get (valid) traffic from them, yet we learn from nodes through
lookups or Gnutella pongs.

------------------------------------------------------------------------
r15522 | rmanfredi | 2008-08-07 12:13:29 -0400 (Thu, 07 Aug 2008) | 2 lines

Trace non-startable lookups due to the shortlist bearing no contactable node.

------------------------------------------------------------------------
r15521 | rmanfredi | 2008-08-07 11:45:52 -0400 (Thu, 07 Aug 2008) | 3 lines

Added recursively_apply().
Finish the bootsrapping process by refreshing all the buckets.

------------------------------------------------------------------------
r15520 | rmanfredi | 2008-08-07 10:41:33 -0400 (Thu, 07 Aug 2008) | 2 lines

Fixed faulty sibling_of() implementation.

------------------------------------------------------------------------
r15519 | rmanfredi | 2008-08-07 10:08:25 -0400 (Thu, 07 Aug 2008) | 4 lines

Fixed order of operations in lookup_rpc_cb(): one must assert nothing about
the lookup object reference until it is known to be alive.
Added final stats logging.

------------------------------------------------------------------------
r15518 | rmanfredi | 2008-08-07 09:17:58 -0400 (Thu, 07 Aug 2008) | 3 lines

Do not update closest node information when the shortlist is empty: we have
nothing to improve on anyway.

------------------------------------------------------------------------
r15517 | rmanfredi | 2008-08-07 09:14:37 -0400 (Thu, 07 Aug 2008) | 6 lines

Allow bootstrapping from pesisted routing table information.
Added consistency checks for k-buckets.
When inserting nodes in the routing table, split full buckets as deep as
necessary and possible, in case all the nodes get dispatched to the same
child during the split.

------------------------------------------------------------------------
r15516 | rmanfredi | 2008-08-07 09:11:18 -0400 (Thu, 07 Aug 2008) | 2 lines

Forgot to refcount knode within the pmsg_info structure.

------------------------------------------------------------------------
r15515 | rmanfredi | 2008-08-07 09:10:31 -0400 (Thu, 07 Aug 2008) | 2 lines

Added more debugging traces.

------------------------------------------------------------------------
r15514 | rmanfredi | 2008-08-07 09:09:52 -0400 (Thu, 07 Aug 2008) | 2 lines

Show node status as well when stringifying a knode.

------------------------------------------------------------------------
r15513 | rmanfredi | 2008-08-07 07:50:46 -0400 (Thu, 07 Aug 2008) | 2 lines

No longer track security tokens in knodes.

------------------------------------------------------------------------
r15512 | rmanfredi | 2008-08-07 04:43:04 -0400 (Thu, 07 Aug 2008) | 2 lines

Fixed hash_list_list(): had forgotten about hashlist's own encapsulation.

------------------------------------------------------------------------
r15511 | rmanfredi | 2008-08-07 04:01:46 -0400 (Thu, 07 Aug 2008) | 2 lines

Spread more knode magic checking.

------------------------------------------------------------------------
r15510 | rmanfredi | 2008-08-07 03:40:36 -0400 (Thu, 07 Aug 2008) | 2 lines

Added magic number checking on all interface routines.

------------------------------------------------------------------------
r15509 | rmanfredi | 2008-08-07 03:39:22 -0400 (Thu, 07 Aug 2008) | 2 lines

Show contact's address in packet logs, as decompiled from the header.

------------------------------------------------------------------------
r15508 | rmanfredi | 2008-08-07 03:35:18 -0400 (Thu, 07 Aug 2008) | 2 lines

Mention that port numbers are exchanged in big-endian format.

------------------------------------------------------------------------
r15507 | cbiere | 2008-08-06 22:01:00 -0400 (Wed, 06 Aug 2008) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15506 | cbiere | 2008-08-06 20:50:24 -0400 (Wed, 06 Aug 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15505 | cbiere | 2008-08-06 20:13:34 -0400 (Wed, 06 Aug 2008) | 2 lines

 * vcode.be32 is now vcode.u32 and host-endian.

------------------------------------------------------------------------
r15504 | cbiere | 2008-08-06 19:57:31 -0400 (Wed, 06 Aug 2008) | 3 lines

 * vendor_code_t: Hold the code in host endian byte order instead of
   big endian order for consistency with the T_* constants.

------------------------------------------------------------------------
r15503 | rmanfredi | 2008-08-06 18:31:37 -0400 (Wed, 06 Aug 2008) | 2 lines

Fixed edit mistake.

------------------------------------------------------------------------
r15502 | rmanfredi | 2008-08-06 18:27:03 -0400 (Wed, 06 Aug 2008) | 3 lines

Removed ntohl() when printing vendor codes, as they are read properly as
big-endian quantities from the Kademlia header.

------------------------------------------------------------------------
r15501 | rmanfredi | 2008-08-06 18:16:06 -0400 (Wed, 06 Aug 2008) | 2 lines

Port numbers are stored in big-endian format in Kademlia.

------------------------------------------------------------------------
r15500 | cbiere | 2008-08-06 17:56:34 -0400 (Wed, 06 Aug 2008) | 3 lines

 * Allow bypassing a seemingly stale host cache and contacting an UHC
   after some time instead of amount of "calls" for more transparency.

------------------------------------------------------------------------
r15499 | rmanfredi | 2008-08-06 17:45:09 -0400 (Wed, 06 Aug 2008) | 4 lines

Pay attention to the returned value of lookup_find_node() in case the
bootstrap seed returns our own ID: the routing table will be empty and we
won't be able to bootstrap.

------------------------------------------------------------------------
r15498 | rmanfredi | 2008-08-06 17:43:39 -0400 (Wed, 06 Aug 2008) | 3 lines

If we cannot load the shortlist, do not forget to release the lookup structure
before returning NULL.

------------------------------------------------------------------------
r15497 | rmanfredi | 2008-08-06 17:32:53 -0400 (Wed, 06 Aug 2008) | 4 lines

Added a parameter to rpc_cb_free() to avoid removing the RPC control block
from the hash table if we're freeing the value from within a hash table
iterator...

------------------------------------------------------------------------
r15496 | rmanfredi | 2008-08-06 17:26:21 -0400 (Wed, 06 Aug 2008) | 2 lines

Clear the event when the callout queue fires it.

------------------------------------------------------------------------
r15495 | rmanfredi | 2008-08-06 17:25:39 -0400 (Wed, 06 Aug 2008) | 2 lines

Stop considering replies to our bootstrapping pings as soon as we get one pong.

------------------------------------------------------------------------
r15494 | rmanfredi | 2008-08-06 17:24:43 -0400 (Wed, 06 Aug 2008) | 3 lines

For the first RPC sent to a node, allow more time by default since we don't
know the what the RTT will be.

------------------------------------------------------------------------
r15493 | rmanfredi | 2008-08-06 17:08:49 -0400 (Wed, 06 Aug 2008) | 4 lines

Allow them to report a DHT size of zero (serialized over 0 bytes).
When kn is NULL, we want to use the id from the header, not kn->id...
Added a "v" in front of the client's version number for logging.

------------------------------------------------------------------------
r15492 | rmanfredi | 2008-08-06 17:06:22 -0400 (Wed, 06 Aug 2008) | 2 lines

Forgot to free the RPC control block after processing the RPC reply.

------------------------------------------------------------------------
r15491 | rmanfredi | 2008-08-06 16:42:15 -0400 (Wed, 06 Aug 2008) | 2 lines

Clearer code showing the impact of len being non-zero.

------------------------------------------------------------------------
r15490 | rmanfredi | 2008-08-06 16:40:39 -0400 (Wed, 06 Aug 2008) | 2 lines

If the root is null, we cannot find anything.

------------------------------------------------------------------------
r15489 | rmanfredi | 2008-08-06 16:22:30 -0400 (Wed, 06 Aug 2008) | 2 lines

Please read line 455.

------------------------------------------------------------------------
r15488 | cbiere | 2008-08-06 15:51:22 -0400 (Wed, 06 Aug 2008) | 2 lines

 * You fail at math and C.

------------------------------------------------------------------------
r15487 | rmanfredi | 2008-08-06 15:33:10 -0400 (Wed, 06 Aug 2008) | 3 lines

All signed must be banned.
Do not restrict "attempts" to its modulo or we will never call the UHC.

------------------------------------------------------------------------
r15486 | cbiere | 2008-08-06 15:25:34 -0400 (Wed, 06 Aug 2008) | 2 lines

 * Ever increasing signed integers are illegal.

------------------------------------------------------------------------
r15485 | rmanfredi | 2008-08-06 14:46:51 -0400 (Wed, 06 Aug 2008) | 5 lines

Avoid getting stuck in endless connecting attempts when the host cache is
stale.  After a reasonable amount of attempts, allow an UHC ping to go through.
Also allow a node to send a ping to its neighbours every now and then when
missing connections.

------------------------------------------------------------------------
r15484 | rmanfredi | 2008-08-06 14:44:10 -0400 (Wed, 06 Aug 2008) | 2 lines

The DHT code now takes care of initing DHT RPCs and lookups.

------------------------------------------------------------------------
r15483 | rmanfredi | 2008-08-06 14:43:16 -0400 (Wed, 06 Aug 2008) | 2 lines

Fixed assertion boundary.

------------------------------------------------------------------------
r15482 | rmanfredi | 2008-08-06 14:42:24 -0400 (Wed, 06 Aug 2008) | 2 lines

Initial version of DHT node lookups, along with DHT bootstrapping support.

------------------------------------------------------------------------
r15481 | cbiere | 2008-08-06 10:40:44 -0400 (Wed, 06 Aug 2008) | 2 lines

 * The more types the merrier.

------------------------------------------------------------------------
r15480 | rmanfredi | 2008-08-06 09:53:33 -0400 (Wed, 06 Aug 2008) | 2 lines

Added pmsg_write_offset() and pmsg_written_size().

------------------------------------------------------------------------
r15479 | rmanfredi | 2008-08-06 08:44:01 -0400 (Wed, 06 Aug 2008) | 2 lines

Added cast to shut up compiler warning.

------------------------------------------------------------------------
r15478 | cbiere | 2008-08-06 08:39:36 -0400 (Wed, 06 Aug 2008) | 2 lines

 * size_t != unsigned int.

------------------------------------------------------------------------
r15477 | rmanfredi | 2008-08-06 06:15:55 -0400 (Wed, 06 Aug 2008) | 3 lines

Added map_switch_to_hash() and map_switch_to_patricia() to switch wrapping
implementations without having to release and re-allocate a new map.

------------------------------------------------------------------------
r15476 | rmanfredi | 2008-08-06 05:35:24 -0400 (Wed, 06 Aug 2008) | 2 lines

Added missing "deinstall" target.

------------------------------------------------------------------------
r15475 | rmanfredi | 2008-08-06 05:24:24 -0400 (Wed, 06 Aug 2008) | 2 lines

Added bstr_skip().

------------------------------------------------------------------------
r15474 | rmanfredi | 2008-08-05 17:36:12 -0400 (Tue, 05 Aug 2008) | 2 lines

Added patricia_metric_iterator_lazy().

------------------------------------------------------------------------
r15473 | rmanfredi | 2008-08-05 17:23:21 -0400 (Tue, 05 Aug 2008) | 3 lines

Since patricia_metric_iterator() is reserved to trees with constant width keys,
the interface can be also simplified by removing the keybits parameter.

------------------------------------------------------------------------
r15472 | rmanfredi | 2008-08-05 17:21:50 -0400 (Tue, 05 Aug 2008) | 2 lines

Added bstr_unread_size().

------------------------------------------------------------------------
r15470 | rmanfredi | 2008-08-05 08:19:35 -0400 (Tue, 05 Aug 2008) | 3 lines

Added bstr_read().
Use peek_* routines from endian.h to read 16- and 32-bit quantities.

------------------------------------------------------------------------
r15469 | rmanfredi | 2008-08-05 04:18:14 -0400 (Tue, 05 Aug 2008) | 4 lines

Simplified the PATRICIA interface when it is used for holding keys
of fixed size only: we can omit the key size in bits in most
function calls, supplying variants for variable sized keys.

------------------------------------------------------------------------
r15468 | rmanfredi | 2008-08-04 12:06:52 -0400 (Mon, 04 Aug 2008) | 2 lines

Added map_implementation() to fetch the underlying implementing object.

------------------------------------------------------------------------
r15467 | rmanfredi | 2008-08-04 07:14:21 -0400 (Mon, 04 Aug 2008) | 4 lines

Added map_create_from_hash() and map_create_from_patricia() to create a map
encapsulation out of an existing implementation.
Added map_release() to discard the map implementation.

------------------------------------------------------------------------
r15466 | rmanfredi | 2008-08-04 07:02:13 -0400 (Mon, 04 Aug 2008) | 2 lines

Added patricia_max_keybits().

------------------------------------------------------------------------
r15465 | rmanfredi | 2008-08-04 06:49:16 -0400 (Mon, 04 Aug 2008) | 2 lines

Fixed comments.

------------------------------------------------------------------------
r15464 | rmanfredi | 2008-08-03 18:12:37 -0400 (Sun, 03 Aug 2008) | 2 lines

Moved dht_verify_node() from rpc.c to routing.c, where it belongs.

------------------------------------------------------------------------
r15463 | rmanfredi | 2008-08-03 15:22:29 -0400 (Sun, 03 Aug 2008) | 2 lines

Added patricia_remove_closest() and patricia_remove_furthest().

------------------------------------------------------------------------
r15462 | rmanfredi | 2008-08-03 15:00:50 -0400 (Sun, 03 Aug 2008) | 2 lines

Added the "dht_lookup_debug" property.

------------------------------------------------------------------------
r15461 | rmanfredi | 2008-08-03 11:32:46 -0400 (Sun, 03 Aug 2008) | 2 lines

Added unit test for patricia_furthest_extended().

------------------------------------------------------------------------
r15460 | rmanfredi | 2008-08-03 11:23:51 -0400 (Sun, 03 Aug 2008) | 5 lines

Fixed typo in assertion, which could lead to spurious assertion failure.
Extended unit tests to use random keys as well, just to be sure everything
works as expected in case the pre-canned test keys do not cover all the
interesting situations.

------------------------------------------------------------------------
r15459 | rmanfredi | 2008-08-03 10:01:34 -0400 (Sun, 03 Aug 2008) | 2 lines

Added patricia_furthest() and patricia_furthest_extended().

------------------------------------------------------------------------
r15458 | rmanfredi | 2008-08-02 17:54:22 -0400 (Sat, 02 Aug 2008) | 2 lines

Added retrieval of persisted routing table.

------------------------------------------------------------------------
r15457 | rmanfredi | 2008-08-02 17:52:53 -0400 (Sat, 02 Aug 2008) | 2 lines

Reformatted too long a line.

------------------------------------------------------------------------
r15456 | rmanfredi | 2008-08-02 14:38:10 -0400 (Sat, 02 Aug 2008) | 2 lines

Added comment to interface routines.

------------------------------------------------------------------------
r15455 | cbiere | 2008-08-02 10:26:55 -0400 (Sat, 02 Aug 2008) | 2 lines

 * Use vendor_code_to_string_buf() to avoid static buffer.

------------------------------------------------------------------------
r15454 | cbiere | 2008-08-02 10:11:42 -0400 (Sat, 02 Aug 2008) | 2 lines

 * Added VENDOR_CODE_BUFLEN.

------------------------------------------------------------------------
r15453 | cbiere | 2008-08-02 10:07:52 -0400 (Sat, 02 Aug 2008) | 2 lines

 * Added vendor_code_to_string_buf().

------------------------------------------------------------------------
r15452 | cbiere | 2008-08-02 09:41:50 -0400 (Sat, 02 Aug 2008) | 2 lines

 * Modified weird use of parameters.

------------------------------------------------------------------------
r15451 | rmanfredi | 2008-08-02 09:06:33 -0400 (Sat, 02 Aug 2008) | 3 lines

Added generic KUID verification on RPC replies, which can be optionally
disabled when the RPC callback needs to perform customized processing.

------------------------------------------------------------------------
r15450 | rmanfredi | 2008-08-02 04:10:16 -0400 (Sat, 02 Aug 2008) | 3 lines

Distinguish between a node's Kademlia version number and the version number
of each message.

------------------------------------------------------------------------
r15449 | cbiere | 2008-07-20 14:30:49 -0400 (Sun, 20 Jul 2008) | 2 lines

 * Corrected inverted value for "TCPI".

------------------------------------------------------------------------
r15448 | cbiere | 2008-07-20 14:23:48 -0400 (Sun, 20 Jul 2008) | 2 lines

 * vmsg_send_features_supported(): Indicate (non-)support for some more features.

------------------------------------------------------------------------
r15447 | cbiere | 2008-07-20 13:51:41 -0400 (Sun, 20 Jul 2008) | 3 lines

 * Added cq_debug to get rid of annoying, frequent and overly verbose debug
   messages.

------------------------------------------------------------------------
r15446 | rmanfredi | 2008-07-19 07:55:31 -0400 (Sat, 19 Jul 2008) | 2 lines

Shut up compiler warning about possible un-initialized value.

------------------------------------------------------------------------
r15445 | rmanfredi | 2008-07-19 07:45:35 -0400 (Sat, 19 Jul 2008) | 2 lines

Moved Tiny Encryption Algorithm from dht to lib.

------------------------------------------------------------------------
r15444 | rmanfredi | 2008-07-18 16:03:33 -0400 (Fri, 18 Jul 2008) | 7 lines

Added PATRICIA iterators: one lexicographic, one metrical.
The lexicographic iterator is used to traverse the tree in depth-first order
and is an alternative to patricia_foreach(), although it can start from the
leftmost or the rightmost of the tree.
The metrical iterator works relative to a key and traverses the tree by
increasing / decreasing distance to the key, using the XOR distance.

------------------------------------------------------------------------
r15443 | cbiere | 2008-07-18 03:11:47 -0400 (Fri, 18 Jul 2008) | 2 lines

 * Extended ranges.

------------------------------------------------------------------------
r15442 | cbiere | 2008-07-18 02:34:38 -0400 (Fri, 18 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15441 | cbiere | 2008-07-18 02:09:45 -0400 (Fri, 18 Jul 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15440 | cbiere | 2008-07-18 00:31:00 -0400 (Fri, 18 Jul 2008) | 3 lines

 * Instead of migrating to GGEP "H" LimeWire introduced GGEP "TT" to transport
   the tigertree root hash replacing their former plain-text "urn:ttroot".

------------------------------------------------------------------------
r15439 | cbiere | 2008-07-17 20:22:16 -0400 (Thu, 17 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15438 | cbiere | 2008-07-17 20:02:04 -0400 (Thu, 17 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15437 | rmanfredi | 2008-07-17 16:53:39 -0400 (Thu, 17 Jul 2008) | 2 lines

Show unofficial build status in --version output.

------------------------------------------------------------------------
r15436 | rmanfredi | 2008-07-17 16:07:07 -0400 (Thu, 17 Jul 2008) | 4 lines

Measurement shown that there can be 8000+ entries in the callout queue under
high load.  Therefore double the hash size to ensure a reasonable average
amount of items per bucket list.

------------------------------------------------------------------------
r15435 | rmanfredi | 2008-07-17 14:47:49 -0400 (Thu, 17 Jul 2008) | 3 lines

Plugged new set_library_debug() call.
Plugged new map_test() call at init time.

------------------------------------------------------------------------
r15434 | rmanfredi | 2008-07-17 13:27:57 -0400 (Thu, 17 Jul 2008) | 2 lines

Fixed wrong comment.

------------------------------------------------------------------------
r15433 | rmanfredi | 2008-07-17 13:23:42 -0400 (Thu, 17 Jul 2008) | 4 lines

Added map abstration on top of the hash table and PATRICIA trees.
Depending on the amount of items stored, PATRICIA trees can provide more
efficient lookups than hash tables.

------------------------------------------------------------------------
r15432 | rmanfredi | 2008-07-17 13:19:38 -0400 (Thu, 17 Jul 2008) | 3 lines

Allow configuration of "library debug level" at init time since there are
no core/GUI properties visible from the library.

------------------------------------------------------------------------
r15431 | rmanfredi | 2008-07-17 13:16:17 -0400 (Thu, 17 Jul 2008) | 2 lines

Plugged a memory leak during patricia_foreach_remove().

------------------------------------------------------------------------
r15430 | rmanfredi | 2008-07-17 07:10:55 -0400 (Thu, 17 Jul 2008) | 3 lines

Fixed size of tea_key_t, wrongly dimensionned to that of tea_block_t.
This was naturally leading to stack smashing in the tea_test() routine.

------------------------------------------------------------------------
r15429 | rmanfredi | 2008-07-17 05:35:36 -0400 (Thu, 17 Jul 2008) | 3 lines

Removed direct usage of tm_elapsed(), replacing with calls to new
convenience routines.

------------------------------------------------------------------------
r15428 | rmanfredi | 2008-07-17 05:30:35 -0400 (Thu, 17 Jul 2008) | 2 lines

Added tm_elapsed_us().

------------------------------------------------------------------------
r15427 | rmanfredi | 2008-07-17 05:06:53 -0400 (Thu, 17 Jul 2008) | 3 lines

Moved time-related definitions and inlined routines from misc.h to tm.h.
Added convenience routines: tm_elapsed_f() and tm_elapsed_ms().

------------------------------------------------------------------------
r15426 | cbiere | 2008-07-16 17:22:35 -0400 (Wed, 16 Jul 2008) | 2 lines

 * Corrected format strings.

------------------------------------------------------------------------
r15425 | rmanfredi | 2008-07-16 17:12:18 -0400 (Wed, 16 Jul 2008) | 3 lines

Added patricia_lookup_best() for CIDR-style matching of IP addresses.
Added patricia_closest() and patricia_closest_extended() for the DHT.

------------------------------------------------------------------------
r15424 | rmanfredi | 2008-07-16 04:14:12 -0400 (Wed, 16 Jul 2008) | 5 lines

Using gboolean in a structure can reserve more than 1 byte due to alignment.
Prefer guint8 instead to guarantee a byte.
Apparently, "xor" is a reserved identifier, used by <iso646.h>. Nasty
namespace pollution, grr...

------------------------------------------------------------------------
r15423 | rmanfredi | 2008-07-16 04:07:43 -0400 (Wed, 16 Jul 2008) | 5 lines

Avoid possible alignment problems during casting. They are not needed as
peek_*() routines do not impose any alignment constraint.
Reuse kuid_add() during KUID generation, relying on C's structural equivalence
to safely cast a sha1 into a kuid.

------------------------------------------------------------------------
r15422 | rmanfredi | 2008-07-16 03:13:59 -0400 (Wed, 16 Jul 2008) | 3 lines

Use routines from lib/endian.h for writing little-endian and big-endian values.
Fixed incorrect space checking for pmsg_write_be32() and pmsg_write_le32().

------------------------------------------------------------------------
r15421 | rmanfredi | 2008-07-15 17:44:44 -0400 (Tue, 15 Jul 2008) | 2 lines

Remove spurious message.

------------------------------------------------------------------------
r15420 | rmanfredi | 2008-07-15 17:35:44 -0400 (Tue, 15 Jul 2008) | 4 lines

Update to the DHT code, including minimal RPC support, almost complete routing
table management, initial support for PING, PONG and FIND_NODE messages.
Work in progress, code never exercised yet.

------------------------------------------------------------------------
r15419 | rmanfredi | 2008-07-15 17:21:52 -0400 (Tue, 15 Jul 2008) | 2 lines

Added support for PATRICIA trees.

------------------------------------------------------------------------
r15418 | cbiere | 2008-07-15 13:23:20 -0400 (Tue, 15 Jul 2008) | 4 lines

 * upload_stats_find(): Corrected key for hash insertion. If "sha1"
   isn't an atom, this causes havoc. Hopefully, this fixes the
   frequent assertion failures in line 134.

------------------------------------------------------------------------
r15417 | rmanfredi | 2008-07-13 02:58:09 -0400 (Sun, 13 Jul 2008) | 2 lines

Added cq_count(), for statistics.

------------------------------------------------------------------------
r15416 | cbiere | 2008-07-11 12:00:38 -0400 (Fri, 11 Jul 2008) | 2 lines

 * Added check for nanosleep().

------------------------------------------------------------------------
r15415 | cbiere | 2008-07-11 11:41:46 -0400 (Fri, 11 Jul 2008) | 4 lines

 * Added check for nanosleep().
 * Reduced size of RCSID().
 * Use compat_sleep_ms() instead of sleep() during shutdown.

------------------------------------------------------------------------
r15414 | rmanfredi | 2008-07-11 08:47:52 -0400 (Fri, 11 Jul 2008) | 3 lines

Moving back again to "kuid" since Christian concurrently fixed the old
dht/routing.c file to now use PROP_KUID.

------------------------------------------------------------------------
r15413 | rmanfredi | 2008-07-11 06:58:00 -0400 (Fri, 11 Jul 2008) | 2 lines

Reverted to servent_kuid temporarily.

------------------------------------------------------------------------
r15412 | cbiere | 2008-07-11 06:56:21 -0400 (Fri, 11 Jul 2008) | 2 lines

 * Corrected property name: PROP_SERVENT_KUID -> PROP_KUID.

------------------------------------------------------------------------
r15411 | cbiere | 2008-07-11 06:51:38 -0400 (Fri, 11 Jul 2008) | 2 lines

 * gettext must be installed as well unless --disable-nls is used.

------------------------------------------------------------------------
r15410 | rmanfredi | 2008-07-11 01:11:57 -0400 (Fri, 11 Jul 2008) | 4 lines

Renamed (unused so far) hash_list_has_iter_previous() as
hash_list_iter_has_previous() for consistency.
Removed the "unused" markup as this is going to be needed for the DHT.

------------------------------------------------------------------------
r15409 | rmanfredi | 2008-07-11 01:09:57 -0400 (Fri, 11 Jul 2008) | 2 lines

In glib 1.2, g_string_printf() was called g_string_sprintf().

------------------------------------------------------------------------
r15408 | rmanfredi | 2008-07-10 13:49:33 -0400 (Thu, 10 Jul 2008) | 3 lines

Added new "enable_dht" property.
Renamed "servent_kuid" into "kuid".

------------------------------------------------------------------------
r15407 | cbiere | 2008-07-09 20:10:25 -0400 (Wed, 09 Jul 2008) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r15406 | rmanfredi | 2008-07-09 16:56:49 -0400 (Wed, 09 Jul 2008) | 2 lines

Updated comment.

------------------------------------------------------------------------
r15405 | rmanfredi | 2008-07-09 13:15:32 -0400 (Wed, 09 Jul 2008) | 3 lines

Added pmsg_available() to test for enough space before doing pmsg_write().
Changed allocation mode for message arenas to walloc().

------------------------------------------------------------------------
r15404 | rmanfredi | 2008-07-09 07:00:55 -0400 (Wed, 09 Jul 2008) | 2 lines

Added more CPU noise.

------------------------------------------------------------------------
r15403 | rmanfredi | 2008-07-09 06:52:24 -0400 (Wed, 09 Jul 2008) | 3 lines

Moved entropy collection routine to a separate file, to be reused outside of
its initial context of random seed initialization.

------------------------------------------------------------------------
r15402 | rmanfredi | 2008-07-09 06:47:26 -0400 (Wed, 09 Jul 2008) | 2 lines

Added standard doc header.

------------------------------------------------------------------------
r15401 | cbiere | 2008-07-09 00:15:05 -0400 (Wed, 09 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15400 | cbiere | 2008-07-08 22:16:02 -0400 (Tue, 08 Jul 2008) | 2 lines

 * bio_sendfile(): Corrected bogus overflow check.

------------------------------------------------------------------------
r15399 | cbiere | 2008-07-08 21:22:01 -0400 (Tue, 08 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15398 | cbiere | 2008-07-08 21:08:21 -0400 (Tue, 08 Jul 2008) | 2 lines

 * Added barracuda (Gnutella protocol decoder) under 2-clause BSD license.

------------------------------------------------------------------------
r15397 | cbiere | 2008-07-08 20:31:16 -0400 (Tue, 08 Jul 2008) | 2 lines

 * Added compat_sleep_ms().

------------------------------------------------------------------------
r15396 | rmanfredi | 2008-07-08 13:20:35 -0400 (Tue, 08 Jul 2008) | 2 lines

Grab more entropy bits for initial random seed.

------------------------------------------------------------------------
r15395 | rmanfredi | 2008-07-08 03:14:31 -0400 (Tue, 08 Jul 2008) | 2 lines

Add more timing entropy to the initial random seed.

------------------------------------------------------------------------
r15394 | rmanfredi | 2008-07-08 03:05:25 -0400 (Tue, 08 Jul 2008) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r15393 | cbiere | 2008-07-07 17:14:58 -0400 (Mon, 07 Jul 2008) | 2 lines

 * Corrected syntax error.

------------------------------------------------------------------------
r15392 | cbiere | 2008-07-07 16:42:46 -0400 (Mon, 07 Jul 2008) | 2 lines

 * Updated.

------------------------------------------------------------------------
r15391 | rmanfredi | 2008-07-07 16:33:30 -0400 (Mon, 07 Jul 2008) | 2 lines

Bad idea, rolling back.

------------------------------------------------------------------------
r15390 | cbiere | 2008-07-07 15:59:49 -0400 (Mon, 07 Jul 2008) | 2 lines

 * Added comments.

------------------------------------------------------------------------
r15389 | rmanfredi | 2008-07-07 15:10:33 -0400 (Mon, 07 Jul 2008) | 2 lines

Feed the TLS cache from pongs advertising TLS support.

------------------------------------------------------------------------
r15388 | cbiere | 2008-07-07 11:30:23 -0400 (Mon, 07 Jul 2008) | 2 lines

 * random_init(): Removed code causing undefined behavior.

------------------------------------------------------------------------
r15387 | rmanfredi | 2008-07-07 10:00:28 -0400 (Mon, 07 Jul 2008) | 3 lines

Add more noise to the random number seed.
Add 8 bits of random salt to protect against identical 32-bit seeds.

------------------------------------------------------------------------
r15386 | rmanfredi | 2008-07-07 01:15:32 -0400 (Mon, 07 Jul 2008) | 2 lines

Updated translation from Alexander N. Sørnes.

------------------------------------------------------------------------
r15385 | rmanfredi | 2008-07-06 07:37:19 -0400 (Sun, 06 Jul 2008) | 2 lines

Added g_list_sort_with_data().

------------------------------------------------------------------------
r15384 | rmanfredi | 2008-07-06 03:48:13 -0400 (Sun, 06 Jul 2008) | 2 lines

Added hash_list_list().

------------------------------------------------------------------------
r15383 | cbiere | 2008-07-05 16:22:49 -0400 (Sat, 05 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15382 | cbiere | 2008-07-05 12:04:37 -0400 (Sat, 05 Jul 2008) | 2 lines

 * German translation update provided by Jochen Kemnade.

------------------------------------------------------------------------
r15381 | cbiere | 2008-07-05 06:52:11 -0400 (Sat, 05 Jul 2008) | 5 lines

 * bin_to_hex_buf(): Use base16_encode().
 * int32_to_string_buf():
   * -2147483648 was handled incorrectly.
   * The sign character belongs in front of the number.

------------------------------------------------------------------------
r15380 | rmanfredi | 2008-07-05 05:04:58 -0400 (Sat, 05 Jul 2008) | 2 lines

Added the DHT Gnutella message number (0x44).

------------------------------------------------------------------------
r15379 | rmanfredi | 2008-07-05 04:07:56 -0400 (Sat, 05 Jul 2008) | 2 lines

Added uint32 atoms.

------------------------------------------------------------------------
r15378 | rmanfredi | 2008-07-05 04:07:21 -0400 (Sat, 05 Jul 2008) | 2 lines

Added int32_to_string_buf().

------------------------------------------------------------------------
r15377 | rmanfredi | 2008-07-05 03:56:11 -0400 (Sat, 05 Jul 2008) | 3 lines

Added the documentation from LimeWire that is going to serve as
initial specifications for the Gnutella DHT.

------------------------------------------------------------------------
r15376 | rmanfredi | 2008-07-04 13:00:09 -0400 (Fri, 04 Jul 2008) | 2 lines

Recognize and propagate the "DHT" GGEP extension in pongs.

------------------------------------------------------------------------
r15375 | rmanfredi | 2008-07-04 12:30:18 -0400 (Fri, 04 Jul 2008) | 2 lines

Added bin_to_hex_buf().

------------------------------------------------------------------------
r15374 | rmanfredi | 2008-07-04 01:40:23 -0400 (Fri, 04 Jul 2008) | 2 lines

Added hash_list_remove_head() and hash_list_remove_tail().

------------------------------------------------------------------------
r15373 | cbiere | 2008-07-01 20:54:28 -0400 (Tue, 01 Jul 2008) | 2 lines

 * get_results_set(): Relax constraint because it's causing false-positives.

------------------------------------------------------------------------
r15372 | cbiere | 2008-07-01 13:44:54 -0400 (Tue, 01 Jul 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15371 | cbiere | 2008-06-29 20:07:54 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15370 | cbiere | 2008-06-29 19:29:01 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15369 | cbiere | 2008-06-29 18:44:19 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added filter.

------------------------------------------------------------------------
r15368 | cbiere | 2008-06-29 18:37:25 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15367 | cbiere | 2008-06-29 17:58:16 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added filter.

------------------------------------------------------------------------
r15366 | cbiere | 2008-06-29 17:38:13 -0400 (Sun, 29 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15365 | cbiere | 2008-06-28 12:50:27 -0400 (Sat, 28 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15364 | cbiere | 2008-06-26 16:39:50 -0400 (Thu, 26 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15363 | cbiere | 2008-06-25 22:24:13 -0400 (Wed, 25 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15362 | cbiere | 2008-06-18 06:33:36 -0400 (Wed, 18 Jun 2008) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r15361 | cbiere | 2008-06-16 13:39:25 -0400 (Mon, 16 Jun 2008) | 2 lines

 * Avoid warnings about use of uninitialized variables.

------------------------------------------------------------------------
r15360 | rmanfredi | 2008-06-15 16:52:04 -0400 (Sun, 15 Jun 2008) | 3 lines

When trylink has several options to try, show which ones fail before
possible success.

------------------------------------------------------------------------
r15359 | cbiere | 2008-06-15 16:32:55 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r15358 | rmanfredi | 2008-06-15 16:32:18 -0400 (Sun, 15 Jun 2008) | 3 lines

Added fs_free_space_pct() in prevision of periodic monitoring of free space
under the strategic filesystems GTKG relies on.

------------------------------------------------------------------------
r15357 | cbiere | 2008-06-15 16:23:35 -0400 (Sun, 15 Jun 2008) | 3 lines

 * Added missing #ifdef.
 * Include <sys/param.h> if available.

------------------------------------------------------------------------
r15356 | cbiere | 2008-06-15 16:11:27 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Check for statfs() in <sys/mount.h>.

------------------------------------------------------------------------
r15355 | cbiere | 2008-06-15 15:35:23 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Suppress warning about unused parameter.

------------------------------------------------------------------------
r15354 | cbiere | 2008-06-15 15:17:38 -0400 (Sun, 15 Jun 2008) | 3 lines

 * On older systems "f_bavail" is unsigned long which may cause incorrect
   results. Therefore request implicit conversion to filesize_t.

------------------------------------------------------------------------
r15353 | rmanfredi | 2008-06-15 15:06:12 -0400 (Sun, 15 Jun 2008) | 8 lines

mproved Trylink.U traces to show how variables end up being set.
Made Trylink.U use $setvar to set variables so we can get WHOA THERE warnings
if the value of a variable changes from a run to another (they reused values
from an improper config.sh most probably).
Fixed a few units which were using a scratch variable "result" with Trylink:
should the value of result change, that would generate a spurious WHOA THERE.
Regenerated Configure.

------------------------------------------------------------------------
r15352 | cbiere | 2008-06-15 15:03:17 -0400 (Sun, 15 Jun 2008) | 3 lines

 * Suppress warning about unused "path" if neither variant is supported.
 * Added missing closing brace after else section in deprecated variant. 

------------------------------------------------------------------------
r15351 | cbiere | 2008-06-15 14:58:36 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Added U/new/d_arc4random.U.

------------------------------------------------------------------------
r15350 | cbiere | 2008-06-15 14:08:33 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r15349 | cbiere | 2008-06-15 14:06:06 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Recursively remove try.* because some compilers create directories.

------------------------------------------------------------------------
r15348 | cbiere | 2008-06-15 14:02:42 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Avoid use of uninitialized variable.

------------------------------------------------------------------------
r15347 | cbiere | 2008-06-15 13:58:03 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Avoid use of uninitialized variable.

------------------------------------------------------------------------
r15346 | cbiere | 2008-06-15 13:41:48 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Include lib/fs_free_space.h for fs_free_space() prototype.

------------------------------------------------------------------------
r15345 | cbiere | 2008-06-15 12:49:43 -0400 (Sun, 15 Jun 2008) | 12 lines

 * Use arc4random() instead of random() if available.
 * Added random_bytes() for convenience.
 * Replaced random_raw() but random_u32() which yields full 32 random bits
   in contrast to random that provides only 31 bits which is easily
   forgotten.
 * Removed fallback to srand() and rand() because they are by no means
   suitable and replacements are readily available as open-source code.
 * Added a few bits of entropy to the seed.
 * Moved fs_free_space() to a dedicated file because inclusion of the 
   necessary header files causes conflicts with the ST_* macros in
   if/core/search.h.

------------------------------------------------------------------------
r15344 | cbiere | 2008-06-15 12:32:22 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Added check for arc4random().

------------------------------------------------------------------------
r15343 | cbiere | 2008-06-15 12:30:43 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Moving fs_free_space() to dedicated file for portability reasons.

------------------------------------------------------------------------
r15342 | cbiere | 2008-06-15 12:28:02 -0400 (Sun, 15 Jun 2008) | 2 lines

 * Fixed hyphens.

------------------------------------------------------------------------
r15341 | rmanfredi | 2008-06-14 18:32:11 -0400 (Sat, 14 Jun 2008) | 6 lines

Added fs_free_space() to determine whether there is sufficient disk space
before attempting to move a completed download.
Added a few new metaconfig units and regenerated Configure (the fixed Begin
dependencies in dist ensure that Configure is now properly parsing options
and that important stuff like MANIFEST checking occur at the beginning).

------------------------------------------------------------------------
r15340 | cbiere | 2008-06-13 21:26:31 -0400 (Fri, 13 Jun 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15339 | cbiere | 2008-06-13 21:03:46 -0400 (Fri, 13 Jun 2008) | 6 lines

 * Fixed bug: CHUNK_DIGITS(4) was too low. If chunks are at least 64 KiB large
   (0x10000) 5 digits are used and truncation of the chunk header occurs
   making it non-parsable. This is reproducible with browse host requests,
   when the receiver supports chunked encoding but does not request deflate
   encoding (which limits chunks to 4 KiB).

------------------------------------------------------------------------
r15338 | cbiere | 2008-05-24 21:10:44 -0400 (Sat, 24 May 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15337 | daichik | 2008-05-06 10:38:43 -0400 (Tue, 06 May 2008) | 2 lines

Updated.

------------------------------------------------------------------------
r15336 | rmanfredi | 2008-05-06 10:17:09 -0400 (Tue, 06 May 2008) | 2 lines

Final answer to #1954703.

------------------------------------------------------------------------
r15335 | cbiere | 2008-05-03 20:58:07 -0400 (Sat, 03 May 2008) | 2 lines

 * There are no SVN keywords in here.

------------------------------------------------------------------------
r15334 | cbiere | 2008-05-03 20:55:02 -0400 (Sat, 03 May 2008) | 2 lines

 * 815 new items.

------------------------------------------------------------------------
r15333 | cbiere | 2008-05-03 19:04:41 -0400 (Sat, 03 May 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15332 | rmanfredi | 2008-05-03 15:42:19 -0400 (Sat, 03 May 2008) | 2 lines

Avoid fatal indirect recursion.

------------------------------------------------------------------------
r15331 | cbiere | 2008-05-03 01:09:59 -0400 (Sat, 03 May 2008) | 2 lines

 * search_store_xml(): Use timestamp_to_string() instead of ctime().

------------------------------------------------------------------------
r15330 | cbiere | 2008-05-03 01:08:04 -0400 (Sat, 03 May 2008) | 8 lines

 * upload_stats_load_history():
   * Ensure the filename is UTF-8 encoded.
   * Prevent time_t overflow.
   * Use a struct instead of individual variables.
   * Make sure v and error are initialized.
 * upload_stats_dump_item(): Use time_t_to_string_buf() because I have
   better plans for 2038 than fixing decade old bugs.

------------------------------------------------------------------------
r15329 | cbiere | 2008-05-03 00:26:42 -0400 (Sat, 03 May 2008) | 2 lines

 * Added "Last Request" and "Last Upload" columns to the Upload History.

------------------------------------------------------------------------
r15328 | cbiere | 2008-05-03 00:22:39 -0400 (Sat, 03 May 2008) | 2 lines

 * prop_parse_timestamp(): Care about integer overflows.

------------------------------------------------------------------------
r15327 | rmanfredi | 2008-05-02 17:00:52 -0400 (Fri, 02 May 2008) | 2 lines

Document that ul_stats->filename is UFT-8.

------------------------------------------------------------------------
r15326 | rmanfredi | 2008-05-02 16:58:15 -0400 (Fri, 02 May 2008) | 3 lines

Use lazy_utf8_to_ui_string() instead of lazy_filename_to_ui_string() since
we know for sure that the filename is already UTF-8 encoded.

------------------------------------------------------------------------
r15325 | rmanfredi | 2008-05-02 16:48:19 -0400 (Fri, 02 May 2008) | 3 lines

Renamed upload_stats_normalize_filename() as
upload_stats_enforce_local_filename().

------------------------------------------------------------------------
r15324 | rmanfredi | 2008-05-02 16:47:21 -0400 (Fri, 02 May 2008) | 2 lines

Re-ordered the ul_stats structure slightly to minimize padding.

------------------------------------------------------------------------
r15323 | rmanfredi | 2008-05-02 16:04:24 -0400 (Fri, 02 May 2008) | 5 lines

Enhanced upload statistics: we are now recording the last request time and
the last time of a served request, along with the SHA1 of the file.
Thanks to the SHA1, we can consolidate partial file sharing with library
sharing statistics, and the filename is forced to the library filename.

------------------------------------------------------------------------
r15322 | cbiere | 2008-05-01 20:09:05 -0400 (Thu, 01 May 2008) | 2 lines

 * Abort the current hash calculation if the file is no longer shared.

------------------------------------------------------------------------
r15321 | cbiere | 2008-05-01 20:00:41 -0400 (Thu, 01 May 2008) | 2 lines

 * Don't calculate hashes for files that are not shared (anymore).

------------------------------------------------------------------------
r15320 | cbiere | 2008-05-01 19:59:04 -0400 (Thu, 01 May 2008) | 2 lines

 * Removed ghost prototype.

------------------------------------------------------------------------
r15319 | cbiere | 2008-05-01 19:39:56 -0400 (Thu, 01 May 2008) | 2 lines

 * 1800 new items.

------------------------------------------------------------------------
r15318 | cbiere | 2008-05-01 18:53:09 -0400 (Thu, 01 May 2008) | 2 lines

 * Removed overlapping ranges.

------------------------------------------------------------------------
r15317 | rmanfredi | 2008-05-01 17:48:55 -0400 (Thu, 01 May 2008) | 2 lines

The truth.

------------------------------------------------------------------------
r15316 | rmanfredi | 2008-05-01 17:46:17 -0400 (Thu, 01 May 2008) | 2 lines

The truth.

------------------------------------------------------------------------
r15315 | cbiere | 2008-05-01 17:38:00 -0400 (Thu, 01 May 2008) | 2 lines

 * d_free(): Use G_FREE_NULL, always, ultra.

------------------------------------------------------------------------
r15314 | rmanfredi | 2008-05-01 17:26:01 -0400 (Thu, 01 May 2008) | 2 lines

Need to rethink context freeing, this is done improperly.

------------------------------------------------------------------------
r15313 | rmanfredi | 2008-05-01 17:14:25 -0400 (Thu, 01 May 2008) | 2 lines

Fixed bad argument to verify_free().

------------------------------------------------------------------------
r15312 | cbiere | 2008-05-01 17:08:13 -0400 (Thu, 01 May 2008) | 2 lines

 * Recreated pmsg_slist_free().

------------------------------------------------------------------------
r15311 | rmanfredi | 2008-05-01 17:01:36 -0400 (Thu, 01 May 2008) | 2 lines

Added call to verify_free() in the context-freeing callback.

------------------------------------------------------------------------
r15310 | rmanfredi | 2008-05-01 16:41:05 -0400 (Thu, 01 May 2008) | 2 lines

Avoid integer arithmetic overflow when computing the new amount of ticks.

------------------------------------------------------------------------
r15309 | rmanfredi | 2008-05-01 16:31:38 -0400 (Thu, 01 May 2008) | 3 lines

Removed pmsg_slist_free(), which can now be replaced by slist_free_all()
with pmsg_free() as the freeing callback.

------------------------------------------------------------------------
r15308 | cbiere | 2008-05-01 16:21:20 -0400 (Thu, 01 May 2008) | 3 lines

 * Avoid unnecessary return statements.
 * Use G_SLIST_FOREACH_WITH_DATA() to avoid run-time overhead.

------------------------------------------------------------------------
r15307 | rmanfredi | 2008-05-01 16:19:01 -0400 (Thu, 01 May 2008) | 4 lines

Let the bg task scheduler adjust the number of ticks to devote to the
task instead of computing a maximum ourselves: we don't know how many
concurrent tasks are running.

------------------------------------------------------------------------
r15306 | rmanfredi | 2008-05-01 16:00:11 -0400 (Thu, 01 May 2008) | 6 lines

Let the bg task scheduler compute the right amount of ticks to devote,
instead of measuring and limiting the time we take at each recursive
file scan step.
Made use of new slist_free_all() to simplify the code.
Added missing recursive_scan_free() call when the task was being terminated.

------------------------------------------------------------------------
r15305 | rmanfredi | 2008-05-01 15:57:18 -0400 (Thu, 01 May 2008) | 5 lines

Optimized slist_free_all: no need to call slist_shift() repeatedly to
update a structure we're going to discard anyway.
Do not process NULL entries specially, it is up to the free callback to
handle this if needed.

------------------------------------------------------------------------
r15304 | rmanfredi | 2008-05-01 15:34:38 -0400 (Thu, 01 May 2008) | 2 lines

Rats.

------------------------------------------------------------------------
r15303 | rmanfredi | 2008-05-01 15:33:55 -0400 (Thu, 01 May 2008) | 2 lines

Callbacks are ending with _cb, not _t.

------------------------------------------------------------------------
r15302 | rmanfredi | 2008-05-01 15:26:56 -0400 (Thu, 01 May 2008) | 2 lines

Added slist_free_all().

------------------------------------------------------------------------
r15301 | cbiere | 2008-05-01 13:21:31 -0400 (Thu, 01 May 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15300 | cbiere | 2008-05-01 11:16:13 -0400 (Thu, 01 May 2008) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15299 | cbiere | 2008-05-01 10:00:57 -0400 (Thu, 01 May 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15298 | cbiere | 2008-05-01 08:24:45 -0400 (Thu, 01 May 2008) | 3 lines

 * Added "lib/" prefix to avoid picking up a spurious file from the wrong
   path.

------------------------------------------------------------------------
r15297 | rmanfredi | 2008-05-01 03:45:58 -0400 (Thu, 01 May 2008) | 2 lines

Added "text/plain" for ".srt" files (subtitles).

------------------------------------------------------------------------
r15296 | cbiere | 2008-04-30 22:05:06 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15295 | cbiere | 2008-04-30 21:53:13 -0400 (Wed, 30 Apr 2008) | 2 lines

 * 1066 new items.

------------------------------------------------------------------------
r15294 | cbiere | 2008-04-30 20:24:11 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15293 | cbiere | 2008-04-30 20:09:33 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15292 | cbiere | 2008-04-30 17:29:06 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15291 | rmanfredi | 2008-04-30 16:11:23 -0400 (Wed, 30 Apr 2008) | 3 lines

Add "," between fields, as additional help for the eye to spot the field
boundaries.

------------------------------------------------------------------------
r15290 | cbiere | 2008-04-30 13:05:12 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15289 | cbiere | 2008-04-30 12:53:11 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Added src/lib/mime_type.[ch].

------------------------------------------------------------------------
r15288 | cbiere | 2008-04-30 12:42:44 -0400 (Wed, 30 Apr 2008) | 2 lines

 * C SOURCE CODE MUST BE ASCII-ENCODED, NOT UTF-8 OR WHATEVER ELSE.

------------------------------------------------------------------------
r15287 | cbiere | 2008-04-30 12:29:59 -0400 (Wed, 30 Apr 2008) | 2 lines

 * Repaired.

------------------------------------------------------------------------
r15286 | rmanfredi | 2008-04-30 09:52:52 -0400 (Wed, 30 Apr 2008) | 2 lines

Added GUI configuration for "pfsp_last_chunk" and "beautify_filenames".

------------------------------------------------------------------------
r15285 | bpringlemeir | 2008-04-29 23:52:46 -0400 (Tue, 29 Apr 2008) | 1 line

mime_types.h moved from core to lib
------------------------------------------------------------------------
r15284 | cbiere | 2008-04-29 19:08:22 -0400 (Tue, 29 Apr 2008) | 2 lines

 * 1368 new items.

------------------------------------------------------------------------
r15283 | cbiere | 2008-04-29 18:49:52 -0400 (Tue, 29 Apr 2008) | 2 lines

 * search_gui_set_details(): Display the MIME type too.

------------------------------------------------------------------------
r15282 | cbiere | 2008-04-29 18:43:36 -0400 (Tue, 29 Apr 2008) | 2 lines

 * Added MIME type column for search results.

------------------------------------------------------------------------
r15281 | cbiere | 2008-04-29 18:40:49 -0400 (Tue, 29 Apr 2008) | 2 lines

 * Added missing include.

------------------------------------------------------------------------
r15280 | cbiere | 2008-04-29 17:54:46 -0400 (Tue, 29 Apr 2008) | 2 lines

 * Renamed shared_file_content_type() to shared_file_mime_type().

------------------------------------------------------------------------
r15279 | cbiere | 2008-04-29 17:17:52 -0400 (Tue, 29 Apr 2008) | 3 lines

 * Moved primitive MIME type handling to dedicated file as part of our
   library.

------------------------------------------------------------------------
r15278 | cbiere | 2008-04-28 23:05:11 -0400 (Mon, 28 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15277 | cbiere | 2008-04-28 22:08:56 -0400 (Mon, 28 Apr 2008) | 2 lines

 * recursive_scan_free(): Removed forgotten debug message.

------------------------------------------------------------------------
r15276 | cbiere | 2008-04-28 22:08:23 -0400 (Mon, 28 Apr 2008) | 3 lines

 * search_gui_handle_local(): Allow searching during rescans but show a
   statusbar message.

------------------------------------------------------------------------
r15275 | cbiere | 2008-04-28 21:56:42 -0400 (Mon, 28 Apr 2008) | 3 lines

 * Reimplemented scanning of shared directories as background task so that
   the process (not just the GUI) is fully responsive during the whole scan.

------------------------------------------------------------------------
r15274 | cbiere | 2008-04-28 21:50:10 -0400 (Mon, 28 Apr 2008) | 2 lines

 * fi_tigertree_check(): Removed unused variable.

------------------------------------------------------------------------
r15273 | cbiere | 2008-04-28 21:49:23 -0400 (Mon, 28 Apr 2008) | 3 lines

 * verify_free(): Send a shutdown to current item to avoid a leak warning
   at exit time if there's still a verification running.

------------------------------------------------------------------------
r15272 | cbiere | 2008-04-28 21:42:57 -0400 (Mon, 28 Apr 2008) | 2 lines

 * Removed left-over debug message.

------------------------------------------------------------------------
r15271 | cbiere | 2008-04-27 18:55:17 -0400 (Sun, 27 Apr 2008) | 3 lines

 * fi_tigertree_check(): Accept less than the good depth as long as the
   leaf count fits.

------------------------------------------------------------------------
r15270 | cbiere | 2008-04-27 18:26:05 -0400 (Sun, 27 Apr 2008) | 2 lines

 * Use lazy_filename_to_utf8_normalized() to convert the filename for magnets.

------------------------------------------------------------------------
r15269 | cbiere | 2008-04-27 18:15:51 -0400 (Sun, 27 Apr 2008) | 2 lines

 * Added lazy_filename_to_utf8_normalized().

------------------------------------------------------------------------
r15268 | cbiere | 2008-04-27 17:56:19 -0400 (Sun, 27 Apr 2008) | 3 lines

 * filename_to_ui_string(): No need to convert from UTF-8 again if the
   locale encoding is UTF-8.

------------------------------------------------------------------------
r15267 | cbiere | 2008-04-27 17:48:45 -0400 (Sun, 27 Apr 2008) | 3 lines

 * filename_to_ui_string(): Convert the filename to the locale encoding, if the
   user-interface doesn't use UTF-8.

------------------------------------------------------------------------
r15266 | cbiere | 2008-04-27 17:34:01 -0400 (Sun, 27 Apr 2008) | 4 lines

 * download_handle_thex_uri_header(): Keep fetching THEX data until we have
   a tree at good depth.
 * download_build_magnet(): Convert the filename to UTF-8.

------------------------------------------------------------------------
r15265 | cbiere | 2008-04-27 16:25:10 -0400 (Sun, 27 Apr 2008) | 3 lines

 * Modified code a bit to avoid harmless warning on shutdown, if the
   search details treeview has not been used during the seesion.

------------------------------------------------------------------------
r15264 | cbiere | 2008-04-27 15:42:51 -0400 (Sun, 27 Apr 2008) | 4 lines

 * thex_download_handle_hashtree(): Always allow hashtrees below the good
   depths, some tree is better than none and we'll keep trying fetching
   a tree at the good depth anyway.

------------------------------------------------------------------------
r15263 | cbiere | 2008-04-27 15:33:13 -0400 (Sun, 27 Apr 2008) | 3 lines

 * Quadrupled THEX_DOWNLOAD_MAX_SIZE because we could not handle THEX data for
   files larger than one gibibyte at a tree depth of 11.

------------------------------------------------------------------------
r15262 | cbiere | 2008-04-27 14:49:17 -0400 (Sun, 27 Apr 2008) | 3 lines

 * Replaced "application/binary" by "application/octet-stream"; the latter
   is properly registered, the former isn't.

------------------------------------------------------------------------
r15261 | cbiere | 2008-04-27 14:37:27 -0400 (Sun, 27 Apr 2008) | 3 lines

 * Added share_mime_type_init() to check whether "share_mime_type_map" is
   sorted once during startup.

------------------------------------------------------------------------
r15260 | cbiere | 2008-04-27 13:26:49 -0400 (Sun, 27 Apr 2008) | 2 lines

 * 3648 new items.

------------------------------------------------------------------------
r15259 | cbiere | 2008-04-27 13:20:29 -0400 (Sun, 27 Apr 2008) | 2 lines

 * share_mime_type_from_extension(): Removed duplicate items.

------------------------------------------------------------------------
r15258 | cbiere | 2008-04-26 21:22:45 -0400 (Sat, 26 Apr 2008) | 3 lines

 * Update the bitzi metadata info box when a query finishes, so that it is
   not required to click on the result again after requesting bitzi data.

------------------------------------------------------------------------
r15257 | cbiere | 2008-04-26 20:44:47 -0400 (Sat, 26 Apr 2008) | 3 lines

 * bitzi_ticket_by_sha1(): Always return the ticket from the cache (if any);
   do not trigger a query.

------------------------------------------------------------------------
r15256 | cbiere | 2008-04-26 18:26:44 -0400 (Sat, 26 Apr 2008) | 4 lines

 * Added fi_gui_file_by_handle().
 * Use the "last_shown" handle for the details too instead looking at cursor
   and force an update of the details if the sub-tab is switched.

------------------------------------------------------------------------
r15255 | cbiere | 2008-04-26 18:04:26 -0400 (Sat, 26 Apr 2008) | 3 lines

 * Force an update via fi_gui_files_details_update() when the downloads tab
   becomes visible.

------------------------------------------------------------------------
r15254 | cbiere | 2008-04-26 15:54:42 -0400 (Sat, 26 Apr 2008) | 2 lines

 * 903 new items.

------------------------------------------------------------------------
r15253 | cbiere | 2008-04-25 20:23:04 -0400 (Fri, 25 Apr 2008) | 3 lines

 * Removed fi_gui_files_details_update() because it's too primitive and makes
   copy&paste almost impossible.

------------------------------------------------------------------------
r15252 | cbiere | 2008-04-25 12:23:15 -0400 (Fri, 25 Apr 2008) | 2 lines

 * 7426 new items.

------------------------------------------------------------------------
r15251 | cbiere | 2008-04-24 18:59:40 -0400 (Thu, 24 Apr 2008) | 2 lines

 * 2089 new items.

------------------------------------------------------------------------
r15250 | cbiere | 2008-04-24 11:54:04 -0400 (Thu, 24 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15249 | cbiere | 2008-04-23 19:13:43 -0400 (Wed, 23 Apr 2008) | 2 lines

 * 1207 new items.

------------------------------------------------------------------------
r15248 | cbiere | 2008-04-23 14:43:34 -0400 (Wed, 23 Apr 2008) | 2 lines

 * 3572 new items.

------------------------------------------------------------------------
r15247 | cbiere | 2008-04-23 05:47:59 -0400 (Wed, 23 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15246 | cbiere | 2008-04-22 20:35:30 -0400 (Tue, 22 Apr 2008) | 2 lines

 * 2190 new items.

------------------------------------------------------------------------
r15245 | cbiere | 2008-04-22 20:34:16 -0400 (Tue, 22 Apr 2008) | 2 lines

 * Corrected address.

------------------------------------------------------------------------
r15244 | cbiere | 2008-04-22 20:06:43 -0400 (Tue, 22 Apr 2008) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15242 | cbiere | 2008-04-22 19:10:56 -0400 (Tue, 22 Apr 2008) | 9 lines

 * [GTK1] Uploads: Allow column configuration; persist column visibility and
   column widths.
 * Renamed column label "Loc" to "Country".
 * Renamed column label "Ver" to "Version".
 * Align column labels to the left for better readability when truncated
   and more consistent look overall.
 * Corrected some weird 7.45058e-09 alignment values to 0.0, must be caused
   by some glade bug.

------------------------------------------------------------------------
r15241 | cbiere | 2008-04-22 17:34:32 -0400 (Tue, 22 Apr 2008) | 2 lines

 * share_mime_type_from_extension(): Removed redundant entry.

------------------------------------------------------------------------
r15240 | rmanfredi | 2008-04-22 17:04:55 -0400 (Tue, 22 Apr 2008) | 2 lines

Added new MIME types and corresponding typical file extensions.

------------------------------------------------------------------------
r15239 | cbiere | 2008-04-22 05:55:03 -0400 (Tue, 22 Apr 2008) | 2 lines

 * c_us_stat does not exist.

------------------------------------------------------------------------
r15238 | bpringlemeir | 2008-04-21 19:32:10 -0400 (Mon, 21 Apr 2008) | 1 line

Ignore generated install and config.sh.old
------------------------------------------------------------------------
r15237 | bpringlemeir | 2008-04-21 19:27:45 -0400 (Mon, 21 Apr 2008) | 1 line

apt-get docbook-utils psutils netpbm will allow the manual to build
------------------------------------------------------------------------
r15236 | bpringlemeir | 2008-04-21 19:15:35 -0400 (Mon, 21 Apr 2008) | 1 line

Name c_us enum
------------------------------------------------------------------------
r15235 | cbiere | 2008-04-20 17:16:00 -0400 (Sun, 20 Apr 2008) | 2 lines

 * 463 new items.

------------------------------------------------------------------------
r15234 | cbiere | 2008-04-20 16:58:20 -0400 (Sun, 20 Apr 2008) | 2 lines

 * upload_stats_gui_init(): More beautiful upload statistics.

------------------------------------------------------------------------
r15233 | cbiere | 2008-04-20 15:42:06 -0400 (Sun, 20 Apr 2008) | 2 lines

 * fi_gui_set_details(): Show Tigertree details in plain form.

------------------------------------------------------------------------
r15232 | rmanfredi | 2008-04-20 15:33:12 -0400 (Sun, 20 Apr 2008) | 4 lines

gm_beautify_filename():
  Fixed "off-by-one" error in assertion, in the right direction so harmless,
  but still...  Simplified code when we return an "empty" filename.

------------------------------------------------------------------------
r15231 | cbiere | 2008-04-20 15:02:24 -0400 (Sun, 20 Apr 2008) | 3 lines

 * Update the file details in the download panel along with other periodic
   updates.

------------------------------------------------------------------------
r15230 | rmanfredi | 2008-04-20 14:03:52 -0400 (Sun, 20 Apr 2008) | 2 lines

Show TTH tree depth in the download "Details" pane.

------------------------------------------------------------------------
r15229 | rmanfredi | 2008-04-20 14:03:03 -0400 (Sun, 20 Apr 2008) | 2 lines

Added tt_depth() to compute the TTH tree depth based on the number of leaves.

------------------------------------------------------------------------
r15228 | rmanfredi | 2008-04-20 13:37:46 -0400 (Sun, 20 Apr 2008) | 3 lines

Plugged in calls to gm_beautify_filename() when the "beautify_filenames"
property is true.

------------------------------------------------------------------------
r15227 | rmanfredi | 2008-04-20 13:36:45 -0400 (Sun, 20 Apr 2008) | 2 lines

Added gm_beautify_filename().

------------------------------------------------------------------------
r15226 | cbiere | 2008-04-20 12:03:37 -0400 (Sun, 20 Apr 2008) | 3 lines

 * Highlight items in the search list differently when there are new unseen
   search result.

------------------------------------------------------------------------
r15225 | cbiere | 2008-04-20 11:58:33 -0400 (Sun, 20 Apr 2008) | 2 lines

 * Wired TTH verification icon to PROP_TTH_VERIFYING.

------------------------------------------------------------------------
r15224 | rmanfredi | 2008-04-20 11:52:14 -0400 (Sun, 20 Apr 2008) | 3 lines

Let "beautify_filenames" default to FALSE since it's mangling filenames and
thus potentially not something everyone would want.

------------------------------------------------------------------------
r15223 | rmanfredi | 2008-04-20 11:49:38 -0400 (Sun, 20 Apr 2008) | 3 lines

Use "pfsp_last_chunk" to direct the downloading preference of the tail of
the file.

------------------------------------------------------------------------
r15222 | rmanfredi | 2008-04-20 11:42:36 -0400 (Sun, 20 Apr 2008) | 2 lines

Added "pfsp_last_chunk" and "beautify_filenames" properties.

------------------------------------------------------------------------
r15221 | cbiere | 2008-04-20 11:29:12 -0400 (Sun, 20 Apr 2008) | 2 lines

 * Added TTH verification icon to GUI.

------------------------------------------------------------------------
r15220 | cbiere | 2008-04-20 11:13:12 -0400 (Sun, 20 Apr 2008) | 2 lines

 * Added TTH verification icon.

------------------------------------------------------------------------
r15219 | rmanfredi | 2008-04-20 10:51:07 -0400 (Sun, 20 Apr 2008) | 3 lines

Added property "tth_verifying" in prevision of lighting up a new icon when
TTH file verification happens in the background.

------------------------------------------------------------------------
r15218 | cbiere | 2008-04-20 09:06:41 -0400 (Sun, 20 Apr 2008) | 2 lines

 * gm_sanitize_filename(): Moved unused variable.

------------------------------------------------------------------------
r15217 | rmanfredi | 2008-04-20 08:51:00 -0400 (Sun, 20 Apr 2008) | 4 lines

Turn off filename prettying in gm_sanitize_filename(), awaiting move to a
separate function.
Unconditionally strip leading "-" in filenames.

------------------------------------------------------------------------
r15216 | rmanfredi | 2008-04-20 07:23:16 -0400 (Sun, 20 Apr 2008) | 5 lines

gm_sanitize_filename(): added additional post-processing on the sanitized
filename to strip leading "-", remove consecutive "_" and prevent "_"
surrounding punctuation characters, so that the filename is more readable
with less visual clutter.

------------------------------------------------------------------------
r15215 | cbiere | 2008-04-20 07:11:41 -0400 (Sun, 20 Apr 2008) | 2 lines

 * list_clone_shift(): Skip code if "pfsp_first_chunk" is zero.

------------------------------------------------------------------------
r15214 | cbiere | 2008-04-20 06:54:34 -0400 (Sun, 20 Apr 2008) | 2 lines

 * list_clone_shift(): Try harder fetching the trailing chunk.

------------------------------------------------------------------------
r15213 | rmanfredi | 2008-04-20 05:10:33 -0400 (Sun, 20 Apr 2008) | 5 lines

Also attempt to give priority to the last "pfsp_first_chunk" bytes of the
file, since some video file (AVI for instance) store important indexing
information at the end that can prevent proper pre-view of the incomplete
file when missing.

------------------------------------------------------------------------
r15212 | cbiere | 2008-04-19 19:33:37 -0400 (Sat, 19 Apr 2008) | 2 lines

 * 1538 new items.

------------------------------------------------------------------------
r15211 | cbiere | 2008-04-19 17:28:42 -0400 (Sat, 19 Apr 2008) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15210 | cbiere | 2008-04-18 13:19:28 -0400 (Fri, 18 Apr 2008) | 2 lines

 * 474 new items.

------------------------------------------------------------------------
r15209 | cbiere | 2008-04-18 10:43:35 -0400 (Fri, 18 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15208 | cbiere | 2008-04-18 06:18:43 -0400 (Fri, 18 Apr 2008) | 2 lines

 * Corrected prototype.

------------------------------------------------------------------------
r15207 | cbiere | 2008-04-18 06:16:18 -0400 (Fri, 18 Apr 2008) | 2 lines

 * Corrected some prototypes.

------------------------------------------------------------------------
r15206 | cbiere | 2008-04-17 18:30:16 -0400 (Thu, 17 Apr 2008) | 2 lines

 * 945 new items.

------------------------------------------------------------------------
r15205 | cbiere | 2008-04-16 18:01:56 -0400 (Wed, 16 Apr 2008) | 2 lines

 * 1253 new items.

------------------------------------------------------------------------
r15204 | cbiere | 2008-04-15 16:14:30 -0400 (Tue, 15 Apr 2008) | 2 lines

 * download_handle_thex_uri_header(): Tweaked warning verbosity.

------------------------------------------------------------------------
r15203 | cbiere | 2008-04-14 17:37:46 -0400 (Mon, 14 Apr 2008) | 2 lines

 * 268 new items.

------------------------------------------------------------------------
r15202 | cbiere | 2008-04-14 16:51:31 -0400 (Mon, 14 Apr 2008) | 2 lines

 * fi_gui_set_details(): Minor tweak.

------------------------------------------------------------------------
r15201 | cbiere | 2008-04-13 19:43:21 -0400 (Sun, 13 Apr 2008) | 8 lines

 * Fixed significant performance issue in the Gtk+ 1.2 front-end: Each
   uploaded chunk causes an update of the upload statistic for the file.
   The iterative search used to find the row caused O(n) performance and
   consumed excessive CPU resources if the upload history listed hundreds
   and more files. The new code has O(1) performance because the row is
   cached in the upload stats context which is also kept in sync when
   sorting.

------------------------------------------------------------------------
r15200 | cbiere | 2008-04-13 17:13:39 -0400 (Sun, 13 Apr 2008) | 3 lines

 * Since nobody ever witnessed an assertion failure, I finally enable the
   afterburner.

------------------------------------------------------------------------
r15199 | cbiere | 2008-04-13 17:04:45 -0400 (Sun, 13 Apr 2008) | 3 lines

 * ul_find_row_by_upload(): Compare the pointers directly, no need to compare
   the members.

------------------------------------------------------------------------
r15198 | cbiere | 2008-04-13 15:11:34 -0400 (Sun, 13 Apr 2008) | 2 lines

 * Avoid unnecessary casts.

------------------------------------------------------------------------
r15197 | cbiere | 2008-04-13 15:06:22 -0400 (Sun, 13 Apr 2008) | 2 lines

 * Avoid unnecessary casts.

------------------------------------------------------------------------
r15196 | cbiere | 2008-04-13 13:24:49 -0400 (Sun, 13 Apr 2008) | 4 lines

 * download_handle_thex_uri_header(): Handle non-standard X-Thex-URI headers
   if the peer provides a valid X-Content-URN header. Applies to
   Shareaza 2.1.0.0.

------------------------------------------------------------------------
r15195 | cbiere | 2008-04-13 11:08:16 -0400 (Sun, 13 Apr 2008) | 3 lines

 * urn_get_tth(): Parse "urn:tree:tiger/: " to because (older) Shareaza emit a
   X-Thex-URI header like "/gnutella/thex/v1?urn:tree:tiger/:[HASH]".

------------------------------------------------------------------------
r15194 | cbiere | 2008-04-12 21:22:48 -0400 (Sat, 12 Apr 2008) | 2 lines

 * 163 new items.

------------------------------------------------------------------------
r15193 | cbiere | 2008-04-12 19:25:06 -0400 (Sat, 12 Apr 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15192 | cbiere | 2008-04-12 18:54:57 -0400 (Sat, 12 Apr 2008) | 2 lines

 * Added hosts.

------------------------------------------------------------------------
r15191 | cbiere | 2008-04-12 18:45:47 -0400 (Sat, 12 Apr 2008) | 4 lines

 * Don't use reserved identifiers as member names: ctime -> created.
 * Downloads GUI: Added "Modified" column and detail showing the timestamp of
   the last file modification.

------------------------------------------------------------------------
r15190 | cbiere | 2008-04-12 16:46:12 -0400 (Sat, 12 Apr 2008) | 2 lines

 * Downloads GUI: Added checkboxes to invert the select/filter patterns.

------------------------------------------------------------------------
r15189 | cbiere | 2008-04-12 16:15:06 -0400 (Sat, 12 Apr 2008) | 2 lines

 * Corrected tag name: DATE -> ADDED.

------------------------------------------------------------------------
r15188 | cbiere | 2008-04-12 13:03:17 -0400 (Sat, 12 Apr 2008) | 3 lines

 * download_thex_start(): Pick the correct fileinfo to figure out the filename
   and fall-back to an URN just in case it's already gone.

------------------------------------------------------------------------
r15187 | cbiere | 2008-04-12 12:42:52 -0400 (Sat, 12 Apr 2008) | 2 lines

 * download_move(): Use is_same_file() instead of strcmp().

------------------------------------------------------------------------
r15186 | cbiere | 2008-04-12 12:40:27 -0400 (Sat, 12 Apr 2008) | 2 lines

 * is_same_file(): Identical pathnames imply identical files.

------------------------------------------------------------------------
r15185 | cbiere | 2008-04-12 05:10:17 -0400 (Sat, 12 Apr 2008) | 2 lines

 * Added 6 patterns.

------------------------------------------------------------------------
r15184 | cbiere | 2008-04-12 05:01:55 -0400 (Sat, 12 Apr 2008) | 3 lines

 * In conformance with LimeWire, LLC all IP address ranges of FDCservers.net
   are hereby banned.

------------------------------------------------------------------------
r15183 | cbiere | 2008-04-12 00:52:38 -0400 (Sat, 12 Apr 2008) | 2 lines

 * 419 new items.

------------------------------------------------------------------------
r15182 | cbiere | 2008-04-10 18:44:58 -0400 (Thu, 10 Apr 2008) | 2 lines

 * 7627 new items.

------------------------------------------------------------------------
r15181 | cbiere | 2008-04-10 16:19:29 -0400 (Thu, 10 Apr 2008) | 4 lines

 * Refuse to share certain directories: root directory, home directory,
   $GTK_GNUTELLA_DIR, ~/gtk-gnutella-downloads/incomplete and
   ~/gtk-gnutella-downloads/corrupt.

------------------------------------------------------------------------
r15180 | cbiere | 2008-04-10 16:15:23 -0400 (Thu, 10 Apr 2008) | 2 lines

 * Added is_same_file().

------------------------------------------------------------------------
r15179 | cbiere | 2008-04-10 10:57:28 -0400 (Thu, 10 Apr 2008) | 2 lines

 * Unstable release for testing.

------------------------------------------------------------------------
r15178 | cbiere | 2008-04-09 15:54:14 -0400 (Wed, 09 Apr 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15177 | cbiere | 2008-04-08 17:38:06 -0400 (Tue, 08 Apr 2008) | 2 lines

 * 255 new items.

------------------------------------------------------------------------
r15176 | cbiere | 2008-04-08 15:08:58 -0400 (Tue, 08 Apr 2008) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15170 | cbiere | 2008-04-07 11:20:41 -0400 (Mon, 07 Apr 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15169 | cbiere | 2008-04-07 10:00:53 -0400 (Mon, 07 Apr 2008) | 2 lines

 * share_mime_type_from_extension(): The array was NOT sorted.

------------------------------------------------------------------------
r15168 | cbiere | 2008-04-03 13:32:46 -0400 (Thu, 03 Apr 2008) | 2 lines

 * This is no longer stable.

------------------------------------------------------------------------
r15167 | cbiere | 2008-04-03 13:31:14 -0400 (Thu, 03 Apr 2008) | 2 lines

 * Fix for issue #1932909 "columns in search window do not scale properly".

------------------------------------------------------------------------
r15164 | cbiere | 2008-04-01 18:46:27 -0400 (Tue, 01 Apr 2008) | 2 lines

 * Added missing files.

------------------------------------------------------------------------
r15162 | cbiere | 2008-04-01 18:28:45 -0400 (Tue, 01 Apr 2008) | 2 lines

 * Release 0.96.5 stable.

------------------------------------------------------------------------
r15161 | cbiere | 2008-04-01 18:26:53 -0400 (Tue, 01 Apr 2008) | 2 lines

 * Force timezone to UTC.

------------------------------------------------------------------------
r15160 | cbiere | 2008-04-01 18:25:43 -0400 (Tue, 01 Apr 2008) | 2 lines

 * Updated.

------------------------------------------------------------------------
r15159 | cbiere | 2008-04-01 16:43:00 -0400 (Tue, 01 Apr 2008) | 2 lines

 * 40 new items.

------------------------------------------------------------------------
r15158 | cbiere | 2008-03-29 23:55:48 -0400 (Sat, 29 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15157 | cbiere | 2008-03-25 18:42:02 -0400 (Tue, 25 Mar 2008) | 2 lines

 * 3901 new items.

------------------------------------------------------------------------
r15156 | cbiere | 2008-03-20 22:18:05 -0400 (Thu, 20 Mar 2008) | 2 lines

 * 10477 new items.

------------------------------------------------------------------------
r15155 | cbiere | 2008-03-19 18:49:25 -0400 (Wed, 19 Mar 2008) | 3 lines

 * node_add_socket(): Fixed off-by-one bug which caused constantly dropping
   the n-th peer connection when connected to a local (preferred) peer.

------------------------------------------------------------------------
r15154 | cbiere | 2008-03-18 20:25:28 -0400 (Tue, 18 Mar 2008) | 2 lines

 * Added GGEP "PR" to known extensions.

------------------------------------------------------------------------
r15153 | cbiere | 2008-03-18 20:22:45 -0400 (Tue, 18 Mar 2008) | 3 lines

 * Added ".bittorrent" to file extensions shared by default.
 * Added MIME type for ".bittorrent".

------------------------------------------------------------------------
r15152 | cbiere | 2008-03-18 17:10:06 -0400 (Tue, 18 Mar 2008) | 3 lines

 * hcache_add_internal(): Don't discard all addresses with ports around 6346
   but keep the amount low, so that such peers are not completely isolated.

------------------------------------------------------------------------
r15151 | cbiere | 2008-03-18 13:19:39 -0400 (Tue, 18 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15150 | cbiere | 2008-03-17 19:18:57 -0400 (Mon, 17 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15149 | cbiere | 2008-03-17 17:12:31 -0400 (Mon, 17 Mar 2008) | 2 lines

 * Update provided by Alexander Nicolaysen Sørnes.

------------------------------------------------------------------------
r15148 | cbiere | 2008-03-16 15:16:02 -0400 (Sun, 16 Mar 2008) | 2 lines

 * Added comment.

------------------------------------------------------------------------
r15147 | cbiere | 2008-03-16 10:44:41 -0400 (Sun, 16 Mar 2008) | 3 lines

 * Added comments.
 * Added name/size pattern.

------------------------------------------------------------------------
r15146 | cbiere | 2008-03-16 09:58:46 -0400 (Sun, 16 Mar 2008) | 2 lines

 * 1428 new items.

------------------------------------------------------------------------
r15145 | cbiere | 2008-03-16 08:36:25 -0400 (Sun, 16 Mar 2008) | 3 lines

 * Removed old crud.
 * Added range.

------------------------------------------------------------------------
r15144 | cbiere | 2008-03-16 07:18:41 -0400 (Sun, 16 Mar 2008) | 2 lines

 * Added hosts.

------------------------------------------------------------------------
r15143 | cbiere | 2008-03-16 07:06:53 -0400 (Sun, 16 Mar 2008) | 2 lines

 * 3364 new items.

------------------------------------------------------------------------
r15142 | cbiere | 2008-03-15 19:11:27 -0400 (Sat, 15 Mar 2008) | 2 lines

 * 2293 new items.

------------------------------------------------------------------------
r15141 | cbiere | 2008-03-15 17:39:12 -0400 (Sat, 15 Mar 2008) | 2 lines

 * 4639 new items.

------------------------------------------------------------------------
r15140 | cbiere | 2008-03-15 10:24:54 -0400 (Sat, 15 Mar 2008) | 2 lines

 * Corrected date.

------------------------------------------------------------------------
r15139 | cbiere | 2008-03-15 10:05:40 -0400 (Sat, 15 Mar 2008) | 2 lines

 * This is the end of tiny ZIP files.

------------------------------------------------------------------------
r15138 | cbiere | 2008-03-15 09:52:49 -0400 (Sat, 15 Mar 2008) | 2 lines

 * 5139 new items.

------------------------------------------------------------------------
r15137 | cbiere | 2008-03-13 12:05:32 -0400 (Thu, 13 Mar 2008) | 2 lines

 * 2936 new items.

------------------------------------------------------------------------
r15136 | cbiere | 2008-03-12 18:29:53 -0400 (Wed, 12 Mar 2008) | 2 lines

 * 2977 new items.

------------------------------------------------------------------------
r15135 | cbiere | 2008-03-12 14:19:17 -0400 (Wed, 12 Mar 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15134 | cbiere | 2008-03-12 09:54:54 -0400 (Wed, 12 Mar 2008) | 2 lines

 * 1991 new items.

------------------------------------------------------------------------
r15133 | cbiere | 2008-03-11 17:53:51 -0400 (Tue, 11 Mar 2008) | 2 lines

 * 872 new items.

------------------------------------------------------------------------
r15132 | cbiere | 2008-03-11 15:59:19 -0400 (Tue, 11 Mar 2008) | 3 lines

 * node_process_handshake_header(): Accept the reported listening port, even
   if the reported address does not match the source address.

------------------------------------------------------------------------
r15131 | cbiere | 2008-03-11 14:53:16 -0400 (Tue, 11 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15130 | cbiere | 2008-03-11 12:26:41 -0400 (Tue, 11 Mar 2008) | 2 lines

 * This is the end of typhoon.

------------------------------------------------------------------------
r15129 | rmanfredi | 2008-03-11 06:40:37 -0400 (Tue, 11 Mar 2008) | 5 lines

Fixed XXX note in pcache_get_recent() as we still add hosts we get in pongs
to the host cache.  So the question is: do we need to keep the maintenance
of this cached pong logic, mostly for pong demultiplexing?  Probably, but we
may be able to simplify things and remove pcache_get_recent()..

------------------------------------------------------------------------
r15128 | rmanfredi | 2008-03-11 06:32:30 -0400 (Tue, 11 Mar 2008) | 5 lines

Added note in pcache_get_recent(): no longer calling it may mean we no longer
need any "ping/pong" processing, or at least we could stop sending out "ping"
given we no longer use the collected "pongs".
Implications are not clear though.

------------------------------------------------------------------------
r15127 | cbiere | 2008-03-10 20:03:23 -0400 (Mon, 10 Mar 2008) | 4 lines

 * Don't use pcache_get_recent() because it causes dominant presence of
   peers around port 6346 despite previous changes. This secondary peer
   cache is just bad and probably broken.

------------------------------------------------------------------------
r15126 | cbiere | 2008-03-10 10:35:34 -0400 (Mon, 10 Mar 2008) | 2 lines

 * Changed product name temporarily to avoid LimeWire ban.

------------------------------------------------------------------------
r15125 | cbiere | 2008-03-09 19:34:55 -0400 (Sun, 09 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15124 | cbiere | 2008-03-09 17:52:46 -0400 (Sun, 09 Mar 2008) | 2 lines

 * Removed outdated code.

------------------------------------------------------------------------
r15123 | cbiere | 2008-03-09 14:49:35 -0400 (Sun, 09 Mar 2008) | 2 lines

 * hcache_add_internal(): Added hack to avoid the BS monoculture.

------------------------------------------------------------------------
r15122 | cbiere | 2008-03-09 14:18:13 -0400 (Sun, 09 Mar 2008) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r15121 | cbiere | 2008-03-09 11:13:35 -0400 (Sun, 09 Mar 2008) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r15120 | cbiere | 2008-03-08 16:15:22 -0500 (Sat, 08 Mar 2008) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15119 | cbiere | 2008-03-08 16:08:10 -0500 (Sat, 08 Mar 2008) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15118 | cbiere | 2008-03-03 18:24:08 -0500 (Mon, 03 Mar 2008) | 2 lines

 * 501 new items.

------------------------------------------------------------------------
r15117 | cbiere | 2008-03-03 18:21:57 -0500 (Mon, 03 Mar 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15116 | cbiere | 2008-03-01 18:30:09 -0500 (Sat, 01 Mar 2008) | 2 lines

 * dbus_util_send_message(): Reduce the noise level. Debug variable missing.

------------------------------------------------------------------------
r15115 | cbiere | 2008-02-29 21:12:49 -0500 (Fri, 29 Feb 2008) | 2 lines

 * 630 new items.

------------------------------------------------------------------------
r15114 | cbiere | 2008-02-28 20:00:19 -0500 (Thu, 28 Feb 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15113 | cbiere | 2008-02-28 19:39:21 -0500 (Thu, 28 Feb 2008) | 3 lines

 * Added ranges.
 * Removed some outdated bans.

------------------------------------------------------------------------
r15112 | cbiere | 2008-02-28 18:22:13 -0500 (Thu, 28 Feb 2008) | 2 lines

 * Default to dual use of IPv4 and IPv6 instead of IPv4 only.

------------------------------------------------------------------------
r15111 | cbiere | 2008-02-28 18:17:05 -0500 (Thu, 28 Feb 2008) | 2 lines

 * process_meta_data(): Fixed compiler warning.

------------------------------------------------------------------------
r15110 | cbiere | 2008-02-28 18:16:17 -0500 (Thu, 28 Feb 2008) | 2 lines

 * node_is_now_connected(): Use gnet_prop_incr_guint32().

------------------------------------------------------------------------
r15109 | cbiere | 2008-02-27 17:26:32 -0500 (Wed, 27 Feb 2008) | 3 lines

 * Added range.
 * UPDATE YOUR hostiles.txt IMMEDIATELY!1

------------------------------------------------------------------------
r15108 | cbiere | 2008-02-27 10:38:20 -0500 (Wed, 27 Feb 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15107 | rmanfredi | 2008-02-24 05:17:00 -0500 (Sun, 24 Feb 2008) | 2 lines

Updated.

------------------------------------------------------------------------
r15106 | cbiere | 2008-02-24 01:36:14 -0500 (Sun, 24 Feb 2008) | 2 lines

 * 5386 new items.

------------------------------------------------------------------------
r15105 | cbiere | 2008-02-24 00:49:13 -0500 (Sun, 24 Feb 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15104 | cbiere | 2008-02-17 20:43:48 -0500 (Sun, 17 Feb 2008) | 2 lines

 * 687 new items.

------------------------------------------------------------------------
r15103 | daichik | 2008-02-16 10:47:54 -0500 (Sat, 16 Feb 2008) | 2 lines

Updated.

------------------------------------------------------------------------
r15102 | cbiere | 2008-02-15 16:38:12 -0500 (Fri, 15 Feb 2008) | 4 lines

 * tth_cache_insert(): Don't store anything in the TTH cache, if the root
   represents all leaves. In such a case, the created file was never used
   anyway.

------------------------------------------------------------------------
r15101 | cbiere | 2008-02-13 20:49:20 -0500 (Wed, 13 Feb 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15100 | cbiere | 2008-02-13 18:56:11 -0500 (Wed, 13 Feb 2008) | 2 lines

 * 424 new items.

------------------------------------------------------------------------
r15099 | cbiere | 2008-02-09 17:40:49 -0500 (Sat, 09 Feb 2008) | 2 lines

 * 3091 new items.

------------------------------------------------------------------------
r15098 | cbiere | 2008-02-07 12:04:02 -0500 (Thu, 07 Feb 2008) | 2 lines

 * Added hosts.

------------------------------------------------------------------------
r15097 | cbiere | 2008-01-27 08:09:42 -0500 (Sun, 27 Jan 2008) | 2 lines

 * 1987 new items.

------------------------------------------------------------------------
r15096 | cbiere | 2008-01-26 19:43:18 -0500 (Sat, 26 Jan 2008) | 4 lines

 * Removed the earliest items because attributes like filesize or TTH weren't
   recorded in the database.
 * Added about 4000 new items.

------------------------------------------------------------------------
r15095 | cbiere | 2008-01-25 18:30:50 -0500 (Fri, 25 Jan 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15094 | cbiere | 2008-01-21 16:18:04 -0500 (Mon, 21 Jan 2008) | 2 lines

 * 5543 new items.

------------------------------------------------------------------------
r15093 | cbiere | 2008-01-19 17:03:54 -0500 (Sat, 19 Jan 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15092 | cbiere | 2008-01-16 17:21:13 -0500 (Wed, 16 Jan 2008) | 2 lines

 * 1125 new items.

------------------------------------------------------------------------
r15091 | cbiere | 2008-01-16 16:38:53 -0500 (Wed, 16 Jan 2008) | 2 lines

 * Added filename pattern.

------------------------------------------------------------------------
r15090 | cbiere | 2008-01-15 13:52:08 -0500 (Tue, 15 Jan 2008) | 2 lines

 * is_action_url_spam(): Fixed bugfix; the schema part should be skipped.

------------------------------------------------------------------------
r15089 | cbiere | 2008-01-15 13:38:48 -0500 (Tue, 15 Jan 2008) | 3 lines

 * is_action_url_spam(): Fixed bug #1870957, a wrong sign causing an
   out-of-bounds read and potentially a crash.

------------------------------------------------------------------------
r15088 | cbiere | 2008-01-13 16:30:51 -0500 (Sun, 13 Jan 2008) | 2 lines

 * 1948 new items.

------------------------------------------------------------------------
r15087 | cbiere | 2008-01-13 16:19:58 -0500 (Sun, 13 Jan 2008) | 2 lines

 * search_xml_indent(): Slightly corrected indenting.

------------------------------------------------------------------------
r15086 | cbiere | 2008-01-12 20:28:03 -0500 (Sat, 12 Jan 2008) | 3 lines

 * Show the raw Bitzi tickets too because very useful information is hidden
   otherwise.

------------------------------------------------------------------------
r15085 | cbiere | 2008-01-12 20:23:12 -0500 (Sat, 12 Jan 2008) | 3 lines

 * search_xml_indent(): Modified to insert line-breaks between attributes
   because lines are often far too wide otherwise.

------------------------------------------------------------------------
r15084 | cbiere | 2008-01-12 20:20:01 -0500 (Sat, 12 Jan 2008) | 3 lines

 * Added some ogg-related MIME types.
 * Added .spx (Ogg/Speex) to default shared filename extensions.

------------------------------------------------------------------------
r15083 | cbiere | 2008-01-11 18:54:45 -0500 (Fri, 11 Jan 2008) | 2 lines

 * Updated UHC list again.

------------------------------------------------------------------------
r15082 | cbiere | 2008-01-11 14:36:11 -0500 (Fri, 11 Jan 2008) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r15081 | cbiere | 2008-01-10 15:27:11 -0500 (Thu, 10 Jan 2008) | 3 lines

 * Removed "doc" from the default shared extensions because if it's actually
   a MS Word document it's likely not meant for publishing.

------------------------------------------------------------------------
r15080 | cbiere | 2008-01-10 15:12:51 -0500 (Thu, 10 Jan 2008) | 5 lines

 * Added default shared filename extensions:
   * oga: Ogg/Audio
   * ogv: Ogg/Video
   * tbz2: short for tar.bz2

------------------------------------------------------------------------
r15079 | cbiere | 2008-01-08 16:04:19 -0500 (Tue, 08 Jan 2008) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15078 | cbiere | 2008-01-07 18:47:20 -0500 (Mon, 07 Jan 2008) | 2 lines

 * 1300 new items.

------------------------------------------------------------------------
r15077 | cbiere | 2008-01-05 14:27:05 -0500 (Sat, 05 Jan 2008) | 2 lines

 * utf8_latinize_chars(): Corrected compile-time assertion check.

------------------------------------------------------------------------
r15076 | cbiere | 2008-01-05 14:16:21 -0500 (Sat, 05 Jan 2008) | 3 lines

 * utf8_latinize_chars(): Corrected and added Katakana combines.
 * utf8_latinize(): "next" was actually the current character again.

------------------------------------------------------------------------
r15075 | cbiere | 2008-01-03 19:00:41 -0500 (Thu, 03 Jan 2008) | 2 lines

 * 2950 new items.

------------------------------------------------------------------------
r15074 | cbiere | 2008-01-03 18:44:08 -0500 (Thu, 03 Jan 2008) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15073 | cbiere | 2007-12-29 22:42:53 -0500 (Sat, 29 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15072 | cbiere | 2007-12-29 22:08:38 -0500 (Sat, 29 Dec 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15071 | cbiere | 2007-12-29 21:03:24 -0500 (Sat, 29 Dec 2007) | 2 lines

 * 4540 new items.

------------------------------------------------------------------------
r15070 | cbiere | 2007-12-29 20:54:57 -0500 (Sat, 29 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15069 | cbiere | 2007-12-29 15:38:09 -0500 (Sat, 29 Dec 2007) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15068 | cbiere | 2007-12-25 19:49:48 -0500 (Tue, 25 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15067 | cbiere | 2007-12-25 19:09:43 -0500 (Tue, 25 Dec 2007) | 3 lines

 * search_add_local_file(): atom_tth_get() does not like NULL and an available
   SHA-1 does not guarantee that the TTH is already calculated.

------------------------------------------------------------------------
r15066 | cbiere | 2007-12-24 13:04:41 -0500 (Mon, 24 Dec 2007) | 3 lines

 * Fixed bug: Firewalled status was not re-verified after a port change if
   the previously used port was open.

------------------------------------------------------------------------
r15065 | cbiere | 2007-12-22 18:52:12 -0500 (Sat, 22 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15064 | cbiere | 2007-12-22 18:50:42 -0500 (Sat, 22 Dec 2007) | 2 lines

 * 3405 new items.

------------------------------------------------------------------------
r15063 | cbiere | 2007-12-15 08:35:29 -0500 (Sat, 15 Dec 2007) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r15062 | cbiere | 2007-12-15 08:21:49 -0500 (Sat, 15 Dec 2007) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15061 | cbiere | 2007-12-09 10:55:27 -0500 (Sun, 09 Dec 2007) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r15060 | cbiere | 2007-12-09 10:22:34 -0500 (Sun, 09 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15059 | cbiere | 2007-12-08 23:36:38 -0500 (Sat, 08 Dec 2007) | 2 lines

 * 3294 new items.

------------------------------------------------------------------------
r15058 | cbiere | 2007-12-08 20:36:11 -0500 (Sat, 08 Dec 2007) | 3 lines

 * Add GGEP H bitprints or "urn:ttroot" to query hits if SHA-1 and TTH are
   available.

------------------------------------------------------------------------
r15057 | cbiere | 2007-12-08 20:33:49 -0500 (Sat, 08 Dec 2007) | 2 lines

 * Extract TTH from GGEP H bitprints.

------------------------------------------------------------------------
r15056 | cbiere | 2007-12-08 20:32:27 -0500 (Sat, 08 Dec 2007) | 2 lines

 * Added ggept_h_tth_extract().

------------------------------------------------------------------------
r15055 | cbiere | 2007-12-08 20:31:13 -0500 (Sat, 08 Dec 2007) | 2 lines

 * Added convenient constants.

------------------------------------------------------------------------
r15054 | cbiere | 2007-12-07 23:20:29 -0500 (Fri, 07 Dec 2007) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15053 | cbiere | 2007-12-07 20:15:45 -0500 (Fri, 07 Dec 2007) | 5 lines

 * struct gnutella_socket: Replaced boolean variables with SOCK_F_* flags.
 * Don't call setsockopt() for TCP_NODELAY or TCP_CORK if the desired setting
   is identical to the cached setting.
 * tls_bye(): Just return if the socket is already dead.

------------------------------------------------------------------------
r15052 | cbiere | 2007-12-07 13:55:38 -0500 (Fri, 07 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15051 | cbiere | 2007-12-07 13:52:43 -0500 (Fri, 07 Dec 2007) | 2 lines

 * Parse "urn:ttroot:<base32>" and pick up TTH in query hits.

------------------------------------------------------------------------
r15050 | cbiere | 2007-12-07 13:49:19 -0500 (Fri, 07 Dec 2007) | 2 lines

 * Added huge_tth_extract32().

------------------------------------------------------------------------
r15049 | cbiere | 2007-12-07 13:48:45 -0500 (Fri, 07 Dec 2007) | 2 lines

 * Added TTH -> string routines.

------------------------------------------------------------------------
r15048 | cbiere | 2007-12-07 11:02:01 -0500 (Fri, 07 Dec 2007) | 5 lines

 * search_gui_new_search_full(): Reordered code because appending a page
   to an empty notebook results in a "switch-page" signal with Gtk+ >= 2.12.x,
   so that search_gui_start_massive_update() must be called before the
   page is inserted. This should fix bug #1817648 and bug #1817641.

------------------------------------------------------------------------
r15047 | cbiere | 2007-12-06 16:59:35 -0500 (Thu, 06 Dec 2007) | 2 lines

 * Added ranges of the same spammer.

------------------------------------------------------------------------
r15046 | cbiere | 2007-12-06 16:20:05 -0500 (Thu, 06 Dec 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15045 | cbiere | 2007-12-04 13:11:21 -0500 (Tue, 04 Dec 2007) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15044 | cbiere | 2007-12-02 16:55:28 -0500 (Sun, 02 Dec 2007) | 2 lines

 * tls_init(): Corrected parameter for tls_free().

------------------------------------------------------------------------
r15043 | cbiere | 2007-12-02 16:54:41 -0500 (Sun, 02 Dec 2007) | 2 lines

 * Revert previous change.

------------------------------------------------------------------------
r15042 | cbiere | 2007-12-02 16:25:38 -0500 (Sun, 02 Dec 2007) | 2 lines

 * tls_init(): Fixed memory leak on failure which can probably never occur.

------------------------------------------------------------------------
r15041 | cbiere | 2007-12-02 16:24:00 -0500 (Sun, 02 Dec 2007) | 2 lines

 * Plugged two insignificant memory leaks.

------------------------------------------------------------------------
r15040 | cbiere | 2007-12-02 07:45:45 -0500 (Sun, 02 Dec 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r15039 | cbiere | 2007-12-01 14:09:17 -0500 (Sat, 01 Dec 2007) | 2 lines

 * Plugged memory leaks reported by Matthew Lye.

------------------------------------------------------------------------
r15038 | cbiere | 2007-12-01 10:11:17 -0500 (Sat, 01 Dec 2007) | 2 lines

 * Added missing RC style directive.

------------------------------------------------------------------------
r15037 | cbiere | 2007-12-01 09:51:07 -0500 (Sat, 01 Dec 2007) | 2 lines

 * Enforce a white background in treeviews for proper colour-coding.

------------------------------------------------------------------------
r15036 | cbiere | 2007-12-01 00:25:25 -0500 (Sat, 01 Dec 2007) | 2 lines

 * Shrunk banned range.

------------------------------------------------------------------------
r15035 | cbiere | 2007-11-30 21:03:54 -0500 (Fri, 30 Nov 2007) | 2 lines

 * Added host.

------------------------------------------------------------------------
r15034 | cbiere | 2007-11-30 21:02:18 -0500 (Fri, 30 Nov 2007) | 2 lines

 * 3151 new items.

------------------------------------------------------------------------
r15033 | cbiere | 2007-11-30 14:41:48 -0500 (Fri, 30 Nov 2007) | 3 lines

 * routing_init(): Generate a new servent GUID each session. The advantages
   outweigh the disadvantages.

------------------------------------------------------------------------
r15032 | cbiere | 2007-11-30 14:31:32 -0500 (Fri, 30 Nov 2007) | 4 lines

 * Don't comment out generally useful routines, even if currently unused
   because it causes bit rot.
 * Don't forget to bump the reference revision ID to disable regression checks.

------------------------------------------------------------------------
r15031 | cbiere | 2007-11-29 23:36:07 -0500 (Thu, 29 Nov 2007) | 2 lines

 * 3145 new items.

------------------------------------------------------------------------
r15030 | cbiere | 2007-11-29 23:31:39 -0500 (Thu, 29 Nov 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r15029 | cbiere | 2007-11-29 21:35:48 -0500 (Thu, 29 Nov 2007) | 2 lines

 * Improved handling of flaky sources.

------------------------------------------------------------------------
r15028 | bpringlemeir | 2007-11-28 23:47:03 -0500 (Wed, 28 Nov 2007) | 2 lines

Added colors to table.

------------------------------------------------------------------------
r15027 | bpringlemeir | 2007-11-28 22:00:48 -0500 (Wed, 28 Nov 2007) | 1 line

Added description of colors in search results.
------------------------------------------------------------------------
r15026 | cbiere | 2007-11-28 20:13:00 -0500 (Wed, 28 Nov 2007) | 2 lines

 * download_request(): Added support for AlmostHTTP.

------------------------------------------------------------------------
r15025 | cbiere | 2007-11-28 18:57:30 -0500 (Wed, 28 Nov 2007) | 2 lines

 * 1194 new items.

------------------------------------------------------------------------
r15024 | cbiere | 2007-11-28 17:54:12 -0500 (Wed, 28 Nov 2007) | 2 lines

 * gtk-gnutella isn't aggressive and suppresses aggressive searching.

------------------------------------------------------------------------
r15023 | cbiere | 2007-11-28 10:44:31 -0500 (Wed, 28 Nov 2007) | 2 lines

 * download_request(): Fixed bad handling of shrunk chunks.

------------------------------------------------------------------------
r15022 | cbiere | 2007-11-27 21:19:01 -0500 (Tue, 27 Nov 2007) | 2 lines

 * Bumping date due to fanatic gtk-gnutella 0.96.4 banning 0.96.5u.

------------------------------------------------------------------------
r15021 | cbiere | 2007-11-27 18:09:02 -0500 (Tue, 27 Nov 2007) | 2 lines

 * Extended ranges.

------------------------------------------------------------------------
r15020 | cbiere | 2007-11-26 11:57:47 -0500 (Mon, 26 Nov 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r15019 | cbiere | 2007-11-25 00:59:13 -0500 (Sun, 25 Nov 2007) | 2 lines

 * 1607 new items.

------------------------------------------------------------------------
r15018 | cbiere | 2007-11-23 23:08:22 -0500 (Fri, 23 Nov 2007) | 2 lines

 * 2002 new items.

------------------------------------------------------------------------
r15017 | cbiere | 2007-11-23 22:49:45 -0500 (Fri, 23 Nov 2007) | 3 lines

 * socket_connect_by_name_helper(): Fixed logic typo, the socket is
   only to be destroyed if both flags are set.

------------------------------------------------------------------------
r15016 | cbiere | 2007-11-23 22:22:06 -0500 (Fri, 23 Nov 2007) | 4 lines

 * If DNS resolution is asynchronous, socket_connect_by_name_helper() has to
   destroy the socket itself on error. Otherwise, it must not be destroyed
   yet to determine success or failure.

------------------------------------------------------------------------
r15015 | cbiere | 2007-11-23 22:05:58 -0500 (Fri, 23 Nov 2007) | 8 lines

 * socket_connect_by_name(): If connecting by hostname failed, the socket
   structure was accessed after socket_destroy() because
   socket_connect_by_name_helper() and socket_connect_finalize() called
   socket_destroy() on error. Therefore, socket_connect_finalize() must
   not destroy the socket if SOCK_ADNS_PENDING is set. Instead SOCK_ADNS_FAILED
   is set to indicate failure and socket_connect_by_name() takes care of
   destroying the socket in this case.

------------------------------------------------------------------------
r15014 | cbiere | 2007-11-23 21:21:25 -0500 (Fri, 23 Nov 2007) | 3 lines

 * socket_connected(): The download retry counter stays at zero for TLS connections. Maybe
   the change fixes this issue.

------------------------------------------------------------------------
r15013 | cbiere | 2007-11-23 08:19:56 -0500 (Fri, 23 Nov 2007) | 3 lines

 * Added range.
 * Corrected range.

------------------------------------------------------------------------
r15012 | cbiere | 2007-11-23 04:39:16 -0500 (Fri, 23 Nov 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r15011 | cbiere | 2007-11-23 04:01:30 -0500 (Fri, 23 Nov 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r15010 | rmanfredi | 2007-11-22 17:54:22 -0500 (Thu, 22 Nov 2007) | 2 lines

Documented color names.

------------------------------------------------------------------------
r15009 | cbiere | 2007-11-21 17:52:12 -0500 (Wed, 21 Nov 2007) | 2 lines

 * Corrected and extended patterns.

------------------------------------------------------------------------
r15008 | cbiere | 2007-11-21 17:49:21 -0500 (Wed, 21 Nov 2007) | 2 lines

 * 8425 new items.

------------------------------------------------------------------------
r15007 | cbiere | 2007-11-19 15:10:10 -0500 (Mon, 19 Nov 2007) | 2 lines

 * Added name/size filter.

------------------------------------------------------------------------
r15006 | cbiere | 2007-11-13 17:18:03 -0500 (Tue, 13 Nov 2007) | 2 lines

 * rv: Affected range was already banned since long ago.

------------------------------------------------------------------------
r15005 | rmanfredi | 2007-11-13 16:49:02 -0500 (Tue, 13 Nov 2007) | 2 lines

One possible bad CIDR.

------------------------------------------------------------------------
r15004 | rmanfredi | 2007-11-06 17:06:29 -0500 (Tue, 06 Nov 2007) | 2 lines

Forgot to check for leaf status in last commit.

------------------------------------------------------------------------
r15003 | rmanfredi | 2007-11-05 16:44:15 -0500 (Mon, 05 Nov 2007) | 2 lines

Need to export ignore_timer().

------------------------------------------------------------------------
r15002 | rmanfredi | 2007-11-05 16:42:09 -0500 (Mon, 05 Nov 2007) | 3 lines

LimeWire closed their CORE-67 bug, saying it was "irrelevant" to use the
push-proxy cancel notification.  When will they learn to do things correctly?

------------------------------------------------------------------------
r15001 | rmanfredi | 2007-11-05 16:40:20 -0500 (Mon, 05 Nov 2007) | 3 lines

Removed needless comment.  Someone got rid of the "discard" parameter from
node_proxying_remove() without updating comments.

------------------------------------------------------------------------
r14999 | bpringlemeir | 2007-11-03 19:46:17 -0400 (Sat, 03 Nov 2007) | 1 line

add ignore_timer() prototype for main.
------------------------------------------------------------------------
r14998 | cbiere | 2007-11-02 20:44:52 -0400 (Fri, 02 Nov 2007) | 3 lines

 * Always use "$rm -rf try try.*" to clean up after compiling because some
   compilers create not just files but also directories with debug information.

------------------------------------------------------------------------
r14997 | cbiere | 2007-11-02 19:42:57 -0400 (Fri, 02 Nov 2007) | 2 lines

 * Retrofit latest modification to Configure into this module.

------------------------------------------------------------------------
r14996 | cbiere | 2007-11-02 19:25:26 -0400 (Fri, 02 Nov 2007) | 2 lines

 * Removed bogus '[', ']' which cause trouble with shells of some tanks.

------------------------------------------------------------------------
r14995 | cbiere | 2007-11-02 15:47:14 -0400 (Fri, 02 Nov 2007) | 3 lines

 * Use the color definition for GTK_STATE_NORMAL instead of NULL because the
   result might differ or even be undefined.

------------------------------------------------------------------------
r14994 | cbiere | 2007-10-28 17:19:33 -0400 (Sun, 28 Oct 2007) | 2 lines

 * download_verify_tigertree_done(): Reset result of the SHA-1 calculation.

------------------------------------------------------------------------
r14993 | cbiere | 2007-10-27 16:56:59 -0400 (Sat, 27 Oct 2007) | 3 lines

 * Reduced alt-loc limit because LimeWire filters out results with more
   than 10.

------------------------------------------------------------------------
r14992 | cbiere | 2007-10-27 15:29:38 -0400 (Sat, 27 Oct 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r14991 | cbiere | 2007-10-26 19:21:02 -0400 (Fri, 26 Oct 2007) | 2 lines

 * 87 new items.

------------------------------------------------------------------------
r14990 | cbiere | 2007-10-25 17:54:12 -0400 (Thu, 25 Oct 2007) | 2 lines

 * 11 new items.

------------------------------------------------------------------------
r14989 | cbiere | 2007-10-25 17:50:54 -0400 (Thu, 25 Oct 2007) | 2 lines

 * it's time to clean up P2P.

------------------------------------------------------------------------
r14988 | cbiere | 2007-10-25 17:22:18 -0400 (Thu, 25 Oct 2007) | 2 lines

 * 180 new items.

------------------------------------------------------------------------
r14987 | cbiere | 2007-10-24 20:11:44 -0400 (Wed, 24 Oct 2007) | 2 lines

 * 949 new items.

------------------------------------------------------------------------
r14986 | cbiere | 2007-10-24 18:40:29 -0400 (Wed, 24 Oct 2007) | 2 lines

 * Don't be a sissy about unstable versions.

------------------------------------------------------------------------
r14985 | cbiere | 2007-10-24 18:36:48 -0400 (Wed, 24 Oct 2007) | 2 lines

 * Don't ban "too old" versions because it causes more harm than good.

------------------------------------------------------------------------
r14984 | cbiere | 2007-10-24 18:30:35 -0400 (Wed, 24 Oct 2007) | 2 lines

 * iprange_net_collision(): Wider range wins.

------------------------------------------------------------------------
r14983 | cbiere | 2007-10-24 18:29:06 -0400 (Wed, 24 Oct 2007) | 2 lines

 * Removed soon to be dead UHCs.

------------------------------------------------------------------------
r14982 | cbiere | 2007-10-24 18:24:43 -0400 (Wed, 24 Oct 2007) | 2 lines

 * tls_bye(): Suppress pointless warnings.

------------------------------------------------------------------------
r14981 | cbiere | 2007-10-24 18:15:33 -0400 (Wed, 24 Oct 2007) | 2 lines

 * iprange_sync(): 68.178.128.0/0xffff8000 overlaps with 68.178.225.162/0xffffffff.

------------------------------------------------------------------------
r14980 | cbiere | 2007-10-24 18:05:28 -0400 (Wed, 24 Oct 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14979 | rmanfredi | 2007-10-16 15:17:13 -0400 (Tue, 16 Oct 2007) | 3 lines

Re-instantiated support for "ignore.sha1" since there is no convenient way
to achieve this from the GUI any longer.

------------------------------------------------------------------------
r14978 | cbiere | 2007-10-09 09:13:22 -0400 (Tue, 09 Oct 2007) | 2 lines

 * Corrected range.

------------------------------------------------------------------------
r14977 | cbiere | 2007-10-09 02:46:58 -0400 (Tue, 09 Oct 2007) | 2 lines

 * Comment out overlapping ranges.

------------------------------------------------------------------------
r14976 | cbiere | 2007-10-09 01:45:14 -0400 (Tue, 09 Oct 2007) | 2 lines

 * Another range.

------------------------------------------------------------------------
r14975 | cbiere | 2007-10-09 01:03:12 -0400 (Tue, 09 Oct 2007) | 2 lines

 * Extended spammer range including fresh MediaDefender range.

------------------------------------------------------------------------
r14974 | cbiere | 2007-10-09 00:20:49 -0400 (Tue, 09 Oct 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14973 | cbiere | 2007-10-08 23:11:50 -0400 (Mon, 08 Oct 2007) | 3 lines

 * get_results_set(): Don't accept certain timestamps. Nice try.
 * update_neighbour_info(): Removed unnecessary check.

------------------------------------------------------------------------
r14972 | cbiere | 2007-10-08 21:52:43 -0400 (Mon, 08 Oct 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14971 | cbiere | 2007-10-08 20:05:57 -0400 (Mon, 08 Oct 2007) | 3 lines

 * latest_svn_release_changed(): Fixed uninitialized use of "hex".
 * handle_messages_supported(): Skip unnecessary checks.

------------------------------------------------------------------------
r14970 | cbiere | 2007-10-08 15:05:47 -0400 (Mon, 08 Oct 2007) | 2 lines

 * latest_svn_release_changed(): Plugged memory leak.

------------------------------------------------------------------------
r14969 | cbiere | 2007-10-07 15:51:16 -0400 (Sun, 07 Oct 2007) | 3 lines

 * search_gui_update_items_label(): Always display the values for the current
   search.

------------------------------------------------------------------------
r14968 | cbiere | 2007-10-06 20:21:03 -0400 (Sat, 06 Oct 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14967 | cbiere | 2007-10-06 16:37:53 -0400 (Sat, 06 Oct 2007) | 2 lines

 * Slightly obfuscated addresses against abuse; better late than never.

------------------------------------------------------------------------
r14966 | cbiere | 2007-10-03 17:30:17 -0400 (Wed, 03 Oct 2007) | 2 lines

 * 1610 new items.

------------------------------------------------------------------------
r14965 | cbiere | 2007-10-02 17:42:33 -0400 (Tue, 02 Oct 2007) | 2 lines

 * 4351 new items.

------------------------------------------------------------------------
r14964 | cbiere | 2007-10-02 17:21:24 -0400 (Tue, 02 Oct 2007) | 3 lines

 * download_pickup_queued(): Break out of the loop if the download queue is
   frozen; this was wasting a lot CPU time with many downloads.

------------------------------------------------------------------------
r14963 | cbiere | 2007-10-02 17:14:50 -0400 (Tue, 02 Oct 2007) | 4 lines

 * search_gui_flush(): Fixed inverted logic.
 * search_gui_shutdown(): search_gui_flush() must be called before zdestroy();
   fixes crash on exit when there were unflushed results.

------------------------------------------------------------------------
r14962 | cbiere | 2007-10-01 13:54:34 -0400 (Mon, 01 Oct 2007) | 4 lines

 * search_gui_option_menu_searches_update(): This has O(n) and is overall
   rather slow, thus it should not be called once when multiple searches
   are created or closed.

------------------------------------------------------------------------
r14961 | cbiere | 2007-10-01 07:16:44 -0400 (Mon, 01 Oct 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14960 | cbiere | 2007-09-29 08:59:00 -0400 (Sat, 29 Sep 2007) | 2 lines

 * The massacre continues...

------------------------------------------------------------------------
r14959 | cbiere | 2007-09-29 06:44:03 -0400 (Sat, 29 Sep 2007) | 2 lines

 * More scum.

------------------------------------------------------------------------
r14958 | bpringlemeir | 2007-09-28 15:45:56 -0400 (Fri, 28 Sep 2007) | 1 line

#if 0 unused function get_download_status_string.
------------------------------------------------------------------------
r14957 | bpringlemeir | 2007-09-28 15:43:57 -0400 (Fri, 28 Sep 2007) | 1 line

Bump date.
------------------------------------------------------------------------
r14956 | bpringlemeir | 2007-09-28 15:27:50 -0400 (Fri, 28 Sep 2007) | 1 line

Include prototypes for code within main.c
------------------------------------------------------------------------
r14955 | bpringlemeir | 2007-09-28 15:25:45 -0400 (Fri, 28 Sep 2007) | 3 lines

Include prototypes from self-referencial header when appropriate.
Make functions static, if only used within the file.
#if 0 unused functions.
------------------------------------------------------------------------
r14954 | bpringlemeir | 2007-09-28 15:23:13 -0400 (Fri, 28 Sep 2007) | 3 lines

Include prototypes from self-referencial header when appropriate.
Make functions static, if only used within the file.
#if 0 unused functions.
------------------------------------------------------------------------
r14953 | cbiere | 2007-09-27 21:15:49 -0400 (Thu, 27 Sep 2007) | 2 lines

 * Added ranges.

------------------------------------------------------------------------
r14952 | cbiere | 2007-09-27 20:02:47 -0400 (Thu, 27 Sep 2007) | 2 lines

 * node_is_connected(): Ignore the port for incoming connections.

------------------------------------------------------------------------
r14951 | cbiere | 2007-09-27 00:34:38 -0400 (Thu, 27 Sep 2007) | 3 lines

 * Removed "open proxies"; likely outdated.
 * Removed two EDUs; there were not even reasons given.

------------------------------------------------------------------------
r14950 | cbiere | 2007-09-26 19:41:35 -0400 (Wed, 26 Sep 2007) | 2 lines

 * Daniel Kerr cries.

------------------------------------------------------------------------
r14949 | cbiere | 2007-09-26 13:37:42 -0400 (Wed, 26 Sep 2007) | 2 lines

 * 2611 new items.

------------------------------------------------------------------------
r14948 | cbiere | 2007-09-25 11:48:11 -0400 (Tue, 25 Sep 2007) | 2 lines

 * 1362 new items.

------------------------------------------------------------------------
r14947 | cbiere | 2007-09-24 20:12:27 -0400 (Mon, 24 Sep 2007) | 2 lines

 * 2129 new items.

------------------------------------------------------------------------
r14946 | cbiere | 2007-09-22 17:08:36 -0400 (Sat, 22 Sep 2007) | 2 lines

 * 1129 new items.

------------------------------------------------------------------------
r14945 | cbiere | 2007-09-21 21:40:38 -0400 (Fri, 21 Sep 2007) | 2 lines

 * 1000 new items.

------------------------------------------------------------------------
r14944 | cbiere | 2007-09-21 12:20:03 -0400 (Fri, 21 Sep 2007) | 2 lines

 * 1065 new items.

------------------------------------------------------------------------
r14943 | cbiere | 2007-09-21 09:07:15 -0400 (Fri, 21 Sep 2007) | 2 lines

 * 5942 new items.

------------------------------------------------------------------------
r14942 | cbiere | 2007-09-20 17:39:30 -0400 (Thu, 20 Sep 2007) | 2 lines

 * 1007 new items.

------------------------------------------------------------------------
r14941 | cbiere | 2007-09-20 15:20:20 -0400 (Thu, 20 Sep 2007) | 2 lines

 * 1414 new items.

------------------------------------------------------------------------
r14940 | cbiere | 2007-09-20 12:14:07 -0400 (Thu, 20 Sep 2007) | 2 lines

 * 2692 new items.

------------------------------------------------------------------------
r14939 | cbiere | 2007-09-20 07:39:41 -0400 (Thu, 20 Sep 2007) | 2 lines

 * 1356 new items.

------------------------------------------------------------------------
r14938 | cbiere | 2007-09-19 18:46:08 -0400 (Wed, 19 Sep 2007) | 2 lines

 * 1331 new items.

------------------------------------------------------------------------
r14937 | cbiere | 2007-09-19 14:43:12 -0400 (Wed, 19 Sep 2007) | 2 lines

 * download_verify_sha1(): Corrected assertions.

------------------------------------------------------------------------
r14936 | cbiere | 2007-09-19 12:43:40 -0400 (Wed, 19 Sep 2007) | 2 lines

 * 1350 new items.

------------------------------------------------------------------------
r14935 | cbiere | 2007-09-19 09:57:30 -0400 (Wed, 19 Sep 2007) | 3 lines

 * Removed unused download_escape_name() and "escaped_name" from
   struct download.

------------------------------------------------------------------------
r14934 | cbiere | 2007-09-19 09:49:27 -0400 (Wed, 19 Sep 2007) | 3 lines

 * download_verify_sha1(): Ignore if the file is already suspended for
   verification.

------------------------------------------------------------------------
r14933 | cbiere | 2007-09-18 21:51:15 -0400 (Tue, 18 Sep 2007) | 2 lines

 * socket_read(): Check parq_is_enabled().

------------------------------------------------------------------------
r14932 | cbiere | 2007-09-18 21:49:18 -0400 (Tue, 18 Sep 2007) | 2 lines

 * Added parq_is_enabled().

------------------------------------------------------------------------
r14931 | cbiere | 2007-09-18 21:47:43 -0400 (Tue, 18 Sep 2007) | 2 lines

 * Whitespace cosmetic.

------------------------------------------------------------------------
r14930 | cbiere | 2007-09-18 21:44:26 -0400 (Tue, 18 Sep 2007) | 2 lines

 * Removed unnecessary line-break.

------------------------------------------------------------------------
r14929 | cbiere | 2007-09-18 21:43:46 -0400 (Tue, 18 Sep 2007) | 2 lines

 * Added property "parq_enabled".

------------------------------------------------------------------------
r14928 | cbiere | 2007-09-18 21:24:11 -0400 (Tue, 18 Sep 2007) | 7 lines

 * Removed a lot "#ifdef HAS_GNUTLS".
 * Clean-up of the tls_* interface: Always pass the socket instead of
   diverse things.
 * Simplified the I/O event switch logic; this might fix some subtle bug
   when the snarf buffer handling.
 * tls_bye(): Try to flush the snarf buffer for the last time.

------------------------------------------------------------------------
r14927 | cbiere | 2007-09-18 21:17:23 -0400 (Tue, 18 Sep 2007) | 7 lines

 * download_requeue_all_active(), download_remove_file(),
   queue_suspend_downloads_with_file(), download_remove(): Iterate over the
   sources of the specific file only instead of traversing all downloads.
 * download_verify_sha1_callback(), download_verify_sha1(): Added assertion
   checks because occasionally a file seems to be enqueued for verification
   whilst it is being verified (it is not finished but suspended).

------------------------------------------------------------------------
r14926 | cbiere | 2007-09-18 20:50:19 -0400 (Tue, 18 Sep 2007) | 3 lines

 * err_header_read_error(): Use the socket flags, not the node flags and mask
   flags which must not be reused.

------------------------------------------------------------------------
r14925 | cbiere | 2007-09-18 20:38:44 -0400 (Tue, 18 Sep 2007) | 2 lines

 * err_header_read_error(): Retry directly if we can.

------------------------------------------------------------------------
r14924 | cbiere | 2007-09-18 17:56:02 -0400 (Tue, 18 Sep 2007) | 2 lines

 * Added another UHC.

------------------------------------------------------------------------
r14923 | cbiere | 2007-09-18 15:48:56 -0400 (Tue, 18 Sep 2007) | 2 lines

 * 1127 new items.

------------------------------------------------------------------------
r14922 | cbiere | 2007-09-17 15:48:10 -0400 (Mon, 17 Sep 2007) | 3 lines

 * parq_upload_load_queue(): Feedback timeout; switching to fix it yourself
   mode.

------------------------------------------------------------------------
r14921 | cbiere | 2007-09-17 11:52:13 -0400 (Mon, 17 Sep 2007) | 2 lines

 * 971 new items.

------------------------------------------------------------------------
r14920 | cbiere | 2007-09-17 09:19:46 -0400 (Mon, 17 Sep 2007) | 2 lines

 * 2862 new items.

------------------------------------------------------------------------
r14919 | cbiere | 2007-09-16 17:47:05 -0400 (Sun, 16 Sep 2007) | 2 lines

 * Merged and simplified code.

------------------------------------------------------------------------
r14918 | cbiere | 2007-09-16 14:29:00 -0400 (Sun, 16 Sep 2007) | 2 lines

 * 897 new items.

------------------------------------------------------------------------
r14917 | cbiere | 2007-09-15 20:50:03 -0400 (Sat, 15 Sep 2007) | 2 lines

 * Another ass kicked.

------------------------------------------------------------------------
r14916 | rmanfredi | 2007-09-15 11:56:14 -0400 (Sat, 15 Sep 2007) | 3 lines

No need to persist QUEUESSENT and LASTQUEUE if no QUEUE callback was sent.
When restoring, simply ignore duplicate tags, don't abort processing.

------------------------------------------------------------------------
r14915 | rmanfredi | 2007-09-15 07:30:26 -0400 (Sat, 15 Sep 2007) | 8 lines

* Split parq_upload_timer() into several routines to make the code more
  manageable.
* Removed storage of "SENDNEXTQUEUE", and instead store the "LASTQUEUE" stamp.
  The older PARQ queue file will not be readable by the new code.
* Was not unflagging the fact that we scheduled a QUEUE callback when the
  connection attempt to the remote host failed: as such, these entries were
  never expired from the queue, preventing further uploads.

------------------------------------------------------------------------
r14914 | cbiere | 2007-09-15 07:07:42 -0400 (Sat, 15 Sep 2007) | 3 lines

 * host_port_to_string(): Removed miused strncat(); this was harmless as the
   buffer was sufficiently large.

------------------------------------------------------------------------
r14913 | cbiere | 2007-09-15 05:35:25 -0400 (Sat, 15 Sep 2007) | 2 lines

 * Preemptive strike.

------------------------------------------------------------------------
r14912 | bpringlemeir | 2007-09-14 23:55:55 -0400 (Fri, 14 Sep 2007) | 1 line

typo, remove confusing text.
------------------------------------------------------------------------
r14911 | bpringlemeir | 2007-09-14 23:47:38 -0400 (Fri, 14 Sep 2007) | 1 line

Info on tls_enforce, for people with bad ISPs.  Also make all html files have a human name.
------------------------------------------------------------------------
r14910 | cbiere | 2007-09-14 23:21:01 -0400 (Fri, 14 Sep 2007) | 2 lines

 * Another range.

------------------------------------------------------------------------
r14909 | cbiere | 2007-09-14 21:47:10 -0400 (Fri, 14 Sep 2007) | 2 lines

 * Another range.

------------------------------------------------------------------------
r14908 | cbiere | 2007-09-14 21:46:18 -0400 (Fri, 14 Sep 2007) | 3 lines

 * download_request(): Gnucleus is pretty foobar by default, thus be even more
   careful.

------------------------------------------------------------------------
r14907 | cbiere | 2007-09-14 09:54:24 -0400 (Fri, 14 Sep 2007) | 2 lines

 * Removed overlapped range.

------------------------------------------------------------------------
r14906 | cbiere | 2007-09-14 09:52:57 -0400 (Fri, 14 Sep 2007) | 2 lines

 * Ban more ranges of spam supporter "Hurricane Electric".

------------------------------------------------------------------------
r14905 | cbiere | 2007-09-13 20:04:26 -0400 (Thu, 13 Sep 2007) | 2 lines

 * 1068 new items.

------------------------------------------------------------------------
r14904 | cbiere | 2007-09-13 19:05:22 -0400 (Thu, 13 Sep 2007) | 2 lines

 * Added range.

------------------------------------------------------------------------
r14903 | cbiere | 2007-09-13 18:06:19 -0400 (Thu, 13 Sep 2007) | 3 lines

 * Added another range.
 * Added identity information for better tracking of criminals.

------------------------------------------------------------------------
r14902 | bpringlemeir | 2007-09-12 19:58:22 -0400 (Wed, 12 Sep 2007) | 1 line

Document SVN Release Notify
------------------------------------------------------------------------
r14901 | cbiere | 2007-09-12 17:30:34 -0400 (Wed, 12 Sep 2007) | 2 lines

 * Added two ranges.

------------------------------------------------------------------------
r14900 | cbiere | 2007-09-12 16:35:22 -0400 (Wed, 12 Sep 2007) | 2 lines

 * A 403 for a browse request is rather normal and does not indicate a ban.

------------------------------------------------------------------------
r14899 | cbiere | 2007-09-12 01:15:00 -0400 (Wed, 12 Sep 2007) | 2 lines

 * Pentium new items. Pentium is a registered trademark of Intel Corporation. 

------------------------------------------------------------------------
r14898 | cbiere | 2007-09-12 00:52:11 -0400 (Wed, 12 Sep 2007) | 3 lines

 * download_check_status(): Be more careful with "Weird HTTP Status" failures
   if it's not the initial request.

------------------------------------------------------------------------
r14897 | cbiere | 2007-09-12 00:48:39 -0400 (Wed, 12 Sep 2007) | 5 lines

 * download_request(): The socket buffer index (s->pos) was not reset for
   THEX and browse downloads even though we correctly fed the data to the
   RX stack. This did not matter before but was now causing a "Weird HTTP
   status" with keep-alive connections.

------------------------------------------------------------------------
r14896 | cbiere | 2007-09-12 00:20:10 -0400 (Wed, 12 Sep 2007) | 5 lines

 * download_check_status(): There are too many retarted peers causing
   false-positives which wouldn't be a problem if they actually implemented
   HTTP.
 * download_request(): Use a safer foobar condition.

------------------------------------------------------------------------
r14895 | cbiere | 2007-09-11 23:52:25 -0400 (Tue, 11 Sep 2007) | 3 lines

 * Make better use of keep-alive HTTP connections by continuing also when we
   completed a full download and not just a chunk.

------------------------------------------------------------------------
r14894 | cbiere | 2007-09-11 14:53:54 -0400 (Tue, 11 Sep 2007) | 2 lines

 * Added "7z" to the default shared filename extensions.

------------------------------------------------------------------------
r14893 | rmanfredi | 2007-09-11 12:24:15 -0400 (Tue, 11 Sep 2007) | 3 lines

Allow emergency switch-off of download resource switching, if problems arise
with a particular servent.

------------------------------------------------------------------------
r14892 | rmanfredi | 2007-09-11 12:20:59 -0400 (Tue, 11 Sep 2007) | 2 lines

Added "dl_resource_switching".

------------------------------------------------------------------------
r14891 | rmanfredi | 2007-09-11 01:19:05 -0400 (Tue, 11 Sep 2007) | 3 lines

Use tls_enabled() instead of protecting sections with "#ifdef HAS_GNUTLS"
to make sure all the code gets compiled.

------------------------------------------------------------------------
r14890 | cbiere | 2007-09-10 21:48:41 -0400 (Mon, 10 Sep 2007) | 2 lines

 * socket_uses_tls(): Check for equality just in case the value is bogus.

------------------------------------------------------------------------
r14889 | cbiere | 2007-09-10 21:47:09 -0400 (Mon, 10 Sep 2007) | 2 lines

 * socket_free(): Use socket_use_tls() instead of checking it manually.

------------------------------------------------------------------------
r14888 | cbiere | 2007-09-10 21:44:33 -0400 (Mon, 10 Sep 2007) | 3 lines

 * socket_addr_getsockname(), socket_accept(): Use socket_addr_init() to
   clear and prepare the address structure. Maybe this makes Darwin happy.

------------------------------------------------------------------------
r14887 | cbiere | 2007-09-10 21:05:41 -0400 (Mon, 10 Sep 2007) | 3 lines

 * socket_addr_getpeername(): Clear the address structures and indicate the
   address family. Maybe this makes getpeername() happy on Darwin.

------------------------------------------------------------------------
r14886 | cbiere | 2007-09-10 18:51:57 -0400 (Mon, 10 Sep 2007) | 2 lines

 * 600 new items.

------------------------------------------------------------------------
r14885 | rmanfredi | 2007-09-10 17:18:14 -0400 (Mon, 10 Sep 2007) | 2 lines

Allow download resource switching against recent-enough GTKG servers as well.

------------------------------------------------------------------------
r14884 | rmanfredi | 2007-09-10 17:16:35 -0400 (Mon, 10 Sep 2007) | 3 lines

Removed another greed limit that cannot be applied correctly, if the downloader
switches resources.

------------------------------------------------------------------------
r14883 | cbiere | 2007-09-10 16:41:06 -0400 (Mon, 10 Sep 2007) | 2 lines

 * 1262 new items.

------------------------------------------------------------------------
r14882 | rmanfredi | 2007-09-10 14:42:34 -0400 (Mon, 10 Sep 2007) | 3 lines

Allow GTKG to support resource switching, i.e. having clients request various
bits of various files in the same HTTP connection.

------------------------------------------------------------------------
r14881 | cbiere | 2007-09-10 14:25:44 -0400 (Mon, 10 Sep 2007) | 4 lines

 * download_pick_followup():
   * Moved the bug workaround into this function.
   * Assume only gtk-gnutella is buggy for now even though it actually works...

------------------------------------------------------------------------
r14880 | rmanfredi | 2007-09-10 12:09:26 -0400 (Mon, 10 Sep 2007) | 3 lines

Temporarily disable resource switching whilst downloading since this is not
necessarily a supported feature by remote Gnutella peers.

------------------------------------------------------------------------
r14879 | cbiere | 2007-09-10 08:48:09 -0400 (Mon, 10 Sep 2007) | 2 lines

 * 4086 new items.

------------------------------------------------------------------------
r14878 | daichik | 2007-09-10 08:42:57 -0400 (Mon, 10 Sep 2007) | 2 lines

Discarded obsolete translations.

------------------------------------------------------------------------
r14877 | cbiere | 2007-09-10 07:50:11 -0400 (Mon, 10 Sep 2007) | 2 lines

 * Added more workarounds for buggy peers.

------------------------------------------------------------------------
r14876 | cbiere | 2007-09-10 06:49:13 -0400 (Mon, 10 Sep 2007) | 4 lines

 * download_pick_followup():
   * Removed unnecesary check; d cannot be NULL.
   * Check for DL_F_THEX instead of d->thex.

------------------------------------------------------------------------
r14875 | cbiere | 2007-09-10 05:00:07 -0400 (Mon, 10 Sep 2007) | 13 lines

 * Added download_pick_followup() to select the next best download for a
   follow-up request.
 * download_clone(): Added some missing pieces so that this works for
   THEX and browse downloads too.
 * download_continue(): Instead of either continue to download from the same
   file or to hang-up, use download_pick_followup() to utilize the current
   keep-alive connection for another request.
 * download_write_data(): No change.
 * download_check_status(): Check for presence of the X-Queue header.
 * download_request(): Fixed THEX and browse downloads with foobar servers;
   the message headers were included in the message body.
 * download_thex_done(): Try to continue after a finished THEX download.

------------------------------------------------------------------------
r14874 | cbiere | 2007-09-10 03:21:20 -0400 (Mon, 10 Sep 2007) | 3 lines

 * thex_download_finished(): Added bug workaround for peers which send a
   wrong hashtree record ID.

------------------------------------------------------------------------
r14873 | cbiere | 2007-09-10 02:46:15 -0400 (Mon, 10 Sep 2007) | 3 lines

 * thex_download_finished(): Shrink "ctx->data_size" to "ctx->pos" because
   the buffer might not be completely filled.

------------------------------------------------------------------------
r14872 | cbiere | 2007-09-09 22:12:32 -0400 (Sun, 09 Sep 2007) | 2 lines

 * dime_find_record(): Removed misplaced debug message.

------------------------------------------------------------------------
r14871 | cbiere | 2007-09-09 22:02:07 -0400 (Sun, 09 Sep 2007) | 2 lines

 * If debugging dump the THEX data for inspection if there is a failure.

------------------------------------------------------------------------
r14870 | cbiere | 2007-09-09 21:32:24 -0400 (Sun, 09 Sep 2007) | 3 lines

 * xalt_detect_tls_support(): Initialize tls_hex by popular demand.
 * download_check_status(): Another nice idea which just doesn't work.

------------------------------------------------------------------------
r14869 | cbiere | 2007-09-09 19:43:27 -0400 (Sun, 09 Sep 2007) | 3 lines

 * dmesh_alternate_location(): Indicate TLS support at least for ourselves
   if enabled.

------------------------------------------------------------------------
r14868 | cbiere | 2007-09-09 19:41:25 -0400 (Sun, 09 Sep 2007) | 3 lines

 * Check tls_enabled() instead of HAS_GNUTLS where possible to avoid having code
   which is not always compiled.

------------------------------------------------------------------------
r14867 | cbiere | 2007-09-09 19:27:45 -0400 (Sun, 09 Sep 2007) | 5 lines

 * download_queue_v(): Clear d->error_str if fmt was NULL.
 * download_queue_update_status(): Only passing a buffer length is obscure,
   as d->error_str is initialized, just use strlen() to determine available
   space.

------------------------------------------------------------------------
r14866 | cbiere | 2007-09-09 19:05:55 -0400 (Sun, 09 Sep 2007) | 2 lines

 * Added tls_enabled() so that we don't have to use #ifdef HAS_GNUTLS.

------------------------------------------------------------------------
r14865 | cbiere | 2007-09-09 18:49:03 -0400 (Sun, 09 Sep 2007) | 3 lines

 * download_check_status(): Don't consider a 503 without a Retry-After header
   worthy to reset the retry counter.

------------------------------------------------------------------------
r14864 | cbiere | 2007-09-09 18:29:32 -0400 (Sun, 09 Sep 2007) | 7 lines

 * Eliminated file-wide static buffer "dl_tmp".
 * download_request(): Just use download_addr() and download_port().
 * check_date(): No need to pass the download and the address.
 * Added xalt_detect_tls_support() to detect whether the remote peer
   supports TLS by looking at the X-Alt header.
 * download_retrieve_old(): There's no point in reserving a byte with fgets().

------------------------------------------------------------------------
r14863 | cbiere | 2007-09-09 16:02:59 -0400 (Sun, 09 Sep 2007) | 2 lines

 * open_read(): These warnings are too verbose. Show them only when debugging.

------------------------------------------------------------------------
r14862 | rmanfredi | 2007-09-09 15:36:24 -0400 (Sun, 09 Sep 2007) | 2 lines

Increase delay each time when retrying after an immediate EOF.

------------------------------------------------------------------------
r14861 | rmanfredi | 2007-09-09 14:25:49 -0400 (Sun, 09 Sep 2007) | 2 lines

Fixed status corruption bug in queued entries.

------------------------------------------------------------------------
r14860 | cbiere | 2007-09-09 14:16:17 -0400 (Sun, 09 Sep 2007) | 2 lines

 * 1051 new items.

------------------------------------------------------------------------
r14859 | rmanfredi | 2007-09-09 10:06:00 -0400 (Sun, 09 Sep 2007) | 3 lines

Fixed incorrect retry delay setting: we must leave "delay" to 0 if there was
no Retry-After header.

------------------------------------------------------------------------
r14858 | cbiere | 2007-09-09 09:58:18 -0400 (Sun, 09 Sep 2007) | 2 lines

 * 1150 new items.

------------------------------------------------------------------------
r14857 | rmanfredi | 2007-09-09 09:45:43 -0400 (Sun, 09 Sep 2007) | 2 lines

Dissociate "banning" servent from known G2-only host.

------------------------------------------------------------------------
r14856 | rmanfredi | 2007-09-09 09:39:19 -0400 (Sun, 09 Sep 2007) | 3 lines

Ooops, we were no longer dealing properly with genuine HTTP errors once a
server was flagged as banning.

------------------------------------------------------------------------
r14855 | rmanfredi | 2007-09-09 09:20:23 -0400 (Sun, 09 Sep 2007) | 2 lines

Removed impersonification.

------------------------------------------------------------------------
r14854 | rmanfredi | 2007-09-09 09:19:54 -0400 (Sun, 09 Sep 2007) | 2 lines

Will be removing impersonification, can turn hackarounds to TRUE by default.

------------------------------------------------------------------------
r14853 | rmanfredi | 2007-09-09 09:09:14 -0400 (Sun, 09 Sep 2007) | 2 lines

Minor adjustment.

------------------------------------------------------------------------
r14852 | rmanfredi | 2007-09-09 09:05:45 -0400 (Sun, 09 Sep 2007) | 3 lines

Added explicit flag to signal G2-only hosts to not conflict with optional
hackarounds.

------------------------------------------------------------------------
r14851 | rmanfredi | 2007-09-09 08:54:55 -0400 (Sun, 09 Sep 2007) | 2 lines

Removed Christian's name at his request.

------------------------------------------------------------------------
r14850 | rmanfredi | 2007-09-09 08:53:47 -0400 (Sun, 09 Sep 2007) | 4 lines

Avoid pollution of the download mesh with G2-only hosts.
Added support for Shareaza's amazing misunderstanding of what an HTTP status
code means.

------------------------------------------------------------------------
r14849 | rmanfredi | 2007-09-09 08:51:14 -0400 (Sun, 09 Sep 2007) | 2 lines

Added properties for the G2 cache.

------------------------------------------------------------------------
r14848 | rmanfredi | 2007-09-09 08:50:41 -0400 (Sun, 09 Sep 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r14847 | rmanfredi | 2007-09-09 08:50:21 -0400 (Sun, 09 Sep 2007) | 2 lines

Added cache for G2-only hosts to avoid download mesh corruption.

------------------------------------------------------------------------
r14846 | cbiere | 2007-09-08 23:01:45 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 1003 new items.

------------------------------------------------------------------------
r14845 | cbiere | 2007-09-08 22:15:09 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 1169 new items.

------------------------------------------------------------------------
r14844 | cbiere | 2007-09-08 20:05:53 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 145 new items.

------------------------------------------------------------------------
r14843 | cbiere | 2007-09-08 18:55:31 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 995 new items.

------------------------------------------------------------------------
r14842 | rmanfredi | 2007-09-08 18:50:14 -0400 (Sat, 08 Sep 2007) | 2 lines

Only trigger hackarounds if directed to do so explicitly.

------------------------------------------------------------------------
r14841 | rmanfredi | 2007-09-08 18:49:20 -0400 (Sat, 08 Sep 2007) | 2 lines

Added property to enable hackarounds.

------------------------------------------------------------------------
r14840 | rmanfredi | 2007-09-08 18:35:43 -0400 (Sat, 08 Sep 2007) | 2 lines

Even more silly re-instantiation of a hackaround.

------------------------------------------------------------------------
r14839 | daichik | 2007-09-08 16:48:12 -0400 (Sat, 08 Sep 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14838 | daichik | 2007-09-08 16:46:42 -0400 (Sat, 08 Sep 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14837 | cbiere | 2007-09-08 15:38:26 -0400 (Sat, 08 Sep 2007) | 2 lines

 * Suppress some log messages if tigertree_debug is zero.

------------------------------------------------------------------------
r14836 | cbiere | 2007-09-08 15:25:41 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 2082 new items.

------------------------------------------------------------------------
r14835 | cbiere | 2007-09-08 14:07:48 -0400 (Sat, 08 Sep 2007) | 3 lines

 * Don't limit "hosts_in_catcher" to 999999 because it'll generated endless
   warnings once there are 1000000 cached hosts.

------------------------------------------------------------------------
r14834 | rmanfredi | 2007-09-08 13:27:08 -0400 (Sat, 08 Sep 2007) | 2 lines

Removed default case in switch() statements on enum.

------------------------------------------------------------------------
r14833 | bpringlemeir | 2007-09-08 12:23:06 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makefile config.h mkdep .package config.sh and .config
------------------------------------------------------------------------
r14832 | bpringlemeir | 2007-09-08 12:15:36 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makfile and gtk-gnutella binary.
------------------------------------------------------------------------
r14831 | bpringlemeir | 2007-09-08 12:13:39 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makefile and libshell.a
------------------------------------------------------------------------
r14830 | bpringlemeir | 2007-09-08 12:12:18 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makefile and libshared.a
------------------------------------------------------------------------
r14829 | bpringlemeir | 2007-09-08 12:05:30 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makefile and libcore.a
------------------------------------------------------------------------
r14828 | bpringlemeir | 2007-09-08 12:01:54 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore Makefile libgtk-common.a libgtkx.a generated files
------------------------------------------------------------------------
r14827 | bpringlemeir | 2007-09-08 11:59:12 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore callbacks.c callbacks.h Makefile and libgtk1.a generated files. For real.
------------------------------------------------------------------------
r14826 | bpringlemeir | 2007-09-08 11:58:03 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore callbacks.c callbacks.h Makefile and libgtk2.a generated files.
------------------------------------------------------------------------
r14825 | bpringlemeir | 2007-09-08 11:54:31 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore generated documentation. 2nd try.
------------------------------------------------------------------------
r14824 | bpringlemeir | 2007-09-08 11:53:14 -0400 (Sat, 08 Sep 2007) | 1 line

propset erases previous properties.  Ignore makefile and archive.
------------------------------------------------------------------------
r14823 | bpringlemeir | 2007-09-08 11:39:25 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore generated binary gtk-gnutella
------------------------------------------------------------------------
r14822 | bpringlemeir | 2007-09-08 11:35:01 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore generated libraries. 2nd attempt.
------------------------------------------------------------------------
r14821 | bpringlemeir | 2007-09-08 11:33:06 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore generated Makefiles
------------------------------------------------------------------------
r14820 | bpringlemeir | 2007-09-08 11:27:34 -0400 (Sat, 08 Sep 2007) | 1 line

Ignore generated libraries and document files.
------------------------------------------------------------------------
r14819 | cbiere | 2007-09-08 06:40:13 -0400 (Sat, 08 Sep 2007) | 4 lines

 * tls_cache_insert_intern(): Since the limit can be changed at runtime now,
   more than one item must be removed at a time to effectively allow lowering
   the limit.

------------------------------------------------------------------------
r14818 | rmanfredi | 2007-09-08 05:55:07 -0400 (Sat, 08 Sep 2007) | 2 lines

Turn monitoring of "unstable IPs" off by default.

------------------------------------------------------------------------
r14817 | cbiere | 2007-09-08 05:52:42 -0400 (Sat, 08 Sep 2007) | 2 lines

 * handle_content_urn(): Check the TTH too if we a bitprint.

------------------------------------------------------------------------
r14816 | cbiere | 2007-09-08 05:02:56 -0400 (Sat, 08 Sep 2007) | 2 lines

 * Keep the brace style consistent.

------------------------------------------------------------------------
r14815 | rmanfredi | 2007-09-08 04:52:16 -0400 (Sat, 08 Sep 2007) | 2 lines

Do not emit messages unless debugging tigertrees.

------------------------------------------------------------------------
r14814 | cbiere | 2007-09-08 04:51:30 -0400 (Sat, 08 Sep 2007) | 2 lines

 * Cosmetic.

------------------------------------------------------------------------
r14813 | rmanfredi | 2007-09-08 04:41:47 -0400 (Sat, 08 Sep 2007) | 4 lines

Take into account possible file descriptor shortage / runout to possibly
switch uploads from active to passive queueing, and let that also influence
the active queuing policy.

------------------------------------------------------------------------
r14812 | cbiere | 2007-09-08 03:23:21 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 1924 new items.

------------------------------------------------------------------------
r14811 | cbiere | 2007-09-08 02:54:58 -0400 (Sat, 08 Sep 2007) | 2 lines

 * Allow tigertree data with one level less than desired like others do.

------------------------------------------------------------------------
r14810 | cbiere | 2007-09-08 02:27:48 -0400 (Sat, 08 Sep 2007) | 3 lines

 * search_gui_disable_sort(), search_gui_enable_sort(): Don't do anything
   if sorting has not been activated yet. Gtk+ does not like this.

------------------------------------------------------------------------
r14809 | cbiere | 2007-09-08 01:38:29 -0400 (Sat, 08 Sep 2007) | 2 lines

 * Use download_host_info().

------------------------------------------------------------------------
r14808 | cbiere | 2007-09-08 01:00:38 -0400 (Sat, 08 Sep 2007) | 2 lines

 * 1150 new items.

------------------------------------------------------------------------
r14807 | cbiere | 2007-09-07 23:56:48 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1049 new items.

------------------------------------------------------------------------
r14806 | cbiere | 2007-09-07 22:44:29 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1096 new items.

------------------------------------------------------------------------
r14805 | cbiere | 2007-09-07 22:36:38 -0400 (Fri, 07 Sep 2007) | 3 lines

 * download_check_status(): Reset "retries" here but only if we got a
   "positive" response.

------------------------------------------------------------------------
r14804 | cbiere | 2007-09-07 22:24:51 -0400 (Fri, 07 Sep 2007) | 3 lines

 * Do not reset "retries" in random places. A mere successful connect does
   clearly NOT qualify to reset "retries".

------------------------------------------------------------------------
r14803 | cbiere | 2007-09-07 21:24:30 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1020 new items.

------------------------------------------------------------------------
r14802 | cbiere | 2007-09-07 18:51:49 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1079 new items.

------------------------------------------------------------------------
r14801 | cbiere | 2007-09-07 18:02:33 -0400 (Fri, 07 Sep 2007) | 3 lines

 * download_remove_file(): Made it more efficient by traversing only the
   sources for the file instead of all active downloads.

------------------------------------------------------------------------
r14800 | rmanfredi | 2007-09-07 17:46:00 -0400 (Fri, 07 Sep 2007) | 3 lines

Made socket_destroy() requeue the download instead of stopping it on error.
Indeed, many of the errors could be transient ones.

------------------------------------------------------------------------
r14799 | rmanfredi | 2007-09-07 17:31:52 -0400 (Fri, 07 Sep 2007) | 2 lines

When suspecting remote banning due to too many EOF, wait at least 6 minutes.

------------------------------------------------------------------------
r14798 | rmanfredi | 2007-09-07 17:19:28 -0400 (Fri, 07 Sep 2007) | 2 lines

Show download retry count when queued.

------------------------------------------------------------------------
r14797 | cbiere | 2007-09-07 16:19:56 -0400 (Fri, 07 Sep 2007) | 2 lines

 * Added property "tth_auto_discovery".

------------------------------------------------------------------------
r14796 | cbiere | 2007-09-07 16:19:27 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1057 new items.

------------------------------------------------------------------------
r14795 | cbiere | 2007-09-07 15:15:07 -0400 (Fri, 07 Sep 2007) | 2 lines

 * Enumeration lists must not end with a comma.

------------------------------------------------------------------------
r14794 | rmanfredi | 2007-09-07 14:41:07 -0400 (Fri, 07 Sep 2007) | 2 lines

Use new io_get_read_bytes() to decide whether to retry a TLS connection.

------------------------------------------------------------------------
r14793 | rmanfredi | 2007-09-07 14:34:02 -0400 (Fri, 07 Sep 2007) | 3 lines

Added io_get_read_bytes().
Random cleanup.

------------------------------------------------------------------------
r14792 | cbiere | 2007-09-07 14:14:30 -0400 (Fri, 07 Sep 2007) | 2 lines

 * 1864 new items.

------------------------------------------------------------------------
r14791 | rmanfredi | 2007-09-07 13:08:32 -0400 (Fri, 07 Sep 2007) | 3 lines

Allow a one-time TLS connection retry attempt when we get an EOF upon
connecting, with no header lines, or when we get a connection reset error.

------------------------------------------------------------------------
r14790 | rmanfredi | 2007-09-07 13:06:19 -0400 (Fri, 07 Sep 2007) | 3 lines

Allow forcing of a TLS connection if we specify SOCK_F_TLS when connecting
by hostname.

------------------------------------------------------------------------
r14789 | rmanfredi | 2007-09-07 13:04:35 -0400 (Fri, 07 Sep 2007) | 2 lines

Shut up TLS handshake warnings unless they turned on TLS debugging.

------------------------------------------------------------------------
r14788 | rmanfredi | 2007-09-07 12:14:41 -0400 (Fri, 07 Sep 2007) | 2 lines

Removed the incorrect "catcher" term in descriptions, replacing it with "cache".

------------------------------------------------------------------------
r14787 | rmanfredi | 2007-09-07 11:59:19 -0400 (Fri, 07 Sep 2007) | 2 lines

Added properties for TLS cache configuration.

------------------------------------------------------------------------
r14786 | cbiere | 2007-09-07 11:53:13 -0400 (Fri, 07 Sep 2007) | 3 lines

 * Avoid GNUTLS type aliases ending with _t because these did not exist
   3 years ago.

------------------------------------------------------------------------
r14785 | cbiere | 2007-09-06 23:47:57 -0400 (Thu, 06 Sep 2007) | 2 lines

 * 1695 new items.

------------------------------------------------------------------------
r14784 | cbiere | 2007-09-06 21:52:54 -0400 (Thu, 06 Sep 2007) | 2 lines

 * 1318 new items.

------------------------------------------------------------------------
r14783 | cbiere | 2007-09-06 21:01:33 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r14782 | cbiere | 2007-09-06 19:58:35 -0400 (Thu, 06 Sep 2007) | 5 lines

 * node_slow_timer(): Degrade ultrapeers to leaves only if auto-mode is used.
   Otherwise the peer will stay in leaf mode forever or at least longer than
   the log message claims. In any case it doesn't work as intended, thus
   do not freaking mess with my configuration.

------------------------------------------------------------------------
r14781 | cbiere | 2007-09-06 19:29:22 -0400 (Thu, 06 Sep 2007) | 2 lines

 * 45 new items.

------------------------------------------------------------------------
r14780 | cbiere | 2007-09-06 15:22:56 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Corrected comment.

------------------------------------------------------------------------
r14779 | cbiere | 2007-09-06 15:22:21 -0400 (Thu, 06 Sep 2007) | 2 lines

 * 1235 new items.

------------------------------------------------------------------------
r14778 | cbiere | 2007-09-06 15:15:28 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Added comment.

------------------------------------------------------------------------
r14777 | rmanfredi | 2007-09-06 14:48:31 -0400 (Thu, 06 Sep 2007) | 3 lines

It's interesting to reset the quick ACKs to false only when connection is
going to be kept alive.

------------------------------------------------------------------------
r14776 | cbiere | 2007-09-06 14:40:28 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Another scummer.

------------------------------------------------------------------------
r14775 | cbiere | 2007-09-06 13:35:01 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Eat dirt.

------------------------------------------------------------------------
r14774 | rmanfredi | 2007-09-06 13:33:14 -0400 (Thu, 06 Sep 2007) | 2 lines

Make sure we disable TCP quick ACKs each time we send back an HTTP status.

------------------------------------------------------------------------
r14773 | rmanfredi | 2007-09-06 13:32:37 -0400 (Thu, 06 Sep 2007) | 2 lines

Fixed line length.

------------------------------------------------------------------------
r14772 | cbiere | 2007-09-06 13:20:39 -0400 (Thu, 06 Sep 2007) | 2 lines

 * 2076 new items.

------------------------------------------------------------------------
r14771 | cbiere | 2007-09-06 12:20:55 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Plus one.

------------------------------------------------------------------------
r14770 | cbiere | 2007-09-06 09:21:28 -0400 (Thu, 06 Sep 2007) | 2 lines

 * Plus 1.

------------------------------------------------------------------------
r14769 | cbiere | 2007-09-05 23:23:37 -0400 (Wed, 05 Sep 2007) | 3 lines

 * fi_gui_file_visible(): Don't list completed downloads as "orphaned" when
   complete but not yet hashed.

------------------------------------------------------------------------
r14768 | cbiere | 2007-09-05 23:15:17 -0400 (Wed, 05 Sep 2007) | 2 lines

 * 248 new items.

------------------------------------------------------------------------
r14767 | cbiere | 2007-09-05 22:34:17 -0400 (Wed, 05 Sep 2007) | 2 lines

 * 876 new items.

------------------------------------------------------------------------
r14766 | bpringlemeir | 2007-09-05 21:24:32 -0400 (Wed, 05 Sep 2007) | 1 line

socket_set_quickack() with arguments.  Use delayed ack for control (ping/pong) traffic.
------------------------------------------------------------------------
r14765 | cbiere | 2007-09-05 21:24:25 -0400 (Wed, 05 Sep 2007) | 3 lines

 * Added property "upload_tx_size" used to set the TCP window-size / socket
   buffer size for uploads.

------------------------------------------------------------------------
r14764 | cbiere | 2007-09-05 17:44:03 -0400 (Wed, 05 Sep 2007) | 3 lines

 * Separated TCP_QUICKACK and TCP_FASTACK. They are not equivalent and
   setting TCP_FASTACK multiple times really makes no sense.

------------------------------------------------------------------------
r14763 | cbiere | 2007-09-05 17:37:28 -0400 (Wed, 05 Sep 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r14762 | rmanfredi | 2007-09-05 17:01:37 -0400 (Wed, 05 Sep 2007) | 3 lines

Export socket_set_fastack().
Make sure we call socket_set_fastack() at each request we send out.

------------------------------------------------------------------------
r14761 | rmanfredi | 2007-09-05 16:50:48 -0400 (Wed, 05 Sep 2007) | 3 lines

Removed type check in socket_set_fastack().  It's always best to have such
checks made by the caller.

------------------------------------------------------------------------
r14760 | rmanfredi | 2007-09-05 16:49:30 -0400 (Wed, 05 Sep 2007) | 2 lines

Limit usage of fast ACKs to download-type sockets.

------------------------------------------------------------------------
r14759 | cbiere | 2007-09-05 15:56:41 -0400 (Wed, 05 Sep 2007) | 2 lines

 * socket_set_fastack(): Log a message on failure.

------------------------------------------------------------------------
r14758 | bpringlemeir | 2007-09-05 14:59:20 -0400 (Wed, 05 Sep 2007) | 5 lines

cmsg_nxthdr, use shadow variables to quiet gcc warnings (possible
macro implementation issue).
Use TCP_QUICKACK on Linux.  Parallels TCP_FASTACK on Irix.
Changed socket_set_fastack() to only be used on SOCK_TYPE_DOWNLOAD.

------------------------------------------------------------------------
r14757 | cbiere | 2007-09-04 15:30:16 -0400 (Tue, 04 Sep 2007) | 1 line


------------------------------------------------------------------------
r14756 | cbiere | 2007-09-04 15:25:55 -0400 (Tue, 04 Sep 2007) | 3 lines

 * parq_store(): Do NOT store expired entries. If you don't know what expired
   means get a dictionary.

------------------------------------------------------------------------
r14755 | cbiere | 2007-09-04 15:24:10 -0400 (Tue, 04 Sep 2007) | 4 lines

 * Reduced download retry delays. Half an hour is simply retarded. A static
   long delay is not careful but idiotic. Exponentional back-off has been
   invented.

------------------------------------------------------------------------
r14754 | daichik | 2007-09-04 08:29:31 -0400 (Tue, 04 Sep 2007) | 2 lines

Updated French translations by FlashCode.

------------------------------------------------------------------------
r14753 | daichik | 2007-09-04 08:24:57 -0400 (Tue, 04 Sep 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14752 | bpringlemeir | 2007-09-03 12:03:48 -0400 (Mon, 03 Sep 2007) | 2 lines

Updated information on configuring a network with a commercial router.

------------------------------------------------------------------------
r14751 | cbiere | 2007-09-02 21:27:58 -0400 (Sun, 02 Sep 2007) | 2 lines

 * 688 new items.

------------------------------------------------------------------------
r14750 | cbiere | 2007-09-02 20:40:30 -0400 (Sun, 02 Sep 2007) | 2 lines

 * 1919 new items.

------------------------------------------------------------------------
r14749 | cbiere | 2007-09-02 20:27:56 -0400 (Sun, 02 Sep 2007) | 2 lines

 * search_gui_get_route(): Don't suppress the route for browse results.

------------------------------------------------------------------------
r14748 | cbiere | 2007-09-02 19:49:49 -0400 (Sun, 02 Sep 2007) | 2 lines

 * download_host_info(): Fixed typo; we don't need the host twice.

------------------------------------------------------------------------
r14747 | cbiere | 2007-09-02 16:58:46 -0400 (Sun, 02 Sep 2007) | 4 lines

 * Enable socket option TCP_FASTACK on IRIX. Apparently, this option alone
   can multiply the throughput by a factor of 3 and more on connections with
   a high RTT like 300ms.

------------------------------------------------------------------------
r14746 | cbiere | 2007-09-02 15:28:51 -0400 (Sun, 02 Sep 2007) | 2 lines

 * download_set_socket_rx_size(): Removed brain-dead assertion.

------------------------------------------------------------------------
r14745 | cbiere | 2007-09-02 14:43:50 -0400 (Sun, 02 Sep 2007) | 2 lines

 * 2298 new items.

------------------------------------------------------------------------
r14744 | cbiere | 2007-09-02 13:42:14 -0400 (Sun, 02 Sep 2007) | 3 lines

 * Removed some of the "lingering close()" code because that is simply not
   how it works.

------------------------------------------------------------------------
r14743 | cbiere | 2007-09-02 12:38:30 -0400 (Sun, 02 Sep 2007) | 3 lines

 * Use the system's default for SO_SNDBUF and SO_RCVBUF if the value is zero.
 * socket_tls_setup(): Set TCP_NODELAY for TLS sockets.

------------------------------------------------------------------------
r14742 | rmanfredi | 2007-09-02 12:07:41 -0400 (Sun, 02 Sep 2007) | 2 lines

Added 1 entry.

------------------------------------------------------------------------
r14741 | cbiere | 2007-09-02 11:43:13 -0400 (Sun, 02 Sep 2007) | 3 lines

 * shared_file_set_sha1(): If debugging show a message when
   there are duplicates.

------------------------------------------------------------------------
r14740 | cbiere | 2007-09-02 10:21:27 -0400 (Sun, 02 Sep 2007) | 3 lines

 * Fixed compile error when GNUTLS support is disabled.
 * svn_release_notification_verify(): Moved some code to verify_signature().

------------------------------------------------------------------------
r14739 | rmanfredi | 2007-09-02 07:45:10 -0400 (Sun, 02 Sep 2007) | 2 lines

3 new items.

------------------------------------------------------------------------
r14738 | cbiere | 2007-09-01 20:37:55 -0400 (Sat, 01 Sep 2007) | 4 lines

 * socket_cork(): Ignore the request if the current setting is identical to
   the requested.
 * socket_free(): Let socket_cork() sort it out.

------------------------------------------------------------------------
r14737 | cbiere | 2007-09-01 20:32:36 -0400 (Sat, 01 Sep 2007) | 2 lines

 * Stick to the "socket_" prefix. A sock is something different anyway.

------------------------------------------------------------------------
r14736 | cbiere | 2007-09-01 20:29:16 -0400 (Sat, 01 Sep 2007) | 2 lines

 * search_request_preprocess(): Don't send OOB results to ourselves.

------------------------------------------------------------------------
r14735 | cbiere | 2007-09-01 19:20:01 -0400 (Sat, 01 Sep 2007) | 3 lines

 * Use a read buffer larger than 4 KiB. This matters for TLS because we
   cannot use sendfile() in that case.

------------------------------------------------------------------------
r14734 | cbiere | 2007-09-01 19:10:31 -0400 (Sat, 01 Sep 2007) | 4 lines

 * Don't try to send more than the maximum record size. The undocumented
   maximum maximum is 16 KiB. If one tries to send more the snarf buffer
   logic fails.

------------------------------------------------------------------------
r14733 | cbiere | 2007-09-01 14:42:03 -0400 (Sat, 01 Sep 2007) | 2 lines

 * download_queue_v(): Moved some code out of the way.

------------------------------------------------------------------------
r14732 | daichik | 2007-09-01 11:14:44 -0400 (Sat, 01 Sep 2007) | 2 lines

Revised/Updated Japanese translations.

------------------------------------------------------------------------
r14731 | cbiere | 2007-09-01 09:19:36 -0400 (Sat, 01 Sep 2007) | 2 lines

 * 3974 new items.

------------------------------------------------------------------------
r14730 | cbiere | 2007-08-31 21:21:02 -0400 (Fri, 31 Aug 2007) | 2 lines

 * Fixed two oversights in previous edit resulting in 100% dysfunction.

------------------------------------------------------------------------
r14729 | rmanfredi | 2007-08-31 15:30:10 -0400 (Fri, 31 Aug 2007) | 2 lines

Trace download filename for X-Thex-Uri header warnings.

------------------------------------------------------------------------
r14728 | rmanfredi | 2007-08-31 15:23:04 -0400 (Fri, 31 Aug 2007) | 5 lines

Make sure we never kill the current upload when calling upload_file_present()
since we're about to return an error message to the upload.  So just kill the
other uploads still referring to a partial file, if needed, but not the one
on the calling chain.

------------------------------------------------------------------------
r14727 | cbiere | 2007-08-31 14:45:27 -0400 (Fri, 31 Aug 2007) | 2 lines

 * 1963 new items.

------------------------------------------------------------------------
r14726 | cbiere | 2007-08-31 14:09:06 -0400 (Fri, 31 Aug 2007) | 2 lines

 * Adjusted spammer ranges.

------------------------------------------------------------------------
r14725 | cbiere | 2007-08-31 12:53:35 -0400 (Fri, 31 Aug 2007) | 4 lines

 * downloads_gui_status_string(): Don't use "default:" in switch statements
   unless you have a very good reason. Ignore GTA_DL_REMOVED and GTA_DL_INVALID
   because it's not really a bug to come across these.

------------------------------------------------------------------------
r14724 | cbiere | 2007-08-31 12:43:57 -0400 (Fri, 31 Aug 2007) | 3 lines

 * download_continue(): Don't "queue" the current download if the user has
   configured more than one download per host.

------------------------------------------------------------------------
r14723 | cbiere | 2007-08-31 06:42:35 -0400 (Fri, 31 Aug 2007) | 3 lines

 * download_check_status(): Don't be so desperate. If they don't implement
   HTTP, they belong in the trash can.

------------------------------------------------------------------------
r14722 | cbiere | 2007-08-30 22:16:29 -0400 (Thu, 30 Aug 2007) | 4 lines

 * download_handle_thex_uri_header(): Pass the known proxies to
   download_thex_start(), otherwise we might not be able to fetch the THEX
   data from a firewalled source.

------------------------------------------------------------------------
r14721 | cbiere | 2007-08-30 22:13:17 -0400 (Thu, 30 Aug 2007) | 2 lines

 * Added gnet_host_vec_from_list().

------------------------------------------------------------------------
r14720 | cbiere | 2007-08-30 22:11:58 -0400 (Thu, 30 Aug 2007) | 2 lines

 * Minor corrections.

------------------------------------------------------------------------
r14719 | cbiere | 2007-08-30 21:55:05 -0400 (Thu, 30 Aug 2007) | 4 lines

 * Refer to the query flags as "flags" instead of "speed" and use big-endian
   for the constants and access in accordance with the specs. There should be
   no functional difference.

------------------------------------------------------------------------
r14718 | cbiere | 2007-08-30 20:40:36 -0400 (Thu, 30 Aug 2007) | 2 lines

 * 1679 new items.

------------------------------------------------------------------------
r14717 | cbiere | 2007-08-30 18:13:15 -0400 (Thu, 30 Aug 2007) | 3 lines

 * Removed variable comment from the head as it destroys the append-only
   property.

------------------------------------------------------------------------
r14716 | rmanfredi | 2007-08-30 17:55:29 -0400 (Thu, 30 Aug 2007) | 2 lines

One more entry.

------------------------------------------------------------------------
r14715 | cbiere | 2007-08-30 15:43:29 -0400 (Thu, 30 Aug 2007) | 2 lines

 * 96 new items.

------------------------------------------------------------------------
r14714 | cbiere | 2007-08-30 13:47:46 -0400 (Thu, 30 Aug 2007) | 2 lines

 * search_results(): Cut the crap.

------------------------------------------------------------------------
r14713 | cbiere | 2007-08-29 18:16:56 -0400 (Wed, 29 Aug 2007) | 4 lines

 * download_close(): Apply download_remove() to all downloads instead of
   download_abort(), otherwise there may still be downloads lingering causing
   an assertion failure.

------------------------------------------------------------------------
r14712 | cbiere | 2007-08-29 17:55:49 -0400 (Wed, 29 Aug 2007) | 3 lines

 * download_remove(): When shutting down, we won't wait for the verification
   to finish.

------------------------------------------------------------------------
r14711 | cbiere | 2007-08-29 17:21:31 -0400 (Wed, 29 Aug 2007) | 3 lines

 * socket_set_accept_filters(): Disable the accept filter on FreeBSD if
   "tcp_defer_accept_timeout" is zero.

------------------------------------------------------------------------
r14710 | cbiere | 2007-08-29 13:27:03 -0400 (Wed, 29 Aug 2007) | 2 lines

 * download_close(): Abort all downloads properly on shutdown.

------------------------------------------------------------------------
r14709 | cbiere | 2007-08-28 06:04:03 -0400 (Tue, 28 Aug 2007) | 2 lines

 * Dato BUMP!

------------------------------------------------------------------------
r14708 | cbiere | 2007-08-27 13:06:16 -0400 (Mon, 27 Aug 2007) | 3 lines

 * [GTK1] Got rid of duplicated code and sanitized downloading/discarding of
   search results.

------------------------------------------------------------------------
r14707 | rmanfredi | 2007-08-27 01:53:17 -0400 (Mon, 27 Aug 2007) | 2 lines

Removed spurious "\n" in g_message().

------------------------------------------------------------------------
r14706 | cbiere | 2007-08-26 16:23:11 -0400 (Sun, 26 Aug 2007) | 2 lines

 * search_gui_timer(): Update sensitivity of certain buttons periodically.

------------------------------------------------------------------------
r14705 | cbiere | 2007-08-25 13:02:16 -0400 (Sat, 25 Aug 2007) | 2 lines

 * Edited comment. It does not matter whose ISP is at fault.

------------------------------------------------------------------------
r14704 | rmanfredi | 2007-08-25 12:55:30 -0400 (Sat, 25 Aug 2007) | 2 lines

Changed comment.

------------------------------------------------------------------------
r14703 | cbiere | 2007-08-25 12:55:07 -0400 (Sat, 25 Aug 2007) | 2 lines

 * download_verify_status_unknown(): Need to call fi_src_status_changed() here.

------------------------------------------------------------------------
r14702 | rmanfredi | 2007-08-25 12:42:22 -0400 (Sat, 25 Aug 2007) | 5 lines

Factorized some error processing code for SHA1 and TTH checking.
If the SHA1 check fails but the TTH is OK, mark the fileinfo as having
a bad bitprint and move the download to the "bad" directory, then pause
the download.

------------------------------------------------------------------------
r14701 | rmanfredi | 2007-08-25 12:09:49 -0400 (Sat, 25 Aug 2007) | 4 lines

Since parq_upload_get() already calls parq_upload_queue_full() when it needs
to create a new entry, it is wrong and harmful to call the latter before
the former.  Hence, removed...

------------------------------------------------------------------------
r14700 | rmanfredi | 2007-08-25 12:02:39 -0400 (Sat, 25 Aug 2007) | 2 lines

Watch out for operator's precedence.

------------------------------------------------------------------------
r14699 | cbiere | 2007-08-25 11:49:22 -0400 (Sat, 25 Aug 2007) | 2 lines

 * Removed duplicate separator from popup menu.

------------------------------------------------------------------------
r14698 | rmanfredi | 2007-08-25 11:43:11 -0400 (Sat, 25 Aug 2007) | 2 lines

Removed support for "ignore.sha1" and "ignore.namesize".

------------------------------------------------------------------------
r14697 | cbiere | 2007-08-25 09:34:18 -0400 (Sat, 25 Aug 2007) | 2 lines

 * Use the same wording in the "Quit" dialogue as with GTK2.

------------------------------------------------------------------------
r14696 | cbiere | 2007-08-25 09:29:25 -0400 (Sat, 25 Aug 2007) | 2 lines

 * fi_gui_file_column_text(): Show all sizes with the same precision.

------------------------------------------------------------------------
r14695 | cbiere | 2007-08-25 09:26:17 -0400 (Sat, 25 Aug 2007) | 2 lines

 * fi_gui_file_column_text(): Show a percent sign.

------------------------------------------------------------------------
r14694 | cbiere | 2007-08-25 09:24:57 -0400 (Sat, 25 Aug 2007) | 2 lines

 * fi_gui_file_column_text(): To two digits or not to two digits.

------------------------------------------------------------------------
r14693 | cbiere | 2007-08-25 08:38:33 -0400 (Sat, 25 Aug 2007) | 2 lines

 * fileinfo_numeric_status(): Simplified and reordered for readability.

------------------------------------------------------------------------
r14692 | rmanfredi | 2007-08-25 08:32:41 -0400 (Sat, 25 Aug 2007) | 3 lines

Now that progress is measured in 10000s, must divide it by 10 for the
purpose of computing the sorting value.

------------------------------------------------------------------------
r14691 | cbiere | 2007-08-25 02:11:19 -0400 (Sat, 25 Aug 2007) | 6 lines

 * Added new vendor message which notifies peers about the latest known SVN
   release. This message is signed. The newest seen message will be stored
   locally and passed to other peers. Therefore discovering a new release
   does not require direct contact with a peer using the new release and
   notifications cannot be faked either.

------------------------------------------------------------------------
r14690 | cbiere | 2007-08-25 02:03:16 -0400 (Sat, 25 Aug 2007) | 6 lines

 * prop_parse_timestamp(): Use date2time().
 * prop_save_to_file():
   * Store timestamps as UTC even though they are displayed according to the
     local timezone.
   * Handle a default of NULL for string properties.

------------------------------------------------------------------------
r14689 | cbiere | 2007-08-25 02:00:25 -0400 (Sat, 25 Aug 2007) | 2 lines

 * Added timestamp_utc_to_string_buf().

------------------------------------------------------------------------
r14688 | cbiere | 2007-08-24 23:02:57 -0400 (Fri, 24 Aug 2007) | 2 lines

 * Make sure we're not asked any funny questions.

------------------------------------------------------------------------
r14687 | cbiere | 2007-08-24 23:01:00 -0400 (Fri, 24 Aug 2007) | 2 lines

 * Configure REQUIRES a tty? What were you smoking?

------------------------------------------------------------------------
r14686 | cbiere | 2007-08-24 18:20:21 -0400 (Fri, 24 Aug 2007) | 3 lines

 * Free the tigertree data once we strip the file as we're not going to use it
   any further.

------------------------------------------------------------------------
r14685 | cbiere | 2007-08-24 18:19:01 -0400 (Fri, 24 Aug 2007) | 2 lines

 * Fixed typo in comment.

------------------------------------------------------------------------
r14684 | cbiere | 2007-08-24 18:18:26 -0400 (Fri, 24 Aug 2007) | 3 lines

 * Removed property alias of "ul_usage_min_percentage" due to typo.
 * Removed property alias of "bw_ul_usage_enabled" due to typo.

------------------------------------------------------------------------
r14683 | rmanfredi | 2007-08-24 17:58:23 -0400 (Fri, 24 Aug 2007) | 2 lines

Fixed typo in ShareMonkey URL creation (sha= instead of sha1=).

------------------------------------------------------------------------
r14682 | cbiere | 2007-08-24 13:34:19 -0400 (Fri, 24 Aug 2007) | 3 lines

 * fi_get_status(): "sha1_hashed" is not a boolean but a progress indicator,
   check for "fi->cha1" to see whether verifying is finished.

------------------------------------------------------------------------
r14681 | cbiere | 2007-08-24 12:13:04 -0400 (Fri, 24 Aug 2007) | 2 lines

 * Resize the first column of the download file details automagically.

------------------------------------------------------------------------
r14680 | cbiere | 2007-08-23 18:48:35 -0400 (Thu, 23 Aug 2007) | 2 lines

 * 346 new items.

------------------------------------------------------------------------
r14679 | cbiere | 2007-08-23 18:30:56 -0400 (Thu, 23 Aug 2007) | 2 lines

 * Removed unused code.

------------------------------------------------------------------------
r14678 | cbiere | 2007-08-23 16:06:59 -0400 (Thu, 23 Aug 2007) | 3 lines

 * parq_download_add_header(): Fixed recently added bug; pass the IPv6
   address with X-Node-IPv6, not the IPv4 address.

------------------------------------------------------------------------
r14677 | cbiere | 2007-08-23 15:59:02 -0400 (Thu, 23 Aug 2007) | 3 lines

 * Allow passing a TTH when creating downloads, so that the TTH is
   actually used if magnet-links provide one.

------------------------------------------------------------------------
r14676 | cbiere | 2007-08-23 15:53:32 -0400 (Thu, 23 Aug 2007) | 2 lines

 * fi_gui_set_details(): Use "External metadata" not "URLs".

------------------------------------------------------------------------
r14675 | cbiere | 2007-08-23 14:42:13 -0400 (Thu, 23 Aug 2007) | 2 lines

 * show_popup_menu(): Applied some rocket-science.

------------------------------------------------------------------------
r14674 | cbiere | 2007-08-23 14:20:07 -0400 (Thu, 23 Aug 2007) | 2 lines

 * search_gui_set_details(): Merged two blocks.

------------------------------------------------------------------------
r14673 | cbiere | 2007-08-23 14:12:08 -0400 (Thu, 23 Aug 2007) | 3 lines

 * Glibberish is deprecated.
 * Put variables into the scope they belong.

------------------------------------------------------------------------
r14672 | rmanfredi | 2007-08-23 13:57:34 -0400 (Thu, 23 Aug 2007) | 2 lines

Made assertions "soft" since those are non-critical routines.

------------------------------------------------------------------------
r14671 | rmanfredi | 2007-08-23 13:37:17 -0400 (Thu, 23 Aug 2007) | 2 lines

Added assertions.

------------------------------------------------------------------------
r14670 | rmanfredi | 2007-08-23 13:34:56 -0400 (Thu, 23 Aug 2007) | 3 lines

Fixed spelling typo.
Call a SHA1 "sha1" for consistency.

------------------------------------------------------------------------
r14669 | rmanfredi | 2007-08-23 13:31:57 -0400 (Thu, 23 Aug 2007) | 2 lines

Add Bitzi and ShareMonkey URLs if we know the SHA1.

------------------------------------------------------------------------
r14668 | rmanfredi | 2007-08-23 13:27:02 -0400 (Thu, 23 Aug 2007) | 2 lines

Use new URL factory routines.

------------------------------------------------------------------------
r14667 | rmanfredi | 2007-08-23 13:25:57 -0400 (Thu, 23 Aug 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r14666 | rmanfredi | 2007-08-23 13:25:38 -0400 (Thu, 23 Aug 2007) | 2 lines

Added url_factory.c.

------------------------------------------------------------------------
r14665 | cbiere | 2007-08-23 13:25:27 -0400 (Thu, 23 Aug 2007) | 2 lines

 * Corrected fileinfo status string.

------------------------------------------------------------------------
r14664 | rmanfredi | 2007-08-23 13:25:23 -0400 (Thu, 23 Aug 2007) | 2 lines

Added URL factory routines.

------------------------------------------------------------------------
r14663 | cbiere | 2007-08-23 13:05:01 -0400 (Thu, 23 Aug 2007) | 2 lines

 * Fixed bug in recent change: The IPv6 header was written over the IPv4 one.

------------------------------------------------------------------------
r14662 | rmanfredi | 2007-08-23 12:54:57 -0400 (Thu, 23 Aug 2007) | 2 lines

Avoid magical constants if we can.

------------------------------------------------------------------------
r14661 | cbiere | 2007-08-23 12:41:55 -0400 (Thu, 23 Aug 2007) | 5 lines

 * struct download: Use time_t for timestamps, not gooint32 or whatever.
 * download_send_request(): Limit the alt-loc buffer to 1 KiB because we
   don't really need to exchange 200 alt-locs per handshake especially as
   we have more efficient HEAD Ping-Pong for that.

------------------------------------------------------------------------
r14660 | cbiere | 2007-08-23 12:37:45 -0400 (Thu, 23 Aug 2007) | 2 lines

 * fi_gui_file_visible(): Don't show files in SEED mode under "finished" too.

------------------------------------------------------------------------
r14659 | cbiere | 2007-08-23 11:48:20 -0400 (Thu, 23 Aug 2007) | 3 lines

 * Added "Created" column for downloads.
 * Removed unused properties and column definitions.

------------------------------------------------------------------------
r14658 | cbiere | 2007-08-23 11:01:43 -0400 (Thu, 23 Aug 2007) | 2 lines

 * file_info_retrieve(): Added comment.

------------------------------------------------------------------------
r14657 | rmanfredi | 2007-08-23 09:13:35 -0400 (Thu, 23 Aug 2007) | 2 lines

Added sanity assertion.

------------------------------------------------------------------------
r14656 | rmanfredi | 2007-08-23 09:11:21 -0400 (Thu, 23 Aug 2007) | 2 lines

Removed spurious "\n" at the end of a g_message().

------------------------------------------------------------------------
r14655 | cbiere | 2007-08-23 01:03:55 -0400 (Thu, 23 Aug 2007) | 5 lines

 * file_info_retrieve(): The tigertree data of incomplete files was discarded
   on each startup because it is only stored in the trailer and information
   from the almighty "fileinfo" file overrides the trailer which of course
   does not contain the tigertree data.

------------------------------------------------------------------------
r14654 | cbiere | 2007-08-23 00:28:14 -0400 (Thu, 23 Aug 2007) | 3 lines

 * create_download(): Fixed wrong assertion. We cannot assume that "sha1" is
   an atom, thus use sha1_eq() instead of pointer comparison.

------------------------------------------------------------------------
r14653 | cbiere | 2007-08-22 23:59:26 -0400 (Wed, 22 Aug 2007) | 6 lines

 * Increased FI_STORE_DELAY to 60 seconds. The tigertree data makes the
   trailer significantly larger and 10 seconds looks too frequent anyway.
 * file_info_store_binary():
   * Check first to avoid opening the file if storing isn't urgent.
   * Moved parameter "force" from file_info_fd_store_binary() to here.

------------------------------------------------------------------------
r14652 | cbiere | 2007-08-22 23:33:27 -0400 (Wed, 22 Aug 2007) | 3 lines

 * file_info_update(): There's no reason to use file_info_fd_store_binary()
   explicitely. Probably an artifact from before file descriptor sharing.

------------------------------------------------------------------------
r14651 | cbiere | 2007-08-22 23:30:27 -0400 (Wed, 22 Aug 2007) | 3 lines

 * I see no reason for marking the fileinfo as "dirty" here. Especially not
   without using an accessor function.

------------------------------------------------------------------------
r14650 | cbiere | 2007-08-22 22:55:48 -0400 (Wed, 22 Aug 2007) | 3 lines

 * file_info_got_tigertree(): Mark the fileinfo as dirty so that the trailer
   is written out on the next occasion.

------------------------------------------------------------------------
r14649 | cbiere | 2007-08-22 22:24:01 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Display the creation time and tigertree information in the download details.

------------------------------------------------------------------------
r14648 | cbiere | 2007-08-22 20:56:23 -0400 (Wed, 22 Aug 2007) | 3 lines

 * whitelist_connect(): Minor fix.
 * Removed unnecessary initializers.

------------------------------------------------------------------------
r14647 | cbiere | 2007-08-22 20:48:22 -0400 (Wed, 22 Aug 2007) | 5 lines

 * Removed "Drop all..."  and "Globally drop all..." from the search result
   context-menu because they can easily cause more harm than do good. It's
   still possible to filter by filenames and addresses of course. The filters
   just have to be created manually just like any other.

------------------------------------------------------------------------
r14646 | cbiere | 2007-08-22 20:42:17 -0400 (Wed, 22 Aug 2007) | 4 lines

 * struct gnet_fi_status:
   * Converted booleans to bit-fields.
   * Added "finished" so that the GUI does not infere this itself.

------------------------------------------------------------------------
r14645 | cbiere | 2007-08-22 20:09:26 -0400 (Wed, 22 Aug 2007) | 2 lines

 * 562 new items.

------------------------------------------------------------------------
r14644 | cbiere | 2007-08-22 19:50:52 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Didn't I already explain ching chang chong spamming is wlong?

------------------------------------------------------------------------
r14643 | cbiere | 2007-08-22 19:27:53 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Use less arcane identifiers.

------------------------------------------------------------------------
r14642 | cbiere | 2007-08-22 19:25:26 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Use less arcane identifiers.

------------------------------------------------------------------------
r14641 | cbiere | 2007-08-22 18:57:45 -0400 (Wed, 22 Aug 2007) | 2 lines

 * file_info_fd_store_binary(): Minor style fix.

------------------------------------------------------------------------
r14640 | cbiere | 2007-08-22 18:36:31 -0400 (Wed, 22 Aug 2007) | 3 lines

 * download_send_head_ping(): Increase the head ping delay if there are many
   "alive" sources.

------------------------------------------------------------------------
r14639 | cbiere | 2007-08-22 17:57:43 -0400 (Wed, 22 Aug 2007) | 3 lines

 * file_info_update(): Corrected assertion. If the chunk status is not
   "busy", there does not have to be any source alive.

------------------------------------------------------------------------
r14638 | cbiere | 2007-08-22 15:51:38 -0400 (Wed, 22 Aug 2007) | 5 lines

 * download_queue_v(): Removed wrong assertion. If we restart a download
   after SHA-1 mismatch from a single source, the download has status
   GTA_DL_DONE (which means dead) and there is no other download alive for
   this file.

------------------------------------------------------------------------
r14637 | cbiere | 2007-08-22 15:12:28 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Make sure fi->lifecount is consistent.

------------------------------------------------------------------------
r14636 | cbiere | 2007-08-22 14:25:41 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Added download_is_alive().

------------------------------------------------------------------------
r14635 | cbiere | 2007-08-22 14:15:36 -0400 (Wed, 22 Aug 2007) | 2 lines

 * show_popup_menu(): Fixed so that right-clicks are not ignored.

------------------------------------------------------------------------
r14634 | cbiere | 2007-08-22 14:08:48 -0400 (Wed, 22 Aug 2007) | 3 lines

 * Added download_set_status(); use this instead of modifying d->status
   directly.

------------------------------------------------------------------------
r14633 | cbiere | 2007-08-22 13:40:42 -0400 (Wed, 22 Aug 2007) | 2 lines

 * fi_gui_file_visible(): Excluded finished files from orphaned.

------------------------------------------------------------------------
r14632 | rmanfredi | 2007-08-22 13:24:35 -0400 (Wed, 22 Aug 2007) | 4 lines

Take the amount of file descriptors into account when making a queueing
decision.  This is a rather static check, because queued entries can be
long-lived.

------------------------------------------------------------------------
r14631 | rmanfredi | 2007-08-22 12:57:00 -0400 (Wed, 22 Aug 2007) | 2 lines

Make sure we always call file_info_changed() in download_stop_v().

------------------------------------------------------------------------
r14630 | cbiere | 2007-08-22 12:21:36 -0400 (Wed, 22 Aug 2007) | 4 lines

 * Removed duplicate file_info_changed() and added missing
   fi_src_status_changed(). Hopefully the return statements in
   download_actively_queued() are correct.

------------------------------------------------------------------------
r14629 | cbiere | 2007-08-22 12:13:24 -0400 (Wed, 22 Aug 2007) | 2 lines

 * download_actively_queued(): Removed style violating whitespace.

------------------------------------------------------------------------
r14628 | cbiere | 2007-08-22 12:09:06 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Moved enum nb_downloads_page to downloads_common.h.

------------------------------------------------------------------------
r14627 | cbiere | 2007-08-22 12:07:59 -0400 (Wed, 22 Aug 2007) | 3 lines

 * search_gui_set_details(): Show the route for browse host results too again
   as the it might differ from the advertized address.

------------------------------------------------------------------------
r14626 | cbiere | 2007-08-22 12:06:22 -0400 (Wed, 22 Aug 2007) | 12 lines

 * download_close(): Call file_info_store() before not after removing the
   downloads because fi->refcount might reach zero preventing it from
   being stored causing loss of attributes such as "paused".
 * Don't map GUI->core functions directly to internally used functions like
   download_start() because there is a big difference.
 * Added a download tab for "orphaned" files.
 * Fixed pausing/resuming; the code could not work as it was because all
   files were unselected, so the request was only applied to the file but
   not to its sources.
 * Moved "enum nb_downloads_page" from notebooks.h because there is no
   reason to expose it elsewhere.

------------------------------------------------------------------------
r14625 | cbiere | 2007-08-22 11:56:29 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Use host_addr_is_routable() instead of is_private_address() here.

------------------------------------------------------------------------
r14624 | cbiere | 2007-08-22 11:54:18 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Set fileinfo_dirty after pausing or resuming a file.

------------------------------------------------------------------------
r14623 | cbiere | 2007-08-22 07:03:40 -0400 (Wed, 22 Aug 2007) | 2 lines

 * Added suspicious addresses.

------------------------------------------------------------------------
r14622 | cbiere | 2007-08-21 20:12:26 -0400 (Tue, 21 Aug 2007) | 2 lines

 * 54 new items.

------------------------------------------------------------------------
r14621 | cbiere | 2007-08-21 20:10:37 -0400 (Tue, 21 Aug 2007) | 2 lines

 * Another hell candidate.

------------------------------------------------------------------------
r14620 | cbiere | 2007-08-21 19:44:10 -0400 (Tue, 21 Aug 2007) | 2 lines

 * 888 new items.

------------------------------------------------------------------------
r14619 | cbiere | 2007-08-21 18:55:02 -0400 (Tue, 21 Aug 2007) | 2 lines

 * I doubt anyone is using this.

------------------------------------------------------------------------
r14618 | cbiere | 2007-08-21 18:49:55 -0400 (Tue, 21 Aug 2007) | 2 lines

 * The Mozilla Public License is not used for any of the current source code.

------------------------------------------------------------------------
r14617 | rmanfredi | 2007-08-21 13:46:37 -0400 (Tue, 21 Aug 2007) | 3 lines

Do not wrongly flag downloads as "Waiting" then the amount of free slots
is negative due to "quick" uploads or other unqueued entries.

------------------------------------------------------------------------
r14616 | cbiere | 2007-08-21 13:28:07 -0400 (Tue, 21 Aug 2007) | 2 lines

 * Let's try the discharger.

------------------------------------------------------------------------
r14615 | cbiere | 2007-08-21 07:58:32 -0400 (Tue, 21 Aug 2007) | 2 lines

 * Kill, all, god, sort, blah.

------------------------------------------------------------------------
r14614 | cbiere | 2007-08-21 00:45:42 -0400 (Tue, 21 Aug 2007) | 2 lines

 * socket_accept(): There had to be a reason it's not called cast_to_sockaddr().

------------------------------------------------------------------------
r14613 | daichik | 2007-08-21 00:36:36 -0400 (Tue, 21 Aug 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14612 | daichik | 2007-08-21 00:35:18 -0400 (Tue, 21 Aug 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14611 | cbiere | 2007-08-20 22:29:54 -0400 (Mon, 20 Aug 2007) | 2 lines

 * socket_accept(): Clear addr before accept() just for the heck of it.

------------------------------------------------------------------------
r14610 | cbiere | 2007-08-20 22:13:21 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Fixed one string for consistency.

------------------------------------------------------------------------
r14609 | cbiere | 2007-08-20 22:11:32 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Updated.

------------------------------------------------------------------------
r14608 | cbiere | 2007-08-20 22:05:28 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Modified a couple of translatable strings.

------------------------------------------------------------------------
r14607 | cbiere | 2007-08-20 21:44:54 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Marked about 80 more strings as translatable.

------------------------------------------------------------------------
r14606 | cbiere | 2007-08-20 19:21:25 -0400 (Mon, 20 Aug 2007) | 4 lines

 * Use X-Node-IPv6: to announce the IPv6 address instead of X-Node: if we have
   an IPv4 address, too, because LimeWire learnt to parse HTTP headers and now
   doesn't like multiple X-Node headers anymore.

------------------------------------------------------------------------
r14605 | cbiere | 2007-08-20 18:25:26 -0400 (Mon, 20 Aug 2007) | 4 lines

 * cproxy_build_request(): Don't use HTTP/1.0 just to save a few bytes. 1.0
   sucks and there have been issues with LimeWire hanging up immediately
   before it sent any response when using HTTP/1.0, too.

------------------------------------------------------------------------
r14604 | cbiere | 2007-08-20 18:15:13 -0400 (Mon, 20 Aug 2007) | 2 lines

 * socket_addr_getpeername(): Minor polish.

------------------------------------------------------------------------
r14603 | cbiere | 2007-08-20 18:14:09 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Another range.

------------------------------------------------------------------------
r14602 | cbiere | 2007-08-20 16:16:38 -0400 (Mon, 20 Aug 2007) | 2 lines

 * node_set_guid(): No warning if not debugging.

------------------------------------------------------------------------
r14601 | cbiere | 2007-08-20 15:26:41 -0400 (Mon, 20 Aug 2007) | 2 lines

 * Added another drop reason.

------------------------------------------------------------------------
r14600 | cbiere | 2007-08-20 15:14:20 -0400 (Mon, 20 Aug 2007) | 3 lines

 * socket_accept(): If we cannot determine the peer address of the incoming
   connection, discard it.

------------------------------------------------------------------------
r14599 | rmanfredi | 2007-08-20 14:55:36 -0400 (Mon, 20 Aug 2007) | 4 lines

Added a queue for files larger than 600 MiB.
When upload is finished normally, flag it with PARQ_UL_NOQUEUE before
requeuing it, to prevent any sending of QUEUE callbacks.

------------------------------------------------------------------------
r14598 | cbiere | 2007-08-20 01:47:32 -0400 (Mon, 20 Aug 2007) | 3 lines

 * socket_accept(): Reinitialize addr_len if accept() is retried, just in
   case it was modified.

------------------------------------------------------------------------
r14597 | cbiere | 2007-08-19 20:55:24 -0400 (Sun, 19 Aug 2007) | 8 lines

 * download_url_for_uri(): Give the push://-URL also if there are no proxy
   servers.
 * download_get_hostname():
   * Always show the IP address, append the hostname in parentheses if known.
   * Show whether the current connection is inbound or outbound.
   * Show TLS instead of "(E)" and show it during the connecting phase as
     well if outbound.

------------------------------------------------------------------------
r14596 | rmanfredi | 2007-08-19 16:48:17 -0400 (Sun, 19 Aug 2007) | 3 lines

Always show file progres with 2 decimal percentages, since for larger files,
the last decimal matters.

------------------------------------------------------------------------
r14595 | cbiere | 2007-08-19 16:30:16 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Added some scum.

------------------------------------------------------------------------
r14594 | daichik | 2007-08-19 15:59:30 -0400 (Sun, 19 Aug 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14593 | daichik | 2007-08-19 15:58:22 -0400 (Sun, 19 Aug 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14592 | cbiere | 2007-08-19 14:57:35 -0400 (Sun, 19 Aug 2007) | 2 lines

 * What's a buil tin?

------------------------------------------------------------------------
r14591 | cbiere | 2007-08-19 14:55:26 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Not eatable maybe? They are surely editable.

------------------------------------------------------------------------
r14590 | cbiere | 2007-08-19 14:50:40 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Fixed typo and order.

------------------------------------------------------------------------
r14589 | cbiere | 2007-08-19 14:46:03 -0400 (Sun, 19 Aug 2007) | 2 lines

 * filter_init_presets(): Fixed overlong line.

------------------------------------------------------------------------
r14588 | rmanfredi | 2007-08-19 14:43:59 -0400 (Sun, 19 Aug 2007) | 2 lines

Initialize the variable, thanks.

------------------------------------------------------------------------
r14587 | rmanfredi | 2007-08-19 14:43:21 -0400 (Sun, 19 Aug 2007) | 2 lines

Try to initialize an ETA using another queue.

------------------------------------------------------------------------
r14586 | cbiere | 2007-08-19 14:38:36 -0400 (Sun, 19 Aug 2007) | 2 lines

 * parq_upload_update_eta(): STFU.

------------------------------------------------------------------------
r14585 | cbiere | 2007-08-19 14:29:56 -0400 (Sun, 19 Aug 2007) | 2 lines

 * add_column(): Use auto-sizing so that the columns are readable by default.

------------------------------------------------------------------------
r14584 | cbiere | 2007-08-19 14:28:54 -0400 (Sun, 19 Aug 2007) | 3 lines

 * filter_preset_init(): If the filter exists, discard all rules and create 
   them again.

------------------------------------------------------------------------
r14583 | bpringlemeir | 2007-08-19 13:58:04 -0400 (Sun, 19 Aug 2007) | 2 lines

Use more generic Literature over "books".

------------------------------------------------------------------------
r14582 | bpringlemeir | 2007-08-19 13:54:54 -0400 (Sun, 19 Aug 2007) | 2 lines

Post script is as (more) important than djvu, lit and doc.

------------------------------------------------------------------------
r14581 | bpringlemeir | 2007-08-19 13:52:30 -0400 (Sun, 19 Aug 2007) | 2 lines

Fix snafu in NLS support of my previous commit.

------------------------------------------------------------------------
r14580 | cbiere | 2007-08-19 13:35:12 -0400 (Sun, 19 Aug 2007) | 4 lines

 * filter_preset_init():
   * Use "size - 1" for the rule.
   * Whitespace clean-up.

------------------------------------------------------------------------
r14579 | bpringlemeir | 2007-08-19 13:08:22 -0400 (Sun, 19 Aug 2007) | 2 lines

Added "<Books>" and "<Archives>" filters.

------------------------------------------------------------------------
r14578 | cbiere | 2007-08-19 12:48:43 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Increased debug level thresholds.

------------------------------------------------------------------------
r14577 | rmanfredi | 2007-08-19 12:47:27 -0400 (Sun, 19 Aug 2007) | 2 lines

Assume we have at least 1 KiB/s of outgoing b/w for ETA computation.

------------------------------------------------------------------------
r14576 | rmanfredi | 2007-08-19 12:20:44 -0400 (Sun, 19 Aug 2007) | 2 lines

Removed harmful assertion and flagged the code as requiring rework.

------------------------------------------------------------------------
r14575 | rmanfredi | 2007-08-19 11:56:33 -0400 (Sun, 19 Aug 2007) | 4 lines

Forgot to reset the status to GTA_UL_QUEUED on actively queued entries,
causing further replies to close the connection.  Not harmful for GTKGs, but
possibly for other servents.

------------------------------------------------------------------------
r14574 | rmanfredi | 2007-08-19 11:53:29 -0400 (Sun, 19 Aug 2007) | 2 lines

Added debugging trace to show the upload status upon error.

------------------------------------------------------------------------
r14573 | cbiere | 2007-08-19 11:53:18 -0400 (Sun, 19 Aug 2007) | 2 lines

 * More delta_time().

------------------------------------------------------------------------
r14572 | rmanfredi | 2007-08-19 11:12:50 -0400 (Sun, 19 Aug 2007) | 4 lines

Also save expired entries in the PARQ file: that's the whole point!
Be nicer about retry-after not being honoured: decrement the counter once they
make a request (by chance?) that respects it.

------------------------------------------------------------------------
r14571 | cbiere | 2007-08-19 11:01:48 -0400 (Sun, 19 Aug 2007) | 2 lines

 * fi_gui_show_info(): Let fi_gui_set_details() fetch the info struct.

------------------------------------------------------------------------
r14570 | cbiere | 2007-08-19 10:46:28 -0400 (Sun, 19 Aug 2007) | 3 lines

 * gui_parse_geometry_spec(): Allow omitting the dimensions too, if the
   window should only be positioned but not resized.

------------------------------------------------------------------------
r14569 | rmanfredi | 2007-08-19 10:43:26 -0400 (Sun, 19 Aug 2007) | 2 lines

Fixed typo explaining why the passive count was incorrect in the Status column.

------------------------------------------------------------------------
r14568 | cbiere | 2007-08-19 10:17:48 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Don't track the cursor in sources list.

------------------------------------------------------------------------
r14567 | rmanfredi | 2007-08-19 10:07:53 -0400 (Sun, 19 Aug 2007) | 6 lines

Use GTA_DL_PASSIVE_QUEUED when passively queued.
Make sure we call dmesh_multiple_downloads() from create_download() and only
when directed to do so to avoid useless recursions through download_auto_new().
Call file_info_changed() when the active/passive queueing information change,
in an attempt to have the information updated in the GUI Status column.

------------------------------------------------------------------------
r14566 | rmanfredi | 2007-08-19 10:05:14 -0400 (Sun, 19 Aug 2007) | 4 lines

Must not call dmesh_multiple_downloads() from file_info_get() or it can
cause nasty cascading via download_auto_new() and worse, can cause the
creation of several identical downloads, which is a no-no when PARQ is involed.

------------------------------------------------------------------------
r14565 | cbiere | 2007-08-19 10:04:28 -0400 (Sun, 19 Aug 2007) | 3 lines

 * Added guc_fi_pause() and guc_fi_resume(). We need this to pause/resume
   files with no sources.

------------------------------------------------------------------------
r14564 | cbiere | 2007-08-19 09:45:53 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Use file_info_pause() and file_info_resume().

------------------------------------------------------------------------
r14563 | cbiere | 2007-08-19 09:45:05 -0400 (Sun, 19 Aug 2007) | 3 lines

 * cproxy_create(): Use index zero instead of URN_INDEX. LimeWire does not
   seem to like the latter and it should not really matter anyway.

------------------------------------------------------------------------
r14562 | cbiere | 2007-08-19 09:35:16 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Added file_info_pause() and file_info_resume() to set/clear FI_F_PAUSE.

------------------------------------------------------------------------
r14561 | cbiere | 2007-08-19 09:33:49 -0400 (Sun, 19 Aug 2007) | 2 lines

 * update_neighbour_info(): Don't accept the address if the GUID is blank.

------------------------------------------------------------------------
r14560 | cbiere | 2007-08-19 09:33:09 -0400 (Sun, 19 Aug 2007) | 2 lines

 * fi_gui_source_get_progress(): Removed glibberish.

------------------------------------------------------------------------
r14559 | cbiere | 2007-08-19 08:14:40 -0400 (Sun, 19 Aug 2007) | 2 lines

 * Added some gnoozler.

------------------------------------------------------------------------
r14558 | rmanfredi | 2007-08-19 07:24:37 -0400 (Sun, 19 Aug 2007) | 2 lines

Was not sending X-Token to GTKG peers when requesting a THEX.

------------------------------------------------------------------------
r14557 | rmanfredi | 2007-08-19 07:04:56 -0400 (Sun, 19 Aug 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r14556 | rmanfredi | 2007-08-19 06:05:05 -0400 (Sun, 19 Aug 2007) | 2 lines

Further PARQ experiments.

------------------------------------------------------------------------
r14555 | cbiere | 2007-08-18 23:51:47 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Added three pre-configured search filters.

------------------------------------------------------------------------
r14554 | cbiere | 2007-08-18 19:47:42 -0400 (Sat, 18 Aug 2007) | 3 lines

 * Use flags to decide whether a filter is global or bultin instead of
   comparing addresses.

------------------------------------------------------------------------
r14553 | cbiere | 2007-08-18 19:31:39 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Removed unnecessary initializers.

------------------------------------------------------------------------
r14552 | cbiere | 2007-08-18 19:22:59 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Use cleaner casts.

------------------------------------------------------------------------
r14551 | cbiere | 2007-08-18 19:22:16 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Nullify pointers after memory release.

------------------------------------------------------------------------
r14550 | cbiere | 2007-08-18 19:21:18 -0400 (Sat, 18 Aug 2007) | 2 lines

 * filter_init(): Less repetitive code.

------------------------------------------------------------------------
r14549 | cbiere | 2007-08-18 19:19:56 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Use search_gui_column_title() and search_gui_column_justify_right().

------------------------------------------------------------------------
r14548 | cbiere | 2007-08-18 18:02:48 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Added search_gui_column_title() and search_gui_column_justify_right().

------------------------------------------------------------------------
r14547 | cbiere | 2007-08-18 17:49:35 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Simplified check.

------------------------------------------------------------------------
r14546 | cbiere | 2007-08-18 17:48:35 -0400 (Sat, 18 Aug 2007) | 4 lines

 * handle_features_supported():
   * Accept this over TCP only.
   * Use node_supports_tls().

------------------------------------------------------------------------
r14545 | cbiere | 2007-08-18 17:45:25 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Added node_supports_tls().

------------------------------------------------------------------------
r14544 | cbiere | 2007-08-18 16:49:33 -0400 (Sat, 18 Aug 2007) | 2 lines

 * get_results_set(): Avoid false-positives.

------------------------------------------------------------------------
r14543 | cbiere | 2007-08-18 14:13:33 -0400 (Sat, 18 Aug 2007) | 2 lines

 * node_set_guid(): Disallow a blank GUID.

------------------------------------------------------------------------
r14542 | cbiere | 2007-08-18 14:09:47 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Added missing #include for lib/override.h.

------------------------------------------------------------------------
r14541 | rmanfredi | 2007-08-18 09:26:48 -0400 (Sat, 18 Aug 2007) | 2 lines

Added parq_upload_insert_relative() and parq_upload_remove_relative().

------------------------------------------------------------------------
r14540 | cbiere | 2007-08-18 09:05:44 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Let's nuke the whole block.

------------------------------------------------------------------------
r14539 | rmanfredi | 2007-08-18 08:52:16 -0400 (Sat, 18 Aug 2007) | 3 lines

When marking an entry alive again, do not re-insert it in the by_rel_pos
list if the entry is also marked as frozen.

------------------------------------------------------------------------
r14538 | cbiere | 2007-08-18 08:08:47 -0400 (Sat, 18 Aug 2007) | 2 lines

 * Added some nip.

------------------------------------------------------------------------
r14537 | rmanfredi | 2007-08-18 08:00:43 -0400 (Sat, 18 Aug 2007) | 2 lines

Added bug catcher for duplicate entries in rel_pos.

------------------------------------------------------------------------
r14536 | cbiere | 2007-08-18 07:10:42 -0400 (Sat, 18 Aug 2007) | 5 lines

 * Use the street-crossing algorithm:
    * Check first, then walk.
   and NOT:
    * First walk, then check if still alive.

------------------------------------------------------------------------
r14535 | rmanfredi | 2007-08-18 06:12:49 -0400 (Sat, 18 Aug 2007) | 2 lines

Make sure quick uploads are not frozen.

------------------------------------------------------------------------
r14534 | rmanfredi | 2007-08-18 05:08:43 -0400 (Sat, 18 Aug 2007) | 2 lines

Optimize.

------------------------------------------------------------------------
r14533 | rmanfredi | 2007-08-18 05:06:19 -0400 (Sat, 18 Aug 2007) | 5 lines

PARQ now freezes concurrent entries from the same IP when the maximum amout
of upload slots has been used.  Frozen entries are no longer considered for
scheduling but retain their queue position and can remain actively queued.
Removed obsolete parq_upload_addr_can_proceed() check now.

------------------------------------------------------------------------
r14532 | cbiere | 2007-08-18 03:41:31 -0400 (Sat, 18 Aug 2007) | 2 lines

 * parq_upload_update_eta(): Marked bugs with laser.

------------------------------------------------------------------------
r14531 | cbiere | 2007-08-17 22:20:21 -0400 (Fri, 17 Aug 2007) | 2 lines

 * Removed unused function uploads_gui_early_init().

------------------------------------------------------------------------
r14530 | cbiere | 2007-08-17 21:09:00 -0400 (Fri, 17 Aug 2007) | 2 lines

 * 414 new items.

------------------------------------------------------------------------
r14529 | cbiere | 2007-08-17 20:34:55 -0400 (Fri, 17 Aug 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14528 | cbiere | 2007-08-17 20:01:28 -0400 (Fri, 17 Aug 2007) | 3 lines

 * Added node_tls_refresh() to eliminate warning from tls_cache_insert()
   and to refresh the peer less frequently.

------------------------------------------------------------------------
r14527 | cbiere | 2007-08-17 19:59:31 -0400 (Fri, 17 Aug 2007) | 3 lines

 * Added tls_cache_get_timestamp().
 * Store the cache contents periodically to disk.

------------------------------------------------------------------------
r14526 | rmanfredi | 2007-08-17 19:58:36 -0400 (Fri, 17 Aug 2007) | 2 lines

Must log after initializing, dammit.

------------------------------------------------------------------------
r14525 | cbiere | 2007-08-17 19:53:02 -0400 (Fri, 17 Aug 2007) | 3 lines

 * Use time_advance() instead of a barbaric '+'.
 * Don't cast to signed integers, there could always be an integer overflow.

------------------------------------------------------------------------
r14524 | cbiere | 2007-08-17 19:40:34 -0400 (Fri, 17 Aug 2007) | 3 lines

 * Removed unused uploads_gui_early_init().
 * [GTK2] Re-added display refresh callback for the uploads GUI.

------------------------------------------------------------------------
r14523 | rmanfredi | 2007-08-17 19:36:51 -0400 (Fri, 17 Aug 2007) | 3 lines

Upload scheduling constant tuning.
Upon PARQ queue retrieval, give more time for the entries to expire.

------------------------------------------------------------------------
r14522 | cbiere | 2007-08-17 18:37:43 -0400 (Fri, 17 Aug 2007) | 2 lines

 * 375 new items.

------------------------------------------------------------------------
r14521 | cbiere | 2007-08-17 18:30:50 -0400 (Fri, 17 Aug 2007) | 2 lines

 * Added missing dependency.

------------------------------------------------------------------------
r14520 | cbiere | 2007-08-17 18:30:06 -0400 (Fri, 17 Aug 2007) | 2 lines

 * Added compile-time check for sockaddr_in.sin_len.

------------------------------------------------------------------------
r14519 | cbiere | 2007-08-17 17:45:30 -0400 (Fri, 17 Aug 2007) | 2 lines

 * socket_accept(): Added assertion check.

------------------------------------------------------------------------
r14518 | rmanfredi | 2007-08-17 17:01:47 -0400 (Fri, 17 Aug 2007) | 4 lines

Must use parq_upload_recompute_relative_positions() in parq_upload_remove()
since we can insert something at a slot number much larger than the actual
queue length.

------------------------------------------------------------------------
r14517 | rmanfredi | 2007-08-17 15:26:10 -0400 (Fri, 17 Aug 2007) | 5 lines

Number the queues and keep track of their count.  That way, we don't have
to ever use costly g_list_find() to get their number, especially during
the storing of PARQ queues!
Removed useless snippet of code in parq_upload_remove().

------------------------------------------------------------------------
r14516 | rmanfredi | 2007-08-17 14:33:22 -0400 (Fri, 17 Aug 2007) | 6 lines

Changed the way we compute the amount of free slots for a queue, to be fair.
Abstracted that computation if free_upload_slots().
When re-inserting a completed upload in the by_rel_pos list, do so at a position
after the free slot limit for that queue, to avoid penalizing waiting uploads
that are going to be scheduled normally at the next request they make.

------------------------------------------------------------------------
r14515 | cbiere | 2007-08-17 13:49:30 -0400 (Fri, 17 Aug 2007) | 3 lines

 * struct parq_ul_queue: Renamed member "size" to "by_position_length" to
   match the new semantics.

------------------------------------------------------------------------
r14514 | cbiere | 2007-08-17 13:25:08 -0400 (Fri, 17 Aug 2007) | 2 lines

 * Removed duplicate range.

------------------------------------------------------------------------
r14513 | cbiere | 2007-08-17 13:23:06 -0400 (Fri, 17 Aug 2007) | 3 lines

 * parq_upload_recompute_relative_positions(): Removed assertions because
   this code always works.

------------------------------------------------------------------------
r14512 | cbiere | 2007-08-17 13:03:28 -0400 (Fri, 17 Aug 2007) | 4 lines

 * parq_upload_recompute_relative_positions():
   * Carpetized wrong assertion.
   * Added more reasonable assertion.

------------------------------------------------------------------------
r14511 | cbiere | 2007-08-17 11:37:54 -0400 (Fri, 17 Aug 2007) | 5 lines

 * Use "command -v" instead of "which" because the latter does not seem to
   indicate failure sometimes. It's okay if some ancient shell does not support
   "command -v" because only false-positives are problematic. Detection can be
   overriden anyway.

------------------------------------------------------------------------
r14510 | rmanfredi | 2007-08-17 03:19:22 -0400 (Fri, 17 Aug 2007) | 5 lines

When PARQ is optimistic, use the largest b/w output we can figure out for
computing ETAs.
Forgot to set the expiration time for uploads we put back at slot #1 after
a disconnect/completion.

------------------------------------------------------------------------
r14509 | rmanfredi | 2007-08-17 02:57:35 -0400 (Fri, 17 Aug 2007) | 5 lines

Removed useless loop for upload scheduling test 3: it now comes down to a
simple comparison test.
Forgot to test for slots_free being positive before using it via UNSIGNED()
in previous commit: In effect, the upload slots were no longer bounded!

------------------------------------------------------------------------
r14508 | cbiere | 2007-08-16 22:53:10 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Mixing -E with $ccflags might not be a good idea.

------------------------------------------------------------------------
r14507 | cbiere | 2007-08-16 22:19:47 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Minor simplification.

------------------------------------------------------------------------
r14506 | cbiere | 2007-08-16 22:18:36 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r14505 | cbiere | 2007-08-16 21:33:09 -0400 (Thu, 16 Aug 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r14504 | cbiere | 2007-08-16 21:23:43 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r14503 | rmanfredi | 2007-08-16 19:06:56 -0400 (Thu, 16 Aug 2007) | 2 lines

Removed needless and harmful check now that we take quick slots into account.

------------------------------------------------------------------------
r14502 | rmanfredi | 2007-08-16 18:53:01 -0400 (Thu, 16 Aug 2007) | 2 lines

New property "ul_quick_running".

------------------------------------------------------------------------
r14501 | rmanfredi | 2007-08-16 18:52:22 -0400 (Thu, 16 Aug 2007) | 3 lines

PARQ now takes the amount of quick uploads running when determining the
number of available upload slots (quick slots are transient, by definition).

------------------------------------------------------------------------
r14500 | cbiere | 2007-08-16 17:20:45 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Added some compile-time checks, just in case.

------------------------------------------------------------------------
r14499 | cbiere | 2007-08-16 17:19:02 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Avoid casts.

------------------------------------------------------------------------
r14498 | rmanfredi | 2007-08-16 17:15:34 -0400 (Thu, 16 Aug 2007) | 5 lines

Fixed scheduling bug that prevented PARQ from allowing a "Waiting" upload
(i.e. an upload at a position such that the amount of free slots guarantees
it should be scheduled).  The bug was happening because PARQ was not processing
events for EOF on an actively queued upload.

------------------------------------------------------------------------
r14497 | rmanfredi | 2007-08-16 16:20:49 -0400 (Thu, 16 Aug 2007) | 8 lines

Changed management of the "relative position" list: we now remove running
uploads from there, so that others waiting can be properly scheduled.
Reset the "had_slot" flag when upload is aborted during sending, to re-enable
the persistence.
Put back completed upload as slot #1 in the "relative position" list until
it expires, so that remote host can reclaim the slot in the advent it needs
further data, within some short time.

------------------------------------------------------------------------
r14496 | cbiere | 2007-08-16 15:15:16 -0400 (Thu, 16 Aug 2007) | 2 lines

 * 511 new items.

------------------------------------------------------------------------
r14495 | cbiere | 2007-08-16 13:14:16 -0400 (Thu, 16 Aug 2007) | 2 lines

 * upload_timer(): Readability++.

------------------------------------------------------------------------
r14494 | cbiere | 2007-08-16 12:47:15 -0400 (Thu, 16 Aug 2007) | 2 lines

 * anti_window_shift_hack(): Improved readability.

------------------------------------------------------------------------
r14493 | cbiere | 2007-08-16 12:25:01 -0400 (Thu, 16 Aug 2007) | 2 lines

 * anti_window_shift_hack(): Problem reproduced with fvwm2; works for me.

------------------------------------------------------------------------
r14492 | rmanfredi | 2007-08-16 12:05:58 -0400 (Thu, 16 Aug 2007) | 4 lines

Make sure pollMax is set well-before the lifetime expiration, to prevent
network delays from making them requery too late. In particular, BearShare
hosts requery near the pollMax time.

------------------------------------------------------------------------
r14491 | cbiere | 2007-08-16 12:05:46 -0400 (Thu, 16 Aug 2007) | 2 lines

 * anti_window_shift_hack(): Print some debug messages if the window is moved.

------------------------------------------------------------------------
r14490 | rmanfredi | 2007-08-16 12:04:47 -0400 (Thu, 16 Aug 2007) | 2 lines

Shut-up compiler warning.

------------------------------------------------------------------------
r14489 | cbiere | 2007-08-16 11:38:47 -0400 (Thu, 16 Aug 2007) | 2 lines

 * anti_window_shift_hack(): Fixed typo causing a wrong y-coordinate.

------------------------------------------------------------------------
r14488 | cbiere | 2007-08-16 11:36:54 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Slightly modified for less #if.

------------------------------------------------------------------------
r14487 | cbiere | 2007-08-16 10:20:01 -0400 (Thu, 16 Aug 2007) | 2 lines

 * Applied changes to Configure back to the relevant modules.

------------------------------------------------------------------------
r14486 | rmanfredi | 2007-08-16 10:18:45 -0400 (Thu, 16 Aug 2007) | 5 lines

Fixed broken timeout logic preventing active queueing from completing.
Fixed broken free slot computation.
Minor rework in PARQ's relative position computing.
Minor changes to the logs to better follow what's going on.

------------------------------------------------------------------------
r14485 | cbiere | 2007-08-16 09:35:45 -0400 (Thu, 16 Aug 2007) | 3 lines

 * Don't preserve config.sh. This "feature" of Configure has always been broken
   and fucked up beyond recognition.

------------------------------------------------------------------------
r14484 | cbiere | 2007-08-15 21:50:44 -0400 (Wed, 15 Aug 2007) | 2 lines

 * node_set_guid(): Show the correct vendor string of the owner.

------------------------------------------------------------------------
r14483 | cbiere | 2007-08-15 21:13:54 -0400 (Wed, 15 Aug 2007) | 2 lines

 * routing_init(): Don't tag GUIDs as "modern" anymore.

------------------------------------------------------------------------
r14482 | cbiere | 2007-08-15 20:21:52 -0400 (Wed, 15 Aug 2007) | 2 lines

 * 66 new items.

------------------------------------------------------------------------
r14481 | bpringlemeir | 2007-08-15 20:14:13 -0400 (Wed, 15 Aug 2007) | 2 lines

Added magnet-handler.sh notes to the manual.

------------------------------------------------------------------------
r14480 | cbiere | 2007-08-15 17:48:33 -0400 (Wed, 15 Aug 2007) | 2 lines

 * 655 new items.

------------------------------------------------------------------------
r14479 | cbiere | 2007-08-15 15:21:10 -0400 (Wed, 15 Aug 2007) | 2 lines

 * 470 new items.

------------------------------------------------------------------------
r14478 | cbiere | 2007-08-15 14:18:13 -0400 (Wed, 15 Aug 2007) | 2 lines

 * Avoid gtk_tree_view_get_headers_clickable() as it requires Gtk+ 2.10.

------------------------------------------------------------------------
r14477 | cbiere | 2007-08-15 13:22:18 -0400 (Wed, 15 Aug 2007) | 2 lines

 * Keep a backup of config.sh if it exists, just in case.

------------------------------------------------------------------------
r14476 | cbiere | 2007-08-15 10:00:37 -0400 (Wed, 15 Aug 2007) | 2 lines

 * Check $optimize too.

------------------------------------------------------------------------
r14475 | cbiere | 2007-08-15 09:34:01 -0400 (Wed, 15 Aug 2007) | 3 lines

 * When modifying ccflags, prepend to it so that the user has a chance to
   override them.

------------------------------------------------------------------------
r14474 | cbiere | 2007-08-15 09:12:39 -0400 (Wed, 15 Aug 2007) | 2 lines

 * Tell Configure to use "dylib" as shared object suffix on Darwin.

------------------------------------------------------------------------
r14473 | cbiere | 2007-08-14 23:43:47 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Readded some options now that build.sh has more switches.

------------------------------------------------------------------------
r14472 | cbiere | 2007-08-14 22:56:47 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Disable use of nm.

------------------------------------------------------------------------
r14471 | cbiere | 2007-08-14 21:07:10 -0400 (Tue, 14 Aug 2007) | 4 lines

 * Do not change the current search if the cursor in the search list is moved
   but only on a left-click or Enter.
 * Do not move the cursor to the selected search, instead mark it as active.

------------------------------------------------------------------------
r14470 | cbiere | 2007-08-14 20:54:51 -0400 (Tue, 14 Aug 2007) | 2 lines

 * show_popup_menu(): Fixed display of popup menus with Gtk+ 1.2.

------------------------------------------------------------------------
r14469 | cbiere | 2007-08-14 20:52:50 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Removed unused properties.

------------------------------------------------------------------------
r14468 | cbiere | 2007-08-14 20:51:28 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Removed unused definitions.

------------------------------------------------------------------------
r14467 | cbiere | 2007-08-14 18:50:35 -0400 (Tue, 14 Aug 2007) | 4 lines

 * Removed debug echo.
 * Replace [ ] with test.
 * Use normal while loop as an empty argument is already ruled out.

------------------------------------------------------------------------
r14466 | cbiere | 2007-08-14 18:41:21 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Hopefully fixed Configure's option parsing. Didn't really test the -A stuff.

------------------------------------------------------------------------
r14465 | cbiere | 2007-08-14 16:23:27 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Use standard variables directly rather than aliases.

------------------------------------------------------------------------
r14464 | cbiere | 2007-08-14 15:43:37 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Fixed bug: Remove the smallest prefix not the longest.

------------------------------------------------------------------------
r14463 | cbiere | 2007-08-14 15:23:41 -0400 (Tue, 14 Aug 2007) | 3 lines

 * Added some switches so that environment variables don't have to be used
   and can be overriden.

------------------------------------------------------------------------
r14462 | cbiere | 2007-08-14 13:21:37 -0400 (Tue, 14 Aug 2007) | 2 lines

 * 429 new items.

------------------------------------------------------------------------
r14461 | cbiere | 2007-08-14 08:53:26 -0400 (Tue, 14 Aug 2007) | 1 line


------------------------------------------------------------------------
r14460 | cbiere | 2007-08-14 07:45:29 -0400 (Tue, 14 Aug 2007) | 2 lines

 * search_result.h not search_record.h.

------------------------------------------------------------------------
r14459 | cbiere | 2007-08-14 01:31:34 -0400 (Tue, 14 Aug 2007) | 3 lines

 * search_gui_search_list_clicked(): Switch to the search pane even if the
   cursor is inactive.

------------------------------------------------------------------------
r14458 | cbiere | 2007-08-14 00:57:15 -0400 (Tue, 14 Aug 2007) | 2 lines

 * Rearranged the anti window shift hack and removed the usleep().

------------------------------------------------------------------------
r14457 | cbiere | 2007-08-14 00:23:12 -0400 (Tue, 14 Aug 2007) | 16 lines

 * Added check_gtk_version().
 * status_icon_enable(): Check the runtime Gtk+ version too, just in case
   it was built against a newer library than the loaded one.
 * filter_new_ip_rule(): Clamp the CIDR mask. Matters for display only.
 * Merged some more search GUI code.
 * Moved code and prototypes around because search_common.h was included in
   too many places. It should be included by gtk/gtk*/search*.c only. Others
   should only include gtk/search.h which is the public interface.
 * Added gtk/search_record.h so that the filter code can access
   struct record directly, just for better performance.
 * Fixed display of search result counters in the list and tabs.
 * Avoid using search_gui_get_current_search(), pass a struct search instead.
 * Corrected display of IPv6 addresses when browsing hosts by address to
   include the brackets '[' ']' so that the port isn't read as part of the
   address.

------------------------------------------------------------------------
r14456 | cbiere | 2007-08-13 12:12:25 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r14455 | cbiere | 2007-08-13 12:01:20 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Colors in the search list should now be correct.

------------------------------------------------------------------------
r14454 | cbiere | 2007-08-13 11:51:46 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Removed capitals.

------------------------------------------------------------------------
r14453 | cbiere | 2007-08-13 11:48:52 -0400 (Mon, 13 Aug 2007) | 4 lines

 * Update the search list only periodically. Also the search list is not
   strictly a part of the search GUI, thus don't use search_gui_is_visible()
   to avoid updates here.

------------------------------------------------------------------------
r14452 | cbiere | 2007-08-13 11:10:27 -0400 (Mon, 13 Aug 2007) | 6 lines

 * Use widget_add_popup_menu() so that popup menus are also accessible via
   the keyboard by pressing Shift + F10. This does not work perfectly with
   Gtk+ 1.2 as empty trees or lists sometimes seem to receive no keyboard
   events.
 * Merged more code of the search GUI.

------------------------------------------------------------------------
r14451 | cbiere | 2007-08-13 11:01:12 -0400 (Mon, 13 Aug 2007) | 3 lines

 * Gtk+ 1.2 has no status icon support therefore there is no
   "checkbutton_status_icon_enabled".

------------------------------------------------------------------------
r14450 | cbiere | 2007-08-13 10:31:51 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Disabled WINDOW_SHIFT_HACK temporarily.

------------------------------------------------------------------------
r14449 | cbiere | 2007-08-13 10:30:18 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Added widget_add_popup_menu().

------------------------------------------------------------------------
r14448 | cbiere | 2007-08-13 10:24:57 -0400 (Mon, 13 Aug 2007) | 3 lines

 * main_gui_run(): Map the main window immediately. Otherwise restoring of
   coordinates might not work at all.

------------------------------------------------------------------------
r14447 | cbiere | 2007-08-13 10:23:58 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Added some comment.

------------------------------------------------------------------------
r14446 | cbiere | 2007-08-13 10:06:15 -0400 (Mon, 13 Aug 2007) | 3 lines

 * Removed do_stat() hack. We should be able to assume that someone donated
   a working stat() implementation to Lunix during the last 4 years.

------------------------------------------------------------------------
r14445 | cbiere | 2007-08-13 09:43:56 -0400 (Mon, 13 Aug 2007) | 3 lines

 * unique_filename(): If "path" is no directory (or not accessible) there is
   no point in continuing.

------------------------------------------------------------------------
r14444 | cbiere | 2007-08-13 09:42:37 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Don't abort if file_info_new_outname() fails.

------------------------------------------------------------------------
r14443 | cbiere | 2007-08-13 08:55:09 -0400 (Mon, 13 Aug 2007) | 2 lines

 * 981 new items.

------------------------------------------------------------------------
r14442 | daichik | 2007-08-13 08:21:49 -0400 (Mon, 13 Aug 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14441 | daichik | 2007-08-13 08:18:34 -0400 (Mon, 13 Aug 2007) | 2 lines

Changed the place where "shell.h" is included.

------------------------------------------------------------------------
r14440 | rmanfredi | 2007-08-13 07:38:47 -0400 (Mon, 13 Aug 2007) | 2 lines

Fixed leading comment.

------------------------------------------------------------------------
r14439 | cbiere | 2007-08-13 07:27:44 -0400 (Mon, 13 Aug 2007) | 2 lines

 * Corrected generate commands.

------------------------------------------------------------------------
r14438 | rmanfredi | 2007-08-13 06:31:55 -0400 (Mon, 13 Aug 2007) | 4 lines

Moved all shell commands to a dedicated directory.
Use a smaller filename for shell commands now that they are in their
own private directory.

------------------------------------------------------------------------
r14437 | rmanfredi | 2007-08-13 06:30:06 -0400 (Mon, 13 Aug 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r14436 | rmanfredi | 2007-08-13 06:29:02 -0400 (Mon, 13 Aug 2007) | 2 lines

Added subdirectory "shell".

------------------------------------------------------------------------
r14435 | rmanfredi | 2007-08-13 06:26:25 -0400 (Mon, 13 Aug 2007) | 2 lines

Moved shell commands in dedicated directory.

------------------------------------------------------------------------
r14434 | rmanfredi | 2007-08-13 05:58:30 -0400 (Mon, 13 Aug 2007) | 2 lines

Temporary commit -- build broken.

------------------------------------------------------------------------
r14433 | rmanfredi | 2007-08-13 05:43:06 -0400 (Mon, 13 Aug 2007) | 2 lines

Fixed English.

------------------------------------------------------------------------
r14432 | cbiere | 2007-08-12 22:16:41 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Note to brain: First diff, then commit.

------------------------------------------------------------------------
r14431 | cbiere | 2007-08-12 21:50:54 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r14430 | cbiere | 2007-08-12 20:32:24 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Set FD_CLOEXEC on all file descriptors.

------------------------------------------------------------------------
r14429 | cbiere | 2007-08-12 20:30:26 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Reserve file descriptors 0, 1 and 2. Make sure they are opened.

------------------------------------------------------------------------
r14428 | cbiere | 2007-08-12 19:04:38 -0400 (Sun, 12 Aug 2007) | 3 lines

 * log_handler(): Don't print any log messages if stderr is redirected to
   /dev/null.

------------------------------------------------------------------------
r14427 | cbiere | 2007-08-12 17:50:28 -0400 (Sun, 12 Aug 2007) | 2 lines

 * socket_enable_recvdstaddr(): Show a better error message.

------------------------------------------------------------------------
r14426 | cbiere | 2007-08-12 17:28:08 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Enable public UHCs again.

------------------------------------------------------------------------
r14425 | cbiere | 2007-08-12 13:05:22 -0400 (Sun, 12 Aug 2007) | 5 lines

 * Use gui_signal_*() macros so that there's no difference between code for
   Gtk+ 1.2 and 2.x and for less casts.
 * Use ascii_strcasecmp() instead of g_ascii_strcasecmp(). GLib 1.2 doesn't
   have the latter, so we don't need a compatibility macro.

------------------------------------------------------------------------
r14424 | cbiere | 2007-08-12 12:36:13 -0400 (Sun, 12 Aug 2007) | 3 lines

 * search_gui_update_list_label(): Suppress compiler warning.
 * Removed unnecessary notebook_search_results.

------------------------------------------------------------------------
r14423 | cbiere | 2007-08-12 12:34:52 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Merged some code.

------------------------------------------------------------------------
r14422 | cbiere | 2007-08-12 11:54:22 -0400 (Sun, 12 Aug 2007) | 3 lines

 * Added a switch to hide the status/tray icon for people who don't like to
   have one.

------------------------------------------------------------------------
r14421 | cbiere | 2007-08-12 11:15:45 -0400 (Sun, 12 Aug 2007) | 2 lines

 * search_gui_update_list_label(): Corrected prototype.

------------------------------------------------------------------------
r14420 | cbiere | 2007-08-12 09:30:07 -0400 (Sun, 12 Aug 2007) | 5 lines

 * search_reissue(): Generate a "status change" event here too.
 * search_start(): Always generate a "status change" event.
 * Cleaned up refreshing of search status information and fixed some smaller
   bugs in it.

------------------------------------------------------------------------
r14419 | cbiere | 2007-08-12 08:48:48 -0400 (Sun, 12 Aug 2007) | 4 lines

 * handle_content_urn(): Don't store the download information immediately.
   This should rarely matter but in the worst case it would degrade to O(n^2)
   performance.

------------------------------------------------------------------------
r14418 | cbiere | 2007-08-12 06:33:01 -0400 (Sun, 12 Aug 2007) | 3 lines

 * Use search_gui_update_status() instead of update this and update that.
 * Fixed broken/delayed update of the search list and tab labels.

------------------------------------------------------------------------
r14417 | cbiere | 2007-08-12 05:05:30 -0400 (Sun, 12 Aug 2007) | 2 lines

 * Even more scum.

------------------------------------------------------------------------
r14416 | cbiere | 2007-08-11 15:20:23 -0400 (Sat, 11 Aug 2007) | 2 lines

 * 6283 new items.

------------------------------------------------------------------------
r14415 | cbiere | 2007-08-11 13:07:04 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Updated.

------------------------------------------------------------------------
r14414 | cbiere | 2007-08-11 13:04:59 -0400 (Sat, 11 Aug 2007) | 11 lines

 * Added a "status change" listener for searches so that we can easily
   update searches in the GUI, for example, indicate whether a browsing
   is still running or finished.
 * Merged a lot of GTK1 and GTK2 code.
 * Removed dead and unnecessary code.
 * When closing a search, switch to the next search in the list, ignore
   the tab order as the latter is always chronological and does not
   necessarily match the list order or pop-down menu order. The latter two
   are always in sync.
 * [GTK1] Removed pointless expand/collapse all buttons. Use the context menu.

------------------------------------------------------------------------
r14413 | cbiere | 2007-08-11 12:56:21 -0400 (Sat, 11 Aug 2007) | 3 lines

 * Use core functions where possible to ease moving this into the core
   somewhen.

------------------------------------------------------------------------
r14412 | cbiere | 2007-08-11 12:54:12 -0400 (Sat, 11 Aug 2007) | 3 lines

 * drop_widget_init(): Removed bad check. There really is only a single
   clipboard but there can be many drop widgets.

------------------------------------------------------------------------
r14411 | cbiere | 2007-08-11 12:53:09 -0400 (Sat, 11 Aug 2007) | 3 lines

 * fileinfo_data_cmp(): Fixed sorting by RX. The rate isn't reset, so
   recv_count must be checked as well.

------------------------------------------------------------------------
r14410 | cbiere | 2007-08-11 12:51:41 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Removed pointless cast_func_to_gpointer().

------------------------------------------------------------------------
r14409 | cbiere | 2007-08-11 12:51:00 -0400 (Sat, 11 Aug 2007) | 4 lines

 * Removed most glibberish.
 * Removed pointless cast_func_to_gpointer() as it still requires an explicit
   in most cases.

------------------------------------------------------------------------
r14408 | cbiere | 2007-08-11 12:49:14 -0400 (Sat, 11 Aug 2007) | 3 lines

 * download_build_magnet(): Don't add "xt=" to the magnet if we have N2R URL
   with an SHA-1 as source to save a bit space.

------------------------------------------------------------------------
r14407 | cbiere | 2007-08-11 12:37:49 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Use magic instead of valid_ptr().

------------------------------------------------------------------------
r14406 | daichik | 2007-08-11 12:32:52 -0400 (Sat, 11 Aug 2007) | 2 lines

Bullshit.

------------------------------------------------------------------------
r14405 | cbiere | 2007-08-11 12:24:23 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Use deep freezing for even better performance.

------------------------------------------------------------------------
r14404 | daichik | 2007-08-11 12:18:12 -0400 (Sat, 11 Aug 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14403 | daichik | 2007-08-11 12:14:02 -0400 (Sat, 11 Aug 2007) | 2 lines

Added "Id".

------------------------------------------------------------------------
r14402 | daichik | 2007-08-11 12:08:10 -0400 (Sat, 11 Aug 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14401 | daichik | 2007-08-11 12:05:59 -0400 (Sat, 11 Aug 2007) | 2 lines

Added translatable string/place.

------------------------------------------------------------------------
r14400 | cbiere | 2007-08-11 09:43:45 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Extended range once more.

------------------------------------------------------------------------
r14399 | cbiere | 2007-08-11 08:54:05 -0400 (Sat, 11 Aug 2007) | 2 lines

 * xXxt3n3d sP4mm3R |24N93.

------------------------------------------------------------------------
r14398 | cbiere | 2007-08-11 08:22:42 -0400 (Sat, 11 Aug 2007) | 9 lines

######    ###   #######   ###
#     #    #    #         ###
#     #    #    #         ###
#     #    #    #####      #
#     #    #    #
#     #    #    #         ###
######    ###   #######   ###


------------------------------------------------------------------------
r14397 | cbiere | 2007-08-11 07:49:32 -0400 (Sat, 11 Aug 2007) | 6 lines

 * download_clone(): Changed the handling of "sha1" slightly.
 * download_request(): Set d->retry_after at least to the current time, not
   zero. This seems to be a typo.
 * download_close(): Hopefully fixed crashed on exit whilst browsing still
   running. d->bio was a dangling pointer.

------------------------------------------------------------------------
r14396 | cbiere | 2007-08-11 07:07:52 -0400 (Sat, 11 Aug 2007) | 2 lines

 * Another spammer. 

------------------------------------------------------------------------
r14395 | cbiere | 2007-08-11 06:51:07 -0400 (Sat, 11 Aug 2007) | 3 lines

 * route_towards_guid(): Look for a neighbour matching the GUID and prefer it over indirect
   routes.

------------------------------------------------------------------------
r14394 | cbiere | 2007-08-10 16:41:34 -0400 (Fri, 10 Aug 2007) | 2 lines

 * Removed unnecessary initializers.

------------------------------------------------------------------------
r14393 | cbiere | 2007-08-10 16:16:59 -0400 (Fri, 10 Aug 2007) | 2 lines

 * Removed unused function.

------------------------------------------------------------------------
r14392 | cbiere | 2007-08-10 08:57:16 -0400 (Fri, 10 Aug 2007) | 2 lines

 * Scum is who scum does.

------------------------------------------------------------------------
r14391 | cbiere | 2007-08-09 18:55:44 -0400 (Thu, 09 Aug 2007) | 2 lines

 * file_info_retrieve(): Fixed two atom leaks.

------------------------------------------------------------------------
r14390 | cbiere | 2007-08-09 18:15:33 -0400 (Thu, 09 Aug 2007) | 2 lines

 * main_gui_shutdown(): Clear callback lists.

------------------------------------------------------------------------
r14389 | cbiere | 2007-08-09 18:10:53 -0400 (Thu, 09 Aug 2007) | 4 lines

 * Added main_gui_timer_add() so that we don't have to explicitely list
   each timer function in main_gui_timer(). Let each GUI part register
   a callback if desired instead.

------------------------------------------------------------------------
r14388 | cbiere | 2007-08-09 15:48:12 -0400 (Thu, 09 Aug 2007) | 4 lines

 * Added main_gui_add_page_visibility_listener() so that one can be notified
   when one of the main notebook pages becomes visible or invisible, for
   example, to resume/stop processing GUI updates.

------------------------------------------------------------------------
r14387 | cbiere | 2007-08-09 15:33:23 -0400 (Thu, 09 Aug 2007) | 2 lines

 * Added list_store_set_pointer() and list_store_append_pointer().

------------------------------------------------------------------------
r14386 | cbiere | 2007-08-09 10:19:56 -0400 (Thu, 09 Aug 2007) | 2 lines

 * Ignore LimeWire's stupid query length limit for releases.

------------------------------------------------------------------------
r14385 | cbiere | 2007-08-09 02:40:06 -0400 (Thu, 09 Aug 2007) | 2 lines

 * uploads_gui_update_required(): Inverted logic.

------------------------------------------------------------------------
r14384 | cbiere | 2007-08-09 02:11:25 -0400 (Thu, 09 Aug 2007) | 3 lines

 * Queue updates for source too instead of processing them immediately to
   avoid too frequent updates and unnecessary ones.

------------------------------------------------------------------------
r14383 | cbiere | 2007-08-09 02:07:11 -0400 (Thu, 09 Aug 2007) | 3 lines

 * Removed unused variable.
 * Fixed typos.

------------------------------------------------------------------------
r14382 | cbiere | 2007-08-09 01:32:32 -0400 (Thu, 09 Aug 2007) | 2 lines

 * create_download(): Initialize d->last_update.

------------------------------------------------------------------------
r14381 | cbiere | 2007-08-08 23:52:31 -0400 (Wed, 08 Aug 2007) | 2 lines

 * No need to include libxml headers from search_common.c.

------------------------------------------------------------------------
r14380 | cbiere | 2007-08-08 23:48:42 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Added main_gui_notebook_get_page() and main_gui_notebook_set_page().

------------------------------------------------------------------------
r14379 | cbiere | 2007-08-08 23:17:29 -0400 (Wed, 08 Aug 2007) | 5 lines

 * Include gtk-missing.h centrally through gui.h.
 * Use gtk_notebook_set_current_page() instead of the deprecated
   gtk_notebook_set_page().
 * Update the search expiry status periodically.

------------------------------------------------------------------------
r14378 | cbiere | 2007-08-08 22:38:57 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Banned some evil kaaskop.

------------------------------------------------------------------------
r14377 | cbiere | 2007-08-08 22:14:05 -0400 (Wed, 08 Aug 2007) | 2 lines

 * shell_add(): Removed unnecessary code.

------------------------------------------------------------------------
r14376 | cbiere | 2007-08-08 22:01:43 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Minor change so that shell_write_welcome() can be static.

------------------------------------------------------------------------
r14375 | cbiere | 2007-08-08 21:47:07 -0400 (Wed, 08 Aug 2007) | 10 lines

 * Replaced the ugly INTR hack.
 * shell_auth_cookie(): Use the SHA-1 of a bunch of random values instead of
   composing it directly from a few random values.
 * shell_add():
   * Broken down into smaller pieces for readability.
   * Call shell_handle_event() so that the I/O even handler is installed
     automagically and commands already in the buffer are immediately
     processed, otherwise the shell hangs until more data is sent or
     the client hangs up.

------------------------------------------------------------------------
r14374 | cbiere | 2007-08-08 19:31:10 -0400 (Wed, 08 Aug 2007) | 4 lines

 * Added property "session_id" which may be useful when using the shell to
   verify whether the session is the same as during the previous shell
   connection. The "start_stamp" isn't really good enough.

------------------------------------------------------------------------
r14373 | cbiere | 2007-08-08 19:10:38 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Removed dead prototypes.

------------------------------------------------------------------------
r14372 | cbiere | 2007-08-08 17:43:46 -0400 (Wed, 08 Aug 2007) | 4 lines

 * Use events for core -> GUI communication regarding download sources too
   as it simplifies things reduces the amount of stubs necessary for topless
   mode.

------------------------------------------------------------------------
r14371 | cbiere | 2007-08-08 14:31:26 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Added some information that might be of interest for Interpol.

------------------------------------------------------------------------
r14370 | cbiere | 2007-08-08 12:57:25 -0400 (Wed, 08 Aug 2007) | 10 lines

 * search_gui_store_searches(): Only record the request but don't store them
   immediately to avoid unnecessary work and too frequent saving on bulk
   operations.
 * search_gui_shutdown(): Disable storing of searches as all searches are
   closed now which would cause losing them all otherwise.
 * main_gui_timer(): Call search_gui_timer(), search_gui_flush() is too
   specific.
 * main_gui_shutdown(): It's really the job of search_gui_shutdown() to
   call search_gui_flush().

------------------------------------------------------------------------
r14369 | cbiere | 2007-08-08 11:28:53 -0400 (Wed, 08 Aug 2007) | 2 lines

 * Experiment failed. All searches and filters are dead.

------------------------------------------------------------------------
r14368 | cbiere | 2007-08-08 11:21:28 -0400 (Wed, 08 Aug 2007) | 3 lines

 * search_gui_duplicate_search(): There's no point in calling
   search_gui_store_searches().

------------------------------------------------------------------------
r14367 | rmanfredi | 2007-08-08 09:03:54 -0400 (Wed, 08 Aug 2007) | 4 lines

Now that search_gui_store_searches() is no longer periodically called, we
need to invoke it at strategic places: when a new search is created, when
a search is closed and when filter changes are committed.

------------------------------------------------------------------------
r14366 | cbiere | 2007-08-08 01:43:32 -0400 (Wed, 08 Aug 2007) | 2 lines

 * thex_download_handle_xml(): Show a bit more information on failure.

------------------------------------------------------------------------
r14365 | cbiere | 2007-08-08 01:05:08 -0400 (Wed, 08 Aug 2007) | 3 lines

 * Added command-line switch "--topless" so that gtk-gnutella can run topless
   even if it was compiled with a GUI.

------------------------------------------------------------------------
r14364 | cbiere | 2007-08-07 22:44:26 -0400 (Tue, 07 Aug 2007) | 4 lines

 * Merged some of the Gtk+ search GUI code.
 * Call search_gui_store_searches() only after creating a new search or on
   shutdown, not from a periodic timer.

------------------------------------------------------------------------
r14363 | cbiere | 2007-08-07 22:35:39 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Fixed compile error once more.

------------------------------------------------------------------------
r14362 | cbiere | 2007-08-07 19:27:16 -0400 (Tue, 07 Aug 2007) | 3 lines

 * Moved properties "browse_host_max_results" and "search_max_results" from
   the GUI to the core side so that there's no difference for topless mode.

------------------------------------------------------------------------
r14361 | cbiere | 2007-08-07 19:23:28 -0400 (Tue, 07 Aug 2007) | 3 lines

 * Show the "compiled ..." part in the --version output only if the runtime-
   and compile-time version actually differs.

------------------------------------------------------------------------
r14360 | cbiere | 2007-08-07 18:40:18 -0400 (Tue, 07 Aug 2007) | 4 lines

 * Changed the column title to "Filename (filtered)" if a filename filter
   is active for the downloads display.
 * Merged code for column configuration.

------------------------------------------------------------------------
r14359 | cbiere | 2007-08-07 17:49:40 -0400 (Tue, 07 Aug 2007) | 5 lines

 * Removed unnecessary wrapper functions.
 * fi_gui_fi_added(): Call fi_gui_file_update_visibility() instead of
   fi_gui_file_show() so that the file is not unnecessarily shown and then
   immediately hidden again if it should not be visible.

------------------------------------------------------------------------
r14358 | cbiere | 2007-08-07 17:25:55 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Removed unnecessary wrapper functions.

------------------------------------------------------------------------
r14357 | cbiere | 2007-08-07 17:07:44 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Removed unused definition.

------------------------------------------------------------------------
r14356 | cbiere | 2007-08-07 17:05:41 -0400 (Tue, 07 Aug 2007) | 5 lines

 * Removed unused parameters from upload event callbacks.
 * Moved some code to uploads_gui_update_required() so that it's shared by
   GTK1 and GTK2.
 * [GTK2] Freeze the treeview during mass updates(!).

------------------------------------------------------------------------
r14355 | cbiere | 2007-08-07 16:59:46 -0400 (Tue, 07 Aug 2007) | 3 lines

 * Fixed compile errors caused by previous commit.
 * Merged some code.

------------------------------------------------------------------------
r14354 | cbiere | 2007-08-07 15:32:20 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Moved last bits of code to downloads_common.[ch] and gtk[12]/fileinfo.c.

------------------------------------------------------------------------
r14353 | cbiere | 2007-08-07 15:19:29 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Shed some light.

------------------------------------------------------------------------
r14352 | cbiere | 2007-08-07 14:04:52 -0400 (Tue, 07 Aug 2007) | 3 lines

 * Added magic to struct upload.
 * Removed unnecessary parameter names from prototypes.

------------------------------------------------------------------------
r14351 | cbiere | 2007-08-07 11:08:48 -0400 (Tue, 07 Aug 2007) | 4 lines

 * Added gui_download_updates_freeze(), gui_download_updates_thaw() so that
   needless and time-consuming updates during startup and shutdown can be
   avoided.

------------------------------------------------------------------------
r14350 | cbiere | 2007-08-07 10:04:42 -0400 (Tue, 07 Aug 2007) | 4 lines

 * shell_handle_data():
   * Use shell_check() instead of a plain NULL check.
   * Removed unused label.

------------------------------------------------------------------------
r14349 | cbiere | 2007-08-07 06:21:45 -0400 (Tue, 07 Aug 2007) | 2 lines

 * Fixed compiler warning.

------------------------------------------------------------------------
r14348 | cbiere | 2007-08-07 06:19:01 -0400 (Tue, 07 Aug 2007) | 3 lines

 * Removed misplaced gcu_ prefix from gcu_upload_stats_gui_thaw() and
   gcu_upload_stats_gui_freeze().

------------------------------------------------------------------------
r14347 | cbiere | 2007-08-07 05:42:43 -0400 (Tue, 07 Aug 2007) | 4 lines

 * hash_list_next(): There was never anything wrong with this one, maybe this
   is easier to grasp.
 * hash_list_previous(): This is the real thing.

------------------------------------------------------------------------
r14346 | rmanfredi | 2007-08-07 04:25:58 -0400 (Tue, 07 Aug 2007) | 2 lines

Fixed wrong types in hash_list_next() and hash_list_previous().

------------------------------------------------------------------------
r14345 | rmanfredi | 2007-08-07 03:48:54 -0400 (Tue, 07 Aug 2007) | 3 lines

Fixed wrong implementation of hash_list_next().
Added missing hash_list_previous().

------------------------------------------------------------------------
r14344 | cbiere | 2007-08-06 17:29:20 -0400 (Mon, 06 Aug 2007) | 2 lines

 * download_start(): Queue the download if the queue is frozen.

------------------------------------------------------------------------
r14343 | cbiere | 2007-08-06 17:19:14 -0400 (Mon, 06 Aug 2007) | 4 lines

 * SELECTED_FILES_FOREACH_SOURCE_START(): Traverse the hashlist without using
   a hashlist iterator because items might be added or removed while we
   traverse it.

------------------------------------------------------------------------
r14342 | cbiere | 2007-08-06 12:17:18 -0400 (Mon, 06 Aug 2007) | 3 lines

 * create_download(): Don't check DOWNLOAD_IS_RUNNING() because
   download_start() might have queued or stopped the download.

------------------------------------------------------------------------
r14341 | cbiere | 2007-08-06 11:45:46 -0400 (Mon, 06 Aug 2007) | 2 lines

 * shell_write_data(): Do the I/O event changes in shell_handle_data().

------------------------------------------------------------------------
r14340 | cbiere | 2007-08-06 11:32:11 -0400 (Mon, 06 Aug 2007) | 4 lines

 * shell_read_data(): Must use shell_shutdown() instead of shell_destroy()
   because "sh" is now accessed afterwards.
 * shell_handle_data(): Don't call shell_read_data() if sh->shutdown is set.

------------------------------------------------------------------------
r14339 | cbiere | 2007-08-06 11:25:36 -0400 (Mon, 06 Aug 2007) | 6 lines

 * shell_exec_shutdown():
   * Send the reply explicitely as the shell will be closed too. 
   * Call shell_shutdown() explicitely because closing the shell is not
     really side-effect, this is rather "quit plus" and we should not
     handle any pending lines afterwards.

------------------------------------------------------------------------
r14338 | cbiere | 2007-08-06 11:20:44 -0400 (Mon, 06 Aug 2007) | 5 lines

 * shell_cmd_get_handler(): Use shell_cmd.inc.
 * shell_read_data(): Send the 400 error message to the client too instead of
   just closing the connection.
 * shell_handle_data(): Check for shutdown after shell_read_data() as well.

------------------------------------------------------------------------
r14337 | cbiere | 2007-08-06 11:17:02 -0400 (Mon, 06 Aug 2007) | 4 lines

 * socket_accept(): Delay initialization of "getline" until socket_read().
 * socket_read(): Use a larger getline length limit for shells, otherwise
   we cannot pass lenghty magnet links.

------------------------------------------------------------------------
r14336 | cbiere | 2007-08-06 11:12:47 -0400 (Mon, 06 Aug 2007) | 2 lines

 * Added getline_set_maxlen() so that we can at least increase the limit.

------------------------------------------------------------------------
r14335 | cbiere | 2007-08-06 10:21:26 -0400 (Mon, 06 Aug 2007) | 3 lines

 * local_shell_mainloop(): Unexpected EOF from server wasn't handled correctly
   and caused a hanging shell client.

------------------------------------------------------------------------
r14334 | cbiere | 2007-08-06 09:11:29 -0400 (Mon, 06 Aug 2007) | 2 lines

 * Re-added comment.

------------------------------------------------------------------------
r14333 | cbiere | 2007-08-06 09:07:25 -0400 (Mon, 06 Aug 2007) | 4 lines

 * Get the quoting right.
 * Tell the shell to "intr". Yes, this is completely backwards but we want some
   feedback at least if we invoked the script manually.

------------------------------------------------------------------------
r14332 | cbiere | 2007-08-06 08:16:52 -0400 (Mon, 06 Aug 2007) | 2 lines

 * Updated.

------------------------------------------------------------------------
r14331 | cbiere | 2007-08-05 19:56:38 -0400 (Sun, 05 Aug 2007) | 2 lines

 * SELECTED_FILES_FOREACH_START(): Forgot to say "freeze".

------------------------------------------------------------------------
r14330 | cbiere | 2007-08-05 18:11:26 -0400 (Sun, 05 Aug 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r14329 | cbiere | 2007-08-05 16:52:15 -0400 (Sun, 05 Aug 2007) | 2 lines

 * Updated comment.

------------------------------------------------------------------------
r14328 | cbiere | 2007-08-05 16:49:06 -0400 (Sun, 05 Aug 2007) | 5 lines

 * Renamed firefox-magnet.sh to magnet-handler.sh.
 * Allow HTTP URLs too.
 * Removed the $GTKG trick. bpringle agreed there are many ways to achieve
   the equivalent.

------------------------------------------------------------------------
r14327 | cbiere | 2007-08-05 16:08:39 -0400 (Sun, 05 Aug 2007) | 3 lines

 * magnet_handle_key(): If the "dn" in a magnet key isn't UTF-8 encoded,
   guess the encoding and convert it but don't do this for more crucial keys.

------------------------------------------------------------------------
r14326 | cbiere | 2007-08-05 12:56:27 -0400 (Sun, 05 Aug 2007) | 2 lines

 * fi_gui_files_select_helper(): Removed bad cast.

------------------------------------------------------------------------
r14325 | cbiere | 2007-08-05 12:55:00 -0400 (Sun, 05 Aug 2007) | 3 lines

 * Added int_to_pointer() and pointer_to_int().
 * Simplified integer <-> pointer casts.

------------------------------------------------------------------------
r14324 | cbiere | 2007-08-05 09:38:36 -0400 (Sun, 05 Aug 2007) | 9 lines

 * [GTK1] Fixed cursor handling. This could get out of sync with reality
   after sorting. Use the undocumented clist->focus_row instead and check
   whether it's selected.
 * [GTK2] Removed bad GUINT_TO_POINTER(); the parameter was a pointer but
   there was no warning. Thus, use uint_to_pointer() which causes warnings
   in case of such typos.
 * Renamed some functions with bad names.
 * Removed unnecessary #include.

------------------------------------------------------------------------
r14323 | cbiere | 2007-08-05 08:21:00 -0400 (Sun, 05 Aug 2007) | 3 lines

 * Added uint_to_pointer() and pointer_to_uint().
 * Renamed cast_ptr_to_uintptr() and cast_uintptr_to_ptr().

------------------------------------------------------------------------
r14322 | cbiere | 2007-08-05 08:17:19 -0400 (Sun, 05 Aug 2007) | 2 lines

 * Minor modification.

------------------------------------------------------------------------
r14321 | cbiere | 2007-08-05 07:00:30 -0400 (Sun, 05 Aug 2007) | 3 lines

 * Don't update the sorting when the list is frozen, just do it once the
   list becomes unfrozen.

------------------------------------------------------------------------
r14320 | cbiere | 2007-08-04 22:35:28 -0400 (Sat, 04 Aug 2007) | 4 lines

 * on_notebook_switch_page(): Don't clear the details if we switch to
   another page because the user might want to correlate the details with
   files on another page or the like.

------------------------------------------------------------------------
r14319 | cbiere | 2007-08-04 22:08:51 -0400 (Sat, 04 Aug 2007) | 3 lines

 * upload_stats_load_history(): Notify the GUI to suppress GUI updates to
   decrease the loading time.

------------------------------------------------------------------------
r14318 | cbiere | 2007-08-04 22:04:46 -0400 (Sat, 04 Aug 2007) | 2 lines

 * create_download(): Do not bluntly assume download_start() succeeded.

------------------------------------------------------------------------
r14317 | cbiere | 2007-08-04 21:05:53 -0400 (Sat, 04 Aug 2007) | 8 lines

 * download_start():
   * Don't start any downloads if the queue frozen because most-likely the
     disk is full.
   * Removed unnecessary variables.
 * download_pickup_queued():
   * Deuglified for loop.
   * Removed unnecessary variable.

------------------------------------------------------------------------
r14316 | cbiere | 2007-08-04 20:31:08 -0400 (Sat, 04 Aug 2007) | 2 lines

 * Moved implementations of shell commands to separate files.

------------------------------------------------------------------------
r14315 | cbiere | 2007-08-04 16:08:33 -0400 (Sat, 04 Aug 2007) | 3 lines

 * Removed dead code.
 * Use G_FREE_NULL() instead of g_free(). Always.

------------------------------------------------------------------------
r14314 | cbiere | 2007-08-04 13:13:34 -0400 (Sat, 04 Aug 2007) | 2 lines

 * Use G_FREE_NULL() instead of g_free(). Always.

------------------------------------------------------------------------
r14313 | cbiere | 2007-08-04 13:01:38 -0400 (Sat, 04 Aug 2007) | 3 lines

 * shell_print_help(): Sane people don't use strlen() to check whether a string
   is empty. Never.

------------------------------------------------------------------------
r14312 | cbiere | 2007-08-04 12:57:32 -0400 (Sat, 04 Aug 2007) | 4 lines

 * Fixed mistake in previous commit, the return code wasn't propagated.
 * Added stub for "download abort" command.
 * Make sure we don't accidently map a download command to the wrong function.

------------------------------------------------------------------------
r14311 | cbiere | 2007-08-04 12:47:10 -0400 (Sat, 04 Aug 2007) | 2 lines

 * Moved some code from shell_exec_download() to shell_exec_download_add().

------------------------------------------------------------------------
r14310 | daichik | 2007-08-04 07:38:27 -0400 (Sat, 04 Aug 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14309 | daichik | 2007-08-04 07:36:45 -0400 (Sat, 04 Aug 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r14308 | cbiere | 2007-08-03 23:39:56 -0400 (Fri, 03 Aug 2007) | 3 lines

 * Freeze/thaw the list of sources as well as modifications in one of both
   lists likely triggers updates for the other.

------------------------------------------------------------------------
r14307 | cbiere | 2007-08-03 21:51:29 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Moved download filter and select widgets into an own "Tool" tab.

------------------------------------------------------------------------
r14306 | cbiere | 2007-08-03 21:40:39 -0400 (Fri, 03 Aug 2007) | 3 lines

 * Moved download filter and select widgets into an own "Tool" tab.
 * Moved file transfer stats from Network tab to the Statistics tab.

------------------------------------------------------------------------
r14305 | cbiere | 2007-08-03 21:38:34 -0400 (Fri, 03 Aug 2007) | 3 lines

 * Added download_host_info() and used it for some messages so that we see
   which host/vendor caused it.

------------------------------------------------------------------------
r14304 | cbiere | 2007-08-03 19:38:59 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Freeze the file list widget if we might apply many changes.

------------------------------------------------------------------------
r14303 | cbiere | 2007-08-03 19:36:56 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Fixed another widget name.

------------------------------------------------------------------------
r14302 | cbiere | 2007-08-03 17:52:36 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14301 | cbiere | 2007-08-03 17:50:48 -0400 (Fri, 03 Aug 2007) | 5 lines

 * add_parent_with_sha1(), remove_parent_with_sha1(), find_parent_with_sha1():
   Use the search as parameter instead of search->parents.
 * search_gui_record_get_children(): Added more checks.
 * search_gui_record_get_parent(): Removed debug message.

------------------------------------------------------------------------
r14300 | cbiere | 2007-08-03 17:48:36 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Fixed another widget name.

------------------------------------------------------------------------
r14299 | cbiere | 2007-08-03 17:48:00 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Removed debug messages.

------------------------------------------------------------------------
r14298 | cbiere | 2007-08-03 17:34:19 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Fixed widget names.

------------------------------------------------------------------------
r14297 | cbiere | 2007-08-03 17:33:25 -0400 (Fri, 03 Aug 2007) | 2 lines

 * [GTK1] Implemented "copy magnet to clipboard" at the searches menu.

------------------------------------------------------------------------
r14296 | cbiere | 2007-08-03 08:41:19 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Added comment.

------------------------------------------------------------------------
r14295 | cbiere | 2007-08-03 08:32:49 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Reimplemented display filter at the downloads pane.

------------------------------------------------------------------------
r14294 | cbiere | 2007-08-03 06:25:58 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Merged code for selecting downloads by a regex.

------------------------------------------------------------------------
r14293 | cbiere | 2007-08-03 04:11:02 -0400 (Fri, 03 Aug 2007) | 2 lines

 * More shadow tuning.

------------------------------------------------------------------------
r14292 | cbiere | 2007-08-03 03:07:03 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Tuned shadows.

------------------------------------------------------------------------
r14291 | cbiere | 2007-08-03 02:43:03 -0400 (Fri, 03 Aug 2007) | 2 lines

 * Merged GTK1 and GTK2 code for the downloads interface.

------------------------------------------------------------------------
r14290 | cbiere | 2007-08-02 20:53:55 -0400 (Thu, 02 Aug 2007) | 3 lines

 * struct gnet_fi_info: Added filesize so that we don't need fi_get_status()
   if we already called fi_get_info() just to get the filesize.

------------------------------------------------------------------------
r14289 | cbiere | 2007-08-02 18:47:50 -0400 (Thu, 02 Aug 2007) | 4 lines

 * Use the clipboard functions for less code duplication.
 * Cleaned and sync'ed search popup menus.
 * [GTK1] "Copy URL to clipboard" works for download sources now.

------------------------------------------------------------------------
r14288 | cbiere | 2007-08-02 18:39:49 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Moved clipboard functions from misc.[ch] to clipboard.[ch].

------------------------------------------------------------------------
r14287 | cbiere | 2007-08-02 18:37:41 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Moved clipboard functions from misc.[ch] to clipboard.[ch].

------------------------------------------------------------------------
r14286 | cbiere | 2007-08-02 18:30:36 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Added special range.

------------------------------------------------------------------------
r14285 | cbiere | 2007-08-02 12:11:31 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Added enum name.

------------------------------------------------------------------------
r14284 | cbiere | 2007-08-02 12:09:01 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Updated.

------------------------------------------------------------------------
r14283 | cbiere | 2007-08-02 12:01:22 -0400 (Thu, 02 Aug 2007) | 2 lines

 * Fixed broken column choosers.

------------------------------------------------------------------------
r14282 | cbiere | 2007-08-02 11:59:59 -0400 (Thu, 02 Aug 2007) | 2 lines

 * nodes_gui_init(): Make sure we can't get the order of the titles wrong.

------------------------------------------------------------------------
r14281 | cbiere | 2007-08-02 11:59:00 -0400 (Thu, 02 Aug 2007) | 4 lines

 * gtk_clist_set_column_name(): Added const-qualifier.
 * Added gtk_label_get_text() for Gtk+ 1.2 as wrapper around the deprecated
   gtk_label_get().

------------------------------------------------------------------------
r14280 | cbiere | 2007-08-02 04:00:20 -0400 (Thu, 02 Aug 2007) | 2 lines

 * [GTK1] Synchronized downloads pane with GTK2.

------------------------------------------------------------------------
r14279 | cbiere | 2007-08-02 03:45:13 -0400 (Thu, 02 Aug 2007) | 3 lines

 * Added gtk_notebook_set_current_page() for Gtk+ 1.2 so that we don't
   accidently use the deprecated gtk_notebook_set_page() anywhere.

------------------------------------------------------------------------
r14278 | cbiere | 2007-08-02 01:11:26 -0400 (Thu, 02 Aug 2007) | 2 lines

 * download_pause(): Removed unnecessary check.

------------------------------------------------------------------------
r14277 | cbiere | 2007-08-02 01:02:56 -0400 (Thu, 02 Aug 2007) | 3 lines

 * download_start(): Allow removal of the pause flags always as it causse no
   harm.

------------------------------------------------------------------------
r14276 | cbiere | 2007-08-02 00:58:36 -0400 (Thu, 02 Aug 2007) | 2 lines

 * download_start(): Make sure we can start only downloads which are startable.

------------------------------------------------------------------------
r14275 | cbiere | 2007-08-01 16:32:43 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Use local buffers whenever possible.

------------------------------------------------------------------------
r14274 | cbiere | 2007-08-01 16:17:19 -0400 (Wed, 01 Aug 2007) | 3 lines

 * Move the HSEP information from the statusbar to Statistics->Horizon.
 * [GTK2] Minor tweaks to the download tab. 

------------------------------------------------------------------------
r14273 | cbiere | 2007-08-01 14:51:05 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Don't show unknown creation times as some date in the far past.

------------------------------------------------------------------------
r14272 | cbiere | 2007-08-01 14:44:54 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Minor modifications.

------------------------------------------------------------------------
r14271 | cbiere | 2007-08-01 14:10:01 -0400 (Wed, 01 Aug 2007) | 5 lines

 * download_resume():
   * Slightly simplified. 
   * Make sure we can always clear FI_F_PAUSED.
   * Don't just return if the FI_F_PAUSED flag was cleared.

------------------------------------------------------------------------
r14270 | cbiere | 2007-08-01 03:49:39 -0400 (Wed, 01 Aug 2007) | 5 lines

 * Use clist_restore_widths() and clist_save_widths() instead of listening
   for the "resize_column" event because the latter requires bypassing the
   property framework with evil casts and we don't need the frequent updates
   anyway.

------------------------------------------------------------------------
r14269 | cbiere | 2007-08-01 01:10:45 -0400 (Wed, 01 Aug 2007) | 4 lines

 * Fixed broken synchronization of the treeview column widths and their
   visibility.
 * Removed unnecessary and dead code.

------------------------------------------------------------------------
r14268 | cbiere | 2007-08-01 01:07:10 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Minor polish.

------------------------------------------------------------------------
r14267 | cbiere | 2007-08-01 01:05:08 -0400 (Wed, 01 Aug 2007) | 5 lines

 * tree_view_motion_clear_callback():
   * Removed unnecessary GtkTreeView parameter.
   * Pass a reference so that NULL checking and nullifying is handled
     internally.

------------------------------------------------------------------------
r14266 | cbiere | 2007-08-01 00:23:59 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Removed useless parameter names from prototypes.

------------------------------------------------------------------------
r14265 | cbiere | 2007-08-01 00:07:27 -0400 (Wed, 01 Aug 2007) | 4 lines

 * file_info_unlink(): Mark file as unlinked to avoid multiple attempts and
   warnings if there are multiple sources trying to remove the file.
 * file_info_reset(): Reset FI_F_UNLINKED.

------------------------------------------------------------------------
r14264 | cbiere | 2007-08-01 00:00:10 -0400 (Wed, 01 Aug 2007) | 2 lines

 * Banned more spammers.

------------------------------------------------------------------------
r14263 | cbiere | 2007-07-31 19:41:12 -0400 (Tue, 31 Jul 2007) | 4 lines

 * fi_gui_set_filename(): Check for ASCII instead of UTF-8 because the latter
   still needs to be normalized on Mac OS at least because Gtk+ renders only
   NFC correctly.

------------------------------------------------------------------------
r14262 | cbiere | 2007-07-31 17:44:32 -0400 (Tue, 31 Jul 2007) | 2 lines

 * render_files(): Make sure "text" is initialized.

------------------------------------------------------------------------
r14261 | cbiere | 2007-07-31 16:51:39 -0400 (Tue, 31 Jul 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14260 | cbiere | 2007-07-31 16:50:50 -0400 (Tue, 31 Jul 2007) | 2 lines

 * fi_gui_fill_status(): Show the RX rate only if there any active sources.

------------------------------------------------------------------------
r14259 | cbiere | 2007-07-31 16:21:25 -0400 (Tue, 31 Jul 2007) | 2 lines

 * downloads_gui_status_string(): Avoid displaying weird timeout delays.

------------------------------------------------------------------------
r14258 | cbiere | 2007-07-31 16:20:09 -0400 (Tue, 31 Jul 2007) | 2 lines

 * file_info_status_to_string(): Minor tweak.

------------------------------------------------------------------------
r14257 | cbiere | 2007-07-31 15:56:08 -0400 (Tue, 31 Jul 2007) | 2 lines

 * [GTK2] Allow faster switching between pages of the downloads notebook.

------------------------------------------------------------------------
r14256 | cbiere | 2007-07-31 15:53:28 -0400 (Tue, 31 Jul 2007) | 2 lines

 * gui_search_create_tree_view(): Minor polish.

------------------------------------------------------------------------
r14255 | cbiere | 2007-07-31 15:08:28 -0400 (Tue, 31 Jul 2007) | 3 lines

 * Replaced some assertions with soft assertions because crashing here just
   makes things worse.

------------------------------------------------------------------------
r14254 | cbiere | 2007-07-30 23:18:40 -0400 (Mon, 30 Jul 2007) | 3 lines

 * sidebar_visible_changed(): Don't set the gutter size with Gtk+ 2.x
   because it's a deprecated function and unnecessary.

------------------------------------------------------------------------
r14253 | cbiere | 2007-07-30 23:00:25 -0400 (Mon, 30 Jul 2007) | 3 lines

 * sidebar_visible_changed(): Hide the gutter if the sidebar is hidden, as
   Gtk+ 1.2 does not do this on its own unlike Gtk+ 2.x.

------------------------------------------------------------------------
r14252 | cbiere | 2007-07-30 22:44:59 -0400 (Mon, 30 Jul 2007) | 3 lines

 * Added downloads column which shows the current receive rate and removed this
   information from the status string.

------------------------------------------------------------------------
r14251 | cbiere | 2007-07-30 21:37:53 -0400 (Mon, 30 Jul 2007) | 7 lines

 * Save and restore the column visibilities.
 * fi_gui_visible(): Show only files at the "Queued" page which have no
   active sources.
 * fi_gui_set_aliases(): Fixed atom leak.
 * Handle "Delete" key at the "Finished" and "Seeding" pages because even an
   accidental keypress will cause little harm here.

------------------------------------------------------------------------
r14250 | cbiere | 2007-07-30 21:24:23 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Handle modifier keys correctly.

------------------------------------------------------------------------
r14249 | cbiere | 2007-07-30 20:35:31 -0400 (Mon, 30 Jul 2007) | 2 lines

 * More efficient handling of download progress.

------------------------------------------------------------------------
r14248 | cbiere | 2007-07-30 19:50:01 -0400 (Mon, 30 Jul 2007) | 4 lines

 * Splitted progress column at the downloads main display into "Progress" and
   "Downloaded".
 * [GTK1] fi_gui_is_visible(): Also check the sub-notebook.

------------------------------------------------------------------------
r14247 | cbiere | 2007-07-30 19:46:16 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Some cleanup.

------------------------------------------------------------------------
r14246 | cbiere | 2007-07-30 19:25:22 -0400 (Mon, 30 Jul 2007) | 3 lines

 * As long as GTK1 has a different downloads display nb_downloads_page_*
   cannot be shared with GTK2.

------------------------------------------------------------------------
r14245 | cbiere | 2007-07-30 17:31:49 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Corrected range.

------------------------------------------------------------------------
r14244 | cbiere | 2007-07-30 16:50:52 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Wii wii, Oreva!

------------------------------------------------------------------------
r14243 | cbiere | 2007-07-30 16:14:21 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r14242 | cbiere | 2007-07-30 03:04:24 -0400 (Mon, 30 Jul 2007) | 3 lines

 * Show only those items of the downloads context menu which are useful at
   the current tab.

------------------------------------------------------------------------
r14241 | cbiere | 2007-07-30 03:01:49 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Fixed broken Preferences hotkey.

------------------------------------------------------------------------
r14240 | cbiere | 2007-07-30 02:59:24 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Added widget_set_visible().

------------------------------------------------------------------------
r14239 | cbiere | 2007-07-30 00:31:55 -0400 (Mon, 30 Jul 2007) | 2 lines

 * Fixed same warning as previous for Gtk+ 1.2.

------------------------------------------------------------------------
r14238 | cbiere | 2007-07-30 00:10:15 -0400 (Mon, 30 Jul 2007) | 3 lines

 * The download sub-tabs are now effective so that one can limit the display to
   downloads which are active, queued, incomplete, paused, finished or in SEED mode.

------------------------------------------------------------------------
r14237 | cbiere | 2007-07-30 00:05:43 -0400 (Mon, 30 Jul 2007) | 3 lines

 * search_gui_data_changed(): Re-store the data because the "row-changed" signal
   is apparently ignored for sorting.

------------------------------------------------------------------------
r14236 | cbiere | 2007-07-30 00:04:24 -0400 (Mon, 30 Jul 2007) | 3 lines

 * downloads_gui_status_string(): Construct the SHA-1 status string in more
   readable way and so that it's translatable.

------------------------------------------------------------------------
r14235 | cbiere | 2007-07-29 23:59:43 -0400 (Sun, 29 Jul 2007) | 4 lines

 * download_verify_tigertree_done(): Set the download status to GTA_DL_COMPLETED
   instead of GTA_DL_VERIFIED on mismatch because the GUI does not like unfinished
   downloads which are verified but incomplete.

------------------------------------------------------------------------
r14234 | cbiere | 2007-07-29 19:07:44 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Always show the download progress visualization bar.

------------------------------------------------------------------------
r14233 | cbiere | 2007-07-29 18:52:01 -0400 (Sun, 29 Jul 2007) | 5 lines

 * d_end():                                                                     
   * Compare off_t with filesize_t correctly.
   * Check IS_SREG() because st.st_size has no defined meaning otherwise.
   * Keep variables as local as possible.

------------------------------------------------------------------------
r14232 | rmanfredi | 2007-07-29 18:28:36 -0400 (Sun, 29 Jul 2007) | 4 lines

Forgot to check a close().
After moving the file, stat() the target to make sure it has the proper size
in case neither write() nor close() returned anything useful.

------------------------------------------------------------------------
r14231 | cbiere | 2007-07-29 16:03:34 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Added popup menu to the tray icon.

------------------------------------------------------------------------
r14230 | cbiere | 2007-07-29 14:55:32 -0400 (Sun, 29 Jul 2007) | 5 lines

 * fi_gui_details_treeview_init(), search_details_treeview_init(): Use
   GTK_TREE_VIEW_COLUMN_AUTOSIZE only for the the first column and
   GTK_TREE_VIEW_COLUMN_FIXED for the second so that the column doesn't
   become fugly wide when the string is very long.

------------------------------------------------------------------------
r14229 | cbiere | 2007-07-29 14:53:55 -0400 (Sun, 29 Jul 2007) | 2 lines

 * add_column(): Fixed height mode requires GTK_TREE_VIEW_COLUMN_FIXED.

------------------------------------------------------------------------
r14228 | cbiere | 2007-07-29 14:35:20 -0400 (Sun, 29 Jul 2007) | 4 lines

 * Make the sure the searchbar is visible if the text changes. This matters
   when some text is dropped to the application and put into searchbar
   while the searchbar is hidden.

------------------------------------------------------------------------
r14227 | cbiere | 2007-07-29 14:26:29 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Enable "fixed height mode" for all tree views.

------------------------------------------------------------------------
r14226 | cbiere | 2007-07-29 14:12:19 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Added tree_view_set_fixed_height_mode().

------------------------------------------------------------------------
r14225 | cbiere | 2007-07-29 13:56:43 -0400 (Sun, 29 Jul 2007) | 3 lines

 * Use tree_model_iter_changed() to refresh a row instead of re-storing the
   data.

------------------------------------------------------------------------
r14224 | cbiere | 2007-07-29 13:55:11 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Added tree_model_iter_changed().

------------------------------------------------------------------------
r14223 | cbiere | 2007-07-29 13:08:15 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Use gtk_get_current_event_time() instead of a plain zero.

------------------------------------------------------------------------
r14222 | cbiere | 2007-07-29 12:16:39 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Removed dead code. There's no tree anymore.

------------------------------------------------------------------------
r14221 | cbiere | 2007-07-29 12:15:40 -0400 (Sun, 29 Jul 2007) | 3 lines

 * Don't save "monitor_enabled". It's a waste of resources to keep it running
   in the background.

------------------------------------------------------------------------
r14220 | cbiere | 2007-07-29 12:07:30 -0400 (Sun, 29 Jul 2007) | 2 lines

 * Reordered functions so that it compiles again.

------------------------------------------------------------------------
r14219 | cbiere | 2007-07-29 11:33:48 -0400 (Sun, 29 Jul 2007) | 2 lines

 * download_stop_v(): Check for d->browse, not the flag, just in case.

------------------------------------------------------------------------
r14218 | cbiere | 2007-07-29 10:57:00 -0400 (Sun, 29 Jul 2007) | 3 lines

 * Clear the details if the selected file is removed.
 * Some clean-ups.

------------------------------------------------------------------------
r14217 | cbiere | 2007-07-28 18:46:30 -0400 (Sat, 28 Jul 2007) | 2 lines

 * 12052 new items.

------------------------------------------------------------------------
r14216 | cbiere | 2007-07-28 17:13:43 -0400 (Sat, 28 Jul 2007) | 3 lines

 * download_resume_bg_tasks(): Changed assertion to check because it's
   apparently no longer true.

------------------------------------------------------------------------
r14215 | cbiere | 2007-07-28 16:07:52 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Another minor modification.

------------------------------------------------------------------------
r14214 | cbiere | 2007-07-28 16:07:03 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Keep it static, stupid!

------------------------------------------------------------------------
r14213 | cbiere | 2007-07-28 12:26:19 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Minor modifications.

------------------------------------------------------------------------
r14212 | cbiere | 2007-07-28 11:28:54 -0400 (Sat, 28 Jul 2007) | 3 lines

 * fi_gui_select_by_regex(): Convert the regerror() string to UTF-8, it's
   probably encoded according to the current locale, not necessarily UTF-8.

------------------------------------------------------------------------
r14211 | cbiere | 2007-07-28 08:03:28 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Minor changes.

------------------------------------------------------------------------
r14210 | cbiere | 2007-07-28 06:11:16 -0400 (Sat, 28 Jul 2007) | 3 lines

 * fi_gui_select_by_regex(): Unselect all on empty string or regex error
   instead of keeping the current selection.

------------------------------------------------------------------------
r14209 | cbiere | 2007-07-28 05:18:28 -0400 (Sat, 28 Jul 2007) | 2 lines

 * [GTK2] Restructured downloads interface.

------------------------------------------------------------------------
r14208 | cbiere | 2007-07-28 05:11:13 -0400 (Sat, 28 Jul 2007) | 2 lines

 * get_nth_column(): Make sure "*menuitem_ptr" is initialized on failure too.

------------------------------------------------------------------------
r14207 | cbiere | 2007-07-28 04:55:31 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Added property "sources_col_widths".

------------------------------------------------------------------------
r14206 | cbiere | 2007-07-28 04:53:55 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Added guc_download_get_vendor().

------------------------------------------------------------------------
r14205 | cbiere | 2007-07-28 04:51:32 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Moved some code to downloads_common.[ch] so that it is shared.

------------------------------------------------------------------------
r14204 | cbiere | 2007-07-28 04:48:45 -0400 (Sat, 28 Jul 2007) | 2 lines

 * Added property "sources_col_widths".

------------------------------------------------------------------------
r14203 | cbiere | 2007-07-28 04:44:55 -0400 (Sat, 28 Jul 2007) | 6 lines

 * download_stop_v(): Must check for d->thex not the flag because the
   context might have been released already.
 * Added some extra checks for FILE_INFO_FINISHED() to functions which are
   called from the GUI because the core code must not assume that the GUI knows
   which actions are legit at any time.

------------------------------------------------------------------------
r14202 | cbiere | 2007-07-27 23:51:41 -0400 (Fri, 27 Jul 2007) | 2 lines

 * Use soft assertions because GUI bugs causing crashes are meh.

------------------------------------------------------------------------
r14201 | cbiere | 2007-07-27 22:23:32 -0400 (Fri, 27 Jul 2007) | 2 lines

 * Added switch to hide the menubar (F9).

------------------------------------------------------------------------
r14200 | cbiere | 2007-07-27 21:04:05 -0400 (Fri, 27 Jul 2007) | 2 lines

 * Removed dead code.

------------------------------------------------------------------------
r14199 | cbiere | 2007-07-27 20:40:37 -0400 (Fri, 27 Jul 2007) | 2 lines

 * Reordered tabs so that the most important ones come first.

------------------------------------------------------------------------
r14198 | cbiere | 2007-07-27 17:59:55 -0400 (Fri, 27 Jul 2007) | 2 lines

 * [GTK1] Updated code due to addition of "notebook_downloads".

------------------------------------------------------------------------
r14197 | cbiere | 2007-07-27 17:51:28 -0400 (Fri, 27 Jul 2007) | 2 lines

 * Removed dead enums.

------------------------------------------------------------------------
r14196 | cbiere | 2007-07-27 15:29:00 -0400 (Fri, 27 Jul 2007) | 3 lines

 * 12590 new items.
 * 300166 total.

------------------------------------------------------------------------
r14195 | cbiere | 2007-07-26 17:20:06 -0400 (Thu, 26 Jul 2007) | 2 lines

 * Removed duplicate prototypes.

------------------------------------------------------------------------
r14194 | cbiere | 2007-07-26 01:36:35 -0400 (Thu, 26 Jul 2007) | 2 lines

 * Created sub-tabs for Downloads.

------------------------------------------------------------------------
r14193 | cbiere | 2007-07-26 01:17:51 -0400 (Thu, 26 Jul 2007) | 2 lines

 * Added property "auto_clear_finished_downloads" and togglebutton.

------------------------------------------------------------------------
r14192 | cbiere | 2007-07-26 01:10:52 -0400 (Thu, 26 Jul 2007) | 2 lines

 * file_info_shared_sha1(): Use FILE_INFO_FINISHED().

------------------------------------------------------------------------
r14191 | cbiere | 2007-07-26 01:08:32 -0400 (Thu, 26 Jul 2007) | 3 lines

 * Added FILE_INFO_FINISHED() for cases in which FILE_INFO_COMPLETE() is
   insufficient.

------------------------------------------------------------------------
r14190 | bpringlemeir | 2007-07-25 23:17:24 -0400 (Wed, 25 Jul 2007) | 2 lines

Changed generated style sheet used.

------------------------------------------------------------------------
r14189 | bpringlemeir | 2007-07-25 23:16:29 -0400 (Wed, 25 Jul 2007) | 2 lines

Updated NAT information.

------------------------------------------------------------------------
r14188 | bpringlemeir | 2007-07-25 23:16:05 -0400 (Wed, 25 Jul 2007) | 2 lines

A manual style sheet.  Cribbed from default.css for now.

------------------------------------------------------------------------
r14187 | cbiere | 2007-07-25 22:51:01 -0400 (Wed, 25 Jul 2007) | 4 lines

 * file_info_shared_sha1(): Don't return the fileinfo if the file is complete
   but not seeding because file_info_upload_stop() only clears FI_F_SEEDING
   but does not discard the fileinfo.

------------------------------------------------------------------------
r14186 | cbiere | 2007-07-25 20:51:21 -0400 (Wed, 25 Jul 2007) | 2 lines

 * 5714 new items.

------------------------------------------------------------------------
r14185 | cbiere | 2007-07-25 19:09:16 -0400 (Wed, 25 Jul 2007) | 2 lines

 * Merged code into file_info_drop_handle() which was duplicated.

------------------------------------------------------------------------
r14184 | cbiere | 2007-07-25 19:00:24 -0400 (Wed, 25 Jul 2007) | 4 lines

 * fi_dispose(): As file_info_hash_remove() is skipped here, call
   file_info_upload_stop() because fi->sf must be cleared before we drop
   the handle and finally call reach fi_free().

------------------------------------------------------------------------
r14183 | cbiere | 2007-07-25 11:48:27 -0400 (Wed, 25 Jul 2007) | 2 lines

 * 10917 new items.

------------------------------------------------------------------------
r14182 | cbiere | 2007-07-24 21:00:22 -0400 (Tue, 24 Jul 2007) | 2 lines

 * 1217 new items.

------------------------------------------------------------------------
r14181 | cbiere | 2007-07-24 14:21:14 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Removed property "experimental_tigertree_support".

------------------------------------------------------------------------
r14180 | cbiere | 2007-07-24 13:31:00 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Switch to the "Searches" tab if the user clicks on the list in the sidebar.

------------------------------------------------------------------------
r14179 | cbiere | 2007-07-24 01:02:18 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14178 | cbiere | 2007-07-24 01:01:23 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Plugged massive memory leak in previous edit.

------------------------------------------------------------------------
r14177 | cbiere | 2007-07-24 00:33:53 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Updated maintainer.

------------------------------------------------------------------------
r14176 | cbiere | 2007-07-24 00:30:55 -0400 (Tue, 24 Jul 2007) | 2 lines

 * Homepage: Use the canonic URL.

------------------------------------------------------------------------
r14175 | cbiere | 2007-07-23 23:44:54 -0400 (Mon, 23 Jul 2007) | 2 lines

 * 10238 new items.

------------------------------------------------------------------------
r14174 | cbiere | 2007-07-23 23:38:27 -0400 (Mon, 23 Jul 2007) | 3 lines

 * Show the download details in a generic list just like the search result
   details.

------------------------------------------------------------------------
r14173 | cbiere | 2007-07-23 23:34:25 -0400 (Mon, 23 Jul 2007) | 2 lines

 * There is no space in "filename" and "filesize".

------------------------------------------------------------------------
r14172 | cbiere | 2007-07-23 23:32:15 -0400 (Mon, 23 Jul 2007) | 2 lines

 * Include <gdk/gdkkeysyms.h> from gui.h.

------------------------------------------------------------------------
r14171 | cbiere | 2007-07-23 23:28:52 -0400 (Mon, 23 Jul 2007) | 2 lines

 * search_gui_nice_size(): Use nice_size().

------------------------------------------------------------------------
r14170 | cbiere | 2007-07-23 23:27:49 -0400 (Mon, 23 Jul 2007) | 2 lines

 * Added downloads_gui_set_details() and others.

------------------------------------------------------------------------
r14169 | cbiere | 2007-07-23 23:25:45 -0400 (Mon, 23 Jul 2007) | 2 lines

 * Added nice_size().

------------------------------------------------------------------------
r14168 | cbiere | 2007-07-23 21:02:49 -0400 (Mon, 23 Jul 2007) | 3 lines

 * [GTK1] Removed redundant navigator.
 * [GTK2] Prepared different display of downloads.

------------------------------------------------------------------------
r14167 | cbiere | 2007-07-23 18:55:07 -0400 (Mon, 23 Jul 2007) | 2 lines

 * Corrected mistake in previous edit.

------------------------------------------------------------------------
r14166 | rmanfredi | 2007-07-23 17:46:20 -0400 (Mon, 23 Jul 2007) | 2 lines

Fixed missing semicolon.

------------------------------------------------------------------------
r14165 | cbiere | 2007-07-23 11:55:46 -0400 (Mon, 23 Jul 2007) | 2 lines

 * 17432 new items.

------------------------------------------------------------------------
r14164 | cbiere | 2007-07-23 11:47:56 -0400 (Mon, 23 Jul 2007) | 2 lines

 * download_push_ack(): Show messages when debugging only.

------------------------------------------------------------------------
r14163 | cbiere | 2007-07-22 20:04:57 -0400 (Sun, 22 Jul 2007) | 2 lines

 * Disabled "Reception Shortage" because this is really nonsense.

------------------------------------------------------------------------
r14162 | cbiere | 2007-07-22 19:56:22 -0400 (Sun, 22 Jul 2007) | 2 lines

 * Raised the bar for "Reception shortage" because this was too trigger happy.

------------------------------------------------------------------------
r14161 | cbiere | 2007-07-22 17:18:57 -0400 (Sun, 22 Jul 2007) | 2 lines

 * 1798 new items.

------------------------------------------------------------------------
r14160 | cbiere | 2007-07-22 16:58:41 -0400 (Sun, 22 Jul 2007) | 3 lines

 * gtk_widget_fix_width(): Allocate a bit more because uptime clock is still
   cut-off otherwise.

------------------------------------------------------------------------
r14159 | cbiere | 2007-07-22 16:53:42 -0400 (Sun, 22 Jul 2007) | 2 lines

 * Set the notebook tabs scrollable in case there are too many to be displayed.

------------------------------------------------------------------------
r14158 | cbiere | 2007-07-22 15:33:16 -0400 (Sun, 22 Jul 2007) | 2 lines

 * [GTK2] Removed redundant navigation tree.

------------------------------------------------------------------------
r14157 | cbiere | 2007-07-22 13:52:19 -0400 (Sun, 22 Jul 2007) | 2 lines

 * ZOMFTabs!1

------------------------------------------------------------------------
r14156 | cbiere | 2007-07-22 11:31:06 -0400 (Sun, 22 Jul 2007) | 2 lines

 * search_gui_set_details(): Show the country under Host information.

------------------------------------------------------------------------
r14155 | cbiere | 2007-07-22 10:07:22 -0400 (Sun, 22 Jul 2007) | 2 lines

 * download_push_ack(): Show message only when debugging.

------------------------------------------------------------------------
r14154 | cbiere | 2007-07-22 09:45:34 -0400 (Sun, 22 Jul 2007) | 2 lines

 * fi_gui_clear_details(): Clear the SHA-1 label too.

------------------------------------------------------------------------
r14153 | cbiere | 2007-07-22 09:44:26 -0400 (Sun, 22 Jul 2007) | 3 lines

 * qrp_hashcode(): Added suffix to constant just in case.
 * qrp_add_file(): Use sha1_to_urn_string_buf().

------------------------------------------------------------------------
r14152 | cbiere | 2007-07-22 09:36:14 -0400 (Sun, 22 Jul 2007) | 2 lines

 * Use build.sh instead of Configure.

------------------------------------------------------------------------
r14151 | cbiere | 2007-07-22 09:27:25 -0400 (Sun, 22 Jul 2007) | 2 lines

 * 2994 new items.

------------------------------------------------------------------------
r14150 | rmanfredi | 2007-07-22 05:50:26 -0400 (Sun, 22 Jul 2007) | 3 lines

Added assertions to make sure no RX I/O callback (data indication type) is
ever called unless we are marked active.

------------------------------------------------------------------------
r14149 | cbiere | 2007-07-21 22:01:45 -0400 (Sat, 21 Jul 2007) | 2 lines

 * 2774 new items.

------------------------------------------------------------------------
r14148 | cbiere | 2007-07-21 19:54:27 -0400 (Sat, 21 Jul 2007) | 2 lines

 * 12009 new items.

------------------------------------------------------------------------
r14147 | cbiere | 2007-07-21 18:42:18 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Calculate the slice size when the tigertree is initialized.

------------------------------------------------------------------------
r14146 | cbiere | 2007-07-21 18:08:14 -0400 (Sat, 21 Jul 2007) | 4 lines

 * file_info_hash_remove(): Call file_info_upload_stop() here instead of
   fi_free() before we discard the handle.
 * fi_free(): Added assertion check.

------------------------------------------------------------------------
r14145 | cbiere | 2007-07-21 17:58:16 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Let file_info_upload_stop() check fi->sf against NULL instead of the caller.

------------------------------------------------------------------------
r14144 | cbiere | 2007-07-21 17:46:20 -0400 (Sat, 21 Jul 2007) | 3 lines

 * file_info_changed(): Check for fi->hashed because otherwise the handle is
   no longer valid and no event should be emitted.

------------------------------------------------------------------------
r14143 | cbiere | 2007-07-21 17:19:11 -0400 (Sat, 21 Jul 2007) | 3 lines

 * If we detect a SHA-1 mismatch, verify the file data against the tigertree,
   discard non-matching chunks and restart the download.

------------------------------------------------------------------------
r14142 | cbiere | 2007-07-21 17:15:37 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Added prototypes.

------------------------------------------------------------------------
r14141 | cbiere | 2007-07-21 17:14:04 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Added missing implementations.

------------------------------------------------------------------------
r14140 | cbiere | 2007-07-21 17:13:23 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Added prototype of tt_block_count().

------------------------------------------------------------------------
r14139 | cbiere | 2007-07-21 17:11:57 -0400 (Sat, 21 Jul 2007) | 2 lines

 * Keep the start and end offsets constant just in case we need it later.

------------------------------------------------------------------------
r14138 | rmanfredi | 2007-07-21 03:01:49 -0400 (Sat, 21 Jul 2007) | 3 lines

Fixed uninitialized used of flags in search_request(), probably due to the
splitting of that routine into two with search_request_preprocess().

------------------------------------------------------------------------
r14137 | cbiere | 2007-07-21 00:05:04 -0400 (Sat, 21 Jul 2007) | 3 lines

 * search_request_preprocess(): Don't hide any dropped searches except if there
   was no trailing NUL.

------------------------------------------------------------------------
r14136 | cbiere | 2007-07-20 23:49:42 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Renamed "req_speed" to "flags".

------------------------------------------------------------------------
r14135 | cbiere | 2007-07-20 23:42:34 -0400 (Fri, 20 Jul 2007) | 5 lines

 * Moved most code from search_request() to search_request_preprocess()
   which must be called for each query not just locally handled ones.
   This prevents forwarding garbage and other queries which should have
   been dropped.

------------------------------------------------------------------------
r14134 | cbiere | 2007-07-20 23:05:51 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Added prototype for sha1_to_urn_string_buf().

------------------------------------------------------------------------
r14133 | cbiere | 2007-07-20 21:35:33 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Revert.

------------------------------------------------------------------------
r14132 | cbiere | 2007-07-20 21:30:20 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Moved query handling from share.[ch] to search.[ch] where it belongs.

------------------------------------------------------------------------
r14131 | cbiere | 2007-07-20 21:26:49 -0400 (Fri, 20 Jul 2007) | 3 lines

 * Handle "as=<URL>" just like "xs=<URL>" before someone starts using it. Who
   needs standards anyway?

------------------------------------------------------------------------
r14130 | cbiere | 2007-07-20 19:54:11 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Drop queries sent by certified morons.

------------------------------------------------------------------------
r14129 | cbiere | 2007-07-20 18:42:46 -0400 (Fri, 20 Jul 2007) | 2 lines

 * 12070 new items.

------------------------------------------------------------------------
r14128 | cbiere | 2007-07-20 17:30:03 -0400 (Fri, 20 Jul 2007) | 5 lines

 * Added file_info_unique_filename() which must be used that a filename is
   also internally unique. Otherwise, there will be an assertion failure if
   a file with the same filename is downloaded after the first has been
   removed but is still tracked internally (as being finished or seeding).

------------------------------------------------------------------------
r14127 | cbiere | 2007-07-20 17:22:38 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Typo.

------------------------------------------------------------------------
r14126 | cbiere | 2007-07-20 10:15:09 -0400 (Fri, 20 Jul 2007) | 2 lines

 * Slightly rearranged search result details.

------------------------------------------------------------------------
r14125 | cbiere | 2007-07-17 17:20:35 -0400 (Tue, 17 Jul 2007) | 2 lines

 * 5140 new items.

------------------------------------------------------------------------
r14124 | cbiere | 2007-07-17 14:42:48 -0400 (Tue, 17 Jul 2007) | 2 lines

 * 5147 new items.

------------------------------------------------------------------------
r14123 | cbiere | 2007-07-17 12:11:11 -0400 (Tue, 17 Jul 2007) | 2 lines

 * Added another BS detector.

------------------------------------------------------------------------
r14122 | cbiere | 2007-07-17 08:13:07 -0400 (Tue, 17 Jul 2007) | 3 lines

 * 6440 new items.
 * 200139 total.

------------------------------------------------------------------------
r14121 | cbiere | 2007-07-16 20:56:03 -0400 (Mon, 16 Jul 2007) | 2 lines

 * 4348 new items.

------------------------------------------------------------------------
r14120 | cbiere | 2007-07-16 12:49:39 -0400 (Mon, 16 Jul 2007) | 2 lines

 * 1327 new items.

------------------------------------------------------------------------
r14119 | rmanfredi | 2007-07-16 09:27:49 -0400 (Mon, 16 Jul 2007) | 3 lines

Use new main_gui_window_visible() routine to avoid updating the display when
the window is not even visible.

------------------------------------------------------------------------
r14118 | cbiere | 2007-07-15 19:47:51 -0400 (Sun, 15 Jul 2007) | 2 lines

 * Avoid updates if the window is not visible.

------------------------------------------------------------------------
r14117 | cbiere | 2007-07-15 19:47:10 -0400 (Sun, 15 Jul 2007) | 2 lines

 * main_gui_window_visible(): Works for Gtk+ 1.2 too now.

------------------------------------------------------------------------
r14116 | cbiere | 2007-07-15 18:31:27 -0400 (Sun, 15 Jul 2007) | 2 lines

 * gnet_stats_gui_update(): Avoid updates if the window isn't visible.

------------------------------------------------------------------------
r14115 | cbiere | 2007-07-15 16:45:32 -0400 (Sun, 15 Jul 2007) | 2 lines

 * Avoid unnecessary updates if the main window is not visible.

------------------------------------------------------------------------
r14114 | rmanfredi | 2007-07-15 16:44:05 -0400 (Sun, 15 Jul 2007) | 2 lines

Enabled ShareMonkey URL display now that we're unstable again.

------------------------------------------------------------------------
r14113 | cbiere | 2007-07-15 16:44:02 -0400 (Sun, 15 Jul 2007) | 3 lines

 * Added main_gui_window_visible().
 * Keep track of the state of the main window.

------------------------------------------------------------------------
r14112 | cbiere | 2007-07-15 16:37:54 -0400 (Sun, 15 Jul 2007) | 2 lines

 * on_tree_view_search_results_button_press_event(): Simplified.

------------------------------------------------------------------------
r14111 | cbiere | 2007-07-15 16:03:58 -0400 (Sun, 15 Jul 2007) | 2 lines

 * 200 new items.

------------------------------------------------------------------------
r14110 | cbiere | 2007-07-15 15:13:18 -0400 (Sun, 15 Jul 2007) | 2 lines

 * nodes_gui_update_nodes_display(): Removed debug message.

------------------------------------------------------------------------
r14109 | cbiere | 2007-07-15 15:05:39 -0400 (Sun, 15 Jul 2007) | 2 lines

 * Avoid unnecessary updates of items not currently visible.

------------------------------------------------------------------------
r14108 | cbiere | 2007-07-15 14:57:38 -0400 (Sun, 15 Jul 2007) | 2 lines

 * Caught some bigger shark.

------------------------------------------------------------------------
r14107 | cbiere | 2007-07-15 13:15:14 -0400 (Sun, 15 Jul 2007) | 2 lines

 * upload_stop_all(): Added some checks.

------------------------------------------------------------------------
r14106 | cbiere | 2007-07-14 19:27:01 -0400 (Sat, 14 Jul 2007) | 2 lines

 * 90 new items.

------------------------------------------------------------------------
r14105 | cbiere | 2007-07-14 14:47:30 -0400 (Sat, 14 Jul 2007) | 2 lines

 * Updated provided by FlashCode.

------------------------------------------------------------------------
r14104 | cbiere | 2007-07-14 14:39:05 -0400 (Sat, 14 Jul 2007) | 2 lines

 * First webair, now off air.

------------------------------------------------------------------------
r14103 | cbiere | 2007-07-14 13:18:54 -0400 (Sat, 14 Jul 2007) | 3 lines

 * Store timestamps when saving the hostcaches to disk so that the items are
   properly expired.

------------------------------------------------------------------------
r14102 | cbiere | 2007-07-14 00:22:29 -0400 (Sat, 14 Jul 2007) | 2 lines

 * Plus one. 

------------------------------------------------------------------------
r14101 | cbiere | 2007-07-14 00:03:06 -0400 (Sat, 14 Jul 2007) | 2 lines

 * 86 new items.

------------------------------------------------------------------------
r14100 | cbiere | 2007-07-13 23:42:03 -0400 (Fri, 13 Jul 2007) | 2 lines

 * Removed overlapping range.

------------------------------------------------------------------------
r14099 | cbiere | 2007-07-13 23:10:00 -0400 (Fri, 13 Jul 2007) | 2 lines

 * Overkill killed the spammer.

------------------------------------------------------------------------
r14098 | cbiere | 2007-07-13 22:50:10 -0400 (Fri, 13 Jul 2007) | 2 lines

 * Eliminated.

------------------------------------------------------------------------
r14097 | cbiere | 2007-07-13 22:39:39 -0400 (Fri, 13 Jul 2007) | 2 lines

 * Kill them all, let bob sort'em out.

------------------------------------------------------------------------
r14096 | bpringlemeir | 2007-07-13 22:36:47 -0400 (Fri, 13 Jul 2007) | 3 lines

gtk-gnutella may not be installed or local_shell.c might have been
compiled as a standalone.  Allow some way to over-ride default.

------------------------------------------------------------------------
r14095 | cbiere | 2007-07-13 22:13:05 -0400 (Fri, 13 Jul 2007) | 2 lines

 * More scum.

------------------------------------------------------------------------
r14094 | cbiere | 2007-07-13 21:46:11 -0400 (Fri, 13 Jul 2007) | 2 lines

 * Reject bad arguments.

------------------------------------------------------------------------
r14093 | cbiere | 2007-07-13 21:39:29 -0400 (Fri, 13 Jul 2007) | 5 lines

 * Use the shell's here-document feature instead of echo so that the magnet
   is not exposed to the public enviroment. Yeah, it's pointless because
   the magnet is already the argument of the shell script but as long as
   there is copy and paste, one should always use BCPs.

------------------------------------------------------------------------
r14092 | cbiere | 2007-07-13 21:33:42 -0400 (Fri, 13 Jul 2007) | 4 lines

 * Don't fetch the next best executable with "gnutella" in the process
   arguments from proc because it screams for being exploited on any true
   multi-user system. gtk-gnutella should be found in PATH.

------------------------------------------------------------------------
r14091 | cbiere | 2007-07-13 21:29:13 -0400 (Fri, 13 Jul 2007) | 3 lines

 * Removed bashisms. '==' is not a valid operator in any Bourne Shell. This
   is a pointless, embrace-and-extended feature of Bash.

------------------------------------------------------------------------
r14090 | bpringlemeir | 2007-07-13 21:02:52 -0400 (Fri, 13 Jul 2007) | 2 lines

Added firefox-magnet.sh to MANIFEST.

------------------------------------------------------------------------
r14089 | bpringlemeir | 2007-07-13 20:59:37 -0400 (Fri, 13 Jul 2007) | 3 lines

An attempt to get Firefox/Mozilla to automatically schedule downloads
in GTKG when the user click on a magnet link in the browser.

------------------------------------------------------------------------
r14088 | cbiere | 2007-07-13 18:26:33 -0400 (Fri, 13 Jul 2007) | 3 lines

 * utf32_canonize(): Use utf32_case_fold() instead of utf32_strlowercase() so
   that e.g., "ß" is converted to "ss".

------------------------------------------------------------------------
r14087 | cbiere | 2007-07-13 18:00:59 -0400 (Fri, 13 Jul 2007) | 3 lines

 * Limit search terms to 30 characters because LimeWire drops longer ones
   anyway.

------------------------------------------------------------------------
r14086 | daichik | 2007-07-13 17:52:59 -0400 (Fri, 13 Jul 2007) | 2 lines

Revised some translations.

------------------------------------------------------------------------
r14084 | daichik | 2007-07-12 16:25:15 -0400 (Thu, 12 Jul 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r14083 | daichik | 2007-07-12 16:23:52 -0400 (Thu, 12 Jul 2007) | 2 lines

Bumped.

------------------------------------------------------------------------
r14082 | cbiere | 2007-07-11 15:17:06 -0400 (Wed, 11 Jul 2007) | 2 lines

 * udp_close(): Prevent pointless warning.

------------------------------------------------------------------------
r14079 | cbiere | 2007-07-10 20:32:17 -0400 (Tue, 10 Jul 2007) | 3 lines

 * Reverted previous change: Don't drop queries with XML anymore. Hereby, we
   are now ultimately the good guys.

------------------------------------------------------------------------
r14077 | cbiere | 2007-07-09 04:07:50 -0400 (Mon, 09 Jul 2007) | 3 lines

 * search_request(): Let's drop all XML queries until LimeWire stops
   bullshitting.

------------------------------------------------------------------------
r14076 | cbiere | 2007-07-09 03:19:21 -0400 (Mon, 09 Jul 2007) | 2 lines

 * unicode_filters(): Keep some ASCII characters because LimeWire keeps them.

------------------------------------------------------------------------
r14075 | cbiere | 2007-07-09 00:00:13 -0400 (Mon, 09 Jul 2007) | 2 lines

 * More fuckers^Wspammers.

------------------------------------------------------------------------
r14074 | cbiere | 2007-07-08 19:36:42 -0400 (Sun, 08 Jul 2007) | 2 lines

 * Back to the future II.

------------------------------------------------------------------------
r14073 | cbiere | 2007-07-08 16:56:18 -0400 (Sun, 08 Jul 2007) | 2 lines

 * 94 new items.

------------------------------------------------------------------------
r14072 | cbiere | 2007-07-08 16:19:37 -0400 (Sun, 08 Jul 2007) | 3 lines

 * Fixed minor atom leak.
 * Simplified.

------------------------------------------------------------------------
r14071 | cbiere | 2007-07-08 13:16:18 -0400 (Sun, 08 Jul 2007) | 2 lines

 * Apparently CompleteWhois fucked up previously. 

------------------------------------------------------------------------
r14070 | cbiere | 2007-07-08 08:45:28 -0400 (Sun, 08 Jul 2007) | 2 lines

 * Back to the future.

------------------------------------------------------------------------
r14064 | cbiere | 2007-07-07 00:13:57 -0400 (Sat, 07 Jul 2007) | 2 lines

 * Release 0.96.4 stable.

------------------------------------------------------------------------
r14063 | cbiere | 2007-07-07 00:09:57 -0400 (Sat, 07 Jul 2007) | 2 lines

 * Install spam_sha1.txt too.

------------------------------------------------------------------------
r14062 | cbiere | 2007-07-07 00:08:50 -0400 (Sat, 07 Jul 2007) | 2 lines

 * Removed duplicate and overlapping ranges.

------------------------------------------------------------------------
r14061 | cbiere | 2007-07-06 23:56:56 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Improved so that this works for mortals too.

------------------------------------------------------------------------
r14060 | cbiere | 2007-07-06 22:46:28 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Updated.

------------------------------------------------------------------------
r14059 | cbiere | 2007-07-06 22:32:56 -0400 (Fri, 06 Jul 2007) | 2 lines

 * 56 new items.

------------------------------------------------------------------------
r14058 | cbiere | 2007-07-06 21:46:53 -0400 (Fri, 06 Jul 2007) | 3 lines

 * search_gui_common_init(): Fixed run-time Gtk+ warnings when clicking on
   the search list pop-down menu before any search has been created.

------------------------------------------------------------------------
r14057 | cbiere | 2007-07-06 21:22:58 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Updated German translation.

------------------------------------------------------------------------
r14056 | cbiere | 2007-07-06 19:43:37 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Update provided by Alexander Nicolaysen Sørnes.

------------------------------------------------------------------------
r14055 | cbiere | 2007-07-06 18:55:47 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Removed unused property.

------------------------------------------------------------------------
r14054 | cbiere | 2007-07-06 18:48:52 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Renamed thex_upload_calculate_size() to thex_upload_get_content_length().

------------------------------------------------------------------------
r14053 | cbiere | 2007-07-06 18:47:46 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Removed unnecessary line-break.

------------------------------------------------------------------------
r14052 | cbiere | 2007-07-06 17:28:36 -0400 (Fri, 06 Jul 2007) | 2 lines

 * Don't list --no-halloc if USE_HALLOC is disabled at compile-time.

------------------------------------------------------------------------
r14051 | cbiere | 2007-07-05 21:19:10 -0400 (Thu, 05 Jul 2007) | 3 lines

 * request_tigertree_callback(): Corrected mistake in previous two commits;
   PROP_TTH_REBUILDING wasn't set for new files.

------------------------------------------------------------------------
r14050 | cbiere | 2007-07-05 21:05:14 -0400 (Thu, 05 Jul 2007) | 3 lines

 * request_tigertree_callback(): Don't set PROP_TTH_REBUILDING if the
   calculation is skipped to avoid unnecessary updates.

------------------------------------------------------------------------
r14049 | cbiere | 2007-07-05 20:08:46 -0400 (Thu, 05 Jul 2007) | 3 lines

 * Check for cached tigertree data in the background to avoid annoying
   stalling when the TTH cache is traversed after scanning has finished.

------------------------------------------------------------------------
r14039 | bpringlemeir | 2007-07-05 13:17:09 -0400 (Thu, 05 Jul 2007) | 2 lines

Updated to conform to request on linked page.

------------------------------------------------------------------------
r14036 | cbiere | 2007-07-04 16:45:48 -0400 (Wed, 04 Jul 2007) | 2 lines

 * try_close_from(): Suppress compiler warning.

------------------------------------------------------------------------
r14035 | cbiere | 2007-07-04 02:52:35 -0400 (Wed, 04 Jul 2007) | 3 lines

 * Don't declare utf8_regression_checks() static as it's potentially unused;
   thus suppress the compiler warning.

------------------------------------------------------------------------
r14034 | cbiere | 2007-07-04 02:50:28 -0400 (Wed, 04 Jul 2007) | 3 lines

 * Calculate the Content-Length for THEX uploads in advance because LimeWire
   requires this.

------------------------------------------------------------------------
r14033 | cbiere | 2007-07-03 20:53:52 -0400 (Tue, 03 Jul 2007) | 2 lines

 * Use closefrom() if available.

------------------------------------------------------------------------
r14032 | cbiere | 2007-07-03 19:17:08 -0400 (Tue, 03 Jul 2007) | 4 lines

 * Guess the MIME type of shared files from the filename extension so that
   we can send a more accurate Content-Type header. This makes a difference
   for streaming audio or video files, for example.

------------------------------------------------------------------------
r14031 | cbiere | 2007-07-03 18:25:12 -0400 (Tue, 03 Jul 2007) | 4 lines

 * bio_sendfile():
   * Minor simplification.
   * Make sure the original errno from mmap() is preserved.

------------------------------------------------------------------------
r14030 | cbiere | 2007-07-03 18:22:50 -0400 (Tue, 03 Jul 2007) | 2 lines

 * create_directory(): Removed debug messages.

------------------------------------------------------------------------
r14029 | cbiere | 2007-07-03 11:44:47 -0400 (Tue, 03 Jul 2007) | 2 lines

 * ban_allow(): Never ever ban whitelisted addresses.

------------------------------------------------------------------------
r14028 | cbiere | 2007-07-02 22:58:47 -0400 (Mon, 02 Jul 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14027 | cbiere | 2007-07-02 22:52:22 -0400 (Mon, 02 Jul 2007) | 2 lines

 * Added one address.

------------------------------------------------------------------------
r14026 | cbiere | 2007-07-02 22:51:19 -0400 (Mon, 02 Jul 2007) | 2 lines

 * 98 new items.

------------------------------------------------------------------------
r14025 | cbiere | 2007-07-02 22:41:59 -0400 (Mon, 02 Jul 2007) | 3 lines

 * widget_init_choices(): Fixed bug in previous (r13990) revision which
   resulted in dead option menus.

------------------------------------------------------------------------
r14024 | cbiere | 2007-07-02 21:34:46 -0400 (Mon, 02 Jul 2007) | 2 lines

 * struct query_hashvec: Reduced struct size.

------------------------------------------------------------------------
r14023 | cbiere | 2007-07-02 21:14:18 -0400 (Mon, 02 Jul 2007) | 2 lines

 * search_init(): Use QRP_HVEC_MAX.

------------------------------------------------------------------------
r14022 | cbiere | 2007-07-02 21:07:38 -0400 (Mon, 02 Jul 2007) | 3 lines

 * Added QRP_HVEC_MAX.
 * qhvec_alloc(): Clamp the size, just in case.

------------------------------------------------------------------------
r14021 | cbiere | 2007-07-02 21:02:54 -0400 (Mon, 02 Jul 2007) | 3 lines

 * search_request(): No need to copy the string any longer; st_search() does
   not modify anymore.

------------------------------------------------------------------------
r14020 | cbiere | 2007-07-02 20:44:45 -0400 (Mon, 02 Jul 2007) | 2 lines

 * Don't expose details of struct query_hash.

------------------------------------------------------------------------
r14019 | cbiere | 2007-07-02 20:14:38 -0400 (Mon, 02 Jul 2007) | 3 lines

 * Insert words shorter than 3 characters into the QRT as well. Use
   QRP_MIN_WORD_LENGTH only when chopping off trailing characters.

------------------------------------------------------------------------
r14018 | cbiere | 2007-07-02 14:30:15 -0400 (Mon, 02 Jul 2007) | 2 lines

 * Removed one UHC.

------------------------------------------------------------------------
r14017 | bpringlemeir | 2007-07-02 08:57:18 -0400 (Mon, 02 Jul 2007) | 3 lines

Update glossary on special search notation.
Corrected "d" and "f" node flags.

------------------------------------------------------------------------
r14016 | cbiere | 2007-07-02 02:14:58 -0400 (Mon, 02 Jul 2007) | 2 lines

 * get_results_set(): Another trap.

------------------------------------------------------------------------
r14015 | cbiere | 2007-07-02 01:49:46 -0400 (Mon, 02 Jul 2007) | 4 lines

 * build_search_msg(): Do what the comment says; don't indicate support for
   OOBv3 if our queries may be proxied because our ultrapeers might not
   support it.

------------------------------------------------------------------------
r14014 | cbiere | 2007-07-02 01:26:33 -0400 (Mon, 02 Jul 2007) | 4 lines

 * build_search_msg(): Use a funny backslash as search term for SHA-1 queries
   like other servents. Maybe some broken trashware drops queries with an empty
   search term.

------------------------------------------------------------------------
r14012 | cbiere | 2007-07-01 19:53:03 -0400 (Sun, 01 Jul 2007) | 3 lines

 * Added --configure-only flag.
 * Pass $MAKE to Configure.

------------------------------------------------------------------------
r14010 | cbiere | 2007-07-01 18:21:19 -0400 (Sun, 01 Jul 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r14009 | cbiere | 2007-07-01 16:32:50 -0400 (Sun, 01 Jul 2007) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r14008 | cbiere | 2007-07-01 15:34:16 -0400 (Sun, 01 Jul 2007) | 2 lines

 * utf8_latinize(): Slightly improved to handle diphthongs.

------------------------------------------------------------------------
r14007 | cbiere | 2007-07-01 15:18:41 -0400 (Sun, 01 Jul 2007) | 2 lines

 * search_gui_set_details(): Hide some items for browse host results.

------------------------------------------------------------------------
r14006 | cbiere | 2007-07-01 15:17:19 -0400 (Sun, 01 Jul 2007) | 2 lines

 * whitelist_retrieve(): Fixed parsing of IPv6 addresses with port numbers.

------------------------------------------------------------------------
r14005 | cbiere | 2007-07-01 14:14:31 -0400 (Sun, 01 Jul 2007) | 3 lines

 * search_gui_parse_text_query(): Use a sub-string filter instead of a word
   filter.

------------------------------------------------------------------------
r14004 | cbiere | 2007-07-01 13:46:52 -0400 (Sun, 01 Jul 2007) | 3 lines

 * search_gui_parse_text_query(): Added simple support for quoted search
   terms and quoted filter patterns.

------------------------------------------------------------------------
r14003 | cbiere | 2007-07-01 11:14:59 -0400 (Sun, 01 Jul 2007) | 3 lines

 * Moved display of latinized filename from tooltip window to the
   search result details.

------------------------------------------------------------------------
r14002 | cbiere | 2007-07-01 10:26:27 -0400 (Sun, 01 Jul 2007) | 2 lines

 * Declared a couple of functions as static.

------------------------------------------------------------------------
r14001 | cbiere | 2007-07-01 10:16:15 -0400 (Sun, 01 Jul 2007) | 4 lines

 * Moved handling of data dropped to the main window from drop.c to
   search_common.c.
 * Removed unnecessary drop_init() and drop_close().

------------------------------------------------------------------------
r14000 | cbiere | 2007-06-30 20:36:28 -0400 (Sat, 30 Jun 2007) | 2 lines

 * Updated UHC list.

------------------------------------------------------------------------
r13999 | cbiere | 2007-06-30 19:47:49 -0400 (Sat, 30 Jun 2007) | 3 lines

 * List UTF-8 formats first because Gtk+ 2.x seems to default to the first
   match rather than best match.

------------------------------------------------------------------------
r13998 | cbiere | 2007-06-30 19:08:17 -0400 (Sat, 30 Jun 2007) | 2 lines

 * 323 new items.

------------------------------------------------------------------------
r13997 | cbiere | 2007-06-30 18:43:57 -0400 (Sat, 30 Jun 2007) | 5 lines

 * dmesh_parse_addr_port_list():
   * "endptr" was overwritten and thus not necessarily pointing to the next
     list item. This was harmless but slower and caused debug warnings.
   * Skip over "tls=*" for now. 

------------------------------------------------------------------------
r13996 | cbiere | 2007-06-30 18:00:06 -0400 (Sat, 30 Jun 2007) | 4 lines

 * Canonicalize search terms of incoming queries too because many clients
   don't strip hyphen, dots and other characters which means we would
   calculate wrong query hash vectors for these.

------------------------------------------------------------------------
r13995 | cbiere | 2007-06-30 17:40:42 -0400 (Sat, 30 Jun 2007) | 3 lines

 * Removed unnecessary fi_by_size hashtable.
 * struct dl_file_info: Removed unnecessary member "size_atom".

------------------------------------------------------------------------
r13994 | daichik | 2007-06-30 03:38:59 -0400 (Sat, 30 Jun 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13993 | daichik | 2007-06-30 03:26:07 -0400 (Sat, 30 Jun 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13992 | cbiere | 2007-06-29 23:20:24 -0400 (Fri, 29 Jun 2007) | 3 lines

 * search_gui_history_add(): Avoid adding duplicate strings as it breaks
   keyboard navigation.

------------------------------------------------------------------------
r13991 | cbiere | 2007-06-29 22:14:48 -0400 (Fri, 29 Jun 2007) | 2 lines

 * voxel.net is teh suxxx.

------------------------------------------------------------------------
r13990 | cbiere | 2007-06-29 20:59:50 -0400 (Fri, 29 Jun 2007) | 4 lines

 * Improved fix for #1568205.
 * Added wrapper macros gui_signal_* which evaluate either to the corresponding
   g_signal_* or gtk_signal_* function depending on the Gtk+ version used.

------------------------------------------------------------------------
r13989 | cbiere | 2007-06-29 18:52:23 -0400 (Fri, 29 Jun 2007) | 2 lines

 * Fixed handling of spinbutton for the search retry timeout (#1568205).

------------------------------------------------------------------------
r13988 | cbiere | 2007-06-29 16:56:21 -0400 (Fri, 29 Jun 2007) | 2 lines

 * Fixed CFLAGS concatenation.

------------------------------------------------------------------------
r13987 | cbiere | 2007-06-29 12:57:00 -0400 (Fri, 29 Jun 2007) | 2 lines

 * file_info_has_identical(): Simplified; use strict SHA-1 matching always.

------------------------------------------------------------------------
r13986 | cbiere | 2007-06-29 12:51:23 -0400 (Fri, 29 Jun 2007) | 4 lines

 * Added scaled down versions of icon.xpm.
 * Use a 16x16 icon as the tray icon as workaround for #1706641 "Tray icon
   too huge." which seems to be a bug in Gtk+ or GNOME.

------------------------------------------------------------------------
r13985 | cbiere | 2007-06-29 10:46:01 -0400 (Fri, 29 Jun 2007) | 2 lines

 * Removed fuzzy matching.

------------------------------------------------------------------------
r13984 | cbiere | 2007-06-29 09:31:06 -0400 (Fri, 29 Jun 2007) | 2 lines

 * Disabled halloc by default.

------------------------------------------------------------------------
r13983 | cbiere | 2007-06-29 08:02:42 -0400 (Fri, 29 Jun 2007) | 4 lines

 * create_download(): Added soft-assertion to prevent that we try to create a download with
   using a fileinfo with a different SHA-1 than the one passed if any.
 * download_set_sha1(): Simplified.

------------------------------------------------------------------------
r13982 | cbiere | 2007-06-28 14:43:47 -0400 (Thu, 28 Jun 2007) | 3 lines

 * Install a signal handler for SIGCHLD instead of ignoring it as workaround
   for modules or libraries which use wait() etc. incorrectly.

------------------------------------------------------------------------
r13981 | cbiere | 2007-06-28 10:21:35 -0400 (Thu, 28 Jun 2007) | 3 lines

 * Added command-line option "--no-halloc" as workaround for memory handling
   bugs in libraries.

------------------------------------------------------------------------
r13980 | cbiere | 2007-06-27 21:59:35 -0400 (Wed, 27 Jun 2007) | 2 lines

 * head_pong_queue_status(): Forgot to initialize the variables.

------------------------------------------------------------------------
r13979 | cbiere | 2007-06-27 21:49:43 -0400 (Wed, 27 Jun 2007) | 2 lines

 * Corrected negated queue status for HEAD Pongs.

------------------------------------------------------------------------
r13978 | cbiere | 2007-06-27 21:15:34 -0400 (Wed, 27 Jun 2007) | 3 lines

 * upload_collect_locations(): Ignore alternate locations if we're neither
   sharing or downloading a file with the given SHA-1 currently.

------------------------------------------------------------------------
r13977 | cbiere | 2007-06-27 20:10:51 -0400 (Wed, 27 Jun 2007) | 3 lines

 * huge_update_hashes(): Don't call request_tigertree() if we already know
   the root hash to reduce the time spent for rescanning.

------------------------------------------------------------------------
r13976 | cbiere | 2007-06-27 16:07:49 -0400 (Wed, 27 Jun 2007) | 2 lines

 * Added a spammer range.

------------------------------------------------------------------------
r13975 | cbiere | 2007-06-27 14:04:21 -0400 (Wed, 27 Jun 2007) | 3 lines

 * gtk_gnutella_exit(): Don't try to perform a graceful shutdown if killed by
   signal.

------------------------------------------------------------------------
r13974 | cbiere | 2007-06-25 16:57:45 -0400 (Mon, 25 Jun 2007) | 3 lines

 * create_download(): Check the server's GUID instead of the passed GUID,
   apparently the former may be blank.

------------------------------------------------------------------------
r13973 | cbiere | 2007-06-25 11:49:12 -0400 (Mon, 25 Jun 2007) | 2 lines

 * Place arbitrary dropped text into the search entry instead of rejecting it.

------------------------------------------------------------------------
r13972 | cbiere | 2007-06-25 11:40:20 -0400 (Mon, 25 Jun 2007) | 2 lines

 * gmsg_log_bad(): Use stderr instead of stdout.

------------------------------------------------------------------------
r13971 | cbiere | 2007-06-24 18:25:27 -0400 (Sun, 24 Jun 2007) | 3 lines

 * Simplified the drag interface.
 * [GTK2] Made the filename aliases dragable too.

------------------------------------------------------------------------
r13970 | cbiere | 2007-06-24 16:17:48 -0400 (Sun, 24 Jun 2007) | 7 lines

 * Replaced urn_get_http_sha1() with parse_base32_sha1() because the former
   name is confusing.
 * Changed str_len_capped() to slightly different clamp_strlen().
 * Removed unnecessary sha1_extract_from_uri() and sha1_offset_in_uri().
 * process_rdf_description(): Use urn_get_sha1() because urn:bitprint: would
   be parsed too and because base32_sha1() indicates no error.

------------------------------------------------------------------------
r13969 | cbiere | 2007-06-24 07:03:15 -0400 (Sun, 24 Jun 2007) | 5 lines

 * Removed support for fuzzy matching of alt-loc URLs to get rid of some
   unnecessary stuff. This was disabled by default anyway.
 * Added dmesh_add_good_alternate() as short-hand to refresh/insert alt-locs
   and mark them immediately as "good".

------------------------------------------------------------------------
r13968 | cbiere | 2007-06-24 06:56:31 -0400 (Sun, 24 Jun 2007) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r13967 | cbiere | 2007-06-24 06:56:03 -0400 (Sun, 24 Jun 2007) | 3 lines

 * drag_data_received(): Fixed prefix parsing.
 * Handle push: too.

------------------------------------------------------------------------
r13966 | cbiere | 2007-06-24 06:54:27 -0400 (Sun, 24 Jun 2007) | 2 lines

 * Ensure *error_str is always nullified.

------------------------------------------------------------------------
r13965 | cbiere | 2007-06-24 06:51:21 -0400 (Sun, 24 Jun 2007) | 4 lines

 * Ensure *error_str is always nullified.
 * Merged search_gui_handle_push() and search_gui_handle_http() as the prefix
   is the only difference.

------------------------------------------------------------------------
r13964 | cbiere | 2007-06-24 05:30:34 -0400 (Sun, 24 Jun 2007) | 2 lines

 * Removed unnecessary label.

------------------------------------------------------------------------
r13963 | cbiere | 2007-06-24 04:08:21 -0400 (Sun, 24 Jun 2007) | 4 lines

 * search_gui_set_details():
   * Show the country name, not just the code.
   * Moved special URL to the bottom.

------------------------------------------------------------------------
r13962 | cbiere | 2007-06-24 03:26:47 -0400 (Sun, 24 Jun 2007) | 2 lines

 * Added "Country" line to search result details.

------------------------------------------------------------------------
r13961 | cbiere | 2007-06-24 03:17:42 -0400 (Sun, 24 Jun 2007) | 2 lines

 * halloc_init_vtable(): Changed member names of GMemVTable for GLib 1.2.

------------------------------------------------------------------------
r13960 | cbiere | 2007-06-24 00:53:04 -0400 (Sun, 24 Jun 2007) | 3 lines

 * search_gui_set_details(): For local results show the pathname and
   file: URL too.

------------------------------------------------------------------------
r13959 | cbiere | 2007-06-24 00:33:54 -0400 (Sun, 24 Jun 2007) | 3 lines

 * Use url_from_absolute_path() which uses a stricter escaping than
   url_escape() so that file: URLs are safe for use in a shell.

------------------------------------------------------------------------
r13958 | cbiere | 2007-06-24 00:31:11 -0400 (Sun, 24 Jun 2007) | 2 lines

 * Added url_escape_shell() and url_from_absolute_path().

------------------------------------------------------------------------
r13957 | cbiere | 2007-06-23 23:29:27 -0400 (Sat, 23 Jun 2007) | 2 lines

 * [GTK1] The search entry is a drop target too now.

------------------------------------------------------------------------
r13956 | cbiere | 2007-06-23 23:27:29 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Added drop_widget_init().

------------------------------------------------------------------------
r13955 | cbiere | 2007-06-23 23:25:03 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Fixed compiling with TRACK_MALLOC and GLib 1.2.

------------------------------------------------------------------------
r13954 | cbiere | 2007-06-23 22:47:23 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Cosmetic.

------------------------------------------------------------------------
r13953 | cbiere | 2007-06-23 22:43:27 -0400 (Sat, 23 Jun 2007) | 2 lines

 * gtk_clist_set_column_name(): Removed unnecessary NULL check.

------------------------------------------------------------------------
r13952 | cbiere | 2007-06-23 21:42:41 -0400 (Sat, 23 Jun 2007) | 2 lines

 * [GTK2] Added drag support to search monitor.

------------------------------------------------------------------------
r13951 | cbiere | 2007-06-23 20:48:45 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Added missing STRTRACK() which caused false-positive warnings.

------------------------------------------------------------------------
r13950 | cbiere | 2007-06-23 20:46:46 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Plugged memory leaks.

------------------------------------------------------------------------
r13949 | cbiere | 2007-06-23 20:46:05 -0400 (Sat, 23 Jun 2007) | 2 lines

 * http_async_free_recursive(): Always clear pointers after freeing memory.

------------------------------------------------------------------------
r13948 | cbiere | 2007-06-23 20:45:21 -0400 (Sat, 23 Jun 2007) | 2 lines

 * bsched_source_remove(): Use bio_check().

------------------------------------------------------------------------
r13947 | cbiere | 2007-06-23 20:44:44 -0400 (Sat, 23 Jun 2007) | 2 lines

 * upload_collect_locations(): Mark the peer as "good" alt-loc if possible.

------------------------------------------------------------------------
r13946 | cbiere | 2007-06-23 20:43:12 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Fixed compiler warnings with TRACK_ATOMS.

------------------------------------------------------------------------
r13945 | cbiere | 2007-06-23 20:42:32 -0400 (Sat, 23 Jun 2007) | 4 lines

 * realloc_track(): Treat resizing to zero as free().
 * free_record(): Ignore NULL.
 * string_record(): Corrected return type.

------------------------------------------------------------------------
r13944 | cbiere | 2007-06-23 18:58:03 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Removed unnecessary static function file_info_active().

------------------------------------------------------------------------
r13943 | cbiere | 2007-06-23 18:47:08 -0400 (Sat, 23 Jun 2007) | 2 lines

 * [GTK2] Corrected handling of bitzi metadata.

------------------------------------------------------------------------
r13942 | cbiere | 2007-06-23 18:45:07 -0400 (Sat, 23 Jun 2007) | 2 lines

 * process_rdf_description(): Parse audio attributes too.

------------------------------------------------------------------------
r13941 | cbiere | 2007-06-23 02:38:28 -0400 (Sat, 23 Jun 2007) | 2 lines

 * Added spamming ranges.

------------------------------------------------------------------------
r13940 | cbiere | 2007-06-23 01:53:27 -0400 (Sat, 23 Jun 2007) | 2 lines

 * eval_subst(): Corrected expansion of '~'.

------------------------------------------------------------------------
r13939 | cbiere | 2007-06-23 00:53:26 -0400 (Sat, 23 Jun 2007) | 2 lines

 * random_init(): There was still some entropy hiding in the corner.

------------------------------------------------------------------------
r13938 | cbiere | 2007-06-23 00:52:29 -0400 (Sat, 23 Jun 2007) | 3 lines

 * Moved #include to common.h.
 * Bumped date.

------------------------------------------------------------------------
r13937 | cbiere | 2007-06-23 00:33:52 -0400 (Sat, 23 Jun 2007) | 2 lines

 * random_init(): Increased version check to GLib 2.6; see comment.

------------------------------------------------------------------------
r13936 | cbiere | 2007-06-23 00:27:14 -0400 (Sat, 23 Jun 2007) | 4 lines

 * random_init(): Avoid g_get_user_name(), g_get_real_name(), g_get_home_dir()
   and g_get_tmp_dir() with GLib 1.2 as unpatched version are buggy on some
   systems (e.g., Darwin) which will result in a crash.

------------------------------------------------------------------------
r13935 | cbiere | 2007-06-22 21:24:27 -0400 (Fri, 22 Jun 2007) | 2 lines

 * Replaced XXX comments because none of these are critical.

------------------------------------------------------------------------
r13934 | cbiere | 2007-06-22 21:23:35 -0400 (Fri, 22 Jun 2007) | 3 lines

 * socket_read(): If banning send a 503 instead of 403 and add a Retry-After
   header because it's unlikely that remote peer cares otherwise.

------------------------------------------------------------------------
r13933 | cbiere | 2007-06-22 20:00:40 -0400 (Fri, 22 Jun 2007) | 2 lines

 * http_retry_after_add(): Suppress warning about unused flags.

------------------------------------------------------------------------
r13932 | cbiere | 2007-06-22 19:57:20 -0400 (Fri, 22 Jun 2007) | 2 lines

 * Added http_retry_after_add().

------------------------------------------------------------------------
r13931 | cbiere | 2007-06-22 19:56:21 -0400 (Fri, 22 Jun 2007) | 2 lines

 * Mark the sender as a good alt-loc if we receive a positive HEAD Pong.

------------------------------------------------------------------------
r13930 | cbiere | 2007-06-22 19:03:25 -0400 (Fri, 22 Jun 2007) | 2 lines

 * gui_update_download_abort_resume(): Fixed crash during startup.

------------------------------------------------------------------------
r13929 | cbiere | 2007-06-22 18:16:40 -0400 (Fri, 22 Jun 2007) | 2 lines

 * random_init(): Found more entropy under the carpet.

------------------------------------------------------------------------
r13928 | cbiere | 2007-06-22 17:56:15 -0400 (Fri, 22 Jun 2007) | 2 lines

 * random_init(): Collect even more entropy.

------------------------------------------------------------------------
r13927 | cbiere | 2007-06-22 17:36:14 -0400 (Fri, 22 Jun 2007) | 6 lines

 * random_init():
   * Feed the whole environment to SHA-1 to collect more entropy
     for the random seed.
   * Feed all pieces for the random seed directly to SHA-1 instead of using
     g_str_hash() first as the latter is much weaker.

------------------------------------------------------------------------
r13926 | cbiere | 2007-06-22 15:46:56 -0400 (Fri, 22 Jun 2007) | 2 lines

 * halloc_init(): Set G_SLICE only if we use GLib >= 2.0.

------------------------------------------------------------------------
r13925 | cbiere | 2007-06-22 01:24:10 -0400 (Fri, 22 Jun 2007) | 6 lines

 * bitzi_query_by_sha1(): Added filesize parameter so that we can detect
   filesize mismatches.
 * Added bitzi_failure() because lookup failures were not always reported to
   GUI giving the impression that the request was still pending.
 * [GTK2] Use SHA-1 and filesize to group results not just the SHA-1.

------------------------------------------------------------------------
r13924 | cbiere | 2007-06-22 01:16:34 -0400 (Fri, 22 Jun 2007) | 2 lines

 * file_info_shared_sha1(): Added missing file_info_changed().

------------------------------------------------------------------------
r13923 | cbiere | 2007-06-22 01:13:10 -0400 (Fri, 22 Jun 2007) | 3 lines

 * download_resume_bg_tasks(): Corrected checks because if d->status is
   GTA_DL_REMOVED d->file_info is NULL.

------------------------------------------------------------------------
r13922 | cbiere | 2007-06-22 00:57:46 -0400 (Fri, 22 Jun 2007) | 2 lines

 * Added missing #include.

------------------------------------------------------------------------
r13921 | cbiere | 2007-06-22 00:44:08 -0400 (Fri, 22 Jun 2007) | 4 lines

 * ban_force():
   * Added some checks.
   * Call socket_evt_clear(), just in case.

------------------------------------------------------------------------
r13920 | cbiere | 2007-06-22 00:42:49 -0400 (Fri, 22 Jun 2007) | 3 lines

 * download_close(): Fixed bug in previous commit: Must remove the download
   from sl_downloads before download_free().

------------------------------------------------------------------------
r13919 | cbiere | 2007-06-21 20:51:50 -0400 (Thu, 21 Jun 2007) | 7 lines

 * Converted sl_downloads and sl_unqueued from GSList to hash_list_t so
   that some operations are more efficient especially with many downloads
   because hash_list_removed() is O(1) whereas g_slist_remove() is O(n).
 * Removed unused downloads_get_list().
 * download_build_url(): Don't check for URN_INDEX because if d->uri is
   NULL and we know the SHA-1 this might have been a N2R download.

------------------------------------------------------------------------
r13918 | cbiere | 2007-06-21 20:43:29 -0400 (Thu, 21 Jun 2007) | 3 lines

 * Added hash_list_next().
 * Removed dead prototypes.

------------------------------------------------------------------------
r13917 | cbiere | 2007-06-21 16:49:51 -0400 (Thu, 21 Jun 2007) | 3 lines

 * vmsg_send_head_ping(): Changed interface.
 * handle_content_urn(): Check the Content-Range header too.

------------------------------------------------------------------------
r13916 | cbiere | 2007-06-21 16:39:04 -0400 (Thu, 21 Jun 2007) | 2 lines

 * browse_host_read_qhits(): Fixed inverted logic in previous commit.

------------------------------------------------------------------------
r13915 | cbiere | 2007-06-21 16:06:12 -0400 (Thu, 21 Jun 2007) | 2 lines

 * file_info_has_identical(): Only take the size into account if it's known.

------------------------------------------------------------------------
r13914 | cbiere | 2007-06-21 15:57:39 -0400 (Thu, 21 Jun 2007) | 2 lines

 * browse_host_read_qhits(): Plugged memory leak.

------------------------------------------------------------------------
r13913 | rmanfredi | 2007-06-21 01:27:11 -0400 (Thu, 21 Jun 2007) | 4 lines

Make sure aggressive downloading combined with ignoring will converge by
making sure the computation of the "from" field will ultimately converge
to the beginning of the missing data.

------------------------------------------------------------------------
r13912 | cbiere | 2007-06-20 23:25:14 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Added spammer ranges.

------------------------------------------------------------------------
r13911 | cbiere | 2007-06-20 23:00:29 -0400 (Wed, 20 Jun 2007) | 3 lines

 * file_info_has_identical(): If the SHA-1 matches, require that the filesize
   matches as well.

------------------------------------------------------------------------
r13910 | cbiere | 2007-06-20 20:51:24 -0400 (Wed, 20 Jun 2007) | 9 lines

 * Added interim property "experimental_download_data_ignoring"; disabled by
   default as it caused re-downloading ad infinitum on mismatch.
 * download_chunk_rx_done(): Fixed bug: Receiving the last chunk on a
   connection using "chunked" transfer-encoding does not imply the file
   is finished. Thus treat this exactly as a EOF.
 * download_rx_done():
   * Added assertion check.
   * The filesize should be corrected for transient downloads too.

------------------------------------------------------------------------
r13909 | cbiere | 2007-06-20 19:54:33 -0400 (Wed, 20 Jun 2007) | 2 lines

 * 53 new items.

------------------------------------------------------------------------
r13908 | cbiere | 2007-06-20 19:31:17 -0400 (Wed, 20 Jun 2007) | 4 lines

 * Added GLISTTRACK().
 * Removed unnecessary macros.
 * gui_merge_window_as_tab(): Corrected memory tracking.

------------------------------------------------------------------------
r13907 | cbiere | 2007-06-20 19:12:45 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Corrected prototype.

------------------------------------------------------------------------
r13906 | cbiere | 2007-06-20 19:11:34 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Added missing prototype.

------------------------------------------------------------------------
r13905 | cbiere | 2007-06-20 19:00:41 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13904 | cbiere | 2007-06-20 18:59:42 -0400 (Wed, 20 Jun 2007) | 2 lines

 * add_available_uhc(): Suppress const-related warning.

------------------------------------------------------------------------
r13903 | cbiere | 2007-06-20 18:40:00 -0400 (Wed, 20 Jun 2007) | 2 lines

 * fi_gui_shutdown(): Avoid leak warning on exit.

------------------------------------------------------------------------
r13902 | cbiere | 2007-06-20 18:39:11 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Include "core/udp.h" for udp_close().

------------------------------------------------------------------------
r13901 | cbiere | 2007-06-20 18:32:33 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Avoid leak warnings on exit.

------------------------------------------------------------------------
r13900 | cbiere | 2007-06-20 17:53:02 -0400 (Wed, 20 Jun 2007) | 2 lines

 * verify_tth_close(): Free context on exit to avoid leak warning.

------------------------------------------------------------------------
r13899 | cbiere | 2007-06-20 17:49:39 -0400 (Wed, 20 Jun 2007) | 2 lines

 * tls_init(), tls_free(): Plugged memory leak.

------------------------------------------------------------------------
r13898 | cbiere | 2007-06-20 17:34:25 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Removed dead UHCs.

------------------------------------------------------------------------
r13897 | cbiere | 2007-06-20 17:29:54 -0400 (Wed, 20 Jun 2007) | 2 lines

 * hostvec_to_slist(): Plugged memory leak.

------------------------------------------------------------------------
r13896 | cbiere | 2007-06-20 16:11:50 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Replaced some consistency checks.

------------------------------------------------------------------------
r13895 | cbiere | 2007-06-20 15:32:53 -0400 (Wed, 20 Jun 2007) | 4 lines

 * Removed the THEX callback function because this makes it difficult to
   stop the download correctly (as a hack they were always aborted even on
   success).

------------------------------------------------------------------------
r13894 | cbiere | 2007-06-20 15:19:26 -0400 (Wed, 20 Jun 2007) | 2 lines

 * Style fix.

------------------------------------------------------------------------
r13893 | cbiere | 2007-06-19 13:33:36 -0400 (Tue, 19 Jun 2007) | 3 lines

 * Omit trailing zero bytes from GGEP ALT_TLS, IPP_TLS, PUSH_TLS, T and omit
   them completely if no bits are set.

------------------------------------------------------------------------
r13892 | cbiere | 2007-06-19 07:30:23 -0400 (Tue, 19 Jun 2007) | 2 lines

 * tls_flush(): Hide log message if not debugging and log nothing for zero.

------------------------------------------------------------------------
r13891 | cbiere | 2007-06-19 07:07:36 -0400 (Tue, 19 Jun 2007) | 3 lines

 * Attempt to automagically drain the TLS snarf buffer.
 * Use socket_wio_link() for all socket types.

------------------------------------------------------------------------
r13890 | cbiere | 2007-06-19 05:41:24 -0400 (Tue, 19 Jun 2007) | 4 lines

 * Added flush() method to wrap_io as we might need this for TLS in order to
   wait until all sent data has been drained before we wait for a response
   from the remote side.

------------------------------------------------------------------------
r13889 | cbiere | 2007-06-19 02:05:33 -0400 (Tue, 19 Jun 2007) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r13888 | cbiere | 2007-06-19 01:13:29 -0400 (Tue, 19 Jun 2007) | 3 lines

 * Re-arranged some code so that more code could be shared with GTK1.
 * Simplified removal of rows.

------------------------------------------------------------------------
r13887 | cbiere | 2007-06-19 01:07:35 -0400 (Tue, 19 Jun 2007) | 4 lines

 * search_gui_duplicate_search(): Don't try to duplicate local searches as
   this creates a non-local search.
 * search_gui_refresh_popup(): Some special-casing for local searches.

------------------------------------------------------------------------
r13886 | cbiere | 2007-06-19 01:05:20 -0400 (Tue, 19 Jun 2007) | 2 lines

 * --g-fatal-warnings takes no argument.

------------------------------------------------------------------------
r13885 | cbiere | 2007-06-19 01:04:37 -0400 (Tue, 19 Jun 2007) | 2 lines

 * Amended memory allocation tracking.

------------------------------------------------------------------------
r13884 | cbiere | 2007-06-19 01:01:44 -0400 (Tue, 19 Jun 2007) | 2 lines

 * Call tls_socket_evt_change() only if there's a request to change the event.

------------------------------------------------------------------------
r13883 | cbiere | 2007-06-18 20:06:28 -0400 (Mon, 18 Jun 2007) | 2 lines

 * Removed unnecessary prototype.

------------------------------------------------------------------------
r13882 | cbiere | 2007-06-18 20:05:04 -0400 (Mon, 18 Jun 2007) | 2 lines

 * Reordered struct members to reduce potential padding between members.

------------------------------------------------------------------------
r13881 | cbiere | 2007-06-18 19:48:50 -0400 (Mon, 18 Jun 2007) | 3 lines

 * Include "malloc.h"; this should fix the missed deallocation when using
   MALLOC_STATS and REMAP_ZALLOC.

------------------------------------------------------------------------
r13880 | cbiere | 2007-06-18 18:45:58 -0400 (Mon, 18 Jun 2007) | 8 lines

 * create_download(): Don't send HEAD pings from here because this becomes
   very expensive as HEAD pongs cause download_auto_new() which calls
   create_download(). HEAD pings are already emitted from download_timer().
 * download_continue(): If there's a THEX download waiting for this download,
   queue this download, so that the THEX download can start. Otherwise, the
   THEX download will not get scheduled before this download has completely
   finished.

------------------------------------------------------------------------
r13879 | cbiere | 2007-06-18 18:41:05 -0400 (Mon, 18 Jun 2007) | 2 lines

 * Use host_addr_ipv4() instead of accessing addr.ipv4 directly.

------------------------------------------------------------------------
r13878 | cbiere | 2007-06-18 16:22:47 -0400 (Mon, 18 Jun 2007) | 3 lines

 * tx_deflate_init(): Always use deflateInit2(); only "windowBits" differs
   depending on whether we use gzip or deflate.

------------------------------------------------------------------------
r13877 | cbiere | 2007-06-18 15:16:33 -0400 (Mon, 18 Jun 2007) | 3 lines

 * Fixed compiling with TRACK_MALLOC defined.
 * Converted variables/parameters used for memory chunk sizes to size_t.

------------------------------------------------------------------------
r13876 | cbiere | 2007-06-18 15:02:15 -0400 (Mon, 18 Jun 2007) | 2 lines

 * Use host_addr_ipv4() instead of accessing addr.ipv4 directly.

------------------------------------------------------------------------
r13875 | cbiere | 2007-06-18 13:52:43 -0400 (Mon, 18 Jun 2007) | 4 lines

 * node_read(): Reallocate n->data appropriately each time so that we don't
   waste a lot of memory just because we received one large packet from the
   node.

------------------------------------------------------------------------
r13874 | cbiere | 2007-06-18 09:58:14 -0400 (Mon, 18 Jun 2007) | 2 lines

 * download_stop_v(): Fixed typo '&' vs '|' corrupting d->file_info->flags.

------------------------------------------------------------------------
r13873 | cbiere | 2007-06-17 23:52:15 -0400 (Sun, 17 Jun 2007) | 3 lines

 * gip_add_cidr(): Fixed compiler warning (cast to pointer from different
   integer size).

------------------------------------------------------------------------
r13872 | cbiere | 2007-06-17 23:48:10 -0400 (Sun, 17 Jun 2007) | 2 lines

 * Fixed swappo.

------------------------------------------------------------------------
r13871 | cbiere | 2007-06-17 23:28:40 -0400 (Sun, 17 Jun 2007) | 2 lines

 * Updated prototype.

------------------------------------------------------------------------
r13870 | cbiere | 2007-06-17 23:27:25 -0400 (Sun, 17 Jun 2007) | 3 lines

 * Carry ISO 3166 in a 16-bit integer instead of a 32-bit integer. Due to
   structure padding this may save a little bit of space in some places.

------------------------------------------------------------------------
r13869 | cbiere | 2007-06-17 22:01:15 -0400 (Sun, 17 Jun 2007) | 3 lines

 * handle_head_ping(): Fixed bug: The size parameter passed to
   gmsg_split_sendto_one() must always include GTA_HEADER_SIZE.

------------------------------------------------------------------------
r13868 | cbiere | 2007-06-17 21:30:56 -0400 (Sun, 17 Jun 2007) | 14 lines

 * [GTK1] Delay displaying of result details by 100ms to avoid unnecessary
   work when the cursor changes frequently e.g., due to scrolling.
 * Fixed atom leak at rc->info as the pointer was set multiple times if
   the result matched multiple searches (i.e., passive searches).
 * struct results_set:
   * Added magic.
   * Removed refcount; we only need "num_recs".
   * Removed r_sets; this was used for consistency checking only but it
     was rather overdone.
 * Simplified reference counting for "struct results_set" and "record_t" so
   that we only need to ref/unref the record and the results set is handled
   automagically.


------------------------------------------------------------------------
r13867 | rmanfredi | 2007-06-17 15:55:26 -0400 (Sun, 17 Jun 2007) | 2 lines

Use raise(SIGABRT) instead of abort() to ensure we do get a core dump.

------------------------------------------------------------------------
r13866 | cbiere | 2007-06-17 15:19:00 -0400 (Sun, 17 Jun 2007) | 2 lines

 * crash_handler(): Call abort() not _exit().

------------------------------------------------------------------------
r13865 | cbiere | 2007-06-17 14:49:46 -0400 (Sun, 17 Jun 2007) | 2 lines

 * Renamed function for consistency.

------------------------------------------------------------------------
r13864 | cbiere | 2007-06-17 13:32:42 -0400 (Sun, 17 Jun 2007) | 3 lines

 * browse_host_dl_close(), thex_download_close(): Assume "rx" being NULL is
   no bug.

------------------------------------------------------------------------
r13863 | cbiere | 2007-06-17 10:29:28 -0400 (Sun, 17 Jun 2007) | 3 lines

 * [GTK2] Delay displaying of result details by 100ms to avoid unnecessary
   work when the cursor changes frequently e.g., due to scrolling.

------------------------------------------------------------------------
r13862 | cbiere | 2007-06-17 10:25:46 -0400 (Sun, 17 Jun 2007) | 3 lines

 * search_gui_download_files(), search_gui_discard_files(): Removed
   unnecessary warnings.

------------------------------------------------------------------------
r13861 | cbiere | 2007-06-17 09:21:09 -0400 (Sun, 17 Jun 2007) | 2 lines

 * In expert mode show the file URLs in the details display.

------------------------------------------------------------------------
r13860 | cbiere | 2007-06-16 21:37:45 -0400 (Sat, 16 Jun 2007) | 2 lines

 * List --unofficial switch.

------------------------------------------------------------------------
r13859 | cbiere | 2007-06-16 21:16:44 -0400 (Sat, 16 Jun 2007) | 2 lines

 * search_gui_set_details(): Readability.

------------------------------------------------------------------------
r13858 | cbiere | 2007-06-16 21:12:43 -0400 (Sat, 16 Jun 2007) | 2 lines

 * [GTK2] Copy the selected search result detail to the clipboard on Control+C.

------------------------------------------------------------------------
r13857 | cbiere | 2007-06-16 20:27:10 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r13856 | cbiere | 2007-06-16 20:22:58 -0400 (Sat, 16 Jun 2007) | 2 lines

 * [GTK1] Copy the selected search result detail to the clipboard on Control+C.

------------------------------------------------------------------------
r13855 | cbiere | 2007-06-16 20:21:31 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Removed unnecessary checks.

------------------------------------------------------------------------
r13854 | cbiere | 2007-06-16 20:19:40 -0400 (Sat, 16 Jun 2007) | 3 lines

 * Removed accelerators with Alt or Control and 'C'. This is typically
   assigned to "copy" and should not be used for other operations.

------------------------------------------------------------------------
r13853 | rmanfredi | 2007-06-16 19:39:40 -0400 (Sat, 16 Jun 2007) | 2 lines

Added SM campain ID for completeness.

------------------------------------------------------------------------
r13852 | cbiere | 2007-06-16 18:29:26 -0400 (Sat, 16 Jun 2007) | 5 lines

 * vmsg_send_features_supported():
   * Corrected for builds without TLS support.
   * Indicate support for HSEP; mainly because sending an empty feature
     vector might confuse some receivers and special-casing is error prone.

------------------------------------------------------------------------
r13851 | cbiere | 2007-06-16 16:28:14 -0400 (Sat, 16 Jun 2007) | 2 lines

 * vmsg_send_head_pong_v2(): Corrected version.

------------------------------------------------------------------------
r13850 | cbiere | 2007-06-16 15:56:19 -0400 (Sat, 16 Jun 2007) | 3 lines

 * vmsg_send_head_pong_v2(): Forgot return statement causing an assertion
   failure by calling ggep_stream_close() twice.

------------------------------------------------------------------------
r13849 | cbiere | 2007-06-16 15:32:31 -0400 (Sat, 16 Jun 2007) | 3 lines

 * magnet_set_exact_topic(): Collect the TTH too.
 * magnet_to_string(): Use bitprint_to_urn_string().

------------------------------------------------------------------------
r13848 | cbiere | 2007-06-16 15:30:46 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Added urn_get_tth() for parsing "urn:tree:tiger:".

------------------------------------------------------------------------
r13847 | cbiere | 2007-06-16 14:45:57 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Removed rfc3548.txt.

------------------------------------------------------------------------
r13846 | cbiere | 2007-06-16 14:42:03 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Removed draft-nielsen-dime-02.txt.

------------------------------------------------------------------------
r13845 | cbiere | 2007-06-16 13:54:53 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Added experimental display of SM URL; compile-time disabled by default.

------------------------------------------------------------------------
r13844 | cbiere | 2007-06-16 12:44:03 -0400 (Sat, 16 Jun 2007) | 2 lines

 * 53 new items.

------------------------------------------------------------------------
r13843 | cbiere | 2007-06-16 12:36:41 -0400 (Sat, 16 Jun 2007) | 3 lines

 * When starting a THEX download mark the fileinfo of the corresponding file
   to avoid downloading THEX data from multiple sources in parallel.

------------------------------------------------------------------------
r13842 | cbiere | 2007-06-16 11:52:34 -0400 (Sat, 16 Jun 2007) | 6 lines

 * download_request_new(), download_request_free(): Increase/decrease
   the reference count for the fileinfo structure.
 * download_check(): Check "always_push" and the GUID as there still seems
   to be an inconsistency occasionally.
 * download_send_head_ping(): Explicitely check for THEX and browse downloads.

------------------------------------------------------------------------
r13841 | cbiere | 2007-06-16 11:45:41 -0400 (Sat, 16 Jun 2007) | 3 lines

 * search_gui_handle_browse(): Fixed handling for IPv6 addresses.
 * Merged code for showing search result details.

------------------------------------------------------------------------
r13840 | cbiere | 2007-06-16 11:41:29 -0400 (Sat, 16 Jun 2007) | 2 lines

 * shell_exec_node_drop(): Removed unnecessary code.

------------------------------------------------------------------------
r13839 | cbiere | 2007-06-16 09:02:04 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Corrected range.

------------------------------------------------------------------------
r13838 | cbiere | 2007-06-16 01:09:37 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Added another range.

------------------------------------------------------------------------
r13837 | cbiere | 2007-06-16 00:26:43 -0400 (Sat, 16 Jun 2007) | 2 lines

 * Added another host.

------------------------------------------------------------------------
r13836 | cbiere | 2007-06-15 23:12:15 -0400 (Fri, 15 Jun 2007) | 3 lines

 * node_remove_by_addr(): Don't use node_ht_connected_nodes_has() because
   it uses n->gnet_port but we're using n->port here.

------------------------------------------------------------------------
r13835 | cbiere | 2007-06-15 21:44:57 -0400 (Fri, 15 Jun 2007) | 8 lines

 * find_message(): Ignore the version so that we can handle vendor messages
   with backwards-compatibility.
 * Added support for HEAD Pings/Pongs v2.
 * head_ping_expire(): Fixed comparision; the code dropped MUIDs that
   were less than a second old.
 * Fixed forwarding of HEAD Pongs via UDP.
 * Indicate "TLS!" support only if actually compiled with GnuTLS.

------------------------------------------------------------------------
r13834 | cbiere | 2007-06-15 21:30:05 -0400 (Fri, 15 Jun 2007) | 3 lines

 * Indicate TLS support in PONGs.
 * Emit IPP_TLS in PONGs.

------------------------------------------------------------------------
r13833 | cbiere | 2007-06-15 21:24:25 -0400 (Fri, 15 Jun 2007) | 2 lines

 * gmsg_log_dropped(): Write to stderr instead of stdout.

------------------------------------------------------------------------
r13832 | cbiere | 2007-06-15 21:23:32 -0400 (Fri, 15 Jun 2007) | 2 lines

 * add_file(): Cosmetic.

------------------------------------------------------------------------
r13831 | cbiere | 2007-06-15 21:22:39 -0400 (Fri, 15 Jun 2007) | 2 lines

 * Added several new GGEP IDs.

------------------------------------------------------------------------
r13830 | cbiere | 2007-06-15 21:21:06 -0400 (Fri, 15 Jun 2007) | 2 lines

 * node_timer(): Check n->gnet_{addr,port} before tls_cache_insert().

------------------------------------------------------------------------
r13829 | cbiere | 2007-06-15 05:34:48 -0400 (Fri, 15 Jun 2007) | 3 lines

 * Changed GGEP 'T'. This was experimental; apparently unused and LimeWire
   has redefined its meaning.

------------------------------------------------------------------------
r13828 | cbiere | 2007-06-14 19:11:02 -0400 (Thu, 14 Jun 2007) | 2 lines

 * pcache_udp_pong_received(): Added missing check.

------------------------------------------------------------------------
r13827 | cbiere | 2007-06-14 19:08:03 -0400 (Thu, 14 Jun 2007) | 2 lines

 * pcache_udp_pong_received(): Handle GGEP "TLS" and "GTKG.TLS".

------------------------------------------------------------------------
r13826 | cbiere | 2007-06-14 17:32:40 -0400 (Thu, 14 Jun 2007) | 2 lines

 * 973 new items.

------------------------------------------------------------------------
r13825 | cbiere | 2007-06-14 16:37:01 -0400 (Thu, 14 Jun 2007) | 2 lines

 * If compiling for GLib/Gtk+ 1.2 try glib-config/gtk-config before pkg-config.

------------------------------------------------------------------------
r13818 | cbiere | 2007-06-14 02:53:14 -0400 (Thu, 14 Jun 2007) | 2 lines

 * Added another range.

------------------------------------------------------------------------
r13817 | cbiere | 2007-06-14 01:59:22 -0400 (Thu, 14 Jun 2007) | 4 lines

 * node_push_proxies(): Constmetic.
 * node_all_nodes(): Removed unnecessary cast.
 * node_close(): Nullify pointers after freeing memory.

------------------------------------------------------------------------
r13816 | cbiere | 2007-06-14 01:57:50 -0400 (Thu, 14 Jun 2007) | 2 lines

 * flush_match(): Cosmetic.

------------------------------------------------------------------------
r13815 | cbiere | 2007-06-14 01:41:30 -0400 (Thu, 14 Jun 2007) | 13 lines

 * pproxy_request(): Handle "&tls=<value>" in push-proxy requests.
 * flush_match(): Emit GGEP "PUSH_TLS" and GGEP "TLS".
 * add_file(): Emit GGEP "ALT_TLS".
 * handle_features_supported(): Check for feature "TLS!".
 * Added vmsg_send_features_supported() to indicate support for "TLS!".
 * handle_push_request(), search_results_handle_trailer():
   Handle GGEP "TLS" just like GGEP "GTKG.TLS".
 * node_timer(): Use gnet_addr/gnet_port instead of addr/port for
   tls_cache_insert().
 * node_is_now_connected(): Call vmsg_send_features_supported().
 * node_process_handshake_header(): Moved detection of support for "tls/1.0";
   ignore whether the connection is incoming or outgoing.

------------------------------------------------------------------------
r13814 | cbiere | 2007-06-14 00:35:00 -0400 (Thu, 14 Jun 2007) | 2 lines

 * build_ping_msg(): Indicate TLS-capability.

------------------------------------------------------------------------
r13813 | cbiere | 2007-06-13 22:31:08 -0400 (Wed, 13 Jun 2007) | 3 lines

 * Use "struct http_async *" instead of "gpointer", so that you can't easily
   pass a wrong pointer type without getting a compile warning.

------------------------------------------------------------------------
r13812 | cbiere | 2007-06-13 14:21:10 -0400 (Wed, 13 Jun 2007) | 3 lines

 * shell_read_data(): Removed unnecessary string concatenation.
 * shell_write(): Ignore empty strings silently.

------------------------------------------------------------------------
r13811 | cbiere | 2007-06-11 22:49:08 -0400 (Mon, 11 Jun 2007) | 2 lines

 * Added another range.

------------------------------------------------------------------------
r13810 | cbiere | 2007-06-11 18:08:57 -0400 (Mon, 11 Jun 2007) | 2 lines

 * Removed unused hashtree.[ch].

------------------------------------------------------------------------
r13809 | cbiere | 2007-06-11 18:06:53 -0400 (Mon, 11 Jun 2007) | 2 lines

 * Removed inline keyword from non-static functions.

------------------------------------------------------------------------
r13808 | cbiere | 2007-06-11 16:33:01 -0400 (Mon, 11 Jun 2007) | 2 lines

 * Added a spammer range.

------------------------------------------------------------------------
r13807 | cbiere | 2007-06-11 15:05:42 -0400 (Mon, 11 Jun 2007) | 3 lines

 * [GTK1] Don't try to override GLib symbols if USE_MALLOC is defined because
   this can cause linking errors so it has be disabled in that case.

------------------------------------------------------------------------
r13806 | cbiere | 2007-06-11 13:43:56 -0400 (Mon, 11 Jun 2007) | 4 lines

 * [GTK1] Fixed problem with dragging which resulted in fetching data from
   the previously selected row instead of the current row as "drag-begin"
   seems to be emitted before "row-selected" signal with Gtk+ 1.2.

------------------------------------------------------------------------
r13805 | cbiere | 2007-06-11 13:32:34 -0400 (Mon, 11 Jun 2007) | 2 lines

 * Added switch to disable Socker support.

------------------------------------------------------------------------
r13804 | cbiere | 2007-06-10 16:08:31 -0400 (Sun, 10 Jun 2007) | 2 lines

 * 2722 new items.

------------------------------------------------------------------------
r13803 | cbiere | 2007-06-10 13:09:50 -0400 (Sun, 10 Jun 2007) | 5 lines

 * selection_set_text(): Avoid (unlikely) integer overflow as Gtk+ uses
   int instead of size_t.
 * drag_attach(): Added UTF-8 text targets because Gtk+ cripples UTF-8 strings
   otherwise.

------------------------------------------------------------------------
r13802 | cbiere | 2007-06-10 13:05:09 -0400 (Sun, 10 Jun 2007) | 3 lines

 * on_button_fi_purge_clicked(): Freeze the GtkCList to reduce the drawing
   overhead.

------------------------------------------------------------------------
r13801 | cbiere | 2007-06-10 13:02:09 -0400 (Sun, 10 Jun 2007) | 2 lines

 * search_append_detail(): Cosmetic.

------------------------------------------------------------------------
r13800 | cbiere | 2007-06-06 22:17:27 -0400 (Wed, 06 Jun 2007) | 4 lines

 * search_gui_history_add():
   * Increased history to 50 items.
   * Discard old items not new ones if the limit is reached.

------------------------------------------------------------------------
r13799 | cbiere | 2007-06-03 14:12:55 -0400 (Sun, 03 Jun 2007) | 3 lines

 * [GTK1] Sync'ed display of search result details display with [GTK2].
 * [GTK1] Added drag support for the search result details.

------------------------------------------------------------------------
r13798 | cbiere | 2007-06-02 08:03:02 -0400 (Sat, 02 Jun 2007) | 2 lines

 * download_build_magnet(): Plugged memory leak.

------------------------------------------------------------------------
r13797 | cbiere | 2007-06-02 08:02:30 -0400 (Sat, 02 Jun 2007) | 2 lines

 * magnet_resource_free(): Plugged atom leak.

------------------------------------------------------------------------
r13796 | cbiere | 2007-06-01 19:35:07 -0400 (Fri, 01 Jun 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13795 | cbiere | 2007-05-31 18:57:44 -0400 (Thu, 31 May 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13794 | rmanfredi | 2007-05-31 12:58:49 -0400 (Thu, 31 May 2007) | 2 lines

Fixed compilation problem with USE_REMOTE_CTRL.

------------------------------------------------------------------------
r13793 | cbiere | 2007-05-30 16:22:11 -0400 (Wed, 30 May 2007) | 4 lines

 * search_gui_parse_text_query(): Added support for positive search patterns
   as well, so that +blah automagically creates a filter discarding results
   without "blah" in the filename.

------------------------------------------------------------------------
r13792 | cbiere | 2007-05-30 14:43:41 -0400 (Wed, 30 May 2007) | 2 lines

 * get_results_set(): Drop results with bogus GUIDs.

------------------------------------------------------------------------
r13791 | cbiere | 2007-05-30 13:48:08 -0400 (Wed, 30 May 2007) | 4 lines

 * dq_alive(): Added check for "dqueries"; see comment.
 * dq_pmsg_free(): Added another comment.
 * dq_free(): Removed check for dq->pending again.

------------------------------------------------------------------------
r13790 | cbiere | 2007-05-29 18:25:42 -0400 (Tue, 29 May 2007) | 4 lines

 * dq_send_next(): Make sure "timeout" does not overflow.
 * dq_free(): Require that dq->pending is zero because dq_pmsg_free()
   will be called for this "dq" later.

------------------------------------------------------------------------
r13789 | cbiere | 2007-05-29 18:21:28 -0400 (Tue, 29 May 2007) | 3 lines

 * mq_swift_checkpoint(): Reverted previous change as it seems to cause
   queues filling up.

------------------------------------------------------------------------
r13788 | cbiere | 2007-05-29 17:32:15 -0400 (Tue, 29 May 2007) | 2 lines

 * Added more consistency checks.

------------------------------------------------------------------------
r13787 | cbiere | 2007-05-29 17:09:50 -0400 (Tue, 29 May 2007) | 2 lines

 * hcache_add(): Added check for "stop_host_get".

------------------------------------------------------------------------
r13786 | cbiere | 2007-05-29 17:08:41 -0400 (Tue, 29 May 2007) | 4 lines

 * dq_pmsg_free(): Added consistency check. Apparently this callback can
   be triggered after dq_close() through node_real_remove() which is a bug.
 * dq_close(): Nullify the pointers after destroying the hashtables.

------------------------------------------------------------------------
r13785 | cbiere | 2007-05-29 14:09:35 -0400 (Tue, 29 May 2007) | 3 lines

 * parq_upload_add_x_queued_header(): Fixed off-by-one causing a cut-off
   '\n' in X-Queue: headers.

------------------------------------------------------------------------
r13784 | cbiere | 2007-05-29 13:17:41 -0400 (Tue, 29 May 2007) | 2 lines

 * file_info_unlink(): Removed unnecessary debug message.

------------------------------------------------------------------------
r13783 | cbiere | 2007-05-29 12:57:45 -0400 (Tue, 29 May 2007) | 2 lines

 * Fixed TTL calculations to avoid overflows and underflows.

------------------------------------------------------------------------
r13782 | cbiere | 2007-05-29 11:25:31 -0400 (Tue, 29 May 2007) | 4 lines

 * socket_set_accept_filters():
   * Added missing GNET_PROPERTY().
   * Removed unnecessary assertion; just enforce an upper limit.

------------------------------------------------------------------------
r13781 | cbiere | 2007-05-29 11:23:34 -0400 (Tue, 29 May 2007) | 2 lines

 * fi_find_aggressive_candidate(): Fixed mistake in previous commit.

------------------------------------------------------------------------
r13780 | cbiere | 2007-05-28 22:24:40 -0400 (Mon, 28 May 2007) | 3 lines

 * download_rx_done(): Check for DL_F_TRANSIENT rather than d->thex and
   d->browse separately.

------------------------------------------------------------------------
r13779 | cbiere | 2007-05-28 22:23:15 -0400 (Mon, 28 May 2007) | 6 lines

 * browse_host_dl_create(): Don't allocate a buffer before we need it.
 * browse_host_dl_close():  Let "ctx->rx != NULL" fail. Something might be
   broken due the previous change to download_stop_v() with respect to
   dismantling the RX stack.
 * browse_host_dl_free(): Nullify bc->rx for consistency and symmetry.

------------------------------------------------------------------------
r13778 | cbiere | 2007-05-28 22:20:57 -0400 (Mon, 28 May 2007) | 4 lines

 * thex_download_close(): Let "ctx->rx != NULL" fail. Something might be
   broken due the previous change to download_stop_v() with respect to
   dismantling the RX stack.

------------------------------------------------------------------------
r13777 | cbiere | 2007-05-28 20:23:11 -0400 (Mon, 28 May 2007) | 5 lines

 * Added a hidden prefix to all property variable names so that they don't
   trash the namespace.
 * Added GNET_PROPERTY() and GUI_PROPERTY() for direct access to the
   property variables.

------------------------------------------------------------------------
r13776 | cbiere | 2007-05-28 16:08:49 -0400 (Mon, 28 May 2007) | 2 lines

 * 3486 new items.

------------------------------------------------------------------------
r13775 | rmanfredi | 2007-05-28 12:49:07 -0400 (Mon, 28 May 2007) | 2 lines

Must always disable RX stacks upon stopping, even if download was not active.

------------------------------------------------------------------------
r13774 | rmanfredi | 2007-05-27 18:37:14 -0400 (Sun, 27 May 2007) | 2 lines

There's really no reason to use underscores instead of dashes.

------------------------------------------------------------------------
r13773 | rmanfredi | 2007-05-27 17:29:05 -0400 (Sun, 27 May 2007) | 2 lines

Increase CPU allocation to bg tasks to 1/3rd of a second each second.

------------------------------------------------------------------------
r13772 | rmanfredi | 2007-05-27 14:08:49 -0400 (Sun, 27 May 2007) | 2 lines

Reset data timeout count each time the host delivers its chunk completely.

------------------------------------------------------------------------
r13771 | cbiere | 2007-05-27 10:00:14 -0400 (Sun, 27 May 2007) | 2 lines

 * Unlocked server-side TTH support.

------------------------------------------------------------------------
r13770 | rmanfredi | 2007-05-27 05:21:17 -0400 (Sun, 27 May 2007) | 2 lines

Put a hard limit on the number of data timeouts we can get from a source.

------------------------------------------------------------------------
r13769 | cbiere | 2007-05-26 23:42:15 -0400 (Sat, 26 May 2007) | 2 lines

 * download_request(): Use foobar heading for browsing and THEX too.

------------------------------------------------------------------------
r13768 | cbiere | 2007-05-26 23:31:40 -0400 (Sat, 26 May 2007) | 3 lines

 * download_resume(): Return after un-pausing because there's nothing to do
   and we'd get a soft-assertion failure anyway otherwise.

------------------------------------------------------------------------
r13767 | cbiere | 2007-05-26 23:15:06 -0400 (Sat, 26 May 2007) | 2 lines

 * Added file_info_purge().

------------------------------------------------------------------------
r13766 | cbiere | 2007-05-26 23:13:43 -0400 (Sat, 26 May 2007) | 3 lines

 * download_clear_stopped(): Purge transient downloads when they're finished
   so that they don't cause too much noise at the downloads display.

------------------------------------------------------------------------
r13765 | cbiere | 2007-05-26 22:43:40 -0400 (Sat, 26 May 2007) | 5 lines

 * download_request(): Added another call to download_bad_source() because
   we won't be able to resume from this source.
 * download_rx_done(): Stopping a stopped download is apparently a deadly sin,
   don't do that.

------------------------------------------------------------------------
r13764 | cbiere | 2007-05-26 22:33:58 -0400 (Sat, 26 May 2007) | 2 lines

 * search_gui_free_r_set(): Plugged another Sellafield.

------------------------------------------------------------------------
r13763 | cbiere | 2007-05-26 22:24:48 -0400 (Sat, 26 May 2007) | 2 lines

 * thex_download_free(): Plugged atom leak.

------------------------------------------------------------------------
r13762 | cbiere | 2007-05-26 20:55:34 -0400 (Sat, 26 May 2007) | 3 lines

 * download_verify_done(): Call download_remove_all_thex() if the SHA-1
   matched, as we're not going to need tigertree data anymore.

------------------------------------------------------------------------
r13761 | cbiere | 2007-05-26 20:51:09 -0400 (Sat, 26 May 2007) | 5 lines

 * download_remove_all_thex(): Removed unused return value.
 * download_rx_done(): Moved download_remove_all_thex() to
   download_thex_success() because a finished THEX download itself
   does not mean we have valid tigertree data now.

------------------------------------------------------------------------
r13760 | cbiere | 2007-05-26 19:28:36 -0400 (Sat, 26 May 2007) | 2 lines

 * 50 new items.

------------------------------------------------------------------------
r13759 | rmanfredi | 2007-05-26 11:56:03 -0400 (Sat, 26 May 2007) | 2 lines

Remove all similar THEX downloads once one is completed.

------------------------------------------------------------------------
r13758 | cbiere | 2007-05-26 10:03:46 -0400 (Sat, 26 May 2007) | 2 lines

 * 3290 new items.

------------------------------------------------------------------------
r13757 | rmanfredi | 2007-05-26 08:31:52 -0400 (Sat, 26 May 2007) | 2 lines

Fixed inverted logic in logging message.

------------------------------------------------------------------------
r13756 | rmanfredi | 2007-05-25 17:53:14 -0400 (Fri, 25 May 2007) | 2 lines

Reworked banning debug traces to include banning reasons, if known.

------------------------------------------------------------------------
r13755 | cbiere | 2007-05-25 17:50:47 -0400 (Fri, 25 May 2007) | 3 lines

 * download_build_url(): Check the file index and use download_get_sha1()
   because d->sha1 will be NULL as soon as the download is finished.

------------------------------------------------------------------------
r13754 | cbiere | 2007-05-25 17:15:15 -0400 (Fri, 25 May 2007) | 2 lines

 * Spam over.

------------------------------------------------------------------------
r13753 | rmanfredi | 2007-05-25 17:14:46 -0400 (Fri, 25 May 2007) | 2 lines

Re-aligned "Gnutella" to the right edge of the displayed bandwidth.

------------------------------------------------------------------------
r13752 | cbiere | 2007-05-25 16:55:33 -0400 (Fri, 25 May 2007) | 2 lines

 * More lousy wannabe spammers.

------------------------------------------------------------------------
r13751 | cbiere | 2007-05-25 16:40:27 -0400 (Fri, 25 May 2007) | 2 lines

 * AlphaRed really sucks.

------------------------------------------------------------------------
r13750 | cbiere | 2007-05-25 16:37:17 -0400 (Fri, 25 May 2007) | 2 lines

 * AlphaRed still sucks.

------------------------------------------------------------------------
r13749 | cbiere | 2007-05-25 12:49:21 -0400 (Fri, 25 May 2007) | 5 lines

 * Rephrased some help text.
 * Get rid of the redundant term "GNet".
 * Removed spurious non-break space character.
 * Cosmetic.

------------------------------------------------------------------------
r13748 | rmanfredi | 2007-05-25 12:12:29 -0400 (Fri, 25 May 2007) | 2 lines

Finished help.

------------------------------------------------------------------------
r13747 | cbiere | 2007-05-25 11:46:18 -0400 (Fri, 25 May 2007) | 2 lines

 * More const.

------------------------------------------------------------------------
r13746 | rmanfredi | 2007-05-25 11:27:11 -0400 (Fri, 25 May 2007) | 2 lines

No need for low-level name mangling.

------------------------------------------------------------------------
r13745 | rmanfredi | 2007-05-25 11:11:45 -0400 (Fri, 25 May 2007) | 4 lines

Added "-a" option to HORIZON, replacing "all".
Don't shadow the so useful dup() routine with a variable bearing the same name.
More help.

------------------------------------------------------------------------
r13744 | rmanfredi | 2007-05-25 11:00:27 -0400 (Fri, 25 May 2007) | 4 lines

Don't needlessly concatenate strings.
Force "OK" message string if none explicitly set by command on success.
More help.

------------------------------------------------------------------------
r13743 | rmanfredi | 2007-05-25 10:43:15 -0400 (Fri, 25 May 2007) | 2 lines

Added framework for "help <cmd>".

------------------------------------------------------------------------
r13742 | cbiere | 2007-05-25 10:13:25 -0400 (Fri, 25 May 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13741 | cbiere | 2007-05-25 10:10:16 -0400 (Fri, 25 May 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13740 | rmanfredi | 2007-05-25 09:56:28 -0400 (Fri, 25 May 2007) | 2 lines

Added the "INTR" command to interactively toggle the interactive mode.

------------------------------------------------------------------------
r13739 | rmanfredi | 2007-05-25 09:07:15 -0400 (Fri, 25 May 2007) | 4 lines

Do not show any command readyness feedback when not running interactively.
At the same time, include the failing command on non-interactive errors so
that they can figure out what went wrong.

------------------------------------------------------------------------
r13738 | rmanfredi | 2007-05-25 08:38:56 -0400 (Fri, 25 May 2007) | 4 lines

Added internal "INTR" shell command to signal an interactive shell.
Don't print the welcome message if we're not connecting interactively.
Made sure local shell can be enabled also when only select() is available.

------------------------------------------------------------------------
r13737 | rmanfredi | 2007-05-25 06:07:45 -0400 (Fri, 25 May 2007) | 3 lines

Use a yellow-ish color for TTH checking, to make it more visually distinct
from the library rescan.

------------------------------------------------------------------------
r13736 | rmanfredi | 2007-05-25 06:02:42 -0400 (Fri, 25 May 2007) | 5 lines

Experimental: increased max life a little to 1/4th of a second.  Since we
divide the allocated time by 2 when we're overloaded,  this can help use
a little more of the available CPU for background tasks whilst still not
sucking everything out of the machine.

------------------------------------------------------------------------
r13735 | rmanfredi | 2007-05-25 04:35:10 -0400 (Fri, 25 May 2007) | 3 lines

Be more severe with hosts that close the connection without returning any
header, as the probability they are banning us somehow is greater then.

------------------------------------------------------------------------
r13734 | rmanfredi | 2007-05-25 04:24:23 -0400 (Fri, 25 May 2007) | 2 lines

Spot RUDP connection requests visually (though we don't support them yet).

------------------------------------------------------------------------
r13733 | cbiere | 2007-05-24 20:01:57 -0400 (Thu, 24 May 2007) | 2 lines

 * 8301 new items.

------------------------------------------------------------------------
r13732 | cbiere | 2007-05-24 19:58:57 -0400 (Thu, 24 May 2007) | 2 lines

 * Welcome aboard.

------------------------------------------------------------------------
r13731 | rmanfredi | 2007-05-24 16:34:32 -0400 (Thu, 24 May 2007) | 3 lines

Always interrupt a chunk covered by a non-active download, i.e.
when that chunk is only being requested and is not yet served.

------------------------------------------------------------------------
r13730 | rmanfredi | 2007-05-24 01:11:33 -0400 (Thu, 24 May 2007) | 4 lines

node_set_hops_flow(): do not call qrp_leaf_changed() when the new hops-flow
is less than the minimum AND it was already under that limit, as the node
was already excluded from the inter-UP QRP table and will remain so.

------------------------------------------------------------------------
r13729 | rmanfredi | 2007-05-23 16:39:18 -0400 (Wed, 23 May 2007) | 3 lines

download_stop_v(): Always force a fileinfo update to refresh the GUI in
the "Downloads" pane.

------------------------------------------------------------------------
r13728 | rmanfredi | 2007-05-23 01:41:37 -0400 (Wed, 23 May 2007) | 3 lines

After more than 5 EOF in a row during header reading, consider that the host
is really banning us, disconnecting after it sees our IP.

------------------------------------------------------------------------
r13727 | rmanfredi | 2007-05-23 01:07:53 -0400 (Wed, 23 May 2007) | 2 lines

Bumped date.

------------------------------------------------------------------------
r13726 | rmanfredi | 2007-05-23 00:59:15 -0400 (Wed, 23 May 2007) | 3 lines

Make sure we do not include a leaf's QRP table in the combined table if the
leaf sends a hops-flow message with value less than 3.

------------------------------------------------------------------------
r13725 | cbiere | 2007-05-20 11:43:43 -0400 (Sun, 20 May 2007) | 2 lines

 * Moved prototype.

------------------------------------------------------------------------
r13724 | cbiere | 2007-05-19 17:30:28 -0400 (Sat, 19 May 2007) | 3 lines

 * file_info_foreach(): Use fi_by_guid instead of fi_by_outname because the
   latter doesn't contain transient downloads.

------------------------------------------------------------------------
r13723 | cbiere | 2007-05-19 17:13:57 -0400 (Sat, 19 May 2007) | 5 lines

 * Changed the output of the "downloads" command; show only one item per
   download - not each single transfer - so that the output is closer to
   what is shown in the GUI. Don't try to cram everything into one line
   either.

------------------------------------------------------------------------
r13722 | cbiere | 2007-05-19 17:10:11 -0400 (Sat, 19 May 2007) | 2 lines

 * Moved fi_get_status_string() to the core.

------------------------------------------------------------------------
r13721 | cbiere | 2007-05-19 17:08:04 -0400 (Sat, 19 May 2007) | 2 lines

 * Added file_info_foreach() and file_info_status_to_string().

------------------------------------------------------------------------
r13720 | cbiere | 2007-05-19 15:27:50 -0400 (Sat, 19 May 2007) | 2 lines

 * Disabled utf8_regression_checks() again.

------------------------------------------------------------------------
r13719 | cbiere | 2007-05-19 11:52:16 -0400 (Sat, 19 May 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13718 | cbiere | 2007-05-19 11:16:17 -0400 (Sat, 19 May 2007) | 2 lines

 * request_tigertree(): Fixed parameter for shared_file_unref().

------------------------------------------------------------------------
r13717 | cbiere | 2007-05-19 11:13:48 -0400 (Sat, 19 May 2007) | 3 lines

 * Check whether we enqueued an item for hash calculation, because we might
   have to dereference something if we don't.

------------------------------------------------------------------------
r13716 | rmanfredi | 2007-05-19 03:16:29 -0400 (Sat, 19 May 2007) | 2 lines

Changed border to violet.

------------------------------------------------------------------------
r13715 | bpringlemeir | 2007-05-18 22:28:21 -0400 (Fri, 18 May 2007) | 3 lines

Protect against multiple calls.  Currently only philosophical as the
caller protects against multiple calls as well.

------------------------------------------------------------------------
r13714 | cbiere | 2007-05-18 19:47:51 -0400 (Fri, 18 May 2007) | 2 lines

 * 4628 new items.

------------------------------------------------------------------------
r13713 | cbiere | 2007-05-18 19:41:08 -0400 (Fri, 18 May 2007) | 2 lines

 * Forgot to add this.

------------------------------------------------------------------------
r13712 | cbiere | 2007-05-18 17:42:13 -0400 (Fri, 18 May 2007) | 2 lines

 * Install booktth.xpm.

------------------------------------------------------------------------
r13711 | cbiere | 2007-05-18 17:38:29 -0400 (Fri, 18 May 2007) | 3 lines

 * Added property and icon which indicate whether there is a TTH calculation
   going on.

------------------------------------------------------------------------
r13710 | cbiere | 2007-05-18 16:55:28 -0400 (Fri, 18 May 2007) | 2 lines

 * Use a hashlist so that we can avoid inserting duplicates.

------------------------------------------------------------------------
r13709 | cbiere | 2007-05-18 16:53:19 -0400 (Fri, 18 May 2007) | 3 lines

 * update_queue_frozen(): Re-enabled code. This was disabled because it
   triggered a bug but wasn't the source of it.

------------------------------------------------------------------------
r13708 | cbiere | 2007-05-18 15:04:52 -0400 (Fri, 18 May 2007) | 3 lines

 * file_info_moved(), download_move_done(): Revoke the file object to
   prevent that we access the wrong file after moving it.

------------------------------------------------------------------------
r13707 | cbiere | 2007-05-18 15:02:39 -0400 (Fri, 18 May 2007) | 3 lines

 * Use gtk_selection_data_set_text() for Gtk+ 2.x, otherwise UTF-8 encoded
   text becomes double-encoded.

------------------------------------------------------------------------
r13706 | cbiere | 2007-05-18 15:00:53 -0400 (Fri, 18 May 2007) | 2 lines

 * Added file_object_revoke().

------------------------------------------------------------------------
r13705 | cbiere | 2007-05-18 10:38:59 -0400 (Fri, 18 May 2007) | 3 lines

 * file_info_reparent_all(): Updated assertion check.
 * file_info_new_outname(): Removed outdated comment.

------------------------------------------------------------------------
r13704 | cbiere | 2007-05-18 10:02:14 -0400 (Fri, 18 May 2007) | 4 lines

 * download_move_done(): Update fi->pathname only in case of a good SHA-1
   because the structure will be recycled and we don't want to download
   the file into the corrupted file.

------------------------------------------------------------------------
r13703 | cbiere | 2007-05-18 09:58:19 -0400 (Fri, 18 May 2007) | 2 lines

 * file_info_reset(): Reset FI_F_STRIPPED.

------------------------------------------------------------------------
r13702 | cbiere | 2007-05-18 09:42:30 -0400 (Fri, 18 May 2007) | 5 lines

 * file_info_unlink(): Don't unlink() stripped files either.
 * download_move_done(): Update fi->pathname only in case of a good SHA-1
   because the structure will be recycled and we don't want to download
   the file into the corrupted file.

------------------------------------------------------------------------
r13701 | rmanfredi | 2007-05-18 04:34:56 -0400 (Fri, 18 May 2007) | 2 lines

Make callback de-referencing explicit.

------------------------------------------------------------------------
r13700 | cbiere | 2007-05-17 19:49:56 -0400 (Thu, 17 May 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13699 | cbiere | 2007-05-17 19:31:35 -0400 (Thu, 17 May 2007) | 2 lines

 * 1745 new items.

------------------------------------------------------------------------
r13698 | cbiere | 2007-05-17 19:20:33 -0400 (Thu, 17 May 2007) | 2 lines

 * Fixed for compiling with Gtk+ 1.2.

------------------------------------------------------------------------
r13697 | rmanfredi | 2007-05-17 18:30:38 -0400 (Thu, 17 May 2007) | 4 lines

download_has_enough_active_sources(): disabled broken logic (the smaller
the remaining data, the less sources) that leads to hard to complete files
whilst the queue fills with downloads waiting for a free slot...

------------------------------------------------------------------------
r13696 | cbiere | 2007-05-17 17:12:37 -0400 (Thu, 17 May 2007) | 4 lines

 * fi_by_outname: Use the full pathname as key, otherwise we cannot completely
   avoid clashes in file_info_moved() if we only use the basename.
 * file_info_new_outname(): Simplified.

------------------------------------------------------------------------
r13695 | cbiere | 2007-05-17 16:38:33 -0400 (Thu, 17 May 2007) | 5 lines

 * file_info_new_outname(): Fixed memory leak from recent commits.
 * file_info_moved(): Changed check so that "value" is not optimized away.
 * file_info_hash_insert(), file_info_hash_remove(): Use same check as
   above.

------------------------------------------------------------------------
r13694 | cbiere | 2007-05-17 16:17:56 -0400 (Thu, 17 May 2007) | 3 lines

 * Added file_info_strip_trailer() so that FI_F_STRIPPED is consistently set.
 * fi_rename_dead(): Fixed inverted logic.

------------------------------------------------------------------------
r13693 | cbiere | 2007-05-17 15:36:00 -0400 (Thu, 17 May 2007) | 8 lines

 * file_info_check(): Check fi->pathname as well.
 * Mark the fileinfo if we have stripped the trailer.
 * fi_free(): Reordered due to stricter file_info_check().
 * file_info_store_one(): Skip fileinfo structures if the trailer has been
   stripped.
 * file_info_retrieve(): Set fi->pathname to a dummy path due to stricter
   file_info_check().

------------------------------------------------------------------------
r13692 | cbiere | 2007-05-17 14:54:09 -0400 (Thu, 17 May 2007) | 2 lines

 * file_info_retrieve(): Forgot to set fi->pathname.

------------------------------------------------------------------------
r13691 | cbiere | 2007-05-17 14:10:29 -0400 (Thu, 17 May 2007) | 18 lines

 * struct dl_file_info: Merged "path" and "file_name" into "pathname" so
   that we don't have to concatenate them everytime we access the file or
   need the full pathname.
 * Renamed download_path() to download_pathname().
 * Renamed download_outname() to download_basename().
 * download_move_done(): Added the destination pathname as parameter so
   that we can handle file_info_moved() here.
 * download_move(), d_end(): Let download_move_done() call file_info_moved().
 * dmesh_multiple_downloads(): Fixed minor bug: filename was never and
   p->name was always used.
 * file_info_retrieve_binary(), file_info_moved(): Use the pathname as
   parameter instead of path and filename separately.
 * fi_rename_dead(): Use unique_filename() to decrease the likeliness that
   the file cannot be moved due to an already existing file.
 * file_info_new_outname():
   * Put parameters into logical order.
   * Return a full pathname as atom instead of just the basename.

------------------------------------------------------------------------
r13690 | rmanfredi | 2007-05-17 09:57:55 -0400 (Thu, 17 May 2007) | 2 lines

file_info_moved(): added leading comment and extra pre-condition.

------------------------------------------------------------------------
r13689 | rmanfredi | 2007-05-17 09:55:22 -0400 (Thu, 17 May 2007) | 3 lines

Also invoke file_info_moved() after file is moved, before calling
download_move_done().

------------------------------------------------------------------------
r13688 | rmanfredi | 2007-05-17 09:09:36 -0400 (Thu, 17 May 2007) | 3 lines

Until we can propagate only good alt-locs, don't propagate those for which
we had bad feedback already.

------------------------------------------------------------------------
r13687 | rmanfredi | 2007-05-17 09:00:33 -0400 (Thu, 17 May 2007) | 2 lines

Removed unused variables.

------------------------------------------------------------------------
r13686 | rmanfredi | 2007-05-17 08:57:26 -0400 (Thu, 17 May 2007) | 4 lines

Forgot to remove overlapping range from the amount of data read, when setting
the download to "ignore", resulting in us discarding the connection at the
end of the chunk, defeating the whole purpose of ignoring!

------------------------------------------------------------------------
r13685 | cbiere | 2007-05-17 08:20:43 -0400 (Thu, 17 May 2007) | 2 lines

 * Increased default for "pfsp_minimum_filesize" to 1 MiB.

------------------------------------------------------------------------
r13684 | rmanfredi | 2007-05-17 05:51:42 -0400 (Thu, 17 May 2007) | 3 lines

Fixed inverted logic causing "Queued" to be wrongly displayed for the
summary download row.

------------------------------------------------------------------------
r13683 | cbiere | 2007-05-16 21:53:08 -0400 (Wed, 16 May 2007) | 2 lines

 * fi_gui_get_file_url(): Fixed.

------------------------------------------------------------------------
r13682 | cbiere | 2007-05-16 21:52:00 -0400 (Wed, 16 May 2007) | 2 lines

 * Fuck you, Cisco.

------------------------------------------------------------------------
r13681 | cbiere | 2007-05-16 21:18:14 -0400 (Wed, 16 May 2007) | 3 lines

 * Merged drag-related code into src/ui/gtk/drag.[ch].
 * Added file_info_get_file_url() so that GUI does not have to handle this.

------------------------------------------------------------------------
r13680 | cbiere | 2007-05-16 21:10:26 -0400 (Wed, 16 May 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r13679 | cbiere | 2007-05-16 20:26:23 -0400 (Wed, 16 May 2007) | 2 lines

 * 4380 new items.

------------------------------------------------------------------------
r13678 | cbiere | 2007-05-16 15:46:10 -0400 (Wed, 16 May 2007) | 2 lines

 * fi_gui_fill_status(): Fill the "Uploaded" column.

------------------------------------------------------------------------
r13677 | cbiere | 2007-05-16 15:31:12 -0400 (Wed, 16 May 2007) | 2 lines

 * create_download(): Make sure orphaned downloads can pass.

------------------------------------------------------------------------
r13676 | cbiere | 2007-05-16 14:44:58 -0400 (Wed, 16 May 2007) | 3 lines

 * Added a column at the downloads display which shows the amount of data
   which has been uploaded for any file.

------------------------------------------------------------------------
r13675 | cbiere | 2007-05-16 14:37:15 -0400 (Wed, 16 May 2007) | 3 lines

 * Changed some assertions to non-fatal because there's little reason to
   crash here. The bugs seems to be related to seeding.

------------------------------------------------------------------------
r13674 | cbiere | 2007-05-16 14:30:49 -0400 (Wed, 16 May 2007) | 3 lines

 * create_download(): Reject the download if the fileinfo claims the download
   has already finished.

------------------------------------------------------------------------
r13673 | cbiere | 2007-05-16 14:29:52 -0400 (Wed, 16 May 2007) | 3 lines

 * file_info_store_one(): Don't store downloads which are already seeding.
 * fi_increase_uploaded(): Send an event to listeners.

------------------------------------------------------------------------
r13672 | cbiere | 2007-05-16 12:43:56 -0400 (Wed, 16 May 2007) | 6 lines

 * Added fi_increase_uploaded() to account for how much was uploaded for
   any downloaded file.
 * upload_file_present():
   * Added comment.
   * After requesting SHA-1 computation, branch to failure.

------------------------------------------------------------------------
r13671 | rmanfredi | 2007-05-16 12:06:16 -0400 (Wed, 16 May 2007) | 4 lines

Fixed wrong test.
Couldn't decide why an uploaded file is deemded missing when its FI_F_SEEDING
flag is set, but decided to leave that part of the test intact.

------------------------------------------------------------------------
r13670 | cbiere | 2007-05-16 11:59:29 -0400 (Wed, 16 May 2007) | 2 lines

 * Call crash_init() unconditionally.

------------------------------------------------------------------------
r13669 | cbiere | 2007-05-16 11:49:55 -0400 (Wed, 16 May 2007) | 3 lines

 * Log a crash message also for SIGSEGV, SIGBUS etc. not just fatal
   assertion failures.

------------------------------------------------------------------------
r13668 | cbiere | 2007-05-16 08:52:23 -0400 (Wed, 16 May 2007) | 2 lines

 * Extended some ranges.

------------------------------------------------------------------------
r13667 | rmanfredi | 2007-05-15 16:29:04 -0400 (Tue, 15 May 2007) | 3 lines

Removed comments that still referred to the now defunct "end" parameter.
Added comment for public routine.

------------------------------------------------------------------------
r13666 | cbiere | 2007-05-15 13:45:16 -0400 (Tue, 15 May 2007) | 2 lines

 * 4330 more killer hashes.

------------------------------------------------------------------------
r13665 | cbiere | 2007-05-15 07:03:09 -0400 (Tue, 15 May 2007) | 4 lines

 * Fix for Assertion failure in downloads.c:3534: "!has_blank_guid(d)":
   "d->always_push" must be corrected each time d->server changes as the
   latter holds the GUID which might be "blank".

------------------------------------------------------------------------
r13664 | cbiere | 2007-05-15 04:32:48 -0400 (Tue, 15 May 2007) | 2 lines

 * search_set_details(): Fixed display of "browsable"; used wrong flag.

------------------------------------------------------------------------
r13663 | cbiere | 2007-05-15 04:19:48 -0400 (Tue, 15 May 2007) | 2 lines

 * 1382 new items.

------------------------------------------------------------------------
r13662 | cbiere | 2007-05-15 04:01:31 -0400 (Tue, 15 May 2007) | 5 lines

 * Added file_info_moved() to update the pathname after moving a downloaded
   file. This makes the hack in GUI unnecessary.
 * download_move_done(): Keep on uploading after a successful download if
   partial filesharing is enabled for the file.

------------------------------------------------------------------------
r13661 | cbiere | 2007-05-15 03:49:41 -0400 (Tue, 15 May 2007) | 2 lines

 * Added shared_file_set_path().

------------------------------------------------------------------------
r13660 | cbiere | 2007-05-14 23:03:23 -0400 (Mon, 14 May 2007) | 4 lines

 * Avoid needless warnings.
 * Use stat() instead of open() and fstat() when we're just checking
   the existence and size.

------------------------------------------------------------------------
r13659 | cbiere | 2007-05-14 23:01:23 -0400 (Mon, 14 May 2007) | 2 lines

 * Added file_create_missing().

------------------------------------------------------------------------
r13658 | cbiere | 2007-05-14 22:29:55 -0400 (Mon, 14 May 2007) | 2 lines

 * tth_cache_file_open(): Don't emit a warning if the file does not exist.

------------------------------------------------------------------------
r13657 | cbiere | 2007-05-14 21:57:00 -0400 (Mon, 14 May 2007) | 2 lines

 * Prefer getlogin() with getpwnam() over getuid() with getpwuid().

------------------------------------------------------------------------
r13656 | cbiere | 2007-05-14 20:54:44 -0400 (Mon, 14 May 2007) | 2 lines

 * Make sure config_dir and home_dir are absolute paths.

------------------------------------------------------------------------
r13655 | cbiere | 2007-05-14 20:50:35 -0400 (Mon, 14 May 2007) | 2 lines

 * get_home(): Ignore $HOME if it's empty or a relative path.

------------------------------------------------------------------------
r13654 | cbiere | 2007-05-14 20:41:28 -0400 (Mon, 14 May 2007) | 4 lines

 * tth_cache_pathname(): Use the first two characters of the root hash as
   directory and the rest as filename to avoid storing too many files per
   directory.

------------------------------------------------------------------------
r13653 | cbiere | 2007-05-14 20:24:25 -0400 (Mon, 14 May 2007) | 2 lines

 * Style fix.

------------------------------------------------------------------------
r13652 | cbiere | 2007-05-14 20:23:46 -0400 (Mon, 14 May 2007) | 10 lines

 * filepath_directory():
   * Fixed so that multiple occurences of directory
     separators are skipped and not just the last (e.g., "/path////to///").
   * Don't return an empty string in case of the root directory.
 * create_directory():
   * Rewritten to use recursion.
   * Directories are now created from leaf to root so that it works with
     fancy permission (e.g., 'x' without 'r' or special ACL rules).
   * Added "mode" parameter and DEFAULT_DIRECTORY_MODE macro.

------------------------------------------------------------------------
r13651 | cbiere | 2007-05-14 19:59:41 -0400 (Mon, 14 May 2007) | 19 lines

 * options_parse():
   * Fixed bug: Non-ASCII characters caused undefined behaviour due to
     out of bounds read.
   * Use enums instead of numeric flags for readability.
   * As the error string is stored in a static array, there's no point in
     passing a pointer. Use options_parse_last_error() instead.
   * As argv is NULL-terminated and we have no need for knowning argc,
     don't pass it.
   * Removed "end" because it's error-prone.
   * Return the number of arguments parsed or -1 on error instead of a boolean.
   * Added assertion checks.
   * No need to deconstify the argument string, keep it const.
   * No need for empty AND a comment. "" + comment is fine.
   * Make sure we allow only ASCII options.
 * shell_parse_command(): Return an error if there are too many arguments
   instead of silently ignoring the rest; argv[] was not NULL-terminated
   either in this case.
 * shell_free_argv(): Simplified.

------------------------------------------------------------------------
r13650 | rmanfredi | 2007-05-14 15:43:20 -0400 (Mon, 14 May 2007) | 2 lines

Made "c" an integer.

------------------------------------------------------------------------
r13649 | rmanfredi | 2007-05-14 15:38:22 -0400 (Mon, 14 May 2007) | 2 lines

Removed useless casts from char to int.

------------------------------------------------------------------------
r13648 | rmanfredi | 2007-05-14 15:33:27 -0400 (Mon, 14 May 2007) | 2 lines

Added "-v" to the "set" command to verbosely set the value.

------------------------------------------------------------------------
r13647 | rmanfredi | 2007-05-14 15:32:28 -0400 (Mon, 14 May 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r13646 | rmanfredi | 2007-05-14 15:29:41 -0400 (Mon, 14 May 2007) | 2 lines

Added src/lib/options.[ch].

------------------------------------------------------------------------
r13645 | rmanfredi | 2007-05-13 15:31:39 -0400 (Sun, 13 May 2007) | 2 lines

Cosmetics, post-fixing indent's formatting.

------------------------------------------------------------------------
r13644 | rmanfredi | 2007-05-13 15:29:02 -0400 (Sun, 13 May 2007) | 2 lines

Put under GTKG's standards (license, headers, formatting).

------------------------------------------------------------------------
r13643 | rmanfredi | 2007-05-13 15:03:36 -0400 (Sun, 13 May 2007) | 2 lines

Removed latest fix, which duplicated already existing fix.

------------------------------------------------------------------------
r13642 | rmanfredi | 2007-05-13 14:55:43 -0400 (Sun, 13 May 2007) | 2 lines

Must make sure GUID is not blank before turning "always_push" on.

------------------------------------------------------------------------
r13641 | cbiere | 2007-05-13 13:53:25 -0400 (Sun, 13 May 2007) | 2 lines

 * 5233 new items.

------------------------------------------------------------------------
r13640 | rmanfredi | 2007-05-13 12:04:41 -0400 (Sun, 13 May 2007) | 2 lines

Cosmetic.

------------------------------------------------------------------------
r13639 | rmanfredi | 2007-05-13 12:04:20 -0400 (Sun, 13 May 2007) | 2 lines

Show previous property value when setting.

------------------------------------------------------------------------
r13638 | cbiere | 2007-05-13 11:55:31 -0400 (Sun, 13 May 2007) | 2 lines

 * This is your ant.

------------------------------------------------------------------------
r13637 | cbiere | 2007-05-13 11:17:16 -0400 (Sun, 13 May 2007) | 2 lines

 * Fixed DND for the search result details treeview.

------------------------------------------------------------------------
r13636 | cbiere | 2007-05-13 10:08:48 -0400 (Sun, 13 May 2007) | 2 lines

 * 3839 new items.

------------------------------------------------------------------------
r13635 | cbiere | 2007-05-13 08:42:07 -0400 (Sun, 13 May 2007) | 2 lines

 * search_set_details(): Show the Bitzi URL.

------------------------------------------------------------------------
r13634 | rmanfredi | 2007-05-13 06:11:33 -0400 (Sun, 13 May 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13633 | rmanfredi | 2007-05-13 04:18:19 -0400 (Sun, 13 May 2007) | 2 lines

Added 58585858585858585858585858585858 to the list of banned GUIDs.

------------------------------------------------------------------------
r13632 | cbiere | 2007-05-13 02:40:23 -0400 (Sun, 13 May 2007) | 2 lines

 * Drop more bogus queries.

------------------------------------------------------------------------
r13631 | cbiere | 2007-05-13 01:37:47 -0400 (Sun, 13 May 2007) | 3 lines

 * socket_tcp_listen(): Call socket_set_accept_filters() after listen(), not
   before, because this requires a listening socket.

------------------------------------------------------------------------
r13630 | cbiere | 2007-05-13 00:47:15 -0400 (Sun, 13 May 2007) | 2 lines

 * Busted a couple of saboteurs.

------------------------------------------------------------------------
r13629 | cbiere | 2007-05-13 00:30:01 -0400 (Sun, 13 May 2007) | 3 lines

 * Removed unnecessary function gui_update_queue_frozen(); the GUI can track
   the property.

------------------------------------------------------------------------
r13628 | cbiere | 2007-05-13 00:26:34 -0400 (Sun, 13 May 2007) | 4 lines

 * node_dump_packet(): Use a queue so that we can tolerate a couple of
   partial writes and temporary errors. However, if the queue fills up,
   we hang up, discard the data and disabling packet dumping.

------------------------------------------------------------------------
r13627 | cbiere | 2007-05-13 00:17:17 -0400 (Sun, 13 May 2007) | 2 lines

 * Added tt_good_slice_size().

------------------------------------------------------------------------
r13626 | cbiere | 2007-05-13 00:14:06 -0400 (Sun, 13 May 2007) | 4 lines

 * tbuf was incompletely initialized i.e., tbuf.end was not set. This caused
   failing bounds checks resulting in memory corruption when reading
   fileinfo trailers.

------------------------------------------------------------------------
r13625 | cbiere | 2007-05-12 22:58:26 -0400 (Sat, 12 May 2007) | 2 lines

 * Added src/core/spam_sha1.[ch].

------------------------------------------------------------------------
r13624 | cbiere | 2007-05-12 21:48:58 -0400 (Sat, 12 May 2007) | 3 lines

 * download_restore_state(): Freeze the queue whilst loading.
 * download_send_head_ping(): Don't send one if the queue is frozen.

------------------------------------------------------------------------
r13623 | cbiere | 2007-05-12 20:38:34 -0400 (Sat, 12 May 2007) | 2 lines

 * Cosmetic.

------------------------------------------------------------------------
r13622 | cbiere | 2007-05-12 20:37:47 -0400 (Sat, 12 May 2007) | 2 lines

 * get_random_offset(): Align offsets to 128 KiB.

------------------------------------------------------------------------
r13621 | cbiere | 2007-05-12 20:17:55 -0400 (Sat, 12 May 2007) | 2 lines

 * shell_discard_output(): Use pmsg_slist_free().

------------------------------------------------------------------------
r13620 | cbiere | 2007-05-12 20:17:03 -0400 (Sat, 12 May 2007) | 2 lines

 * Added pmsg_slist_free().

------------------------------------------------------------------------
r13619 | cbiere | 2007-05-12 19:51:23 -0400 (Sat, 12 May 2007) | 5 lines

 * shell_write():
   * Extracted code and moved it to pmsg_slist_append().
   * Fixed bug: The code was potentially reading from beyond the end of the
     string.

------------------------------------------------------------------------
r13618 | cbiere | 2007-05-12 19:45:59 -0400 (Sat, 12 May 2007) | 2 lines

 * Added pmsg_slist_append().

------------------------------------------------------------------------
r13617 | cbiere | 2007-05-12 18:21:14 -0400 (Sat, 12 May 2007) | 4 lines

 * node_dump_packet():
   * Use writev().
   * Don't use errno if there was a partial write.

------------------------------------------------------------------------
r13616 | cbiere | 2007-05-12 18:07:17 -0400 (Sat, 12 May 2007) | 2 lines

 * socket_set_nonblocking(): Use file_set_nonblocking().

------------------------------------------------------------------------
r13615 | cbiere | 2007-05-12 18:05:59 -0400 (Sat, 12 May 2007) | 2 lines

 * Added file_set_nonblocking().

------------------------------------------------------------------------
r13614 | rmanfredi | 2007-05-12 18:03:08 -0400 (Sat, 12 May 2007) | 2 lines

Disable dumping if we can't open the destination for whatever reason.

------------------------------------------------------------------------
r13613 | rmanfredi | 2007-05-12 18:02:31 -0400 (Sat, 12 May 2007) | 2 lines

Made dump_received_gnutella_packets non-persistent.

------------------------------------------------------------------------
r13612 | rmanfredi | 2007-05-12 17:46:11 -0400 (Sat, 12 May 2007) | 3 lines

Actually stop writing RX data to the dump file as soon as an error occurs,
and show the error string in the warning.

------------------------------------------------------------------------
r13611 | rmanfredi | 2007-05-12 17:43:06 -0400 (Sat, 12 May 2007) | 2 lines

No need to use stdio to dump the RX packets, just use syscalls.

------------------------------------------------------------------------
r13610 | rmanfredi | 2007-05-12 17:11:23 -0400 (Sat, 12 May 2007) | 2 lines

When dumping RX packets, use non-blocking I/Os in case we write to a named pipe.

------------------------------------------------------------------------
r13609 | cbiere | 2007-05-12 05:59:08 -0400 (Sat, 12 May 2007) | 2 lines

 * get_random_offset(): Corrected nonsense.

------------------------------------------------------------------------
r13608 | rmanfredi | 2007-05-12 05:39:03 -0400 (Sat, 12 May 2007) | 2 lines

Added comment in get_random_offset().

------------------------------------------------------------------------
r13607 | cbiere | 2007-05-12 04:39:00 -0400 (Sat, 12 May 2007) | 2 lines

 * get_random_offset(): Minor optimization for TrashCC.

------------------------------------------------------------------------
r13606 | rmanfredi | 2007-05-12 03:23:07 -0400 (Sat, 12 May 2007) | 2 lines

Fixed comment of spam_sha1_load().

------------------------------------------------------------------------
r13605 | cbiere | 2007-05-12 03:05:32 -0400 (Sat, 12 May 2007) | 2 lines

 * get_random_offset(): Align the offset at least to TTH_BLOCKSIZE.

------------------------------------------------------------------------
r13604 | cbiere | 2007-05-12 02:22:05 -0400 (Sat, 12 May 2007) | 2 lines

 * 1820 new items.

------------------------------------------------------------------------
r13603 | cbiere | 2007-05-12 01:48:39 -0400 (Sat, 12 May 2007) | 2 lines

 * 3061 new items.

------------------------------------------------------------------------
r13602 | cbiere | 2007-05-11 21:26:15 -0400 (Fri, 11 May 2007) | 2 lines

 * 2401 new items.

------------------------------------------------------------------------
r13601 | cbiere | 2007-05-11 15:54:31 -0400 (Fri, 11 May 2007) | 2 lines

 * Re-added non-hash filters.

------------------------------------------------------------------------
r13600 | cbiere | 2007-05-11 15:45:47 -0400 (Fri, 11 May 2007) | 2 lines

 * Moved all SHA-1s to spam_sha1.txt.

------------------------------------------------------------------------
r13599 | cbiere | 2007-05-11 14:15:46 -0400 (Fri, 11 May 2007) | 5 lines

 * Moved SHA-1 spam filtering to spam_sha1.[ch] which will fetch SHA-1s
   from "spam_sha1.txt" which contains just a list of base32-encoded SHA-1s
   and nothing else. For backwards compatibility, spam.txt can still list
   SHA-1s.

------------------------------------------------------------------------
r13598 | cbiere | 2007-05-11 09:42:36 -0400 (Fri, 11 May 2007) | 2 lines

 * 5005 new items.

------------------------------------------------------------------------
r13597 | cbiere | 2007-05-10 18:24:15 -0400 (Thu, 10 May 2007) | 2 lines

 * 3213 new items.

------------------------------------------------------------------------
r13596 | cbiere | 2007-05-10 17:02:02 -0400 (Thu, 10 May 2007) | 2 lines

 * hrealloc(): Avoid unnecessary reallocations.

------------------------------------------------------------------------
r13595 | cbiere | 2007-05-10 14:56:47 -0400 (Thu, 10 May 2007) | 2 lines

 * 3628 new items.

------------------------------------------------------------------------
r13594 | cbiere | 2007-05-10 12:44:47 -0400 (Thu, 10 May 2007) | 2 lines

 * Removed special attributes from internal assertion_message().

------------------------------------------------------------------------
r13593 | cbiere | 2007-05-10 12:40:23 -0400 (Thu, 10 May 2007) | 4 lines

 * Prefix the message with CRASH or WARNING so that one can easily tell
   whether the failure was fatal or not.
 * Show the PID if fatal.

------------------------------------------------------------------------
r13592 | rmanfredi | 2007-05-10 11:49:27 -0400 (Thu, 10 May 2007) | 3 lines

Do not reset d->start_date on completed (stopped) downloads, as this will be
used to compute the chunk downloading rate.

------------------------------------------------------------------------
r13591 | cbiere | 2007-05-10 10:20:19 -0400 (Thu, 10 May 2007) | 3 lines

 * download_send_head_ping(): Don't send a HEAD ping for non-swarmed
   downloads.

------------------------------------------------------------------------
r13590 | cbiere | 2007-05-10 01:55:39 -0400 (Thu, 10 May 2007) | 4 lines

 * Added alloc_pages0().
 * Removed unused page_table_replace().
 * page_table_insert(): Make sure the allocated memory is clean.

------------------------------------------------------------------------
r13589 | rmanfredi | 2007-05-10 01:17:27 -0400 (Thu, 10 May 2007) | 4 lines

Also send HEAD Pings during create_download() if we don't start the
download immediately because of internal limits: an accurate list of alt-locs
is more important.

------------------------------------------------------------------------
r13588 | rmanfredi | 2007-05-10 01:07:39 -0400 (Thu, 10 May 2007) | 2 lines

fi_find_largest() can return NULL.

------------------------------------------------------------------------
r13587 | cbiere | 2007-05-10 00:09:14 -0400 (Thu, 10 May 2007) | 2 lines

 * get_results_set(): Another spam check.

------------------------------------------------------------------------
r13586 | cbiere | 2007-05-09 22:51:24 -0400 (Wed, 09 May 2007) | 2 lines

 * Try harder or try dying.

------------------------------------------------------------------------
r13585 | cbiere | 2007-05-09 22:39:34 -0400 (Wed, 09 May 2007) | 2 lines

 * Renamed macros because they caused clashes on some systems.

------------------------------------------------------------------------
r13584 | cbiere | 2007-05-09 22:08:15 -0400 (Wed, 09 May 2007) | 4 lines

 * Don't store walloc()ed chunks in the hashtable because the table gets to
   large. Instead store the size ahead of the chunk.
 * Use a pagetable instead of hashtable if possible.

------------------------------------------------------------------------
r13583 | cbiere | 2007-05-09 22:06:12 -0400 (Wed, 09 May 2007) | 2 lines

 * Cosmetic change.

------------------------------------------------------------------------
r13582 | cbiere | 2007-05-09 22:02:51 -0400 (Wed, 09 May 2007) | 2 lines

 * Added src/lib/pagetable.[ch].

------------------------------------------------------------------------
r13581 | cbiere | 2007-05-09 19:47:42 -0400 (Wed, 09 May 2007) | 2 lines

 * 6644 new items.

------------------------------------------------------------------------
r13580 | rmanfredi | 2007-05-09 17:20:45 -0400 (Wed, 09 May 2007) | 4 lines

fi_find_aggressive_candidate() will now consider both the largest chunk
(to minimize the amount of aggressive choices we have to make) and the one
served by the slowest server.

------------------------------------------------------------------------
r13579 | rmanfredi | 2007-05-09 17:19:18 -0400 (Wed, 09 May 2007) | 3 lines

Let download_speed_avg() decimate the computed average speed when the
dowmload is currently stalling.

------------------------------------------------------------------------
r13578 | cbiere | 2007-05-08 23:35:27 -0400 (Tue, 08 May 2007) | 2 lines

 * Spammer go home!

------------------------------------------------------------------------
r13577 | cbiere | 2007-05-08 21:31:05 -0400 (Tue, 08 May 2007) | 2 lines

 * 201 new items.

------------------------------------------------------------------------
r13575 | cbiere | 2007-05-08 19:27:02 -0400 (Tue, 08 May 2007) | 2 lines

 * Append items because cursor-up should gain the most recent search term.

------------------------------------------------------------------------
r13574 | cbiere | 2007-05-08 18:29:25 -0400 (Tue, 08 May 2007) | 2 lines

 * 1330 new items.

------------------------------------------------------------------------
r13573 | cbiere | 2007-05-08 16:31:49 -0400 (Tue, 08 May 2007) | 2 lines

 * Fixed typo in previous commit.

------------------------------------------------------------------------
r13572 | cbiere | 2007-05-08 16:29:59 -0400 (Tue, 08 May 2007) | 3 lines

 * Added DL_F_GOT_TIGERTREE to prevent frequent re-downloads of tigertree
   data from the same source.

------------------------------------------------------------------------
r13571 | rmanfredi | 2007-05-08 15:47:59 -0400 (Tue, 08 May 2007) | 6 lines

Made download_retry() private.
Ensure we use exponential back-off when queuing a file back.  This had been
broken a long time ago and could result in downloads quickly reaching their
maximum retry count when encountering weird conditions such as EOF during
HTTP header reading.

------------------------------------------------------------------------
r13570 | cbiere | 2007-05-08 14:08:05 -0400 (Tue, 08 May 2007) | 5 lines

 * create_download(): Clear SOCK_F_PUSH if we have no valid GUID. We cannot
   send a PUSH otherwise and would cause an assertion failure in
   download_send_head_ping().
 * Use GUID_RAW_SIZE instead of 16.

------------------------------------------------------------------------
r13569 | cbiere | 2007-05-08 11:35:19 -0400 (Tue, 08 May 2007) | 3 lines

 * unique_filename(): Ignore the "mid" part if it does not fit into the buffer,
   otherwise we'd truncate the filename even though it's not too long.

------------------------------------------------------------------------
r13568 | rmanfredi | 2007-05-08 05:02:31 -0400 (Tue, 08 May 2007) | 4 lines

Turned download_speed_avg() into a routine.
Also uses the current connection's average speed, if it is available, and keep
the maximum between that and the server's average speed.

------------------------------------------------------------------------
r13567 | rmanfredi | 2007-05-08 03:27:07 -0400 (Tue, 08 May 2007) | 3 lines

Increased max amount of entries per SHA1 to 256, now that we use a hash table
to locate the entries and do not have to scan a list.

------------------------------------------------------------------------
r13566 | rmanfredi | 2007-05-08 03:06:15 -0400 (Tue, 08 May 2007) | 3 lines

Must cancel the banned-mesh expire timer when forcefully removing the entry.
Or boom when it fires on freed data.

------------------------------------------------------------------------
r13565 | cbiere | 2007-05-07 20:43:16 -0400 (Mon, 07 May 2007) | 4 lines

 * file_info_size_known(): Free the old "size_atom". This fixes leak
   of filesize atoms with size "0" that is when downloading files of an
   initially unknown size.

------------------------------------------------------------------------
r13564 | cbiere | 2007-05-07 20:24:40 -0400 (Mon, 07 May 2007) | 4 lines

 * unique_filename():
   * name_len wasn't updated after truncation.
   * Added utf8_truncate() to simplify the code a bit.

------------------------------------------------------------------------
r13563 | cbiere | 2007-05-07 19:56:49 -0400 (Mon, 07 May 2007) | 3 lines

 * file_info_new_outname(): Simplified since unique_filename() preserves
   the filename extension now.

------------------------------------------------------------------------
r13562 | cbiere | 2007-05-07 19:55:27 -0400 (Mon, 07 May 2007) | 6 lines

 * unique_filename():
   * Preserve also an existing filename extension at the
     end of "name" because "ext" is something like ".BAD" or ".GOOD" which
     we add and not an extension indicating the filetype.
   * Update the lengths after utf8_strlcpy().

------------------------------------------------------------------------
r13561 | bpringlemeir | 2007-05-07 19:41:25 -0400 (Mon, 07 May 2007) | 2 lines

In gm_sanitize_filename(), use filename for filename_shrink().

------------------------------------------------------------------------
r13560 | cbiere | 2007-05-07 19:35:42 -0400 (Mon, 07 May 2007) | 2 lines

 * gm_sanitize_filename(): Fixed stupid bug in previous commit.

------------------------------------------------------------------------
r13559 | cbiere | 2007-05-07 18:29:50 -0400 (Mon, 07 May 2007) | 2 lines

 * Hide some debug messages by default.

------------------------------------------------------------------------
r13558 | cbiere | 2007-05-07 18:28:55 -0400 (Mon, 07 May 2007) | 2 lines

 * fetch_alt_locs(): Removed bad const.

------------------------------------------------------------------------
r13557 | cbiere | 2007-05-07 18:26:44 -0400 (Mon, 07 May 2007) | 3 lines

 * unique_filename(): Rewritten to ensure that the filename is shorter than
   FILENAME_MAXBYTES as we cannot create files with longer names.

------------------------------------------------------------------------
r13556 | cbiere | 2007-05-07 18:24:52 -0400 (Mon, 07 May 2007) | 2 lines

 * handle_head_pong(): Moved some code to fetch_alt_locs().

------------------------------------------------------------------------
r13555 | cbiere | 2007-05-07 18:23:22 -0400 (Mon, 07 May 2007) | 2 lines

 * Added property "tigertree_debug".

------------------------------------------------------------------------
r13554 | rmanfredi | 2007-05-07 18:16:58 -0400 (Mon, 07 May 2007) | 3 lines

Calls to gmsg_split_to_pmsg() must include the total size, including the header,
not just the data size...

------------------------------------------------------------------------
r13553 | rmanfredi | 2007-05-07 17:50:00 -0400 (Mon, 07 May 2007) | 4 lines

Make sure the status is correctly shown in the GUI when all the active slots
are actually ignoring the received data: act as if still downloading and show
the summary.

------------------------------------------------------------------------
r13552 | rmanfredi | 2007-05-07 17:33:03 -0400 (Mon, 07 May 2007) | 4 lines

Fixed dmesh_good_mark() to handle the case where the good entry is not
present in the mesh, probably because it was wrongly banned.
Re-ordered code a little to avoid forward declarations.

------------------------------------------------------------------------
r13551 | cbiere | 2007-05-07 17:07:01 -0400 (Mon, 07 May 2007) | 2 lines

 * Added FILENAME_MAXBYTES.

------------------------------------------------------------------------
r13550 | cbiere | 2007-05-07 16:58:43 -0400 (Mon, 07 May 2007) | 2 lines

 * Extracted some code out of gm_sanitize_filename() as filename_shrink().

------------------------------------------------------------------------
r13549 | cbiere | 2007-05-07 16:56:54 -0400 (Mon, 07 May 2007) | 3 lines

 * Pack/unpack addresses correctly for NET_TYPE_LOCAL, albeit it probably
   doesn't really matter.

------------------------------------------------------------------------
r13548 | rmanfredi | 2007-05-07 16:56:34 -0400 (Mon, 07 May 2007) | 5 lines

When aggressive swarming triggers near the end, chunks are stolen from
each other, causing possible disruption in previously scheduled dowmloads.
Avoid losing good slots as much as possible by trying to ignore data when
we bump into a completed chunk.

------------------------------------------------------------------------
r13547 | rmanfredi | 2007-05-07 16:37:44 -0400 (Mon, 07 May 2007) | 3 lines

Must not increment the receive count in the fileinfo when we're ignoring
the data we're getting.

------------------------------------------------------------------------
r13546 | cbiere | 2007-05-07 16:15:10 -0400 (Mon, 07 May 2007) | 2 lines

 * Fixed minor typo.

------------------------------------------------------------------------
r13545 | rmanfredi | 2007-05-07 15:52:16 -0400 (Mon, 07 May 2007) | 2 lines

Use "_cb" instead of "_t" for callback typedef.

------------------------------------------------------------------------
r13544 | rmanfredi | 2007-05-07 15:23:17 -0400 (Mon, 07 May 2007) | 2 lines

Parse X-Nalt headers for uploads and downloads to record known bad sources.

------------------------------------------------------------------------
r13543 | cbiere | 2007-05-07 13:27:12 -0400 (Mon, 07 May 2007) | 7 lines

 * Added head_ping_register_own() and head_ping_register_forwarded() because
   in the former case we record the address of the target and in the latter
   the address of the source.
 * handle_head_pong(): Check also the port because if the Ping was routed
   by GUID, we don't know the actual address, so we can't use it for the
   download mesh.

------------------------------------------------------------------------
r13542 | rmanfredi | 2007-05-07 13:19:45 -0400 (Mon, 07 May 2007) | 3 lines

Distribute good/bad marks to the mesh entries, depending on the feedback we
get from our download requests.

------------------------------------------------------------------------
r13541 | rmanfredi | 2007-05-07 13:18:30 -0400 (Mon, 07 May 2007) | 6 lines

Revisited data structures of the download mesh, adding support for negative
entry notification (X-Nalt) and good entry notification (successful download
connection, HEAD Pong response).
The new data structure ensures that we keep at most one entry per addr:port
and favors "/uri-res/N2R?" forms.

------------------------------------------------------------------------
r13540 | rmanfredi | 2007-05-07 12:41:10 -0400 (Mon, 07 May 2007) | 2 lines

Adapted binary_hash() so that it can be used with any buffer length.

------------------------------------------------------------------------
r13539 | cbiere | 2007-05-07 12:23:31 -0400 (Mon, 07 May 2007) | 2 lines

 * Increased FI_MAX_FIELD_LEN because tigertree may be much larger.

------------------------------------------------------------------------
r13538 | cbiere | 2007-05-07 12:13:05 -0400 (Mon, 07 May 2007) | 3 lines

 * Create a backup of "sha1_cache" before we dump the current cache, so that
   a full disk does not cause lossage of the complete cache.

------------------------------------------------------------------------
r13537 | rmanfredi | 2007-05-07 11:26:03 -0400 (Mon, 07 May 2007) | 2 lines

Fixed wrong comment.

------------------------------------------------------------------------
r13536 | rmanfredi | 2007-05-07 10:02:18 -0400 (Mon, 07 May 2007) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r13535 | rmanfredi | 2007-05-07 09:58:51 -0400 (Mon, 07 May 2007) | 2 lines

Added convenience routines to be able to use packed_host data as hash keys.

------------------------------------------------------------------------
r13534 | rmanfredi | 2007-05-07 09:57:35 -0400 (Mon, 07 May 2007) | 2 lines

Added gm_hash_table_foreach_key().

------------------------------------------------------------------------
r13533 | rmanfredi | 2007-05-07 03:16:41 -0400 (Mon, 07 May 2007) | 2 lines

hash_list_free: updated leading comment to make clear why we pass an address.

------------------------------------------------------------------------
r13532 | rmanfredi | 2007-05-07 02:58:27 -0400 (Mon, 07 May 2007) | 2 lines

Added more information in HEAD Ping/Pong debugging traces.

------------------------------------------------------------------------
r13531 | cbiere | 2007-05-06 18:47:08 -0400 (Sun, 06 May 2007) | 2 lines

 * handle_head_pong(): Fixed call to head_ping_source_free().

------------------------------------------------------------------------
r13530 | cbiere | 2007-05-06 18:12:27 -0400 (Sun, 06 May 2007) | 10 lines

 * head_ping_is_registered(): Return the complete struct so that we can
   differ between Pongs for own and relayed Pings.
 * Changed VMSG_HEAD_CODE_MASK because VMSG_HEAD_STATUS_FIREWALLED and
   VMSG_HEAD_STATUS_DOWNLOADING are rather additional flags than part of
   the result code.
 * handle_head_pong():
   * Don't modify the download mesh if the Pong is only relayed.
   * Remove the target peer from the download mesh if it claims "not found".
   * Refresh the target peer's mesh entry as well on a positive result.

------------------------------------------------------------------------
r13529 | cbiere | 2007-05-06 18:05:43 -0400 (Sun, 06 May 2007) | 2 lines

 * Added dmesh_remove_alternate().

------------------------------------------------------------------------
r13528 | rmanfredi | 2007-05-06 17:03:48 -0400 (Sun, 06 May 2007) | 2 lines

Typo fix.

------------------------------------------------------------------------
r13527 | rmanfredi | 2007-05-06 17:02:38 -0400 (Sun, 06 May 2007) | 2 lines

Also send a HEAD ping when we deslect "d" in favor of "cur".

------------------------------------------------------------------------
r13526 | rmanfredi | 2007-05-06 16:52:26 -0400 (Sun, 06 May 2007) | 2 lines

More occasions to send a HEAD ping.

------------------------------------------------------------------------
r13525 | rmanfredi | 2007-05-06 15:51:28 -0400 (Sun, 06 May 2007) | 6 lines

Removed obsolete comment in core/downloads.c.
Contact all push proxies via UDP to maximize our chances, but remember we
did send an UDP push.  Next time we want to send a push, we'll also try to
contact the proxies via TCP (they could be UDP-firewalled), or even try to
ignore the PUSH flag...

------------------------------------------------------------------------
r13524 | cbiere | 2007-05-06 15:45:39 -0400 (Sun, 06 May 2007) | 2 lines

 * vmsg_send_head_ping(): Emit a debug message when we sent a HEAD ping.

------------------------------------------------------------------------
r13523 | cbiere | 2007-05-06 14:42:49 -0400 (Sun, 06 May 2007) | 4 lines

 * handle_head_pong():
   * Use dmesh_add_alternate() for simpler code.
   * Removed "n" which shadowed a parameter.

------------------------------------------------------------------------
r13522 | cbiere | 2007-05-06 14:36:05 -0400 (Sun, 06 May 2007) | 2 lines

 * Added dmesh_add_alternate().

------------------------------------------------------------------------
r13521 | rmanfredi | 2007-05-06 14:27:48 -0400 (Sun, 06 May 2007) | 2 lines

Added missing gnet_host_vec_free().

------------------------------------------------------------------------
r13520 | cbiere | 2007-05-06 14:17:47 -0400 (Sun, 06 May 2007) | 2 lines

 * download_list_send_head_ping(): Added missing list_iter_free().

------------------------------------------------------------------------
r13519 | cbiere | 2007-05-06 14:06:06 -0400 (Sun, 06 May 2007) | 2 lines

 * download_send_head_ping(): node_udp_get_addr_port() can return NULL.

------------------------------------------------------------------------
r13518 | rmanfredi | 2007-05-06 13:27:05 -0400 (Sun, 06 May 2007) | 3 lines

Send a HEAD ping to servers for which we're not going to schedule the download
immediately.  Respect a limit of 1 ping every 5 minutes per source.

------------------------------------------------------------------------
r13517 | rmanfredi | 2007-05-06 12:45:45 -0400 (Sun, 06 May 2007) | 2 lines

Parse alt locs from the HEAD pong and feed them to the download mesh.

------------------------------------------------------------------------
r13516 | rmanfredi | 2007-05-06 12:02:51 -0400 (Sun, 06 May 2007) | 2 lines

Removed wrong call to search_free_proxies() -- cut-n-paste error?

------------------------------------------------------------------------
r13515 | cbiere | 2007-05-06 10:31:57 -0400 (Sun, 06 May 2007) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r13514 | rmanfredi | 2007-05-06 10:27:52 -0400 (Sun, 06 May 2007) | 3 lines

Added comments.
Rationalized the sending of data / message blocks to a node.

------------------------------------------------------------------------
r13513 | rmanfredi | 2007-05-06 10:27:16 -0400 (Sun, 06 May 2007) | 4 lines

Do not clone message argument -- let the caller decide.
Most of the time, we don't want cloning and just let the queue pmsg_free()
the message block.

------------------------------------------------------------------------
r13512 | cbiere | 2007-05-06 10:18:55 -0400 (Sun, 06 May 2007) | 2 lines

 * Added some details regarding PUSH alt-locs.

------------------------------------------------------------------------
r13511 | cbiere | 2007-05-06 09:56:06 -0400 (Sun, 06 May 2007) | 2 lines

 * vmsg_send_head_pong(): Fixed typo.

------------------------------------------------------------------------
r13510 | rmanfredi | 2007-05-06 08:31:44 -0400 (Sun, 06 May 2007) | 2 lines

Show PFS percentage in status for queued files, if known.

------------------------------------------------------------------------
r13509 | rmanfredi | 2007-05-06 05:59:26 -0400 (Sun, 06 May 2007) | 4 lines

Fixed computation of rescheduling time for the GUI: we must take into account
both the `retry_after' and `timeout_delay' variables.
Also reset `timeout_delay' to 0 each time we get a successful connection!

------------------------------------------------------------------------
r13508 | rmanfredi | 2007-05-06 05:21:52 -0400 (Sun, 06 May 2007) | 2 lines

Added debugging traces for aggressive swarming.

------------------------------------------------------------------------
r13507 | rmanfredi | 2007-05-06 05:21:21 -0400 (Sun, 06 May 2007) | 2 lines

Handle "ignoring data" state for downloads as well.

------------------------------------------------------------------------
r13506 | rmanfredi | 2007-05-06 05:00:27 -0400 (Sun, 06 May 2007) | 3 lines

Can aggressively request download of a busy chunk if the owner of that chunk
is stalling.

------------------------------------------------------------------------
r13505 | rmanfredi | 2007-05-05 17:11:21 -0400 (Sat, 05 May 2007) | 2 lines

Added missing line-break.

------------------------------------------------------------------------
r13504 | rmanfredi | 2007-05-05 17:04:17 -0400 (Sat, 05 May 2007) | 5 lines

Smarter handling of resuming mismatches when they choose to backout and not
remove the file (which should be the common behaviour): instead of losing the
source and our place in their queue, try to ignore data if we haven't requested
too much or if it won't take too long to be fetched.  Then place a new request.

------------------------------------------------------------------------
r13503 | cbiere | 2007-05-05 14:31:25 -0400 (Sat, 05 May 2007) | 2 lines

 * Use download_check() instead of g_assert().

------------------------------------------------------------------------
r13502 | cbiere | 2007-05-05 14:24:07 -0400 (Sat, 05 May 2007) | 3 lines

 * Removed unused stuff from the "aging" interface.
 * Avoid "void *"; use typed pointers.

------------------------------------------------------------------------
r13501 | cbiere | 2007-05-05 14:03:09 -0400 (Sat, 05 May 2007) | 4 lines

 * Reverted to previous less obvious variant because it avoids an additional
   update of the hashtable.
 * Clear the magic.

------------------------------------------------------------------------
r13500 | rmanfredi | 2007-05-05 13:54:08 -0400 (Sat, 05 May 2007) | 2 lines

Show the uploading request number, counting only served chunks.

------------------------------------------------------------------------
r13499 | bpringlemeir | 2007-05-05 13:36:39 -0400 (Sat, 05 May 2007) | 2 lines

Free the old value, not the new one.

------------------------------------------------------------------------
r13498 | cbiere | 2007-05-05 13:33:23 -0400 (Sat, 05 May 2007) | 3 lines

 * aging_insert(): Just as we check the value, we must check that we free
   the key we are going to replace/insert.

------------------------------------------------------------------------
r13497 | cbiere | 2007-05-05 13:21:32 -0400 (Sat, 05 May 2007) | 3 lines

 * aging_insert(): Replace the key as well because it is only equal but not
   necessarily identical.

------------------------------------------------------------------------
r13496 | bpringlemeir | 2007-05-05 12:56:14 -0400 (Sat, 05 May 2007) | 2 lines

can_become_ultra: don't switch on upload stalls.

------------------------------------------------------------------------
r13495 | rmanfredi | 2007-05-05 12:32:14 -0400 (Sat, 05 May 2007) | 2 lines

Bumped date.

------------------------------------------------------------------------
r13494 | rmanfredi | 2007-05-05 12:27:05 -0400 (Sat, 05 May 2007) | 4 lines

Fixed broken list_clone_shift(): we must always break up a free chunk
containing the random offset, or we'll keep appending linearily to the data
in the next free chunk following it, thereby not randomly filling the holes.

------------------------------------------------------------------------
r13493 | cbiere | 2007-05-05 12:08:48 -0400 (Sat, 05 May 2007) | 4 lines

 * Removed the variant optimized for 32-bit machines. The difference seems
   neglible or the 64-bit variant is even slightly better on 32-bit machines
   too.

------------------------------------------------------------------------
r13492 | cbiere | 2007-05-05 10:16:31 -0400 (Sat, 05 May 2007) | 3 lines

 * Request better alignment for data fed to tiger() for some potential
   performance improvement.

------------------------------------------------------------------------
r13491 | rmanfredi | 2007-05-05 09:38:44 -0400 (Sat, 05 May 2007) | 2 lines

Don't cast an uint64 to a double, multiply by 1.0 instead.

------------------------------------------------------------------------
r13490 | rmanfredi | 2007-05-05 09:30:52 -0400 (Sat, 05 May 2007) | 2 lines

Bis repetita placet.

------------------------------------------------------------------------
r13489 | rmanfredi | 2007-05-05 09:26:49 -0400 (Sat, 05 May 2007) | 2 lines

Er, 100% is 1.0, not 100.0.

------------------------------------------------------------------------
r13488 | rmanfredi | 2007-05-05 08:50:44 -0400 (Sat, 05 May 2007) | 4 lines

Make sure aggressive swarming is not sacrifying a good source for negligeable
or incomplete gains.
Partial sources can now participate to the aggressive swarming as well.

------------------------------------------------------------------------
r13487 | rmanfredi | 2007-05-05 07:25:12 -0400 (Sat, 05 May 2007) | 3 lines

Abort a keep-alive connection with no Content-Length indication and no
chunked transfer encoding indication.

------------------------------------------------------------------------
r13486 | rmanfredi | 2007-05-05 05:30:39 -0400 (Sat, 05 May 2007) | 2 lines

Compute the average uploading speed of servers.

------------------------------------------------------------------------
r13485 | cbiere | 2007-05-04 17:39:12 -0400 (Fri, 04 May 2007) | 2 lines

 * Buy buy.

------------------------------------------------------------------------
r13484 | cbiere | 2007-05-04 16:31:36 -0400 (Fri, 04 May 2007) | 2 lines

 * 3849 more items.

------------------------------------------------------------------------
r13483 | cbiere | 2007-05-04 09:02:31 -0400 (Fri, 04 May 2007) | 3 lines

 * parq_upload_collect_stats(): Removed failing assertion because comments
   contradict reality.

------------------------------------------------------------------------
r13482 | cbiere | 2007-05-03 21:29:51 -0400 (Thu, 03 May 2007) | 3 lines

 * pcache_udp_pong_received(): Don't add the sender if it's already marked
   as bad.

------------------------------------------------------------------------
r13481 | cbiere | 2007-05-03 21:27:38 -0400 (Thu, 03 May 2007) | 3 lines

 * err_header_read_error(): Mark the address as bad; we don't want to retry
   it anytime soon.

------------------------------------------------------------------------
r13480 | cbiere | 2007-05-03 21:26:00 -0400 (Thu, 03 May 2007) | 2 lines

 * download_handle_thex_uri_header(): Don't download THEX data for depth zero.

------------------------------------------------------------------------
r13479 | cbiere | 2007-05-03 15:06:46 -0400 (Thu, 03 May 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13478 | cbiere | 2007-05-03 15:03:28 -0400 (Thu, 03 May 2007) | 2 lines

 * Simplified.

------------------------------------------------------------------------
r13477 | cbiere | 2007-05-02 18:52:00 -0400 (Wed, 02 May 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13476 | cbiere | 2007-05-02 18:51:19 -0400 (Wed, 02 May 2007) | 3 lines

 * Use AWK instead of C to determine the current version. The match pattern
   was not correct anyway.

------------------------------------------------------------------------
r13475 | cbiere | 2007-05-02 18:47:41 -0400 (Wed, 02 May 2007) | 2 lines

 * Don't add -momit-leaf-frame-pointer if -O0 is used.

------------------------------------------------------------------------
r13474 | cbiere | 2007-05-01 19:53:28 -0400 (Tue, 01 May 2007) | 2 lines

 * Oh noes.

------------------------------------------------------------------------
r13473 | cbiere | 2007-05-01 19:18:16 -0400 (Tue, 01 May 2007) | 2 lines

 * Spam Over.

------------------------------------------------------------------------
r13472 | cbiere | 2007-05-01 19:13:56 -0400 (Tue, 01 May 2007) | 2 lines

 * Less scum, more fun.

------------------------------------------------------------------------
r13471 | cbiere | 2007-05-01 13:27:50 -0400 (Tue, 01 May 2007) | 2 lines

 * Corrected range.

------------------------------------------------------------------------
r13470 | cbiere | 2007-05-01 13:22:28 -0400 (Tue, 01 May 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13469 | rmanfredi | 2007-05-01 05:37:40 -0400 (Tue, 01 May 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r13468 | rmanfredi | 2007-05-01 05:35:18 -0400 (Tue, 01 May 2007) | 4 lines

Increased default and minimum values for TCP-related connection timeouts.
The only one which is kept low at the moment is Gnet connection timeouts
because we want to favor connections to non-clogged hosts.

------------------------------------------------------------------------
r13467 | cbiere | 2007-05-01 00:22:18 -0400 (Tue, 01 May 2007) | 3 lines

 * Don't store hashtrees which consist only of a root node, so that we
   don't consume additional storage for shared files smaller than 256 KiB.

------------------------------------------------------------------------
r13466 | cbiere | 2007-04-30 23:34:51 -0400 (Mon, 30 Apr 2007) | 2 lines

 * tt_good_depth(): Corrected for filesizes >= 64 MiB.

------------------------------------------------------------------------
r13465 | cbiere | 2007-04-30 22:12:24 -0400 (Mon, 30 Apr 2007) | 2 lines

 * tt_finish(): Fixed off-by-one introduced by previous change.

------------------------------------------------------------------------
r13464 | cbiere | 2007-04-30 18:45:50 -0400 (Mon, 30 Apr 2007) | 2 lines

 * Corrected depth counting; start at zero instead of one.

------------------------------------------------------------------------
r13463 | cbiere | 2007-04-29 19:50:18 -0400 (Sun, 29 Apr 2007) | 3 lines

 * gtk_gnutella_exit(): Call verify_sha1_close(), verify_tth_close() before
   download_close().

------------------------------------------------------------------------
r13462 | cbiere | 2007-04-29 19:12:35 -0400 (Sun, 29 Apr 2007) | 2 lines

 * Reduced HASH_MS_PER_STEP.

------------------------------------------------------------------------
r13461 | cbiere | 2007-04-29 19:01:58 -0400 (Sun, 29 Apr 2007) | 2 lines

 * Forgot to reset "hashed" which caused bogus status information.

------------------------------------------------------------------------
r13460 | cbiere | 2007-04-29 18:25:24 -0400 (Sun, 29 Apr 2007) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r13459 | cbiere | 2007-04-29 18:19:34 -0400 (Sun, 29 Apr 2007) | 4 lines

 * Use typed pointers (struct parq_dl_queued * and struct parq_ul_queued *).
 * Use delta_time() and time_advance().
 * parq_upload_free(): Clear the magic.

------------------------------------------------------------------------
r13458 | cbiere | 2007-04-29 17:35:32 -0400 (Sun, 29 Apr 2007) | 3 lines

 * upload_create(): Initialize "start_date".
 * upload_request_for_shared_file(): Removed unnecessary hack.

------------------------------------------------------------------------
r13457 | rmanfredi | 2007-04-29 17:09:44 -0400 (Sun, 29 Apr 2007) | 2 lines

Fixed too long a line.

------------------------------------------------------------------------
r13456 | cbiere | 2007-04-29 16:43:14 -0400 (Sun, 29 Apr 2007) | 2 lines

 * struct gnet_upload_info: Added "last_update".

------------------------------------------------------------------------
r13455 | cbiere | 2007-04-29 16:01:30 -0400 (Sun, 29 Apr 2007) | 3 lines

 * socket_accept(): "net" was initialized, so that IP TOS was never set for
   incoming connections.

------------------------------------------------------------------------
r13454 | cbiere | 2007-04-29 14:48:03 -0400 (Sun, 29 Apr 2007) | 2 lines

 * shell_free(): Clear the magic.

------------------------------------------------------------------------
r13453 | cbiere | 2007-04-29 14:44:42 -0400 (Sun, 29 Apr 2007) | 2 lines

 * dump_cache(): If fclose() fails, the cache is still dirty.

------------------------------------------------------------------------
r13452 | cbiere | 2007-04-29 13:29:47 -0400 (Sun, 29 Apr 2007) | 3 lines

 * verify_step_compute(): Keep going until some time limit reached, so that
   time spent hashing is loosely adjusted to the system speed.

------------------------------------------------------------------------
r13451 | cbiere | 2007-04-28 16:04:12 -0400 (Sat, 28 Apr 2007) | 2 lines

 * Fixed copypasto.

------------------------------------------------------------------------
r13450 | cbiere | 2007-04-28 16:03:18 -0400 (Sat, 28 Apr 2007) | 3 lines

 * browse_host_dl_free(), thex_download_free(): Check for NULL and nullify
   the pointer here instead of the caller side.

------------------------------------------------------------------------
r13449 | cbiere | 2007-04-28 16:00:14 -0400 (Sat, 28 Apr 2007) | 2 lines

 * verify_status(): Added const-qualifier.

------------------------------------------------------------------------
r13448 | cbiere | 2007-04-28 14:43:12 -0400 (Sat, 28 Apr 2007) | 2 lines

 * Alpha Red suxxx.

------------------------------------------------------------------------
r13447 | cbiere | 2007-04-28 00:25:58 -0400 (Sat, 28 Apr 2007) | 2 lines

 * download_moved_with_bad_sha1(): Pause downloads on SHA-1 mismatch.

------------------------------------------------------------------------
r13446 | cbiere | 2007-04-28 00:22:50 -0400 (Sat, 28 Apr 2007) | 2 lines

 * Merged code for SHA-1 and TTH calculation.

------------------------------------------------------------------------
r13445 | cbiere | 2007-04-28 00:14:09 -0400 (Sat, 28 Apr 2007) | 3 lines

 * Try to remove config.sh too, just in case make clobber failed or on similar
   inconsistencies.

------------------------------------------------------------------------
r13444 | cbiere | 2007-04-27 23:07:42 -0400 (Fri, 27 Apr 2007) | 4 lines

 * Use a timestamp instead of a file counter to decide whether the SHA-1 cache
   should be dumped, so that it's not dumped frequently and not too much has
   to be recalculated on a sudden termination.

------------------------------------------------------------------------
r13443 | cbiere | 2007-04-27 22:48:27 -0400 (Fri, 27 Apr 2007) | 5 lines

 * shared_file_set_sha1():
   * Added more checks and comments.
   * Make sure we don't insert or remove left-over but non-actual
     references to shared files.

------------------------------------------------------------------------
r13442 | cbiere | 2007-04-27 19:40:26 -0400 (Fri, 27 Apr 2007) | 2 lines

 * add_file(): Use sha1_hash_available().

------------------------------------------------------------------------
r13441 | cbiere | 2007-04-27 19:34:37 -0400 (Fri, 27 Apr 2007) | 2 lines

 * Reordered some code to get rid of unnecessary prototype.

------------------------------------------------------------------------
r13440 | cbiere | 2007-04-27 12:06:14 -0400 (Fri, 27 Apr 2007) | 2 lines

 * fragcheck and halloc are mutually exclusive.

------------------------------------------------------------------------
r13439 | cbiere | 2007-04-27 12:04:25 -0400 (Fri, 27 Apr 2007) | 2 lines

 * Replaced warning with message.

------------------------------------------------------------------------
r13438 | cbiere | 2007-04-26 17:19:22 -0400 (Thu, 26 Apr 2007) | 2 lines

 * Don't use libintl if NLS is disabled.

------------------------------------------------------------------------
r13437 | cbiere | 2007-04-26 17:15:47 -0400 (Thu, 26 Apr 2007) | 2 lines

 * adns_reply_callback(): Fixed misplaced goto.

------------------------------------------------------------------------
r13436 | cbiere | 2007-04-26 16:22:55 -0400 (Thu, 26 Apr 2007) | 3 lines

 * Fixed two typos.
 * Set G_SLICE here as well.

------------------------------------------------------------------------
r13435 | cbiere | 2007-04-26 13:51:38 -0400 (Thu, 26 Apr 2007) | 2 lines

 * node_init_outgoing(): Removed unnecessary check.

------------------------------------------------------------------------
r13434 | bpringlemeir | 2007-04-25 12:38:42 -0400 (Wed, 25 Apr 2007) | 2 lines

Name the enum proxy_protocol, allows socket.c v13433 to compile.

------------------------------------------------------------------------
r13433 | cbiere | 2007-04-25 11:28:45 -0400 (Wed, 25 Apr 2007) | 3 lines

 * pcache_udp_pong_received(): Add the sender itself to the cache as well,
   if the announced address/port matches the source address/port.

------------------------------------------------------------------------
r13432 | cbiere | 2007-04-25 09:17:33 -0400 (Wed, 25 Apr 2007) | 3 lines

 * Added proxy_is_enabled() so that an incomplete proxy configuration is
   ignored.

------------------------------------------------------------------------
r13431 | cbiere | 2007-04-24 22:08:43 -0400 (Tue, 24 Apr 2007) | 4 lines

 * Removed unused function download_is_thex().
 * download_handle_thex_uri_header(), check_content_urn(): Ignore these
   for THEX and browse host downloads.

------------------------------------------------------------------------
r13430 | cbiere | 2007-04-24 22:06:06 -0400 (Tue, 24 Apr 2007) | 5 lines

 * Increased TTH_MAX_DEPTH to 12.
 * Added tt_good_depth() to determine the maximum depth we need to preserve
   for a given filesize. These are the values as used by LimeWire, Phex and
   hopefully everone else.

------------------------------------------------------------------------
r13429 | cbiere | 2007-04-24 19:56:36 -0400 (Tue, 24 Apr 2007) | 4 lines

 * shared_file_set_sha1(): Always remove the old hash from "sha1_to_share"
   regardless of the SHARE_F_RECOMPUTING flag.
 * sha1_hash_is_uptodate(): Use shared_file_set_sha1().

------------------------------------------------------------------------
r13428 | cbiere | 2007-04-24 18:24:51 -0400 (Tue, 24 Apr 2007) | 3 lines

 * Register a handler for the "size-changed" signal. Maybe it makes any
   difference.

------------------------------------------------------------------------
r13427 | bpringlemeir | 2007-04-24 18:04:53 -0400 (Tue, 24 Apr 2007) | 2 lines

Use "build.sh" instead of Configure.

------------------------------------------------------------------------
r13426 | cbiere | 2007-04-24 17:45:26 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Added build.sh.

------------------------------------------------------------------------
r13425 | cbiere | 2007-04-24 16:43:49 -0400 (Tue, 24 Apr 2007) | 3 lines

 * Use of putenv() clashes with gm_setproctitle(). The string passed to
   putenv() must be writable otherwise the DNS helper process crashes.

------------------------------------------------------------------------
r13424 | cbiere | 2007-04-24 16:09:05 -0400 (Tue, 24 Apr 2007) | 3 lines

 * adns_reply_callback(): Reverted previous change but added better diagnostic
   message.

------------------------------------------------------------------------
r13423 | cbiere | 2007-04-24 15:54:52 -0400 (Tue, 24 Apr 2007) | 2 lines

 * adns_reply_callback(): Ignore if read() returns zero. Usually it means EOF.

------------------------------------------------------------------------
r13422 | cbiere | 2007-04-24 15:41:57 -0400 (Tue, 24 Apr 2007) | 2 lines

 * The quoting continues.

------------------------------------------------------------------------
r13421 | cbiere | 2007-04-24 15:07:44 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Check whether the node is still connected after node_send_qrt().

------------------------------------------------------------------------
r13420 | cbiere | 2007-04-24 15:02:57 -0400 (Tue, 24 Apr 2007) | 4 lines

 * node_send_qrt(): Added comment.
 * node_send_patch_step(), node_is_now_connected(): Use
   "struct routing_table *" instead of "void *".

------------------------------------------------------------------------
r13419 | cbiere | 2007-04-24 14:50:43 -0400 (Tue, 24 Apr 2007) | 2 lines

 * node_is_now_connected(): Use n->socket directly instead of an alias.

------------------------------------------------------------------------
r13418 | bpringlemeir | 2007-04-24 14:35:20 -0400 (Tue, 24 Apr 2007) | 2 lines

WARN_UNUSED_RESULT in gcc 3.4+ as before.

------------------------------------------------------------------------
r13417 | cbiere | 2007-04-24 14:15:41 -0400 (Tue, 24 Apr 2007) | 2 lines

 * IRIX has no unsetenv(); we probably don't need it.

------------------------------------------------------------------------
r13416 | cbiere | 2007-04-24 14:11:13 -0400 (Tue, 24 Apr 2007) | 3 lines

 * node_send_qrt(): Added non-fatal assertion to avoid a later assertion
   failure.

------------------------------------------------------------------------
r13415 | cbiere | 2007-04-24 13:59:32 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Enforce G_SLICE=always-malloc.

------------------------------------------------------------------------
r13414 | cbiere | 2007-04-24 13:58:02 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Use typed pointers whenever possible instead of "void *".

------------------------------------------------------------------------
r13413 | bpringlemeir | 2007-04-24 13:55:00 -0400 (Tue, 24 Apr 2007) | 2 lines

Upgrade always_inline version.

------------------------------------------------------------------------
r13412 | bpringlemeir | 2007-04-24 13:33:49 -0400 (Tue, 24 Apr 2007) | 2 lines

Christian teaches me to read.

------------------------------------------------------------------------
r13411 | bpringlemeir | 2007-04-24 13:17:34 -0400 (Tue, 24 Apr 2007) | 4 lines

Add comments on HAVE_GCC macro.
Lowered versions required for some attributes as per,
"http://www.ohse.de/uwe/articles/gcc-attributes.html#func-regparm".

------------------------------------------------------------------------
r13410 | cbiere | 2007-04-24 12:17:00 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Added some extra assertions.

------------------------------------------------------------------------
r13409 | cbiere | 2007-04-24 12:04:07 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Corrected "x.parq" to "x.parq-id".

------------------------------------------------------------------------
r13408 | cbiere | 2007-04-24 11:57:29 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Require libxml 2.6.0.

------------------------------------------------------------------------
r13407 | cbiere | 2007-04-24 11:51:50 -0400 (Tue, 24 Apr 2007) | 2 lines

 * Require libxml >= 2.6.

------------------------------------------------------------------------
r13406 | cbiere | 2007-04-22 17:11:12 -0400 (Sun, 22 Apr 2007) | 2 lines

 * Return 404 instead 503 for TTH requests for partial files.

------------------------------------------------------------------------
r13405 | cbiere | 2007-04-22 17:01:55 -0400 (Sun, 22 Apr 2007) | 2 lines

 * Don't add incomplete files to queue.

------------------------------------------------------------------------
r13404 | cbiere | 2007-04-22 13:04:40 -0400 (Sun, 22 Apr 2007) | 2 lines

 * get_results_set(): Don't show a bogus hops count for browse host results.

------------------------------------------------------------------------
r13403 | cbiere | 2007-04-22 12:41:19 -0400 (Sun, 22 Apr 2007) | 3 lines

 * download_url_for_uri(): Keep the hostname if we know one because for
   typical web servers we have to use the hostname.

------------------------------------------------------------------------
r13402 | cbiere | 2007-04-22 12:22:50 -0400 (Sun, 22 Apr 2007) | 2 lines

 * download_clone(): That's exactly what sucks about this interface.

------------------------------------------------------------------------
r13401 | cbiere | 2007-04-22 12:20:54 -0400 (Sun, 22 Apr 2007) | 2 lines

 * download_clone(): atom_str_get() does not like NULL.

------------------------------------------------------------------------
r13400 | cbiere | 2007-04-22 12:16:14 -0400 (Sun, 22 Apr 2007) | 2 lines

 * download_clone(): Fixed bug: "uri" was not cloned.

------------------------------------------------------------------------
r13399 | cbiere | 2007-04-22 09:57:21 -0400 (Sun, 22 Apr 2007) | 3 lines

 * Allocate "data" no sooner than we use it and use a slightly different
   resizing strategy.

------------------------------------------------------------------------
r13398 | cbiere | 2007-04-22 09:48:31 -0400 (Sun, 22 Apr 2007) | 2 lines

 * parq_upload_add_old_queue_header(): Removed unnecessary variable.

------------------------------------------------------------------------
r13397 | rmanfredi | 2007-04-22 09:43:57 -0400 (Sun, 22 Apr 2007) | 2 lines

Fixed uninitialized variable usage.

------------------------------------------------------------------------
r13396 | rmanfredi | 2007-04-22 09:43:00 -0400 (Sun, 22 Apr 2007) | 2 lines

Fixed possible uninitialized variable use.

------------------------------------------------------------------------
r13395 | cbiere | 2007-04-21 09:12:18 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Added lost DIME_T_URI.

------------------------------------------------------------------------
r13394 | cbiere | 2007-04-21 06:56:10 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Set the TYPE_T field correctly in DIME records.

------------------------------------------------------------------------
r13393 | cbiere | 2007-04-21 06:50:41 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Fixed some warnings.

------------------------------------------------------------------------
r13392 | daichik | 2007-04-21 06:48:34 -0400 (Sat, 21 Apr 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13391 | cbiere | 2007-04-21 06:30:34 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Moved some definitions to thex.h to make sure they are in sync.

------------------------------------------------------------------------
r13390 | cbiere | 2007-04-21 06:28:12 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Added thex.h for definitions shared by thex_upload.c and thex_download.c.

------------------------------------------------------------------------
r13389 | cbiere | 2007-04-21 06:05:47 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Added Martijn van Oosterhout for his tigertree patches.

------------------------------------------------------------------------
r13388 | cbiere | 2007-04-21 03:10:30 -0400 (Sat, 21 Apr 2007) | 2 lines

 * struct dl_file_info: Added members "tth" and "tigertree".

------------------------------------------------------------------------
r13387 | cbiere | 2007-04-21 03:08:05 -0400 (Sat, 21 Apr 2007) | 4 lines

 * Store the tigertree root hash and leaves in the file trailer.
 * Check the THEX data more carefully and be also a bit more flexible.
 * Avoid downloading THEX data multiple times.

------------------------------------------------------------------------
r13386 | cbiere | 2007-04-21 02:59:57 -0400 (Sat, 21 Apr 2007) | 2 lines

 * Added tt_node_count_at_depth().

------------------------------------------------------------------------
r13385 | cbiere | 2007-04-20 15:59:14 -0400 (Fri, 20 Apr 2007) | 2 lines

 * search_set_details(): Don't list attributes irrelevant for local results.

------------------------------------------------------------------------
r13384 | cbiere | 2007-04-20 15:57:59 -0400 (Fri, 20 Apr 2007) | 2 lines

 * search_add_local_file(): Set flags as well.

------------------------------------------------------------------------
r13383 | cbiere | 2007-04-20 15:38:41 -0400 (Fri, 20 Apr 2007) | 2 lines

 * gnet_host_vec_create(): Fixed braino.

------------------------------------------------------------------------
r13382 | cbiere | 2007-04-20 15:34:59 -0400 (Fri, 20 Apr 2007) | 2 lines

 * search_add_local_file(): Use gnet_host_vec_create().

------------------------------------------------------------------------
r13381 | cbiere | 2007-04-20 15:32:29 -0400 (Fri, 20 Apr 2007) | 2 lines

 * Added gnet_host_vec_create().

------------------------------------------------------------------------
r13380 | cbiere | 2007-04-20 15:05:18 -0400 (Fri, 20 Apr 2007) | 2 lines

 * search_add_local_file(): Removed duplicate check for an available SHA-1.

------------------------------------------------------------------------
r13379 | cbiere | 2007-04-20 14:46:49 -0400 (Fri, 20 Apr 2007) | 2 lines

 * Added src/core/thex_download.[ch].

------------------------------------------------------------------------
r13378 | cbiere | 2007-04-20 14:41:46 -0400 (Fri, 20 Apr 2007) | 2 lines

 * Added download of THEX data which works analogous to browse host downloads.

------------------------------------------------------------------------
r13377 | cbiere | 2007-04-20 14:36:48 -0400 (Fri, 20 Apr 2007) | 2 lines

 * Added special download handling for THEX data.

------------------------------------------------------------------------
r13376 | cbiere | 2007-04-20 14:27:01 -0400 (Fri, 20 Apr 2007) | 2 lines

 * Fixed copypasto.

------------------------------------------------------------------------
r13375 | cbiere | 2007-04-20 14:26:22 -0400 (Fri, 20 Apr 2007) | 4 lines

 * Added some warnings for debug purposes.
 * dime_parse_records(): Fixed inverted logic.
 * Added accessor functions.

------------------------------------------------------------------------
r13374 | cbiere | 2007-04-20 14:23:53 -0400 (Fri, 20 Apr 2007) | 5 lines

 * XXX -> FIXME: Code marked with XXX should never be committed. Non-critical
   flaws should not be marked with XXX.
 * search_gui_get_info(): Removed unnecessary parameter.
 * Prefer unsigned integers over signed integers.

------------------------------------------------------------------------
r13373 | rmanfredi | 2007-04-20 14:02:13 -0400 (Fri, 20 Apr 2007) | 2 lines

Plugged GUI display of the "Info" column for local searches.

------------------------------------------------------------------------
r13372 | rmanfredi | 2007-04-20 11:50:33 -0400 (Fri, 20 Apr 2007) | 4 lines

Build alt-locs vector for local searches so that the amount of alt-locs
they have in the download mesh is shown for each of the file they share in
the "Info" column, up to a maximum of 30 entries.

------------------------------------------------------------------------
r13371 | cbiere | 2007-04-19 19:30:54 -0400 (Thu, 19 Apr 2007) | 2 lines

 * Simplified inputevt_data_available().

------------------------------------------------------------------------
r13370 | cbiere | 2007-04-19 19:25:35 -0400 (Thu, 19 Apr 2007) | 2 lines

 * Renamed ext_hash_func(), ext_eq_func() and moved to src/lib/misc.h.

------------------------------------------------------------------------
r13369 | cbiere | 2007-04-19 19:23:34 -0400 (Thu, 19 Apr 2007) | 2 lines

 * Removed unnecessary normalize().

------------------------------------------------------------------------
r13368 | cbiere | 2007-04-19 19:22:25 -0400 (Thu, 19 Apr 2007) | 3 lines

 * Added str_case_hash_func() and str_case_eq_func() for hash tables with
   case-insensitive strings.

------------------------------------------------------------------------
r13367 | cbiere | 2007-04-19 13:18:28 -0400 (Thu, 19 Apr 2007) | 13 lines

 * request_tigertree():
   * Added parameter to select whether the file should be
     put at the tail or the head of the queue. This way we can prepone the
     calculation for recently requested files.
   * Changed "files_to_hash" to a hashlist to avoid adding duplicates and so
     that we can efficiently move random items to the head.
 * upload_request():
   * Splitted into several functions for readability.
   * Simplified logic to count running uploads.
 * parq_upload_request(), parq_upload_request_force(): Removed unnecessary
   parameter "used_slots".
 * Reordered functions in parq.c to avoid unnecessary prototype noise.

------------------------------------------------------------------------
r13366 | cbiere | 2007-04-19 12:46:12 -0400 (Thu, 19 Apr 2007) | 4 lines

 * Corrected hash_list_shift().
 * hash_list_append(), hash_list_prepend(): Moved common code to
   hash_list_insert_item().

------------------------------------------------------------------------
r13365 | cbiere | 2007-04-18 18:01:07 -0400 (Wed, 18 Apr 2007) | 2 lines

 * Added hash_list_shift().

------------------------------------------------------------------------
r13364 | cbiere | 2007-04-18 15:54:26 -0400 (Wed, 18 Apr 2007) | 2 lines

 * Reverted some debug message cosmetic.

------------------------------------------------------------------------
r13363 | cbiere | 2007-04-18 15:15:56 -0400 (Wed, 18 Apr 2007) | 2 lines

 * Minor cosmetic.

------------------------------------------------------------------------
r13362 | cbiere | 2007-04-18 15:15:15 -0400 (Wed, 18 Apr 2007) | 3 lines

 * Added copy_and_pad() so that we don't have to zero out the memory in
   advance.

------------------------------------------------------------------------
r13361 | cbiere | 2007-04-18 15:13:35 -0400 (Wed, 18 Apr 2007) | 3 lines

 * Added http_extra_callback_set(), http_extra_line_set(),
   http_extra_body_set().

------------------------------------------------------------------------
r13360 | cbiere | 2007-04-18 15:11:05 -0400 (Wed, 18 Apr 2007) | 2 lines

 * thex_upload_read(): Removed unnecessary variable.

------------------------------------------------------------------------
r13359 | rmanfredi | 2007-04-18 09:40:12 -0400 (Wed, 18 Apr 2007) | 2 lines

Fixed comments.

------------------------------------------------------------------------
r13358 | cbiere | 2007-04-17 10:29:55 -0400 (Tue, 17 Apr 2007) | 2 lines

 * socket_set_accept_filters(): Suppress some useless warning by default.

------------------------------------------------------------------------
r13357 | cbiere | 2007-04-17 10:06:20 -0400 (Tue, 17 Apr 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13356 | cbiere | 2007-04-17 10:05:51 -0400 (Tue, 17 Apr 2007) | 2 lines

 * Use d_remotectrl instead of remotectrl.

------------------------------------------------------------------------
r13355 | cbiere | 2007-04-17 10:04:26 -0400 (Tue, 17 Apr 2007) | 3 lines

 * thex_upload_uuid(): Added const-qualifier.
 * thex_upload_xml(): Hide SYSTEM from metaconfig.

------------------------------------------------------------------------
r13354 | cbiere | 2007-04-17 09:47:20 -0400 (Tue, 17 Apr 2007) | 2 lines

 * Updated for new format of sha1_cache.

------------------------------------------------------------------------
r13353 | cbiere | 2007-04-16 20:10:55 -0400 (Mon, 16 Apr 2007) | 3 lines

 * thex_upload_tree(): Must set the type of record payload.
 * thex_upload_xml(): system -> SYSTEM.

------------------------------------------------------------------------
r13352 | cbiere | 2007-04-16 19:32:03 -0400 (Mon, 16 Apr 2007) | 3 lines

 * thex_upload_tree(): Indicate an error if thex_upload_tree() fails.
 * thex_upload_read(): Catch errors from thex_upload_tree().

------------------------------------------------------------------------
r13351 | cbiere | 2007-04-16 19:29:47 -0400 (Mon, 16 Apr 2007) | 3 lines

 * get_thex_file_to_upload_from_urn(): Clear the TTH and request calculation
   of the tigertree if the lookup fails.

------------------------------------------------------------------------
r13350 | cbiere | 2007-04-16 19:27:44 -0400 (Mon, 16 Apr 2007) | 4 lines

 * Removed unused tth_cache_check().
 * tth_cache_leave_count(): Removed duplicate check.
 * tth_cache_get_tree(): Remove the cached tigertree on failure.

------------------------------------------------------------------------
r13349 | cbiere | 2007-04-16 18:01:19 -0400 (Mon, 16 Apr 2007) | 4 lines

 * thex_upload_read():
   * Added consistency check.
   * Ensure we're not trying to send more than representable by ssize_t.

------------------------------------------------------------------------
r13348 | cbiere | 2007-04-16 17:45:57 -0400 (Mon, 16 Apr 2007) | 4 lines

 * Updated flag names: BH_* -> BH_F_*
 * Use atom_str_change() et al.
 * Added still experimental support for upload of THEX data.

------------------------------------------------------------------------
r13347 | cbiere | 2007-04-16 17:41:31 -0400 (Mon, 16 Apr 2007) | 3 lines

 * Added src/core/thex_upload.[ch] for uploading of THEX data.
 * TODO: Check whether the generated DIME data is correct.

------------------------------------------------------------------------
r13346 | cbiere | 2007-04-16 17:37:44 -0400 (Mon, 16 Apr 2007) | 3 lines

 * Hide the details again, use accessors only.
 * Added further interface functions.

------------------------------------------------------------------------
r13345 | cbiere | 2007-04-16 16:18:13 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Added _F_ to flags for consistency.

------------------------------------------------------------------------
r13344 | cbiere | 2007-04-16 16:10:46 -0400 (Mon, 16 Apr 2007) | 2 lines

 * tx_make(): Added const-qualifier.

------------------------------------------------------------------------
r13343 | cbiere | 2007-04-16 16:09:37 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Corrected comment.

------------------------------------------------------------------------
r13342 | cbiere | 2007-04-16 16:09:07 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Added properties "thex_files_requested" and "thex_files_served".

------------------------------------------------------------------------
r13341 | cbiere | 2007-04-16 14:29:20 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Added tth_cache_get_tree().

------------------------------------------------------------------------
r13340 | cbiere | 2007-04-16 14:16:58 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Use atom_str_change() instead of atom_str_free() followed by atom_str_get().

------------------------------------------------------------------------
r13339 | cbiere | 2007-04-16 14:14:34 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Added atom_.*_change() functions.

------------------------------------------------------------------------
r13338 | cbiere | 2007-04-16 14:13:48 -0400 (Mon, 16 Apr 2007) | 2 lines

 * Added tt_compute_parents(), tt_depth_for_filesize(), TTH_MAX_LEAVES.

------------------------------------------------------------------------
r13337 | bpringlemeir | 2007-04-16 13:35:51 -0400 (Mon, 16 Apr 2007) | 3 lines

Remove search-stats.png.
Add image dimensions, so HTML will render faster.

------------------------------------------------------------------------
r13335 | bpringlemeir | 2007-04-15 18:31:39 -0400 (Sun, 15 Apr 2007) | 2 lines

Fix some errors in node flags.

------------------------------------------------------------------------
r13334 | cbiere | 2007-04-15 18:00:12 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Check for _SC_PAGESIZE and _SC_PAGE_SIZE; prefer the former.

------------------------------------------------------------------------
r13333 | cbiere | 2007-04-15 17:52:15 -0400 (Sun, 15 Apr 2007) | 7 lines

 * Renamed "struct special_ctx" to "struct special_upload".
 * Renamed "struct browse_host_ctx" to "struct browse_host_upload".
 * Moved details for "special_upload" to src/core/special_upload.h
 * struct upload: Reordered members to reduce padding overhead.
 * Use "struct whatever *" instead of "whatever_t *" to avoid pointless
   dependencies on header files if they are just required for the typedef.

------------------------------------------------------------------------
r13332 | cbiere | 2007-04-15 16:52:48 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Replaced strcasecmp() with ascii_strcasecmp().

------------------------------------------------------------------------
r13331 | cbiere | 2007-04-15 16:40:27 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Renamed ascii_strcmp_delimit() back to strcmp_delimit().

------------------------------------------------------------------------
r13330 | cbiere | 2007-04-15 16:38:14 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Replaced all used of strcasecmp* with ascii_strcasecmp*.

------------------------------------------------------------------------
r13329 | cbiere | 2007-04-15 16:05:46 -0400 (Sun, 15 Apr 2007) | 5 lines

 * http_status_cb_t:
   * Pass the buffer size by value instead of through a pointer.
   * Return the resulting length directly instead of through a pointer.
   * Use size_t instead of int.

------------------------------------------------------------------------
r13328 | cbiere | 2007-04-15 15:58:21 -0400 (Sun, 15 Apr 2007) | 7 lines

 * http_status_cb_t:
   * Pass the buffer size by value instead of through a pointer.
   * Return the resulting length directly instead of through a pointer.
   * Use size_t instead of int.
 * Prevent truncation of any emitted HTTP header, rather suppress the
   whole header or generate a shorter variant where appropriate.

------------------------------------------------------------------------
r13327 | cbiere | 2007-04-15 12:51:03 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13326 | cbiere | 2007-04-15 12:20:11 -0400 (Sun, 15 Apr 2007) | 2 lines

 * Added filesize_to_string().

------------------------------------------------------------------------
r13325 | cbiere | 2007-04-15 09:49:08 -0400 (Sun, 15 Apr 2007) | 4 lines

 * upload_http_content_urn_add():
   * Fixed bug in previous commit causing an assertion failure.
   * Rearranged for better readability.

------------------------------------------------------------------------
r13324 | cbiere | 2007-04-15 07:34:26 -0400 (Sun, 15 Apr 2007) | 3 lines

 * Don't emit the X-Live-Since header in HTTP responses anymore to keep the
   handshake overhead as low as reasonably possible.

------------------------------------------------------------------------
r13323 | bpringlemeir | 2007-04-15 00:54:55 -0400 (Sun, 15 Apr 2007) | 2 lines

Fix tgroup.

------------------------------------------------------------------------
r13322 | bpringlemeir | 2007-04-15 00:36:55 -0400 (Sun, 15 Apr 2007) | 4 lines

Add "gtk-gnutella.dsl" to create custom HTML look.
Add more information to the manual.  Still not perfect.


------------------------------------------------------------------------
r13321 | cbiere | 2007-04-14 14:22:21 -0400 (Sat, 14 Apr 2007) | 7 lines

 * upload_http_content_urn_add():
   * Check whether we actually know the SHA-1, just in case.
   * Add the X-Thex-URI header here as well.
   * Use just the SHA-1 as URN instead of the bitprint. The Tigertree root
     hash can be derived from the X-Thex-URI header.
   * Adjust "length" after writing to "buf".

------------------------------------------------------------------------
r13320 | cbiere | 2007-04-14 13:47:26 -0400 (Sat, 14 Apr 2007) | 2 lines

 * Go to hell or dunkel.

------------------------------------------------------------------------
r13319 | cbiere | 2007-04-14 12:33:35 -0400 (Sat, 14 Apr 2007) | 4 lines

 * upload_http_sha1_add():
   * Renamed to upload_http_content_urn_add().
   * Provide the full bitprint instead of just the SHA-1 if possible.

------------------------------------------------------------------------
r13318 | cbiere | 2007-04-14 08:16:13 -0400 (Sat, 14 Apr 2007) | 4 lines

 * Renamed "cached_sha1" to "cached" to reduce the noise level.
 * request_sha1(): Pick the TTH from cached entry so that it is not
   calculated on each startup.

------------------------------------------------------------------------
r13317 | cbiere | 2007-04-14 08:13:45 -0400 (Sat, 14 Apr 2007) | 2 lines

 * request_tigertree(): Avoid calling shared_file_tth() twice.

------------------------------------------------------------------------
r13316 | cbiere | 2007-04-14 08:12:03 -0400 (Sat, 14 Apr 2007) | 5 lines

 * tth_cache_insert(): Validate the leaves against the root hash.
 * tth_cache_lookup():
   * Fixed uninitialized variable.
   * Fixed inverted logic.

------------------------------------------------------------------------
r13315 | cbiere | 2007-04-14 08:08:55 -0400 (Sat, 14 Apr 2007) | 2 lines

 * base32_decode(): Corrected for padded input or input with stripped padding.

------------------------------------------------------------------------
r13314 | cbiere | 2007-04-14 08:07:12 -0400 (Sat, 14 Apr 2007) | 3 lines

 * tt_root_hash(): Create a copy so that we don't corrupt the leaves.
 * tt_digest(): Be paranoid, use memmove().

------------------------------------------------------------------------
r13313 | cbiere | 2007-04-14 08:04:52 -0400 (Sat, 14 Apr 2007) | 2 lines

 * urn_get_bitprint(): Fixed copypaste violation.

------------------------------------------------------------------------
r13312 | cbiere | 2007-04-14 05:10:50 -0400 (Sat, 14 Apr 2007) | 2 lines

 * Rot in hell and blau in sky.

------------------------------------------------------------------------
r13311 | cbiere | 2007-04-14 04:27:24 -0400 (Sat, 14 Apr 2007) | 7 lines

 * Changed the format of the "sha1_cache". The first item is an URN now
   including the "urn:" prefix so that we can store SHA-1s as well
   as bitprints. The old format is still parsed.
 * Renamed put_sha1_back_into_share_library() to huge_update_hashes() and
   export it as we call it from verify_tth.c.
 * huge_sha1_extract32(): Ripped out support for deprecated base32 variant.

------------------------------------------------------------------------
r13310 | cbiere | 2007-04-14 04:22:37 -0400 (Sat, 14 Apr 2007) | 3 lines

 * tigertree_step_compute(): Splitted into multiple functions for readability.
 * Store the calculated tigertree root hash and the leaves.

------------------------------------------------------------------------
r13309 | cbiere | 2007-04-14 04:18:26 -0400 (Sat, 14 Apr 2007) | 4 lines

 * Added tth_cache_file_create().
 * Added tth_cache_check().
 * tth_cache_lookup(): Return the number of nodes instead of the depth.

------------------------------------------------------------------------
r13308 | cbiere | 2007-04-14 04:15:01 -0400 (Sat, 14 Apr 2007) | 2 lines

 * New base32 API.

------------------------------------------------------------------------
r13307 | cbiere | 2007-04-14 04:13:16 -0400 (Sat, 14 Apr 2007) | 2 lines

 * Adapted for new base32 API.

------------------------------------------------------------------------
r13306 | cbiere | 2007-04-14 04:10:39 -0400 (Sat, 14 Apr 2007) | 5 lines

 * Migrated to new base32 API.
 * Added tt_bottom_node_count().
 * tt_blocks_per_leaf(): Fixed typo in calculation term for "n_blocks"
   causing an off-by-one.

------------------------------------------------------------------------
r13305 | cbiere | 2007-04-14 04:08:09 -0400 (Sat, 14 Apr 2007) | 3 lines

 * Converted to new base32 API.
 * bitprint_to_urn_string(): Fixed; the prefix was not copied at all.

------------------------------------------------------------------------
r13304 | cbiere | 2007-04-14 04:06:28 -0400 (Sat, 14 Apr 2007) | 3 lines

 * Adjusted to new base32 API.
 * Added urn_get_bitprint().

------------------------------------------------------------------------
r13303 | cbiere | 2007-04-14 04:05:16 -0400 (Sat, 14 Apr 2007) | 3 lines

 * Replaced base32 implementation because the previous caused crashes.
 * The old (non-standard) base32 encoding is no longer supported.

------------------------------------------------------------------------
r13302 | cbiere | 2007-04-14 03:59:06 -0400 (Sat, 14 Apr 2007) | 2 lines

 * Added property "experimental_tigertree_support".

------------------------------------------------------------------------
r13301 | cbiere | 2007-04-14 03:56:41 -0400 (Sat, 14 Apr 2007) | 2 lines

 * Added GUID_BASE32_SIZE.

------------------------------------------------------------------------
r13300 | cbiere | 2007-04-13 22:45:18 -0400 (Fri, 13 Apr 2007) | 7 lines

 * Added some consistency checks to prevent misuse.
 * tt_leave_count(): Fixed bug: tt_digest() changed ctx->li to 1.
 * tt_digest(): Moved most code to tt_finish() so that tt_digest() may be
   called multiple times.
 * Added tt_root_hash() for calculating the root hash (in-place) from an
   array of leaf hashes.

------------------------------------------------------------------------
r13299 | cbiere | 2007-04-13 20:51:11 -0400 (Fri, 13 Apr 2007) | 2 lines

 * Merged code for SHA-1 calculation background tasks.

------------------------------------------------------------------------
r13298 | cbiere | 2007-04-13 20:43:26 -0400 (Fri, 13 Apr 2007) | 2 lines

 * Minor correction of example code.

------------------------------------------------------------------------
r13297 | cbiere | 2007-04-13 20:41:54 -0400 (Fri, 13 Apr 2007) | 2 lines

 * verify_tth_context_free(): Must nullify the task pointer here.

------------------------------------------------------------------------
r13296 | cbiere | 2007-04-13 19:53:33 -0400 (Fri, 13 Apr 2007) | 2 lines

 * Minor cleanups.

------------------------------------------------------------------------
r13295 | cbiere | 2007-04-13 18:54:47 -0400 (Fri, 13 Apr 2007) | 2 lines

 * Corrected quoting once more.

------------------------------------------------------------------------
r13294 | cbiere | 2007-04-13 17:23:05 -0400 (Fri, 13 Apr 2007) | 2 lines

 * More quoting corrections.

------------------------------------------------------------------------
r13293 | cbiere | 2007-04-13 10:13:05 -0400 (Fri, 13 Apr 2007) | 2 lines

 * Use a "file object" instead of a file descriptor.

------------------------------------------------------------------------
r13292 | cbiere | 2007-04-12 22:04:27 -0400 (Thu, 12 Apr 2007) | 2 lines

 * d_end(): Corrected type.

------------------------------------------------------------------------
r13291 | cbiere | 2007-04-12 21:58:22 -0400 (Thu, 12 Apr 2007) | 2 lines

 * Minor corrections.

------------------------------------------------------------------------
r13290 | cbiere | 2007-04-12 21:52:18 -0400 (Thu, 12 Apr 2007) | 2 lines

 * Adjusted types.

------------------------------------------------------------------------
r13289 | cbiere | 2007-04-12 21:16:41 -0400 (Thu, 12 Apr 2007) | 2 lines

 * Added missing header file.

------------------------------------------------------------------------
r13288 | cbiere | 2007-04-12 21:07:26 -0400 (Thu, 12 Apr 2007) | 2 lines

 * Updated header files.

------------------------------------------------------------------------
r13287 | cbiere | 2007-04-12 21:06:02 -0400 (Thu, 12 Apr 2007) | 3 lines

 * Added src/core/dime.[ch].
 * Added src/core/tth_cache.[ch].

------------------------------------------------------------------------
r13286 | cbiere | 2007-04-12 21:04:34 -0400 (Thu, 12 Apr 2007) | 2 lines

 * A simple TTH cache/storage.

------------------------------------------------------------------------
r13285 | cbiere | 2007-04-12 21:03:20 -0400 (Thu, 12 Apr 2007) | 6 lines

 * Binary SHA-1s are now always passed as "struct sha1 *" instead of "gchar *". 
 * Reimplemented DIME; still untested though.                                   
 * Reimplemented tigertree so that the leaves can be accessed instead of just   
   the root hash. Based on patches provided by Martijn van Oosterhout.          
 * Added TTH atoms.

------------------------------------------------------------------------
r13284 | cbiere | 2007-04-12 13:58:29 -0400 (Thu, 12 Apr 2007) | 5 lines

 * download_new(): Forgot to pass "uri".
 * check_content_urn(): Ignore X-Gnutella-Content-Urn for THEX downloads due
   to bug in LimeWire.
 * download_build_url(): Forgot to prepend the URI with prefix and host.

------------------------------------------------------------------------
r13283 | cbiere | 2007-04-11 20:40:47 -0400 (Wed, 11 Apr 2007) | 3 lines

 * search_gui_new_search(): Moved the UTF-8 check because with Gtk+ 1.2 the
   string here is encoded according to the locale.

------------------------------------------------------------------------
r13282 | cbiere | 2007-04-11 20:33:12 -0400 (Wed, 11 Apr 2007) | 2 lines

 * search_gui_new_search(): Ensure that "query" is UTF-8 encoded.

------------------------------------------------------------------------
r13281 | cbiere | 2007-04-10 19:24:11 -0400 (Tue, 10 Apr 2007) | 2 lines

 * addr_ipv4_changed(), addr_ipv6_changed(): Avoid emitting useless warnings.

------------------------------------------------------------------------
r13280 | cbiere | 2007-04-10 18:56:26 -0400 (Tue, 10 Apr 2007) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r13279 | cbiere | 2007-04-10 18:49:57 -0400 (Tue, 10 Apr 2007) | 2 lines

 * dq_launch_net(): Added comment.

------------------------------------------------------------------------
r13278 | cbiere | 2007-04-10 18:47:50 -0400 (Tue, 10 Apr 2007) | 2 lines

 * get_file_to_upload_from_index(): Redirect to a relative URL.

------------------------------------------------------------------------
r13277 | cbiere | 2007-04-10 18:21:29 -0400 (Tue, 10 Apr 2007) | 3 lines

 * can_become_ultra(): Check listen_addr6() as well; should fix bug #1697298.
 * node_host_is_connected(): Use is_my_address().

------------------------------------------------------------------------
r13276 | cbiere | 2007-04-09 14:39:55 -0400 (Mon, 09 Apr 2007) | 4 lines

 * Use "struct bgtask *" instead of a blatant "void *".
 * Don't expose the details of TTH_CONTEXT.
 * Overhaul of request_tigertree().

------------------------------------------------------------------------
r13275 | cbiere | 2007-04-09 14:03:11 -0400 (Mon, 09 Apr 2007) | 2 lines

 * gtk_gnutella_exit(): Call tt_verify_close().

------------------------------------------------------------------------
r13274 | cbiere | 2007-04-09 13:57:46 -0400 (Mon, 09 Apr 2007) | 4 lines

 * tm_elapsed(): Rename parameters because the previous names are a little
   confusing.
 * Added tm2us().

------------------------------------------------------------------------
r13273 | cbiere | 2007-04-09 13:52:07 -0400 (Mon, 09 Apr 2007) | 2 lines

 * spam_retrieve(): Removed unnecessary debug message.

------------------------------------------------------------------------
r13272 | cbiere | 2007-04-08 15:20:42 -0400 (Sun, 08 Apr 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13271 | cbiere | 2007-04-08 15:20:02 -0400 (Sun, 08 Apr 2007) | 2 lines

 * Make sure -U d_gnutls and -U d_dbus can be used to disable these features.

------------------------------------------------------------------------
r13270 | cbiere | 2007-04-08 14:38:44 -0400 (Sun, 08 Apr 2007) | 3 lines

 * Some corrections.
 * Prefer gmake over make if available.

------------------------------------------------------------------------
r13269 | cbiere | 2007-04-08 14:05:14 -0400 (Sun, 08 Apr 2007) | 2 lines

 * Added missing $build_gnutls.

------------------------------------------------------------------------
r13268 | cbiere | 2007-04-08 14:00:27 -0400 (Sun, 08 Apr 2007) | 2 lines

 * glib -> GLib.

------------------------------------------------------------------------
r13267 | cbiere | 2007-04-08 13:58:12 -0400 (Sun, 08 Apr 2007) | 4 lines

 * Added some missing options.
 * Added some comments.
 * Show some additional messages on errors.

------------------------------------------------------------------------
r13266 | cbiere | 2007-04-08 11:26:12 -0400 (Sun, 08 Apr 2007) | 2 lines

 * hcache_find_nearby(): Avoid false-positive warning emitted by some GCCs.

------------------------------------------------------------------------
r13265 | cbiere | 2007-04-07 01:26:28 -0400 (Sat, 07 Apr 2007) | 2 lines

 * Corrected quotes.

------------------------------------------------------------------------
r13264 | cbiere | 2007-04-06 22:04:15 -0400 (Fri, 06 Apr 2007) | 2 lines

 * A wrapper script to make compiling a bit easier.

------------------------------------------------------------------------
r13263 | cbiere | 2007-04-06 20:23:15 -0400 (Fri, 06 Apr 2007) | 3 lines

 * Don't use a background task for reading the hostcache files. We only do
   that at startup and it does not take much time anyway.

------------------------------------------------------------------------
r13262 | bpringlemeir | 2007-04-06 14:14:54 -0400 (Fri, 06 Apr 2007) | 2 lines

swap_guint32() a little faster and smaller.

------------------------------------------------------------------------
r13261 | cbiere | 2007-04-05 19:47:42 -0400 (Thu, 05 Apr 2007) | 2 lines

 * search_gui_download(): Corrected assertion.

------------------------------------------------------------------------
r13260 | cbiere | 2007-04-05 17:59:50 -0400 (Thu, 05 Apr 2007) | 2 lines

 * dmesh_collect_locations(): Added const-qualifier.

------------------------------------------------------------------------
r13259 | cbiere | 2007-04-05 17:21:37 -0400 (Thu, 05 Apr 2007) | 2 lines

 * dmesh_collect_locations(): Suppress some pointless warnings.

------------------------------------------------------------------------
r13258 | daichik | 2007-04-05 07:36:19 -0400 (Thu, 05 Apr 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13257 | cbiere | 2007-04-04 22:28:41 -0400 (Wed, 04 Apr 2007) | 2 lines

 * search_matched(): Use search_gui_download() for auto-downloads.

------------------------------------------------------------------------
r13256 | cbiere | 2007-04-04 22:27:43 -0400 (Wed, 04 Apr 2007) | 2 lines

 * Increased level for less interesting debug messages.

------------------------------------------------------------------------
r13255 | cbiere | 2007-04-04 22:11:02 -0400 (Wed, 04 Apr 2007) | 3 lines

 * Store downloads as list of magnets from now on. The old format is still
   supported but not written anymore.

------------------------------------------------------------------------
r13254 | cbiere | 2007-04-04 21:06:35 -0400 (Wed, 04 Apr 2007) | 3 lines

 * Don't suppress the firewall status checks on startup if we are actually
   firewalled.

------------------------------------------------------------------------
r13253 | cbiere | 2007-04-04 20:26:35 -0400 (Wed, 04 Apr 2007) | 7 lines

 * Avoid that we assume being firewalled during startup even though we were
   not during the last session. Otherwise, we lose firewalled download sources
   on each startup and there might be further bad side-effects. Instead of
   just checking "is_firewalled", we should probably check how long this has
   been the case to prevent false-positives for short durations (after an
   address, port change as it happens on startup).

------------------------------------------------------------------------
r13252 | cbiere | 2007-04-04 19:13:31 -0400 (Wed, 04 Apr 2007) | 2 lines

 * Simplified the download interface.

------------------------------------------------------------------------
r13251 | cbiere | 2007-04-04 15:55:38 -0400 (Wed, 04 Apr 2007) | 7 lines

 * Changed magnet_source_free() and magnet_resource_free() for safety and
   convenience.
 * Added magnet_set_parq_id().
 * Added download_store_magnets() in order to change the format in which
   downloads are stored i.e., they will be stored as magnets. The current
   format is crap and downloads for firewalled sources are not stored at all.

------------------------------------------------------------------------
r13250 | cbiere | 2007-04-03 21:30:54 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Suppress some uninteresting warnings.

------------------------------------------------------------------------
r13249 | cbiere | 2007-04-03 21:17:13 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Removed overlapping ranges.

------------------------------------------------------------------------
r13248 | cbiere | 2007-04-03 21:12:25 -0400 (Tue, 03 Apr 2007) | 2 lines

 * 33 new items.

------------------------------------------------------------------------
r13247 | cbiere | 2007-04-03 19:29:47 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13246 | cbiere | 2007-04-03 19:28:47 -0400 (Tue, 03 Apr 2007) | 3 lines

 * nodes_gui_add_node(): Make sure we do not add the same node twice, just in
   case.

------------------------------------------------------------------------
r13245 | cbiere | 2007-04-03 19:26:19 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Renamed iprange_make() to iprange_new().

------------------------------------------------------------------------
r13244 | cbiere | 2007-04-03 19:23:26 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Generalized some of the code and moved it to sorted_array.[ch].

------------------------------------------------------------------------
r13243 | cbiere | 2007-04-03 19:21:18 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Use a sorted array instead of hashtable for SHA-1 lookups.

------------------------------------------------------------------------
r13242 | cbiere | 2007-04-03 19:10:36 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Added sorted_array.[ch].

------------------------------------------------------------------------
r13241 | cbiere | 2007-04-03 19:06:01 -0400 (Tue, 03 Apr 2007) | 2 lines

 * ggept_hname_extract(): Allow only UTF-8 encoded hostnames.

------------------------------------------------------------------------
r13240 | cbiere | 2007-04-03 19:03:55 -0400 (Tue, 03 Apr 2007) | 2 lines

 * Added sha1_cmp().

------------------------------------------------------------------------
r13239 | cbiere | 2007-04-02 23:49:35 -0400 (Mon, 02 Apr 2007) | 2 lines

 * struct iprange_net: Store the bits instead of the mask for compactness.

------------------------------------------------------------------------
r13238 | cbiere | 2007-04-02 23:40:42 -0400 (Mon, 02 Apr 2007) | 2 lines

 * Added cidr_to_netmask().

------------------------------------------------------------------------
r13237 | cbiere | 2007-04-02 23:12:49 -0400 (Mon, 02 Apr 2007) | 3 lines

 * Simplified code for IPv4 address range lookups to use binary search
   instead of a mix tables and lists.

------------------------------------------------------------------------
r13236 | cbiere | 2007-04-02 16:01:43 -0400 (Mon, 02 Apr 2007) | 2 lines

 * get_results_set(): Removed a comment.

------------------------------------------------------------------------
r13235 | cbiere | 2007-04-02 15:58:50 -0400 (Mon, 02 Apr 2007) | 2 lines

 * create_download(): Removed unnecessary variable.

------------------------------------------------------------------------
r13234 | cbiere | 2007-04-01 18:14:55 -0400 (Sun, 01 Apr 2007) | 2 lines

 * search_set_details(): SR_* flags are in rc->flags not rs->status.

------------------------------------------------------------------------
r13233 | cbiere | 2007-04-01 13:12:26 -0400 (Sun, 01 Apr 2007) | 3 lines

 * More em-pee-free spam.
 * Remove commented out stuff; this will go to another file.

------------------------------------------------------------------------
r13232 | cbiere | 2007-04-01 13:07:08 -0400 (Sun, 01 Apr 2007) | 2 lines

 * Added another range.

------------------------------------------------------------------------
r13231 | cbiere | 2007-04-01 00:39:58 -0400 (Sun, 01 Apr 2007) | 2 lines

 * [GTK2] Show more search result details and use a treeview list for display.

------------------------------------------------------------------------
r13230 | cbiere | 2007-04-01 00:32:16 -0400 (Sun, 01 Apr 2007) | 4 lines

 * downloads_with_name_dec(): Made check non-fatal because this does not
   seem quite right in case of a missing SHA-1.
 * Debug message cosmetic.

------------------------------------------------------------------------
r13229 | cbiere | 2007-04-01 00:30:44 -0400 (Sun, 01 Apr 2007) | 2 lines

 * Debug message cosmetic.

------------------------------------------------------------------------
r13228 | cbiere | 2007-04-01 00:29:35 -0400 (Sun, 01 Apr 2007) | 2 lines

 * Added sha1_to_urn_string().

------------------------------------------------------------------------
r13227 | cbiere | 2007-04-01 00:26:12 -0400 (Sun, 01 Apr 2007) | 2 lines

 * This is the way out.

------------------------------------------------------------------------
r13226 | cbiere | 2007-03-31 15:56:50 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Removed copy&paste garbage.

------------------------------------------------------------------------
r13225 | cbiere | 2007-03-31 15:46:15 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13224 | cbiere | 2007-03-31 15:32:58 -0400 (Sat, 31 Mar 2007) | 2 lines

 * dq_common_init(): Must call record_query_string() here as well.

------------------------------------------------------------------------
r13223 | cbiere | 2007-03-31 15:10:44 -0400 (Sat, 31 Mar 2007) | 3 lines

 * search_add_new_muid(): Record the query string if we are tracking them
   for own and proxied searches.

------------------------------------------------------------------------
r13222 | cbiere | 2007-03-31 13:52:15 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Extended saboteur range.

------------------------------------------------------------------------
r13221 | cbiere | 2007-03-31 10:39:07 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r13220 | cbiere | 2007-03-31 10:37:47 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Removed trailing whitespace.

------------------------------------------------------------------------
r13219 | cbiere | 2007-03-31 10:36:57 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Added macro IS_POWER_OF_2().

------------------------------------------------------------------------
r13218 | cbiere | 2007-03-31 10:16:53 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Corrected casts.

------------------------------------------------------------------------
r13217 | cbiere | 2007-03-31 10:14:46 -0400 (Sat, 31 Mar 2007) | 3 lines

 * Recreate the test program after the first check because trylink
   removes try.c.

------------------------------------------------------------------------
r13216 | cbiere | 2007-03-31 10:00:24 -0400 (Sat, 31 Mar 2007) | 2 lines

 * Integrated subliminal sledgehammer hinting.

------------------------------------------------------------------------
r13215 | cbiere | 2007-03-30 13:02:40 -0400 (Fri, 30 Mar 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13214 | cbiere | 2007-03-30 13:01:59 -0400 (Fri, 30 Mar 2007) | 2 lines

 * Use -lsendfile.

------------------------------------------------------------------------
r13213 | cbiere | 2007-03-30 12:57:40 -0400 (Fri, 30 Mar 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13212 | cbiere | 2007-03-30 12:56:24 -0400 (Fri, 30 Mar 2007) | 2 lines

 * Use -liconv.

------------------------------------------------------------------------
r13211 | cbiere | 2007-03-29 12:10:58 -0400 (Thu, 29 Mar 2007) | 2 lines

 * Use TTH_ as prefix for identifiers used by the tigertree code.

------------------------------------------------------------------------
r13210 | cbiere | 2007-03-29 10:49:38 -0400 (Thu, 29 Mar 2007) | 2 lines

 * Include <sys/types.h>, some systems most-likely require it.

------------------------------------------------------------------------
r13209 | cbiere | 2007-03-29 10:35:16 -0400 (Thu, 29 Mar 2007) | 3 lines

 * Added checks for iconv() and iconv.h so that we can bail out during
   Configure before compiling starts.

------------------------------------------------------------------------
r13208 | cbiere | 2007-03-29 10:32:58 -0400 (Thu, 29 Mar 2007) | 3 lines

 * Added checks for iconv() and iconv.h so that we can bail out during
   Configure before compiling starts.

------------------------------------------------------------------------
r13205 | cbiere | 2007-03-28 15:52:53 -0400 (Wed, 28 Mar 2007) | 2 lines

 * analyse_status(): Check for GTA_NODE_REMOVING too.

------------------------------------------------------------------------
r13204 | cbiere | 2007-03-27 17:16:16 -0400 (Tue, 27 Mar 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13203 | cbiere | 2007-03-27 17:15:09 -0400 (Tue, 27 Mar 2007) | 2 lines

 * udp_ping_register(): "initialized" was never set to TRUE.

------------------------------------------------------------------------
r13202 | cbiere | 2007-03-27 09:34:00 -0400 (Tue, 27 Mar 2007) | 2 lines

 * Another special guest.

------------------------------------------------------------------------
r13201 | cbiere | 2007-03-25 15:56:41 -0400 (Sun, 25 Mar 2007) | 2 lines

 * Normalized order of attributes.

------------------------------------------------------------------------
r13200 | cbiere | 2007-03-25 14:13:19 -0400 (Sun, 25 Mar 2007) | 2 lines

 * 3 more items.

------------------------------------------------------------------------
r13199 | daichik | 2007-03-24 17:27:36 -0400 (Sat, 24 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13196 | cbiere | 2007-03-24 11:13:34 -0400 (Sat, 24 Mar 2007) | 2 lines

 * Into the mincer with thee.

------------------------------------------------------------------------
r13194 | daichik | 2007-03-24 07:59:28 -0400 (Sat, 24 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13193 | cbiere | 2007-03-22 08:35:40 -0400 (Thu, 22 Mar 2007) | 2 lines

 * Removed gtk_window_set_urgency_hint().

------------------------------------------------------------------------
r13192 | cbiere | 2007-03-21 20:30:19 -0400 (Wed, 21 Mar 2007) | 2 lines

 * Removed "Show settings" buttons under downloads. Use tabs instead.

------------------------------------------------------------------------
r13191 | cbiere | 2007-03-21 19:43:03 -0400 (Wed, 21 Mar 2007) | 2 lines

 * Moved all color variables into a struct "colors".

------------------------------------------------------------------------
r13190 | cbiere | 2007-03-21 18:53:06 -0400 (Wed, 21 Mar 2007) | 7 lines

 * Use the term "ultrapeer" consistently.
 * Removed periods from headlines.
 * Removed too specific example of Configure invokation.
 * Removed too specific commands from example script.
 * Mention servent_kuid as well and be more verbose because this is pretty
   dangerous.

------------------------------------------------------------------------
r13189 | daichik | 2007-03-21 17:17:23 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13187 | cbiere | 2007-03-21 15:59:10 -0400 (Wed, 21 Mar 2007) | 3 lines

 * Pass fd 4 explicitely for "warn" because not all shells inherit additional
   file descriptors automagically.

------------------------------------------------------------------------
r13186 | daichik | 2007-03-21 15:57:48 -0400 (Wed, 21 Mar 2007) | 2 lines

Reverted.

------------------------------------------------------------------------
r13185 | daichik | 2007-03-21 15:42:54 -0400 (Wed, 21 Mar 2007) | 3 lines

Removed the ring (diacritic) from "A",
should be reverted if that's the matter.

------------------------------------------------------------------------
r13184 | daichik | 2007-03-21 15:34:52 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13183 | cbiere | 2007-03-21 15:29:29 -0400 (Wed, 21 Mar 2007) | 2 lines

 * download_send_push_request(): Make sure 'success' is initialized.

------------------------------------------------------------------------
r13182 | daichik | 2007-03-21 15:04:36 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13181 | daichik | 2007-03-21 15:03:44 -0400 (Wed, 21 Mar 2007) | 2 lines

Added missing files.

------------------------------------------------------------------------
r13180 | cbiere | 2007-03-21 13:46:22 -0400 (Wed, 21 Mar 2007) | 3 lines

 * Added window which pops up and suggests an update if gtk-gnutella is
   outdated.

------------------------------------------------------------------------
r13179 | cbiere | 2007-03-21 13:43:32 -0400 (Wed, 21 Mar 2007) | 2 lines

 * Support the TITLE tag under Gtk+ 1.2 as well.

------------------------------------------------------------------------
r13178 | daichik | 2007-03-21 13:02:49 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13177 | daichik | 2007-03-21 13:01:18 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13176 | cbiere | 2007-03-21 12:54:22 -0400 (Wed, 21 Mar 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13175 | daichik | 2007-03-21 12:51:19 -0400 (Wed, 21 Mar 2007) | 2 lines

We also need a space here.

------------------------------------------------------------------------
r13174 | daichik | 2007-03-21 12:27:47 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13173 | daichik | 2007-03-21 12:19:41 -0400 (Wed, 21 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13172 | cbiere | 2007-03-21 12:14:19 -0400 (Wed, 21 Mar 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r13171 | daichik | 2007-03-21 12:11:58 -0400 (Wed, 21 Mar 2007) | 2 lines

We need a space here.

------------------------------------------------------------------------
r13170 | cbiere | 2007-03-20 19:06:39 -0400 (Tue, 20 Mar 2007) | 2 lines

 * Debug message cosmetic.

------------------------------------------------------------------------
r13169 | cbiere | 2007-03-20 18:34:40 -0400 (Tue, 20 Mar 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13168 | cbiere | 2007-03-20 18:01:41 -0400 (Tue, 20 Mar 2007) | 2 lines

 * add_file(): Append a field separator to the ASCII SHA-1.

------------------------------------------------------------------------
r13167 | cbiere | 2007-03-20 17:01:57 -0400 (Tue, 20 Mar 2007) | 2 lines

 * download_send_push_request(): Send an UDP PUSH request to the push proxy.

------------------------------------------------------------------------
r13166 | cbiere | 2007-03-20 16:53:45 -0400 (Tue, 20 Mar 2007) | 3 lines

 * search_gui_new_browse_host(): Reset address and port, if we are going to
   use the GUID for connecting.

------------------------------------------------------------------------
r13165 | cbiere | 2007-03-20 16:51:51 -0400 (Tue, 20 Mar 2007) | 2 lines

 * search_browse(): Don't check the port, it's irrelevant for firewalled peers.

------------------------------------------------------------------------
r13164 | cbiere | 2007-03-20 16:20:00 -0400 (Tue, 20 Mar 2007) | 3 lines

 * Back to the stone age because LimeWire does not support GGEP H which means
   we still cannot emit it unconditionally.

------------------------------------------------------------------------
r13163 | cbiere | 2007-03-20 12:03:43 -0400 (Tue, 20 Mar 2007) | 7 lines

 * Do not refuse startup of ancient versions any longer. This cannot work if
   distributions notoriously refuse to keep their packages up-to-date. Also
   it does not help if people switch to even more outdated software instead
   of updating. Automagic bootstrapping will still be disabled though
   because it is not acceptable to reference bootstrap servers over excessive
   periods.

------------------------------------------------------------------------
r13162 | cbiere | 2007-03-20 11:52:21 -0400 (Tue, 20 Mar 2007) | 2 lines

 * Removed spurious line-breaks in debug messages.

------------------------------------------------------------------------
r13161 | cbiere | 2007-03-20 11:16:34 -0400 (Tue, 20 Mar 2007) | 2 lines

 * is_local_addr(): Use is_my_address().

------------------------------------------------------------------------
r13160 | cbiere | 2007-03-20 11:15:45 -0400 (Tue, 20 Mar 2007) | 2 lines

 * Added deconstify_gboolean().

------------------------------------------------------------------------
r13153 | cbiere | 2007-03-19 21:07:58 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Fixed inverted logic in previous commit.

------------------------------------------------------------------------
r13152 | cbiere | 2007-03-19 21:01:39 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Don't show a vendor string for local results.

------------------------------------------------------------------------
r13151 | cbiere | 2007-03-19 21:00:41 -0400 (Mon, 19 Mar 2007) | 2 lines

 * magnet_handle_key(): Reject items which do not use UTF-8 encoding.

------------------------------------------------------------------------
r13150 | cbiere | 2007-03-19 19:56:21 -0400 (Mon, 19 Mar 2007) | 3 lines

 * struct dquery: nvcount -> nv_count; nvfound -> nv_found
 * dq_free_next_up(): Don't touch uninitialized entries of dq->nv.

------------------------------------------------------------------------
r13149 | cbiere | 2007-03-19 19:50:28 -0400 (Mon, 19 Mar 2007) | 2 lines

 * node_id_unref(): Added NULL check.

------------------------------------------------------------------------
r13148 | cbiere | 2007-03-19 19:37:52 -0400 (Mon, 19 Mar 2007) | 3 lines

 * search_gui_compare_records(), search_gui_add_record(): Use EMPTY_STRING()
   to map NULL to "".

------------------------------------------------------------------------
r13147 | cbiere | 2007-03-19 19:19:59 -0400 (Mon, 19 Mar 2007) | 2 lines

 * guess_local_addr(): Use settings_addr_changed().

------------------------------------------------------------------------
r13146 | cbiere | 2007-03-19 18:39:58 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Use time_delta_t and delta_time().

------------------------------------------------------------------------
r13145 | cbiere | 2007-03-19 18:38:59 -0400 (Mon, 19 Mar 2007) | 2 lines

 * fi_gui_relative_done(): Corrected parameter type.

------------------------------------------------------------------------
r13144 | cbiere | 2007-03-19 18:16:24 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Use filesize_per_*().

------------------------------------------------------------------------
r13143 | cbiere | 2007-03-19 18:13:33 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r13142 | cbiere | 2007-03-19 18:13:00 -0400 (Mon, 19 Mar 2007) | 3 lines

 * download_total_progress(), download_source_progress(): Use
   filesize_per_10000().

------------------------------------------------------------------------
r13141 | cbiere | 2007-03-19 18:11:27 -0400 (Mon, 19 Mar 2007) | 3 lines

 * uploads_gui_progress(): Use filesize_per_100().
 * uploads_gui_status_str(): Use time_delta_t.

------------------------------------------------------------------------
r13140 | cbiere | 2007-03-19 18:01:39 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Added filesize_per_*() for proper calculation of filesize fractions.

------------------------------------------------------------------------
r13139 | cbiere | 2007-03-19 16:50:27 -0400 (Mon, 19 Mar 2007) | 3 lines

 * Removed "Show settings" button from the search results display. Use tabs
   instead.

------------------------------------------------------------------------
r13138 | cbiere | 2007-03-19 15:28:50 -0400 (Mon, 19 Mar 2007) | 2 lines

 * node_remove_v(), string_table_free(): Minor simplification.

------------------------------------------------------------------------
r13137 | cbiere | 2007-03-19 15:04:16 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13136 | cbiere | 2007-03-19 14:54:42 -0400 (Mon, 19 Mar 2007) | 7 lines

 * struct next_up:
   * Renamed "nid" to "node_id".
   * There is no need to reference the node struct and its ID.
 * Added dq_free_next_up().
 * dq_fill_next_up(): The node ID must be referenced instead of stored
   directly.

------------------------------------------------------------------------
r13135 | cbiere | 2007-03-19 13:30:32 -0400 (Mon, 19 Mar 2007) | 2 lines

 * Show the vendor name for search results in separate column.

------------------------------------------------------------------------
r13134 | cbiere | 2007-03-18 16:24:22 -0400 (Sun, 18 Mar 2007) | 2 lines

 * Single-quotes should always be escaped as well.

------------------------------------------------------------------------
r13133 | daichik | 2007-03-17 15:45:15 -0400 (Sat, 17 Mar 2007) | 2 lines

Fixed header.

------------------------------------------------------------------------
r13132 | daichik | 2007-03-17 15:36:48 -0400 (Sat, 17 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13131 | daichik | 2007-03-17 15:33:47 -0400 (Sat, 17 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13130 | bpringlemeir | 2007-03-17 15:33:01 -0400 (Sat, 17 Mar 2007) | 3 lines

Prevent recursion from locking up the udp queue.
Now similar to mq_tcp.c

------------------------------------------------------------------------
r13129 | cbiere | 2007-03-17 15:12:43 -0400 (Sat, 17 Mar 2007) | 2 lines

 * mq_tcp_putq(): Initialize variables only if we are going to use them.

------------------------------------------------------------------------
r13128 | cbiere | 2007-03-17 12:04:26 -0400 (Sat, 17 Mar 2007) | 2 lines

 * Added property "push_proxy_debug".

------------------------------------------------------------------------
r13127 | cbiere | 2007-03-17 12:02:11 -0400 (Sat, 17 Mar 2007) | 4 lines

 * node_remove_v(), node_real_remove(): Get rid of the node GUID earlier
   to avoid warnings like "x uses same GUID as y" when a node re-connects
   quickly.

------------------------------------------------------------------------
r13126 | cbiere | 2007-03-17 11:39:59 -0400 (Sat, 17 Mar 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13125 | cbiere | 2007-03-17 11:38:35 -0400 (Sat, 17 Mar 2007) | 2 lines

 * Removed spurious line-breaks from debug messages.

------------------------------------------------------------------------
r13124 | cbiere | 2007-03-17 11:21:30 -0400 (Sat, 17 Mar 2007) | 2 lines

 * get_params(): Corrected order of parameters.

------------------------------------------------------------------------
r13123 | cbiere | 2007-03-17 11:14:55 -0400 (Sat, 17 Mar 2007) | 2 lines

 * check_cpu_usage(): STFU. THX.

------------------------------------------------------------------------
r13122 | cbiere | 2007-03-17 11:07:58 -0400 (Sat, 17 Mar 2007) | 2 lines

 * ntp_send_probe(): Missing break statement in switch.

------------------------------------------------------------------------
r13121 | cbiere | 2007-03-17 10:52:57 -0400 (Sat, 17 Mar 2007) | 2 lines

 * Replaced printf() with g_message(), so that it's properly logged to stderr.

------------------------------------------------------------------------
r13120 | cbiere | 2007-03-17 10:42:29 -0400 (Sat, 17 Mar 2007) | 2 lines

 * http_async_free_recursive(): Use atom_str_free_null().

------------------------------------------------------------------------
r13119 | cbiere | 2007-03-17 10:40:53 -0400 (Sat, 17 Mar 2007) | 3 lines

 * cproxy_http_header_ind(): Cancel first but copy message because the
   buffer is freed during cancelling.

------------------------------------------------------------------------
r13118 | cbiere | 2007-03-17 10:24:17 -0400 (Sat, 17 Mar 2007) | 2 lines

 * cproxy_http_header_ind(): Handle first, then cancel.

------------------------------------------------------------------------
r13117 | daichik | 2007-03-17 08:52:43 -0400 (Sat, 17 Mar 2007) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r13116 | cbiere | 2007-03-17 07:54:33 -0400 (Sat, 17 Mar 2007) | 4 lines

 * download_handle_magnet(): Fixed incorrect code merge. PUSH URLs in magnets
   could not work with this because this was still the old code, not the
   newer from search_common.c.

------------------------------------------------------------------------
r13115 | daichik | 2007-03-17 07:09:06 -0400 (Sat, 17 Mar 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r13114 | cbiere | 2007-03-16 22:21:02 -0400 (Fri, 16 Mar 2007) | 3 lines

 * Use url_escape_query() and exclude ':' from escaping to keep magnet links
   are bit easier to read and a little bit shorter.

------------------------------------------------------------------------
r13113 | cbiere | 2007-03-16 20:37:47 -0400 (Fri, 16 Mar 2007) | 3 lines

 * search_locally(): Add a push-proxy to local results if we are firewalled,
   so that we can add least add PUSH URLs to magnets.

------------------------------------------------------------------------
r13112 | cbiere | 2007-03-16 20:35:37 -0400 (Fri, 16 Mar 2007) | 2 lines

 * search_matched(): Never skip local results.

------------------------------------------------------------------------
r13111 | cbiere | 2007-03-16 20:26:17 -0400 (Fri, 16 Mar 2007) | 2 lines

 * search_gui_handle_magnet(): Removed unused variable.

------------------------------------------------------------------------
r13110 | cbiere | 2007-03-16 20:02:55 -0400 (Fri, 16 Mar 2007) | 3 lines

 * Splitted handling of magnets into searching and downloading to reduce
   duplicated code.

------------------------------------------------------------------------
r13109 | cbiere | 2007-03-16 18:12:43 -0400 (Fri, 16 Mar 2007) | 2 lines

 * download_build_url(): Create a PUSH URL if appropriate.

------------------------------------------------------------------------
r13108 | cbiere | 2007-03-16 17:37:23 -0400 (Fri, 16 Mar 2007) | 2 lines

 * download_start(): host_is_valid() must not be used for assertion checks.

------------------------------------------------------------------------
r13107 | cbiere | 2007-03-16 17:04:29 -0400 (Fri, 16 Mar 2007) | 2 lines

 * Short explanation of PUSH URLs.

------------------------------------------------------------------------
r13106 | cbiere | 2007-03-16 16:37:42 -0400 (Fri, 16 Mar 2007) | 3 lines

 * Added support for "push:" URIs so that we handle firewalled sources in
   magnet-links or as stand-alone URI.

------------------------------------------------------------------------
r13105 | cbiere | 2007-03-16 16:31:19 -0400 (Fri, 16 Mar 2007) | 2 lines

 * Added gnet_host_vec_add().

------------------------------------------------------------------------
r13104 | cbiere | 2007-03-16 16:30:30 -0400 (Fri, 16 Mar 2007) | 5 lines

 * free_server(): Removed bogus check. The result of host_is_valid() can
   change at run-time and the check should not be necessary.
 * create_download(): Use is_my_address_and_port().
 * download_new(), download_new_uri(): Handle push proxies correctly.

------------------------------------------------------------------------
r13103 | cbiere | 2007-03-16 16:26:11 -0400 (Fri, 16 Mar 2007) | 2 lines

 * hex_to_guid(): A bit simplified.

------------------------------------------------------------------------
r13102 | cbiere | 2007-03-16 14:39:26 -0400 (Fri, 16 Mar 2007) | 3 lines

 * Fixed bug in guid_to_string_buf().
 * guid_hex_str(): Use guid_to_string_buf() too.

------------------------------------------------------------------------
r13101 | cbiere | 2007-03-16 11:58:12 -0400 (Fri, 16 Mar 2007) | 3 lines

 * download_connected(): Disable nagle so that our HTTP requests are not
   delayed.

------------------------------------------------------------------------
r13100 | cbiere | 2007-03-15 17:07:50 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Corrected node_id_get_self().

------------------------------------------------------------------------
r13099 | cbiere | 2007-03-15 17:01:10 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Corrected range.

------------------------------------------------------------------------
r13098 | cbiere | 2007-03-15 16:16:53 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Replaced tabs with spaces.

------------------------------------------------------------------------
r13097 | cbiere | 2007-03-15 15:09:59 -0400 (Thu, 15 Mar 2007) | 3 lines

 * oob_results_check(): Changed refcount check because there might be an
   assertion failure before freeing it otherwise.

------------------------------------------------------------------------
r13096 | cbiere | 2007-03-15 13:12:47 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Stick to the lower-case variant of "gtk-gnutella".

------------------------------------------------------------------------
r13095 | cbiere | 2007-03-15 10:45:40 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Welcome aboard.

------------------------------------------------------------------------
r13094 | cbiere | 2007-03-15 10:38:08 -0400 (Thu, 15 Mar 2007) | 2 lines

 * Disabled recursion warnings because they are too frequent.

------------------------------------------------------------------------
r13093 | cbiere | 2007-03-14 22:39:52 -0400 (Wed, 14 Mar 2007) | 2 lines

 * More special guests.

------------------------------------------------------------------------
r13092 | cbiere | 2007-03-14 21:42:20 -0400 (Wed, 14 Mar 2007) | 2 lines

 * udp_connect_back() use udp_send_ping() so that the MUID is registered.

------------------------------------------------------------------------
r13091 | cbiere | 2007-03-14 20:56:08 -0400 (Wed, 14 Mar 2007) | 2 lines

 * Avoid casts.

------------------------------------------------------------------------
r13090 | cbiere | 2007-03-14 20:18:52 -0400 (Wed, 14 Mar 2007) | 2 lines

 * Bing Bing Bonus.

------------------------------------------------------------------------
r13089 | cbiere | 2007-03-14 20:12:24 -0400 (Wed, 14 Mar 2007) | 2 lines

 * More flesh.

------------------------------------------------------------------------
r13088 | cbiere | 2007-03-14 19:24:33 -0400 (Wed, 14 Mar 2007) | 2 lines

 * Support browse:<hostname>:<port> too (by hostname instead of address).

------------------------------------------------------------------------
r13087 | cbiere | 2007-03-14 19:18:50 -0400 (Wed, 14 Mar 2007) | 3 lines

 * download_ignore_requested(): Allow SOCK_F_FORCE to override hostile
   checks etc.

------------------------------------------------------------------------
r13086 | cbiere | 2007-03-14 11:17:39 -0400 (Wed, 14 Mar 2007) | 2 lines

 * Next please.

------------------------------------------------------------------------
r13085 | cbiere | 2007-03-13 16:23:56 -0400 (Tue, 13 Mar 2007) | 4 lines

 * struct sha1: Changed type of data from "unsigned char[]" to "char[]"
   because the former causes many pointless compiler warnings that have to
   be suppressed with casts.

------------------------------------------------------------------------
r13084 | cbiere | 2007-03-13 14:56:53 -0400 (Tue, 13 Mar 2007) | 2 lines

 * Next please.

------------------------------------------------------------------------
r13083 | cbiere | 2007-03-13 14:47:37 -0400 (Tue, 13 Mar 2007) | 2 lines

 * Simplified; we only need to track the last used MUID.

------------------------------------------------------------------------
r13082 | cbiere | 2007-03-13 13:59:13 -0400 (Tue, 13 Mar 2007) | 2 lines

 * Updated use of udp_send_ping().

------------------------------------------------------------------------
r13081 | cbiere | 2007-03-13 13:28:34 -0400 (Tue, 13 Mar 2007) | 3 lines

 * Use udp_send_ping() so that the MUID gets registered, otherwise we won't
   accept the pong.

------------------------------------------------------------------------
r13080 | cbiere | 2007-03-13 13:25:08 -0400 (Tue, 13 Mar 2007) | 4 lines

 * udp_send_ping():
   * Allow to specify a MUID.
   * Return FALSE if we know the ping was not sent.

------------------------------------------------------------------------
r13079 | cbiere | 2007-03-13 13:21:55 -0400 (Tue, 13 Mar 2007) | 2 lines

 * rudp_send_packet(): Check for NULL.

------------------------------------------------------------------------
r13078 | cbiere | 2007-03-13 13:20:52 -0400 (Tue, 13 Mar 2007) | 2 lines

 * Avoid useless warning.

------------------------------------------------------------------------
r13077 | cbiere | 2007-03-13 13:20:13 -0400 (Tue, 13 Mar 2007) | 2 lines

 * head_ping_timer(): Use the parameter rather than a global variable.

------------------------------------------------------------------------
r13076 | cbiere | 2007-03-13 10:03:08 -0400 (Tue, 13 Mar 2007) | 2 lines

 * Another one.

------------------------------------------------------------------------
r13075 | cbiere | 2007-03-12 20:55:32 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Another one.

------------------------------------------------------------------------
r13074 | cbiere | 2007-03-12 20:06:06 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13073 | cbiere | 2007-03-12 20:04:08 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13072 | cbiere | 2007-03-12 18:44:57 -0400 (Mon, 12 Mar 2007) | 3 lines

 * Convert path arguments for command-line options to absolute paths. This
   is required if, for example, --damonize and --log-stderr are used.

------------------------------------------------------------------------
r13071 | cbiere | 2007-03-12 18:39:28 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Added absolute_pathname().

------------------------------------------------------------------------
r13070 | cbiere | 2007-03-12 18:34:23 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Disabled regression checks.

------------------------------------------------------------------------
r13069 | cbiere | 2007-03-12 18:31:23 -0400 (Mon, 12 Mar 2007) | 2 lines

 * SQLite is not used currently.

------------------------------------------------------------------------
r13068 | cbiere | 2007-03-12 16:35:14 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Do not accept arbitrary UDP pongs.

------------------------------------------------------------------------
r13067 | cbiere | 2007-03-12 16:26:13 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r13066 | cbiere | 2007-03-12 16:20:06 -0400 (Mon, 12 Mar 2007) | 2 lines

 * node_tsync_udp(): Removed unnecessary check.

------------------------------------------------------------------------
r13065 | cbiere | 2007-03-12 13:22:50 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Removed unnecessary line-break.

------------------------------------------------------------------------
r13064 | cbiere | 2007-03-12 12:49:28 -0400 (Mon, 12 Mar 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r13063 | cbiere | 2007-03-12 12:45:39 -0400 (Mon, 12 Mar 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r13062 | cbiere | 2007-03-12 12:32:53 -0400 (Mon, 12 Mar 2007) | 3 lines

 * search_request(): Corrected mistake in previous commit. skip_file_search
   refers to matching by filename, SHA-1 matching should not be skipped.

------------------------------------------------------------------------
r13061 | cbiere | 2007-03-12 11:19:17 -0400 (Mon, 12 Mar 2007) | 3 lines

 * search_request(): skip_file_search was not respected for SHA-1 searches which
   could cause the MUID check in results_make() to fail.

------------------------------------------------------------------------
r13060 | cbiere | 2007-03-12 10:59:01 -0400 (Mon, 12 Mar 2007) | 3 lines

 * results_make(): Check whether the MUID is already known but don't assert
   that it is not.

------------------------------------------------------------------------
r13058 | cbiere | 2007-03-11 19:06:25 -0400 (Sun, 11 Mar 2007) | 2 lines

 * Removed unnecessary #include.

------------------------------------------------------------------------
r13057 | cbiere | 2007-03-11 19:04:51 -0400 (Sun, 11 Mar 2007) | 4 lines

 * upload_stats_gui_update(): Changed interface.
 * upload_stats_file_aborted(): No need to call gcu_upload_stats_gui_update().
 * [GTK2] Keep only a pointer in the tree model instead of each attribute.

------------------------------------------------------------------------
r13053 | bpringlemeir | 2007-03-11 16:31:48 -0400 (Sun, 11 Mar 2007) | 2 lines

Spelling, minor changes, added traffic shaping and headless info.

------------------------------------------------------------------------
r13052 | bpringlemeir | 2007-03-11 16:24:05 -0400 (Sun, 11 Mar 2007) | 4 lines

PNG Screenshot images and diagrams used in HTML.
The PNG images are converted to postscript for
generation of PDF files.

------------------------------------------------------------------------
r13051 | cbiere | 2007-03-11 16:20:39 -0400 (Sun, 11 Mar 2007) | 2 lines

 * struct gnutella_node: Removed "node_handle" and replaced it with "id".

------------------------------------------------------------------------
r13050 | cbiere | 2007-03-11 16:03:18 -0400 (Sun, 11 Mar 2007) | 2 lines

 * Fixed typos.

------------------------------------------------------------------------
r13049 | cbiere | 2007-03-11 14:29:58 -0400 (Sun, 11 Mar 2007) | 2 lines

 * Must include lib/glib-missing.h.

------------------------------------------------------------------------
r13048 | cbiere | 2007-03-11 14:23:00 -0400 (Sun, 11 Mar 2007) | 2 lines

 * Replaced some g_warning() with g_message().

------------------------------------------------------------------------
r13047 | cbiere | 2007-03-10 22:15:25 -0500 (Sat, 10 Mar 2007) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r13046 | cbiere | 2007-03-10 22:13:43 -0500 (Sat, 10 Mar 2007) | 2 lines

 * Added gm_hash_table_replace_const().

------------------------------------------------------------------------
r13045 | cbiere | 2007-03-10 22:06:23 -0500 (Sat, 10 Mar 2007) | 8 lines

 * struct gnutella_node: Changed "id" from uint32_t to a dedicated and          
   opaque type. Internally it points to a 64-bit integer atom. This allows us
   to keep references to a node indefinitely. Whether the referenced node
   still exists can be checked with node_by_id(). A caveat is that node_id_ref()
   and node_id_unref() must be used when storing the id, for example, in a
   list, hashtable or some other structure. Also node_id_eq() must be used
   for equality checks as different pointers may point to the same value.

------------------------------------------------------------------------
r13044 | cbiere | 2007-03-10 17:52:10 -0500 (Sat, 10 Mar 2007) | 2 lines

 * src/core/gdb.[ch] has been removed.

------------------------------------------------------------------------
r13043 | cbiere | 2007-03-10 17:27:01 -0500 (Sat, 10 Mar 2007) | 3 lines

 * upload_special_flushed(): Use uint64_to_string() instead of casting to
   unsigned long even if it's just debug output.

------------------------------------------------------------------------
r13042 | cbiere | 2007-03-10 15:34:05 -0500 (Sat, 10 Mar 2007) | 2 lines

 * Removed SQLite.

------------------------------------------------------------------------
r13041 | cbiere | 2007-03-10 12:55:47 -0500 (Sat, 10 Mar 2007) | 3 lines

 * hcache_get_caught(): Removed bad assertion.
 * host_timer(): Check the return value of hcache_get_caught().

------------------------------------------------------------------------
r13040 | cbiere | 2007-03-10 12:43:00 -0500 (Sat, 10 Mar 2007) | 3 lines

 * node_udp_create(): Always create the node itself even if the socket is
   not active.

------------------------------------------------------------------------
r13039 | cbiere | 2007-03-10 09:38:40 -0500 (Sat, 10 Mar 2007) | 2 lines

 * Removed duplicate.

------------------------------------------------------------------------
r13038 | cbiere | 2007-03-10 09:20:57 -0500 (Sat, 10 Mar 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r13037 | cbiere | 2007-03-09 21:31:00 -0500 (Fri, 09 Mar 2007) | 3 lines

 * handle_messages_supported(): Passed wrong "handle" to node_set_leaf_guidance(). Obviously
   node_handle must die.

------------------------------------------------------------------------
r13036 | cbiere | 2007-03-09 20:51:58 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Fixed infinite loop.

------------------------------------------------------------------------
r13035 | cbiere | 2007-03-09 18:06:56 -0500 (Fri, 09 Mar 2007) | 4 lines

 * Replaced idtable code with simpler variant using a hashtable. It is also
   much less likely now that an ID is ever recycled albeit not entirely
   impossible.

------------------------------------------------------------------------
r13034 | cbiere | 2007-03-09 17:44:44 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Replaced macros with static inline functions.

------------------------------------------------------------------------
r13033 | cbiere | 2007-03-09 17:37:58 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Replaced macros with static inline functions.

------------------------------------------------------------------------
r13032 | cbiere | 2007-03-09 17:26:45 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r13031 | cbiere | 2007-03-09 17:20:02 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Removed now unnecessary debug messages.

------------------------------------------------------------------------
r13030 | cbiere | 2007-03-09 17:02:39 -0500 (Fri, 09 Mar 2007) | 2 lines

 * We have to differ between sending to a UDP node and a usual node.

------------------------------------------------------------------------
r13029 | cbiere | 2007-03-09 17:00:59 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Added udp_send_mb().

------------------------------------------------------------------------
r13028 | cbiere | 2007-03-09 16:52:18 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Added g_hash_table_replace() for GLib 1.2.

------------------------------------------------------------------------
r13027 | cbiere | 2007-03-09 16:17:25 -0500 (Fri, 09 Mar 2007) | 3 lines

 * Added checks against NODE_IS_UDP() because it is anything but clear that
   gmsg_.*sendto.* cannot be used for UDP nodes.

------------------------------------------------------------------------
r13026 | cbiere | 2007-03-09 14:34:48 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r13025 | cbiere | 2007-03-09 13:35:40 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Let head_ping_register() decide whether the SHA-1 is recorded.

------------------------------------------------------------------------
r13024 | cbiere | 2007-03-09 13:23:07 -0500 (Fri, 09 Mar 2007) | 3 lines

 * Record the SHA-1 of HEAD Pings only if we're the origin or if debugging,
   otherwise we don't need it.

------------------------------------------------------------------------
r13023 | cbiere | 2007-03-09 12:29:46 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Added some comments.

------------------------------------------------------------------------
r13022 | cbiere | 2007-03-09 12:18:37 -0500 (Fri, 09 Mar 2007) | 2 lines

 * Added documentation of HEAD Pings and HEAD Pongs.

------------------------------------------------------------------------
r13021 | cbiere | 2007-03-09 10:46:10 -0500 (Fri, 09 Mar 2007) | 3 lines

 * Removed explicit references to UDP for HEAD Ping/Pongs because they are not
   restricted to UDP.

------------------------------------------------------------------------
r13020 | cbiere | 2007-03-09 08:38:07 -0500 (Fri, 09 Mar 2007) | 3 lines

 * vmsg_send_head_pong(): Replaced udp_send_msg() with gmsg_sendto_one()
   because this is not limited to UDP.

------------------------------------------------------------------------
r13019 | cbiere | 2007-03-08 18:53:40 -0500 (Thu, 08 Mar 2007) | 3 lines

 * dq_free(): If the "node_id" is kept in the hashtable make sure it points
   to the next valid item and not the one we are going to free.

------------------------------------------------------------------------
r13018 | cbiere | 2007-03-08 18:33:01 -0500 (Thu, 08 Mar 2007) | 4 lines

 * dq_node_removed(): Remove the item from "by_node_id" before dq_free() is
   called because the key points into "dq", which must not be accessed
   afterwards anymore.

------------------------------------------------------------------------
r13017 | cbiere | 2007-03-08 18:29:25 -0500 (Thu, 08 Mar 2007) | 2 lines

 * Added GM_SLIST_FOREACH().

------------------------------------------------------------------------
r13016 | cbiere | 2007-03-08 17:31:41 -0500 (Thu, 08 Mar 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r13015 | cbiere | 2007-03-08 14:07:02 -0500 (Thu, 08 Mar 2007) | 6 lines

 * Do not unnecessarily expose innards of the callout queue.
 * cq_insert(): Return a dedicated instead of a void pointer for a bit of
   type safety.
 * cq_cancel(): Pass an indirect pointer so the caller does not need to check
   for NULL and we always nullify the pointer to avoid dangling pointers.

------------------------------------------------------------------------
r13014 | cbiere | 2007-03-08 10:54:21 -0500 (Thu, 08 Mar 2007) | 4 lines

 * dq_node_removed(): As key isn't a value anymore it points into the now
   freed struct. Thus it must not be used. Use &node_id instead to remove
   the item from the hashtable.

------------------------------------------------------------------------
r13013 | cbiere | 2007-03-08 10:51:44 -0500 (Thu, 08 Mar 2007) | 2 lines

 * Added gm_hash_table_all_keys().

------------------------------------------------------------------------
r13012 | cbiere | 2007-03-08 02:43:06 -0500 (Thu, 08 Mar 2007) | 2 lines

 * Run for your fucking files.

------------------------------------------------------------------------
r13011 | cbiere | 2007-03-08 01:55:12 -0500 (Thu, 08 Mar 2007) | 5 lines

 * Added dquery_magic_t.
 * dq_cancel_local(), dq_search_closed(): Don't collect the freed items
   but collect them and free them to avoid modifying the hashtable whilst
   iterating over it.

------------------------------------------------------------------------
r13010 | cbiere | 2007-03-07 22:39:11 -0500 (Wed, 07 Mar 2007) | 3 lines

 * Record the "node_id" as well if forwarding a HEAD Ping, so we can route
   the HEAD Pong over TCP, too, not just UDP.

------------------------------------------------------------------------
r13009 | cbiere | 2007-03-07 22:28:30 -0500 (Wed, 07 Mar 2007) | 9 lines

 * Renamed NODE_ID_LOCAL to NODE_ID_SELF because the former is somewhat
   ambiguous.
 * struct gnutella_node: Increased width of "id" to 64-bit and added
   type node_id_t.
 * Added node_id_hash(), node_id_eq(), node_id_to_string(), node_id_generate().
 * node_active_by_id(): Added check for NODE_ID_SELF because it corresponds
   to no gnutella_node structure i.e., not even any pseudo node and should
   never be passed here.

------------------------------------------------------------------------
r13008 | cbiere | 2007-03-07 18:45:27 -0500 (Wed, 07 Mar 2007) | 3 lines

 * node_check_remote_ip_header(): Use is_my_address() so that IPv6 is covered
   as well.

------------------------------------------------------------------------
r13007 | cbiere | 2007-03-07 18:40:28 -0500 (Wed, 07 Mar 2007) | 2 lines

 * is_my_address() -> is_my_address_and_port().

------------------------------------------------------------------------
r13006 | cbiere | 2007-03-07 18:34:19 -0500 (Wed, 07 Mar 2007) | 4 lines

 * Shortened overlong lines.
 * Removed unnecessary casts.
 * Added const-qualifiers.

------------------------------------------------------------------------
r13005 | cbiere | 2007-03-07 18:30:55 -0500 (Wed, 07 Mar 2007) | 4 lines

 * Renamed is_my_address() to is_my_address_and_port() and added a new
   is_my_address().
 * Added listen_addr_by_net().

------------------------------------------------------------------------
r13004 | cbiere | 2007-03-07 12:39:49 -0500 (Wed, 07 Mar 2007) | 2 lines

 * Replaced Non-ASCII characters.

------------------------------------------------------------------------
r13003 | cbiere | 2007-03-06 18:50:44 -0500 (Tue, 06 Mar 2007) | 3 lines

 * Added node_guid(), node_set_guid() and node_by_guid().
 * Stricter handling and checking of node GUIDs.

------------------------------------------------------------------------
r13002 | cbiere | 2007-03-06 18:29:41 -0500 (Tue, 06 Mar 2007) | 2 lines

 * Added guid_to_string_buf() and guid_to_string().

------------------------------------------------------------------------
r13001 | cbiere | 2007-03-06 15:26:04 -0500 (Tue, 06 Mar 2007) | 4 lines

 * get_results_set(): Record the "real" hops and TTL instead of the adjusted
   values.
 * update_neighbour_info(): Simplified printing of vendor code.

------------------------------------------------------------------------
r13000 | cbiere | 2007-03-06 14:14:48 -0500 (Tue, 06 Mar 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r12999 | cbiere | 2007-03-06 13:35:55 -0500 (Tue, 06 Mar 2007) | 3 lines

 * Bumped Vendor-Message version to 0.2 because we support routing of
   HEAD Ping/Pong vendor messages.

------------------------------------------------------------------------
r12998 | cbiere | 2007-03-06 13:20:13 -0500 (Tue, 06 Mar 2007) | 2 lines

 * Style fix.

------------------------------------------------------------------------
r12997 | cbiere | 2007-03-06 13:08:51 -0500 (Tue, 06 Mar 2007) | 2 lines

 * Updated prototype for hcache_size().

------------------------------------------------------------------------
r12996 | cbiere | 2007-03-06 13:07:21 -0500 (Tue, 06 Mar 2007) | 5 lines

 * Simplified code; there is no need to keep a separate host counter;
   hash_list_length is O(1).
 * hcache_require_caught(): Corrected caches indices; this could cause an
   assertion failure when the hostcache was manually cleared.

------------------------------------------------------------------------
r12995 | cbiere | 2007-03-05 18:45:24 -0500 (Mon, 05 Mar 2007) | 4 lines

 * handle_udp_head_ping():
   * Moved some code to node_by_guid().
   * Don't forward pings that have already been forwarded.

------------------------------------------------------------------------
r12994 | cbiere | 2007-03-05 18:08:44 -0500 (Mon, 05 Mar 2007) | 3 lines

 * Added support for HEAD Ping/Pong. We don't emit them ourselves for now
   but respond to them and forward them if necessary.

------------------------------------------------------------------------
r12993 | cbiere | 2007-03-05 17:51:40 -0500 (Mon, 05 Mar 2007) | 2 lines

 * Changed definition of GGEP_MAGIC so that proper use requires less casts.

------------------------------------------------------------------------
r12992 | cbiere | 2007-03-05 17:48:54 -0500 (Mon, 05 Mar 2007) | 2 lines

 * route_towards_guid(): Avoid unnecessary multiple returns.

------------------------------------------------------------------------
r12991 | cbiere | 2007-03-05 17:47:59 -0500 (Mon, 05 Mar 2007) | 2 lines

 * handle_push_request(): Fixed potential memory leak.

------------------------------------------------------------------------
r12990 | cbiere | 2007-03-05 17:46:57 -0500 (Mon, 05 Mar 2007) | 2 lines

 * Removed duplicate prototypes.

------------------------------------------------------------------------
r12989 | cbiere | 2007-03-05 17:45:44 -0500 (Mon, 05 Mar 2007) | 2 lines

 * Added flag NODE_A_CAN_HEAD.

------------------------------------------------------------------------
r12988 | cbiere | 2007-03-05 17:45:05 -0500 (Mon, 05 Mar 2007) | 3 lines

 * dmesh_fill_alternate(): Filter out non-IPv4 alternate locations because
   where it is used, IPv6 addresses are yet not acceptable.

------------------------------------------------------------------------
r12987 | cbiere | 2007-03-05 17:42:10 -0500 (Mon, 05 Mar 2007) | 3 lines

 * struct array: Added const-qualifier to "data" because this is normally used
   to handle read-only data.

------------------------------------------------------------------------
r12986 | cbiere | 2007-03-05 17:38:33 -0500 (Mon, 05 Mar 2007) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r12985 | cbiere | 2007-03-05 00:40:44 -0500 (Mon, 05 Mar 2007) | 3 lines

 * node_udp_disable_by_net(): Clear NODE_F_WRITABLE flag.
 * node_udp_enable_by_net(): Set NODE_F_WRITABLE flag.

------------------------------------------------------------------------
r12984 | cbiere | 2007-03-04 20:07:17 -0500 (Sun, 04 Mar 2007) | 3 lines

 * build_push(): Changed return type to "struct array".
 * download_send_push_request(): Moved some code to send_udp_push().

------------------------------------------------------------------------
r12983 | cbiere | 2007-03-04 19:32:30 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Added is_banned_push() for readability.

------------------------------------------------------------------------
r12982 | cbiere | 2007-03-04 18:42:59 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Removed unnecessary BANNED_PUSH_COUNT.

------------------------------------------------------------------------
r12981 | cbiere | 2007-03-04 18:27:23 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Declared some variables static which are not meant to be exported.

------------------------------------------------------------------------
r12980 | cbiere | 2007-03-04 17:21:40 -0500 (Sun, 04 Mar 2007) | 3 lines

 * node_timer(): Refresh items in the TLS cache periodically. Otherwise
   stable connections cause them to disappear from the cache.

------------------------------------------------------------------------
r12979 | cbiere | 2007-03-04 17:17:49 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Added NODE_F_CAN_TLS flag.

------------------------------------------------------------------------
r12978 | cbiere | 2007-03-04 16:52:42 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Kaboom.

------------------------------------------------------------------------
r12977 | cbiere | 2007-03-04 16:33:45 -0500 (Sun, 04 Mar 2007) | 2 lines

 * node_timer(): Use time_delta_t instead glong.

------------------------------------------------------------------------
r12976 | cbiere | 2007-03-04 15:44:59 -0500 (Sun, 04 Mar 2007) | 2 lines

 * struct dump_header: Replaced uint8_t with guchar.

------------------------------------------------------------------------
r12975 | cbiere | 2007-03-04 15:15:48 -0500 (Sun, 04 Mar 2007) | 2 lines

 * route_mangled_oob_muid(): Fixed typo in comment.

------------------------------------------------------------------------
r12974 | cbiere | 2007-03-04 15:07:18 -0500 (Sun, 04 Mar 2007) | 3 lines

 * Replaced NODE() with cast_to_node().
 * Use node_check().

------------------------------------------------------------------------
r12973 | cbiere | 2007-03-04 15:04:05 -0500 (Sun, 04 Mar 2007) | 2 lines

 * Added node_check().

------------------------------------------------------------------------
r12972 | cbiere | 2007-03-04 14:00:38 -0500 (Sun, 04 Mar 2007) | 4 lines

 * node_is_gtkg(): Use the cached result from the flags instead of looking
   at the vendor string.
 * Use node_is_gtkg() instead of accessing the node flags directly.

------------------------------------------------------------------------
r12971 | cbiere | 2007-03-04 13:37:55 -0500 (Sun, 04 Mar 2007) | 2 lines

 * sha1_to_string(): Fixed pedantic compiler warning.

------------------------------------------------------------------------
r12970 | cbiere | 2007-03-04 13:36:55 -0500 (Sun, 04 Mar 2007) | 2 lines

 * handle_push_request(): Applied some polish.

------------------------------------------------------------------------
r12969 | cbiere | 2007-03-03 18:25:14 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Oh noes, itz teh fuck fucker.

------------------------------------------------------------------------
r12968 | cbiere | 2007-03-03 17:08:44 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Added disabled experimental code for HEAD ping/pong support.

------------------------------------------------------------------------
r12967 | cbiere | 2007-03-03 17:06:01 -0500 (Sat, 03 Mar 2007) | 3 lines

 * Added shared_file_dummy() to replace "(struct shared_file *) 0x1"
   as SHARE_REBUILDING.

------------------------------------------------------------------------
r12966 | cbiere | 2007-03-03 17:02:58 -0500 (Sat, 03 Mar 2007) | 2 lines

 * fi_alive_count(): Added const-qualifier.

------------------------------------------------------------------------
r12965 | cbiere | 2007-03-03 17:01:44 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Added sha1_to_string() for "struct sha1".

------------------------------------------------------------------------
r12964 | cbiere | 2007-03-03 16:47:36 -0500 (Sat, 03 Mar 2007) | 3 lines

 * Added 2 new items.
 * Added special rules which are commented out for the time being.

------------------------------------------------------------------------
r12963 | cbiere | 2007-03-03 15:50:20 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Extended spammer ranges and added another.

------------------------------------------------------------------------
r12962 | cbiere | 2007-03-03 09:47:35 -0500 (Sat, 03 Mar 2007) | 4 lines

 * Replaced 16 with GUID_RAW_SIZE.
 * route_mangled_oob_muid(): Copy only the non-mangled bytes instead of
   zeroing them out afterwards.

------------------------------------------------------------------------
r12961 | cbiere | 2007-03-03 09:35:22 -0500 (Sat, 03 Mar 2007) | 3 lines

 * route_query_hit(): Don't route query hits to a node whose GUID matches
   the GUID of the query hit. This may happen due to loops.

------------------------------------------------------------------------
r12960 | cbiere | 2007-03-03 08:49:54 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Moved prototype of gnet_stats_drop_reason_to_string().

------------------------------------------------------------------------
r12959 | cbiere | 2007-03-03 08:13:13 -0500 (Sat, 03 Mar 2007) | 3 lines

 * Use vmm_trap_page() for "fake_node" instead of 0x1 casted to a non-void
   pointer.

------------------------------------------------------------------------
r12958 | cbiere | 2007-03-03 08:09:01 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Added vmm_trap_page().

------------------------------------------------------------------------
r12957 | cbiere | 2007-03-03 07:33:32 -0500 (Sat, 03 Mar 2007) | 4 lines

 * route_query_hit():
   * Added const-qualifier.
   * Assert before not after.

------------------------------------------------------------------------
r12956 | cbiere | 2007-03-03 05:48:27 -0500 (Sat, 03 Mar 2007) | 2 lines

 * search_gui_new_search_full(): Plugged irrelevant memory leak.

------------------------------------------------------------------------
r12955 | cbiere | 2007-03-03 05:44:55 -0500 (Sat, 03 Mar 2007) | 3 lines

 * node_add_socket(): Don't deny connections to private addresses. This is
   the wrong place.

------------------------------------------------------------------------
r12954 | cbiere | 2007-03-03 05:36:20 -0500 (Sat, 03 Mar 2007) | 3 lines

 * search_gui_color_for_record(): Don't mark results as potential spam if
   they are received by host browsing because these are likely false-positives.

------------------------------------------------------------------------
r12953 | cbiere | 2007-03-03 05:34:00 -0500 (Sat, 03 Mar 2007) | 4 lines

 * get_results_set(): Drop results that carry our own GUID. Due to dynamic
   querying tapazooged peers might answer their own queries if there are
   loops.

------------------------------------------------------------------------
r12952 | cbiere | 2007-03-03 05:31:59 -0500 (Sat, 03 Mar 2007) | 3 lines

 * Added gnet_stats_drop_reason_to_string().
 * Added drop reason MSG_DROP_OWN_RESULT.

------------------------------------------------------------------------
r12951 | cbiere | 2007-03-03 05:17:57 -0500 (Sat, 03 Mar 2007) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r12950 | cbiere | 2007-03-03 05:17:31 -0500 (Sat, 03 Mar 2007) | 2 lines

 * download_verify_done(): Added call to file_info_check().

------------------------------------------------------------------------
r12949 | cbiere | 2007-03-03 05:16:58 -0500 (Sat, 03 Mar 2007) | 2 lines

 * file_info_shared_sha1(): Added call to shared_file_check().

------------------------------------------------------------------------
r12948 | cbiere | 2007-03-02 09:47:05 -0500 (Fri, 02 Mar 2007) | 2 lines

 * Removed configure.gnu.

------------------------------------------------------------------------
r12947 | cbiere | 2007-03-02 09:46:30 -0500 (Fri, 02 Mar 2007) | 2 lines

 * This is not supported.

------------------------------------------------------------------------
r12946 | cbiere | 2007-03-02 09:35:11 -0500 (Fri, 02 Mar 2007) | 2 lines

 * Made it a bit more copy&paste-friendly.

------------------------------------------------------------------------
r12945 | rmanfredi | 2007-03-01 17:23:51 -0500 (Thu, 01 Mar 2007) | 2 lines

Added "sq_debug" and converted printf() to g_message() in sq.c.

------------------------------------------------------------------------
r12944 | cbiere | 2007-02-28 06:19:26 -0500 (Wed, 28 Feb 2007) | 4 lines

 * search_results_handle_trailer(): Drop results with a bad trailer.
 * search_query(): Return the original search term instead of the normalized
   variant because it is more suitable for displaying.

------------------------------------------------------------------------
r12943 | cbiere | 2007-02-27 15:53:31 -0500 (Tue, 27 Feb 2007) | 2 lines

 * More scum.

------------------------------------------------------------------------
r12942 | cbiere | 2007-02-27 13:38:48 -0500 (Tue, 27 Feb 2007) | 2 lines

 * Another one.

------------------------------------------------------------------------
r12941 | cbiere | 2007-02-26 12:54:58 -0500 (Mon, 26 Feb 2007) | 2 lines

 * Another one.

------------------------------------------------------------------------
r12940 | cbiere | 2007-02-25 13:12:48 -0500 (Sun, 25 Feb 2007) | 3 lines

 * Removed duplicate.
 * Extended spammer range.

------------------------------------------------------------------------
r12939 | cbiere | 2007-02-25 04:04:50 -0500 (Sun, 25 Feb 2007) | 3 lines

 * Periodically emit an UHC ping to a random node to keep the hostcache fresh
   and increase its diversity.

------------------------------------------------------------------------
r12938 | cbiere | 2007-02-25 04:01:10 -0500 (Sun, 25 Feb 2007) | 2 lines

 * vmsg_build_oob_reply_ind(): Added assertion check.

------------------------------------------------------------------------
r12937 | cbiere | 2007-02-25 02:41:24 -0500 (Sun, 25 Feb 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r12936 | cbiere | 2007-02-24 18:36:53 -0500 (Sat, 24 Feb 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12935 | cbiere | 2007-02-24 17:14:56 -0500 (Sat, 24 Feb 2007) | 3 lines

 * handle_arguments(): Let --version also show the version information
   for GLib, Gtk+ and GNU TLS.

------------------------------------------------------------------------
r12934 | cbiere | 2007-02-24 17:13:10 -0500 (Sat, 24 Feb 2007) | 2 lines

 * Added tls_version_string().

------------------------------------------------------------------------
r12933 | cbiere | 2007-02-24 14:04:11 -0500 (Sat, 24 Feb 2007) | 4 lines

 * results_free_remove(): Removed unnecessary check.
 * oob_send_reply_ind(): Use oob_results_check().
 * free_oob_kv(): Removed unnecessary variable.

------------------------------------------------------------------------
r12932 | cbiere | 2007-02-24 13:55:58 -0500 (Sat, 24 Feb 2007) | 2 lines

 * Corrected reference counting and added magic.

------------------------------------------------------------------------
r12931 | cbiere | 2007-02-24 13:53:10 -0500 (Sat, 24 Feb 2007) | 2 lines

 * node_udp_get_addr_port(): Make sure "n" is initialized.

------------------------------------------------------------------------
r12930 | cbiere | 2007-02-24 13:46:01 -0500 (Sat, 24 Feb 2007) | 4 lines

 * node_udp_get_addr_port(): If udp_node/udp_node6 are non-NULL, we still
   have to check whether n->outq is non-NULL which may not be the case and
   would cause a crash later.

------------------------------------------------------------------------
r12929 | cbiere | 2007-02-24 12:13:37 -0500 (Sat, 24 Feb 2007) | 2 lines

 * node_dump_packet(): Use file_fopen_missing() instead of fopen().

------------------------------------------------------------------------
r12928 | cbiere | 2007-02-23 10:15:30 -0500 (Fri, 23 Feb 2007) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r12927 | cbiere | 2007-02-23 10:13:38 -0500 (Fri, 23 Feb 2007) | 2 lines

 * html_get_attribute(): Fixed "quoted might be uninitialized".

------------------------------------------------------------------------
r12926 | cbiere | 2007-02-23 10:08:40 -0500 (Fri, 23 Feb 2007) | 2 lines

 * spam_check_filename() -> spam_check_filename_and_size().

------------------------------------------------------------------------
r12925 | cbiere | 2007-02-23 09:12:41 -0500 (Fri, 23 Feb 2007) | 3 lines

 * Parse the SIZE tag and respect it for NAME rules. Allow an exact size
   as well as <min>-<max> to specify a range.

------------------------------------------------------------------------
r12924 | cbiere | 2007-02-23 08:28:11 -0500 (Fri, 23 Feb 2007) | 2 lines

 * Moved name rules back to end.

------------------------------------------------------------------------
r12923 | cbiere | 2007-02-23 08:22:51 -0500 (Fri, 23 Feb 2007) | 2 lines

 * 5724 more items.

------------------------------------------------------------------------
r12922 | cbiere | 2007-02-23 07:10:23 -0500 (Fri, 23 Feb 2007) | 2 lines

 * More bastards.

------------------------------------------------------------------------
r12921 | cbiere | 2007-02-23 06:34:05 -0500 (Fri, 23 Feb 2007) | 2 lines

 * YHBK.

------------------------------------------------------------------------
r12920 | cbiere | 2007-02-23 05:18:33 -0500 (Fri, 23 Feb 2007) | 2 lines

 * Bye bye fuckhead.

------------------------------------------------------------------------
r12919 | cbiere | 2007-02-23 04:38:37 -0500 (Fri, 23 Feb 2007) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r12918 | cbiere | 2007-02-23 02:30:41 -0500 (Fri, 23 Feb 2007) | 2 lines

 * And another one.

------------------------------------------------------------------------
r12917 | cbiere | 2007-02-23 02:22:46 -0500 (Fri, 23 Feb 2007) | 2 lines

 * Even Google knows "This site may harm your computer." (ysbweb.com).

------------------------------------------------------------------------
r12916 | cbiere | 2007-02-22 20:35:30 -0500 (Thu, 22 Feb 2007) | 2 lines

 * Added UNSIGNED() macro.

------------------------------------------------------------------------
r12915 | cbiere | 2007-02-22 18:14:19 -0500 (Thu, 22 Feb 2007) | 2 lines

 * 3582 more items.

------------------------------------------------------------------------
r12914 | cbiere | 2007-02-22 15:16:47 -0500 (Thu, 22 Feb 2007) | 2 lines

 * Another one.

------------------------------------------------------------------------
r12913 | cbiere | 2007-02-22 05:15:46 -0500 (Thu, 22 Feb 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12912 | cbiere | 2007-02-22 03:50:43 -0500 (Thu, 22 Feb 2007) | 2 lines

 * 2313 more items. There are now over 100000 items listed.

------------------------------------------------------------------------
r12911 | cbiere | 2007-02-21 22:33:46 -0500 (Wed, 21 Feb 2007) | 2 lines

 * Fixed compile issue for Gtk+ 1.2.

------------------------------------------------------------------------
r12910 | cbiere | 2007-02-21 20:28:47 -0500 (Wed, 21 Feb 2007) | 2 lines

 * Removed duplicated code. Reported by Bill Pringlemeir.

------------------------------------------------------------------------
r12909 | cbiere | 2007-02-21 11:23:28 -0500 (Wed, 21 Feb 2007) | 3 lines

 * tls_cache_item_expired(): Moved so that it's also available if sqlite is
   used.

------------------------------------------------------------------------
r12908 | cbiere | 2007-02-21 08:27:24 -0500 (Wed, 21 Feb 2007) | 2 lines

 * Added HTML_ATTR_LANG.

------------------------------------------------------------------------
r12907 | cbiere | 2007-02-21 08:08:24 -0500 (Wed, 21 Feb 2007) | 3 lines

 * Added support for language attribute.
 * Added different heading styles.

------------------------------------------------------------------------
r12906 | cbiere | 2007-02-21 06:15:06 -0500 (Wed, 21 Feb 2007) | 3 lines

 * Avoid loading expired items and remove expired items also before the maximum
   fill is reached.

------------------------------------------------------------------------
r12905 | cbiere | 2007-02-21 03:35:21 -0500 (Wed, 21 Feb 2007) | 3 lines

 * Removed vbox from the FAQ dialog window as it eats an incredible amount
   of CPU time (up to several minutes) whenever the window is resized.

------------------------------------------------------------------------
r12904 | cbiere | 2007-02-20 15:11:24 -0500 (Tue, 20 Feb 2007) | 2 lines

 * 2778 more items.

------------------------------------------------------------------------
r12903 | cbiere | 2007-02-20 13:07:27 -0500 (Tue, 20 Feb 2007) | 3 lines

 * Added support for images; TODO: correct paths.
 * Added support for hyperlinks.

------------------------------------------------------------------------
r12902 | cbiere | 2007-02-20 12:55:30 -0500 (Tue, 20 Feb 2007) | 2 lines

 * parse_numeric_entity(): Minor simplification.

------------------------------------------------------------------------
r12901 | cbiere | 2007-02-20 12:54:19 -0500 (Tue, 20 Feb 2007) | 2 lines

 * parse_numeric_entity(): Fixed two off-by-one bugs.

------------------------------------------------------------------------
r12900 | cbiere | 2007-02-20 10:28:10 -0500 (Tue, 20 Feb 2007) | 2 lines

 * Moved Unicode related functions to utf8.[ch].

------------------------------------------------------------------------
r12899 | cbiere | 2007-02-20 10:01:58 -0500 (Tue, 20 Feb 2007) | 8 lines

 * Added parsing of tag attributes.
 * Recognize also the tags TT, H6 and !DOCTYPE.
 * Use locale-neutral ctype-alike functions.
 * parse_numeric_entity():
   * Fixed parsing of hex entities (multiply with base not 10).
   * Simplified.
 * Renamed NUM_HTML_TAGS to NUM_HTML_TAG so that it fits the enum prefix.

------------------------------------------------------------------------
r12898 | cbiere | 2007-02-20 09:51:00 -0500 (Tue, 20 Feb 2007) | 2 lines

 * handle_push_request(): g_assert(0) -> g_assert_not_reached().

------------------------------------------------------------------------
r12897 | cbiere | 2007-02-20 09:50:12 -0500 (Tue, 20 Feb 2007) | 9 lines

 * download_push(): Do not check whether there are push proxies first because
   we do not need one for direct UDP.
 * download_send_push_request(): Use my_ttl not hard_ttl_limit because
   LimeWire won't handle it otherwise.
 * select_push_download(): Added checks to skip downloads which are not
   waiting for a pushed transfer.
 * download_push_ack(): Prevent assertion failure albeit that might have
   been fixed by the above mentioned checks.

------------------------------------------------------------------------
r12896 | cbiere | 2007-02-20 09:45:16 -0500 (Tue, 20 Feb 2007) | 3 lines

 * socket_connect_prepare(): Check here for hostiles as well so that we do
   not unnecessarily allocate a socket.

------------------------------------------------------------------------
r12895 | cbiere | 2007-02-20 09:44:18 -0500 (Tue, 20 Feb 2007) | 2 lines

 * handle_udp_connect_back(): There is no need to copy the guid.

------------------------------------------------------------------------
r12894 | cbiere | 2007-02-20 07:19:49 -0500 (Tue, 20 Feb 2007) | 2 lines

 * More hostiles.

------------------------------------------------------------------------
r12893 | cbiere | 2007-02-20 05:37:00 -0500 (Tue, 20 Feb 2007) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12892 | cbiere | 2007-02-20 05:15:56 -0500 (Tue, 20 Feb 2007) | 3 lines

 * Initialize the default foreground color from the search result trees
   instead of using a hardcoded black.

------------------------------------------------------------------------
r12891 | cbiere | 2007-02-20 04:52:10 -0500 (Tue, 20 Feb 2007) | 2 lines

 * Added gui_color_set().

------------------------------------------------------------------------
r12890 | cbiere | 2007-02-20 04:39:10 -0500 (Tue, 20 Feb 2007) | 3 lines

 * gui_color_init(): Set spec for GUI_COLOR_DEFAULT to black because it's
   really hardcoded.

------------------------------------------------------------------------
r12889 | cbiere | 2007-02-19 14:52:30 -0500 (Mon, 19 Feb 2007) | 2 lines

 * complete_iconv(): Fixed a couple bugs.

------------------------------------------------------------------------
r12888 | cbiere | 2007-02-18 17:55:48 -0500 (Sun, 18 Feb 2007) | 4 lines

 * Added handling for comments in HTML: <!-- -->
 * Clear the textview when the window is closed/hidden.
 * Modified callback for tags; we'll need this for attribute handling later.

------------------------------------------------------------------------
r12887 | cbiere | 2007-02-18 14:22:37 -0500 (Sun, 18 Feb 2007) | 4 lines

 * Moved loading of the FAQ to main_cb.c.
 * Load the FAQ on demand not on startup.
 * Added option to load HTML data from memory instead of a file.

------------------------------------------------------------------------
r12886 | cbiere | 2007-02-18 13:19:18 -0500 (Sun, 18 Feb 2007) | 2 lines

 * Really disable regressions.

------------------------------------------------------------------------
r12885 | cbiere | 2007-02-18 13:18:20 -0500 (Sun, 18 Feb 2007) | 2 lines

 * Disable regressions again.

------------------------------------------------------------------------
r12884 | cbiere | 2007-02-18 12:09:24 -0500 (Sun, 18 Feb 2007) | 3 lines

 * Simplified code.
 * Changed activity seen to boolean because increasing it is unnecessary.

------------------------------------------------------------------------
r12883 | cbiere | 2007-02-18 09:50:44 -0500 (Sun, 18 Feb 2007) | 3 lines

 * html_output_tag(): Minor correction for that P tag which avoids that
   whitespace before the <p> causes a leading space.

------------------------------------------------------------------------
r12882 | cbiere | 2007-02-18 09:48:25 -0500 (Sun, 18 Feb 2007) | 3 lines

 * render_tag(): Simplified.
 * render_text(): Corrected whitespace handling following a closing tag.

------------------------------------------------------------------------
r12881 | cbiere | 2007-02-18 09:07:07 -0500 (Sun, 18 Feb 2007) | 3 lines

 * Added a simple HTML view to be used by the integrated documentation. At the moment
   it is only used to display the FAQ.

------------------------------------------------------------------------
r12880 | cbiere | 2007-02-18 08:49:04 -0500 (Sun, 18 Feb 2007) | 2 lines

 * Converted macro definitions to enums.

------------------------------------------------------------------------
r12879 | cbiere | 2007-02-18 08:47:04 -0500 (Sun, 18 Feb 2007) | 2 lines

 * array_from_string(): Canonic form.

------------------------------------------------------------------------
r12878 | cbiere | 2007-02-18 08:45:52 -0500 (Sun, 18 Feb 2007) | 2 lines

 * Added array_from_string().

------------------------------------------------------------------------
r12877 | cbiere | 2007-02-18 08:43:41 -0500 (Sun, 18 Feb 2007) | 5 lines

 * complete_iconv(): This was incorrect if the resulting string was longer than 256
   characters (the temporary outbuf buffer) which would cause iconv() to fail
   with E2BIG. Also a possible shift sequence emitted by iconv() after a reset
   was not stored.

------------------------------------------------------------------------
r12876 | cbiere | 2007-02-17 21:23:41 -0500 (Sat, 17 Feb 2007) | 2 lines

 * 771 more items.

------------------------------------------------------------------------
r12875 | cbiere | 2007-02-17 20:05:42 -0500 (Sat, 17 Feb 2007) | 4 lines

 * 637 more items.
 * Removed some redundant comments.
 * Another name filter.

------------------------------------------------------------------------
r12874 | cbiere | 2007-02-16 22:31:47 -0500 (Fri, 16 Feb 2007) | 2 lines

 * More hostiles.

------------------------------------------------------------------------
r12873 | cbiere | 2007-02-16 19:51:17 -0500 (Fri, 16 Feb 2007) | 3 lines

 * shell_exec_node_add(), shell_exec_node_drop(): Allow <addr>:<port> as
   well as <addr><space><port>.

------------------------------------------------------------------------
r12872 | cbiere | 2007-02-16 19:47:33 -0500 (Fri, 16 Feb 2007) | 3 lines

 * string_to_host_or_addr(): Check also the length against MAX_HOSTLEN in
   case of a hostname.

------------------------------------------------------------------------
r12871 | cbiere | 2007-02-16 19:20:56 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Removed duplicated item.

------------------------------------------------------------------------
r12870 | cbiere | 2007-02-16 19:18:42 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Removed duplicate entry.

------------------------------------------------------------------------
r12869 | cbiere | 2007-02-16 17:51:56 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Document "node drop" command.

------------------------------------------------------------------------
r12868 | cbiere | 2007-02-16 17:48:37 -0500 (Fri, 16 Feb 2007) | 3 lines

 * Added --pause-on-crash so that one can attach to the process with a
   debugger in case of a crash.

------------------------------------------------------------------------
r12867 | cbiere | 2007-02-16 13:54:53 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Added a bunch of spam supporters.

------------------------------------------------------------------------
r12866 | cbiere | 2007-02-16 13:11:01 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Try harder.

------------------------------------------------------------------------
r12865 | cbiere | 2007-02-16 12:17:43 -0500 (Fri, 16 Feb 2007) | 2 lines

 * Nice try.

------------------------------------------------------------------------
r12864 | cbiere | 2007-02-16 09:51:59 -0500 (Fri, 16 Feb 2007) | 3 lines

 * Improved handling of command-line option, so that non-handled arguments
   are not ignored but cause an error.

------------------------------------------------------------------------
r12863 | cbiere | 2007-02-15 20:14:30 -0500 (Thu, 15 Feb 2007) | 2 lines

 * More Crappyvision.

------------------------------------------------------------------------
r12862 | cbiere | 2007-02-15 20:11:16 -0500 (Thu, 15 Feb 2007) | 2 lines

 * Now with Macrovision protection.

------------------------------------------------------------------------
r12861 | cbiere | 2007-02-15 17:45:21 -0500 (Thu, 15 Feb 2007) | 2 lines

 * 1978 more items.

------------------------------------------------------------------------
r12860 | cbiere | 2007-02-15 16:30:49 -0500 (Thu, 15 Feb 2007) | 3 lines

 * download_pickup_queued(): Take the download progress of a file into account
   when selecting a file to download from a server.

------------------------------------------------------------------------
r12859 | cbiere | 2007-02-15 15:13:32 -0500 (Thu, 15 Feb 2007) | 2 lines

 * build_search_msg(): Fixed broken SHA-1 searches.

------------------------------------------------------------------------
r12858 | cbiere | 2007-02-15 15:11:59 -0500 (Thu, 15 Feb 2007) | 2 lines

 * huge_sha1_extract32(): Added const-qualifier.

------------------------------------------------------------------------
r12857 | cbiere | 2007-02-15 01:46:02 -0500 (Thu, 15 Feb 2007) | 3 lines

 * Avoid decimal places if the value was not scaled because "0.00 Bytes"
   looks odd and misleading.

------------------------------------------------------------------------
r12856 | cbiere | 2007-02-14 23:46:39 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Added some workarounds against crappy performance of GtkTreeView.

------------------------------------------------------------------------
r12855 | cbiere | 2007-02-14 22:26:49 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r12854 | cbiere | 2007-02-14 21:46:18 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Bye-bye AboveNet.

------------------------------------------------------------------------
r12853 | cbiere | 2007-02-14 18:55:21 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Show always the same amount of decimal places in "pretty" filesizes etc.
   because it looks odd otherwise.

------------------------------------------------------------------------
r12852 | cbiere | 2007-02-14 18:52:19 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Removed now unused variable.

------------------------------------------------------------------------
r12851 | cbiere | 2007-02-14 18:37:46 -0500 (Wed, 14 Feb 2007) | 2 lines

 * 4433 more items.

------------------------------------------------------------------------
r12850 | cbiere | 2007-02-14 17:02:35 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Some make-up.

------------------------------------------------------------------------
r12849 | cbiere | 2007-02-14 16:25:20 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Added comment that all "minspeed" flags are exhausted to ensure we do
   not accidently pick a flag with a value of 0x0001.

------------------------------------------------------------------------
r12848 | cbiere | 2007-02-14 15:52:01 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Use ALWAYS_INLINE for peek_u8() and poke_u8().

------------------------------------------------------------------------
r12847 | cbiere | 2007-02-14 15:17:15 -0500 (Wed, 14 Feb 2007) | 4 lines

 * search_request(): GGEP NP should not be ignored even though we support
   OOB v3. Apparently LimeWire does not use it currently but plans to do
   so in the future.

------------------------------------------------------------------------
r12846 | cbiere | 2007-02-14 15:12:31 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Added VMSG_CHECK_SIZE().
 * Use peek_u8/peek_u8() for consistenc and readability.

------------------------------------------------------------------------
r12845 | cbiere | 2007-02-14 14:18:43 -0500 (Wed, 14 Feb 2007) | 5 lines

 * Removed READ_GUINT*() and WRITE_GUINT_*() macros and replaced all uses
   with peek/poke.
 * Use memcpy() if the host endian matches instead of shift/or because
   memcpy() will be inlined which gains smaller and more efficient code.

------------------------------------------------------------------------
r12844 | cbiere | 2007-02-14 13:57:09 -0500 (Wed, 14 Feb 2007) | 3 lines

 * search_request(): GGEP NP is only for OOB v2, so we can ignore it.
 * Replaced READ_GUINT32() with peek_le16().

------------------------------------------------------------------------
r12843 | cbiere | 2007-02-14 13:04:39 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Added const-qualifiers.
 * Reordered functions to get rid of additional prototypes.

------------------------------------------------------------------------
r12842 | cbiere | 2007-02-14 10:56:16 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Updated handling of GGEP NP again.
 * Added support for LIME/13v1.

------------------------------------------------------------------------
r12841 | cbiere | 2007-02-14 10:54:41 -0500 (Wed, 14 Feb 2007) | 3 lines

 * Added peek_u8().
 * Avoid guint8 because it's no character type.

------------------------------------------------------------------------
r12840 | cbiere | 2007-02-14 09:41:48 -0500 (Wed, 14 Feb 2007) | 2 lines

 * Fixed overlapping ranges again.

------------------------------------------------------------------------
r12839 | cbiere | 2007-02-13 20:25:47 -0500 (Tue, 13 Feb 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12838 | cbiere | 2007-02-13 20:23:08 -0500 (Tue, 13 Feb 2007) | 3 lines

 * search_gui_handle_magnet(): Add an urn:sha1 filter automagically for each
   urn:sha1 search to drop non-matching results.

------------------------------------------------------------------------
r12837 | cbiere | 2007-02-13 20:18:28 -0500 (Tue, 13 Feb 2007) | 2 lines

 * filter_new_sha1_rule(): Allow NULL instead of a filename.

------------------------------------------------------------------------
r12836 | cbiere | 2007-02-13 20:14:46 -0500 (Tue, 13 Feb 2007) | 3 lines

 * ext_payload(): Return "const void *" instead of "char *".
 * Follow-up changes and some polish.

------------------------------------------------------------------------
r12835 | cbiere | 2007-02-13 19:06:38 -0500 (Tue, 13 Feb 2007) | 3 lines

 * search_request(): Fixed potential memory leaks due to missing calls to
   ext_reset() on error.

------------------------------------------------------------------------
r12834 | cbiere | 2007-02-13 17:49:19 -0500 (Tue, 13 Feb 2007) | 2 lines

 * 3328 new items.

------------------------------------------------------------------------
r12833 | cbiere | 2007-02-13 03:25:07 -0500 (Tue, 13 Feb 2007) | 2 lines

 * search_request(): Handle the GGEP payload as unsigned char, not char.

------------------------------------------------------------------------
r12832 | cbiere | 2007-02-13 03:11:49 -0500 (Tue, 13 Feb 2007) | 2 lines

 * search_request(): Updated handling of GGEP "NP".

------------------------------------------------------------------------
r12831 | cbiere | 2007-02-13 03:02:23 -0500 (Tue, 13 Feb 2007) | 3 lines

 * vmsg_send_oob_reply_ack(): Fixed off-by-one which caused a misplaced
   GGEP block.

------------------------------------------------------------------------
r12830 | cbiere | 2007-02-13 02:33:43 -0500 (Tue, 13 Feb 2007) | 2 lines

 * handle_oob_reply_ack(): Fixed minor off-by-one.

------------------------------------------------------------------------
r12829 | cbiere | 2007-02-13 02:32:58 -0500 (Tue, 13 Feb 2007) | 2 lines

 * flush_match(): Check whether the token is non-empty.

------------------------------------------------------------------------
r12828 | cbiere | 2007-02-13 01:53:40 -0500 (Tue, 13 Feb 2007) | 2 lines

 * handle_oob_reply_ind(): There's no GGEP SO to be expected here for OOB v3.

------------------------------------------------------------------------
r12827 | cbiere | 2007-02-13 01:15:28 -0500 (Tue, 13 Feb 2007) | 2 lines

 * build_search_msg(): Be more careful with indicating OOB v3 support.

------------------------------------------------------------------------
r12826 | cbiere | 2007-02-13 00:06:10 -0500 (Tue, 13 Feb 2007) | 2 lines

 * Added ST_GOOD_TOKEN.

------------------------------------------------------------------------
r12825 | cbiere | 2007-02-12 23:51:50 -0500 (Mon, 12 Feb 2007) | 2 lines

 * search_gui_get_route(): Mark results that carried a good token.

------------------------------------------------------------------------
r12824 | cbiere | 2007-02-12 23:49:50 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Added client-side support for OOB v3.

------------------------------------------------------------------------
r12823 | cbiere | 2007-02-12 21:19:49 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Converted table from hex to decimal because the specs don't use hex either.

------------------------------------------------------------------------
r12822 | cbiere | 2007-02-12 21:14:42 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Added server-side support for OOB v3.

------------------------------------------------------------------------
r12821 | cbiere | 2007-02-12 21:06:07 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Added src/lib/array.h.

------------------------------------------------------------------------
r12820 | cbiere | 2007-02-12 19:12:58 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Updated SVN repository location.

------------------------------------------------------------------------
r12819 | cbiere | 2007-02-12 19:00:47 -0500 (Mon, 12 Feb 2007) | 2 lines

 * build_search_msg(): Simplified. Prepared support for future improvements.

------------------------------------------------------------------------
r12818 | cbiere | 2007-02-12 18:32:27 -0500 (Mon, 12 Feb 2007) | 2 lines

 * search_request(): Added support for GGEP H in queries.

------------------------------------------------------------------------
r12817 | cbiere | 2007-02-12 15:44:47 -0500 (Mon, 12 Feb 2007) | 2 lines

 * 4336 more items.

------------------------------------------------------------------------
r12816 | cbiere | 2007-02-12 11:11:41 -0500 (Mon, 12 Feb 2007) | 2 lines

 * Fixed bogon.

------------------------------------------------------------------------
r12815 | cbiere | 2007-02-11 17:05:48 -0500 (Sun, 11 Feb 2007) | 2 lines

 * 5757 more items.

------------------------------------------------------------------------
r12814 | cbiere | 2007-02-11 16:24:00 -0500 (Sun, 11 Feb 2007) | 2 lines

 * More cyber crap.

------------------------------------------------------------------------
r12813 | cbiere | 2007-02-11 15:53:09 -0500 (Sun, 11 Feb 2007) | 2 lines

 * PDF stinks.

------------------------------------------------------------------------
r12812 | cbiere | 2007-02-11 00:49:09 -0500 (Sun, 11 Feb 2007) | 2 lines

 * Updated version provided by Bill Pringlemeir.

------------------------------------------------------------------------
r12811 | cbiere | 2007-02-11 00:34:00 -0500 (Sun, 11 Feb 2007) | 2 lines

 * too_big_for_gnutella(): This was badly broken. Added comment.

------------------------------------------------------------------------
r12810 | cbiere | 2007-02-10 18:06:19 -0500 (Sat, 10 Feb 2007) | 2 lines

 * Lots of documentation provided by Bill Pringlemeir.

------------------------------------------------------------------------
r12809 | rmanfredi | 2007-02-10 16:52:31 -0500 (Sat, 10 Feb 2007) | 2 lines

Updated.

------------------------------------------------------------------------
r12808 | rmanfredi | 2007-02-10 16:46:30 -0500 (Sat, 10 Feb 2007) | 2 lines

Regenerated.

------------------------------------------------------------------------
r12807 | rmanfredi | 2007-02-10 16:37:16 -0500 (Sat, 10 Feb 2007) | 3 lines

Consider leaf nodes without a QRT as "useless" since we don't propage queries
to such nodes.

------------------------------------------------------------------------
r12806 | cbiere | 2007-02-10 14:15:25 -0500 (Sat, 10 Feb 2007) | 2 lines

 * icon_init(): Added tooltip to the status icon.

------------------------------------------------------------------------
r12805 | cbiere | 2007-02-09 15:51:17 -0500 (Fri, 09 Feb 2007) | 2 lines

 * 6700 new items.

------------------------------------------------------------------------
r12804 | cbiere | 2007-02-07 11:22:30 -0500 (Wed, 07 Feb 2007) | 3 lines

 * node_init_outgoing(): Don't use the same *_to_string() function
   for more than one parameter.

------------------------------------------------------------------------
r12803 | cbiere | 2007-02-06 19:36:27 -0500 (Tue, 06 Feb 2007) | 2 lines

 * More fish fodder.

------------------------------------------------------------------------
r12802 | cbiere | 2007-02-06 19:31:16 -0500 (Tue, 06 Feb 2007) | 2 lines

 * The PDFtard has a new address.

------------------------------------------------------------------------
r12801 | cbiere | 2007-02-06 18:28:47 -0500 (Tue, 06 Feb 2007) | 2 lines

 * s/appended/prefixed/

------------------------------------------------------------------------
r12800 | cbiere | 2007-02-06 18:26:39 -0500 (Tue, 06 Feb 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12799 | cbiere | 2007-02-06 18:18:18 -0500 (Tue, 06 Feb 2007) | 2 lines

 * Make sure "ret" is used.

------------------------------------------------------------------------
r12798 | cbiere | 2007-02-06 18:16:53 -0500 (Tue, 06 Feb 2007) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r12797 | cbiere | 2007-02-06 18:16:27 -0500 (Tue, 06 Feb 2007) | 3 lines

 * cast_func_to_gpointer(), cast_gpointer_to_func(): Don't try to trick the
   compiler with an union.

------------------------------------------------------------------------
r12796 | cbiere | 2007-02-06 18:14:06 -0500 (Tue, 06 Feb 2007) | 2 lines

 * hcache_ht_remove(): No union required to prevent aliasing.

------------------------------------------------------------------------
r12795 | cbiere | 2007-02-06 18:07:41 -0500 (Tue, 06 Feb 2007) | 2 lines

 * shell_exec_node_drop(): Use the correct prefix for single-line messages.

------------------------------------------------------------------------
r12794 | cbiere | 2007-02-06 18:07:00 -0500 (Tue, 06 Feb 2007) | 2 lines

 * node_remove_useless_leaf(): Use time_delta_t instead of int.

------------------------------------------------------------------------
r12793 | cbiere | 2007-02-06 18:05:19 -0500 (Tue, 06 Feb 2007) | 3 lines

 * spam_retrieve_from_file(): Load spam.txt first from $GTK_GNUTELLA_DIR
   and fall back to the system-wide location.

------------------------------------------------------------------------
r12792 | cbiere | 2007-02-06 17:53:49 -0500 (Tue, 06 Feb 2007) | 3 lines

 * Removed wrong comment.
 * Added two bozos.

------------------------------------------------------------------------
r12791 | cbiere | 2007-02-06 17:52:39 -0500 (Tue, 06 Feb 2007) | 2 lines

 * Added spam.txt to the installed files.

------------------------------------------------------------------------
r12790 | cbiere | 2007-01-30 17:32:15 -0500 (Tue, 30 Jan 2007) | 2 lines

 * Added 'm' to libswanted.

------------------------------------------------------------------------
r12789 | cbiere | 2007-01-30 16:33:15 -0500 (Tue, 30 Jan 2007) | 2 lines

 * Check for <math.h> and verify whether -lm is necessary for math functions.

------------------------------------------------------------------------
r12788 | cbiere | 2007-01-30 14:58:57 -0500 (Tue, 30 Jan 2007) | 2 lines

 * shell_timer(): Ignore the "remote_shell_timeout" for local shells.

------------------------------------------------------------------------
r12787 | cbiere | 2007-01-30 14:47:32 -0500 (Tue, 30 Jan 2007) | 3 lines

 * shell_exec_node_add(): Don't return 400 on success.
 * shell_exec_node_drop(): Prefix the message with 100~.

------------------------------------------------------------------------
r12786 | cbiere | 2007-01-30 10:18:27 -0500 (Tue, 30 Jan 2007) | 6 lines

 * Fixed bug: cq_time_t is a 64-bit integer and has millisecond resolution
   but time_advance() is for time_t. This causes malfunction of callbacks
   after ~25 days uptime because a 32-bit time_t reaches the maximum value
   causing time to freeze and callbacks to trigger constantly. Reported by
   Meelis Roos.

------------------------------------------------------------------------
r12785 | cbiere | 2007-01-29 03:09:20 -0500 (Mon, 29 Jan 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12784 | cbiere | 2007-01-29 03:08:47 -0500 (Mon, 29 Jan 2007) | 2 lines

 * FreeBSD doesn't declare setproctitle() in <stdlib.h> unlike NetBSD.

------------------------------------------------------------------------
r12783 | cbiere | 2007-01-29 02:56:18 -0500 (Mon, 29 Jan 2007) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12782 | cbiere | 2007-01-29 02:54:30 -0500 (Mon, 29 Jan 2007) | 2 lines

 * Added #include <sys/types.h>; required on FreeBSD for most "*_t" types.

------------------------------------------------------------------------
r12781 | cbiere | 2007-01-28 16:38:10 -0500 (Sun, 28 Jan 2007) | 2 lines

 * get_bind_addr(): Fixed broken support to bind to an enforced IP address.

------------------------------------------------------------------------
r12780 | cbiere | 2007-01-27 07:21:54 -0500 (Sat, 27 Jan 2007) | 6 lines

 * Added MIN_INT_VAL().
 * MAX_INT_VAL():
   * Separated some code into MAX_INT_VAL_STEP() for readability.
   * Compare with 1 instead of 0 to avoid a GCC warning if the integer type
     is unsigned. Thanks to Felix von Leitner for this trick.

------------------------------------------------------------------------
r12779 | cbiere | 2007-01-27 05:47:55 -0500 (Sat, 27 Jan 2007) | 2 lines

 * Use unsigned as type for the bitfields. This seems to work even on FreeBSD.

------------------------------------------------------------------------
r12778 | cbiere | 2007-01-27 05:42:33 -0500 (Sat, 27 Jan 2007) | 5 lines

 * struct shell_buf: Don't use bitfields. There's a apparently a bug in
   FreeBSD 4.x or its GCC affecting bitfields causing the shell to hang
   indefinitely because sb->writable is always 0 despite being set to 1
   after poll() returns with POLLOUT for the socket.

------------------------------------------------------------------------
r12777 | cbiere | 2007-01-24 22:12:33 -0500 (Wed, 24 Jan 2007) | 2 lines

 * search_request(): Handle GGEP NP in queries.

------------------------------------------------------------------------
r12776 | cbiere | 2007-01-24 22:09:23 -0500 (Wed, 24 Jan 2007) | 2 lines

 * Added some GGEP IDs.

------------------------------------------------------------------------
r12775 | cbiere | 2007-01-24 22:05:45 -0500 (Wed, 24 Jan 2007) | 2 lines

 * Fixed pendatic const warning. GCC 4.3 seems pickier about const.

------------------------------------------------------------------------
r12774 | cbiere | 2007-01-24 22:04:37 -0500 (Wed, 24 Jan 2007) | 2 lines

 * host_addr_to_name(): Use socket_addr_get_const_sockaddr() instead.

------------------------------------------------------------------------
r12773 | cbiere | 2007-01-24 22:03:12 -0500 (Wed, 24 Jan 2007) | 2 lines

 * RAZB is Raza beta not 2.0.

------------------------------------------------------------------------
r12772 | cbiere | 2007-01-24 22:00:34 -0500 (Wed, 24 Jan 2007) | 2 lines

 * Converted to trylink.

------------------------------------------------------------------------
r12771 | cbiere | 2007-01-24 21:50:02 -0500 (Wed, 24 Jan 2007) | 4 lines

 * Rearranged.
 * Added fix by Bill Pringlemeir that avoids compiling with flags for
   SQLite when it is actually disabled.

------------------------------------------------------------------------
r12770 | cbiere | 2007-01-24 21:43:06 -0500 (Wed, 24 Jan 2007) | 4 lines

 * idtable_is_id_used(): Removed G_INLINE_FUNC because this function accesses
   "a modifiable object with static storage duration" which is illegal for
   non-static inline functions.

------------------------------------------------------------------------
r12769 | cbiere | 2007-01-24 21:34:45 -0500 (Wed, 24 Jan 2007) | 2 lines

 * Regenerated with some fixes to dist.

------------------------------------------------------------------------
r12768 | cbiere | 2007-01-24 21:16:13 -0500 (Wed, 24 Jan 2007) | 2 lines

 * Fixed compiler warning in socket_addr_get_sockaddr() (GCC 4.3 complains).

------------------------------------------------------------------------
r12767 | rmanfredi | 2007-01-20 07:59:04 -0500 (Sat, 20 Jan 2007) | 2 lines

Prevent spurious leak notifications at exit time for TX and RX stacks.

------------------------------------------------------------------------
r12766 | cbiere | 2007-01-20 07:38:12 -0500 (Sat, 20 Jan 2007) | 2 lines

 * Added socket_free_buffer() as counter-part for socket_alloc_buffer().

------------------------------------------------------------------------
r12765 | cbiere | 2007-01-18 16:40:58 -0500 (Thu, 18 Jan 2007) | 7 lines

 * host_addr_is_routable(): Return FALSE for NET_TYPE_LOCAL and NET_TYPE_NONE
   instead of bailing out.
 * is_private_addr():
   * Check also for IPv4-mapped private addresses.
   * Consider link- and site-local as private too.
   * Return TRUE for NET_TYPE_LOCAL just in case.

------------------------------------------------------------------------
r12764 | cbiere | 2007-01-18 16:38:03 -0500 (Thu, 18 Jan 2007) | 3 lines

 * is_local_addr(): Only check for our own and private addresses but don't
   consider all addresses matching own/24 as local.

------------------------------------------------------------------------
r12763 | cbiere | 2007-01-17 17:02:27 -0500 (Wed, 17 Jan 2007) | 2 lines

 * 807 more items.

------------------------------------------------------------------------
r12762 | cbiere | 2007-01-16 11:26:56 -0500 (Tue, 16 Jan 2007) | 9 lines

 * src/core/nodes.[ch]:
   * Added node_remove_by_addr(). Patch by Bill Pringlemeir.
 * src/core/shell.c:
   * Added "node drop" command to the shell. Patch by Bill Pringlemeir.
   * Set sh->msg to "Malformed command" as default in shell_exec() instead
     of each single command implementation.
   * Splitted shell_exec_node() into shell_exec_node_add() and
     shell_exec_node_drop().

------------------------------------------------------------------------
r12761 | cbiere | 2007-01-16 11:07:30 -0500 (Tue, 16 Jan 2007) | 2 lines

 * Always include "common.h" and don't include <glib.h> explicitely.

------------------------------------------------------------------------
r12760 | cbiere | 2007-01-16 11:01:54 -0500 (Tue, 16 Jan 2007) | 2 lines

 * enum net_type: Don't put a comma after the last item.

------------------------------------------------------------------------
r12759 | cbiere | 2007-01-15 13:48:51 -0500 (Mon, 15 Jan 2007) | 2 lines

 * Use "struct download *" instead of "gpointer".

------------------------------------------------------------------------
r12758 | cbiere | 2007-01-15 13:45:06 -0500 (Mon, 15 Jan 2007) | 2 lines

 * Added prototype of download_pause().

------------------------------------------------------------------------
r12757 | cbiere | 2007-01-15 13:42:13 -0500 (Mon, 15 Jan 2007) | 5 lines

 * vmsg_send_node_info_ans(), build_pong_msg(): Make sure uptime[] is
   sufficiently large for any kind of type.
 * ggept_du_encode(), ggept_lf_encode(), ggept_ct_encode(): Return an unsigned
   int because they never return a negative value.

------------------------------------------------------------------------
r12756 | cbiere | 2007-01-13 06:15:12 -0500 (Sat, 13 Jan 2007) | 3 lines

 * get_results_set(): Check the filename only if it's not already marked as
   spam anyway for slightly better performance.

------------------------------------------------------------------------
r12755 | cbiere | 2007-01-13 06:13:02 -0500 (Sat, 13 Jan 2007) | 7 lines

 * add_file(): Suppress negative timestamps.
 * vmsg_send_node_info_ans(), build_pong_msg(): Make sure uptime[] is
   sufficiently large for any kind of type.
 * ggept_du_encode(), ggept_lf_encode(), ggept_ct_encode(): Return an unsigned
   int because they never return a negative value which wouldn't make sense
   anyway.

------------------------------------------------------------------------
r12754 | cbiere | 2007-01-13 03:50:29 -0500 (Sat, 13 Jan 2007) | 2 lines

 * [GTK2] Added support for pausing downloads.

------------------------------------------------------------------------
r12753 | cbiere | 2007-01-11 21:53:16 -0500 (Thu, 11 Jan 2007) | 2 lines

 * [GTK2] Added support for pausing downloads.

------------------------------------------------------------------------
r12752 | cbiere | 2007-01-11 19:43:26 -0500 (Thu, 11 Jan 2007) | 3 lines

 * Added "PAUS" tag to store and restore the FI_F_PAUSED flags for
   paused downloads.

------------------------------------------------------------------------
r12751 | cbiere | 2007-01-11 19:21:05 -0500 (Thu, 11 Jan 2007) | 3 lines

 * Converted FI_F_* from macro definitions to enums.
 * Added flags DL_F_PAUSED and FI_F_PAUSED.

------------------------------------------------------------------------
r12750 | cbiere | 2007-01-11 15:50:25 -0500 (Thu, 11 Jan 2007) | 2 lines

 * Updated boot_hosts.

------------------------------------------------------------------------
r12749 | cbiere | 2007-01-11 04:15:48 -0500 (Thu, 11 Jan 2007) | 3 lines

 * node_is_now_connected(): Check whether the remote node is an ultrapeer just
   as the comment says. node_send_qrt() asserts this.

------------------------------------------------------------------------
r12748 | cbiere | 2007-01-10 04:17:43 -0500 (Wed, 10 Jan 2007) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12747 | cbiere | 2007-01-10 04:15:07 -0500 (Wed, 10 Jan 2007) | 3 lines

 * ggept_du_extract(), ggept_ct_extract(): Fixed compiler warnings; len is
   already unsigned, no need to check for below zero.

------------------------------------------------------------------------
r12746 | cbiere | 2007-01-10 04:12:47 -0500 (Wed, 10 Jan 2007) | 2 lines

 * add_file(): Fixed typo.

------------------------------------------------------------------------
r12745 | cbiere | 2007-01-10 04:02:29 -0500 (Wed, 10 Jan 2007) | 5 lines

 * add_file():
   * Don't call shared_file_modification_time() twice.
   * Rather check for (time_t) -1 than zero because the latter is still a
     valid timestamp.

------------------------------------------------------------------------
r12744 | cbiere | 2007-01-10 03:55:29 -0500 (Wed, 10 Jan 2007) | 6 lines

 * search_results_handle_trailer(), get_results_set(): Removed parameter
   "validate_only" because in practice this is virtually never TRUE, so
   it just adds complexity for no gain. It also didn't take into account
   the we want to filter spam. So avoiding unnecessary work is more difficult
   than the current check anyway.

------------------------------------------------------------------------
r12743 | cbiere | 2007-01-10 03:51:34 -0500 (Wed, 10 Jan 2007) | 7 lines

 * add_file():
   * Corrected assertion; "len" may be zero if the timestamp was zero.
   * Corrected buffer size: The timestamp is casted to uint64_t so it might
     be wider than time_t.
 * ggept_du_extract(), ggept_ct_extract(): Allow a zero-sized payload because
   a zero is encoded this way. We only disallow this for GGEP LF.

------------------------------------------------------------------------
r12742 | cbiere | 2007-01-09 09:00:42 -0500 (Tue, 09 Jan 2007) | 4 lines

 * Moved sl_names into spam_lut.
 * spam_close(): Free the regex list. This is especially important as this
   happens on each reload of spam.txt.

------------------------------------------------------------------------
r12741 | cbiere | 2007-01-08 22:25:25 -0500 (Mon, 08 Jan 2007) | 2 lines

 * Updated ST_SPAM.

------------------------------------------------------------------------
r12740 | cbiere | 2007-01-08 21:01:21 -0500 (Mon, 08 Jan 2007) | 2 lines

 * spam_add_sha1(): Fixed minor const-related compiler warning.

------------------------------------------------------------------------
r12739 | cbiere | 2007-01-08 20:23:37 -0500 (Mon, 08 Jan 2007) | 2 lines

 * Regenerated without left-over debug stuff.

------------------------------------------------------------------------
r12738 | cbiere | 2007-01-08 20:15:56 -0500 (Mon, 08 Jan 2007) | 2 lines

 * Regenerated with Trylink.U patch.

------------------------------------------------------------------------
r12737 | cbiere | 2007-01-08 20:13:39 -0500 (Mon, 08 Jan 2007) | 2 lines

 * Removed dist modules which are already in dist itself now.

------------------------------------------------------------------------
r12736 | cbiere | 2007-01-08 20:11:02 -0500 (Mon, 08 Jan 2007) | 2 lines

 * General clean-up of the hashlist API and the implementation.

------------------------------------------------------------------------
r12735 | cbiere | 2007-01-08 20:02:26 -0500 (Mon, 08 Jan 2007) | 3 lines

 * 75 more SHA1 bans.
 * 2 filename patterns.

------------------------------------------------------------------------
r12734 | cbiere | 2007-01-08 19:56:54 -0500 (Mon, 08 Jan 2007) | 2 lines

 * Extended spam filter with support for filtering by filename.

------------------------------------------------------------------------
r12733 | cbiere | 2007-01-08 19:47:14 -0500 (Mon, 08 Jan 2007) | 2 lines

 * bsched_source_add(): Added assertion check.

------------------------------------------------------------------------
r12732 | cbiere | 2007-01-08 19:44:55 -0500 (Mon, 08 Jan 2007) | 3 lines

 * Added sha1_t. In the future this should be used instead of a plain
   "gchar *" pointer.

------------------------------------------------------------------------
r12731 | cbiere | 2007-01-08 18:10:04 -0500 (Mon, 08 Jan 2007) | 3 lines

 * search_gui_set_current_search(): Prevent jumping when selecting a search.
   Fix provided by Matthew Lye.

------------------------------------------------------------------------
r12730 | cbiere | 2007-01-07 04:06:09 -0500 (Sun, 07 Jan 2007) | 2 lines

 * node_timer(): Sent also a PING if the handshake gets a timeout.

------------------------------------------------------------------------
r12729 | cbiere | 2007-01-06 19:11:35 -0500 (Sat, 06 Jan 2007) | 3 lines

 * err_header_read_error(): Sent them a PING if we get a connection reset
   during the handshake phase.

------------------------------------------------------------------------
r12728 | cbiere | 2007-01-06 16:24:02 -0500 (Sat, 06 Jan 2007) | 2 lines

 * Update for French translation provided by FlashCode.

------------------------------------------------------------------------
r12727 | cbiere | 2007-01-05 13:14:24 -0500 (Fri, 05 Jan 2007) | 2 lines

 * Minor comment fix; use the proper terminology.

------------------------------------------------------------------------
r12726 | cbiere | 2007-01-05 13:12:43 -0500 (Fri, 05 Jan 2007) | 4 lines

 * download_browse_start(): Removed parameter "name". Let the function create
   this itself.
 * err_header_read_error(): Workaround for broken hardware.

------------------------------------------------------------------------
r12725 | cbiere | 2007-01-05 13:02:32 -0500 (Fri, 05 Jan 2007) | 3 lines

 * Added more download flags.
 * Changed DL_F_FOOBAR to DLS_A_FOOBAR because this is a server property.

------------------------------------------------------------------------
r12724 | cbiere | 2007-01-05 10:50:06 -0500 (Fri, 05 Jan 2007) | 2 lines

 * Added host_port_to_string().

------------------------------------------------------------------------
r12723 | cbiere | 2007-01-05 06:46:34 -0500 (Fri, 05 Jan 2007) | 2 lines

 * create_download(): Do not atomize the sanitized name twice.

------------------------------------------------------------------------
r12722 | cbiere | 2007-01-05 06:39:44 -0500 (Fri, 05 Jan 2007) | 4 lines

 * Renamed file_info_get_browse() to file_info_get_transient().
 * download_browse_start(), download_auto_new(), download_retrieve():
   create_download() is responsible for atomizing the filename now.

------------------------------------------------------------------------
r12721 | cbiere | 2007-01-05 06:21:41 -0500 (Fri, 05 Jan 2007) | 5 lines

 * create_download():
   * Always atomize the filename because everything else is insane.
   * The atom_str_free() was probably meant to be conditional.
 * err_header_read_error(): Mark download as foobar on connection reset.

------------------------------------------------------------------------
r12720 | cbiere | 2007-01-05 05:24:28 -0500 (Fri, 05 Jan 2007) | 11 lines

 * src/core/downloads.c: Added download_connected() for clarity.
 * src/core/shell.c:
   * Removed unused definition CMD_MAX_SIZE.
   * get_download_status_string(): Handle GTA_DL_INVALID.
   * shell_destroy(): Use g_message because it's nothing unusual.
   * shell_close(): Changed back to simpler version which is fine here.
 * src/if/core/downloads.h:
   * Do not assign explicit values to GTA_DL_* enums because the exact
     values are irrelevant.
   * Converted DL_F_* and DL_A_* from macro definitions to enums.

------------------------------------------------------------------------
r12719 | cbiere | 2007-01-05 03:11:35 -0500 (Fri, 05 Jan 2007) | 7 lines

 * Renamed send_push_request() to download_send_push_request() and simplified
   prototype.
 * download_send_push_request(): Send a PUSH directly to the node over UDP
   if possible too.
 * node_udp_get_addr_port(): Check udp_active() so that the caller does not
   have to check this.

------------------------------------------------------------------------
r12718 | cbiere | 2007-01-05 01:19:16 -0500 (Fri, 05 Jan 2007) | 4 lines

 * Added "/sbin /usr/sbin /etc" to the list mainly for "chown". The latter
   seems historic. Good users don't have the former two in their PATH.
   chown is a privilege not a right.

------------------------------------------------------------------------
r12717 | cbiere | 2007-01-04 22:22:26 -0500 (Thu, 04 Jan 2007) | 4 lines

 * Removed modification of PATH from Head.U. If at all this should happen on
   a tool-by-tool basis. Otherwise, if tool X is not in my PATH, I definitely
   do not want Configure to pick it up.

------------------------------------------------------------------------
r12716 | cbiere | 2007-01-04 21:58:11 -0500 (Thu, 04 Jan 2007) | 2 lines

 * Removed outdated comment as suggested by Bill Pringlemeir.

------------------------------------------------------------------------
r12715 | cbiere | 2007-01-03 21:49:09 -0500 (Wed, 03 Jan 2007) | 2 lines

 * +3.

------------------------------------------------------------------------
r12714 | cbiere | 2007-01-03 21:39:35 -0500 (Wed, 03 Jan 2007) | 3 lines

 * node_timer(): Show a log messages in any case when a node is dumped due
   to a security violation.

------------------------------------------------------------------------
r12713 | cbiere | 2007-01-03 20:50:20 -0500 (Wed, 03 Jan 2007) | 2 lines

 * do_open(): Corrected '>' to '>='.

------------------------------------------------------------------------
r12712 | cbiere | 2007-01-03 19:14:16 -0500 (Wed, 03 Jan 2007) | 6 lines

 * search_gui_new_search(): Added comment regarding a recent "API change".
 * search_gui_new_search_entered():
   * Explicitely check "search" against NULL because this may legally happen
     also on success.
   * Added some extra assertions, just in case.

------------------------------------------------------------------------
r12711 | cbiere | 2007-01-03 19:11:18 -0500 (Wed, 03 Jan 2007) | 2 lines

 * Include lib/file.h for file_open().

------------------------------------------------------------------------
r12710 | cbiere | 2007-01-03 18:58:58 -0500 (Wed, 03 Jan 2007) | 3 lines

 * Added client-side support for GGEP CT. The create time for each search
   result is shown in yet another column.

------------------------------------------------------------------------
r12709 | cbiere | 2007-01-03 18:32:41 -0500 (Wed, 03 Jan 2007) | 5 lines

 * Added socket_enable_accept().
 * socket_accept(): Disable accept() on EMFILE/ENFILE to prevent spinning
   which would make it almost completely unresponsive.
 * socket_timer(): Re-enable accept() periodically from here.

------------------------------------------------------------------------
r12708 | cbiere | 2007-01-03 18:28:47 -0500 (Wed, 03 Jan 2007) | 3 lines

 * add_file(): Add GGEP CT to query hits. For now just use the modification
   time instead of the create time since that's what we already have.

------------------------------------------------------------------------
r12707 | cbiere | 2007-01-03 15:24:47 -0500 (Wed, 03 Jan 2007) | 2 lines

 * Added ggept_ct_extract() and ggept_ct_encode() for GGEP CT.

------------------------------------------------------------------------
r12706 | cbiere | 2007-01-03 14:11:39 -0500 (Wed, 03 Jan 2007) | 2 lines

 * Moved some code to ggep_vlint_decode() to prevent duplication.

------------------------------------------------------------------------
r12705 | cbiere | 2007-01-03 09:19:36 -0500 (Wed, 03 Jan 2007) | 3 lines

 * Added need_get_non_stdio_fd() which is called the first time
   get_non_stdio_fd() to detect whether this workaround is required.

------------------------------------------------------------------------
r12704 | cbiere | 2007-01-03 07:23:06 -0500 (Wed, 03 Jan 2007) | 2 lines

 * Added get_non_stdio_fd() as workaround for the stdio issue on Solaris.

------------------------------------------------------------------------
r12703 | cbiere | 2007-01-03 05:47:04 -0500 (Wed, 03 Jan 2007) | 10 lines

 * Renamed all 'sd' to 'fd' the ubiquitous variable name for file descriptors.
 * socket_accept():
   * Set FD_CLOEXEC here too because it might not be inherited from the
     listening socket in all implementations.
   * Slightly rearranged code to eliminate an unnecessary goto.
 * socket_create_and_bind():
   * Added comments.
   * Set O_NONBLOCK and FD_CLOEXEC from here because we always want these
     anyway.

------------------------------------------------------------------------
r12702 | cbiere | 2007-01-03 04:20:00 -0500 (Wed, 03 Jan 2007) | 2 lines

 * 57 more items.

------------------------------------------------------------------------
r12701 | cbiere | 2007-01-03 03:20:20 -0500 (Wed, 03 Jan 2007) | 6 lines

 * Removed assertions "!IS_PROCESSING(sh)" because this is not true any longer.
   We might very well read and handle the next command before the output of
   the former has been flushed. Reported by Matthew Lye.
 * Renamed IS_PROCESSING() to shell_has_pending_output().
 * shell_write(): Reordered code so that the variable "writing" is unnecessary.

------------------------------------------------------------------------
r12700 | cbiere | 2007-01-02 18:09:02 -0500 (Tue, 02 Jan 2007) | 4 lines

 * Don't check for '-lz' to decide whether zlib is available, just check
   the proper flags.
 * Inserted empty lines for readability.

------------------------------------------------------------------------
r12699 | cbiere | 2007-01-02 17:51:13 -0500 (Tue, 02 Jan 2007) | 3 lines

 * Added check for locale_charset() because the existence of libcharset.h
   does not guarantee code using locale_charset() actually compiles and links.

------------------------------------------------------------------------
r12698 | cbiere | 2007-01-02 14:47:18 -0500 (Tue, 02 Jan 2007) | 6 lines

 * Renamed host_addr_get_ipv6() to host_addr_peek_ipv6().
 * Added host_addr_peek_ipv4().
 * gnet_host_vec_get(): Fixed byte order issue regarding the port which had
   been there for a couple of days and caused non-working alt-locs or push
   proxies.

------------------------------------------------------------------------
r12697 | cbiere | 2007-01-02 14:28:26 -0500 (Tue, 02 Jan 2007) | 3 lines

 * Reverted changes in previous commit which aren't ready for prime time
   and were accidently committed.

------------------------------------------------------------------------
r12696 | cbiere | 2007-01-02 13:41:33 -0500 (Tue, 02 Jan 2007) | 3 lines

 * main_gui_gtkrc_init(): Don't try to parse ./gtkrc. That looks more like
   a bug than a feature.

------------------------------------------------------------------------
r12695 | cbiere | 2007-01-02 12:41:22 -0500 (Tue, 02 Jan 2007) | 2 lines

 * Emit GGEP H unconditionally.

------------------------------------------------------------------------
r12694 | cbiere | 2007-01-01 13:55:07 -0500 (Mon, 01 Jan 2007) | 7 lines

 * shell_token_end(): Simplified.
 * shell_exec(): Handle parsing of the command line instead of leaving this up
   to each command and pass the arguments as "argc" and "argv" so that each
   command can handle them like a main() routine would.
 * Removed "enum shell_cmd" and added shell_cmd_get_handler() which uses a
   lookup table instead.

------------------------------------------------------------------------
r12693 | cbiere | 2007-01-01 08:23:14 -0500 (Mon, 01 Jan 2007) | 12 lines

 * Added base16_decode() and base16_encode().
 * Added SHA1_BASE16_SIZE.
 * Moved hex_digit() from misc.c to misc.h
 * Added skip_ascii_alnum().
 * Added search_gui_handle_sha1() to handle the "sha1:" prefix.
 * search_gui_handle_query():
   * Added support for searches prefix with "sha1:" for searching by
     a conventional hexadecimal (base16) encoded SHA-1 instead of urn:sha1.
   * Consider all queries starting with "^[a-z0-9]*:" special searches
     and reject unknown prefixes so that the behaviour is kept consistent
     for the future.

------------------------------------------------------------------------
r12692 | rmanfredi | 2006-12-30 16:25:46 -0500 (Sat, 30 Dec 2006) | 2 lines

Bumped date, due to mq bug fix.

------------------------------------------------------------------------
r12691 | rmanfredi | 2006-12-29 17:16:38 -0500 (Fri, 29 Dec 2006) | 3 lines

Watch out for early error conditions in putq() and bail out without flushing
pending messages if one of those conditions occurred.

------------------------------------------------------------------------
r12690 | rmanfredi | 2006-12-29 08:29:29 -0500 (Fri, 29 Dec 2006) | 3 lines

Handle re-entrant putq() calls correctly by deferring messages received during
a re-entrant condition and stuffing them back afterwards.

------------------------------------------------------------------------
r12689 | rmanfredi | 2006-12-29 08:26:50 -0500 (Fri, 29 Dec 2006) | 2 lines

Added slist_shift() -- named after Perl's shift() operator.

------------------------------------------------------------------------
r12688 | cbiere | 2006-12-27 23:03:07 -0500 (Wed, 27 Dec 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r12687 | cbiere | 2006-12-27 19:42:02 -0500 (Wed, 27 Dec 2006) | 2 lines

 * Another spmmr.

------------------------------------------------------------------------
r12686 | cbiere | 2006-12-27 18:48:54 -0500 (Wed, 27 Dec 2006) | 3 lines

 * search_gui_set_details(): Clear the XML field if there is no XML data
   instead leaving it as is.

------------------------------------------------------------------------
r12685 | cbiere | 2006-12-27 17:22:02 -0500 (Wed, 27 Dec 2006) | 2 lines

 * 1404 more items.

------------------------------------------------------------------------
r12684 | rmanfredi | 2006-12-27 05:36:33 -0500 (Wed, 27 Dec 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r12683 | rmanfredi | 2006-12-27 05:36:13 -0500 (Wed, 27 Dec 2006) | 2 lines

Use new InstallProgramNoStrip() rule for installing GTKG.

------------------------------------------------------------------------
r12682 | cbiere | 2006-12-26 18:39:51 -0500 (Tue, 26 Dec 2006) | 2 lines

 * display_metric_units_changed(): Update the checkbutton too.

------------------------------------------------------------------------
r12681 | cbiere | 2006-12-26 17:26:20 -0500 (Tue, 26 Dec 2006) | 4 lines

 * Configure has absolutely no business to pick up anything from /usr/local
   and such. Otherwise we can just add -I*/*/*. This exactly why pkg-config
   and such exist.

------------------------------------------------------------------------
r12680 | cbiere | 2006-12-26 16:31:51 -0500 (Tue, 26 Dec 2006) | 3 lines

 * Change zdump_used to accommodate updated zone structures. This is only
   active when the TRACK_ZALLOC define is used. [Patch by Bill Pringlemeir]

------------------------------------------------------------------------
r12679 | cbiere | 2006-12-26 15:10:28 -0500 (Tue, 26 Dec 2006) | 3 lines

 * Removed unused property "download_buffer_read_ahead". The description
   did not make any sense anyway.

------------------------------------------------------------------------
r12678 | cbiere | 2006-12-26 14:25:27 -0500 (Tue, 26 Dec 2006) | 2 lines

 * Removed overlapping ranges.

------------------------------------------------------------------------
r12677 | cbiere | 2006-12-25 05:51:39 -0500 (Mon, 25 Dec 2006) | 3 lines

 * check_dev_poll(): If DP_POLL picked up events, reset the timeout to 0.
   We don't want to delay them.

------------------------------------------------------------------------
r12676 | cbiere | 2006-12-25 05:39:35 -0500 (Mon, 25 Dec 2006) | 4 lines

 * pmsg_slist_to_iovec():
   * Fixed bug in previous commit.
   * There is no need to call slist_iter_has_next().

------------------------------------------------------------------------
r12675 | cbiere | 2006-12-25 05:26:48 -0500 (Mon, 25 Dec 2006) | 2 lines

 * Fixed compiler warnings.

------------------------------------------------------------------------
r12674 | cbiere | 2006-12-25 05:23:41 -0500 (Mon, 25 Dec 2006) | 3 lines

 * pmsg_slist_to_iovec(): Limit the amount of items to MAX_IOV_COUNT so that
   we don't have to handle EINVAL from writev() later otherwise.

------------------------------------------------------------------------
r12673 | cbiere | 2006-12-25 04:29:52 -0500 (Mon, 25 Dec 2006) | 12 lines

 * search_gui_new_search_entered(): Clear the search entry here instead
   in search_gui_new_search_full() because it should not be cleared if the
   search was added through the shell or a magnet using drag & drop.
 * search_gui_new_search_full(): Return TRUE also if no search was created
   unless there really was an error and set "search" to NULL because magnets
   are handled here too which may be handled successfully without creating
   a search.
 * xml_to_search(): The return value of search_gui_new_search_full() and
   "search" weren't checked. This could cause a crash on startup if
   searches.xml was corrupted. "search" is now guaranteed to be NULL on
   error, so we don't need to check the return value.

------------------------------------------------------------------------
r12672 | cbiere | 2006-12-25 03:09:01 -0500 (Mon, 25 Dec 2006) | 3 lines

 * Moved code handling pmsg_t lists to pmsg.c.
 * shell_write_data(): Use writev() instead of sending single chunks.

------------------------------------------------------------------------
r12671 | cbiere | 2006-12-25 01:47:26 -0500 (Mon, 25 Dec 2006) | 3 lines

 * shell_write(): Allocate at least a page so that we can coalesce multiple
   chunks into a buffer before sending.

------------------------------------------------------------------------
r12670 | cbiere | 2006-12-25 00:58:58 -0500 (Mon, 25 Dec 2006) | 2 lines

 * host_addr_get_interface_addrs(): Fixed "unused parameter" warning.

------------------------------------------------------------------------
r12669 | cbiere | 2006-12-25 00:44:24 -0500 (Mon, 25 Dec 2006) | 2 lines

 * Hide recursion warnings unless debugging.

------------------------------------------------------------------------
r12668 | cbiere | 2006-12-24 23:36:08 -0500 (Sun, 24 Dec 2006) | 3 lines

 * Extended spammer range.
 * Removed some dynamic addresses.

------------------------------------------------------------------------
r12667 | cbiere | 2006-12-24 22:56:21 -0500 (Sun, 24 Dec 2006) | 2 lines

 * Fixed thinko.

------------------------------------------------------------------------
r12666 | cbiere | 2006-12-24 21:53:51 -0500 (Sun, 24 Dec 2006) | 2 lines

 * Updated prototype.

------------------------------------------------------------------------
r12665 | cbiere | 2006-12-24 21:47:21 -0500 (Sun, 24 Dec 2006) | 3 lines

 * Make the search history (more or less) case-sensitive. It's still odd but
   less annoying.

------------------------------------------------------------------------
r12664 | cbiere | 2006-12-24 21:40:12 -0500 (Sun, 24 Dec 2006) | 3 lines

 * on_tree_view_search_results_click_column(): Fixed prototype; this callback
   is not supposed to return anything.

------------------------------------------------------------------------
r12663 | cbiere | 2006-12-24 21:34:01 -0500 (Sun, 24 Dec 2006) | 2 lines

 * Synchronize menu and internal list also when sorting the search list.

------------------------------------------------------------------------
r12662 | cbiere | 2006-12-24 21:24:15 -0500 (Sun, 24 Dec 2006) | 2 lines

 * Added missing SOCKER_CFLAGS.

------------------------------------------------------------------------
r12661 | cbiere | 2006-12-23 15:11:24 -0500 (Sat, 23 Dec 2006) | 4 lines

 * search_gui_init(): Allow reordering of the search list and catch the
   "row-deleted" event to sync the "searches" list as well as the popup menu
   if the search list is modified (by drag & drop).

------------------------------------------------------------------------
r12660 | cbiere | 2006-12-23 14:05:46 -0500 (Sat, 23 Dec 2006) | 4 lines

 * search_gui_init(): Allow reordering of the search list and catch the
   "row-move" event to sync the "searches" list as well as the popup menu
   if the search list is modified (by drag & drop).

------------------------------------------------------------------------
r12659 | cbiere | 2006-12-23 09:10:15 -0500 (Sat, 23 Dec 2006) | 3 lines

 * search_gui_set_current_search(): Highlight in the currently selected
   row of the search list and scroll to it.

------------------------------------------------------------------------
r12658 | cbiere | 2006-12-23 03:59:16 -0500 (Sat, 23 Dec 2006) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r12657 | cbiere | 2006-12-23 03:52:41 -0500 (Sat, 23 Dec 2006) | 3 lines

 * free_proxies(): Tolerate an empty proxy list instead of checking this
   before each call of this function.

------------------------------------------------------------------------
r12656 | cbiere | 2006-12-23 03:41:46 -0500 (Sat, 23 Dec 2006) | 2 lines

 * download_selection_of_ctree(): Removed unnecessary check.

------------------------------------------------------------------------
r12655 | cbiere | 2006-12-23 03:40:47 -0500 (Sat, 23 Dec 2006) | 4 lines

 * Changed gnet_host_vec_t so that we can still mix IPv4 and IPv6 addresses
   but don't have as much overhead on average.
 * Added gnet_host_vec_alloc(), gnet_host_vec_free(), gnet_host_vec_copy().

------------------------------------------------------------------------
r12654 | cbiere | 2006-12-23 03:33:27 -0500 (Sat, 23 Dec 2006) | 2 lines

 * ext_huge_parse(): Fixed off-by-one in previous commit.

------------------------------------------------------------------------
r12653 | cbiere | 2006-12-23 02:56:21 -0500 (Sat, 23 Dec 2006) | 3 lines

 * search_gui_set_details(): Show the optional hostname after the IP address
   instead of hiding the IP address.

------------------------------------------------------------------------
r12652 | cbiere | 2006-12-23 00:58:31 -0500 (Sat, 23 Dec 2006) | 3 lines

 * node_fill_info(): Always use our listen address and port for the pseudo
   UDP nodes because everything else is just confusing.

------------------------------------------------------------------------
r12651 | cbiere | 2006-12-23 00:33:20 -0500 (Sat, 23 Dec 2006) | 3 lines

 * search_gui_get_magnet(): Add the alternate locations instead of the
   set address multiple times.

------------------------------------------------------------------------
r12650 | cbiere | 2006-12-23 00:09:52 -0500 (Sat, 23 Dec 2006) | 3 lines

 * get_results_set(): Moved code for handling the trailer data to separate
   function search_results_handle_trailer() for readability.

------------------------------------------------------------------------
r12649 | cbiere | 2006-12-23 00:05:53 -0500 (Sat, 23 Dec 2006) | 3 lines

 * Added const-qualifiers.
 * ext_huge_parse(): Do not modify the payload temporarily.

------------------------------------------------------------------------
r12648 | cbiere | 2006-12-22 23:58:29 -0500 (Fri, 22 Dec 2006) | 3 lines

 * Changed "union vendor_code" to a struct and added typedef vendor_code_t
   as short-hand because this is not really an union anymore.

------------------------------------------------------------------------
r12647 | cbiere | 2006-12-22 21:49:22 -0500 (Fri, 22 Dec 2006) | 6 lines

 * host_addr_get_interface_addrs(): Added parameter to specify a network type,
   so that we don't need to filter the list afterwards.
 * Added socket_check_ipv6_address().
 * socket_timer(): Call socket_check_ipv6_address() roughly every 30 seconds
   because the address can easily become stale otherwise.

------------------------------------------------------------------------
r12646 | cbiere | 2006-12-22 17:15:43 -0500 (Fri, 22 Dec 2006) | 6 lines

 * get_results_set():
   * Replaced READ_GUINT32_*() with peek_*() for readability.
   * Use guint8 for 8-bit values.
   * open_size and open_parsing_size could potentially cause reading
     out-of-bounds to sign extension. 

------------------------------------------------------------------------
r12645 | rmanfredi | 2006-12-22 14:27:31 -0500 (Fri, 22 Dec 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r12644 | cbiere | 2006-12-22 00:01:01 -0500 (Fri, 22 Dec 2006) | 2 lines

 * 2952 more items.

------------------------------------------------------------------------
r12643 | cbiere | 2006-12-21 10:19:02 -0500 (Thu, 21 Dec 2006) | 2 lines

 * 2095 more items.

------------------------------------------------------------------------
r12642 | cbiere | 2006-12-21 08:30:28 -0500 (Thu, 21 Dec 2006) | 2 lines

 * 1554 more items.

------------------------------------------------------------------------
r12641 | cbiere | 2006-12-20 23:49:30 -0500 (Wed, 20 Dec 2006) | 2 lines

 * 757 more items.

------------------------------------------------------------------------
r12640 | cbiere | 2006-12-20 22:18:17 -0500 (Wed, 20 Dec 2006) | 2 lines

 * 2235 new items.

------------------------------------------------------------------------
r12639 | cbiere | 2006-12-20 20:07:47 -0500 (Wed, 20 Dec 2006) | 2 lines

 * Detect dupe spam.

------------------------------------------------------------------------
r12638 | cbiere | 2006-12-20 19:53:52 -0500 (Wed, 20 Dec 2006) | 2 lines

 * 1833 new items.

------------------------------------------------------------------------
r12637 | cbiere | 2006-12-20 18:14:08 -0500 (Wed, 20 Dec 2006) | 2 lines

 * 527 new items.

------------------------------------------------------------------------
r12636 | cbiere | 2006-12-20 06:11:19 -0500 (Wed, 20 Dec 2006) | 2 lines

 * 4176 new items.

------------------------------------------------------------------------
r12635 | cbiere | 2006-12-20 00:32:25 -0500 (Wed, 20 Dec 2006) | 2 lines

 * Extended spammer ranges.

------------------------------------------------------------------------
r12634 | cbiere | 2006-12-20 00:15:03 -0500 (Wed, 20 Dec 2006) | 2 lines

 * Improved action URL filter.

------------------------------------------------------------------------
r12633 | cbiere | 2006-12-20 00:09:22 -0500 (Wed, 20 Dec 2006) | 2 lines

 * Added compat_memmem().

------------------------------------------------------------------------
r12632 | cbiere | 2006-12-20 00:07:17 -0500 (Wed, 20 Dec 2006) | 2 lines

 * Added more spam flags.

------------------------------------------------------------------------
r12631 | cbiere | 2006-12-19 19:59:28 -0500 (Tue, 19 Dec 2006) | 2 lines

 * 128 new items.

------------------------------------------------------------------------
r12630 | cbiere | 2006-12-17 18:55:04 -0500 (Sun, 17 Dec 2006) | 2 lines

 * Clean-ups.

------------------------------------------------------------------------
r12629 | cbiere | 2006-12-17 18:24:29 -0500 (Sun, 17 Dec 2006) | 3 lines

 * search_reissue(): Freeze expired searches instead of setting their
   reissue timeout to zero. Reported and fix provided by Matthew Lye.

------------------------------------------------------------------------
r12628 | cbiere | 2006-12-16 23:17:40 -0500 (Sat, 16 Dec 2006) | 3 lines

 * struct assertion_data: Use an integer instead of a string for "line" to
   save a little bit of space.

------------------------------------------------------------------------
r12627 | cbiere | 2006-12-16 21:24:19 -0500 (Sat, 16 Dec 2006) | 5 lines

 * Added dl_file_chunk_free().
 * Added const-qualifiers.
 * Added more dl_file_chunk_check().
 * Removed some unnecessary brackets.

------------------------------------------------------------------------
r12626 | cbiere | 2006-12-16 20:08:37 -0500 (Sat, 16 Dec 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12625 | cbiere | 2006-12-16 20:06:18 -0500 (Sat, 16 Dec 2006) | 3 lines

 * buffers_match(): Fixed a terrible bug causing overlap mismatches all the
   the time especially with larger overlap buffer sizes.

------------------------------------------------------------------------
r12624 | cbiere | 2006-12-16 19:11:22 -0500 (Sat, 16 Dec 2006) | 2 lines

 * 19 new items.

------------------------------------------------------------------------
r12623 | cbiere | 2006-12-16 18:54:23 -0500 (Sat, 16 Dec 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12622 | cbiere | 2006-12-16 08:40:17 -0500 (Sat, 16 Dec 2006) | 2 lines

 * 55 new items.

------------------------------------------------------------------------
r12621 | cbiere | 2006-12-16 00:51:31 -0500 (Sat, 16 Dec 2006) | 2 lines

 * Another Jironitard.

------------------------------------------------------------------------
r12620 | cbiere | 2006-12-16 00:40:18 -0500 (Sat, 16 Dec 2006) | 2 lines

 * struct dl_file_chunk: Added magic.

------------------------------------------------------------------------
r12619 | cbiere | 2006-12-15 23:42:46 -0500 (Fri, 15 Dec 2006) | 2 lines

 * 58 new items.

------------------------------------------------------------------------
r12618 | cbiere | 2006-12-14 16:12:00 -0500 (Thu, 14 Dec 2006) | 3 lines

 * Renamed all instances of "log" to "route_log" because log() is a standard C
   function.

------------------------------------------------------------------------
r12617 | cbiere | 2006-12-14 16:01:38 -0500 (Thu, 14 Dec 2006) | 2 lines

 * Renamed "sin" to "sin4"; apparently some GCCs have a built-in sin.

------------------------------------------------------------------------
r12616 | cbiere | 2006-12-14 04:51:39 -0500 (Thu, 14 Dec 2006) | 2 lines

 * print_download_info(): Reserve more space for the host part.

------------------------------------------------------------------------
r12615 | cbiere | 2006-12-14 04:25:27 -0500 (Thu, 14 Dec 2006) | 2 lines

 * Got rid of SHELL_BUFFER_SIZE by using a list of pmsg_t buffers.

------------------------------------------------------------------------
r12614 | cbiere | 2006-12-14 03:22:06 -0500 (Thu, 14 Dec 2006) | 2 lines

 * 23 new items.

------------------------------------------------------------------------
r12613 | cbiere | 2006-12-14 03:09:48 -0500 (Thu, 14 Dec 2006) | 2 lines

 * Added command "downloads" to list all downloads.

------------------------------------------------------------------------
r12612 | cbiere | 2006-12-14 03:01:51 -0500 (Thu, 14 Dec 2006) | 2 lines

 * Added downloads_get_list().

------------------------------------------------------------------------
r12611 | cbiere | 2006-12-13 23:24:13 -0500 (Wed, 13 Dec 2006) | 5 lines

 * Do not unnecessarily export variables.
 * DHASH_SIZE: Use shift-operator to emphasize the power of 2.
 * dl_by_time_insert(), dl_by_time_remove(): gint -> guint.
 * Replaced a couple of atom_.*_free() with atom_.*_free_null().

------------------------------------------------------------------------
r12610 | cbiere | 2006-12-13 21:01:18 -0500 (Wed, 13 Dec 2006) | 3 lines

 * current_peermode_changed(): Call bsched_set_peermode() to adjust
   bandwidth scheduling for the current mode.

------------------------------------------------------------------------
r12609 | cbiere | 2006-12-13 16:11:58 -0500 (Wed, 13 Dec 2006) | 2 lines

 * 28 new items.

------------------------------------------------------------------------
r12608 | cbiere | 2006-12-13 14:53:15 -0500 (Wed, 13 Dec 2006) | 2 lines

 * bsched_close(): Use a loop instead clearing each item individually.

------------------------------------------------------------------------
r12607 | cbiere | 2006-12-13 11:31:34 -0500 (Wed, 13 Dec 2006) | 2 lines

 * Document "download add".

------------------------------------------------------------------------
r12606 | cbiere | 2006-12-12 13:07:04 -0500 (Tue, 12 Dec 2006) | 2 lines

 * 65 new items.

------------------------------------------------------------------------
r12605 | cbiere | 2006-12-11 16:10:59 -0500 (Mon, 11 Dec 2006) | 3 lines

 * Turned "queue_frozen" into property "download_queue_frozen". It's easier
   to monitor and modify this way.

------------------------------------------------------------------------
r12604 | cbiere | 2006-12-11 14:53:02 -0500 (Mon, 11 Dec 2006) | 4 lines

 * Applied patch by Bill Pringlemeir:
   * Persist the visibility status of the search bar.
   * Simplified focus handling for the search bar.

------------------------------------------------------------------------
r12603 | cbiere | 2006-12-10 12:03:02 -0500 (Sun, 10 Dec 2006) | 2 lines

 * +1.

------------------------------------------------------------------------
r12602 | cbiere | 2006-12-10 11:56:37 -0500 (Sun, 10 Dec 2006) | 2 lines

 * Fixed typo in parameter name. Reported by Matthew Lye.

------------------------------------------------------------------------
r12601 | cbiere | 2006-12-10 11:20:15 -0500 (Sun, 10 Dec 2006) | 4 lines

 * enable_udp_changed(), request_new_sockets(): Release the UDP sockets
   anyway because on startup some things just don't work as one would
   expect.

------------------------------------------------------------------------
r12600 | cbiere | 2006-12-10 10:33:02 -0500 (Sun, 10 Dec 2006) | 2 lines

 * shell_exec_set(): Fixed access ofaccess of uninitialized variable.

------------------------------------------------------------------------
r12599 | cbiere | 2006-12-10 10:21:49 -0500 (Sun, 10 Dec 2006) | 3 lines

 * Added bsched_early_init() because settings_init() can cause calling of
   bsched_*() functions so the schedulers must be initialized.

------------------------------------------------------------------------
r12598 | cbiere | 2006-12-09 19:12:10 -0500 (Sat, 09 Dec 2006) | 3 lines

 * Added command-line option --no-xshm. This may be useful on some platforms
   at least with Gtk+ 1.2.

------------------------------------------------------------------------
r12597 | cbiere | 2006-12-09 17:41:10 -0500 (Sat, 09 Dec 2006) | 2 lines

 * shell_exec_status(): Visual fix for status info regarding shared files.

------------------------------------------------------------------------
r12596 | cbiere | 2006-12-09 17:10:10 -0500 (Sat, 09 Dec 2006) | 4 lines

 * Use -Dyacc=bison so that Configure does not bother to ask. It's not used
   anyway.
 * Cosmetic.

------------------------------------------------------------------------
r12595 | cbiere | 2006-12-08 22:45:24 -0500 (Fri, 08 Dec 2006) | 2 lines

 * Backslashes were not escaped.

------------------------------------------------------------------------
r12594 | cbiere | 2006-12-08 22:33:08 -0500 (Fri, 08 Dec 2006) | 4 lines

 * Simplified property-related code by using more higher level functions.
   As a side-effect GUI properties are no longer accessible from shell. This
   could be fixed but I doubt anyone cares.

------------------------------------------------------------------------
r12593 | cbiere | 2006-12-08 22:27:46 -0500 (Fri, 08 Dec 2006) | 2 lines

 * Added script to create a magnet list from the shared files.

------------------------------------------------------------------------
r12592 | cbiere | 2006-12-08 16:21:02 -0500 (Fri, 08 Dec 2006) | 3 lines

 * Added shell command "download" so that it's possible to initiate downloads
   in topless mode.

------------------------------------------------------------------------
r12591 | cbiere | 2006-12-08 15:52:45 -0500 (Fri, 08 Dec 2006) | 2 lines

 * process_meta_data(): Don't cry about stale bitzi data unless debugging.

------------------------------------------------------------------------
r12590 | cbiere | 2006-12-08 15:11:27 -0500 (Fri, 08 Dec 2006) | 2 lines

 * Removed unnecessary use of grep.

------------------------------------------------------------------------
r12589 | cbiere | 2006-12-08 12:43:50 -0500 (Fri, 08 Dec 2006) | 3 lines

 * node_remove_worst(): Don't send "Too Many Errors" when making room for
   another node, that's nonsense.

------------------------------------------------------------------------
r12588 | cbiere | 2006-12-08 11:53:25 -0500 (Fri, 08 Dec 2006) | 2 lines

 * +1.

------------------------------------------------------------------------
r12587 | cbiere | 2006-12-08 11:34:24 -0500 (Fri, 08 Dec 2006) | 2 lines

 * Added VMM_PROTECT_FREE_PAGES and disabled VMM_INVALIDATE_FREE_PAGES.

------------------------------------------------------------------------
r12586 | cbiere | 2006-12-07 09:44:54 -0500 (Thu, 07 Dec 2006) | 2 lines

 * Added DynDNS.org spy server.

------------------------------------------------------------------------
r12585 | cbiere | 2006-12-06 16:49:22 -0500 (Wed, 06 Dec 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r12584 | cbiere | 2006-12-06 00:57:03 -0500 (Wed, 06 Dec 2006) | 2 lines

 * Use a stricter consistency check.

------------------------------------------------------------------------
r12583 | cbiere | 2006-12-06 00:42:15 -0500 (Wed, 06 Dec 2006) | 2 lines

 * Use enums to access the bandwidth schedulers instead of pointers.

------------------------------------------------------------------------
r12582 | cbiere | 2006-12-06 00:22:41 -0500 (Wed, 06 Dec 2006) | 2 lines

 * Include vmm.h for compat_pagesize().

------------------------------------------------------------------------
r12580 | cbiere | 2006-12-05 22:32:21 -0500 (Tue, 05 Dec 2006) | 3 lines

 * Removed all references to GWebCaches, so Gtk-Gnutella will never ever
   contact any GWebCache again.

------------------------------------------------------------------------
r12579 | cbiere | 2006-12-05 21:11:19 -0500 (Tue, 05 Dec 2006) | 2 lines

 * GWebCaches are dead.

------------------------------------------------------------------------
r12578 | cbiere | 2006-12-05 21:00:38 -0500 (Tue, 05 Dec 2006) | 2 lines

 * Removed all GWebCaches.

------------------------------------------------------------------------
r12577 | cbiere | 2006-12-05 15:21:01 -0500 (Tue, 05 Dec 2006) | 2 lines

 * bsched_close(): Clean-up.

------------------------------------------------------------------------
r12576 | cbiere | 2006-12-05 14:59:05 -0500 (Tue, 05 Dec 2006) | 11 lines

 * struct gnutella_host: Use struct packed_host instead of host_addr_t to
   save a little bit of memory.
 * Added gnet_host_set(), gnet_host_get_addr(), gnet_host_get_port() and
   gnet_host_get_net().
 * Renamed host_to_string() to gnet_host_to_string() for consistency with
   the type name.
 * Simplified some code to use gnet_host_to_string() instead of
   host_addr_port_to_string().
 * bsched.[ch]: Hide most of the details to prevent misuse and namespace
   pollution.

------------------------------------------------------------------------
r12575 | cbiere | 2006-12-05 10:25:26 -0500 (Tue, 05 Dec 2006) | 2 lines

 * Added BSCHED_MAGIC and bsched_check().

------------------------------------------------------------------------
r12574 | cbiere | 2006-12-05 10:18:34 -0500 (Tue, 05 Dec 2006) | 2 lines

 * Disable regression tests again.

------------------------------------------------------------------------
r12573 | cbiere | 2006-12-04 12:18:58 -0500 (Mon, 04 Dec 2006) | 2 lines

 * file_info_scandir(): Removed another unnecessary check.

------------------------------------------------------------------------
r12572 | cbiere | 2006-12-04 12:10:06 -0500 (Mon, 04 Dec 2006) | 2 lines

 * Another unnecessary check.

------------------------------------------------------------------------
r12571 | cbiere | 2006-12-04 12:08:55 -0500 (Mon, 04 Dec 2006) | 2 lines

 * Removed unnecessary checks. make_pathname() never returns NULL.

------------------------------------------------------------------------
r12570 | cbiere | 2006-12-04 12:05:39 -0500 (Mon, 04 Dec 2006) | 2 lines

 * file_info_retrieve_binary(): Some clean-up.

------------------------------------------------------------------------
r12569 | cbiere | 2006-12-04 12:01:46 -0500 (Mon, 04 Dec 2006) | 3 lines

 * file_info_check(): Check the refcount too.
 * file_info_lookup_dup(): Make sure fi->file_name or fi->guid is not NULL.

------------------------------------------------------------------------
r12568 | cbiere | 2006-12-04 09:54:49 -0500 (Mon, 04 Dec 2006) | 2 lines

 * Fixed compiling for USE_MALLOC.

------------------------------------------------------------------------
r12567 | cbiere | 2006-12-03 13:23:25 -0500 (Sun, 03 Dec 2006) | 2 lines

 * Forgot setvar.

------------------------------------------------------------------------
r12566 | cbiere | 2006-12-03 09:07:59 -0500 (Sun, 03 Dec 2006) | 5 lines

 * Replaced ipv6.U with d_ipv6.U and USE_IPV6 with HAS_IPV6 because an
   interactive compile-time option is unnecessary, the previous setting
   was ignored and -Ud_ipv6 can be used as well to forcefully disable it
   at compile-time.

------------------------------------------------------------------------
r12565 | cbiere | 2006-12-03 05:08:13 -0500 (Sun, 03 Dec 2006) | 2 lines

 * Added ANSI_X3.4-1968 as alias for ASCII.

------------------------------------------------------------------------
r12564 | cbiere | 2006-12-02 10:48:04 -0500 (Sat, 02 Dec 2006) | 2 lines

 * cell_renderer_func(): Don't show an uptime if it's zero.

------------------------------------------------------------------------
r12563 | cbiere | 2006-12-02 09:45:59 -0500 (Sat, 02 Dec 2006) | 2 lines

 * search_gui_analyze_col_data(): Undo some test.

------------------------------------------------------------------------
r12562 | cbiere | 2006-12-02 09:39:47 -0500 (Sat, 02 Dec 2006) | 3 lines

 * Don't mirror attributes of searches like "passive" or "enabled" in the GUI
   context instead always look it up from the core context.

------------------------------------------------------------------------
r12561 | cbiere | 2006-12-01 18:57:40 -0500 (Fri, 01 Dec 2006) | 4 lines

 * [GTK2] Put search results into a queue after filtering instead of
   trying to display them immediately to prevent stalling when there are
   a lot of results incoming.

------------------------------------------------------------------------
r12560 | cbiere | 2006-12-01 17:43:52 -0500 (Fri, 01 Dec 2006) | 2 lines

 * Fixed oversight in previous commit.

------------------------------------------------------------------------
r12559 | cbiere | 2006-12-01 16:50:58 -0500 (Fri, 01 Dec 2006) | 4 lines

 * search->tree_view was renamed to search->tree.
 * on_tree_view_search_results_click_column(): Return TRUE to stop further
   propagation. Maybe this fixes some crashes.

------------------------------------------------------------------------
r12558 | cbiere | 2006-12-01 13:01:32 -0500 (Fri, 01 Dec 2006) | 19 lines

 * struct search:
   * Use the same name "tree" even though the type differs
     between Gtk+ 1.2 and Gtk+ 2.x.
   * Removed unnecessary member "model".
 * search_gui_add_record():
   * Use a logic color instead of GdkColor. We don't modify the background
     color anymore. If necessary it can be derived.
   * Don't use search_gui_metadata_update() here but set "meta" directly.
 * download_selected_file():
   * [GTK2] If downloaded results are not supposed to be removed, mark them
     as downloaded and color them appropriately.
 * search_gui_download_files():
   * Freeze/thaw the treeview to prevent or at least reduce O(n^2) behaviour.
 * Added GUI_COLOR_MARKED (blue) and GUI_COLOR_DEFAULT (theme-defined).
 * search_gui_clean_r_set(), search_gui_unref_record():
   * Don't use pointers after freeing them, not even their value.
 * search_gui_create_results_set(): Avoid '!' where if/else can be swapped.
 * search_matched(): Moved coloring code to search_gui_color_for_record().

------------------------------------------------------------------------
r12557 | cbiere | 2006-12-01 12:13:16 -0500 (Fri, 01 Dec 2006) | 3 lines

 * search_locally(): Concatenate the relative path and the filename for
   matching.

------------------------------------------------------------------------
r12556 | cbiere | 2006-12-01 10:32:41 -0500 (Fri, 01 Dec 2006) | 2 lines

 * 2 new items.

------------------------------------------------------------------------
r12555 | cbiere | 2006-12-01 10:11:05 -0500 (Fri, 01 Dec 2006) | 2 lines

 * Next please.

------------------------------------------------------------------------
r12554 | cbiere | 2006-12-01 08:41:04 -0500 (Fri, 01 Dec 2006) | 2 lines

 * 33 new items.

------------------------------------------------------------------------
r12553 | cbiere | 2006-12-01 07:09:27 -0500 (Fri, 01 Dec 2006) | 2 lines

 * Next please.

------------------------------------------------------------------------
r12552 | cbiere | 2006-12-01 06:26:39 -0500 (Fri, 01 Dec 2006) | 3 lines

 * If USE_SELECT_FOR_SHELL is defined, we emulate poll() using select. This
   is automagically defined for Darwin because poll() seems to be broken there.

------------------------------------------------------------------------
r12551 | cbiere | 2006-12-01 05:17:05 -0500 (Fri, 01 Dec 2006) | 2 lines

 * Get a free Gnutella client!!1 Visit gtk-gnutella.sourceforge.net!11

------------------------------------------------------------------------
r12550 | cbiere | 2006-12-01 04:20:21 -0500 (Fri, 01 Dec 2006) | 2 lines

 * Omedeto!

------------------------------------------------------------------------
r12549 | cbiere | 2006-12-01 02:59:51 -0500 (Fri, 01 Dec 2006) | 2 lines

 * node_udp_disable(): Release only the socket which was actually disabled.

------------------------------------------------------------------------
r12548 | cbiere | 2006-11-30 10:04:17 -0500 (Thu, 30 Nov 2006) | 4 lines

 * Fixed bug: When disabling UDP or changing the listening port to 0, the
   pseudo UDP nodes still held a reference to the now freed socket structure.
   node_udp_disable() takes care of freeing the UDP sockets now.

------------------------------------------------------------------------
r12547 | cbiere | 2006-11-30 09:25:28 -0500 (Thu, 30 Nov 2006) | 3 lines

 * Added more socket_check() to catch a bug which is triggered by changing
   the listening port.

------------------------------------------------------------------------
r12546 | cbiere | 2006-11-30 08:20:15 -0500 (Thu, 30 Nov 2006) | 3 lines

 * tx_link_write_error(): Don't bail out on unexpected errno codes,
   that's idiotic.

------------------------------------------------------------------------
r12545 | cbiere | 2006-11-29 19:19:17 -0500 (Wed, 29 Nov 2006) | 3 lines

 * Moved getphysmemsize() to a dedicated file and include <sys/sysctl.h>
   only there because it can cause severe namespace pollution.

------------------------------------------------------------------------
r12544 | cbiere | 2006-11-29 17:43:31 -0500 (Wed, 29 Nov 2006) | 3 lines

 * Moved getphysmemsize() to a dedicated file and include <sys/sysctl.h>
   only there because it can cause severe namespace pollution.

------------------------------------------------------------------------
r12543 | cbiere | 2006-11-29 17:12:35 -0500 (Wed, 29 Nov 2006) | 2 lines

 * Squished.

------------------------------------------------------------------------
r12542 | cbiere | 2006-11-29 15:07:30 -0500 (Wed, 29 Nov 2006) | 2 lines

 * Removed plankton.merseine.nu; possibly hijacked.

------------------------------------------------------------------------
r12541 | cbiere | 2006-11-29 13:52:22 -0500 (Wed, 29 Nov 2006) | 3 lines

 * vmm_mmap_anonymous(): The variant using /dev/zero does of course require
   MAP_PRIVATE and not MAP_SHARED.

------------------------------------------------------------------------
r12540 | cbiere | 2006-11-29 12:43:29 -0500 (Wed, 29 Nov 2006) | 2 lines

 * Try another variant of IGNORE_RESULT().

------------------------------------------------------------------------
r12539 | cbiere | 2006-11-29 12:16:46 -0500 (Wed, 29 Nov 2006) | 2 lines

 * hash_table_foreach(): Additional check.

------------------------------------------------------------------------
r12538 | cbiere | 2006-11-29 11:56:19 -0500 (Wed, 29 Nov 2006) | 3 lines

 * hash_table_clear(): Forgot to clear "num_items".
 * hash_table_resize(): Fixed assertion.

------------------------------------------------------------------------
r12537 | cbiere | 2006-11-29 10:07:38 -0500 (Wed, 29 Nov 2006) | 3 lines

 * Moved close_file_descriptors() so we don't close the descriptor used to
   mmap() /dev/zero.

------------------------------------------------------------------------
r12536 | cbiere | 2006-11-28 16:33:39 -0500 (Tue, 28 Nov 2006) | 2 lines

 * Added magic.

------------------------------------------------------------------------
r12535 | cbiere | 2006-11-28 16:20:31 -0500 (Tue, 28 Nov 2006) | 2 lines

 * 138 new items.

------------------------------------------------------------------------
r12534 | cbiere | 2006-11-28 16:08:12 -0500 (Tue, 28 Nov 2006) | 2 lines

 * browse_host_read_qhits(): Remove first, free later.

------------------------------------------------------------------------
r12533 | cbiere | 2006-11-28 10:10:57 -0500 (Tue, 28 Nov 2006) | 2 lines

 * struct pmsg_ext: Removed voodoo.

------------------------------------------------------------------------
r12532 | cbiere | 2006-11-28 10:04:50 -0500 (Tue, 28 Nov 2006) | 2 lines

 * Fixed for compiling with -DUSE_DMALLOC.

------------------------------------------------------------------------
r12531 | cbiere | 2006-11-28 07:53:31 -0500 (Tue, 28 Nov 2006) | 2 lines

 * I can smell your spam.

------------------------------------------------------------------------
r12530 | cbiere | 2006-11-28 04:23:20 -0500 (Tue, 28 Nov 2006) | 2 lines

 * Added further comment and missing line-break in warning.

------------------------------------------------------------------------
r12529 | cbiere | 2006-11-27 16:42:05 -0500 (Mon, 27 Nov 2006) | 2 lines

 * 109 new items.

------------------------------------------------------------------------
r12528 | cbiere | 2006-11-27 15:55:15 -0500 (Mon, 27 Nov 2006) | 4 lines

 * Do the recursion check per queue not globally and do the same for the TCP
   queue.
 * mq_rmlink_prev(): Added assertions, just in case.

------------------------------------------------------------------------
r12527 | cbiere | 2006-11-27 15:51:21 -0500 (Mon, 27 Nov 2006) | 2 lines

 * share_scan(): Set SHARE_F_INDEXED and file_index at the same time.

------------------------------------------------------------------------
r12526 | cbiere | 2006-11-27 15:48:34 -0500 (Mon, 27 Nov 2006) | 2 lines

 * Corrected address.

------------------------------------------------------------------------
r12525 | cbiere | 2006-11-27 14:13:44 -0500 (Mon, 27 Nov 2006) | 2 lines

 * Don't -pipe if it's already in the compiler flags.

------------------------------------------------------------------------
r12524 | cbiere | 2006-11-27 13:51:01 -0500 (Mon, 27 Nov 2006) | 6 lines

 * mq_remove_linkable(): Removed probably invalid assertion.
 * mq_free(), mq_rmlink_prev(): Nullify l->data after pmsg_free() and
   nullify the qlink item before mq_rmlink_prev(). Otherwise, depending
   on what the callback of an extended pmsg does, this might cause a
   dangling pointer.

------------------------------------------------------------------------
r12523 | cbiere | 2006-11-27 13:29:18 -0500 (Mon, 27 Nov 2006) | 2 lines

 * g_strdup() is a better check than g_malloc().

------------------------------------------------------------------------
r12522 | cbiere | 2006-11-27 12:13:07 -0500 (Mon, 27 Nov 2006) | 2 lines

 * Removed unnecessary checks.

------------------------------------------------------------------------
r12521 | cbiere | 2006-11-27 06:55:41 -0500 (Mon, 27 Nov 2006) | 3 lines

 * Added "strict booleans" which may be useful for debugging or catching
   memory corruptions.

------------------------------------------------------------------------
r12520 | cbiere | 2006-11-27 04:11:47 -0500 (Mon, 27 Nov 2006) | 7 lines

 * shared_file_deindex(): Clear flags and file_index unconditionally
   because in corner cases file_basenames and file_table might already be
   freed, so that not clearing these could cause assertion failures.
 * share_free():
   * Call shared_file_deindex() for each shared file.
   * Don't free file_table to early, it might still get accessed.

------------------------------------------------------------------------
r12519 | cbiere | 2006-11-27 03:14:13 -0500 (Mon, 27 Nov 2006) | 3 lines

 * download_abort(): Check the fileinfo lifecount before calling
   download_forget(). This may fix an occasional crash on purge.

------------------------------------------------------------------------
r12518 | cbiere | 2006-11-27 03:12:29 -0500 (Mon, 27 Nov 2006) | 3 lines

 * Check whether remapping of the memory allocation seems to work and if not
   reset it.

------------------------------------------------------------------------
r12517 | cbiere | 2006-11-27 03:09:28 -0500 (Mon, 27 Nov 2006) | 2 lines

 * browse_host_read_html(): uint32_to_string() is sufficient.

------------------------------------------------------------------------
r12516 | cbiere | 2006-11-27 02:31:48 -0500 (Mon, 27 Nov 2006) | 4 lines

 * shared_file_from_fileinfo(): Don't set file_index to URN_INDEX, just keep
   it at zero (index 0 == not indexed). This fixes a newly added assertion
   failure in shared_file_check(). See bug #1603371.

------------------------------------------------------------------------
r12515 | cbiere | 2006-11-27 01:04:32 -0500 (Mon, 27 Nov 2006) | 2 lines

 * +1

------------------------------------------------------------------------
r12514 | cbiere | 2006-11-26 13:24:15 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Ano sa, do you want war?

------------------------------------------------------------------------
r12513 | cbiere | 2006-11-26 11:47:13 -0500 (Sun, 26 Nov 2006) | 2 lines

 * +1

------------------------------------------------------------------------
r12512 | cbiere | 2006-11-26 11:40:30 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Gahzahnoohgal.

------------------------------------------------------------------------
r12511 | cbiere | 2006-11-26 09:56:28 -0500 (Sun, 26 Nov 2006) | 3 lines

 * get_file_to_upload(): Check that /get/<index>/ is followed by a
   non-null character; no need to check for an empty filename.

------------------------------------------------------------------------
r12510 | cbiere | 2006-11-26 09:54:54 -0500 (Sun, 26 Nov 2006) | 2 lines

 * shared_file_by_name(): Fixed bug I just added in the last few commits.

------------------------------------------------------------------------
r12509 | cbiere | 2006-11-26 09:13:26 -0500 (Sun, 26 Nov 2006) | 3 lines

 * pmsg_new_extend(): We must pass "emb->m_prio" because it gets overriden
   otherwise.

------------------------------------------------------------------------
r12508 | cbiere | 2006-11-26 09:10:52 -0500 (Sun, 26 Nov 2006) | 3 lines

 * pmsg_new_extend(): Mark the message as "extended" ASAP because
   cast_to_pmsg() checks for it.

------------------------------------------------------------------------
r12507 | cbiere | 2006-11-26 08:59:30 -0500 (Sun, 26 Nov 2006) | 4 lines

 * Added unstable release so that people who follow the instructions in
   README.Debian to compile from SVN don't install an unreleased gtk-gnutella
   as a stable version.

------------------------------------------------------------------------
r12506 | cbiere | 2006-11-26 07:13:51 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Removed pointless casts.

------------------------------------------------------------------------
r12505 | cbiere | 2006-11-26 06:58:52 -0500 (Sun, 26 Nov 2006) | 3 lines

 * Added const-qualifiers.
 * Removed explicit casts.

------------------------------------------------------------------------
r12504 | cbiere | 2006-11-26 06:17:47 -0500 (Sun, 26 Nov 2006) | 2 lines

 * pmsg_free(): Removed visual noise.

------------------------------------------------------------------------
r12503 | cbiere | 2006-11-26 06:16:18 -0500 (Sun, 26 Nov 2006) | 3 lines

 * struct pmsg_ext: Added const-qualifier to "m_rptr".
 * pmsg_size(): Removed bogus visual overhead.

------------------------------------------------------------------------
r12502 | cbiere | 2006-11-26 06:02:11 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Now it's really fixed.

------------------------------------------------------------------------
r12501 | cbiere | 2006-11-26 05:58:28 -0500 (Sun, 26 Nov 2006) | 2 lines

 * search_max_results_for_ui(): Fixed compile problem with USE_TOPLESS.

------------------------------------------------------------------------
r12500 | cbiere | 2006-11-26 05:53:21 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Always include "common.h".

------------------------------------------------------------------------
r12499 | cbiere | 2006-11-26 05:45:57 -0500 (Sun, 26 Nov 2006) | 4 lines

 * Changed shared_file_unref() to take an indirect pointer and nullify it
   just like shared_file_free() and tolerate NULL to reduce the number of
   checks elsewhere.

------------------------------------------------------------------------
r12498 | cbiere | 2006-11-26 05:29:32 -0500 (Sun, 26 Nov 2006) | 6 lines

 * Changed SHARE_F_* to enums.
 * Added SHARE_F_SPECIAL, SHARE_F_BASENAME and SHARE_F_INDEXED for redundancy
   and additional checks.
 * special_free_kv(): Don't free but unreference.
 * share_special_init(): Reference the shared file and mark it as special.

------------------------------------------------------------------------
r12497 | cbiere | 2006-11-26 04:26:50 -0500 (Sun, 26 Nov 2006) | 3 lines

 * Cosmetic.
 * Always include "common.h". Don't #include <glib.h> explicitely.

------------------------------------------------------------------------
r12496 | cbiere | 2006-11-26 04:22:49 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Always include "common.h". Don't #include <glib.h> explicitely.

------------------------------------------------------------------------
r12495 | cbiere | 2006-11-26 04:18:16 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Always include "common.h". Don't #include <glib.h> explicitely.

------------------------------------------------------------------------
r12494 | cbiere | 2006-11-26 04:15:15 -0500 (Sun, 26 Nov 2006) | 5 lines

 * search_browse_results(), search_results(): Drop results also if a
   search has collected the maximum amount of items.
 * search_reissue(): Allow restarting local searches. This may be useful
   after a rescan.

------------------------------------------------------------------------
r12493 | cbiere | 2006-11-26 01:58:41 -0500 (Sun, 26 Nov 2006) | 2 lines

 * Corrected variable name.

------------------------------------------------------------------------
r12492 | cbiere | 2006-11-26 01:16:49 -0500 (Sun, 26 Nov 2006) | 7 lines

 * Added shell_magic and shell_check().
 * Changed outpos from gint32 to the more approriate size_t.
 * Renamed shell_exec_stat() to shell_exec_status().
 * shell_exec_status(): Show number and volume of shared files as well.
 * shell_exec_rescan(): guc_share_rescan() must not be called directly as
   the shell might already be dead when it returns. See added comments.

------------------------------------------------------------------------
r12491 | cbiere | 2006-11-25 21:53:56 -0500 (Sat, 25 Nov 2006) | 2 lines

 * shell_exec_search(): Fixed inverted logic in previous commit.

------------------------------------------------------------------------
r12490 | cbiere | 2006-11-25 21:47:00 -0500 (Sat, 25 Nov 2006) | 4 lines

 * Local searches are not possible whilst the library is being rebuilt,
   prevent starting the search which would gain no results and give feedback
   to the user.

------------------------------------------------------------------------
r12489 | cbiere | 2006-11-25 20:57:48 -0500 (Sat, 25 Nov 2006) | 4 lines

 * Disable the remote control interface by default.
 * Don't enable it when d_headless is set, gtk-gnutella --shell can and should 
   be used instead of the TCP socket.

------------------------------------------------------------------------
r12488 | cbiere | 2006-11-25 19:20:00 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Must include <zlib.h> due to use of Z_DEFAULT_COMPRESSION.

------------------------------------------------------------------------
r12487 | cbiere | 2006-11-25 19:13:43 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Must include <zlib.h> due to use of Z_DEFAULT_COMPRESSION.

------------------------------------------------------------------------
r12486 | cbiere | 2006-11-25 19:03:02 -0500 (Sat, 25 Nov 2006) | 4 lines

 * Don't include <zlib.h> globally but only where needed because it defines
   the types free_func and alloc_func which are seemingly popular names for
   other libraries and might potentially clash.

------------------------------------------------------------------------
r12485 | cbiere | 2006-11-25 17:16:49 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Use RUNTIME_ASSERT() instead of assert().

------------------------------------------------------------------------
r12484 | cbiere | 2006-11-25 17:13:02 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Indicate use of malloc, realloc, free etc. with NULL instead of taking
   their address because this can cause warnings due to prototype mismatches.

------------------------------------------------------------------------
r12483 | cbiere | 2006-11-25 15:30:48 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Bail out as soon as possible to reduce the chance of bugs.

------------------------------------------------------------------------
r12482 | cbiere | 2006-11-25 15:05:20 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Disable mmap() only on failure if errno != ENOMEM because the latter
   condition might clear later.

------------------------------------------------------------------------
r12481 | cbiere | 2006-11-25 14:34:41 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Nuked g_warning().

------------------------------------------------------------------------
r12480 | cbiere | 2006-11-25 14:29:49 -0500 (Sat, 25 Nov 2006) | 2 lines

 * compat_pagesize(): Nuked gboolean.

------------------------------------------------------------------------
r12479 | cbiere | 2006-11-25 14:27:01 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Use MAP_SHARED instead of MAP_PRIVATE for /dev/zero. Maybe this fixes
   mmap() on IRIX.

------------------------------------------------------------------------
r12478 | cbiere | 2006-11-25 14:17:36 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Corrected widget name.

------------------------------------------------------------------------
r12477 | cbiere | 2006-11-25 14:13:29 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Disable regression tests again.

------------------------------------------------------------------------
r12476 | cbiere | 2006-11-25 14:12:18 -0500 (Sat, 25 Nov 2006) | 2 lines

 * vmm_mmap_anonymous(): Disable mmap() if it fails once.

------------------------------------------------------------------------
r12475 | cbiere | 2006-11-25 14:00:38 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Don't use g_*() to prevent that g_malloc() is called implicitely on failure.

------------------------------------------------------------------------
r12474 | cbiere | 2006-11-25 13:53:20 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r12473 | cbiere | 2006-11-25 13:51:54 -0500 (Sat, 25 Nov 2006) | 4 lines

 * Renamed return_val_unless() to return_value_unless() for readability.
 * Added return_unless_intern() and return_value_unless_intern() to
   stringify the expression.

------------------------------------------------------------------------
r12472 | cbiere | 2006-11-25 13:17:20 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Fixed harmless compiler warnings.

------------------------------------------------------------------------
r12471 | cbiere | 2006-11-25 13:11:22 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Restructured so that we fall back to memalign() or posix_memalign() if
   mmap() failed.

------------------------------------------------------------------------
r12470 | cbiere | 2006-11-25 12:06:37 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Include <fcntl.h>. It's POSIX. Configure does some dubious stuff which
   breaks on IRIX.

------------------------------------------------------------------------
r12469 | cbiere | 2006-11-25 11:54:15 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Fixed harmless -Wshadow warning.

------------------------------------------------------------------------
r12468 | cbiere | 2006-11-25 10:58:43 -0500 (Sat, 25 Nov 2006) | 2 lines

 * Disable VMM_GREEDY_PAGE_CACHE for now.

------------------------------------------------------------------------
r12467 | cbiere | 2006-11-25 10:27:34 -0500 (Sat, 25 Nov 2006) | 3 lines

 * Don't assert that u->name or u->user_agent is not NULL. This may be the
   case now.

------------------------------------------------------------------------
r12466 | cbiere | 2006-11-25 10:09:06 -0500 (Sat, 25 Nov 2006) | 2 lines

 * I hate mazones.

------------------------------------------------------------------------
r12465 | cbiere | 2006-11-24 22:01:17 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Return of the retard.

------------------------------------------------------------------------
r12464 | cbiere | 2006-11-24 20:27:17 -0500 (Fri, 24 Nov 2006) | 2 lines

 * 'nother spammer.

------------------------------------------------------------------------
r12463 | cbiere | 2006-11-24 16:36:28 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Ok, Pongs have non-GGEP extensions. We know it by now, STFU.

------------------------------------------------------------------------
r12462 | cbiere | 2006-11-24 16:02:47 -0500 (Fri, 24 Nov 2006) | 3 lines

 * Use shell_debug to suppress certain messages by default.
 * print_upload_info(): Prettier display.

------------------------------------------------------------------------
r12461 | cbiere | 2006-11-24 15:55:33 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Nuked pointless casts.

------------------------------------------------------------------------
r12460 | cbiere | 2006-11-24 15:42:53 -0500 (Fri, 24 Nov 2006) | 3 lines

 * Added recursion prevention to mq_udp_putq() which might be the cause for
   the queue corruption. oob_pmsg_free() can obviously cause recursion.

------------------------------------------------------------------------
r12459 | cbiere | 2006-11-24 15:20:31 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added property "shell_debug".

------------------------------------------------------------------------
r12458 | cbiere | 2006-11-24 14:48:13 -0500 (Fri, 24 Nov 2006) | 3 lines

 * Added dist module to check whether __attribute__((__regparm__(n)))
   causes any warnings so that we can omit where it's not supported.

------------------------------------------------------------------------
r12457 | cbiere | 2006-11-24 14:33:43 -0500 (Fri, 24 Nov 2006) | 3 lines

 * parq_download_add_header(): Don't hex-escape download PARQ IDs, only
   upload IDs are binary GUIDs.

------------------------------------------------------------------------
r12456 | cbiere | 2006-11-24 14:10:27 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Replaced macros with functions/enums.

------------------------------------------------------------------------
r12455 | cbiere | 2006-11-24 14:07:31 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added missing #include.

------------------------------------------------------------------------
r12454 | cbiere | 2006-11-24 13:40:18 -0500 (Fri, 24 Nov 2006) | 4 lines

 * Fixed nasty bugs which caused emitting a binary PARQ ID instead of a
   hex-escaped one. The source of the issue is that we use "gchar *" instead
   of "struct guid *" for GUIDs so that *printf() and others don't complain.

------------------------------------------------------------------------
r12453 | cbiere | 2006-11-24 13:12:37 -0500 (Fri, 24 Nov 2006) | 2 lines

 * w00t!1 Jironih4x0r h4z 4 nu IP 4ddr3zz0r.

------------------------------------------------------------------------
r12452 | cbiere | 2006-11-24 13:02:04 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added shell command "uploads" to list all currently active uploads.

------------------------------------------------------------------------
r12451 | cbiere | 2006-11-24 12:53:33 -0500 (Fri, 24 Nov 2006) | 8 lines

 * Added a reference to the shared_file_t used by the upload to
   "struct upload". This not set for all uploads e.g., PARQ QUEUE callbacks
   or browse host uploads.
 * Added upload_get_info_list() and upload_free_info_list().
 * Use the shared_file_t reference for upload stats instead of the upload
   itself.
 * Added const-qualifiers regarding atoms.

------------------------------------------------------------------------
r12450 | cbiere | 2006-11-24 12:48:05 -0500 (Fri, 24 Nov 2006) | 7 lines

 * Replaced macros with static inline functions.
 * Fixed bug that would cause bogus timestamps read from the trailer on
   64-bit big-endian machines. This was hidden by atrocious casts.
 * Fixed bogus pointer gymnastics: You cannot use an expression like
   "p + len > end" to check whether one would exceed "end" because "p + len"
   yields no valid pointer then.

------------------------------------------------------------------------
r12449 | cbiere | 2006-11-24 12:07:43 -0500 (Fri, 24 Nov 2006) | 3 lines

 * send_personal_info(): Additional check so GTKG.IPV6 is only added if the
   IPv6 is valid.

------------------------------------------------------------------------
r12448 | cbiere | 2006-11-24 12:01:30 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Cosmetic change.

------------------------------------------------------------------------
r12447 | cbiere | 2006-11-24 12:00:19 -0500 (Fri, 24 Nov 2006) | 4 lines

 * Added const-qualifier to return type of atom_.*_get() so that atoms are
   always const-qualified.
 * Added tons of const-qualifiers due to the above change.

------------------------------------------------------------------------
r12446 | cbiere | 2006-11-24 09:55:48 -0500 (Fri, 24 Nov 2006) | 4 lines

 * Added const-qualifiers to atom_.*_free_null(); so that those works for
   for const-qualified atoms without additional casts.
 * Added tons of const-qualifier due to the above change.

------------------------------------------------------------------------
r12445 | cbiere | 2006-11-24 09:43:25 -0500 (Fri, 24 Nov 2006) | 3 lines

 * Added gm_hash_table_insert_const() so that we don't have to cast const
   away manually (where it's safe).

------------------------------------------------------------------------
r12444 | cbiere | 2006-11-24 09:42:26 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r12443 | cbiere | 2006-11-24 09:41:17 -0500 (Fri, 24 Nov 2006) | 2 lines

 * url_escape_cntrl(): Added const-qualifier; simplified code somewhat.

------------------------------------------------------------------------
r12442 | cbiere | 2006-11-24 09:36:35 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added ALWAYS_INLINE because otherwise GCC does not inline these at -O0.

------------------------------------------------------------------------
r12441 | cbiere | 2006-11-24 03:55:36 -0500 (Fri, 24 Nov 2006) | 2 lines

 * ZOMFG KILLAH SPAM!11

------------------------------------------------------------------------
r12440 | cbiere | 2006-11-24 02:33:07 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Do not implicitely assume struct gnutella_node has been declared.

------------------------------------------------------------------------
r12439 | cbiere | 2006-11-24 02:29:42 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added missing #include "bsched.h".

------------------------------------------------------------------------
r12438 | cbiere | 2006-11-24 02:15:03 -0500 (Fri, 24 Nov 2006) | 2 lines

 * Added missing const-qualifier to return type of ban_message().

------------------------------------------------------------------------
r12437 | cbiere | 2006-11-23 13:23:26 -0500 (Thu, 23 Nov 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12436 | cbiere | 2006-11-23 12:30:51 -0500 (Thu, 23 Nov 2006) | 2 lines

 * Bakuhatsu.

------------------------------------------------------------------------
r12435 | cbiere | 2006-11-23 11:02:15 -0500 (Thu, 23 Nov 2006) | 3 lines

 * Corrected misused of STRINGIFY(). This could cause trouble as
   STRINGIFY caused undesired macro expansion.

------------------------------------------------------------------------
r12434 | cbiere | 2006-11-23 09:40:04 -0500 (Thu, 23 Nov 2006) | 2 lines

 * Updated to the use the prettier variants of the command-line options.

------------------------------------------------------------------------
r12433 | cbiere | 2006-11-23 09:33:20 -0500 (Thu, 23 Nov 2006) | 4 lines

 * Consider underscores (macro-friendly) and hyphens (human-friendly) as
   equivalent for command-line options and use the hyphenated variant for
   usage().

------------------------------------------------------------------------
r12432 | cbiere | 2006-11-23 08:56:03 -0500 (Thu, 23 Nov 2006) | 3 lines

 * assertion_warning(): Don't print a leading line-break, that looks shoddy
   for non-fatal assertion checks.

------------------------------------------------------------------------
r12431 | cbiere | 2006-11-23 08:52:49 -0500 (Thu, 23 Nov 2006) | 4 lines

 * RUNTIME_UNREACHABLE() and fast_assert_not_reached() take no argument.
 * Changed fast_assert() macro so that the expression is not subject to
   macro expansion i.e. we want to see "NULL" not "(void *) 0".

------------------------------------------------------------------------
r12430 | cbiere | 2006-11-23 08:48:42 -0500 (Thu, 23 Nov 2006) | 3 lines

 * Don't add -pipe if -save-temps is specified because the latter will
   override the former and cause harmless but annoying warnings.

------------------------------------------------------------------------
r12429 | cbiere | 2006-11-23 06:07:29 -0500 (Thu, 23 Nov 2006) | 3 lines

 * close_file_descriptors(): Fixed thinko causing an infinite loop; reported by
   Meelis Roos.

------------------------------------------------------------------------
r12428 | cbiere | 2006-11-23 04:04:41 -0500 (Thu, 23 Nov 2006) | 3 lines

 * tls_handshake(): Show whether a connection was incoming or outgoing on
   error.

------------------------------------------------------------------------
r12427 | cbiere | 2006-11-22 19:39:54 -0500 (Wed, 22 Nov 2006) | 4 lines

 * crash_handler(): Simplified; since controlling gdb doesn't work anyway
   and requires an external script, we can just as well leave all that
   stuff up to the external helper.

------------------------------------------------------------------------
r12426 | cbiere | 2006-11-22 19:36:40 -0500 (Wed, 22 Nov 2006) | 2 lines

 * Moved close_fds() as close_file_descriptors() to misc.[ch].

------------------------------------------------------------------------
r12425 | cbiere | 2006-11-22 17:37:47 -0500 (Wed, 22 Nov 2006) | 3 lines

 * Added underscores to GCC attribute names to prevent clashes. It seems
   some platforms have a printf macro definition causing fall out.

------------------------------------------------------------------------
r12424 | cbiere | 2006-11-22 15:31:17 -0500 (Wed, 22 Nov 2006) | 2 lines

 * search_add_local_file(): Don't crash if shared_file_relative_path() is NULL.

------------------------------------------------------------------------
r12423 | cbiere | 2006-11-22 14:04:36 -0500 (Wed, 22 Nov 2006) | 3 lines

 * Use fork() for now because SGI IRIX doesn't have it and the dist check
   is too verbose.

------------------------------------------------------------------------
r12422 | cbiere | 2006-11-22 13:52:50 -0500 (Wed, 22 Nov 2006) | 3 lines

 * tls_global_init(): Check whether {key,cert}.pem exists to avoid an
   unnecessary warning.

------------------------------------------------------------------------
r12421 | cbiere | 2006-11-22 13:50:49 -0500 (Wed, 22 Nov 2006) | 2 lines

 * node_slow_timer(): Replaced offensive warning with something useful.

------------------------------------------------------------------------
r12420 | cbiere | 2006-11-22 11:27:14 -0500 (Wed, 22 Nov 2006) | 3 lines

 * Update the address information in the GUI properly if the network procotol
   is changed.

------------------------------------------------------------------------
r12419 | cbiere | 2006-11-22 10:59:24 -0500 (Wed, 22 Nov 2006) | 2 lines

 * Changed loop so that GCC cannot claim "max_cached" wasn't initialized.

------------------------------------------------------------------------
r12418 | cbiere | 2006-11-22 05:56:07 -0500 (Wed, 22 Nov 2006) | 3 lines

 * Be slightly more verbose.
 * Ask for feedback to the mailing list or a bug report if Configure fails.

------------------------------------------------------------------------
r12417 | cbiere | 2006-11-22 05:29:57 -0500 (Wed, 22 Nov 2006) | 2 lines

 * Cosmetic changes.

------------------------------------------------------------------------
r12416 | cbiere | 2006-11-22 05:03:10 -0500 (Wed, 22 Nov 2006) | 6 lines

 * Changed alloc_pages_intern() to return NULL instead of bailing out on
   error.
 * alloc_pages(): If alloc_pages_intern() failes, recycle cached pages from
   higher levels before we run completely out of memory.
 * Reduced glibberish.

------------------------------------------------------------------------
r12415 | cbiere | 2006-11-22 04:53:06 -0500 (Wed, 22 Nov 2006) | 3 lines

 * Added halloc_bytes_allocated() and halloc_chunks_allocated().
 * Replaced macros with static inline functions.

------------------------------------------------------------------------
r12414 | cbiere | 2006-11-21 18:11:15 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Disable SQLite here for now.

------------------------------------------------------------------------
r12413 | cbiere | 2006-11-21 17:57:50 -0500 (Tue, 21 Nov 2006) | 2 lines

 * 99 new items.

------------------------------------------------------------------------
r12412 | cbiere | 2006-11-21 17:36:53 -0500 (Tue, 21 Nov 2006) | 3 lines

 * buffers_strip_leading(): Replaced redundant check with assertion check
   for clarity.

------------------------------------------------------------------------
r12411 | cbiere | 2006-11-21 03:44:02 -0500 (Tue, 21 Nov 2006) | 2 lines

 * And the next one.

------------------------------------------------------------------------
r12410 | cbiere | 2006-11-21 03:37:03 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Use a differed red for "maybe" spam.

------------------------------------------------------------------------
r12409 | cbiere | 2006-11-21 03:34:33 -0500 (Tue, 21 Nov 2006) | 2 lines

 * And another.

------------------------------------------------------------------------
r12408 | cbiere | 2006-11-21 03:26:50 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Added a jailbait spammer.

------------------------------------------------------------------------
r12407 | cbiere | 2006-11-21 03:14:52 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Counter-gnoozled.

------------------------------------------------------------------------
r12406 | cbiere | 2006-11-21 02:53:21 -0500 (Tue, 21 Nov 2006) | 4 lines

 * Removed the "Path" column from the search results instead concatenate
   the strings.
 * Fixed drag & drop for local results.

------------------------------------------------------------------------
r12405 | cbiere | 2006-11-21 02:51:18 -0500 (Tue, 21 Nov 2006) | 4 lines

 * Removed the "Path" column from the search results instead concatenate
   the strings.
 * Fixed drag & drop for local results.

------------------------------------------------------------------------
r12404 | cbiere | 2006-11-21 02:45:51 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Put the search bar above the sidebar as in GTK2.

------------------------------------------------------------------------
r12403 | cbiere | 2006-11-21 02:06:30 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Show a warning at the end instead.

------------------------------------------------------------------------
r12402 | cbiere | 2006-11-21 02:04:55 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Added links to the web interface for the mailing lists.

------------------------------------------------------------------------
r12401 | cbiere | 2006-11-21 00:35:00 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Added dist module to detect posix_fadvise().

------------------------------------------------------------------------
r12400 | cbiere | 2006-11-21 00:12:59 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Use vfork() instead of fork().

------------------------------------------------------------------------
r12399 | cbiere | 2006-11-21 00:11:38 -0500 (Tue, 21 Nov 2006) | 3 lines

 * Don't show anything in the "Encoding" column for local results, we know
   it's UTF-8.

------------------------------------------------------------------------
r12398 | cbiere | 2006-11-21 00:10:20 -0500 (Tue, 21 Nov 2006) | 2 lines

 * Added compat_fadvise_sequential(). See posix_fadvise(2).

------------------------------------------------------------------------
r12397 | cbiere | 2006-11-20 23:37:50 -0500 (Mon, 20 Nov 2006) | 4 lines

 * Changed the default for "official" to true.
 * Emit a warning if "official" is set to false.
 * Don't ask for this flag interactively.

------------------------------------------------------------------------
r12396 | cbiere | 2006-11-20 21:57:15 -0500 (Mon, 20 Nov 2006) | 2 lines

 * share_scan(): Removed debug message which showed the time spent sorting.

------------------------------------------------------------------------
r12395 | cbiere | 2006-11-20 21:35:32 -0500 (Mon, 20 Nov 2006) | 2 lines

 * d_step_compute(): Ignore temporary errors from read(), just in case.

------------------------------------------------------------------------
r12394 | cbiere | 2006-11-20 21:29:47 -0500 (Mon, 20 Nov 2006) | 5 lines

 * Suppress irrelevant columns for browse host results.
 * Replaced some gm_snprintf() with uint32_to_string_buf().
 * Show "maybe" instead of a small 's' for results that are part of a set that
   contains definitely spam.

------------------------------------------------------------------------
r12393 | cbiere | 2006-11-20 21:25:23 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Added GCC_pipe.

------------------------------------------------------------------------
r12392 | cbiere | 2006-11-20 21:24:24 -0500 (Mon, 20 Nov 2006) | 3 lines

 * Added madvise() wrappers so that we don't have to check for availability
   elsewhere.

------------------------------------------------------------------------
r12391 | cbiere | 2006-11-20 21:05:20 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12390 | cbiere | 2006-11-20 20:43:21 -0500 (Mon, 20 Nov 2006) | 4 lines

 * Added dist module to check whether GCC -pipe can used. This flag can cause
   a significant decrease in build time. On some targets -pipe swallows the
   code or compiling just fails. These checks should catch that.

------------------------------------------------------------------------
r12389 | cbiere | 2006-11-20 20:28:50 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Use gccversion.

------------------------------------------------------------------------
r12388 | cbiere | 2006-11-20 20:15:27 -0500 (Mon, 20 Nov 2006) | 5 lines

 * Regenerated with locally modified dist modules:
   * mcon/U/gccvers.U: Don't execute anything, be cross-compile-friendly.
   * mcon/U/d_flexfnam.U, mcon/U/mkdep.U, mcon/U/Cross.U: Respect $TMPDIR
     and only fall back to /tmp if it's not set.

------------------------------------------------------------------------
r12387 | cbiere | 2006-11-20 18:33:13 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Mark search result sets from browsing with ST_BROWSE.

------------------------------------------------------------------------
r12386 | cbiere | 2006-11-20 18:04:04 -0500 (Mon, 20 Nov 2006) | 6 lines

 * Reduced the default for download_max_retries to 16. 50 is just fucking
   insane and also causes a heavy delay if you have to wade through tons
   of bogus addresses. I'd think 2 or 3 should be sane but we might be
   easily losing sources on congestion or when temporary offline, so it's
   16 for now.

------------------------------------------------------------------------
r12385 | cbiere | 2006-11-20 17:54:11 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Gnoozle elsewhere.

------------------------------------------------------------------------
r12384 | cbiere | 2006-11-20 16:32:55 -0500 (Mon, 20 Nov 2006) | 3 lines

 * Added -Dyacc=bison to the example so that Configure doesn't ask a stupid
   question in case neither yacc nor bison are installed.

------------------------------------------------------------------------
r12383 | cbiere | 2006-11-20 15:21:51 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Gnoozle yourself.

------------------------------------------------------------------------
r12382 | cbiere | 2006-11-20 14:32:34 -0500 (Mon, 20 Nov 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12381 | cbiere | 2006-11-20 13:28:22 -0500 (Mon, 20 Nov 2006) | 3 lines

 * Don't ask the user whether they want to use -momit-leaf-frame-pointer. If
   it works use, otherwise leave it out.

------------------------------------------------------------------------
r12380 | cbiere | 2006-11-20 07:31:39 -0500 (Mon, 20 Nov 2006) | 6 lines

 * upload_request():
   * Don't shrink the socket send buffer. I think this just
     causes unjustified penalty and temporary stalls are likely to happen.
   * Set the send socket buffer to 64 KiB if we're going to upload a file
     chunk for maximum throughput.

------------------------------------------------------------------------
r12379 | cbiere | 2006-11-20 04:24:14 -0500 (Mon, 20 Nov 2006) | 4 lines

 * Moved code from search_gui_new_search_entered() to
   search_gui_handle_browse() and search_gui_handle_query() so that "browse:"
   works also from the shell interface.

------------------------------------------------------------------------
r12378 | cbiere | 2006-11-19 12:44:13 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Compile the code unconditionally.

------------------------------------------------------------------------
r12377 | cbiere | 2006-11-19 10:17:51 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Added command-line option --exec_on_crash.

------------------------------------------------------------------------
r12376 | cbiere | 2006-11-19 09:55:27 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Use backtrace instead of bt because it's less cryptic.

------------------------------------------------------------------------
r12375 | cbiere | 2006-11-19 09:53:37 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Apparently our crashes are not good enough for GDB.

------------------------------------------------------------------------
r12374 | cbiere | 2006-11-19 09:51:34 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Include <sys/wait.h> too.

------------------------------------------------------------------------
r12373 | cbiere | 2006-11-19 09:41:43 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Set the close-on-exec flag on sockets and pipes.

------------------------------------------------------------------------
r12372 | cbiere | 2006-11-19 07:38:48 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Added set_close_on_exec().

------------------------------------------------------------------------
r12371 | cbiere | 2006-11-19 06:57:16 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Added support for spectacular crashes.

------------------------------------------------------------------------
r12370 | cbiere | 2006-11-19 06:52:33 -0500 (Sun, 19 Nov 2006) | 3 lines

 * prot_strdup(): Use round_pagesize_fast() because alloc_pages_intern()
   assumes it was used.

------------------------------------------------------------------------
r12369 | cbiere | 2006-11-19 06:25:49 -0500 (Sun, 19 Nov 2006) | 3 lines

 * buffers_match(): Changed secondary loop condition to assertion check for
   clarity.

------------------------------------------------------------------------
r12368 | cbiere | 2006-11-19 06:23:59 -0500 (Sun, 19 Nov 2006) | 4 lines

 * Removed unnecessary #include.
 * Added RCSID().
 * Added doxygen stuff.

------------------------------------------------------------------------
r12367 | cbiere | 2006-11-19 05:52:40 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Added prot_strdup().

------------------------------------------------------------------------
r12366 | cbiere | 2006-11-19 03:34:23 -0500 (Sun, 19 Nov 2006) | 2 lines

 * Added check to detect presence of "d_type" in "struct dirent".

------------------------------------------------------------------------
r12365 | cbiere | 2006-11-19 03:23:18 -0500 (Sun, 19 Nov 2006) | 4 lines

 * recurse_scan_intern(): Optimized so that we can skip some work
   in certain cases on systems with a struct dirent that has a member
   "d_type" which tells us the file mode without a stat().

------------------------------------------------------------------------
r12364 | cbiere | 2006-11-19 00:37:44 -0500 (Sun, 19 Nov 2006) | 5 lines

 * Use a hashtable instead of a list to lookup whether a file with a given
   filename extension is supposed to be shared.
 * Removed "struct extension" as it's not used anymore.
 * Don't export "extensions" and "shared_dirs".

------------------------------------------------------------------------
r12363 | cbiere | 2006-11-18 22:33:21 -0500 (Sat, 18 Nov 2006) | 6 lines

 * Integrated patch by Llyod Bryant for faster scanning of shared files.
 * recurse_scan_intern(): Move a couple of code to share_scan_add_file()
   for better readability.
 * Treat "--all--" only specially if it's the only filename extension to
   be shared.

------------------------------------------------------------------------
r12362 | cbiere | 2006-11-18 20:19:15 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Ensure S_ISLNK() is defined. Patch by Lloyd Bryant.

------------------------------------------------------------------------
r12361 | cbiere | 2006-11-18 19:21:23 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Mention "remote_shell_timeout".

------------------------------------------------------------------------
r12360 | cbiere | 2006-11-18 19:03:32 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Dead or alive, you're comin' with me.

------------------------------------------------------------------------
r12359 | cbiere | 2006-11-18 17:59:50 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Always use fast_assert() instead of assert() for RUNTIME_ASSERT().

------------------------------------------------------------------------
r12358 | cbiere | 2006-11-18 06:48:28 -0500 (Sat, 18 Nov 2006) | 2 lines

 * huge_improbable_sha1(): A bit simplified.

------------------------------------------------------------------------
r12357 | cbiere | 2006-11-18 05:58:40 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Wir kaufen nix!

------------------------------------------------------------------------
r12356 | cbiere | 2006-11-18 05:45:11 -0500 (Sat, 18 Nov 2006) | 6 lines

 * Replaced some macros with static inline functions.
 * Removed unnecessary casts.
 * Removed EBUSY from list of non-fatal errors; this was only for sendfile()
   with SF_NODISKIO.
 * Style fixes.

------------------------------------------------------------------------
r12355 | cbiere | 2006-11-18 05:40:45 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r12354 | cbiere | 2006-11-18 04:37:51 -0500 (Sat, 18 Nov 2006) | 14 lines

 * file_info_has_trailer(): Changed return type to int, so that errors
   can be handled appropriately.
 * shared_file_sort_by_mtime(): Check the magic only instead of
   using shared_file_check() because the latter causes a lot overhead
   for this tiny function.
 * Simplified huge.c a lot so that we don't need
   "waiting_for_library_build_complete". Just use the "shared_file_t"
   instead of creating a similar context. This makes the "file_index"
   irrelevant as well and it's not used here anymore.
 * struct sha1_cache_entry: Use a SHA-1 atom instead of a buffer.
 * Added shared_file_deindex() to ensure that a "shared_file_t" is
   removed from the file_table[] array and the "file_basenames" hashtable
   before it is freed.

------------------------------------------------------------------------
r12353 | cbiere | 2006-11-18 00:28:52 -0500 (Sat, 18 Nov 2006) | 3 lines

 * Fixed the GNUTLS dist module so that we don't add compiler flags for it,
   if -Ud_gnutls was specified.

------------------------------------------------------------------------
r12352 | cbiere | 2006-11-18 00:14:07 -0500 (Sat, 18 Nov 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12351 | cbiere | 2006-11-17 03:26:06 -0500 (Fri, 17 Nov 2006) | 3 lines

 * search_gui_create_record(): For local search results, the filename is
   already UTF-8 encoded.

------------------------------------------------------------------------
r12350 | cbiere | 2006-11-17 03:24:00 -0500 (Fri, 17 Nov 2006) | 4 lines

 * search_gui_add_record(): Don't show anything in the "info" and "loc" column
   for local results.
   

------------------------------------------------------------------------
r12349 | cbiere | 2006-11-17 03:22:04 -0500 (Fri, 17 Nov 2006) | 2 lines

 * Use pointer_hash_func(); this should increase the density of the hash table.

------------------------------------------------------------------------
r12348 | cbiere | 2006-11-17 03:20:28 -0500 (Fri, 17 Nov 2006) | 2 lines

 * Removed unnecessary sort_gslist_with_qsort() again.

------------------------------------------------------------------------
r12347 | cbiere | 2006-11-17 03:17:55 -0500 (Fri, 17 Nov 2006) | 5 lines

 * Integrated patch by Lloyd Bryant to sort the file index by
   file modification time.
 * share_scan(): Removed unnecessary variable "now", just use tm_time().
 * Removed variable "kbytes_scanned"; "bytes_scanned / 1024" should be fine.

------------------------------------------------------------------------
r12346 | cbiere | 2006-11-16 21:48:19 -0500 (Thu, 16 Nov 2006) | 2 lines

 * Added sort_gslist_with_qsort() and pointer_hash_func().

------------------------------------------------------------------------
r12345 | cbiere | 2006-11-15 23:02:49 -0500 (Wed, 15 Nov 2006) | 3 lines

 * Fixed a - very theoretical - issue which would allow to crack the
   shell authentication token in 32 * 32 steps with a timing attack.

------------------------------------------------------------------------
r12344 | cbiere | 2006-11-15 22:56:22 -0500 (Wed, 15 Nov 2006) | 3 lines

 * Rewritten to use open hashing instead. Let's see whether it has better
   performance.

------------------------------------------------------------------------
r12343 | cbiere | 2006-11-13 22:26:36 -0500 (Mon, 13 Nov 2006) | 3 lines

 * unique_filename(): Don't bail out on error but return NULL. This handled
   gracefully except in core/fileinfo.c where we bail out anyway.

------------------------------------------------------------------------
r12342 | cbiere | 2006-11-13 22:19:19 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Added GUI control for "search_results_expose_relative_paths".

------------------------------------------------------------------------
r12341 | cbiere | 2006-11-13 21:43:43 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Disable regression checks once more.

------------------------------------------------------------------------
r12340 | cbiere | 2006-11-13 21:21:06 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Show relative paths for HTML browsing too.

------------------------------------------------------------------------
r12339 | cbiere | 2006-11-13 21:15:49 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Disable regression checks again.

------------------------------------------------------------------------
r12338 | cbiere | 2006-11-13 20:46:25 -0500 (Mon, 13 Nov 2006) | 3 lines

 * Added support for matching queries against relative paths and reporting
   these in search results using GGEP PATH.

------------------------------------------------------------------------
r12337 | cbiere | 2006-11-13 20:06:42 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Added property "search_results_expose_relative_paths".

------------------------------------------------------------------------
r12336 | cbiere | 2006-11-13 18:33:48 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Added normalize_dir_separators() and skip_dir_separators().

------------------------------------------------------------------------
r12335 | cbiere | 2006-11-13 15:57:42 -0500 (Mon, 13 Nov 2006) | 2 lines

 * bio_sendfile(): Initialize "written" to zero, just in case.

------------------------------------------------------------------------
r12334 | cbiere | 2006-11-13 15:55:20 -0500 (Mon, 13 Nov 2006) | 3 lines

 * bio_sendfile(): Removed use of SF_NODISKIO. This is either broken or
   insufficiently documented.

------------------------------------------------------------------------
r12333 | cbiere | 2006-11-13 15:21:43 -0500 (Mon, 13 Nov 2006) | 3 lines

 * bio_sendfile(): Fixed bug caused by not handling EBUSY from sendfile()
   with the SF_NODISKIO flag correctly (FreeBSD).

------------------------------------------------------------------------
r12332 | cbiere | 2006-11-13 13:07:12 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Removed pointless whitespace.

------------------------------------------------------------------------
r12331 | cbiere | 2006-11-13 12:49:49 -0500 (Mon, 13 Nov 2006) | 7 lines

 * get_results_set():
   * Don't trash the namespace with a variable name like "r" longer
     than necessary.
   * Handle GGEP "PATH".
 * search_results():
   * Corrected inverted logic.

------------------------------------------------------------------------
r12330 | cbiere | 2006-11-13 12:44:29 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Added a path column for search results.

------------------------------------------------------------------------
r12329 | cbiere | 2006-11-13 12:36:58 -0500 (Mon, 13 Nov 2006) | 2 lines

 * Added unknown_to_ui_string() and the "lazy" variant.

------------------------------------------------------------------------
r12328 | cbiere | 2006-11-12 16:55:30 -0500 (Sun, 12 Nov 2006) | 2 lines

 * tls_init(): Forgot const-qualifier.

------------------------------------------------------------------------
r12327 | cbiere | 2006-11-12 16:37:50 -0500 (Sun, 12 Nov 2006) | 2 lines

 * tls_init(): Corrected prototype.

------------------------------------------------------------------------
r12326 | cbiere | 2006-11-12 08:20:58 -0500 (Sun, 12 Nov 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r12325 | cbiere | 2006-11-12 07:46:30 -0500 (Sun, 12 Nov 2006) | 3 lines

 * Small fix to remove gtk_label_set_width_chars(). This way the code might
   still compile with Gtk+ 2.4.

------------------------------------------------------------------------
r12324 | cbiere | 2006-11-12 07:43:37 -0500 (Sun, 12 Nov 2006) | 2 lines

 * Replaced macro dl_server_valid() with static inline function.

------------------------------------------------------------------------
r12323 | cbiere | 2006-11-12 07:28:56 -0500 (Sun, 12 Nov 2006) | 2 lines

 * qrt_build_query_target(): Use random_raw() instead of random_value().

------------------------------------------------------------------------
r12322 | cbiere | 2006-11-12 07:10:41 -0500 (Sun, 12 Nov 2006) | 3 lines

 * Added const-qualifiers.
 * Minor simplification.

------------------------------------------------------------------------
r12321 | cbiere | 2006-11-12 06:45:46 -0500 (Sun, 12 Nov 2006) | 3 lines

 * Changed macro RT_SLOT_READ() to static inline function.
 * merge_table_into_arena(): Slightly optimized.

------------------------------------------------------------------------
r12320 | cbiere | 2006-11-12 06:29:05 -0500 (Sun, 12 Nov 2006) | 2 lines

 * nodes_is_connected(): Optimized and simplified.

------------------------------------------------------------------------
r12319 | cbiere | 2006-11-12 06:20:59 -0500 (Sun, 12 Nov 2006) | 2 lines

 * node_is_gtkg(): Simplified. Maybe this should be cached.

------------------------------------------------------------------------
r12318 | cbiere | 2006-11-12 06:12:50 -0500 (Sun, 12 Nov 2006) | 2 lines

 * http_range_merge(): Reduce global warming.

------------------------------------------------------------------------
r12317 | cbiere | 2006-11-12 04:19:11 -0500 (Sun, 12 Nov 2006) | 3 lines

 * uint64_to_string_buf(): Check whether uint32_to_string_buf() is sufficient
   because most machines are still 32-bit.

------------------------------------------------------------------------
r12316 | cbiere | 2006-11-11 23:08:48 -0500 (Sat, 11 Nov 2006) | 3 lines

 * Integrated patch by Lloyd Bryant for partial randomization of search
   results.

------------------------------------------------------------------------
r12315 | cbiere | 2006-11-11 16:25:27 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Enable VMM_INVALIDATE_FREE_PAGES and VMM_GREEDY_PAGE_CACHE for now.

------------------------------------------------------------------------
r12314 | cbiere | 2006-11-11 16:08:40 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Get rid of noisy timestamp.

------------------------------------------------------------------------
r12313 | cbiere | 2006-11-11 16:07:32 -0500 (Sat, 11 Nov 2006) | 3 lines

 * Use a wildcard instead of an arbitrary specific version, so that one can
   copy & paste.

------------------------------------------------------------------------
r12312 | cbiere | 2006-11-11 16:05:22 -0500 (Sat, 11 Nov 2006) | 3 lines

 * Added dump_received_gnutella_packets to log all received traffic to
   $GTK_GNUTELLA_DIR/packets_rx.dump.

------------------------------------------------------------------------
r12311 | cbiere | 2006-11-11 15:56:14 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Added debhelper and fakeroot as dependencies.

------------------------------------------------------------------------
r12310 | cbiere | 2006-11-11 15:29:25 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Show the host address too in case of TLS errors.

------------------------------------------------------------------------
r12309 | cbiere | 2006-11-11 03:50:30 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Ching, chang, chong, spamming is wlong.

------------------------------------------------------------------------
r12308 | cbiere | 2006-11-11 03:44:04 -0500 (Sat, 11 Nov 2006) | 3 lines

 * If it smells like a Jironitard, if it spams like a Jironitard, then it
   is a Jironitard.

------------------------------------------------------------------------
r12307 | cbiere | 2006-11-11 03:35:58 -0500 (Sat, 11 Nov 2006) | 3 lines

 * host_timer(): Fixed bug which caused exceeding the "quick-connect"
   connection limit due to a typo.

------------------------------------------------------------------------
r12306 | cbiere | 2006-11-11 03:22:23 -0500 (Sat, 11 Nov 2006) | 4 lines

 * Removed GGEP-stripping. All nodes must be able to handle packets with
   GGEP. This has been mandatory for years and this code was likely broken
   anyway.

------------------------------------------------------------------------
r12305 | cbiere | 2006-11-11 03:19:08 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Added another UHC.

------------------------------------------------------------------------
r12304 | cbiere | 2006-11-11 03:16:33 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r12303 | cbiere | 2006-11-11 03:11:46 -0500 (Sat, 11 Nov 2006) | 3 lines

 * Don't insert a timestamp so that revision.h doesn't show up in diff
   output unnecessarily.

------------------------------------------------------------------------
r12302 | cbiere | 2006-11-11 03:07:18 -0500 (Sat, 11 Nov 2006) | 2 lines

 * Removed unneccessary macro.

------------------------------------------------------------------------
r12301 | cbiere | 2006-11-10 16:04:04 -0500 (Fri, 10 Nov 2006) | 2 lines

 * Back to the future.

------------------------------------------------------------------------
r12300 | cbiere | 2006-11-10 13:42:20 -0500 (Fri, 10 Nov 2006) | 2 lines

 * Another Jironitard.

------------------------------------------------------------------------
r12299 | cbiere | 2006-11-10 12:55:12 -0500 (Fri, 10 Nov 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12298 | cbiere | 2006-11-10 10:59:30 -0500 (Fri, 10 Nov 2006) | 2 lines

 * 155 new items.

------------------------------------------------------------------------
r12297 | cbiere | 2006-11-10 00:26:22 -0500 (Fri, 10 Nov 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r12293 | cbiere | 2006-11-09 17:55:17 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Release 0.96.3 stable.

------------------------------------------------------------------------
r12292 | cbiere | 2006-11-09 17:53:21 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Corrected and added some information.

------------------------------------------------------------------------
r12291 | cbiere | 2006-11-09 17:09:26 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r12290 | cbiere | 2006-11-09 17:07:21 -0500 (Thu, 09 Nov 2006) | 2 lines

 * url_normalize(): Allow port 443 as well.

------------------------------------------------------------------------
r12289 | cbiere | 2006-11-09 16:09:43 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12288 | cbiere | 2006-11-09 15:46:43 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r12287 | cbiere | 2006-11-09 15:15:51 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Another spamtard.

------------------------------------------------------------------------
r12286 | cbiere | 2006-11-09 13:53:41 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Moved to shell.txt.

------------------------------------------------------------------------
r12285 | cbiere | 2006-11-09 13:41:48 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Renamed remote-shell.txt to shell.txt.

------------------------------------------------------------------------
r12284 | cbiere | 2006-11-09 13:40:24 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Renamed remote-shell.txt to shell.txt.

------------------------------------------------------------------------
r12283 | cbiere | 2006-11-09 13:39:12 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Document new commands.

------------------------------------------------------------------------
r12282 | cbiere | 2006-11-09 13:26:21 -0500 (Thu, 09 Nov 2006) | 2 lines

 * true_expr(): Don't print the message if not debugging.

------------------------------------------------------------------------
r12281 | cbiere | 2006-11-09 13:22:42 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12280 | cbiere | 2006-11-09 13:21:18 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Additional strings.

------------------------------------------------------------------------
r12278 | cbiere | 2006-11-09 04:00:27 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Cosmetic change to the search bar.

------------------------------------------------------------------------
r12277 | cbiere | 2006-11-09 03:23:15 -0500 (Thu, 09 Nov 2006) | 2 lines

 * 50 bonus items.

------------------------------------------------------------------------
r12276 | cbiere | 2006-11-09 03:03:24 -0500 (Thu, 09 Nov 2006) | 2 lines

 * 119 new items because it's 11-09.

------------------------------------------------------------------------
r12275 | cbiere | 2006-11-09 02:51:33 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Boom shaka laka laka.

------------------------------------------------------------------------
r12274 | cbiere | 2006-11-09 01:47:39 -0500 (Thu, 09 Nov 2006) | 2 lines

 * tls_print_session_info(): Show address and port of the remote host too.

------------------------------------------------------------------------
r12273 | cbiere | 2006-11-09 01:20:05 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Persist the TLS cache also without SQLite in ~/.gtk-gnutella/tls_cache.

------------------------------------------------------------------------
r12272 | cbiere | 2006-11-09 01:14:06 -0500 (Thu, 09 Nov 2006) | 2 lines

 * file_path_set(): Added assertion checks.

------------------------------------------------------------------------
r12271 | cbiere | 2006-11-09 01:11:22 -0500 (Thu, 09 Nov 2006) | 4 lines

 * gtk_gnutella_exit(): Moved settings_close() further down because it
   releases "config_dir" and "home_dir" which could cause dangling pointers
   or assertion failures if done to early.

------------------------------------------------------------------------
r12270 | cbiere | 2006-11-09 01:07:54 -0500 (Thu, 09 Nov 2006) | 2 lines

 * Changed macro to static inline function.

------------------------------------------------------------------------
r12269 | cbiere | 2006-11-08 22:35:20 -0500 (Wed, 08 Nov 2006) | 7 lines

 * Replaced some macros with static inline functions.
 * create_download():
   * Show the exact reason why a download was queued instead of a generic
     "No download (create)".
   * Use a small random delay instead of none to prevent that we always
     pick the same entries from the queue in the same order.

------------------------------------------------------------------------
r12268 | cbiere | 2006-11-08 19:55:57 -0500 (Wed, 08 Nov 2006) | 6 lines

 * [GTK1] Added popup menu to the search list as in GTK2.
 * [GTK1] Allow multiple selected searches as in GTK2.
 * Merged more or less duplicated GTK1 and GTK2 code.
 * Disabled duplication of browse host searches because it didn't work
   correctly.

------------------------------------------------------------------------
r12267 | cbiere | 2006-11-08 15:57:11 -0500 (Wed, 08 Nov 2006) | 2 lines

 * Typedef struct tth to tth_t for convenience.

------------------------------------------------------------------------
r12266 | cbiere | 2006-11-08 01:49:26 -0500 (Wed, 08 Nov 2006) | 3 lines

 * [GTK2] It is now possible to select multiple searches and apply actions to these
   through the context menu.

------------------------------------------------------------------------
r12265 | cbiere | 2006-11-08 01:43:13 -0500 (Wed, 08 Nov 2006) | 2 lines

 * mq_check_track(): Added assertion check.

------------------------------------------------------------------------
r12264 | cbiere | 2006-11-07 23:44:35 -0500 (Tue, 07 Nov 2006) | 3 lines

 * fi_gui_clear_data(): Fixed bug that might have caused spurious memory
   corruption and/or crashes.

------------------------------------------------------------------------
r12263 | cbiere | 2006-11-07 23:08:53 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12262 | cbiere | 2006-11-07 22:48:26 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Enabled Alpha_mieee.U.

------------------------------------------------------------------------
r12261 | cbiere | 2006-11-07 22:38:46 -0500 (Tue, 07 Nov 2006) | 4 lines

 * Moved some code from main.c to lib/fast_assert.c
 * Renamed struct eject_point to struct assertion_data.
 * Override g_return_if_fail() and g_return_val_if_fail() too.

------------------------------------------------------------------------
r12260 | cbiere | 2006-11-07 22:26:58 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Replaced USE_CUSTOM_ALLOCATOR with USE_MALLOC and inverted meaning so
   that -DUSE_MALLOC can be used if desired. 

------------------------------------------------------------------------
r12259 | cbiere | 2006-11-07 22:24:11 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Moved G_N_ELEMENTS from lib/misc.h to common.h so that there is no
   difference between GLib 1.2 and 2.x.

------------------------------------------------------------------------
r12258 | cbiere | 2006-11-07 21:24:19 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Updated: 1 new string.

------------------------------------------------------------------------
r12257 | cbiere | 2006-11-07 19:37:11 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Leave min/max as before something might rely on the 10 or 90.

------------------------------------------------------------------------
r12256 | cbiere | 2006-11-07 19:32:08 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Corrected mistake in previous commit.

------------------------------------------------------------------------
r12255 | cbiere | 2006-11-07 19:12:58 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Disabled reserved slots and vendor limits by default. This is more trouble
   than it's worth it with the current population of Gnutella.

------------------------------------------------------------------------
r12254 | cbiere | 2006-11-07 17:25:12 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Check whether the compiler supports -mieee and use it to prevent crashes
   with floating point code on Alpha.

------------------------------------------------------------------------
r12253 | cbiere | 2006-11-07 16:16:13 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Removed unnecessary eject_(), we can jump directly to assertion_failure().
 * Removed unnecessary casts from/to long, regparm should work for pointers.

------------------------------------------------------------------------
r12252 | cbiere | 2006-11-07 16:10:20 -0500 (Tue, 07 Nov 2006) | 2 lines

 * Added ALWAYS_INLINE which maps to __attribute__((__always_inline__)).

------------------------------------------------------------------------
r12251 | cbiere | 2006-11-07 12:20:14 -0500 (Tue, 07 Nov 2006) | 4 lines

 * download_has_enough_active_sources(): Take the amount of bytes left to
   download into account so that we don't swarm a few kilobytes from an
   unreasonable amount of sources.

------------------------------------------------------------------------
r12250 | cbiere | 2006-11-07 11:48:24 -0500 (Tue, 07 Nov 2006) | 3 lines

 * Bumped default of max_simultaneous_downloads_per_file to 40 and the upper
   limit to INT_MAX.

------------------------------------------------------------------------
r12249 | cbiere | 2006-11-06 23:40:07 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Enable fast assertions unconditionally per default.

------------------------------------------------------------------------
r12248 | cbiere | 2006-11-06 22:45:49 -0500 (Mon, 06 Nov 2006) | 3 lines

 * Simplified some code and removed assertion_point_ now that fast assertions
   don't use a signal handler anymore.

------------------------------------------------------------------------
r12247 | cbiere | 2006-11-06 21:58:51 -0500 (Mon, 06 Nov 2006) | 5 lines

 * Rewrote "fast" assertions so that they are as portable as the rest of the
   code and can be enabled without remorse or interfere with debugging. The
   generated code is even smaller as this variant doesn't cause GCC to
   insert additional bogus branch instructions.

------------------------------------------------------------------------
r12246 | cbiere | 2006-11-06 21:53:05 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Added more WARN_UNUSED_RESULT and G_GNUC_MALLOC attributes.

------------------------------------------------------------------------
r12245 | cbiere | 2006-11-06 21:45:51 -0500 (Mon, 06 Nov 2006) | 4 lines

 * Renamed WARN_NEED_SENTINEL to G_GNUC_NULL_TERMINATED because that's how
   GLib >= 2.6 calls it.
 * Added REGPARM for "fast" assertions.

------------------------------------------------------------------------
r12244 | cbiere | 2006-11-06 19:23:41 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Removed unused dist modules which were used for ICU.

------------------------------------------------------------------------
r12243 | cbiere | 2006-11-06 15:47:54 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Use __attribute__((__malloc__)) for walloc().

------------------------------------------------------------------------
r12242 | cbiere | 2006-11-06 15:41:55 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Added missing const-qualifiers.

------------------------------------------------------------------------
r12241 | cbiere | 2006-11-06 15:00:57 -0500 (Mon, 06 Nov 2006) | 3 lines

 * Added const qualifiers.
 * get_variable(): Do not ever "temporarily" modify a string.

------------------------------------------------------------------------
r12240 | cbiere | 2006-11-06 13:08:15 -0500 (Mon, 06 Nov 2006) | 4 lines

 * Fixed bug reported by Hauke Hachmann: Dump the upload_stats file even if
   the history is empty so that we don't load the old history on the next
   startup if the user cleared the history.

------------------------------------------------------------------------
r12239 | cbiere | 2006-11-06 12:45:39 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Removed one item; this was really just a typo.

------------------------------------------------------------------------
r12238 | cbiere | 2006-11-06 00:31:33 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Added const-qualifier to "exit_step".

------------------------------------------------------------------------
r12237 | cbiere | 2006-11-06 00:29:32 -0500 (Mon, 06 Nov 2006) | 2 lines

 * Added GUI control for "max_simultaneous_downloads_per_file".

------------------------------------------------------------------------
r12236 | cbiere | 2006-11-05 23:33:31 -0500 (Sun, 05 Nov 2006) | 3 lines

 * socket_connect_prepare(): Added missing return value; mistake from
   previous commit.

------------------------------------------------------------------------
r12235 | cbiere | 2006-11-05 23:19:56 -0500 (Sun, 05 Nov 2006) | 4 lines

 * Changed d->file_info->file_name to download_outname(d) for consistency.
 * Added download_has_enough_active_sources() so that it's possible to
   limit the maximum number of downloads per file.

------------------------------------------------------------------------
r12234 | cbiere | 2006-11-05 23:16:35 -0500 (Sun, 05 Nov 2006) | 2 lines

 * Moved the search bar so that it's above the left sidebar as well.

------------------------------------------------------------------------
r12233 | cbiere | 2006-11-05 23:14:16 -0500 (Sun, 05 Nov 2006) | 2 lines

 * Added property max_simultaneous_downloads_per_file.

------------------------------------------------------------------------
r12232 | cbiere | 2006-11-05 22:42:50 -0500 (Sun, 05 Nov 2006) | 3 lines

 * listen_addr(), listen_addr(): Return zero_host_addr if the respective
   socket isn't active.

------------------------------------------------------------------------
r12231 | cbiere | 2006-11-05 18:49:57 -0500 (Sun, 05 Nov 2006) | 2 lines

 * Some optimizations to reduce the startup time with many downloads.

------------------------------------------------------------------------
r12230 | cbiere | 2006-11-05 18:07:25 -0500 (Sun, 05 Nov 2006) | 3 lines

 * Bail out in case of errors instead of continuing with workaround so that
   we can catch the initial bug.

------------------------------------------------------------------------
r12229 | cbiere | 2006-11-05 10:23:10 -0500 (Sun, 05 Nov 2006) | 4 lines

 * Modified host_addr_family() to return -1 instead of bailing out if
   an IPv6 address is passed albeit IPv6 support was disabled at
   compile-time. Adjusted users of it to check for -1.

------------------------------------------------------------------------
r12228 | cbiere | 2006-11-05 07:56:44 -0500 (Sun, 05 Nov 2006) | 3 lines

 * add_file(): Fixed another miuse of "struct". Thanks to Paul Brook
   for pointing this out.

------------------------------------------------------------------------
r12227 | rmanfredi | 2006-11-04 13:45:06 -0500 (Sat, 04 Nov 2006) | 2 lines

Uh oh, wider range for GTKG spammer.

------------------------------------------------------------------------
r12226 | cbiere | 2006-11-04 05:44:13 -0500 (Sat, 04 Nov 2006) | 2 lines

 * Welcome to the hall of shame.

------------------------------------------------------------------------
r12225 | cbiere | 2006-11-04 02:50:06 -0500 (Sat, 04 Nov 2006) | 3 lines

 * bw_http_out_enabled_changed(): Fix mistake in previous commit; corrected
   widget name.

------------------------------------------------------------------------
r12224 | cbiere | 2006-11-04 00:21:11 -0500 (Sat, 04 Nov 2006) | 2 lines

 * Added search_new_r_set().

------------------------------------------------------------------------
r12223 | cbiere | 2006-11-04 00:17:16 -0500 (Sat, 04 Nov 2006) | 2 lines

 * Keep certain columns empty for local search results.

------------------------------------------------------------------------
r12222 | cbiere | 2006-11-03 23:50:30 -0500 (Fri, 03 Nov 2006) | 2 lines

 * search_locally(): Mark set with ST_LOCAL.

------------------------------------------------------------------------
r12221 | cbiere | 2006-11-03 23:48:55 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Added flag ST_LOCAL to mark result sets as received from a local search.

------------------------------------------------------------------------
r12220 | cbiere | 2006-11-03 23:20:13 -0500 (Fri, 03 Nov 2006) | 3 lines

 * [GTK2] Show nothing instead of "??" if the country code of a search
   result is unknown.

------------------------------------------------------------------------
r12219 | cbiere | 2006-11-03 22:43:53 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Added magic to "struct shared_file".
 * Added shared_file_check().

------------------------------------------------------------------------
r12218 | cbiere | 2006-11-03 22:33:58 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Re-enabled regression checks.

------------------------------------------------------------------------
r12217 | cbiere | 2006-11-03 22:27:14 -0500 (Fri, 03 Nov 2006) | 4 lines

 * utf8_is_valid_data():
  * This was completely broken.
  * Corrected doxygen comments.

------------------------------------------------------------------------
r12216 | cbiere | 2006-11-03 21:10:23 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12215 | cbiere | 2006-11-03 21:06:55 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Bail out if one of the mandatory dependencies wasn't found or is unusable.

------------------------------------------------------------------------
r12214 | cbiere | 2006-11-03 21:04:04 -0500 (Fri, 03 Nov 2006) | 4 lines

 * If compiling against GLib 2.x check for g_object_new() to see whether
   compiling against glib-2.0 with gobject-2.0 works. On success set "d_glib"
   which can be used later to bailout if GLib is a mandatory dependency.

------------------------------------------------------------------------
r12213 | cbiere | 2006-11-03 20:56:42 -0500 (Fri, 03 Nov 2006) | 4 lines

 * Lowercased SOCKET_USES_TLS and SOCKET_WITH_TLS as these are always
   static inline functions and never macros. This fixes a warning in
   use_sendfile() when compiling without GNUTLS.

------------------------------------------------------------------------
r12212 | cbiere | 2006-11-03 20:43:46 -0500 (Fri, 03 Nov 2006) | 4 lines

 * Try to compile and link a minimal Gtk+ program to check whether we
   can compile against Gtk+ and define "d_gtk" on success. This can be
   used to bailout later if Gtk+ is a mandatory dependency.

------------------------------------------------------------------------
r12211 | cbiere | 2006-11-03 20:40:21 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Ask pkg-config for gobject-2.0 too. This is automagically include in
   gtk+-2.0 but not in glib-2.0. It matters for headless mode.

------------------------------------------------------------------------
r12210 | cbiere | 2006-11-03 20:28:01 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Renamed struct members and variables called "index" to prevent clashes or
   bogus warnings caused by index().

------------------------------------------------------------------------
r12209 | cbiere | 2006-11-03 17:19:18 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Don't use X11 as default for GTA_INTERFACE. If #else is reached there
   was an error during Configure, thus bail out.

------------------------------------------------------------------------
r12208 | cbiere | 2006-11-03 17:09:33 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Bail out with an error message if the GLib headers are missing.

------------------------------------------------------------------------
r12207 | rmanfredi | 2006-11-03 17:05:36 -0500 (Fri, 03 Nov 2006) | 3 lines

Updated to mention the Debian-specific steps for building and installing
the package.

------------------------------------------------------------------------
r12206 | cbiere | 2006-11-03 16:51:19 -0500 (Fri, 03 Nov 2006) | 4 lines

 * Added missing "install" for apt-get.
 * Added section headers.
 * Added "gcc" and "make" as dependencies.

------------------------------------------------------------------------
r12205 | cbiere | 2006-11-03 15:51:13 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Added README.Debian.

------------------------------------------------------------------------
r12204 | cbiere | 2006-11-03 15:49:09 -0500 (Fri, 03 Nov 2006) | 2 lines

 * Supplementary Compile Instructions for Debian-based Systems.

------------------------------------------------------------------------
r12203 | cbiere | 2006-11-03 00:36:01 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Removed unnecessary alias variables also because GLibC pollutes the global
   namespace with a "getline" function causing a shadow warning.

------------------------------------------------------------------------
r12202 | cbiere | 2006-11-03 00:22:33 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Renamed parameter and struct member "free" to "dealloc". The former is
   a reserved identifier.

------------------------------------------------------------------------
r12201 | cbiere | 2006-11-03 00:14:47 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Modified features.[ch] so that no details are unnecessarily exposed and use
   enums instead of pointers.

------------------------------------------------------------------------
r12200 | cbiere | 2006-11-03 00:05:31 -0500 (Fri, 03 Nov 2006) | 3 lines

 * Renamed parameter in prototype as it causes a warning with -Wshadow, at
   least with some versions of GCC.

------------------------------------------------------------------------
r12199 | cbiere | 2006-11-02 23:12:59 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Added -Wshadow in example.

------------------------------------------------------------------------
r12198 | cbiere | 2006-11-02 23:11:55 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12197 | cbiere | 2006-11-02 23:06:16 -0500 (Thu, 02 Nov 2006) | 3 lines

 * Added -Wshadow to default flags for GCC >= 3.0
 * setlinebuf() has been replaced with setvbuf().

------------------------------------------------------------------------
r12196 | cbiere | 2006-11-02 22:38:47 -0500 (Thu, 02 Nov 2006) | 3 lines

 * Removed unnecessary uses of gnet_props_get_*().
 * Fixed -Wshadow warnings, Gtk-Gnutella should be clean now.

------------------------------------------------------------------------
r12195 | cbiere | 2006-11-02 21:20:22 -0500 (Thu, 02 Nov 2006) | 3 lines

 * Replaced exported variables for widgets with accessors.
 * Fixed harmless warnings that showed up with -Wshadow.

------------------------------------------------------------------------
r12194 | cbiere | 2006-11-02 20:33:16 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Use also listen_addr6() instead of "local_ip6".

------------------------------------------------------------------------
r12193 | cbiere | 2006-11-02 20:03:06 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Anotha bad muthafucka.

------------------------------------------------------------------------
r12192 | cbiere | 2006-11-02 17:10:08 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Correct one translation.

------------------------------------------------------------------------
r12191 | cbiere | 2006-11-02 15:48:12 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Some technical fixes.

------------------------------------------------------------------------
r12190 | cbiere | 2006-11-02 15:41:19 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Update provided by FlashCode.

------------------------------------------------------------------------
r12189 | cbiere | 2006-11-02 15:20:21 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Removed place holders and other strings that shouldn't be translated.

------------------------------------------------------------------------
r12188 | cbiere | 2006-11-02 13:55:35 -0500 (Thu, 02 Nov 2006) | 2 lines

 * reopen_log_files(): Use setvbuf() which is plain C89 unlike setlinebuf().

------------------------------------------------------------------------
r12187 | rmanfredi | 2006-11-02 12:32:42 -0500 (Thu, 02 Nov 2006) | 4 lines

The "status" command must report the forced local IP, if configured.
Therefore, do not print "local_ip" but call listen_addr() to get the
proper value (the one GTKG advertises in its query hits).

------------------------------------------------------------------------
r12186 | rmanfredi | 2006-11-02 12:20:42 -0500 (Thu, 02 Nov 2006) | 3 lines

Turn on line-buffering for manually opened logs, so that one can monitor
them with "tail -f" interactively, without annoying stdio delay.

------------------------------------------------------------------------
r12185 | cbiere | 2006-11-02 09:28:28 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Moved prototype of node_peermode_to_string() to correct header file.

------------------------------------------------------------------------
r12184 | cbiere | 2006-11-02 02:10:12 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Small fixes in status display.

------------------------------------------------------------------------
r12183 | cbiere | 2006-11-02 01:23:05 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Further spammers.

------------------------------------------------------------------------
r12182 | cbiere | 2006-11-02 01:12:12 -0500 (Thu, 02 Nov 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r12181 | cbiere | 2006-11-01 20:33:40 -0500 (Wed, 01 Nov 2006) | 2 lines

 * Added Lloyd Bryant.

------------------------------------------------------------------------
r12180 | cbiere | 2006-11-01 20:29:53 -0500 (Wed, 01 Nov 2006) | 4 lines

 * Applied (edited) patch by Lloyd Bryant which adds 4 new shell commands.
 * Added enum type for reply codes.
 * shell_read_data(): Fixed minor bug: shell_exec() doesn't return a CMD_*.

------------------------------------------------------------------------
r12179 | cbiere | 2006-11-01 20:21:23 -0500 (Wed, 01 Nov 2006) | 3 lines

 * Added short_rate_to_string_buf(), short_rate_get_string(),
   timestamp_get_string().

------------------------------------------------------------------------
r12178 | cbiere | 2006-11-01 20:15:13 -0500 (Wed, 01 Nov 2006) | 4 lines

 * Added short_string_t. Functions returning "short strings" should use this,
   so that temporary string buffers are less of a hassle and to prevent
   running in "static buffer" traps.

------------------------------------------------------------------------
r12177 | cbiere | 2006-11-01 20:09:54 -0500 (Wed, 01 Nov 2006) | 2 lines

 * Added some useful documentation.

------------------------------------------------------------------------
r12176 | cbiere | 2006-11-01 19:46:39 -0500 (Wed, 01 Nov 2006) | 2 lines

 * Fixed harmless warnings that showed up with -Wshadow.

------------------------------------------------------------------------
r12175 | cbiere | 2006-11-01 19:43:15 -0500 (Wed, 01 Nov 2006) | 2 lines

 * Added node_peermode_to_string() and guc_node_peermode_to_string().

------------------------------------------------------------------------
r12174 | cbiere | 2006-11-01 06:54:23 -0500 (Wed, 01 Nov 2006) | 2 lines

 * Corrected plural form.

------------------------------------------------------------------------
r12173 | cbiere | 2006-11-01 06:40:09 -0500 (Wed, 01 Nov 2006) | 8 lines

 * Removed "Gnutella traffic compression" and "Persistent filters" from
   the overview. These are mandatory, thus bail out if libxml2 or zlib
   wasn't found.
 * Declare DBus, SQlite as experimental - Gtk-Gnutella works fine without.
 * Declare the Remote Shell Interface deprecated; "SSH + gtk-gnutella --shell"
   is the way to go and this feature will most-likely be removed in one of
   the next releases.

------------------------------------------------------------------------
r12172 | cbiere | 2006-10-31 17:18:12 -0500 (Tue, 31 Oct 2006) | 2 lines

 * adns_init(): Assign stdout and stderr to /dev/null too.

------------------------------------------------------------------------
r12171 | cbiere | 2006-10-31 17:13:56 -0500 (Tue, 31 Oct 2006) | 2 lines

 * uhc_send_ping(): Added extra blocks to reduce the lifetime of variables.

------------------------------------------------------------------------
r12170 | cbiere | 2006-10-31 17:12:29 -0500 (Tue, 31 Oct 2006) | 3 lines

 * socket_read(): Don't send X-Token to hostile peers. Maybe we should send
   even less headers or nothing at all.

------------------------------------------------------------------------
r12169 | cbiere | 2006-10-31 15:48:15 -0500 (Tue, 31 Oct 2006) | 2 lines

 * Minor clean-ups.

------------------------------------------------------------------------
r12168 | cbiere | 2006-10-31 12:23:08 -0500 (Tue, 31 Oct 2006) | 2 lines

 * Added Uğur Çetin.

------------------------------------------------------------------------
r12167 | cbiere | 2006-10-31 11:09:13 -0500 (Tue, 31 Oct 2006) | 3 lines

 * Updated gtk-gnutella.pot.
 * Added Turkish translation provided by Uğur Çetin.

------------------------------------------------------------------------
r12166 | cbiere | 2006-10-29 22:33:09 -0500 (Sun, 29 Oct 2006) | 3 lines

 * gnutella_vendor_set_code(): Fixed endian-issue. This bug was added by
   the recent struct to accessor conversion.

------------------------------------------------------------------------
r12164 | cbiere | 2006-10-29 19:52:39 -0500 (Sun, 29 Oct 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12163 | cbiere | 2006-10-29 19:51:38 -0500 (Sun, 29 Oct 2006) | 3 lines

 * Allow an empty string and "<none>". Otherwise the entries taking IP
   addresses could not be reset.

------------------------------------------------------------------------
r12162 | cbiere | 2006-10-29 19:49:40 -0500 (Sun, 29 Oct 2006) | 2 lines

 * Removed some unnecessary GTK+ signal handlers.

------------------------------------------------------------------------
r12161 | cbiere | 2006-10-29 19:40:56 -0500 (Sun, 29 Oct 2006) | 3 lines

 * Removed all hardcoded GWebCaches.
 * Disabled periodic updates.

------------------------------------------------------------------------
r12160 | cbiere | 2006-10-29 19:37:57 -0500 (Sun, 29 Oct 2006) | 2 lines

 * Updated list of GWCs.

------------------------------------------------------------------------
r12159 | cbiere | 2006-10-29 19:33:30 -0500 (Sun, 29 Oct 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r12158 | cbiere | 2006-10-29 09:58:22 -0500 (Sun, 29 Oct 2006) | 3 lines

 * int32_aligned(): Replaced macros with static inline functions which are
   much more readable.

------------------------------------------------------------------------
r12157 | cbiere | 2006-10-28 11:51:40 -0400 (Sat, 28 Oct 2006) | 2 lines

 * Minor layout fix.

------------------------------------------------------------------------
r12156 | cbiere | 2006-10-28 11:43:53 -0400 (Sat, 28 Oct 2006) | 3 lines

 * qlink_insert_before(): Fixed loop, the iterator must run backwards
   not forward.

------------------------------------------------------------------------
r12155 | cbiere | 2006-10-28 07:22:23 -0400 (Sat, 28 Oct 2006) | 3 lines

 * Use the logo as status icon.
 * Show/Hide the main window when the status icon is clicked.

------------------------------------------------------------------------
r12154 | cbiere | 2006-10-28 06:03:41 -0400 (Sat, 28 Oct 2006) | 2 lines

 * Recycle a pixbuf as icon because using a file requires a full pathname.

------------------------------------------------------------------------
r12153 | cbiere | 2006-10-28 05:52:39 -0400 (Sat, 28 Oct 2006) | 2 lines

 * [Xperimental] Added a GtkStatusIcon (requires Gtk+ >= 2.10.0).

------------------------------------------------------------------------
r12152 | cbiere | 2006-10-28 02:11:15 -0400 (Sat, 28 Oct 2006) | 2 lines

 * Correction: XeeX stinX.

------------------------------------------------------------------------
r12151 | cbiere | 2006-10-28 02:01:39 -0400 (Sat, 28 Oct 2006) | 2 lines

 * XeeX SuXx.

------------------------------------------------------------------------
r12150 | cbiere | 2006-10-27 22:29:51 -0400 (Fri, 27 Oct 2006) | 2 lines

 * Be a good leaf.

------------------------------------------------------------------------
r12149 | cbiere | 2006-10-27 22:24:32 -0400 (Fri, 27 Oct 2006) | 3 lines

 * Reversed noisy_check(); we want to see when the expression evaluates to
   true, not false.

------------------------------------------------------------------------
r12148 | cbiere | 2006-10-27 22:22:46 -0400 (Fri, 27 Oct 2006) | 3 lines

 * socket_udp_extract_dst_addr(): Replaced deprecated socket option
   IPV6_RECVDSTADDR with IPV6_RECVPKTINFO (RFC 3542).

------------------------------------------------------------------------
r12147 | cbiere | 2006-10-27 15:55:09 -0400 (Fri, 27 Oct 2006) | 4 lines

 * Replaced non-portable code which used structs to parse and emit network
   packets with more portable code using accessor functions. This should
   fix gtk-gnutella for the ARM architecture.

------------------------------------------------------------------------
r12146 | rmanfredi | 2006-10-27 03:48:50 -0400 (Fri, 27 Oct 2006) | 2 lines

Fixed for compilation under Cygwin (no IPV6 support).

------------------------------------------------------------------------
r12145 | rmanfredi | 2006-10-27 03:28:28 -0400 (Fri, 27 Oct 2006) | 2 lines

Fixed compilation problem on Cygwin (no IPV6 support).

------------------------------------------------------------------------
r12144 | cbiere | 2006-10-27 00:20:16 -0400 (Fri, 27 Oct 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12143 | cbiere | 2006-10-26 21:48:40 -0400 (Thu, 26 Oct 2006) | 2 lines

 * qrt_apply_patch(): Fixed harmless warnings that showed up with -Wshadow.

------------------------------------------------------------------------
r12142 | cbiere | 2006-10-26 21:22:26 -0400 (Thu, 26 Oct 2006) | 2 lines

 * Fixed harmless warnings that showed up with -Wshadow.

------------------------------------------------------------------------
r12141 | cbiere | 2006-10-26 21:17:39 -0400 (Thu, 26 Oct 2006) | 2 lines

 * Fixed harmless warnings that showed up with -Wshadow.

------------------------------------------------------------------------
r12140 | cbiere | 2006-10-26 20:41:49 -0400 (Thu, 26 Oct 2006) | 7 lines

 * Removed unused macro HEADER_SIZE().
 * Removed unused functio header_size() which was shadowed by variable in
   http.c
 * Removed macro HEADER_LINES().
 * Renamed header_lines() to header_num_lines().
 * Replaced HEADER_LINES() with header_num_lines().

------------------------------------------------------------------------
r12139 | cbiere | 2006-10-26 20:29:37 -0400 (Thu, 26 Oct 2006) | 6 lines

 * reverse_strlcpy(): Uncovered bug with -Wshadow. This bug caused
   a fixed return value of zero so that strings (with decimal numbers)
   might have appeared truncated or invisible.
 * Added assertion checks to prevent the above bug in future.
 * guid_hex_str(): Added const-qualifier.

------------------------------------------------------------------------
r12138 | cbiere | 2006-10-26 20:05:10 -0400 (Thu, 26 Oct 2006) | 3 lines

 * host_addr_matches(): Fixed compiler warning "declaration of 'shift'
   shadows a previous local".

------------------------------------------------------------------------
r12137 | cbiere | 2006-10-25 12:11:23 -0400 (Wed, 25 Oct 2006) | 6 lines

 * bsched_enough_up_bandwidth():
   * Disabled check which could easily cause a demotion to leaf mode due to
     an invalid assumption of the problem source.
   * For the time being, print the expression which causes a return value
     of FALSE.

------------------------------------------------------------------------
r12136 | cbiere | 2006-10-24 19:55:35 -0400 (Tue, 24 Oct 2006) | 2 lines

 * Updated country codes for Serbia and Montenegro.

------------------------------------------------------------------------
r12135 | cbiere | 2006-10-24 11:33:10 -0400 (Tue, 24 Oct 2006) | 2 lines

 * Do not ever unnecessarily expose details of a structure.

------------------------------------------------------------------------
r12134 | cbiere | 2006-10-20 09:51:29 -0400 (Fri, 20 Oct 2006) | 2 lines

 * Added missing files.

------------------------------------------------------------------------
r12133 | cbiere | 2006-10-18 13:42:09 -0400 (Wed, 18 Oct 2006) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r12132 | cbiere | 2006-10-18 11:21:09 -0400 (Wed, 18 Oct 2006) | 3 lines

 * Small fix: Otherwise compilations from tarballs show "r0" in the
   user-agent string as "svn info" will fail.

------------------------------------------------------------------------
r12131 | cbiere | 2006-10-18 10:54:11 -0400 (Wed, 18 Oct 2006) | 2 lines

 * Uncovered more saboteurs.

------------------------------------------------------------------------
r12130 | cbiere | 2006-10-18 10:12:08 -0400 (Wed, 18 Oct 2006) | 2 lines

 * Added missing entries.

------------------------------------------------------------------------
r12129 | cbiere | 2006-10-18 10:02:21 -0400 (Wed, 18 Oct 2006) | 2 lines

 * After the release is before the release.

------------------------------------------------------------------------
r12128 | rmanfredi | 2006-10-18 04:01:36 -0400 (Wed, 18 Oct 2006) | 2 lines

Fixed bad date format causing Debian build tools to complain and (yes!) fail.

------------------------------------------------------------------------
r12119 | cbiere | 2006-10-16 15:54:33 -0400 (Mon, 16 Oct 2006) | 2 lines

 * Release 0.96.2 stable.

------------------------------------------------------------------------
r12118 | cbiere | 2006-10-16 15:47:30 -0400 (Mon, 16 Oct 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r12117 | cbiere | 2006-10-16 15:35:31 -0400 (Mon, 16 Oct 2006) | 2 lines

 * New keys.

------------------------------------------------------------------------
r12116 | cbiere | 2006-10-16 15:33:51 -0400 (Mon, 16 Oct 2006) | 2 lines

 * Fixed warning about unused parameter.

------------------------------------------------------------------------
r12115 | cbiere | 2006-10-16 15:11:40 -0400 (Mon, 16 Oct 2006) | 2 lines

 * Minor irrelevant pending local changes.

------------------------------------------------------------------------
r12114 | cbiere | 2006-10-16 00:01:41 -0400 (Mon, 16 Oct 2006) | 7 lines

 * Added GUI controls to configure the IPv6 address, enable binding to the
   addresses and to configure a IPv6-to-IPv4 transport relay translator prefix.
 * Moved "Enable Browse Host feature" from Preferences->Network to
   Preferences->Uploads.
 * Relabeled "Enable shell control interface" to "Enable remote shell
   control interface".

------------------------------------------------------------------------
r12113 | cbiere | 2006-10-15 17:56:35 -0400 (Sun, 15 Oct 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12112 | cbiere | 2006-10-15 17:19:11 -0400 (Sun, 15 Oct 2006) | 5 lines

 * recurse_scan(): As of rev. 11947 (2006-09-27 )sha1_is_cached() was called
   before found->mtime was initialized, so that file_info_has_trailer() was
   called which caused a modification of the access timestamp of the file. The
   bug was noticed by Chris Winne.

------------------------------------------------------------------------
r12111 | cbiere | 2006-10-15 13:10:46 -0400 (Sun, 15 Oct 2006) | 3 lines

 * Don't hardcode non-portable numeric timestamps into the code,
   date2time() is our friend.

------------------------------------------------------------------------
r12110 | cbiere | 2006-10-15 12:46:34 -0400 (Sun, 15 Oct 2006) | 4 lines

 * version_build_cmp(): Just use CMP().
 * version_ancient_warn(): Use at least time_delta_t even if the rest of
   the code doesn't use time_t in a portable manner.

------------------------------------------------------------------------
r12109 | cbiere | 2006-10-12 09:48:36 -0400 (Thu, 12 Oct 2006) | 2 lines

 * Fixed bug in previous commit.

------------------------------------------------------------------------
r12108 | cbiere | 2006-10-11 23:38:28 -0400 (Wed, 11 Oct 2006) | 3 lines

 * guess_local_addr(): Don't try to guess the own address from a unix domain
   socket connection.

------------------------------------------------------------------------
r12107 | cbiere | 2006-10-11 14:33:22 -0400 (Wed, 11 Oct 2006) | 2 lines

 * Nobody needs SUN_LEN().

------------------------------------------------------------------------
r12106 | cbiere | 2006-10-09 00:24:13 -0400 (Mon, 09 Oct 2006) | 2 lines

 * 45 new items.

------------------------------------------------------------------------
r12105 | cbiere | 2006-10-07 16:04:27 -0400 (Sat, 07 Oct 2006) | 2 lines

 * socket_local_listen(): Fixed s->type.

------------------------------------------------------------------------
r12104 | cbiere | 2006-10-07 15:07:40 -0400 (Sat, 07 Oct 2006) | 2 lines

 * SUN_LEN(): Use a plain sizeof if the macro isn't defined.

------------------------------------------------------------------------
r12103 | cbiere | 2006-10-07 13:29:41 -0400 (Sat, 07 Oct 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r12102 | cbiere | 2006-10-07 13:22:06 -0400 (Sat, 07 Oct 2006) | 3 lines

 * Don't use MakeInstallDirectories(), so that "local_install::" isn't
   defined twice.

------------------------------------------------------------------------
r12101 | cbiere | 2006-10-07 12:45:30 -0400 (Sat, 07 Oct 2006) | 2 lines

 * Regenerated due to change of U/new/d_kqueue.U.

------------------------------------------------------------------------
r12100 | cbiere | 2006-10-07 12:42:35 -0400 (Sat, 07 Oct 2006) | 3 lines

  * Don't check for EVFILT_TIMER. The OpenBSD implementation of kqueue doesn't
    have it and we don't use this anyway.

------------------------------------------------------------------------
r12099 | cbiere | 2006-10-07 12:40:39 -0400 (Sat, 07 Oct 2006) | 2 lines

 * Use "SUN_LEN(&addr)" instead of "sizeof addr" for unix domain sockets.

------------------------------------------------------------------------
r12098 | cbiere | 2006-10-07 12:39:12 -0400 (Sat, 07 Oct 2006) | 2 lines

 * Add SUN_LEN() function if there's no such macro.

------------------------------------------------------------------------
r12097 | cbiere | 2006-10-07 12:32:53 -0400 (Sat, 07 Oct 2006) | 2 lines

 * Use LC_ALL=C for the whole script because svn info is localized.

------------------------------------------------------------------------
r12096 | cbiere | 2006-10-04 04:31:42 -0400 (Wed, 04 Oct 2006) | 18 lines

 * Removed items from the search results popup menu:
   * "auto-download by SHA-1" has been redundant for years; the core
     does this anyway.
   * "auto-download by filename" was an artifact from the pre-SHA-1
     era and has little use nowadays. The same can be achieved by
     adding an auto-download filter.
   * "New search from selected" made no sense as it was. This caused
     an automatic download of all results for the search. Further without
     reading the code it's anything but clear what this button does.
     Searches by SHA-1 or filenames can easily be created by drag & drop
     or copy & paste.
 * Changed buttons in the search filter dialog:
   * "New/Replace" -> "Save" as requested in bug #1568208
     "Filters need improvement".
   * [GTK1] Changed layout of the buttons because "reset stats"
     doesn't belong to save/delete/abort and thus shouldn't be
     grouped with those buttons.

------------------------------------------------------------------------
r12095 | cbiere | 2006-10-03 22:42:03 -0400 (Tue, 03 Oct 2006) | 3 lines

 * node_process_handshake_header(): Allocate "gnet_response" instead of
   using 10 KiB of stack space.

------------------------------------------------------------------------
r12094 | cbiere | 2006-10-03 21:55:15 -0400 (Tue, 03 Oct 2006) | 4 lines

 * node_can_accept_connection(): Fixed bug causing an assertion failure
   in node_process_handshake_header() in leaf mode when manually connecting
   to a non-ultrapeer.

------------------------------------------------------------------------
r12093 | cbiere | 2006-10-03 13:56:48 -0400 (Tue, 03 Oct 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r12092 | cbiere | 2006-09-30 16:09:12 -0400 (Sat, 30 Sep 2006) | 2 lines

 * 30 new items.

------------------------------------------------------------------------
r12091 | cbiere | 2006-09-30 15:31:48 -0400 (Sat, 30 Sep 2006) | 2 lines

 * Czech it out!

------------------------------------------------------------------------
r12090 | cbiere | 2006-09-30 01:39:53 -0400 (Sat, 30 Sep 2006) | 2 lines

 * 6 new items.

------------------------------------------------------------------------
r12089 | cbiere | 2006-09-29 23:25:43 -0400 (Fri, 29 Sep 2006) | 2 lines

 * Fixed copy&paste mistake.

------------------------------------------------------------------------
r12088 | cbiere | 2006-09-29 22:22:21 -0400 (Fri, 29 Sep 2006) | 7 lines

 * fi_gui_set_details(), fi_gui_clear_details():
   * Changed GtkLabel to GtkEntry so that the contents can be copied.
   * Added label_fi_sha1 to show the SHA-1 of a file.
 * fi_gui_numeric_status(): Modified for more useful sorting.
 * fi_gui_cmp_done(): Use 1000 (per mill) instead of 100 (percent)
   for proper sorting.

------------------------------------------------------------------------
r12087 | cbiere | 2006-09-29 22:16:12 -0400 (Fri, 29 Sep 2006) | 4 lines

 * fileinfo_numeric_status():
   * Added missing parameter for fi_gui_relative_done().
   * Use bit-wise-OR instead of '+' for extra status bits.

------------------------------------------------------------------------
r12086 | cbiere | 2006-09-29 22:11:29 -0400 (Fri, 29 Sep 2006) | 7 lines

 * fi_gui_relative_done():
   * Stick to 64-bit arithmetic instead of converting to double.
   * Allow a variable base so that we can calculate more decimal places.
 * fileinfo_numeric_status():
   * Use a base of 1000 for fi_gui_relative_done() because the GUI shows
     a single decimal place which was ignored by the sorting function.

------------------------------------------------------------------------
r12085 | cbiere | 2006-09-29 21:58:21 -0400 (Fri, 29 Sep 2006) | 3 lines

 * [GTK1] Show the SHA-1 of the selected file in the download pane too.
 * [GTK1] Made the size, filename and SHA-1 copy-able.

------------------------------------------------------------------------
r12084 | cbiere | 2006-09-29 21:54:57 -0400 (Fri, 29 Sep 2006) | 3 lines

 * settings_getphysmemsize(): Return the amount of memory in bytes instead of
   kibibytes.

------------------------------------------------------------------------
r12083 | cbiere | 2006-09-29 21:52:43 -0400 (Fri, 29 Sep 2006) | 3 lines

 * kib_size_scale(): Try to undo the division by 1024 for the metric case.
 * short_value(): Fixed copy&paste mistake.

------------------------------------------------------------------------
r12082 | cbiere | 2006-09-29 21:19:30 -0400 (Fri, 29 Sep 2006) | 6 lines

 * Renamed kb_size_scale() to kib_size_scale() because this only used for
   some special cases in which a value is already divided by 1024 but
   never 1000.
 * compact_kb_size(), compact_value(), short_value(): Fixed calculation
   of decimal places for the metric case.

------------------------------------------------------------------------
r12081 | cbiere | 2006-09-29 16:49:46 -0400 (Fri, 29 Sep 2006) | 2 lines

 * 4 new items.

------------------------------------------------------------------------
r12080 | cbiere | 2006-09-29 16:30:43 -0400 (Fri, 29 Sep 2006) | 2 lines

 * 11 new items.

------------------------------------------------------------------------
r12079 | cbiere | 2006-09-28 21:39:07 -0400 (Thu, 28 Sep 2006) | 2 lines

 * 136 new items.

------------------------------------------------------------------------
r12078 | cbiere | 2006-09-28 21:05:27 -0400 (Thu, 28 Sep 2006) | 2 lines

 * More MOV spammers.

------------------------------------------------------------------------
r12077 | cbiere | 2006-09-28 20:49:53 -0400 (Thu, 28 Sep 2006) | 2 lines

 * Another bunch of spammers.

------------------------------------------------------------------------
r12076 | cbiere | 2006-09-28 20:14:51 -0400 (Thu, 28 Sep 2006) | 7 lines

 * struct result_data: Removed unnecessary member "ext"; record_t already
   contains the same.
 * search_gui_create_record(): Initialize "ext" of record_t for both
   GTK variants.
 * search_gui_compare_records(): Use EMPTY_STRING() because "ext" is NULL
   now instead of the empty string if there's no filename extension.

------------------------------------------------------------------------
r12075 | cbiere | 2006-09-28 15:56:37 -0400 (Thu, 28 Sep 2006) | 2 lines

 * ban_allow(): Ban only IPv4 or IPv6 addresses.

------------------------------------------------------------------------
r12074 | cbiere | 2006-09-28 08:50:28 -0400 (Thu, 28 Sep 2006) | 3 lines

 * print_node_info(): Show the port number even if it is zero for easier
   parsing of the output.

------------------------------------------------------------------------
r12073 | cbiere | 2006-09-28 07:04:14 -0400 (Thu, 28 Sep 2006) | 2 lines

 * Extended ranges.

------------------------------------------------------------------------
r12072 | cbiere | 2006-09-28 06:26:33 -0400 (Thu, 28 Sep 2006) | 3 lines

 * Added GUI control for property "search_jump_to_created" at
   "Preferences->User Interface".

------------------------------------------------------------------------
r12071 | cbiere | 2006-09-28 06:20:20 -0400 (Thu, 28 Sep 2006) | 2 lines

 * host_addr_port_to_string_buf(): Print the port number only for IPv4/6.

------------------------------------------------------------------------
r12070 | cbiere | 2006-09-28 05:56:51 -0400 (Thu, 28 Sep 2006) | 3 lines

 * Added property "search_jump_to_created" which controls whether the GUI
   jumps to newly created searches; defaults to "TRUE".

------------------------------------------------------------------------
r12069 | cbiere | 2006-09-28 04:45:31 -0400 (Thu, 28 Sep 2006) | 2 lines

 * 230 new items.

------------------------------------------------------------------------
r12068 | cbiere | 2006-09-27 22:49:38 -0400 (Wed, 27 Sep 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r12067 | cbiere | 2006-09-27 22:45:12 -0400 (Wed, 27 Sep 2006) | 2 lines

 * 131 new items.

------------------------------------------------------------------------
r12066 | cbiere | 2006-09-27 19:14:50 -0400 (Wed, 27 Sep 2006) | 3 lines

 * d_free(): Call G_FREE_NULL() instead of free() as the buffer was allocated
   with g_malloc().

------------------------------------------------------------------------
r12065 | cbiere | 2006-09-27 18:28:04 -0400 (Wed, 27 Sep 2006) | 2 lines

 * 58 new items.

------------------------------------------------------------------------
r12064 | cbiere | 2006-09-27 18:04:27 -0400 (Wed, 27 Sep 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r12063 | cbiere | 2006-09-27 16:33:11 -0400 (Wed, 27 Sep 2006) | 2 lines

 * shared_file_free(): Forgot to free the sha1 atom.

------------------------------------------------------------------------
r12062 | cbiere | 2006-09-27 16:09:08 -0400 (Wed, 27 Sep 2006) | 2 lines

 * spam_add(): Small fix.

------------------------------------------------------------------------
r12061 | cbiere | 2006-09-27 15:42:46 -0400 (Wed, 27 Sep 2006) | 3 lines

 * Reactivated mmap() + halloc(); this seems to work fine now and better
   than the default.

------------------------------------------------------------------------
r12060 | cbiere | 2006-09-27 15:39:55 -0400 (Wed, 27 Sep 2006) | 2 lines

 * Keep only the SHA-1 and use an atom.

------------------------------------------------------------------------
r12059 | cbiere | 2006-09-27 15:37:11 -0400 (Wed, 27 Sep 2006) | 2 lines

 * Check only the first and last bit of a range for performance reasons.

------------------------------------------------------------------------
r12058 | cbiere | 2006-09-27 15:33:55 -0400 (Wed, 27 Sep 2006) | 7 lines

 * Hid the details of "struct shared_file" and added accessors.
 * struct shared_file:
   * Changed "sha1" to atom.
   * Reordered members to decrease struct size.
 * Added shared_file_alloc() and shared_file_set_names().
 * shared_file_free(): Nullify the pointer too.

------------------------------------------------------------------------
r12057 | cbiere | 2006-09-27 14:20:19 -0400 (Wed, 27 Sep 2006) | 2 lines

 * 150 new items.

------------------------------------------------------------------------
r12056 | cbiere | 2006-09-26 18:22:24 -0400 (Tue, 26 Sep 2006) | 2 lines

 * 126 new items.

------------------------------------------------------------------------
r12055 | cbiere | 2006-09-26 16:52:55 -0400 (Tue, 26 Sep 2006) | 3 lines

 * Reverted previous change.
 * file_info_retrieve(): Make sure fi->size_atom is non-NULL.

------------------------------------------------------------------------
r12054 | cbiere | 2006-09-26 15:54:47 -0400 (Tue, 26 Sep 2006) | 2 lines

 * Accept the "tls:" prefix in the whitelist too.

------------------------------------------------------------------------
r12053 | cbiere | 2006-09-26 14:27:54 -0400 (Tue, 26 Sep 2006) | 2 lines

 * file_info_hash_insert(), file_info_hash_remove(): Relaxed assertion.

------------------------------------------------------------------------
r12052 | cbiere | 2006-09-25 20:00:41 -0400 (Mon, 25 Sep 2006) | 2 lines

 * Another Jironimo.

------------------------------------------------------------------------
r12051 | cbiere | 2006-09-25 19:39:27 -0400 (Mon, 25 Sep 2006) | 2 lines

 * Disable sorting for searches which are not visible for faster insertion.

------------------------------------------------------------------------
r12050 | cbiere | 2006-09-25 17:52:17 -0400 (Mon, 25 Sep 2006) | 2 lines

 * A lot of trash.

------------------------------------------------------------------------
r12049 | cbiere | 2006-09-25 15:03:25 -0400 (Mon, 25 Sep 2006) | 2 lines

 * Corrected a range.

------------------------------------------------------------------------
r12048 | cbiere | 2006-09-25 11:59:49 -0400 (Mon, 25 Sep 2006) | 2 lines

 * Further captives.

------------------------------------------------------------------------
r12047 | cbiere | 2006-09-25 11:55:10 -0400 (Mon, 25 Sep 2006) | 2 lines

 * The usual.

------------------------------------------------------------------------
r12046 | cbiere | 2006-09-24 17:11:11 -0400 (Sun, 24 Sep 2006) | 2 lines

 * Yuck!

------------------------------------------------------------------------
r12045 | cbiere | 2006-09-24 13:33:17 -0400 (Sun, 24 Sep 2006) | 2 lines

 * More of Elemental Codeworks.

------------------------------------------------------------------------
r12044 | cbiere | 2006-09-24 13:23:42 -0400 (Sun, 24 Sep 2006) | 2 lines

 * Here it comes.

------------------------------------------------------------------------
r12043 | cbiere | 2006-09-24 13:09:20 -0400 (Sun, 24 Sep 2006) | 2 lines

 * Another pr0n spam network.

------------------------------------------------------------------------
r12042 | cbiere | 2006-09-24 03:09:25 -0400 (Sun, 24 Sep 2006) | 2 lines

 * Teh finest crap from all over teh world.

------------------------------------------------------------------------
r12041 | cbiere | 2006-09-23 22:18:08 -0400 (Sat, 23 Sep 2006) | 2 lines

 * 120 flavours of shite.

------------------------------------------------------------------------
r12040 | cbiere | 2006-09-23 19:43:47 -0400 (Sat, 23 Sep 2006) | 2 lines

 * gui_update_download_range(): Can't use compact_size() twice in a row.

------------------------------------------------------------------------
r12039 | cbiere | 2006-09-23 19:42:09 -0400 (Sat, 23 Sep 2006) | 2 lines

 * [GTK1] Added one-short sorting for the fileinfo display.

------------------------------------------------------------------------
r12038 | cbiere | 2006-09-23 19:37:06 -0400 (Sat, 23 Sep 2006) | 2 lines

 * More nasty shice.

------------------------------------------------------------------------
r12037 | cbiere | 2006-09-23 19:21:48 -0400 (Sat, 23 Sep 2006) | 2 lines

 * Gutter juice.

------------------------------------------------------------------------
r12036 | cbiere | 2006-09-23 19:17:21 -0400 (Sat, 23 Sep 2006) | 2 lines

 * More hosts without any relevance.

------------------------------------------------------------------------
r12035 | cbiere | 2006-09-23 18:44:08 -0400 (Sat, 23 Sep 2006) | 2 lines

 * Added adware server.

------------------------------------------------------------------------
r12034 | cbiere | 2006-09-23 15:29:17 -0400 (Sat, 23 Sep 2006) | 3 lines

 * Removed loot.alumnigroup.org:
  "it has been fun, but only fun and nothing more"

------------------------------------------------------------------------
r12033 | cbiere | 2006-09-22 21:04:57 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Fixed compiling with REMAP_ZALLOC.

------------------------------------------------------------------------
r12032 | cbiere | 2006-09-22 21:01:21 -0400 (Fri, 22 Sep 2006) | 4 lines

 * Changed multi-parameter macros to static inline functions because the
   order in which the parameters are used can be crucial which is not
   true for pass-by-value.

------------------------------------------------------------------------
r12031 | cbiere | 2006-09-22 20:56:12 -0400 (Fri, 22 Sep 2006) | 2 lines

 * adns_cache_free_entry(): Use atom_str_free_null().

------------------------------------------------------------------------
r12030 | cbiere | 2006-09-22 19:25:29 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Fresh from the trash can.

------------------------------------------------------------------------
r12029 | cbiere | 2006-09-22 19:06:36 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r12028 | cbiere | 2006-09-22 19:05:24 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Fixed memory leak which appeared in rev. 11950.

------------------------------------------------------------------------
r12027 | cbiere | 2006-09-22 18:01:29 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r12026 | cbiere | 2006-09-22 16:31:05 -0400 (Fri, 22 Sep 2006) | 2 lines

 * Spam-rated shice.

------------------------------------------------------------------------
r12025 | cbiere | 2006-09-21 20:28:39 -0400 (Thu, 21 Sep 2006) | 2 lines

 * To the fishies with thee.

------------------------------------------------------------------------
r12024 | cbiere | 2006-09-21 19:51:47 -0400 (Thu, 21 Sep 2006) | 2 lines

 * Welcome and bye-bye.

------------------------------------------------------------------------
r12023 | cbiere | 2006-09-21 18:25:46 -0400 (Thu, 21 Sep 2006) | 2 lines

 * Brushing your network twice a day is important to good network health.

------------------------------------------------------------------------
r12022 | cbiere | 2006-09-21 15:41:01 -0400 (Thu, 21 Sep 2006) | 2 lines

 * This should work with GLib 1.2 too now.

------------------------------------------------------------------------
r12021 | cbiere | 2006-09-21 15:28:12 -0400 (Thu, 21 Sep 2006) | 2 lines

 * Use g_malloc() so that fragcheck can see these allocations.

------------------------------------------------------------------------
r12020 | cbiere | 2006-09-21 13:17:35 -0400 (Thu, 21 Sep 2006) | 2 lines

 * Use zlib_alloc_func and zlib_free_func.

------------------------------------------------------------------------
r12019 | cbiere | 2006-09-21 11:53:49 -0400 (Thu, 21 Sep 2006) | 2 lines

 * The is no need to export gm_vtable anymore.

------------------------------------------------------------------------
r12018 | cbiere | 2006-09-21 10:55:55 -0400 (Thu, 21 Sep 2006) | 3 lines

 * Replaced g_malloc() with malloc() because the former has the wrong
   prototype.

------------------------------------------------------------------------
r12017 | cbiere | 2006-09-21 10:53:10 -0400 (Thu, 21 Sep 2006) | 2 lines

 * Added missing include.

------------------------------------------------------------------------
r12016 | cbiere | 2006-09-21 09:52:48 -0400 (Thu, 21 Sep 2006) | 3 lines

 * Removed halloc and alloc_pages. Apparently this performs badly on some
   systems.

------------------------------------------------------------------------
r12015 | cbiere | 2006-09-20 13:20:44 -0400 (Wed, 20 Sep 2006) | 2 lines

 * emulate_calloc(): Protect against integer overflow.

------------------------------------------------------------------------
r12014 | rmanfredi | 2006-09-20 13:11:32 -0400 (Wed, 20 Sep 2006) | 2 lines

Skip wdestroy() when g_malloc() has been remapped.

------------------------------------------------------------------------
r12013 | rmanfredi | 2006-09-20 13:01:11 -0400 (Wed, 20 Sep 2006) | 2 lines

Added comments.

------------------------------------------------------------------------
r12012 | cbiere | 2006-09-20 13:00:37 -0400 (Wed, 20 Sep 2006) | 3 lines

 * Deactivated halloc/mmap-based allocator because it is not ready for prime
   time. USE_CUSTOM_ALLOCATOR must be defined to enable it.

------------------------------------------------------------------------
r12011 | cbiere | 2006-09-20 12:57:20 -0400 (Wed, 20 Sep 2006) | 2 lines

 * Fixed prototype.

------------------------------------------------------------------------
r12010 | cbiere | 2006-09-20 12:48:11 -0400 (Wed, 20 Sep 2006) | 2 lines

 * Moved all page handling code from misc.[ch] to vmm.[ch].

------------------------------------------------------------------------
r12009 | cbiere | 2006-09-20 12:33:55 -0400 (Wed, 20 Sep 2006) | 2 lines

 * Use a more portable she-bang.

------------------------------------------------------------------------
r12008 | cbiere | 2006-09-17 19:18:55 -0400 (Sun, 17 Sep 2006) | 3 lines

 * Disabled INVALIDATE_FREE_PAGES and GREEDY_PAGE_CACHE; Linux/glibc has
   no MADV_FREE anyway.

------------------------------------------------------------------------
r12007 | cbiere | 2006-09-17 19:12:13 -0400 (Sun, 17 Sep 2006) | 3 lines

 * Added INVALIDATE_FREE_PAGES and GREEDY_PAGE_CACHE compile-time options
   for testing.

------------------------------------------------------------------------
r12006 | cbiere | 2006-09-17 15:25:56 -0400 (Sun, 17 Sep 2006) | 10 lines

 * Added hash_table_replace().
 * Modified hash_table_insert() so that it doesn't replace keys and returns
   success/failure.
 * Modified hash_table_remove() so that it returns success/failure.
 * halloc():
   * Moved initialization hallocations to halloc_init().
   * Check whether we accidently tried to overwrite an existing key.
 * Replaced assert() with RUNTIME_ASSERT() to take advantage of fast assertions
   if enabled.

------------------------------------------------------------------------
r12005 | cbiere | 2006-09-17 11:28:31 -0400 (Sun, 17 Sep 2006) | 3 lines

 * Use RUNTIME_ASSERT() instead of assert() or g_assert() to take advantage
   of fast assertions if enabled.

------------------------------------------------------------------------
r12004 | cbiere | 2006-09-17 11:26:42 -0400 (Sun, 17 Sep 2006) | 4 lines

 * Added RUNTIME_ASSERT() and RUNTIME_UNREACHABLE() for places where we
   can't or don't want to use g_assert(). These use assert() by default
   but fast assertions if the latter are enabled.

------------------------------------------------------------------------
r12003 | rmanfredi | 2006-09-17 10:54:08 -0400 (Sun, 17 Sep 2006) | 2 lines

Forgot to checkin U/new/d_built_popcount.U.

------------------------------------------------------------------------
r12002 | rmanfredi | 2006-09-17 10:33:44 -0400 (Sun, 17 Sep 2006) | 2 lines

Added detection of __builtin_popcount.

------------------------------------------------------------------------
r12001 | cbiere | 2006-09-17 10:02:46 -0400 (Sun, 17 Sep 2006) | 4 lines

 * LONGSIZE is not required.
 * longs with more than 64-bit should work too, you'd just waste any but
   the lower 64 bits.

------------------------------------------------------------------------
r12000 | cbiere | 2006-09-17 08:11:59 -0400 (Sun, 17 Sep 2006) | 2 lines

 * All longs are supported.

------------------------------------------------------------------------
r11999 | cbiere | 2006-09-17 07:48:19 -0400 (Sun, 17 Sep 2006) | 2 lines

 * Commented out debugging assertion.

------------------------------------------------------------------------
r11998 | rmanfredi | 2006-09-17 07:31:58 -0400 (Sun, 17 Sep 2006) | 3 lines

Removed use of % and / operators.
Tried to optimize bit_array_first_clear() by scanning whole words at a time.

------------------------------------------------------------------------
r11997 | rmanfredi | 2006-09-17 07:30:43 -0400 (Sun, 17 Sep 2006) | 2 lines

Added LONGSIZE computation.

------------------------------------------------------------------------
r11996 | cbiere | 2006-09-16 19:04:59 -0400 (Sat, 16 Sep 2006) | 2 lines

 * Give us this day our daily spam.

------------------------------------------------------------------------
r11995 | cbiere | 2006-09-16 18:58:49 -0400 (Sat, 16 Sep 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11994 | rmanfredi | 2006-09-16 18:27:23 -0400 (Sat, 16 Sep 2006) | 2 lines

Implemented g_mem_set_vtable() and g_mem_is_system_malloc() for GTK1.

------------------------------------------------------------------------
r11993 | cbiere | 2006-09-16 17:09:19 -0400 (Sat, 16 Sep 2006) | 3 lines

 * prune_page_cache(): Don't print a message but return the amount of released
   memory, so that caller can print it if desired.

------------------------------------------------------------------------
r11992 | rmanfredi | 2006-09-16 15:25:25 -0400 (Sat, 16 Sep 2006) | 2 lines

Updated debug messages.

------------------------------------------------------------------------
r11991 | graaff | 2006-09-16 15:11:47 -0400 (Sat, 16 Sep 2006) | 1 line

Change CVS to SVN to reflect the change in repository type.
------------------------------------------------------------------------
r11990 | rmanfredi | 2006-09-16 13:43:10 -0400 (Sat, 16 Sep 2006) | 5 lines

Don't keep too many RX buffers around -- there is a low-level page cache now.
However, we need to keep around a small reasonable amount since we're going
to make a high consumption of such buffers when downloading, recycling them
and using them often.

------------------------------------------------------------------------
r11989 | rmanfredi | 2006-09-16 13:33:15 -0400 (Sat, 16 Sep 2006) | 5 lines

Make sure we don't use too many download buffers when reading from a slow
source, by breaking the zero-copy policy and moving the small amount of
data we just read at the end of the previous download buffer still unflushed
to disk.

------------------------------------------------------------------------
r11988 | cbiere | 2006-09-16 12:16:53 -0400 (Sat, 16 Sep 2006) | 2 lines

 * Added prune_page_cache() to release old cached pages.

------------------------------------------------------------------------
r11987 | cbiere | 2006-09-16 11:03:20 -0400 (Sat, 16 Sep 2006) | 8 lines

 * halloc(): Return NULL when size is zero.
 * halloc0(): Don't dare to use memset() with p being NULL.
 * hrealloc(): If "new_size" is zero, free the previous allocation if any
   and return NULL. This is especially required for compatibility with
   g_realloc().
 * hmemdup(): Allow data being NULL or a zero size and return NULL in those
   cases. The former is required for compatibility with g_memdup().

------------------------------------------------------------------------
r11986 | cbiere | 2006-09-16 10:41:56 -0400 (Sat, 16 Sep 2006) | 4 lines

 * alloc_pages(): Removed assertion because there's already a bounds check
   for 'n' which would also prevent trouble if 'n' actually wrapped after
   decreasing it by one.

------------------------------------------------------------------------
r11985 | cbiere | 2006-09-16 10:14:04 -0400 (Sat, 16 Sep 2006) | 2 lines

 * pagecount_fast(): Don't duplicate code.

------------------------------------------------------------------------
r11984 | rmanfredi | 2006-09-16 08:55:39 -0400 (Sat, 16 Sep 2006) | 3 lines

Had to disable wdestroy().  Will need to think about a way to still
get rid of zones if we want to track leaks properly.

------------------------------------------------------------------------
r11983 | cbiere | 2006-09-16 08:41:44 -0400 (Sat, 16 Sep 2006) | 2 lines

 * hstrdup(): NINO; Do NULL in, NULL out just like g_strdup().

------------------------------------------------------------------------
r11982 | rmanfredi | 2006-09-16 08:37:32 -0400 (Sat, 16 Sep 2006) | 2 lines

Will now remap g_malloc() and friends to halloc() when using GTK1.

------------------------------------------------------------------------
r11981 | cbiere | 2006-09-16 08:22:48 -0400 (Sat, 16 Sep 2006) | 3 lines

 * Return NULL for zero size requests when overriding GLib 1.2 memory
   allocation functions.

------------------------------------------------------------------------
r11980 | rmanfredi | 2006-09-16 08:06:30 -0400 (Sat, 16 Sep 2006) | 2 lines

Forgot g_malloc0().

------------------------------------------------------------------------
r11979 | rmanfredi | 2006-09-16 08:05:48 -0400 (Sat, 16 Sep 2006) | 2 lines

Non working remapping of g_malloc() and friends for GTK1.

------------------------------------------------------------------------
r11978 | rmanfredi | 2006-09-16 03:26:58 -0400 (Sat, 16 Sep 2006) | 6 lines

Cache a constant amount of memory per page cache bucket (e.g. 512 4KiB pages
but only 32 64KiB pages).
Avoid the modulo operator like the plague for computing page alignments:
use new round_pagesize_fast() and pagecount_fast().
Exported a round_pagesize() for general public consumption, just in case.

------------------------------------------------------------------------
r11977 | cbiere | 2006-09-15 20:47:10 -0400 (Fri, 15 Sep 2006) | 2 lines

 * !!!!! (Crack)(uncensored)*serial*by MoshAsh S.P.A.M.

------------------------------------------------------------------------
r11976 | cbiere | 2006-09-15 20:41:27 -0400 (Fri, 15 Sep 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r11975 | cbiere | 2006-09-15 19:55:58 -0400 (Fri, 15 Sep 2006) | 2 lines

 * Garbage.

------------------------------------------------------------------------
r11974 | cbiere | 2006-09-15 18:36:16 -0400 (Fri, 15 Sep 2006) | 2 lines

 * Disabled wdestroy() for GLib 2.x for now.

------------------------------------------------------------------------
r11973 | cbiere | 2006-09-15 18:33:56 -0400 (Fri, 15 Sep 2006) | 3 lines

 * Cache multi-page allocations up to 16 pages as well to reduce the
   mmap()/munmap() overhead further.

------------------------------------------------------------------------
r11972 | cbiere | 2006-09-15 17:56:31 -0400 (Fri, 15 Sep 2006) | 3 lines

 * node_read(): Use a plain halloc() instead of halloc0(). Zeroing out such
   a large chunk is bad and the code doesn't seem to require this (hrealloc).

------------------------------------------------------------------------
r11971 | rmanfredi | 2006-09-15 15:05:46 -0400 (Fri, 15 Sep 2006) | 2 lines

Keep up to 300 buffers in the RX pool.

------------------------------------------------------------------------
r11970 | rmanfredi | 2006-09-15 14:57:53 -0400 (Fri, 15 Sep 2006) | 2 lines

Don't ignore possible error code from munmap().

------------------------------------------------------------------------
r11969 | rmanfredi | 2006-09-15 14:51:00 -0400 (Fri, 15 Sep 2006) | 2 lines

Removed useless parentheses.

------------------------------------------------------------------------
r11968 | cbiere | 2006-09-15 08:24:13 -0400 (Fri, 15 Sep 2006) | 3 lines

 * Use halloc() below g_malloc() for GLib 2.x to take advantage of
   walloc() and pages_alloc() transparently.

------------------------------------------------------------------------
r11967 | cbiere | 2006-09-15 08:14:33 -0400 (Fri, 15 Sep 2006) | 2 lines

 * Added very simple hashtable for special purposes.

------------------------------------------------------------------------
r11966 | cbiere | 2006-09-15 08:00:18 -0400 (Fri, 15 Sep 2006) | 2 lines

 * Added BIT_ARRAY_BYTE_SIZE().

------------------------------------------------------------------------
r11965 | cbiere | 2006-09-14 19:36:34 -0400 (Thu, 14 Sep 2006) | 2 lines

 * Give credit to FlashCode for the French translation.

------------------------------------------------------------------------
r11964 | cbiere | 2006-09-14 19:02:37 -0400 (Thu, 14 Sep 2006) | 2 lines

 * Keep a pool of single pages to reduce the mmap()/munmap() overhead.

------------------------------------------------------------------------
r11963 | cbiere | 2006-09-14 18:56:36 -0400 (Thu, 14 Sep 2006) | 3 lines

 * bio_sendfile(): When using mmap() recycle the current mapping through
   MAP_FIXED whenever possible so that munmap() can be skipped.

------------------------------------------------------------------------
r11962 | cbiere | 2006-09-14 18:48:09 -0400 (Thu, 14 Sep 2006) | 2 lines

 * Insert a couple of socket_check()s.

------------------------------------------------------------------------
r11961 | cbiere | 2006-09-14 16:43:57 -0400 (Thu, 14 Sep 2006) | 3 lines

 * Prefer mmap() over posix_memalign()/memalign() because there's no
   guarantee that those use more efficient mmap()ing for large allocations.

------------------------------------------------------------------------
r11960 | cbiere | 2006-09-14 00:47:53 -0400 (Thu, 14 Sep 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r11959 | cbiere | 2006-09-13 21:52:31 -0400 (Wed, 13 Sep 2006) | 2 lines

 * Great stuff.

------------------------------------------------------------------------
r11958 | cbiere | 2006-09-13 19:30:37 -0400 (Wed, 13 Sep 2006) | 2 lines

 * COMPAT_PAGE_FREE_NULL -> FREE_PAGES_NULL, compat_page_free -> free_pages.

------------------------------------------------------------------------
r11957 | cbiere | 2006-09-13 19:27:04 -0400 (Wed, 13 Sep 2006) | 2 lines

 * Use halloc() instead of g_malloc() or malloc().

------------------------------------------------------------------------
r11956 | cbiere | 2006-09-13 19:24:42 -0400 (Wed, 13 Sep 2006) | 2 lines

 * Use alloc_pages() instead of g_malloc() for large allocations.

------------------------------------------------------------------------
r11955 | cbiere | 2006-09-13 15:22:20 -0400 (Wed, 13 Sep 2006) | 3 lines

 * Increased caller tracking depth by one.
 * Use an enum so that changing the depth cannot cause hidden inconsistencies.

------------------------------------------------------------------------
r11954 | rmanfredi | 2006-09-13 14:58:31 -0400 (Wed, 13 Sep 2006) | 6 lines

Renamed compat_page_align() as alloc_pages().
Renamed compat_page_free() as free_pages().
The rationale is that we want to make it clear about the allocation / free
operations, and also that several underlying OS pages can be the target of
a single call (hence the plural on "pages").

------------------------------------------------------------------------
r11953 | cbiere | 2006-09-13 14:46:16 -0400 (Wed, 13 Sep 2006) | 3 lines

 * hfree(): Forgot to remove the allocation from the table.
 * hdestroy(): Destroy the hashtable as well.

------------------------------------------------------------------------
r11952 | cbiere | 2006-09-13 04:05:23 -0400 (Wed, 13 Sep 2006) | 3 lines

 * Moved definition of "struct zone" from the header to the .c file.
 * Removed unused macro zcount().

------------------------------------------------------------------------
r11951 | cbiere | 2006-09-13 01:13:29 -0400 (Wed, 13 Sep 2006) | 4 lines

 * Include common.h instead of just glib.h. There are checks for definitions
   which may in theory - if this file is included above everything else -
   not yet available.

------------------------------------------------------------------------
r11950 | cbiere | 2006-09-12 17:47:44 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Use halloc() and friends instead of g_malloc() etc.

------------------------------------------------------------------------
r11949 | cbiere | 2006-09-12 17:44:29 -0400 (Tue, 12 Sep 2006) | 2 lines

 * ext_name_atom(), ext_names_kv_free(): Use walloc() instead of g_strdup().

------------------------------------------------------------------------
r11948 | cbiere | 2006-09-12 17:41:53 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Added st_free().

------------------------------------------------------------------------
r11947 | cbiere | 2006-09-12 17:36:52 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Use walloc() instead of g_malloc().

------------------------------------------------------------------------
r11946 | cbiere | 2006-09-12 17:00:14 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Added src/lib/halloc.[ch].

------------------------------------------------------------------------
r11945 | cbiere | 2006-09-12 16:50:34 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r11944 | cbiere | 2006-09-12 14:50:09 -0400 (Tue, 12 Sep 2006) | 2 lines

 * Removed misplaced semi-colon.

------------------------------------------------------------------------
r11943 | cbiere | 2006-09-12 13:04:16 -0400 (Tue, 12 Sep 2006) | 3 lines

 * Disabled FRAGCHECK; this wasn't meant to be enabled and probably doesn't
   work on all archs anyway.

------------------------------------------------------------------------
r11942 | cbiere | 2006-09-11 23:51:06 -0400 (Mon, 11 Sep 2006) | 2 lines

 * Dump the allocation table on SIGUSR2, this also shows the callers.

------------------------------------------------------------------------
r11941 | cbiere | 2006-09-11 23:44:25 -0400 (Mon, 11 Sep 2006) | 3 lines

 * Removed unnecessary casts.
 * Minor style fixes.

------------------------------------------------------------------------
r11940 | cbiere | 2006-09-11 23:16:57 -0400 (Mon, 11 Sep 2006) | 3 lines

 * struct parq_ul_queued: Interned "id"; on the upload side it's always
   a GUID, so there's no point in allocating this separately.

------------------------------------------------------------------------
r11937 | cbiere | 2006-09-11 14:11:29 -0400 (Mon, 11 Sep 2006) | 2 lines

 * buffers_check_held(): Fixed assertion.

------------------------------------------------------------------------
r11936 | rmanfredi | 2006-09-10 16:20:07 -0400 (Sun, 10 Sep 2006) | 2 lines

Added warning about the ordered enum values.

------------------------------------------------------------------------
r11935 | cbiere | 2006-09-10 15:47:57 -0400 (Sun, 10 Sep 2006) | 2 lines

 * Fixed ordering, you can't just use !sort due to ASCII underscores.

------------------------------------------------------------------------
r11934 | cbiere | 2006-09-10 14:22:10 -0400 (Sun, 10 Sep 2006) | 2 lines

 * Updated list of GWCs.

------------------------------------------------------------------------
r11933 | rmanfredi | 2006-09-10 14:21:00 -0400 (Sun, 10 Sep 2006) | 5 lines

Partial support for "Node Info" messages.  Specs are now complete and
there is code to generate a "Node Info Reply" message and send it back.
Still missing is some plumbery and the logic to compute our own information
to send back.

------------------------------------------------------------------------
r11932 | cbiere | 2006-09-10 02:28:11 -0400 (Sun, 10 Sep 2006) | 3 lines

 * Store the size of allocations in an extra table instead of prepending
   a meta data block before those to prevent side-effects.

------------------------------------------------------------------------
r11931 | cbiere | 2006-09-10 02:18:39 -0400 (Sun, 10 Sep 2006) | 3 lines

 * pool_create(): Using "free" as identifier is not a good idea.
 * pool_free(): Forgot to replace g_free() with p->free().

------------------------------------------------------------------------
r11930 | cbiere | 2006-09-09 18:38:13 -0400 (Sat, 09 Sep 2006) | 3 lines

 * upload_http_status(): "Connection: close" is already emitted by
   http_send_status(). Don't send this twice!

------------------------------------------------------------------------
r11929 | rmanfredi | 2006-09-09 16:13:31 -0400 (Sat, 09 Sep 2006) | 3 lines

Forgot to change the emission of GTKGV1: we now include the build number, not
the starting timestamp in the last 4 bytes.

------------------------------------------------------------------------
r11928 | rmanfredi | 2006-09-09 15:42:18 -0400 (Sat, 09 Sep 2006) | 6 lines

Pool creation routine now takes the alloc/free routines to be used for the
data it manages.
The rxbuf_new() routine will now return a buffer whose data segment is
page-aligned.  Small interface change to rxbuf_free() to accomodate the new
underlying data architecture.

------------------------------------------------------------------------
r11927 | cbiere | 2006-09-09 15:39:45 -0400 (Sat, 09 Sep 2006) | 3 lines

 * Send the "HELO\n" automagically so that the user sees the greeting and
   can immediately enter shell commands.

------------------------------------------------------------------------
r11926 | cbiere | 2006-09-09 15:11:25 -0400 (Sat, 09 Sep 2006) | 2 lines

 * Removed BUFFER_POOL_MAX; it's not used.

------------------------------------------------------------------------
r11925 | cbiere | 2006-09-09 15:05:35 -0400 (Sat, 09 Sep 2006) | 2 lines

 * Removed buffer_pool. It's no longer used.

------------------------------------------------------------------------
r11924 | cbiere | 2006-09-09 11:12:42 -0400 (Sat, 09 Sep 2006) | 2 lines

 * Some fixes.

------------------------------------------------------------------------
r11923 | graaff | 2006-09-09 09:12:33 -0400 (Sat, 09 Sep 2006) | 1 line

Update man page with description of command-line options
------------------------------------------------------------------------
r11922 | cbiere | 2006-09-08 19:58:38 -0400 (Fri, 08 Sep 2006) | 2 lines

 * Trash.

------------------------------------------------------------------------
r11921 | cbiere | 2006-09-08 19:30:46 -0400 (Fri, 08 Sep 2006) | 3 lines

 * sock_send_buf(), sock_recv_buf(): Added check to verify whether resp.
   prevent that we use these on a socket that has been shutdown.

------------------------------------------------------------------------
r11920 | cbiere | 2006-09-08 18:54:41 -0400 (Fri, 08 Sep 2006) | 2 lines

 * 'nother spammer.

------------------------------------------------------------------------
r11919 | rmanfredi | 2006-09-08 14:27:03 -0400 (Fri, 08 Sep 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11918 | rmanfredi | 2006-09-08 14:25:06 -0400 (Fri, 08 Sep 2006) | 2 lines

Guess what?

------------------------------------------------------------------------
r11917 | cbiere | 2006-09-08 06:40:07 -0400 (Fri, 08 Sep 2006) | 2 lines

 * You can spam, but you cannot hide.

------------------------------------------------------------------------
r11916 | cbiere | 2006-09-08 06:28:52 -0400 (Fri, 08 Sep 2006) | 4 lines

 * Suppress compiler warnings emitted by GCC 2.95.x of the form
   "might be used uninitialized". All of these are false-positives as
   the compiler seems to lack proper flow analysis.

------------------------------------------------------------------------
r11915 | cbiere | 2006-09-08 03:38:50 -0400 (Fri, 08 Sep 2006) | 2 lines

 * Lots of funny stuff, or maybe not.

------------------------------------------------------------------------
r11914 | cbiere | 2006-09-08 01:24:53 -0400 (Fri, 08 Sep 2006) | 3 lines

 * Removed -m1 for grep because this parameter is not standardized; use
   head -n1 instead.

------------------------------------------------------------------------
r11913 | cbiere | 2006-09-08 00:28:59 -0400 (Fri, 08 Sep 2006) | 2 lines

 * Forgot updating main_gui_run() for Topless.

------------------------------------------------------------------------
r11912 | cbiere | 2006-09-07 22:02:07 -0400 (Thu, 07 Sep 2006) | 3 lines

 * Solaris' /bin/sh still doesn't give a crap about basic POSIX conformance;
   thus back to backticks.

------------------------------------------------------------------------
r11911 | cbiere | 2006-09-07 20:10:39 -0400 (Thu, 07 Sep 2006) | 2 lines

 * You could say, this is spam?

------------------------------------------------------------------------
r11910 | cbiere | 2006-09-07 19:40:48 -0400 (Thu, 07 Sep 2006) | 2 lines

 * You could say, another spammer?

------------------------------------------------------------------------
r11909 | cbiere | 2006-09-07 16:50:13 -0400 (Thu, 07 Sep 2006) | 2 lines

 * Yummy sullage.

------------------------------------------------------------------------
r11908 | cbiere | 2006-09-07 13:27:33 -0400 (Thu, 07 Sep 2006) | 2 lines

 * More vaccine for Gnutella.

------------------------------------------------------------------------
r11907 | cbiere | 2006-09-07 01:14:37 -0400 (Thu, 07 Sep 2006) | 2 lines

 * More Gammelfleisch.

------------------------------------------------------------------------
r11906 | cbiere | 2006-09-07 00:02:39 -0400 (Thu, 07 Sep 2006) | 6 lines

 * Dumbed down.
 * Added quotes.
 * Replaced backticks with $().
 * Use a ISO 8601 timestamp format.
 * Make sure the timestamp is ASCII so that the output is proper C.

------------------------------------------------------------------------
r11905 | cbiere | 2006-09-06 18:37:00 -0400 (Wed, 06 Sep 2006) | 12 lines

 * download_flush():
   * Freeze the queue if file_object_pwritev() fails with an error which
     indicates a full or non-writable disk.
   * Don't discard the download buffer if it couldn't be flushed to disk;
     leave this option up to the caller.
 * download_close():
   * Discard the download buffer if download_flush() couldn't flush it.
 * download_stop_v():
   * Discard the download buffer if download_flush() couldn't flush it for now.
   * TODO: the unflushed buffer should be kept and flushing should be
     attempted at a later time again.

------------------------------------------------------------------------
r11904 | cbiere | 2006-09-06 18:30:49 -0400 (Wed, 06 Sep 2006) | 2 lines

 * [GTK2] Re-added the freeze/thaw queue button to the download interface.

------------------------------------------------------------------------
r11903 | cbiere | 2006-09-06 18:27:40 -0400 (Wed, 06 Sep 2006) | 3 lines

 * statusbar_gui_push(), statusbar_gui_message(), statusbar_gui_warning():
   * Return the correct ID instead of zero.

------------------------------------------------------------------------
r11902 | cbiere | 2006-09-06 15:10:48 -0400 (Wed, 06 Sep 2006) | 2 lines

 * tls_cache_lookup(): Fixed pedantic compiler warning.

------------------------------------------------------------------------
r11901 | cbiere | 2006-09-06 14:23:05 -0400 (Wed, 06 Sep 2006) | 2 lines

 * st_search(): Use walloc() instead of g_malloc() for "pattern".

------------------------------------------------------------------------
r11900 | cbiere | 2006-09-06 14:19:42 -0400 (Wed, 06 Sep 2006) | 4 lines

 * buffers_should_flush(): Consider MAX_IOV_COUNT as well.
 * download_flush(): Call file_object_pwritev() in a loop for now to prevent
   discarding downloaded data due to a partial write to disk.

------------------------------------------------------------------------
r11899 | cbiere | 2006-09-06 02:59:44 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Moved "fast assert" code from lib/override.h to lib/fast_assert.h.

------------------------------------------------------------------------
r11898 | cbiere | 2006-09-06 02:49:10 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Use compat_page_align() for large buffers.

------------------------------------------------------------------------
r11897 | cbiere | 2006-09-06 02:47:45 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Added missing const-qualifiers.

------------------------------------------------------------------------
r11896 | cbiere | 2006-09-06 02:46:01 -0400 (Wed, 06 Sep 2006) | 6 lines

 * compat_page_align(): Added g_error() just in case the compiler ignored
   the #error directive.
 * compat_page_free():
   * Do nothing if "p" is NULL.
   * Don't allow NULL with a non-zero size.

------------------------------------------------------------------------
r11895 | cbiere | 2006-09-06 02:43:08 -0400 (Wed, 06 Sep 2006) | 2 lines

 * atom_dealloc(): Use COMPAT_PAGE_FREE_NULL() just for consistency.

------------------------------------------------------------------------
r11894 | cbiere | 2006-09-06 02:41:21 -0400 (Wed, 06 Sep 2006) | 4 lines

 * Added socket_alloc_buffer().
 * Use compat_page_align() for s->buf again; this is by no means worse
   than g_malloc() and potentially allows the OS to play zero-copy tricks.

------------------------------------------------------------------------
r11893 | cbiere | 2006-09-06 02:32:58 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r11892 | cbiere | 2006-09-06 02:31:17 -0400 (Wed, 06 Sep 2006) | 3 lines

 * Added COMPAT_PAGE_FREE_NULL(). This is a macro so that it works with
   arbitrary pointer types.

------------------------------------------------------------------------
r11891 | cbiere | 2006-09-06 02:25:14 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Use walloc() instead of g_malloc() for fixed-size allocations.

------------------------------------------------------------------------
r11890 | cbiere | 2006-09-06 02:22:03 -0400 (Wed, 06 Sep 2006) | 2 lines

 * Use g_slice_*() for GLib >= 2.10.0 when REMAP_ZALLOC is defined.

------------------------------------------------------------------------
r11889 | cbiere | 2006-09-06 00:17:33 -0400 (Wed, 06 Sep 2006) | 6 lines

 * Use walloc() instead of g_malloc(). The size of an atom is stored in
   the hashtables. Therefore there is no memory overhead.
 * atom_free(): Use atom_is_registered() instead of the atom-specific
   hashtable because this does not touch the atom memory and is therefore
   faster.

------------------------------------------------------------------------
r11888 | cbiere | 2006-09-05 19:16:21 -0400 (Tue, 05 Sep 2006) | 6 lines

 * Use walloc() instead of g_malloc() for fixed-size allocations.
 * Use compat_page_align() for the read() buffer because it is rather big,
   most-likely a multiple of the page size. Thus mmap() should be more
   efficient than walloc() or g_malloc() and even allows the OS to perform
   zero-copy tricks.

------------------------------------------------------------------------
r11887 | cbiere | 2006-09-05 19:11:17 -0400 (Tue, 05 Sep 2006) | 5 lines

 * Use the address of "end" to initialize "alloc_base" (the assumed start of
   the heap area).
 * Changed "#if 0" to "#ifdef FRAGCHECK_VERBOSE" so that verbose log output
   can be enabled by a single switch.

------------------------------------------------------------------------
r11886 | cbiere | 2006-09-05 18:59:38 -0400 (Tue, 05 Sep 2006) | 3 lines

 * Use a static array instead of dynamically allocated memory per entry.
 * Use atoms for the country names.

------------------------------------------------------------------------
r11885 | cbiere | 2006-09-05 17:51:29 -0400 (Tue, 05 Sep 2006) | 2 lines

 * Minor style fix.

------------------------------------------------------------------------
r11884 | cbiere | 2006-09-05 17:50:32 -0400 (Tue, 05 Sep 2006) | 3 lines

 * tx_deflate_init(), tx_deflate_destroy():
   * Use walloc() instead of g_malloc() for fixed-size buffers.

------------------------------------------------------------------------
r11883 | cbiere | 2006-09-05 17:27:34 -0400 (Tue, 05 Sep 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11882 | cbiere | 2006-09-05 17:05:36 -0400 (Tue, 05 Sep 2006) | 4 lines

 * struct dl_buffers: Use "slist_t" instead of GSList because it provides
   all optimizations which were manually handled here. This should also
   fix the bug causing inconsistencies which was noticed today.

------------------------------------------------------------------------
r11881 | cbiere | 2006-09-05 15:49:45 -0400 (Tue, 05 Sep 2006) | 2 lines

 * buffers_to_iovec(): Another consistency check.

------------------------------------------------------------------------
r11880 | cbiere | 2006-09-05 15:41:52 -0400 (Tue, 05 Sep 2006) | 2 lines

 * buffers_check_held(): Check the list length.

------------------------------------------------------------------------
r11879 | cbiere | 2006-09-05 15:22:45 -0400 (Tue, 05 Sep 2006) | 3 lines

 * Don't use safe_writev_fd() and safe_readv_fd() because these don't seem
   correct to me.

------------------------------------------------------------------------
r11878 | cbiere | 2006-09-05 15:08:28 -0400 (Tue, 05 Sep 2006) | 2 lines

 * buffers_to_iovec(): Added consistency checks.

------------------------------------------------------------------------
r11877 | cbiere | 2006-09-05 14:26:58 -0400 (Tue, 05 Sep 2006) | 3 lines

 * Added buffers_check_held() to ensure that b->held reflects the cumulative
   size of the download buffers.

------------------------------------------------------------------------
r11876 | cbiere | 2006-09-05 14:24:29 -0400 (Tue, 05 Sep 2006) | 3 lines

 * Added handling of command-line option "--geometry".
 * Added gui_parse_geometry_spec() to parse a X11-style geometry specification.

------------------------------------------------------------------------
r11874 | cbiere | 2006-09-04 18:53:13 -0400 (Mon, 04 Sep 2006) | 2 lines

 * Document the "rescan" command as well.

------------------------------------------------------------------------
r11873 | cbiere | 2006-09-04 18:36:39 -0400 (Mon, 04 Sep 2006) | 2 lines

 * Updated information and cover the local shell as well.

------------------------------------------------------------------------
r11872 | cbiere | 2006-09-04 16:44:17 -0400 (Mon, 04 Sep 2006) | 7 lines

 * Added tracking of the callers using the return addresses.
 * Added a second bit array "touched" so that we can differ between
   never-touched and freed memory.
 * alloc_dump():
   * Flush the output when finished.
   * Show the callers' addresses (if supported).

------------------------------------------------------------------------
r11871 | cbiere | 2006-09-04 16:39:17 -0400 (Mon, 04 Sep 2006) | 5 lines

 * socket_read():
   * Take advantage of is_strprefix().
   * Allow HELO without a trailing space so that we don't have to send one
     when using the local shell.

------------------------------------------------------------------------
r11870 | cbiere | 2006-09-04 16:35:56 -0400 (Mon, 04 Sep 2006) | 3 lines

 * handle_arguments(): Call reopen_log_files() after compat_daemonize(),
   otherwise all output gets send to /dev/null.

------------------------------------------------------------------------
r11869 | cbiere | 2006-09-04 16:34:14 -0400 (Mon, 04 Sep 2006) | 2 lines

 * local_shell(): Fixed exit code.

------------------------------------------------------------------------
r11868 | cbiere | 2006-09-04 15:46:29 -0400 (Mon, 04 Sep 2006) | 6 lines

 * Generalized handling of command-line arguments.
 * Added command-line options "--log_stderr" and "--log_output".
 * Handle SIGHUP: If --log_stdout or --log_stderr were used, stderr/stdout
   are reopened. This is useful for archiving the output periodically from
   a cron job.

------------------------------------------------------------------------
r11867 | rmanfredi | 2006-09-02 19:13:49 -0400 (Sat, 02 Sep 2006) | 3 lines

Allocate the pdata_t with walloc() in pdata_allocb_ext() since it does
not hold the data buffer, it just points to it.

------------------------------------------------------------------------
r11866 | cbiere | 2006-09-02 19:00:38 -0400 (Sat, 02 Sep 2006) | 2 lines

 * Use walloc() instead of g_malloc().

------------------------------------------------------------------------
r11865 | cbiere | 2006-09-02 18:47:15 -0400 (Sat, 02 Sep 2006) | 5 lines

 * Keep support for the local shell even if USE_REMOTE_CTRL is undefined.
 * Ignore the authentication cookie on local sockets because the socket is
   already protected by file permissions.
 * Added socket_is_local().

------------------------------------------------------------------------
r11864 | cbiere | 2006-09-02 18:41:54 -0400 (Sat, 02 Sep 2006) | 2 lines

 * net_type_to_af(): Fixed typo.

------------------------------------------------------------------------
r11863 | cbiere | 2006-09-02 18:39:54 -0400 (Sat, 02 Sep 2006) | 2 lines

 * Make sure AF_LOCAL and PF_LOCAL are defined.

------------------------------------------------------------------------
r11862 | cbiere | 2006-09-02 17:06:13 -0400 (Sat, 02 Sep 2006) | 2 lines

 * Update of the French translation provided by FlashCode.

------------------------------------------------------------------------
r11861 | rmanfredi | 2006-09-02 15:38:07 -0400 (Sat, 02 Sep 2006) | 2 lines

More trash.

------------------------------------------------------------------------
r11860 | cbiere | 2006-09-02 13:01:33 -0400 (Sat, 02 Sep 2006) | 4 lines

 * Changed inputevt_data_available().
 * is_readable(), socket_udp_event(): If we don't know how much data is
   available, make a guess to reduce the number of syscalls on average.

------------------------------------------------------------------------
r11859 | cbiere | 2006-09-02 12:18:21 -0400 (Sat, 02 Sep 2006) | 9 lines

 * Don't use non-blocking I/O on the client-side because it would break the
   use of pipes e.g. "cat | gtkg-shell" would fail with EAGAIN because
   O_NONBLOCK applies to the underlying file not the descriptor and many
   tools do not expect non-blocking file descriptors.
 * Renamed "input" and "output" to  "client" respectively "server" as both
   have sides input and output of course.
 * Changed the conditions on which to terminate so that the shell does not
   hang up too early (unflushed data) or not at all (unhandled hang up).

------------------------------------------------------------------------
r11858 | rmanfredi | 2006-09-02 10:54:10 -0400 (Sat, 02 Sep 2006) | 6 lines

Fixed version comparison routines:
* For backward compatibility with the way we determine more recent versions,
  the version_cmp() routine no longer compares build numbers.
* An additionnal version_build_cmp() routine is available to compare versions
  with the build number.

------------------------------------------------------------------------
r11857 | cbiere | 2006-09-02 00:05:04 -0400 (Sat, 02 Sep 2006) | 3 lines

 * socket_local_listen(): Use a stricter umask for the socket, it only has
   to be writable by the user.

------------------------------------------------------------------------
r11856 | cbiere | 2006-09-01 23:27:35 -0400 (Fri, 01 Sep 2006) | 6 lines

 * Moved the location of the local socket from "$GTK_GNUTELLA_DIR/socket" to
   "$GTK_GNUTELLA_DIR/ipc/socket". The "ipc" directory is created with
   mode 0700 so that it is accessible by the owner only. This is necessary
   for systems which ignore the permissions on unix domain sockets - if
   there are really still any.

------------------------------------------------------------------------
r11855 | cbiere | 2006-09-01 22:07:12 -0400 (Fri, 01 Sep 2006) | 3 lines

 * compat_daemonize(): Don't mask the x-bit, it's necessary when creating
   directories.

------------------------------------------------------------------------
r11854 | cbiere | 2006-09-01 18:55:47 -0400 (Fri, 01 Sep 2006) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r11853 | cbiere | 2006-09-01 18:53:38 -0400 (Fri, 01 Sep 2006) | 2 lines

 * Added dist module for detection of /dev/poll availability.

------------------------------------------------------------------------
r11852 | cbiere | 2006-09-01 18:44:51 -0400 (Fri, 01 Sep 2006) | 4 lines

 * Added #include <stropts.h> because that's where POSIX expects the prototype
   of ioctl() and this is also in-line with the /dev/poll manpage of Solaris
   and IRIX.

------------------------------------------------------------------------
r11851 | cbiere | 2006-08-31 23:09:21 -0400 (Thu, 31 Aug 2006) | 2 lines

 * node_mark_bad_vendor(): Updated assertion.

------------------------------------------------------------------------
r11850 | cbiere | 2006-08-31 23:07:19 -0400 (Thu, 31 Aug 2006) | 2 lines

 * sock_cork(), sock_nodelay(): Do nothing if the socket isn't a TCP one.

------------------------------------------------------------------------
r11849 | cbiere | 2006-08-31 22:43:15 -0400 (Thu, 31 Aug 2006) | 3 lines

 * Moved local_shell() to core/local_shell.[ch].
 * Note that local_shell.c can also be compiled as a stand-alone tool, UTSL.

------------------------------------------------------------------------
r11848 | cbiere | 2006-08-31 19:27:38 -0400 (Thu, 31 Aug 2006) | 5 lines

 * Added command-line argument "--daemonize".
 * handle_arguments(): Handle the arguments independent of their position.
   All currently supported arguments are mutually exclusive anyway, so we
   pick the most appropriate.

------------------------------------------------------------------------
r11847 | cbiere | 2006-08-31 19:22:06 -0400 (Thu, 31 Aug 2006) | 2 lines

 * Added compat_daemonize().

------------------------------------------------------------------------
r11846 | cbiere | 2006-08-31 18:00:15 -0400 (Thu, 31 Aug 2006) | 5 lines

 * Added brackets around G_FREE_NULL() and other macros where the macro is
   the body of an if-instruction. Without these G_STMT_START/END cause
   unnecessary warnings when compiling with -std=c89.
 * Removed some pointless NULL-checks before G_FREE_NULL().

------------------------------------------------------------------------
r11845 | cbiere | 2006-08-31 17:48:41 -0400 (Thu, 31 Aug 2006) | 2 lines

 * Updated for fragcheck.[ch].

------------------------------------------------------------------------
r11844 | cbiere | 2006-08-31 17:46:10 -0400 (Thu, 31 Aug 2006) | 3 lines

 * Declared unused functions "inline" for now to suppress pedantic
   compiler warnings temporarily.

------------------------------------------------------------------------
r11843 | cbiere | 2006-08-31 17:40:14 -0400 (Thu, 31 Aug 2006) | 3 lines

 * Added memory fragmentation analysation tool. Define FRAGCHECK to activate
   it. SIGUSR1 will cause a dump of the memory allocation map.

------------------------------------------------------------------------
r11842 | cbiere | 2006-08-31 17:22:21 -0400 (Thu, 31 Aug 2006) | 6 lines

 * upload_stats_load_history(): Fixed bug:
   If the upload_stats file contained the same filename and filesize
   more than once (due to a corruption or whatever), upload_stats_add()
   would cause an assertion failure in hash_list_append(). Thus, use
   upload_stats_find() and skip such lines.

------------------------------------------------------------------------
r11841 | cbiere | 2006-08-31 17:05:25 -0400 (Thu, 31 Aug 2006) | 4 lines

 * Added xml_free_null() which must be used to free the memory returned by
   xml_get_string(). Luckily G_FREE_NULL() worked too but there is no
   guarantee that the underlying function is the same one.

------------------------------------------------------------------------
r11840 | cbiere | 2006-08-30 17:22:54 -0400 (Wed, 30 Aug 2006) | 3 lines

 * ensure_unicity(): Don't unlink() the PID file because there would we a
   race-condition if fcntl() locking is not available.

------------------------------------------------------------------------
r11839 | cbiere | 2006-08-30 17:07:03 -0400 (Wed, 30 Aug 2006) | 4 lines

 * socket_local_listen(): Use an explicit umask of 077 for now because it
   would be dangerous if anyone else could access the local socket - albeit,
   at the moment, it still requires token-based authentication.

------------------------------------------------------------------------
r11838 | cbiere | 2006-08-30 16:53:11 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Forgot to initialize addr.sun_family and Linux absolutely wants this.

------------------------------------------------------------------------
r11837 | rmanfredi | 2006-08-30 15:37:37 -0400 (Wed, 30 Aug 2006) | 2 lines

Don't include <fcntl.h> if <sys/file.h> is included.

------------------------------------------------------------------------
r11836 | cbiere | 2006-08-30 15:22:57 -0400 (Wed, 30 Aug 2006) | 3 lines

 * Don't set sun_len, some platforms don't have this struct member in
   struct sockaddr_un and it seems to be redundant.

------------------------------------------------------------------------
r11835 | cbiere | 2006-08-30 15:16:55 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Removed I_FCNTL again because it's apparently broken.

------------------------------------------------------------------------
r11834 | cbiere | 2006-08-30 14:43:46 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Use Configure checks for #include as far as available.

------------------------------------------------------------------------
r11833 | cbiere | 2006-08-30 14:22:19 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Removed unnecessary inclusion of <poll.h>. It is included by common.h now.

------------------------------------------------------------------------
r11832 | cbiere | 2006-08-30 14:19:33 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Added check for poll() which is used by the local shell interface.

------------------------------------------------------------------------
r11831 | rmanfredi | 2006-08-30 14:04:34 -0400 (Wed, 30 Aug 2006) | 2 lines

With compliments of spammers.

------------------------------------------------------------------------
r11830 | cbiere | 2006-08-30 13:02:53 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Commented out local_shell() due to missing Configure checks.

------------------------------------------------------------------------
r11829 | cbiere | 2006-08-30 10:52:34 -0400 (Wed, 30 Aug 2006) | 3 lines

 * Added command-line argument "--shell" which offers telnet-like access
   to the unix domain socket.

------------------------------------------------------------------------
r11828 | cbiere | 2006-08-30 10:50:17 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Added socket flag SOCK_F_LOCAL which identifies unix domain sockets.

------------------------------------------------------------------------
r11827 | cbiere | 2006-08-30 10:48:40 -0400 (Wed, 30 Aug 2006) | 5 lines

 * socket_tcp_listen(): Removed unnecessary parameter "type".
 * Added socket_local_listen() for listening on a unix domain socket
   located at "$GTK_GNUTELLA_DIR/socket" which behaves exactly like
   a listening TCP socket as far as possible.

------------------------------------------------------------------------
r11826 | cbiere | 2006-08-30 10:45:19 -0400 (Wed, 30 Aug 2006) | 2 lines

  * Added NET_TYPE_LOCAL used by unix domain sockets.

------------------------------------------------------------------------
r11825 | cbiere | 2006-08-30 10:44:06 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Added NET_TYPE_LOCAL used by unix domain sockets.

------------------------------------------------------------------------
r11824 | cbiere | 2006-08-30 10:42:14 -0400 (Wed, 30 Aug 2006) | 2 lines

 * Added NET_TYPE_LOCAL used by unix domain sockets.

------------------------------------------------------------------------
r11823 | cbiere | 2006-08-30 10:38:42 -0400 (Wed, 30 Aug 2006) | 3 lines

 * Added property setting "enable_local_socket" which is enabled by default
   for IPC.

------------------------------------------------------------------------
r11822 | cbiere | 2006-08-30 10:34:20 -0400 (Wed, 30 Aug 2006) | 3 lines

 * Include <poll.h> respectively <sys/poll.h>; requires Configure checks.
 * Include <sys/un.h> for unix domain socket support.

------------------------------------------------------------------------
r11821 | cbiere | 2006-08-29 22:13:53 -0400 (Tue, 29 Aug 2006) | 4 lines

 * Added handling of command-line argument "--ping". This allows, for example,
   a silent periodic safety restart from a cron job like this:
   @hourly gtk-gnutella --ping || gtk-gnutella

------------------------------------------------------------------------
r11820 | cbiere | 2006-08-29 22:10:23 -0400 (Tue, 29 Aug 2006) | 6 lines

 * Added settings_early_init(), so that home_dir and config_dir become
   earlier available.
 * Added settings_ensure_unicity() so that it's possible to check whether
   another gtk-gnutella is currently running to be used by the "--ping"
   feature.

------------------------------------------------------------------------
r11819 | cbiere | 2006-08-29 21:32:07 -0400 (Tue, 29 Aug 2006) | 4 lines

 * Added assertion checks.
 * Style fixes.
 * size_t correctness.

------------------------------------------------------------------------
r11818 | cbiere | 2006-08-29 18:49:30 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Added handling of command-line arguments for --help and --version.

------------------------------------------------------------------------
r11817 | cbiere | 2006-08-29 18:48:06 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Added version_build_string() which does not require prior initialization.

------------------------------------------------------------------------
r11816 | rmanfredi | 2006-08-29 18:26:24 -0400 (Tue, 29 Aug 2006) | 3 lines

Fixed bug related to deflated UDP hit transmission, causing a segmentation
fault when the UDP hit is sent right away and not queued in the message queue.

------------------------------------------------------------------------
r11815 | rmanfredi | 2006-08-29 18:21:01 -0400 (Tue, 29 Aug 2006) | 3 lines

Must count outgoing deflated payloads before enqueuing the message, since
if it is transmitted right away, it will be disposed of!

------------------------------------------------------------------------
r11814 | cbiere | 2006-08-29 18:03:19 -0400 (Tue, 29 Aug 2006) | 2 lines

 * ensure_unicity(): Some clean-up.

------------------------------------------------------------------------
r11813 | cbiere | 2006-08-29 17:38:44 -0400 (Tue, 29 Aug 2006) | 2 lines

 * cell_renderer(): Don't modify the cell if nobody's watching.

------------------------------------------------------------------------
r11812 | cbiere | 2006-08-29 17:37:07 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Style fixes.

------------------------------------------------------------------------
r11811 | rmanfredi | 2006-08-29 17:24:49 -0400 (Tue, 29 Aug 2006) | 2 lines

Replacement with g_strdup() forgot to initialize plen correctly.

------------------------------------------------------------------------
r11810 | rmanfredi | 2006-08-29 17:18:50 -0400 (Tue, 29 Aug 2006) | 2 lines

Suppressed non-critical failing assertion with a BUG warning, for now.

------------------------------------------------------------------------
r11809 | cbiere | 2006-08-29 17:02:35 -0400 (Tue, 29 Aug 2006) | 2 lines

 * wfree(): Ignite afterburner.

------------------------------------------------------------------------
r11808 | cbiere | 2006-08-29 16:58:54 -0400 (Tue, 29 Aug 2006) | 2 lines

 * pattern_compile(): Simply use g_strdup().

------------------------------------------------------------------------
r11807 | rmanfredi | 2006-08-29 16:38:46 -0400 (Tue, 29 Aug 2006) | 2 lines

Fixed "Extracting..." line.

------------------------------------------------------------------------
r11806 | rmanfredi | 2006-08-29 16:37:31 -0400 (Tue, 29 Aug 2006) | 2 lines

Added MQ_DEBUG, for a while, to see if problems arise.

------------------------------------------------------------------------
r11805 | rmanfredi | 2006-08-29 16:35:47 -0400 (Tue, 29 Aug 2006) | 3 lines

Suppressed revision.h, whose constant changes clutter "svn diff".
Instead, have an initial empty revision.h build by Configure.

------------------------------------------------------------------------
r11804 | cbiere | 2006-08-29 16:29:53 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Reworded some stuff to prevent confusion.

------------------------------------------------------------------------
r11803 | cbiere | 2006-08-29 16:28:16 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Removed unnecessary line-breaks.

------------------------------------------------------------------------
r11802 | cbiere | 2006-08-29 16:26:58 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Removed unnecessary line-break.

------------------------------------------------------------------------
r11801 | cbiere | 2006-08-29 16:24:32 -0400 (Tue, 29 Aug 2006) | 2 lines

 * Don't modify the cell if nobody's watching.

------------------------------------------------------------------------
r11800 | cbiere | 2006-08-29 15:31:46 -0400 (Tue, 29 Aug 2006) | 2 lines

 * tx_dgram_sendto(): Don't even try to send UDP message to port zero.

------------------------------------------------------------------------
r11799 | rmanfredi | 2006-08-29 15:29:10 -0400 (Tue, 29 Aug 2006) | 2 lines

Do not drop vendor messages coming from UDP with improper hops/ttl.

------------------------------------------------------------------------
r11798 | rmanfredi | 2006-08-29 15:26:30 -0400 (Tue, 29 Aug 2006) | 2 lines

Add node address when logging bad messages.

------------------------------------------------------------------------
r11797 | rmanfredi | 2006-08-28 17:33:59 -0400 (Mon, 28 Aug 2006) | 2 lines

Auf Wiedersehen!

------------------------------------------------------------------------
r11796 | cbiere | 2006-08-28 15:08:37 -0400 (Mon, 28 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11795 | rmanfredi | 2006-08-28 13:27:11 -0400 (Mon, 28 Aug 2006) | 2 lines

Removed unneeded block in download_clone().

------------------------------------------------------------------------
r11794 | rmanfredi | 2006-08-28 12:50:28 -0400 (Mon, 28 Aug 2006) | 2 lines

Configure now defaults to "-O2 -g" when using gcc.

------------------------------------------------------------------------
r11793 | cbiere | 2006-08-28 12:06:16 -0400 (Mon, 28 Aug 2006) | 3 lines

 * Applied patch by Meelis Roos to fix a compile problem when compiling
   against GNU TLS older than 1.2.

------------------------------------------------------------------------
r11792 | cbiere | 2006-08-27 17:58:12 -0400 (Sun, 27 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11791 | cbiere | 2006-08-27 16:21:51 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Busted more quibus peers.

------------------------------------------------------------------------
r11790 | cbiere | 2006-08-27 14:59:52 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Simons says, go home.

------------------------------------------------------------------------
r11789 | cbiere | 2006-08-27 14:16:23 -0400 (Sun, 27 Aug 2006) | 2 lines

 * ESPAM.

------------------------------------------------------------------------
r11788 | cbiere | 2006-08-27 14:09:08 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Ilk snorf zalox mokwa.

------------------------------------------------------------------------
r11787 | rmanfredi | 2006-08-27 13:59:42 -0400 (Sun, 27 Aug 2006) | 2 lines

Pouring more filth.

------------------------------------------------------------------------
r11786 | rmanfredi | 2006-08-27 13:36:37 -0400 (Sun, 27 Aug 2006) | 2 lines

Made the "status" field from result set a 32-bit quantity instead of just 16.

------------------------------------------------------------------------
r11785 | cbiere | 2006-08-27 11:41:10 -0400 (Sun, 27 Aug 2006) | 3 lines

 * gnutls_handshake(), gnutls_bye():
   * Don't show usual errors such as EPIPE and ECONNRESET at low debug levels.

------------------------------------------------------------------------
r11784 | rmanfredi | 2006-08-27 07:16:31 -0400 (Sun, 27 Aug 2006) | 4 lines

Added new X-Features header "sflag/0.1" to indicate that peer supports
flags in the Gnutella size field.
Do not forward messages with flags to nodes not advertising support for them.

------------------------------------------------------------------------
r11783 | rmanfredi | 2006-08-27 07:13:01 -0400 (Sun, 27 Aug 2006) | 2 lines

Fixed style.

------------------------------------------------------------------------
r11782 | rmanfredi | 2006-08-27 06:04:55 -0400 (Sun, 27 Aug 2006) | 5 lines

Handle new Gnutella message architecture properly: the 32-bit size field is
now made of 2 16-bit fields, conceptually.
Since there is no meaning defined for header flags yet, we cannot process
those messages, only relay them without further analysis.

------------------------------------------------------------------------
r11781 | cbiere | 2006-08-27 05:12:13 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Welcome to spamtard club.

------------------------------------------------------------------------
r11780 | rmanfredi | 2006-08-27 04:14:38 -0400 (Sun, 27 Aug 2006) | 2 lines

In case the compiler cannot optimize 2.5*1000 as 2500 (as integer that is).

------------------------------------------------------------------------
r11779 | cbiere | 2006-08-27 03:55:51 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Fixed compilation for SEARCH_STATS_COUNTERS.

------------------------------------------------------------------------
r11778 | cbiere | 2006-08-27 03:53:22 -0400 (Sun, 27 Aug 2006) | 8 lines

 * Added assertion checks.
 * Check poll_ctx->fd for negative values instead of just -1.
 * check_dev_poll():
   * Commented out non-essential assertion.
   * Show a warning if ioctl() fails unexpected.
 * poll_func():
   * Show a warning if ioctl() fails unexpected.

------------------------------------------------------------------------
r11777 | cbiere | 2006-08-27 03:48:44 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Fixed comment.

------------------------------------------------------------------------
r11776 | rmanfredi | 2006-08-27 03:37:46 -0400 (Sun, 27 Aug 2006) | 2 lines

Filth of the day.

------------------------------------------------------------------------
r11775 | rmanfredi | 2006-08-27 03:21:02 -0400 (Sun, 27 Aug 2006) | 4 lines

Per a suggestion of Daniel Stutzbach, we wait BASE + RAND*random secs between
two OOB hits for the same host, where "random" is a real random number
between 0 and 1.

------------------------------------------------------------------------
r11774 | cbiere | 2006-08-27 02:44:10 -0400 (Sun, 27 Aug 2006) | 3 lines

 * upload_stats_list(): Converted upload_stats_list from GList to
   hash_list_t for improved efficiency.

------------------------------------------------------------------------
r11773 | cbiere | 2006-08-27 02:41:26 -0400 (Sun, 27 Aug 2006) | 2 lines

 * vp_get_chunks_initial(): Another optimization attempt.

------------------------------------------------------------------------
r11772 | cbiere | 2006-08-27 01:31:59 -0400 (Sun, 27 Aug 2006) | 3 lines

 * vp_get_chunks_initial(): Undo previous "optimization". This isn't
   correct as it causes a dangling pointer in the predecessor.

------------------------------------------------------------------------
r11771 | cbiere | 2006-08-27 01:05:46 -0400 (Sun, 27 Aug 2006) | 2 lines

 * Fixed bug caused by previous modification to header_reset().

------------------------------------------------------------------------
r11770 | cbiere | 2006-08-26 23:54:16 -0400 (Sat, 26 Aug 2006) | 4 lines

 * struct header: Renamed member "lines" to "num_lines"  because
   "header_field_t" has a member of the same name which can be confusing.
 * Use slist_t instead of GSList so that appending is O(1).

------------------------------------------------------------------------
r11769 | cbiere | 2006-08-26 23:22:56 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Don't expose "header_field_t" unnecessarily.

------------------------------------------------------------------------
r11768 | cbiere | 2006-08-26 23:18:21 -0400 (Sat, 26 Aug 2006) | 3 lines

 * update_available_ranges(): Removed assertion which would require access
   to "struct header".

------------------------------------------------------------------------
r11767 | cbiere | 2006-08-26 23:16:55 -0400 (Sat, 26 Aug 2006) | 3 lines

 * Don't expose "struct header" unnecessarily.
 * Style fixes.

------------------------------------------------------------------------
r11766 | cbiere | 2006-08-26 22:52:17 -0400 (Sat, 26 Aug 2006) | 4 lines

 * fuzzy_make_word_list(): Minor optimization.
 * Added word_list_free() to get rid of duplicated code.
 * Style fixes.

------------------------------------------------------------------------
r11765 | cbiere | 2006-08-26 22:34:32 -0400 (Sat, 26 Aug 2006) | 6 lines

 * Use a string atom for "file_name" in "struct vp_info".
 * vp_get_chunks_initial(): Minor optimization.
 * Added vp_info_free() to get rid of duplicated code.
 * Added const-qualifiers.
 * Style fixes.

------------------------------------------------------------------------
r11764 | cbiere | 2006-08-26 22:04:47 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Style fixes.

------------------------------------------------------------------------
r11763 | cbiere | 2006-08-26 21:45:47 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Minor style fixes.

------------------------------------------------------------------------
r11762 | cbiere | 2006-08-26 21:31:59 -0400 (Sat, 26 Aug 2006) | 3 lines

 * Fixed potential memory leak caused by not freeing the list returned
   by route_towards_guid() under all circumstances.

------------------------------------------------------------------------
r11761 | cbiere | 2006-08-26 21:17:56 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Use host_addr_free_list() instead of doing this manually.

------------------------------------------------------------------------
r11760 | cbiere | 2006-08-26 21:16:15 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Added host_addr_free_list().

------------------------------------------------------------------------
r11759 | cbiere | 2006-08-26 21:15:18 -0400 (Sat, 26 Aug 2006) | 5 lines

 * Use enums instead of macro definitions for TASK_F_* flags.
 * Changed TASK() to static inline function so that it doesn't suppress
   useful compile warnings if ever misused.
 * Minor style fixes.

------------------------------------------------------------------------
r11758 | cbiere | 2006-08-26 19:36:19 -0400 (Sat, 26 Aug 2006) | 3 lines

 * Reduced the default for "quick_connect_pool_size" to 10 because a value
   of 40 is usually overkill and likely to kill cheap "routers".

------------------------------------------------------------------------
r11757 | cbiere | 2006-08-26 18:51:53 -0400 (Sat, 26 Aug 2006) | 2 lines

 * search_gui_browse_selected_helper(): Fixed typo.

------------------------------------------------------------------------
r11756 | rmanfredi | 2006-08-26 17:24:06 -0400 (Sat, 26 Aug 2006) | 2 lines

You may now start using the new GTKGV1 semantics: last item is the build #.

------------------------------------------------------------------------
r11755 | cbiere | 2006-08-26 17:08:47 -0400 (Sat, 26 Aug 2006) | 3 lines

 * Merged CONNECT_F_* flags with SOCK_F_* flags because their values weren't
   synchronized.

------------------------------------------------------------------------
r11754 | cbiere | 2006-08-26 16:57:27 -0400 (Sat, 26 Aug 2006) | 3 lines

 * search_gui_add_record(): Hops and TTL weren't shown due to missing
   assignments.

------------------------------------------------------------------------
r11753 | cbiere | 2006-08-26 16:52:31 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Frash spem.

------------------------------------------------------------------------
r11752 | cbiere | 2006-08-26 16:06:51 -0400 (Sat, 26 Aug 2006) | 2 lines

 * The first rule of spamtard club is: You are out.

------------------------------------------------------------------------
r11751 | cbiere | 2006-08-26 16:04:17 -0400 (Sat, 26 Aug 2006) | 2 lines

 * There goes your license.

------------------------------------------------------------------------
r11750 | cbiere | 2006-08-26 15:51:34 -0400 (Sat, 26 Aug 2006) | 2 lines

 * No more soup for you.

------------------------------------------------------------------------
r11749 | cbiere | 2006-08-26 15:26:25 -0400 (Sat, 26 Aug 2006) | 2 lines

 * More spamtards.

------------------------------------------------------------------------
r11748 | rmanfredi | 2006-08-26 10:45:14 -0400 (Sat, 26 Aug 2006) | 2 lines

Moved GTA_BUILD down since it's not supposed to be modified by users.

------------------------------------------------------------------------
r11747 | rmanfredi | 2006-08-26 10:39:39 -0400 (Sat, 26 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11746 | rmanfredi | 2006-08-26 10:39:06 -0400 (Sat, 26 Aug 2006) | 2 lines

Don't regenerate "revision.h" if it has not changed to avoid recompiling.

------------------------------------------------------------------------
r11745 | rmanfredi | 2006-08-26 10:26:43 -0400 (Sat, 26 Aug 2006) | 2 lines

Don't connect to the server to gather information we have locally.

------------------------------------------------------------------------
r11744 | rmanfredi | 2006-08-26 10:12:43 -0400 (Sat, 26 Aug 2006) | 2 lines

More to /dev/null.

------------------------------------------------------------------------
r11743 | rmanfredi | 2006-08-26 10:11:32 -0400 (Sat, 26 Aug 2006) | 6 lines

Updated meaning of GTKGV1's last 4-byte field.  It used to be the uptime of
the servent, but we were not using this information, and "DU" might be better
should we need it, so the field changed to indicate the build number.
Interpretation of that field will start for servents indicating at least
a release date of 2006-08-27.

------------------------------------------------------------------------
r11742 | rmanfredi | 2006-08-26 09:44:34 -0400 (Sat, 26 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11741 | rmanfredi | 2006-08-26 09:43:13 -0400 (Sat, 26 Aug 2006) | 4 lines

Have main.c include revision.h: in order to avoid multiple generation of
the latter file, it is best to avoid remote dependencies on it.  Only main.c
should include that file.

------------------------------------------------------------------------
r11740 | rmanfredi | 2006-08-26 09:20:31 -0400 (Sat, 26 Aug 2006) | 2 lines

Verify build number using latest valid keys.

------------------------------------------------------------------------
r11739 | rmanfredi | 2006-08-26 08:56:50 -0400 (Sat, 26 Aug 2006) | 2 lines

Included build number verification.

------------------------------------------------------------------------
r11738 | rmanfredi | 2006-08-26 08:41:09 -0400 (Sat, 26 Aug 2006) | 5 lines

Version number now includes build number.
For backward parsing compatibility, it will be included in the optional
part of the version number until 2007-03-22, at which time it will be part
of the regular version string, as gtk-gnutella/0.96.2-17554, for instance.

------------------------------------------------------------------------
r11737 | rmanfredi | 2006-08-26 06:28:35 -0400 (Sat, 26 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11736 | rmanfredi | 2006-08-26 06:27:35 -0400 (Sat, 26 Aug 2006) | 2 lines

Updated rules for handling "revision.h".

------------------------------------------------------------------------
r11735 | rmanfredi | 2006-08-26 06:19:46 -0400 (Sat, 26 Aug 2006) | 2 lines

SVN is trying to outsmart us?  Bad luck!

------------------------------------------------------------------------
r11734 | rmanfredi | 2006-08-26 06:18:13 -0400 (Sat, 26 Aug 2006) | 2 lines

Prevent accidental $Revision substitutions.

------------------------------------------------------------------------
r11733 | rmanfredi | 2006-08-26 05:31:32 -0400 (Sat, 26 Aug 2006) | 2 lines

Regenerated with newest jmake.

------------------------------------------------------------------------
r11732 | rmanfredi | 2006-08-26 05:30:17 -0400 (Sat, 26 Aug 2006) | 2 lines

Added automatic SVN revision number computation at build-time.

------------------------------------------------------------------------
r11731 | rmanfredi | 2006-08-26 04:46:44 -0400 (Sat, 26 Aug 2006) | 2 lines

Added Id expansion.

------------------------------------------------------------------------
r11730 | rmanfredi | 2006-08-26 04:43:08 -0400 (Sat, 26 Aug 2006) | 2 lines

Actually, we can make that a real string.

------------------------------------------------------------------------
r11729 | rmanfredi | 2006-08-26 04:41:14 -0400 (Sat, 26 Aug 2006) | 2 lines

Added GTA_BUILD to carry the file's revision.

------------------------------------------------------------------------
r11728 | cbiere | 2006-08-26 02:46:04 -0400 (Sat, 26 Aug 2006) | 2 lines

 * Bye bye.

------------------------------------------------------------------------
r11727 | cbiere | 2006-08-26 00:20:24 -0400 (Sat, 26 Aug 2006) | 11 lines

 * Removed unnecessary uploads_gui_set_gnet_addr() and
   gcu_uploads_gui_set_gnet_addr().
 * upload_request():
   * Set u->gnet_addr and u->gnet_port.
 * struct gnet_upload_info:
   * Added members "gnet_addr" and "gnet_port".
 * uploads_gui_update_upload_info():
   * Show "(partial)" and "(quick)" instead of a mystical asterisk.
 * uploads_gui_host_string(): Show peer address and port in the host
   column as well if known.

------------------------------------------------------------------------
r11726 | cbiere | 2006-08-25 21:32:28 -0400 (Fri, 25 Aug 2006) | 5 lines

 * search_browse_results():
   * Use search_check_results_set() so that results from host browsing
     are treated exactly like normal search results
     (coloring/marking/auto-download).

------------------------------------------------------------------------
r11725 | cbiere | 2006-08-25 19:12:51 -0400 (Fri, 25 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11724 | rmanfredi | 2006-08-25 18:40:34 -0400 (Fri, 25 Aug 2006) | 4 lines

The newest metaconfig no longer requires the presence of MANIFEST.new but
will get along with only a MANIFEST file.
Regenerated Configure with latest metaconfig.

------------------------------------------------------------------------
r11723 | cbiere | 2006-08-24 19:39:20 -0400 (Thu, 24 Aug 2006) | 3 lines

 * server_list_lookup(): Another call to download_check().
 * create_download(): download_alloc() sets d->magic already.

------------------------------------------------------------------------
r11722 | cbiere | 2006-08-24 19:26:28 -0400 (Thu, 24 Aug 2006) | 3 lines

 * guc_download_queue_is_frozen(), download_queue_is_frozen():
   * Changed return type to gboolean.

------------------------------------------------------------------------
r11721 | cbiere | 2006-08-24 19:23:30 -0400 (Thu, 24 Aug 2006) | 3 lines

 * Added much more download_check() calls.
 * download_queue_is_frozen(): Changed return type to gboolean.

------------------------------------------------------------------------
r11720 | cbiere | 2006-08-24 18:30:38 -0400 (Thu, 24 Aug 2006) | 2 lines

 * download_index_changed(): Fixed memory leak.

------------------------------------------------------------------------
r11719 | cbiere | 2006-08-24 18:27:21 -0400 (Thu, 24 Aug 2006) | 4 lines

 * Renamed "l" to "sl" if of type "GSList *".
 * When using download_check(), don't access the download structure before
   this check.

------------------------------------------------------------------------
r11718 | cbiere | 2006-08-24 18:08:16 -0400 (Thu, 24 Aug 2006) | 3 lines

 * Removed unnecessary GCC-specific "__attribute__((__packed__))". Structures
   based on char arrays don't need this.

------------------------------------------------------------------------
r11717 | cbiere | 2006-08-24 17:56:52 -0400 (Thu, 24 Aug 2006) | 4 lines

 * Added macro KEEP_FUNCTION and applied it to get_rcsid() because GCC >= 4.1
   optimizes the functions and variables away otherwise. The original patch
   was provided by Bill Pringlemeir.

------------------------------------------------------------------------
r11716 | rmanfredi | 2006-08-24 14:12:11 -0400 (Thu, 24 Aug 2006) | 2 lines

Boo!

------------------------------------------------------------------------
r11715 | cbiere | 2006-08-23 18:10:43 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Use g_message() instead of printf() for timestamps.

------------------------------------------------------------------------
r11714 | cbiere | 2006-08-23 18:09:57 -0400 (Wed, 23 Aug 2006) | 2 lines

 * browse_host_dl_free(): Use atom_str_free_null().

------------------------------------------------------------------------
r11713 | cbiere | 2006-08-23 18:08:41 -0400 (Wed, 23 Aug 2006) | 4 lines

 * tls_handshake(), tls_bye():
   * Show "errno" only when GNUTLS_E_PULL_ERROR or GNUTLS_E_PUSH_ERROR
     is returned. Otherwise errno will be bogus.

------------------------------------------------------------------------
r11712 | cbiere | 2006-08-23 18:06:25 -0400 (Wed, 23 Aug 2006) | 4 lines

 * Moved gui_search_get_colors() to search_common.[ch].
 * Use a dark green to mark results matching partial files or files queued
   for downloading.

------------------------------------------------------------------------
r11711 | rmanfredi | 2006-08-23 17:21:37 -0400 (Wed, 23 Aug 2006) | 2 lines

Bumped date after leaf query hop fixing.

------------------------------------------------------------------------
r11710 | cbiere | 2006-08-23 16:48:24 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Update the sensitivity of the "purge" button after regex matching.

------------------------------------------------------------------------
r11709 | cbiere | 2006-08-23 16:20:29 -0400 (Wed, 23 Aug 2006) | 2 lines

 * shell_get_token(): Suppress compiler warning.

------------------------------------------------------------------------
r11708 | cbiere | 2006-08-23 15:00:41 -0400 (Wed, 23 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11707 | cbiere | 2006-08-23 13:44:54 -0400 (Wed, 23 Aug 2006) | 4 lines

 * search_matched():
   * Minor style fix.
   * Only inform about excessive dispatch times.

------------------------------------------------------------------------
r11706 | cbiere | 2006-08-23 13:43:35 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Added const-qualifiers for "muid".

------------------------------------------------------------------------
r11705 | cbiere | 2006-08-23 13:43:07 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Use g_message() instead of printf() so that we have timestamps.

------------------------------------------------------------------------
r11704 | cbiere | 2006-08-23 13:41:15 -0400 (Wed, 23 Aug 2006) | 2 lines

 * gtk_gnutella_exit(): Call bitzi_close() on shutdown.

------------------------------------------------------------------------
r11703 | cbiere | 2006-08-23 13:40:39 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Added bitzi_close().

------------------------------------------------------------------------
r11702 | rmanfredi | 2006-08-23 13:40:12 -0400 (Wed, 23 Aug 2006) | 2 lines

Removed obvious typo.

------------------------------------------------------------------------
r11701 | cbiere | 2006-08-23 13:39:48 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Remove the heartbeat callback on shutdown and release all used memory.

------------------------------------------------------------------------
r11700 | cbiere | 2006-08-23 13:38:09 -0400 (Wed, 23 Aug 2006) | 3 lines

 * tls_handshake(), tls_bye():
   * Show "errno" if interesting.

------------------------------------------------------------------------
r11699 | cbiere | 2006-08-23 13:35:10 -0400 (Wed, 23 Aug 2006) | 4 lines

 * constant_make(): Dropped unneccessary cast.
 * eval_close(): Use atom_str_free_null().
 * get_variable(): Accept only ASCII alphanumerics in variable names.

------------------------------------------------------------------------
r11698 | rmanfredi | 2006-08-23 13:34:02 -0400 (Wed, 23 Aug 2006) | 2 lines

It's all scum.

------------------------------------------------------------------------
r11697 | cbiere | 2006-08-23 13:33:35 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Don't drop search results received over UDP immediately.

------------------------------------------------------------------------
r11696 | cbiere | 2006-08-23 13:32:27 -0400 (Wed, 23 Aug 2006) | 3 lines

 * search_free_r_set(): Minor style fix.
 * get_results_set(): Check n->addr for hostiles too.

------------------------------------------------------------------------
r11695 | cbiere | 2006-08-23 13:30:41 -0400 (Wed, 23 Aug 2006) | 2 lines

 * filter_record(): Use atom_str_free_null().

------------------------------------------------------------------------
r11694 | cbiere | 2006-08-23 13:27:59 -0400 (Wed, 23 Aug 2006) | 2 lines

 * gui_update_download_server(): Fixed an atom leak.

------------------------------------------------------------------------
r11693 | rmanfredi | 2006-08-23 13:12:33 -0400 (Wed, 23 Aug 2006) | 2 lines

Queries from leaves are now processed with hops=1.

------------------------------------------------------------------------
r11692 | rmanfredi | 2006-08-23 13:01:25 -0400 (Wed, 23 Aug 2006) | 3 lines

Since we no longer decrement the hop count for leaf queries, the logic
needed to be changed slightly, lest those queries were simply ignored.

------------------------------------------------------------------------
r11691 | cbiere | 2006-08-23 12:18:20 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11690 | cbiere | 2006-08-23 11:15:46 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Another saboteur.

------------------------------------------------------------------------
r11689 | cbiere | 2006-08-23 10:40:29 -0400 (Wed, 23 Aug 2006) | 2 lines

 * Let god sort 'em out.

------------------------------------------------------------------------
r11688 | cbiere | 2006-08-22 22:34:21 -0400 (Tue, 22 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11687 | cbiere | 2006-08-22 22:20:41 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r11686 | cbiere | 2006-08-22 22:19:20 -0400 (Tue, 22 Aug 2006) | 2 lines

 * ext_unknown_parse(): Improved readability.

------------------------------------------------------------------------
r11685 | cbiere | 2006-08-22 22:01:45 -0400 (Tue, 22 Aug 2006) | 6 lines

 * search_gui_get_info():
   * Fixed bug causing truncation when display "tag" data.
 * search_gui_set_current_search():
  * Forget the current search to prevent side-effects caused by setting
    the value of "spinbutton_search_reissue_timeout".

------------------------------------------------------------------------
r11684 | cbiere | 2006-08-22 21:55:56 -0400 (Tue, 22 Aug 2006) | 7 lines

 * search_gui_add_record():
   * Don't modify atoms! Not even temporarily.
   * Use g_string_append_len().
 * search_gui_set_current_search():
   * Forget the current search to prevent side-effects caused by setting
     the value of "spinbutton_search_reissue_timeout".

------------------------------------------------------------------------
r11683 | cbiere | 2006-08-22 20:37:42 -0400 (Tue, 22 Aug 2006) | 8 lines

 * node_close():
   * Use node_remove() instead of duplicating a lot code from it.
   * The order of calls wasn't correct as the socket was freed before
     all I/O callbacks were disabled.
 * node_remove_v():
   * Minor modifications so that it works correctly when called during a
     shutdown that is by node_close().

------------------------------------------------------------------------
r11682 | cbiere | 2006-08-22 19:36:18 -0400 (Tue, 22 Aug 2006) | 3 lines

 * Fixed parsing bugs. The code didn't handle cases in which shell_get_token()
   sets *pos to -1 correctly causing the code to see bogus arguments.

------------------------------------------------------------------------
r11681 | cbiere | 2006-08-22 18:34:42 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Added "shutdown" command to the shell.

------------------------------------------------------------------------
r11680 | cbiere | 2006-08-22 18:29:40 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Fixed typo.

------------------------------------------------------------------------
r11679 | cbiere | 2006-08-22 18:11:36 -0400 (Tue, 22 Aug 2006) | 3 lines

 * Use atom_.*_free_null() for less duplication and to be on the safe side.
 * Removed unnecessary cast.

------------------------------------------------------------------------
r11678 | rmanfredi | 2006-08-22 18:02:57 -0400 (Tue, 22 Aug 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11677 | rmanfredi | 2006-08-22 17:53:18 -0400 (Tue, 22 Aug 2006) | 2 lines

Added coloring of unrequested results delivered via UDP in "chocolate".

------------------------------------------------------------------------
r11676 | cbiere | 2006-08-22 15:44:21 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11675 | cbiere | 2006-08-22 13:57:35 -0400 (Tue, 22 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11674 | rmanfredi | 2006-08-22 12:50:23 -0400 (Tue, 22 Aug 2006) | 2 lines

Added missing ?T: declaration for "flags".

------------------------------------------------------------------------
r11673 | rmanfredi | 2006-08-22 12:49:51 -0400 (Tue, 22 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11672 | cbiere | 2006-08-22 09:13:41 -0400 (Tue, 22 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11671 | nonamer | 2006-08-22 09:10:36 -0400 (Tue, 22 Aug 2006) | 5 lines

list_iter_has_next was checking wether the next next existed instead of just the next. 
This fixes a download bug were all items could end up in "No download slot" and would
only start when triggered manually


------------------------------------------------------------------------
r11670 | cbiere | 2006-08-22 08:34:57 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Fixed it again.

------------------------------------------------------------------------
r11669 | cbiere | 2006-08-22 08:20:25 -0400 (Tue, 22 Aug 2006) | 2 lines

 * Removed definition of _GNU_SOURCE again; metaconfig should handle this now.

------------------------------------------------------------------------
r11668 | rmanfredi | 2006-08-22 07:26:43 -0400 (Tue, 22 Aug 2006) | 4 lines

Regenerated.
Fixed bug in metaconfig unit whereby HAS_GNULIBC was not included in
the generated config_h.SH.

------------------------------------------------------------------------
r11667 | rmanfredi | 2006-08-22 02:39:42 -0400 (Tue, 22 Aug 2006) | 2 lines

Removed unused dependency variable i_netif, spotted by metalint.

------------------------------------------------------------------------
r11666 | cbiere | 2006-08-21 21:08:42 -0400 (Mon, 21 Aug 2006) | 2 lines

 * Added dist module for detection of posix_memalign().

------------------------------------------------------------------------
r11665 | cbiere | 2006-08-21 21:00:24 -0400 (Mon, 21 Aug 2006) | 4 lines

 * Define _GNU_SOURCE on Linux systems for the prototypes of pwrite(),
   pread() and memalign(). The missing prototypes could otherwise cause
   trouble especially on 64-bit machines.

------------------------------------------------------------------------
r11664 | cbiere | 2006-08-21 20:20:21 -0400 (Mon, 21 Aug 2006) | 2 lines

 * dump_hex_line(): Added missing cast to match the format string.

------------------------------------------------------------------------
r11663 | cbiere | 2006-08-21 20:14:00 -0400 (Mon, 21 Aug 2006) | 2 lines

 * Document "-D d_headless".

------------------------------------------------------------------------
r11662 | cbiere | 2006-08-21 19:58:54 -0400 (Mon, 21 Aug 2006) | 2 lines

 * Bumped date due to fix of broken UDP.

------------------------------------------------------------------------
r11661 | cbiere | 2006-08-21 19:55:24 -0400 (Mon, 21 Aug 2006) | 3 lines

 * dump_hex(): Manually buffer the output line-wise because if we dump to
   stderr which is unbuffered this reduces the write() system calls 20 fold.

------------------------------------------------------------------------
r11660 | rmanfredi | 2006-08-21 18:42:21 -0400 (Mon, 21 Aug 2006) | 2 lines

Was still calling G_FREE_NULL(n->socket) instead of socket_free_null().

------------------------------------------------------------------------
r11659 | cbiere | 2006-08-21 18:36:28 -0400 (Mon, 21 Aug 2006) | 3 lines

 * socket_udp_listen(): Forgot the initialize s->buf and s->buf_size for
   the UDP socket(s).

------------------------------------------------------------------------
r11658 | rmanfredi | 2006-08-21 18:15:34 -0400 (Mon, 21 Aug 2006) | 4 lines

During final shutdown, we must no longer read from the nodes since we're
about to clear all the data structures allowing us to parse and route
messages.

------------------------------------------------------------------------
r11657 | rmanfredi | 2006-08-21 17:04:54 -0400 (Mon, 21 Aug 2006) | 2 lines

More DRM-ed scum.

------------------------------------------------------------------------
r11656 | rmanfredi | 2006-08-21 13:46:25 -0400 (Mon, 21 Aug 2006) | 3 lines

GUI will not set CONNECT_F_FORCE for browsing.
Optimized checking of hostiles_check() in socket_connect_finalize().

------------------------------------------------------------------------
r11655 | cbiere | 2006-08-21 13:42:25 -0400 (Mon, 21 Aug 2006) | 3 lines

 * Use CONNECT_F_FORCE for browsing because this is manually initiated and
   we might want to peek at hostile hosts as well.

------------------------------------------------------------------------
r11654 | rmanfredi | 2006-08-21 13:38:19 -0400 (Mon, 21 Aug 2006) | 3 lines

Let forced connections to hostile addresses proceed.
Let browsing of hostile hosts proceed.

------------------------------------------------------------------------
r11653 | rmanfredi | 2006-08-21 13:27:31 -0400 (Mon, 21 Aug 2006) | 2 lines

Don't even allow browse host to start when the address is hostile.

------------------------------------------------------------------------
r11652 | cbiere | 2006-08-20 19:31:23 -0400 (Sun, 20 Aug 2006) | 2 lines

 * Check HAS_MMAP before setting USE_MMAP.

------------------------------------------------------------------------
r11651 | cbiere | 2006-08-20 19:02:15 -0400 (Sun, 20 Aug 2006) | 2 lines

 * Added SOCKET_MAGIC.

------------------------------------------------------------------------
r11650 | cbiere | 2006-08-20 17:12:05 -0400 (Sun, 20 Aug 2006) | 2 lines

 * Minor clean-ups.

------------------------------------------------------------------------
r11649 | cbiere | 2006-08-20 16:33:43 -0400 (Sun, 20 Aug 2006) | 2 lines

 * compat_page_align(): Fixed syntax error.

------------------------------------------------------------------------
r11648 | cbiere | 2006-08-20 15:40:26 -0400 (Sun, 20 Aug 2006) | 4 lines

 * Added missing MAP_PRIVATE so that mmap() could never succeed here on
   platforms insisting on this flag. Obviously, nobody ever used
   -DPROTECT_ATOMS on Linux.

------------------------------------------------------------------------
r11647 | cbiere | 2006-08-20 15:16:57 -0400 (Sun, 20 Aug 2006) | 2 lines

 * Changed more GNUTLS types to their old variants.

------------------------------------------------------------------------
r11646 | cbiere | 2006-08-20 14:41:41 -0400 (Sun, 20 Aug 2006) | 3 lines

 * Use gnutls_session instead of gnutls_session_t. Older versions of
   GNU TLS (before 1.2.0) used the former.

------------------------------------------------------------------------
r11645 | cbiere | 2006-08-20 14:23:43 -0400 (Sun, 20 Aug 2006) | 2 lines

 * compat_page_align(): Show more detailed error message if mmap() failed.

------------------------------------------------------------------------
r11644 | cbiere | 2006-08-20 13:58:11 -0400 (Sun, 20 Aug 2006) | 2 lines

 * compat_pagesize_intern(): More pagesize checks.

------------------------------------------------------------------------
r11643 | cbiere | 2006-08-20 13:21:26 -0400 (Sun, 20 Aug 2006) | 2 lines

 * Added further comment.

------------------------------------------------------------------------
r11642 | cbiere | 2006-08-20 13:15:32 -0400 (Sun, 20 Aug 2006) | 2 lines

 * compat_page_align(): Added missing semi-colon.

------------------------------------------------------------------------
r11641 | rmanfredi | 2006-08-20 10:59:24 -0400 (Sun, 20 Aug 2006) | 2 lines

It's all scum.

------------------------------------------------------------------------
r11640 | rmanfredi | 2006-08-20 10:47:12 -0400 (Sun, 20 Aug 2006) | 4 lines

Allocate socket buffer via malloc(), not via compat_page_align() since the
latter can fail when we default to mmap(), and there is no need to align
the socket buffer on a page boundary.

------------------------------------------------------------------------
r11639 | rmanfredi | 2006-08-20 10:42:17 -0400 (Sun, 20 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11638 | rmanfredi | 2006-08-20 10:41:45 -0400 (Sun, 20 Aug 2006) | 2 lines

Forgot to remove HAS_MUNMAP mention.

------------------------------------------------------------------------
r11637 | rmanfredi | 2006-08-20 10:40:15 -0400 (Sun, 20 Aug 2006) | 2 lines

Bail out if they have neither posix_memalign() nor memalign() nor mmap().

------------------------------------------------------------------------
r11636 | rmanfredi | 2006-08-20 10:04:08 -0400 (Sun, 20 Aug 2006) | 3 lines

Moved UDP payload inflation code into new node_inflate_payload().
Renamed udp_inflate_buffer into payload_inflate_buffer.

------------------------------------------------------------------------
r11635 | rmanfredi | 2006-08-20 09:58:09 -0400 (Sun, 20 Aug 2006) | 2 lines

Fixed typo that prevented correct deflation of UDP payloads.

------------------------------------------------------------------------
r11634 | rmanfredi | 2006-08-20 08:06:23 -0400 (Sun, 20 Aug 2006) | 2 lines

Added assertions for payload deflating.

------------------------------------------------------------------------
r11633 | rmanfredi | 2006-08-20 07:57:28 -0400 (Sun, 20 Aug 2006) | 4 lines

Don't attempt deflation of payloads shorter than 5 bytes.
There is no need to call zlib_deflate_close() after calling zlib_deflate()
with the whole data.

------------------------------------------------------------------------
r11632 | rmanfredi | 2006-08-20 07:56:08 -0400 (Sun, 20 Aug 2006) | 3 lines

Added tracking of whether the deflated stream has been closed, along with
the predicate zlib_deflater_closed().

------------------------------------------------------------------------
r11631 | cbiere | 2006-08-20 05:34:30 -0400 (Sun, 20 Aug 2006) | 3 lines

 * Moved the socket buffer from "struct gnutella_socket" so that it can
   be allocated, freed and resized dynamically.

------------------------------------------------------------------------
r11630 | rmanfredi | 2006-08-20 05:27:16 -0400 (Sun, 20 Aug 2006) | 2 lines

Enforce architectural limit of 64K per message.

------------------------------------------------------------------------
r11629 | rmanfredi | 2006-08-20 05:01:13 -0400 (Sun, 20 Aug 2006) | 3 lines

Make sure remote control is compiled-in by default, which is safe anyway
since it has to be explicitly enabled by configuration or via the GUI.

------------------------------------------------------------------------
r11628 | rmanfredi | 2006-08-20 04:54:29 -0400 (Sun, 20 Aug 2006) | 3 lines

Added GUI mappings to show them whether they have enough UDP support to be
able to switch to ultra mode.

------------------------------------------------------------------------
r11627 | rmanfredi | 2006-08-20 03:31:15 -0400 (Sun, 20 Aug 2006) | 2 lines

Fixed hop count bug, requiring UPs to upgrade.

------------------------------------------------------------------------
r11626 | rmanfredi | 2006-08-20 03:30:18 -0400 (Sun, 20 Aug 2006) | 3 lines

Don't decrement hops for leaf-node originated queries lest a neighbouring UP
could drop the OOB flag from the query if it is not OOB-proxied.

------------------------------------------------------------------------
r11625 | rmanfredi | 2006-08-19 12:02:49 -0400 (Sat, 19 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11624 | cbiere | 2006-08-19 11:56:01 -0400 (Sat, 19 Aug 2006) | 2 lines

 * Check for IFF_* flags too.

------------------------------------------------------------------------
r11623 | rmanfredi | 2006-08-19 11:51:51 -0400 (Sat, 19 Aug 2006) | 2 lines

Do not check compatibility of glib.h with GTK if compiling for headless.

------------------------------------------------------------------------
r11622 | rmanfredi | 2006-08-19 11:37:52 -0400 (Sat, 19 Aug 2006) | 2 lines

Propagate the glib flags to gtk flags if we're compiling headless.

------------------------------------------------------------------------
r11621 | cbiere | 2006-08-19 10:52:58 -0400 (Sat, 19 Aug 2006) | 2 lines

 * gui.h was moved from topless/ to gtk/.

------------------------------------------------------------------------
r11620 | rmanfredi | 2006-08-19 10:50:58 -0400 (Sat, 19 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11619 | rmanfredi | 2006-08-19 10:50:14 -0400 (Sat, 19 Aug 2006) | 2 lines

Don't check for GTK+ if we're running without a GUI.

------------------------------------------------------------------------
r11618 | rmanfredi | 2006-08-19 10:39:28 -0400 (Sat, 19 Aug 2006) | 2 lines

Created.

------------------------------------------------------------------------
r11617 | cbiere | 2006-08-19 09:44:16 -0400 (Sat, 19 Aug 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11616 | rmanfredi | 2006-08-19 08:43:09 -0400 (Sat, 19 Aug 2006) | 2 lines

Forgot to re-sort manifests.

------------------------------------------------------------------------
r11615 | rmanfredi | 2006-08-19 08:39:56 -0400 (Sat, 19 Aug 2006) | 2 lines

Added support of "headless" builds natively from Configure.

------------------------------------------------------------------------
r11614 | cbiere | 2006-08-18 21:00:55 -0400 (Fri, 18 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11613 | cbiere | 2006-08-18 20:25:22 -0400 (Fri, 18 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11612 | cbiere | 2006-08-18 19:45:43 -0400 (Fri, 18 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11611 | cbiere | 2006-08-18 19:09:22 -0400 (Fri, 18 Aug 2006) | 2 lines

 * 135 more spam items.

------------------------------------------------------------------------
r11610 | cbiere | 2006-08-18 17:20:06 -0400 (Fri, 18 Aug 2006) | 2 lines

 * browse_data_read(): Removed unnecessary variable.

------------------------------------------------------------------------
r11609 | cbiere | 2006-08-18 17:10:12 -0400 (Fri, 18 Aug 2006) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r11608 | cbiere | 2006-08-18 17:06:14 -0400 (Fri, 18 Aug 2006) | 2 lines

 * upload_writable(): Removed unnecessary cast.

------------------------------------------------------------------------
r11607 | cbiere | 2006-08-18 17:05:21 -0400 (Fri, 18 Aug 2006) | 4 lines

 * query_strip_oob_flag(), query_set_oob_flag():
   * Added const-qualifier.
   * Use peek_* and poke_* instead of READ_*/WRITE_*.

------------------------------------------------------------------------
r11606 | cbiere | 2006-08-18 17:03:16 -0400 (Fri, 18 Aug 2006) | 2 lines

 * Suppress warnings about redefinition of g_string_append_c().

------------------------------------------------------------------------
r11605 | cbiere | 2006-08-18 17:01:35 -0400 (Fri, 18 Aug 2006) | 3 lines

 * Removed unnecessary casts.
 * Added const-qualifiers.

------------------------------------------------------------------------
r11604 | cbiere | 2006-08-18 16:57:27 -0400 (Fri, 18 Aug 2006) | 2 lines

 * config_comment(): Use g_string_append_c() to append single characters.

------------------------------------------------------------------------
r11603 | cbiere | 2006-08-18 16:55:23 -0400 (Fri, 18 Aug 2006) | 2 lines

 * Added missing #include for query_strip_oob_flag() prototype.

------------------------------------------------------------------------
r11602 | cbiere | 2006-08-18 15:49:27 -0400 (Fri, 18 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11601 | rmanfredi | 2006-08-18 15:39:30 -0400 (Fri, 18 Aug 2006) | 2 lines

More scum.

------------------------------------------------------------------------
r11600 | cbiere | 2006-08-18 11:55:05 -0400 (Fri, 18 Aug 2006) | 2 lines

 * Added missing opening parenthesis.

------------------------------------------------------------------------
r11599 | rmanfredi | 2006-08-18 04:32:12 -0400 (Fri, 18 Aug 2006) | 5 lines

Must now have good UDP support to become an ultra node.
This means UDP must be enabled, properly configured, and OOB proxying of
queries must be enabled.
Extended the notion of non-firewalled to UDP as well (since it is now required).

------------------------------------------------------------------------
r11598 | rmanfredi | 2006-08-18 04:30:24 -0400 (Fri, 18 Aug 2006) | 2 lines

Added property "up_req_good_udp".

------------------------------------------------------------------------
r11597 | rmanfredi | 2006-08-18 04:15:29 -0400 (Fri, 18 Aug 2006) | 3 lines

If the UP is running without UDP support and the query is not leaf-guided,
then the OOB delivery bit must be stripped so that results be routed back.

------------------------------------------------------------------------
r11596 | cbiere | 2006-08-17 22:04:48 -0400 (Thu, 17 Aug 2006) | 2 lines

 * upload_writable(): Added EBUSY to non-critical sendfile() errors.

------------------------------------------------------------------------
r11595 | cbiere | 2006-08-17 22:02:18 -0400 (Thu, 17 Aug 2006) | 3 lines

 * Use the SF_NODISKIO flag for sendfile() if available.
 * Corrected comments: There is no BSD sendfile(); only FreeBSD has sendfile(). 

------------------------------------------------------------------------
r11594 | cbiere | 2006-08-17 21:31:03 -0400 (Thu, 17 Aug 2006) | 3 lines

 * Added volatile-qualifiers.
 * Changed some variable types to sig_atomic_t.

------------------------------------------------------------------------
r11593 | cbiere | 2006-08-17 21:25:01 -0400 (Thu, 17 Aug 2006) | 3 lines

 * Reduced min_map_size() for mmap() from 256 KiB to 64 KiB.
 * Added volatile-qualifiers.

------------------------------------------------------------------------
r11592 | cbiere | 2006-08-17 20:54:41 -0400 (Thu, 17 Aug 2006) | 3 lines

 * Added workaround for /dev/poll. Since the special device cannot be
   polled, we register a custom poll function with GLib.

------------------------------------------------------------------------
r11591 | rmanfredi | 2006-08-17 19:25:47 -0400 (Thu, 17 Aug 2006) | 4 lines

Since ultra nodes form the core of the Gnutella network, they cannot be
running an ancient version.  For now, refuse to promote to ultra node when
running in auto mode.

------------------------------------------------------------------------
r11590 | rmanfredi | 2006-08-17 19:10:24 -0400 (Thu, 17 Aug 2006) | 3 lines

Make sure we don't ignore firewalled results sent to firewalled hosts if
both appear to support firewalled-to-firewalled transfers.

------------------------------------------------------------------------
r11589 | rmanfredi | 2006-08-17 18:39:45 -0400 (Thu, 17 Aug 2006) | 2 lines

Dynamic querying believed to be working fine again.

------------------------------------------------------------------------
r11588 | rmanfredi | 2006-08-17 18:33:56 -0400 (Thu, 17 Aug 2006) | 2 lines

Fixed line longer than 80 chars.

------------------------------------------------------------------------
r11587 | rmanfredi | 2006-08-17 18:32:53 -0400 (Thu, 17 Aug 2006) | 2 lines

Typo fix in comment.

------------------------------------------------------------------------
r11586 | rmanfredi | 2006-08-17 14:30:16 -0400 (Thu, 17 Aug 2006) | 4 lines

Let the dynamic query ignore results from firewalled hosts that are targeted
to a firewalled host who did not claim to support firewalled-to-firewalled
transfers.

------------------------------------------------------------------------
r11585 | rmanfredi | 2006-08-17 12:39:25 -0400 (Thu, 17 Aug 2006) | 5 lines

Will now stop a query for which we get no guidance and for which we do not
route the query hits.
Ask for guidance when we have received 20 new results without receiving a
status from the leaf.

------------------------------------------------------------------------
r11584 | rmanfredi | 2006-08-17 11:45:54 -0400 (Thu, 17 Aug 2006) | 2 lines

Added oob_proxy_debug protection for one message.

------------------------------------------------------------------------
r11583 | rmanfredi | 2006-08-17 11:02:10 -0400 (Thu, 17 Aug 2006) | 2 lines

Removed unused DQ_F_UNSOLICITED flag.

------------------------------------------------------------------------
r11582 | rmanfredi | 2006-08-17 10:53:46 -0400 (Thu, 17 Aug 2006) | 2 lines

Added missing debug levels to debugging().

------------------------------------------------------------------------
r11581 | cbiere | 2006-08-17 10:12:37 -0400 (Thu, 17 Aug 2006) | 2 lines

 * Added missing tls_wio_link() stub for compiling without GNU TLS.

------------------------------------------------------------------------
r11580 | cbiere | 2006-08-17 10:10:19 -0400 (Thu, 17 Aug 2006) | 2 lines

 * filter_gui_filter_clear_list(): Suppress compiler warning.

------------------------------------------------------------------------
r11579 | cbiere | 2006-08-17 10:08:09 -0400 (Thu, 17 Aug 2006) | 2 lines

 * gm_setproctitle(): Corrected function name.

------------------------------------------------------------------------
r11578 | cbiere | 2006-08-17 08:56:43 -0400 (Thu, 17 Aug 2006) | 3 lines

 * print_node_info(): Slightly modified format string because Solaris did not
   like it.

------------------------------------------------------------------------
r11577 | cbiere | 2006-08-17 08:53:55 -0400 (Thu, 17 Aug 2006) | 3 lines

 * download_forget(): Pass no_reason instead of NULL to download_unavailable(),
   it has the same effect but causes no compiler warnings.

------------------------------------------------------------------------
r11576 | cbiere | 2006-08-17 08:50:15 -0400 (Thu, 17 Aug 2006) | 3 lines

 * Fixed compile error for systems without  CMSG_FIRSTHDR() and CMSG_NXTHDR()
   macros.

------------------------------------------------------------------------
r11575 | cbiere | 2006-08-17 08:48:59 -0400 (Thu, 17 Aug 2006) | 3 lines

 * gm_setproctitle(): Added cast because Solaris has a non-standard
   struct iovec causing a compiler warning.

------------------------------------------------------------------------
r11574 | cbiere | 2006-08-17 08:47:36 -0400 (Thu, 17 Aug 2006) | 2 lines

 * set_poll_event(): This function returns no value. Why doesn't GCC warn?

------------------------------------------------------------------------
r11573 | cbiere | 2006-08-17 08:45:16 -0400 (Thu, 17 Aug 2006) | 3 lines

 * handle_messages_supported(): node_set_leaf_guidance() takes a node ID not
   a "struct gnutella_node *".

------------------------------------------------------------------------
r11572 | cbiere | 2006-08-17 08:15:52 -0400 (Thu, 17 Aug 2006) | 2 lines

 * It's still not 2099.

------------------------------------------------------------------------
r11571 | rmanfredi | 2006-08-17 05:49:34 -0400 (Thu, 17 Aug 2006) | 6 lines

Reverted to positive logic for leaf-guidance support.
Some servents do not set the "leaf-guided" flag in queries, so try to intuit
support from the advertised vendor messages, as we did before.
DQ was counting new results we got since the last leaf status but was not
perusing it.

------------------------------------------------------------------------
r11570 | rmanfredi | 2006-08-17 05:47:47 -0400 (Thu, 17 Aug 2006) | 2 lines

Use data_hex_str() instead of g_strdup(guid_hex_str()).

------------------------------------------------------------------------
r11569 | rmanfredi | 2006-08-17 05:06:22 -0400 (Thu, 17 Aug 2006) | 4 lines

Had the meaning of bit 13 of tagged query speed wrong: it means include XML,
not that one does not want XML.
Fixed debug levels and show query flags in the DQ creation logs.

------------------------------------------------------------------------
r11568 | rmanfredi | 2006-08-17 05:05:01 -0400 (Thu, 17 Aug 2006) | 2 lines

Fixed debugging levels.

------------------------------------------------------------------------
r11567 | cbiere | 2006-08-17 00:31:46 -0400 (Thu, 17 Aug 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r11566 | cbiere | 2006-08-16 22:50:23 -0400 (Wed, 16 Aug 2006) | 5 lines

 * Added several columns to the search results display.
 * Allow looking at results from hostiles.
 * Show spam in red and results from hostiles in purple if they are
   not discarded.

------------------------------------------------------------------------
r11565 | cbiere | 2006-08-16 22:48:28 -0400 (Wed, 16 Aug 2006) | 2 lines

 * shared_file_complete_by_sha1(): Supplementary documentation.

------------------------------------------------------------------------
r11564 | cbiere | 2006-08-16 22:37:37 -0400 (Wed, 16 Aug 2006) | 2 lines

 * Minor style fix.

------------------------------------------------------------------------
r11563 | cbiere | 2006-08-16 22:32:50 -0400 (Wed, 16 Aug 2006) | 2 lines

 * A nutter spammer.

------------------------------------------------------------------------
r11562 | rmanfredi | 2006-08-16 12:49:51 -0400 (Wed, 16 Aug 2006) | 2 lines

Reworded log messages and added oob_proxy_debug protections.

------------------------------------------------------------------------
r11561 | rmanfredi | 2006-08-16 12:48:10 -0400 (Wed, 16 Aug 2006) | 4 lines

Be nicer to leaves when there are many results returned.
Also linger for 3 minutes and not 2 to give more time for others to return
OOB hits.

------------------------------------------------------------------------
r11560 | rmanfredi | 2006-08-16 12:46:21 -0400 (Wed, 16 Aug 2006) | 4 lines

Added node_addr2(), same as node_addr(), to be able to use both in the same
print statement..
Restored the proper semantics of node_gnet_addr().

------------------------------------------------------------------------
r11559 | rmanfredi | 2006-08-16 12:43:10 -0400 (Wed, 16 Aug 2006) | 2 lines

Added "oob_proxy_debug" property.

------------------------------------------------------------------------
r11558 | rmanfredi | 2006-08-16 12:41:42 -0400 (Wed, 16 Aug 2006) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r11557 | rmanfredi | 2006-08-16 09:13:51 -0400 (Wed, 16 Aug 2006) | 4 lines

Before letting the dynamic query know about those OOB results, see
whether we're going to claim then.  There's no need to account for
a flood of results we will not propagate.

------------------------------------------------------------------------
r11556 | rmanfredi | 2006-08-16 07:37:58 -0400 (Wed, 16 Aug 2006) | 2 lines

Let the dynamic querying layer do OOB-proxying wrt to leaf guidance.

------------------------------------------------------------------------
r11555 | rmanfredi | 2006-08-16 07:36:11 -0400 (Wed, 16 Aug 2006) | 5 lines

Revisited dynamic querying and leaf-guidance: we now trust the query's flags
unless we had evidence the node is not sending status back.
We OOB-proxy when we think the node will not send us guidance, and we make sure
we know the leaf's original MUID to be able to process unsolicited status.

------------------------------------------------------------------------
r11554 | cbiere | 2006-08-16 06:35:39 -0400 (Wed, 16 Aug 2006) | 2 lines

 * c_queue_* and c_dl_* are not used for Gtk+ 2.x anymore.

------------------------------------------------------------------------
r11553 | cbiere | 2006-08-16 05:54:43 -0400 (Wed, 16 Aug 2006) | 5 lines

 * add_file(): Fixed bug: The GGEP ALT count was wrong if there were any
   IPv6 alt-locs. Since we cannot pass these (there's not ALT for IPv6)
   in query hits, we skip them. Thus, these must be scrubbed from the alt-loc
   vector in advance and the count be adjusted.

------------------------------------------------------------------------
r11552 | cbiere | 2006-08-16 05:28:23 -0400 (Wed, 16 Aug 2006) | 4 lines

 * parq_download_queue_ack():
   * Use switch() for enums.
   * Hide annoying debug message when not debugging PARQ.

------------------------------------------------------------------------
r11551 | cbiere | 2006-08-16 04:49:08 -0400 (Wed, 16 Aug 2006) | 2 lines

 * Ukrainian translation v4 by Vetal.

------------------------------------------------------------------------
r11550 | cbiere | 2006-08-15 20:58:21 -0400 (Tue, 15 Aug 2006) | 2 lines

 * Welcome aboard.

------------------------------------------------------------------------
r11549 | rmanfredi | 2006-08-15 20:15:23 -0400 (Tue, 15 Aug 2006) | 2 lines

Do not terminate a query because we fail to get the query status we asked for.

------------------------------------------------------------------------
r11548 | cbiere | 2006-08-15 20:01:38 -0400 (Tue, 15 Aug 2006) | 3 lines

 * [GTK2] Added refreshing button to the property browser to update the
   display of all listed property values. 

------------------------------------------------------------------------
r11547 | cbiere | 2006-08-15 17:54:55 -0400 (Tue, 15 Aug 2006) | 2 lines

 * slist_contains_identical(): Fixed pedantic compiler warning.

------------------------------------------------------------------------
r11546 | rmanfredi | 2006-08-15 17:49:15 -0400 (Tue, 15 Aug 2006) | 2 lines

Critical bug fixes.

------------------------------------------------------------------------
r11545 | cbiere | 2006-08-15 17:26:17 -0400 (Tue, 15 Aug 2006) | 5 lines

 * oob_proxy_muid_proxied(): Return the original MUID or NULL, instead of
   just TRUE/FALSE.
 * dq_results_expired(): Use the original MUID for vmsg_send_qstat_req()
   if any because the leaf won't recognize it otherwise and stop the query.

------------------------------------------------------------------------
r11544 | cbiere | 2006-08-15 15:42:04 -0400 (Tue, 15 Aug 2006) | 2 lines

 * Destroyed another outpost of the little Czech spammer.

------------------------------------------------------------------------
r11543 | cbiere | 2006-08-15 13:59:31 -0400 (Tue, 15 Aug 2006) | 5 lines

 * handle_qstat_answer(): dq_got_query_status() was not called when the
   leaf reported that it received no results. Therefore the timeout for the
   dynamic was not terminated and the dynamic query was cancelled after just
   one hop.

------------------------------------------------------------------------
r11542 | rmanfredi | 2006-08-15 13:48:38 -0400 (Tue, 15 Aug 2006) | 2 lines

Internal cq time counter is now 64 bits.

------------------------------------------------------------------------
r11541 | rmanfredi | 2006-08-15 13:41:39 -0400 (Tue, 15 Aug 2006) | 3 lines

Made it clear that the time unit of the callout queue is virtual and is
defined by the calls to cq_clock().

------------------------------------------------------------------------
r11540 | cbiere | 2006-08-15 13:38:41 -0400 (Tue, 15 Aug 2006) | 2 lines

 * NEWSFLASH: The callout queue measures time in milliseconds.

------------------------------------------------------------------------
r11539 | rmanfredi | 2006-08-15 13:30:07 -0400 (Tue, 15 Aug 2006) | 2 lines

Fixed debug message.

------------------------------------------------------------------------
r11538 | cbiere | 2006-08-15 13:29:20 -0400 (Tue, 15 Aug 2006) | 2 lines

 * cq_insert(): Time shall be measured in seconds here.

------------------------------------------------------------------------
r11537 | rmanfredi | 2006-08-15 12:16:47 -0400 (Tue, 15 Aug 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11536 | cbiere | 2006-08-15 09:57:10 -0400 (Tue, 15 Aug 2006) | 4 lines

 * Restructered the code a little to reduce the amount of #ifdef conditional
   code.
 * Added untested support for Solaris' /dev/poll.

------------------------------------------------------------------------
r11535 | cbiere | 2006-08-15 08:17:38 -0400 (Tue, 15 Aug 2006) | 2 lines

 * upload_request(): Do not ever use atoi().

------------------------------------------------------------------------
r11534 | rmanfredi | 2006-08-15 07:52:14 -0400 (Tue, 15 Aug 2006) | 2 lines

Refuse GET/HEAD requests sent with additional content.

------------------------------------------------------------------------
r11533 | rmanfredi | 2006-08-15 07:10:28 -0400 (Tue, 15 Aug 2006) | 2 lines

Forgot to count leaf tables in qrp_memory.

------------------------------------------------------------------------
r11532 | rmanfredi | 2006-08-15 07:09:17 -0400 (Tue, 15 Aug 2006) | 2 lines

Moved KUID atom creation before KUID is printed.

------------------------------------------------------------------------
r11531 | rmanfredi | 2006-08-15 06:51:56 -0400 (Tue, 15 Aug 2006) | 3 lines

Added property "qrp_memory" keeping track of all the allocated memory
for QRP tables.

------------------------------------------------------------------------
r11530 | rmanfredi | 2006-08-15 06:50:17 -0400 (Tue, 15 Aug 2006) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r11529 | rmanfredi | 2006-08-15 05:53:41 -0400 (Tue, 15 Aug 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11528 | rmanfredi | 2006-08-15 05:36:33 -0400 (Tue, 15 Aug 2006) | 3 lines

Added new GTA_UL_EXPECTING upload state so that we do not send back a 408
timeout error unless we have started receiving an actual HTTP request.

------------------------------------------------------------------------
r11527 | rmanfredi | 2006-08-15 05:35:08 -0400 (Tue, 15 Aug 2006) | 2 lines

Fixed lines larger than 80 columns.

------------------------------------------------------------------------
r11526 | cbiere | 2006-08-14 20:24:18 -0400 (Mon, 14 Aug 2006) | 3 lines

 * socket_free(): Re-insert hosts into the TLS cache on disconnect to keep
   the entries fresh.

------------------------------------------------------------------------
r11525 | cbiere | 2006-08-14 19:58:36 -0400 (Mon, 14 Aug 2006) | 6 lines

 * Added tls_print_session_info().
 * Minor clean-ups.
 * Some additional consistency checks.
 * Disabled GNUTLS_COMP_DEFLATE because this causes trouble when browsing
   hosts over TLS for some unknown reason.

------------------------------------------------------------------------
r11524 | cbiere | 2006-08-14 19:18:41 -0400 (Mon, 14 Aug 2006) | 2 lines

 * Bumped date due to important bugfix.

------------------------------------------------------------------------
r11523 | cbiere | 2006-08-14 19:16:44 -0400 (Mon, 14 Aug 2006) | 8 lines

 * upload_writable(): Fixed serious bug: The file offset was updated twice
   so that only half of the promised amount was really uploaded causing a
   resume mismatch since the uploaded data contains also the next HTTP
   response and headers. This happens whenever TLS was used or neither
   sendfile() nor mmap() were available because in this case the offset
   has to be updated manually.
   The bug appeared in revision 11483 (2006-08-11).

------------------------------------------------------------------------
r11522 | cbiere | 2006-08-14 15:23:43 -0400 (Mon, 14 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11521 | cbiere | 2006-08-14 14:13:24 -0400 (Mon, 14 Aug 2006) | 3 lines

 * zlib_inflate_into(): Fixed pedantic compiler warning regarding mismatch
   of pointer signedness.

------------------------------------------------------------------------
r11520 | cbiere | 2006-08-14 14:10:10 -0400 (Mon, 14 Aug 2006) | 3 lines

 * socket_free(): Call tls_bye() only if there is an established TLS session.
 * socket_read(): Bumped debug level for verbose message.

------------------------------------------------------------------------
r11519 | cbiere | 2006-08-14 13:08:58 -0400 (Mon, 14 Aug 2006) | 2 lines

 * More evil goodness.

------------------------------------------------------------------------
r11518 | cbiere | 2006-08-14 12:00:27 -0400 (Mon, 14 Aug 2006) | 3 lines

 * Changed NULL_STRING() and EMPTY_STRING() from macros to static inline
   functions so that they can be used safely with expressions.

------------------------------------------------------------------------
r11517 | cbiere | 2006-08-13 20:42:26 -0400 (Sun, 13 Aug 2006) | 3 lines

 * search_gui_got_results(): Commented out assertion that causes a too heavy
   performance penalty.

------------------------------------------------------------------------
r11515 | rmanfredi | 2006-08-13 17:31:49 -0400 (Sun, 13 Aug 2006) | 2 lines

Enriched the information exchanged.  Still work in progress.

------------------------------------------------------------------------
r11514 | rmanfredi | 2006-08-13 12:46:13 -0400 (Sun, 13 Aug 2006) | 2 lines

The Gnutella header size is 23 bytes, not 16.

------------------------------------------------------------------------
r11513 | rmanfredi | 2006-08-13 09:36:50 -0400 (Sun, 13 Aug 2006) | 2 lines

Updated specs before publishing.

------------------------------------------------------------------------
r11512 | rmanfredi | 2006-08-13 09:32:20 -0400 (Sun, 13 Aug 2006) | 2 lines

Forgot to update one header dumping statement for "deflated" payload status.

------------------------------------------------------------------------
r11511 | rmanfredi | 2006-08-13 09:26:51 -0400 (Sun, 13 Aug 2006) | 2 lines

Bumped date due to UDP compression support.

------------------------------------------------------------------------
r11510 | rmanfredi | 2006-08-13 09:25:30 -0400 (Sun, 13 Aug 2006) | 2 lines

Added support for compressed UDP messages (untested so far).

------------------------------------------------------------------------
r11509 | rmanfredi | 2006-08-13 05:47:25 -0400 (Sun, 13 Aug 2006) | 2 lines

Make sure we say 0x08 | 0x01, not 8+1...

------------------------------------------------------------------------
r11508 | rmanfredi | 2006-08-13 05:45:22 -0400 (Sun, 13 Aug 2006) | 2 lines

Added "fall through" comment.

------------------------------------------------------------------------
r11507 | rmanfredi | 2006-08-13 05:43:44 -0400 (Sun, 13 Aug 2006) | 2 lines

Count spurious OOB hit claims.

------------------------------------------------------------------------
r11506 | cbiere | 2006-08-13 05:42:37 -0400 (Sun, 13 Aug 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11505 | rmanfredi | 2006-08-13 05:04:04 -0400 (Sun, 13 Aug 2006) | 2 lines

Initial specifications for compressed solicited UDP traffic.

------------------------------------------------------------------------
r11504 | rmanfredi | 2006-08-13 03:22:12 -0400 (Sun, 13 Aug 2006) | 2 lines

Added RAZB vendor code.

------------------------------------------------------------------------
r11503 | rmanfredi | 2006-08-13 03:21:00 -0400 (Sun, 13 Aug 2006) | 2 lines

Added RAZB vendor code.

------------------------------------------------------------------------
r11502 | cbiere | 2006-08-13 02:53:49 -0400 (Sun, 13 Aug 2006) | 4 lines

 * print_node_info(): Uptime and connected time was swapped.
 * shell_exec_nodes(): Aligned header line again. Dropped extra empty line.
 * shell_exec(): Don't scream at the user.

------------------------------------------------------------------------
r11501 | cbiere | 2006-08-13 02:34:23 -0400 (Sun, 13 Aug 2006) | 3 lines

 * Additional consistency checks.
 * Show the file objects attributes if they are leaked.

------------------------------------------------------------------------
r11500 | cbiere | 2006-08-13 02:32:41 -0400 (Sun, 13 Aug 2006) | 3 lines

 * bitzi_date_compare(): Use SIGN() because casting time_delta_t to int
   could cause an integer overflow which has undefined behaviour.

------------------------------------------------------------------------
r11499 | cbiere | 2006-08-13 02:02:05 -0400 (Sun, 13 Aug 2006) | 2 lines

 * get_results_set(): Warn about unrequested results only when debugging.

------------------------------------------------------------------------
r11498 | cbiere | 2006-08-13 01:58:46 -0400 (Sun, 13 Aug 2006) | 2 lines

 * Added convience macro SIGN() (again?).

------------------------------------------------------------------------
r11497 | cbiere | 2006-08-13 01:57:35 -0400 (Sun, 13 Aug 2006) | 3 lines

 * download_close(): The file descriptors/objects of downloads weren't closed
   on exit. Not a real leak but nice to know anyway.

------------------------------------------------------------------------
r11496 | cbiere | 2006-08-12 17:47:55 -0400 (Sat, 12 Aug 2006) | 2 lines

 * Fixed typo in comment: info -> into.

------------------------------------------------------------------------
r11495 | rmanfredi | 2006-08-12 17:46:35 -0400 (Sat, 12 Aug 2006) | 2 lines

Handle consecutive /../ correctly.

------------------------------------------------------------------------
r11494 | cbiere | 2006-08-12 17:38:10 -0400 (Sat, 12 Aug 2006) | 3 lines

 * Normalize "/foo/../" for the sake of correctness. This should be correct
   in contrast to the Perl script.

------------------------------------------------------------------------
r11493 | rmanfredi | 2006-08-12 17:19:33 -0400 (Sat, 12 Aug 2006) | 2 lines

Was not normalizing /../ in absolute paths.

------------------------------------------------------------------------
r11492 | cbiere | 2006-08-12 17:11:04 -0400 (Sat, 12 Aug 2006) | 6 lines

 * shell_timer(): Replaced hardcoded SHELL_TIMEOUT with property
   "remote_shell_timeout".
 * shell_exec_nodes(): Don't prefix every line with "100- ". Instead indicate
   indicate a multi-line response with "100~ " which is terminated by a line
   which consists of nothing but a dot ".".

------------------------------------------------------------------------
r11491 | cbiere | 2006-08-12 17:07:27 -0400 (Sat, 12 Aug 2006) | 3 lines

 * Added property "remote_shell_timeout" so that this is not hardcoded. The
   default is 60 seconds just like before.

------------------------------------------------------------------------
r11490 | cbiere | 2006-08-12 17:05:38 -0400 (Sat, 12 Aug 2006) | 2 lines

 * gtk_gnutella_exit(): Use atom_str_free_null() instead of atom_str_free().

------------------------------------------------------------------------
r11489 | rmanfredi | 2006-08-12 17:00:14 -0400 (Sat, 12 Aug 2006) | 2 lines

Make sure paths are absolute.

------------------------------------------------------------------------
r11488 | rmanfredi | 2006-08-12 15:02:57 -0400 (Sat, 12 Aug 2006) | 5 lines

Made explicit the GUID echoing in the reply.
Copy request flags as answer flags, being filtered by the level of support of
the replying node: we don't want to change the packet version each time a
new flag gets added, only when the structure of the packet changes.

------------------------------------------------------------------------
r11487 | cbiere | 2006-08-12 14:13:10 -0400 (Sat, 12 Aug 2006) | 4 lines

 * upload_request(): Open partial files with O_RDWR so that the file descriptor
   can be shared with download operations for the same file that might start
   whilst a chunk is uploaded.

------------------------------------------------------------------------
r11486 | cbiere | 2006-08-12 13:37:37 -0400 (Sat, 12 Aug 2006) | 2 lines

 * Set errno to EINVAL if the offset is out of range.

------------------------------------------------------------------------
r11485 | cbiere | 2006-08-12 12:44:05 -0400 (Sat, 12 Aug 2006) | 3 lines

 * Fixed typo reported by Klaus Ethgen to Debian:
   "Bug#382649: Locationerror in de".

------------------------------------------------------------------------
r11484 | cbiere | 2006-08-12 12:29:47 -0400 (Sat, 12 Aug 2006) | 4 lines

 * Minor optimization of file_object_pwritev() and file_object_preadv():
   If we don't have pwritev()/preadv() but pwrite()/pread(), we use the
   latter if there's only a single iovec to save the call to lseek().

------------------------------------------------------------------------
r11483 | cbiere | 2006-08-11 13:46:36 -0400 (Fri, 11 Aug 2006) | 14 lines

 * core/file_object.[ch]:
   * Generalized API so that it can be used for readable and writable files.
   * Added more documentation.
 * core/downloads.c:
   * download_clone(): Attempt to fix a bug with counting downloads per server.
   * download_overlap_check(): Use a file object so that we can reuse an
     existing file descriptor if available.
   * download_request(): Open the file with O_RDWR instead of O_WRONLY so that
     we can reuse the file object for reading when doing an overlap check or
     for partial file-sharing.
 * core/uploads.c:
   * Use file objects for uploads too instead of raw file descriptors so
     the descriptor can shared among multiple uploads.

------------------------------------------------------------------------
r11482 | cbiere | 2006-08-11 13:32:50 -0400 (Fri, 11 Aug 2006) | 2 lines

 * Added safe_readv_fd().

------------------------------------------------------------------------
r11481 | cbiere | 2006-08-11 12:53:26 -0400 (Fri, 11 Aug 2006) | 2 lines

 * More hostiles and spammers.

------------------------------------------------------------------------
r11480 | cbiere | 2006-08-10 22:56:13 -0400 (Thu, 10 Aug 2006) | 2 lines

 * Removed a duplicate too broad range.

------------------------------------------------------------------------
r11479 | cbiere | 2006-08-10 22:40:28 -0400 (Thu, 10 Aug 2006) | 2 lines

 * Caught more spammers.

------------------------------------------------------------------------
r11478 | cbiere | 2006-08-10 03:31:15 -0400 (Thu, 10 Aug 2006) | 5 lines

 * Fixed recent bug that caused the same download being queued several times.
   This was caused by looking only d->sha1 but not at d->file_info->sha1.
 * free_server(): Commented out assertion. This doesn't look critical but
   there might be a leak.

------------------------------------------------------------------------
r11477 | cbiere | 2006-08-10 03:26:47 -0400 (Thu, 10 Aug 2006) | 2 lines

 * Corrected comment.

------------------------------------------------------------------------
r11476 | cbiere | 2006-08-10 03:25:55 -0400 (Thu, 10 Aug 2006) | 2 lines

 * dmesh_raw_add(): Don't let anything without an SHA-1 into the mesh.

------------------------------------------------------------------------
r11475 | cbiere | 2006-08-10 03:14:12 -0400 (Thu, 10 Aug 2006) | 2 lines

 * search_matched(): Fixed bug in previous commit.

------------------------------------------------------------------------
r11474 | cbiere | 2006-08-09 23:34:06 -0400 (Wed, 09 Aug 2006) | 4 lines

 * search_matched():
   * Increased readability.
   * Don't count spam as kept even if it's displayed.

------------------------------------------------------------------------
r11473 | cbiere | 2006-08-09 19:48:39 -0400 (Wed, 09 Aug 2006) | 2 lines

 * Corrected path normalization.

------------------------------------------------------------------------
r11472 | cbiere | 2006-08-09 16:16:44 -0400 (Wed, 09 Aug 2006) | 2 lines

 * version_check(): Changed warning to normal message.

------------------------------------------------------------------------
r11471 | cbiere | 2006-08-09 15:39:27 -0400 (Wed, 09 Aug 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r11470 | cbiere | 2006-08-09 15:23:37 -0400 (Wed, 09 Aug 2006) | 2 lines

 * Another DRM spam range used by intentmediaworks.

------------------------------------------------------------------------
r11469 | cbiere | 2006-08-09 15:14:46 -0400 (Wed, 09 Aug 2006) | 2 lines

 * Another one dives into hellfire.

------------------------------------------------------------------------
r11468 | cbiere | 2006-08-08 16:35:42 -0400 (Tue, 08 Aug 2006) | 3 lines

 * Integrated fix by Lee Killough for bug #1422526
  '"Drop results" should prepend, not append, to filters'

------------------------------------------------------------------------
r11467 | cbiere | 2006-08-08 00:38:22 -0400 (Tue, 08 Aug 2006) | 2 lines

 * More ponies.

------------------------------------------------------------------------
r11466 | cbiere | 2006-08-07 21:46:19 -0400 (Mon, 07 Aug 2006) | 2 lines

 * 21 more spam items.

------------------------------------------------------------------------
r11465 | cbiere | 2006-08-07 21:41:28 -0400 (Mon, 07 Aug 2006) | 3 lines

 * According to "FlashCode" the first line of this file must be
   "#!/usr/bin/make -f".

------------------------------------------------------------------------
r11464 | cbiere | 2006-08-07 21:36:47 -0400 (Mon, 07 Aug 2006) | 3 lines

 * Simplified the file object API so that the file descriptor must be
   created by the caller.

------------------------------------------------------------------------
r11463 | cbiere | 2006-08-07 21:30:49 -0400 (Mon, 07 Aug 2006) | 4 lines

 * do_open(): Prefix messages with the function name. Otherwise it's difficult
   to find the source since several messages are used in completely different
   places.

------------------------------------------------------------------------
r11462 | cbiere | 2006-08-07 21:28:34 -0400 (Mon, 07 Aug 2006) | 6 lines

 * print_node_info():
   * Fixed bug: One must not use short_time() twice when using it as parameter
     because the result points to a static buffer.
   * Aligned columns for nicer display.
 * shell_exec_nodes(): Aligned header line.

------------------------------------------------------------------------
r11461 | cbiere | 2006-08-07 21:23:56 -0400 (Mon, 07 Aug 2006) | 2 lines

 * Added compact_time().

------------------------------------------------------------------------
r11460 | cbiere | 2006-08-07 16:55:45 -0400 (Mon, 07 Aug 2006) | 4 lines

 * Changed OPTIMIZE_FOR_ALPHA to !OPTIMIZE_FOR_32BIT. The variant for Alpha
   is roughly 20% faster on x86_64 and should be on other 64-bit platforms as
   well.

------------------------------------------------------------------------
r11459 | cbiere | 2006-08-07 12:13:32 -0400 (Mon, 07 Aug 2006) | 2 lines

 * Added missing #include for iovec.h.

------------------------------------------------------------------------
r11458 | cbiere | 2006-08-07 12:01:27 -0400 (Mon, 07 Aug 2006) | 2 lines

 * Fixed bug in "OPTIMIZE_FOR_ALPHA" code path.

------------------------------------------------------------------------
r11457 | cbiere | 2006-08-07 06:26:18 -0400 (Mon, 07 Aug 2006) | 2 lines

 * Get blacklisted quickly.

------------------------------------------------------------------------
r11456 | cbiere | 2006-08-07 03:50:50 -0400 (Mon, 07 Aug 2006) | 4 lines

 * Implemented file descriptor sharing with "file_object" for downloads
   so that the target file is accessed through a single fd no matter from
   how many sources the file is actively downloaded.

------------------------------------------------------------------------
r11455 | cbiere | 2006-08-06 07:10:16 -0400 (Sun, 06 Aug 2006) | 2 lines

 * Another 266 items.

------------------------------------------------------------------------
r11454 | cbiere | 2006-08-06 07:01:28 -0400 (Sun, 06 Aug 2006) | 2 lines

 * Snatched another spammer.

------------------------------------------------------------------------
r11453 | cbiere | 2006-08-06 02:07:35 -0400 (Sun, 06 Aug 2006) | 2 lines

 * Fixed pedantic compiler warnings.

------------------------------------------------------------------------
r11452 | cbiere | 2006-08-06 02:02:47 -0400 (Sun, 06 Aug 2006) | 3 lines

 * file_info_get_trailer():
   * Fixed compiler warning about signed vs. unsigned comparison.

------------------------------------------------------------------------
r11451 | cbiere | 2006-08-06 01:56:25 -0400 (Sun, 06 Aug 2006) | 2 lines

 * shell_exec_nodes(): Modified header line for NODES command.

------------------------------------------------------------------------
r11450 | cbiere | 2006-08-06 01:50:52 -0400 (Sun, 06 Aug 2006) | 2 lines

 * Added kuid_get_atom(), kuid_atom_free() to suppress pedantic GCC4 warnings.

------------------------------------------------------------------------
r11449 | cbiere | 2006-08-06 01:18:59 -0400 (Sun, 06 Aug 2006) | 4 lines

 * bio_sendfile():
   * Fixed compiler warning about signed vs. unsigned comparison.
   * Added check for start >= 0.

------------------------------------------------------------------------
r11448 | cbiere | 2006-08-06 00:58:04 -0400 (Sun, 06 Aug 2006) | 4 lines

 * Added node_kill_hostiles().
 * hostiles_changed(): Kill all connected hostile nodes after reloading
   hostiles.txt unless the connection was manually "enforced".

------------------------------------------------------------------------
r11447 | cbiere | 2006-08-06 00:34:34 -0400 (Sun, 06 Aug 2006) | 3 lines

 * Added shell command "NODES" which shows a list of all connected Gnutella
   nodes with some basic information.

------------------------------------------------------------------------
r11446 | cbiere | 2006-08-06 00:29:49 -0400 (Sun, 06 Aug 2006) | 3 lines

 * Moved nodes_gui_common_flags_str() to the core code and renamed it
   to node_flags_to_string() respectively guc_node_flags_to_string().

------------------------------------------------------------------------
r11445 | cbiere | 2006-08-05 19:39:52 -0400 (Sat, 05 Aug 2006) | 2 lines

 * Updated GWebCache list.

------------------------------------------------------------------------
r11444 | rmanfredi | 2006-08-05 05:01:46 -0400 (Sat, 05 Aug 2006) | 2 lines

Added doc/gnutella/msg/node_info.

------------------------------------------------------------------------
r11443 | cbiere | 2006-08-05 01:27:25 -0400 (Sat, 05 Aug 2006) | 2 lines

 * Temporarily fixed warnings regarding unused parameters.

------------------------------------------------------------------------
r11442 | cbiere | 2006-08-05 01:20:56 -0400 (Sat, 05 Aug 2006) | 2 lines

 * Fixed compilation with GNUTLS.

------------------------------------------------------------------------
r11441 | cbiere | 2006-08-05 01:14:36 -0400 (Sat, 05 Aug 2006) | 3 lines

 * Applied patch by Bill Pringlemeir (with some modifications) to fix
   compilation without GNUTLS.

------------------------------------------------------------------------
r11440 | cbiere | 2006-08-04 22:52:26 -0400 (Fri, 04 Aug 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11439 | cbiere | 2006-08-04 22:41:28 -0400 (Fri, 04 Aug 2006) | 2 lines

 * All Your Spam Are Belong To Us.

------------------------------------------------------------------------
r11438 | cbiere | 2006-08-04 21:37:22 -0400 (Fri, 04 Aug 2006) | 3 lines

 * Don't weed a mesh for files considered spam. These mesh entries are never
   returned but it wastes resources to list them anyway.

------------------------------------------------------------------------
r11437 | cbiere | 2006-08-04 20:24:20 -0400 (Fri, 04 Aug 2006) | 5 lines

 * Fixed syntax error: "warning: syntax error:  empty declaration". There
   must be no semi-colon after RCSID(). This macro evaluated to variable
   declaration in the past but now generates a static inline function. 
   A free-standing semi-colon isn't valid C.

------------------------------------------------------------------------
r11436 | cbiere | 2006-08-04 19:44:59 -0400 (Fri, 04 Aug 2006) | 4 lines

 * guc_search_set_create_time(): Fixed error:
   "void function cannot return value". Why the heck doesn't GCC emit a
   warning for this?

------------------------------------------------------------------------
r11435 | cbiere | 2006-08-04 17:09:44 -0400 (Fri, 04 Aug 2006) | 2 lines

 * Removed "Browse Host Support" from list; this is fairly complete.

------------------------------------------------------------------------
r11434 | cbiere | 2006-08-04 17:08:23 -0400 (Fri, 04 Aug 2006) | 2 lines

 * Removed Magnet-URI from list; this is fairly complete.

------------------------------------------------------------------------
r11433 | cbiere | 2006-08-04 16:10:50 -0400 (Fri, 04 Aug 2006) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r11432 | rmanfredi | 2006-08-04 16:07:47 -0400 (Fri, 04 Aug 2006) | 4 lines

Now that we no longer reset the generation to 0 upon subsequent RESETs, we
need to flag explicitly when we get one, so that we know whether we need
to install a new table or a merely patched one.

------------------------------------------------------------------------
r11431 | cbiere | 2006-08-04 15:42:32 -0400 (Fri, 04 Aug 2006) | 2 lines

 * tls_init(), tls_global_init(): Fixed broken ANON-DH support.

------------------------------------------------------------------------
r11430 | rmanfredi | 2006-08-04 15:08:42 -0400 (Fri, 04 Aug 2006) | 2 lines

Disable fast-assertions when compiling with -g.

------------------------------------------------------------------------
r11429 | rmanfredi | 2006-08-04 15:07:30 -0400 (Fri, 04 Aug 2006) | 2 lines

Added "Node Info Request" and "Node Info Reply".

------------------------------------------------------------------------
r11428 | cbiere | 2006-08-04 10:24:55 -0400 (Fri, 04 Aug 2006) | 3 lines

 * Moved tls_global_init() to main() due to use of settings_config_dir()
   which isn't available before settings_init().

------------------------------------------------------------------------
r11427 | cbiere | 2006-08-04 10:22:14 -0400 (Fri, 04 Aug 2006) | 7 lines

 * Moved code referencing GNU TLS from sockets.[ch] to tls_common.[ch].
 * Fixed memory leak in TLS path.
 * Added preliminary support for x509 and OpenPGP certificates. With a x509
   cert common HTTPS clients like browsers can connect without problems
   whereas anonymous DH is hardly supported by anything. The key and cert
   are expected as key.pem and cert.pem in $GTK_GNUTELLA_DIR.

------------------------------------------------------------------------
r11426 | cbiere | 2006-08-04 10:13:47 -0400 (Fri, 04 Aug 2006) | 3 lines

 * It's not 2099 yet, don't use ISO C99.
 * dht_route_init(): Fixed use of kuid_to_string() in debug message.

------------------------------------------------------------------------
r11425 | cbiere | 2006-08-04 10:11:07 -0400 (Fri, 04 Aug 2006) | 2 lines

 * huge_collect_locations(): Added parameter checks.

------------------------------------------------------------------------
r11424 | cbiere | 2006-08-04 10:09:46 -0400 (Fri, 04 Aug 2006) | 3 lines

 * Fixed typo in comment.
 * Removed unnecessary cast.

------------------------------------------------------------------------
r11423 | cbiere | 2006-08-04 10:08:42 -0400 (Fri, 04 Aug 2006) | 8 lines

 * ensure_unicity(): Fixed typos in comments.
 * local_addr_changed(): Always pick IPv6 addresses from the list of 
   network interfaces. There is no IPv6-NAT, so assisted guessing shouldn't
   be necessary. Since there are hardly any IPv6 peers, the IPv6
   address tends to get stale if it's not static. If the IPv6 address
   really cannot be gathered with getifaddrs(), one should enforce the
   correct address using "force_local_ip6" and "forced_local_ip6".

------------------------------------------------------------------------
r11422 | cbiere | 2006-08-04 10:00:17 -0400 (Fri, 04 Aug 2006) | 2 lines

 * magnet_source_to_string(): Added assertion.

------------------------------------------------------------------------
r11421 | cbiere | 2006-08-04 09:51:55 -0400 (Fri, 04 Aug 2006) | 4 lines

 * Added line terminators to browse host header and trailer. It's just a few
   bytes and make the source easier to read. Also some HTML viewer could
   have problems if the doctype declaration isn't in its own line.

------------------------------------------------------------------------
r11420 | rmanfredi | 2006-08-04 09:22:53 -0400 (Fri, 04 Aug 2006) | 2 lines

Removed unused #define.

------------------------------------------------------------------------
r11419 | rmanfredi | 2006-08-04 08:47:15 -0400 (Fri, 04 Aug 2006) | 2 lines

Make bit length of the various fields explicit.

------------------------------------------------------------------------
r11418 | rmanfredi | 2006-08-04 08:10:44 -0400 (Fri, 04 Aug 2006) | 2 lines

Proposed node information gathering scheme.

------------------------------------------------------------------------
r11417 | rmanfredi | 2006-08-04 06:49:24 -0400 (Fri, 04 Aug 2006) | 4 lines

Must not reset generation number when we get a RESET, otherwise we might
think the remote node is not having leaves when it just sent a RESET because
the patch was bigger than the full table, or because the table size changed.

------------------------------------------------------------------------
r11416 | cbiere | 2006-08-03 19:56:54 -0400 (Thu, 03 Aug 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11415 | rmanfredi | 2006-08-03 17:45:53 -0400 (Thu, 03 Aug 2006) | 2 lines

Added debugging assertive code checking queue sanity when MQ_DEBUG is enabled.

------------------------------------------------------------------------
r11414 | rmanfredi | 2006-08-03 17:44:56 -0400 (Thu, 03 Aug 2006) | 2 lines

Count each "unrequested OOB hit" received.

------------------------------------------------------------------------
r11413 | rmanfredi | 2006-08-03 17:32:34 -0400 (Thu, 03 Aug 2006) | 2 lines

Added global counter for "unrequested OOB hits".

------------------------------------------------------------------------
r11412 | rmanfredi | 2006-08-03 16:54:28 -0400 (Thu, 03 Aug 2006) | 2 lines

Bumped date.

------------------------------------------------------------------------
r11411 | rmanfredi | 2006-08-03 14:01:46 -0400 (Thu, 03 Aug 2006) | 5 lines

Try to remove "useless" nodes when enforcing node limits: maybe it will free
up a slot to accept the incoming connection.
Now also tries to spot "ulesses" ultra nodes and remove them, in an attempt
to move the local node to a denser Gnutella area, for the leaves' benefit.

------------------------------------------------------------------------
r11410 | cbiere | 2006-08-03 13:51:12 -0400 (Thu, 03 Aug 2006) | 2 lines

 * Halved the minimum for "max_leaves" for hosts with really low resources.

------------------------------------------------------------------------
r11409 | cbiere | 2006-08-03 11:10:12 -0400 (Thu, 03 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11408 | rmanfredi | 2006-08-03 09:32:57 -0400 (Thu, 03 Aug 2006) | 2 lines

Spam entries of the day.

------------------------------------------------------------------------
r11407 | rmanfredi | 2006-08-03 08:57:10 -0400 (Thu, 03 Aug 2006) | 4 lines

Rogue nodes (ultra nodes without leaf nodes) must not remain ultra nodes in
a high TTL network because they steal a good ultra node slot in each of their
connections.

------------------------------------------------------------------------
r11406 | cbiere | 2006-08-02 09:59:13 -0400 (Wed, 02 Aug 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11405 | rmanfredi | 2006-08-02 06:45:18 -0400 (Wed, 02 Aug 2006) | 2 lines

Added perl version of sha1_cache.sh.

------------------------------------------------------------------------
r11404 | cbiere | 2006-08-02 00:24:23 -0400 (Wed, 02 Aug 2006) | 2 lines

 * Removed duplicate item.

------------------------------------------------------------------------
r11403 | cbiere | 2006-08-01 18:28:27 -0400 (Tue, 01 Aug 2006) | 2 lines

 * Moved sha1_cache.sh script to "scripts" directory.

------------------------------------------------------------------------
r11402 | cbiere | 2006-08-01 18:27:44 -0400 (Tue, 01 Aug 2006) | 2 lines

 * Moved sha1_cache.sh script to "scripts" directory.

------------------------------------------------------------------------
r11401 | cbiere | 2006-08-01 18:26:10 -0400 (Tue, 01 Aug 2006) | 2 lines

 * Added shell script for off-line generation of Gtk-Gnutella's sha1_cache.

------------------------------------------------------------------------
r11400 | cbiere | 2006-08-01 16:44:59 -0400 (Tue, 01 Aug 2006) | 2 lines

 * You have been gnoozled.

------------------------------------------------------------------------
r11399 | rmanfredi | 2006-08-01 10:08:22 -0400 (Tue, 01 Aug 2006) | 2 lines

Spam of the day.

------------------------------------------------------------------------
r11398 | cbiere | 2006-08-01 09:54:29 -0400 (Tue, 01 Aug 2006) | 3 lines

 * Updated country list; the former seemed to be very outdated in some cases.
 * Removed some unnecessary addendums like ", Republic of".

------------------------------------------------------------------------
r11397 | cbiere | 2006-07-31 18:29:17 -0400 (Mon, 31 Jul 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11396 | rmanfredi | 2006-07-31 13:08:39 -0400 (Mon, 31 Jul 2006) | 2 lines

More spam, as always.

------------------------------------------------------------------------
r11395 | rmanfredi | 2006-07-31 10:42:12 -0400 (Mon, 31 Jul 2006) | 2 lines

One more spammer.

------------------------------------------------------------------------
r11394 | cbiere | 2006-07-30 18:14:10 -0400 (Sun, 30 Jul 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r11393 | graaff | 2006-07-30 15:08:36 -0400 (Sun, 30 Jul 2006) | 1 line

Bump SQLite version dependency as >= 3.3.0 is now required.
------------------------------------------------------------------------
r11392 | cbiere | 2006-07-30 14:53:31 -0400 (Sun, 30 Jul 2006) | 3 lines

 * Bumped SQLite version dependency because "Version 3.3.0 adds
   support for CHECK constraints".

------------------------------------------------------------------------
r11391 | cbiere | 2006-07-29 21:55:39 -0400 (Sat, 29 Jul 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11390 | cbiere | 2006-07-29 20:18:10 -0400 (Sat, 29 Jul 2006) | 4 lines

 * is_local_addr(): Forgot to set "tried" in the IPv6 case so that resolution
   would be frequently retried causing many warnings with broken IPv6
   configurations.

------------------------------------------------------------------------
r11389 | cbiere | 2006-07-29 09:54:22 -0400 (Sat, 29 Jul 2006) | 2 lines

 * Next spammer.

------------------------------------------------------------------------
r11388 | cbiere | 2006-07-29 09:32:36 -0400 (Sat, 29 Jul 2006) | 2 lines

 * More WMV pr0n spammers.

------------------------------------------------------------------------
r11387 | cbiere | 2006-07-28 23:25:07 -0400 (Fri, 28 Jul 2006) | 2 lines

 * Added some dubious host.

------------------------------------------------------------------------
r11386 | cbiere | 2006-07-28 21:38:01 -0400 (Fri, 28 Jul 2006) | 2 lines

 * Another spammer.

------------------------------------------------------------------------
r11385 | cbiere | 2006-07-28 21:23:45 -0400 (Fri, 28 Jul 2006) | 5 lines

 * whitelist_retrieve(): Fixed bug which could cause an assertion failure
   when using hostnames instead of IP addresses. Also fixed parsing of
   the CIDR mask and the port number when using hostnames. These were
   not parsed due insertion of a NUL byte for hostname resolution.

------------------------------------------------------------------------
r11384 | rmanfredi | 2006-07-28 19:53:23 -0400 (Fri, 28 Jul 2006) | 4 lines

Fixed select_push_download() which was not exiting properly from the outer
loop after an alternate download had been selected, causing an assertion
failure later on in download_push_ack().

------------------------------------------------------------------------
r11383 | rmanfredi | 2006-07-28 04:40:26 -0400 (Fri, 28 Jul 2006) | 2 lines

Important QRP update bug between ultranodes hopefully fixed.

------------------------------------------------------------------------
r11382 | rmanfredi | 2006-07-28 04:39:38 -0400 (Fri, 28 Jul 2006) | 6 lines

Hopefully fix the root cause of the occasional QRP patch failures between
ultranodes, with "Incomplete 4-bit QRP patch covered 16384/65536 slots":
closed a possible race condition between the patch compression and the current
routing table update that could have changed the table size (most likely
increasing it).

------------------------------------------------------------------------
r11381 | rmanfredi | 2006-07-28 02:36:25 -0400 (Fri, 28 Jul 2006) | 4 lines

Must not use g_return_val_if_fail() in download_start_prepare_running().
Added extra assertions to help track down an assertion failure in
download_push_ack() whereby the selected download has a non-NULL socket!

------------------------------------------------------------------------
r11380 | rmanfredi | 2006-07-28 02:34:09 -0400 (Fri, 28 Jul 2006) | 4 lines

When a partial UDP write was happening, entry was removed correctly from the
message queue but was not removed from the `qlink' array, causing dangling
references.

------------------------------------------------------------------------
r11379 | cbiere | 2006-07-27 19:48:54 -0400 (Thu, 27 Jul 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11378 | rmanfredi | 2006-07-27 18:33:55 -0400 (Thu, 27 Jul 2006) | 2 lines

DHT work in progress.  Compiles but does not do anything useful.

------------------------------------------------------------------------
r11377 | cbiere | 2006-07-27 18:22:35 -0400 (Thu, 27 Jul 2006) | 3 lines

 * gwc_update_this(): Don't send URL updates any longer.
 * Converted printf() to g_message().

------------------------------------------------------------------------
r11376 | rmanfredi | 2006-07-27 18:22:33 -0400 (Thu, 27 Jul 2006) | 2 lines

Slow down background tasks when CPU is overloaded.

------------------------------------------------------------------------
r11375 | rmanfredi | 2006-07-27 16:08:13 -0400 (Thu, 27 Jul 2006) | 2 lines

Make sure the daily uptime we send in pongs accounts for the current uptime.

------------------------------------------------------------------------
r11374 | rmanfredi | 2006-07-26 18:09:04 -0400 (Wed, 26 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11373 | rmanfredi | 2006-07-24 17:39:05 -0400 (Mon, 24 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11372 | rmanfredi | 2006-07-24 17:37:48 -0400 (Mon, 24 Jul 2006) | 2 lines

Bumped date since an assertion failure was fixed.

------------------------------------------------------------------------
r11371 | rmanfredi | 2006-07-24 17:34:12 -0400 (Mon, 24 Jul 2006) | 4 lines

Adapted code in check_content_urn().  Since we can set the DL_F_URIRES when
there is a SHA1 in either the download or the fileinfo, we must not rely
on d->sha1 being set when we collect locations: use the SHA1 that is not-NULL.

------------------------------------------------------------------------
r11370 | rmanfredi | 2006-07-24 17:19:31 -0400 (Mon, 24 Jul 2006) | 4 lines

Fixed wrong assertion: d->sha1 can be NULL when the remote server did not
supply anything, but d->file_info->sha1 cannot be NULL when we request
something via N2R.

------------------------------------------------------------------------
r11369 | cbiere | 2006-07-23 11:59:34 -0400 (Sun, 23 Jul 2006) | 3 lines

 * gui_update_download(): Fixed a potential buffer overrun bug caused by
   a missing updated of `rw'. Set `rw' always even where unnecessary.

------------------------------------------------------------------------
r11368 | cbiere | 2006-07-23 11:37:02 -0400 (Sun, 23 Jul 2006) | 3 lines

 * download_send_request(): Removed unnecessary "n2r" variable. It's the
   same as "sha1 != NULL".

------------------------------------------------------------------------
r11367 | cbiere | 2006-07-23 11:12:38 -0400 (Sun, 23 Jul 2006) | 4 lines

 * search_gui_menu_select_helper(): Fixed bug: The column contains an integer
   casted to a pointer (G_TYPE_POINTER); not an integer (G_TYPE_INT). Thus
   this causes a crash on machines where sizeof(int) != sizeof(void *).

------------------------------------------------------------------------
r11366 | cbiere | 2006-07-23 10:28:57 -0400 (Sun, 23 Jul 2006) | 3 lines

 * check_content_urn():
  *  Don't trust d->record_index, check whether we really the SHA-1.

------------------------------------------------------------------------
r11365 | cbiere | 2006-07-23 09:46:12 -0400 (Sun, 23 Jul 2006) | 2 lines

 * dmesh_ban_add(): Use time_delta_t, not gint.

------------------------------------------------------------------------
r11364 | cbiere | 2006-07-23 09:41:09 -0400 (Sun, 23 Jul 2006) | 3 lines

 * dm_expire(), dmesh_raw_add(): There does not seem to be a guarantee
   that `sha1' is non-null. Thus handle this case gracefully.

------------------------------------------------------------------------
r11363 | cbiere | 2006-07-23 09:07:08 -0400 (Sun, 23 Jul 2006) | 4 lines

 * Added assertions.
 * dmesh_fill_info(): Check whether `sha1' is NULL. Just because the index
   is special, there is no guarantee the `sha1' is non-null.

------------------------------------------------------------------------
r11362 | cbiere | 2006-07-23 08:54:31 -0400 (Sun, 23 Jul 2006) | 2 lines

 * Added assertions.

------------------------------------------------------------------------
r11361 | cbiere | 2006-07-23 08:50:02 -0400 (Sun, 23 Jul 2006) | 2 lines

 * Style fixes.

------------------------------------------------------------------------
r11360 | cbiere | 2006-07-23 06:06:14 -0400 (Sun, 23 Jul 2006) | 2 lines

 * Removed outdated range 64.106.0.0/16.

------------------------------------------------------------------------
r11358 | rmanfredi | 2006-07-22 04:33:49 -0400 (Sat, 22 Jul 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11357 | rmanfredi | 2006-07-21 17:21:17 -0400 (Fri, 21 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11356 | rmanfredi | 2006-07-21 16:21:22 -0400 (Fri, 21 Jul 2006) | 4 lines

Added bug catcher (when running under the debugger) for NULL data items.
Trying to recover from this bad situation seems viable, so let's not panic
any more -- log when the problem occurs to see whether we can find a pattern.

------------------------------------------------------------------------
r11355 | cbiere | 2006-07-20 15:05:21 -0400 (Thu, 20 Jul 2006) | 5 lines

 * Style fixes.
 * d_end():
   * Use time_delta_t instead of time_t.
   * Don't use ssize_t for shift because ssize_t could be a 16-bit integer.

------------------------------------------------------------------------
r11354 | cbiere | 2006-07-20 06:44:18 -0400 (Thu, 20 Jul 2006) | 2 lines

 * Extended ranges used by intentmediaworks.

------------------------------------------------------------------------
r11353 | cbiere | 2006-07-20 03:16:55 -0400 (Thu, 20 Jul 2006) | 2 lines

 * More ranges of adultpeak.

------------------------------------------------------------------------
r11352 | cbiere | 2006-07-19 22:00:20 -0400 (Wed, 19 Jul 2006) | 2 lines

 * Mission completed.

------------------------------------------------------------------------
r11351 | cbiere | 2006-07-19 20:37:22 -0400 (Wed, 19 Jul 2006) | 2 lines

 * Another 1732 spam items.

------------------------------------------------------------------------
r11350 | cbiere | 2006-07-19 15:49:12 -0400 (Wed, 19 Jul 2006) | 2 lines

 * 666 more spam items.

------------------------------------------------------------------------
r11349 | cbiere | 2006-07-19 13:09:12 -0400 (Wed, 19 Jul 2006) | 2 lines

 * Banned all known ranges assigned to Calvin Yeung at Peer1.

------------------------------------------------------------------------
r11348 | cbiere | 2006-07-19 12:09:06 -0400 (Wed, 19 Jul 2006) | 2 lines

 * 2048 more spam items.

------------------------------------------------------------------------
r11347 | cbiere | 2006-07-19 08:35:35 -0400 (Wed, 19 Jul 2006) | 2 lines

 * Another 3900 spam items.

------------------------------------------------------------------------
r11346 | cbiere | 2006-07-18 21:21:18 -0400 (Tue, 18 Jul 2006) | 3 lines

 * list_contains(), slist_contains(): Use GEqualFunc instead of GCompareFunc
   because the list is not assumed to be ordered.

------------------------------------------------------------------------
r11345 | cbiere | 2006-07-18 21:17:48 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Replaced some magic buffer sizes using HOST_ADDR_BUFLEN et al.

------------------------------------------------------------------------
r11344 | cbiere | 2006-07-18 21:11:29 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Another 4341 spam items.

------------------------------------------------------------------------
r11343 | cbiere | 2006-07-18 19:04:48 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r11342 | cbiere | 2006-07-18 18:44:19 -0400 (Tue, 18 Jul 2006) | 4 lines

 * Removed unused functions ip_to_string2() and ip_port_to_string().
 * Renamed ip_to_string_buf() to ipv4_to_string_buf().
 * ipv4_to_string_buf(): Use specialized function instead of inet_ntoa().

------------------------------------------------------------------------
r11341 | cbiere | 2006-07-18 02:19:54 -0400 (Tue, 18 Jul 2006) | 3 lines

 * Added a hashtable to "struct dl_server" counting the downloads per SHA-1
   to optimize has_same_download().

------------------------------------------------------------------------
r11340 | cbiere | 2006-07-18 02:05:18 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Renamed some functions for consistency.

------------------------------------------------------------------------
r11339 | cbiere | 2006-07-18 02:03:39 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Pass NULL to g_hash_table_new() instead of g_direct_hash or g_direct_equal.

------------------------------------------------------------------------
r11338 | cbiere | 2006-07-18 01:28:15 -0400 (Tue, 18 Jul 2006) | 3 lines

 * accumulated_rs: Use slist_t instead of GSList so that the results are
   processed in the order they arrive.

------------------------------------------------------------------------
r11337 | cbiere | 2006-07-18 01:24:58 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Added src/lib/slist.[ch].

------------------------------------------------------------------------
r11336 | cbiere | 2006-07-18 01:20:30 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Added single-linked list variant of list.[ch].

------------------------------------------------------------------------
r11335 | cbiere | 2006-07-18 01:17:24 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Style fixes.

------------------------------------------------------------------------
r11334 | cbiere | 2006-07-18 01:16:11 -0400 (Tue, 18 Jul 2006) | 2 lines

 * Moved generic checks to list_check() for less code duplication.

------------------------------------------------------------------------
r11333 | cbiere | 2006-07-17 22:40:48 -0400 (Mon, 17 Jul 2006) | 2 lines

 * Another 3500 spam items.

------------------------------------------------------------------------
r11332 | cbiere | 2006-07-17 19:38:23 -0400 (Mon, 17 Jul 2006) | 2 lines

 * Another 3518 spam items.

------------------------------------------------------------------------
r11331 | cbiere | 2006-07-17 11:45:59 -0400 (Mon, 17 Jul 2006) | 3 lines

 * send_personal_info(): Choose the closest power of two, not simply the
   next for a more accurate horizon estimation.

------------------------------------------------------------------------
r11330 | cbiere | 2006-07-17 10:33:51 -0400 (Mon, 17 Jul 2006) | 2 lines

 * 2000 more spam items.

------------------------------------------------------------------------
r11329 | cbiere | 2006-07-17 08:57:26 -0400 (Mon, 17 Jul 2006) | 2 lines

 * 3507 new spam items.

------------------------------------------------------------------------
r11328 | cbiere | 2006-07-17 08:38:24 -0400 (Mon, 17 Jul 2006) | 3 lines

 * select_push_download(): Do not call download_start_prepare() whilst
   traversing a server list. Use a temporary list instead.

------------------------------------------------------------------------
r11327 | cbiere | 2006-07-16 19:54:34 -0400 (Sun, 16 Jul 2006) | 3 lines

 * search_gui_option_menu_searches_update(): Corrected off-by-one in index
   calculation for resetting the option menu in the search pane.

------------------------------------------------------------------------
r11326 | cbiere | 2006-07-16 19:46:40 -0400 (Sun, 16 Jul 2006) | 2 lines

 * Added consistency checks.

------------------------------------------------------------------------
r11325 | cbiere | 2006-07-16 19:20:19 -0400 (Sun, 16 Jul 2006) | 2 lines

 * 1400 more spam items.

------------------------------------------------------------------------
r11324 | cbiere | 2006-07-16 19:15:21 -0400 (Sun, 16 Jul 2006) | 2 lines

 * Fixed memory leak caused by previous changes.

------------------------------------------------------------------------
r11323 | cbiere | 2006-07-16 17:24:44 -0400 (Sun, 16 Jul 2006) | 3 lines

 * Renamed list_*_track() and slist_*_track() so that "track_" is used as
   prefix rather than suffix.

------------------------------------------------------------------------
r11322 | cbiere | 2006-07-16 17:10:07 -0400 (Sun, 16 Jul 2006) | 3 lines

 * Renamed list_*_track() and slist_*_track() so that "track_" is used as
   prefix rather than suffix.

------------------------------------------------------------------------
r11321 | cbiere | 2006-07-16 16:51:34 -0400 (Sun, 16 Jul 2006) | 2 lines

 * download_pickup_queued(): Fixed bogus warning. GCC4 seems smart enough.

------------------------------------------------------------------------
r11320 | cbiere | 2006-07-16 16:46:52 -0400 (Sun, 16 Jul 2006) | 3 lines

 * Disabled regression checks.
 * list_has_previous(), list_has_next(): Tolerate NULL as parameter.

------------------------------------------------------------------------
r11319 | cbiere | 2006-07-16 16:22:47 -0400 (Sun, 16 Jul 2006) | 3 lines

 * struct dl_server:
   * Replaced GList with list_t and removed unnecessary "count".

------------------------------------------------------------------------
r11318 | cbiere | 2006-07-16 15:30:08 -0400 (Sun, 16 Jul 2006) | 2 lines

 * Added a wrapper around GList for increased efficiency.

------------------------------------------------------------------------
r11317 | cbiere | 2006-07-16 15:16:46 -0400 (Sun, 16 Jul 2006) | 3 lines

 * Added IGNORE_RESULT to get rid of warnings caused by misuse of
   GCC's __attribute__((warn_unused_result)).

------------------------------------------------------------------------
r11316 | cbiere | 2006-07-16 04:20:48 -0400 (Sun, 16 Jul 2006) | 3 lines

 * Changed prototypes of gui_prop_set_storage() and gui_prop_get_storage()
   to reduce char vs. unsigned char mismatches.

------------------------------------------------------------------------
r11315 | cbiere | 2006-07-16 04:17:19 -0400 (Sun, 16 Jul 2006) | 9 lines

 * hash_list_free(): Fixed memory leak.
 * hash_list_prepend(): Fixed wrong assertion which used the item instead
   the item key.
 * Added hash_list_insert_sorted().
 * hash_list_release(), hash_list_iterator(), hash_list_iterator_last():
   * Tolerate a NULL parameter for simpler handling of empty (i.e., not
     yet created or already cleared) hash lists.
 * Removed bogus hash_list_clear().

------------------------------------------------------------------------
r11314 | cbiere | 2006-07-15 21:43:02 -0400 (Sat, 15 Jul 2006) | 9 lines

 * search_gui_flush():
   * Interrupt dispatching of search results if more than
     200ms have elapsed to prevent stalling.
   * Insert each search context at most once into the "frozen" list.
 * search_gui_start_massive_update(), search_gui_end_massive_update():
   * "massive_update" is unnecessary and slightly incorrect;
     g_object_freeze_notify() and g_object_thaw_notify() use a counter
     to keep track of nesting.

------------------------------------------------------------------------
r11313 | cbiere | 2006-07-15 21:15:09 -0400 (Sat, 15 Jul 2006) | 2 lines

 * Added kuid_to_string() also to fix some pedantic GCC4 warnings.

------------------------------------------------------------------------
r11312 | cbiere | 2006-07-15 21:09:18 -0400 (Sat, 15 Jul 2006) | 2 lines

 * Added sha1_to_base32_buf().

------------------------------------------------------------------------
r11311 | cbiere | 2006-07-15 18:36:29 -0400 (Sat, 15 Jul 2006) | 3 lines

 * Doubled "oob_reply_ack_timeout" to prevent false-positives caused by
   heavily delayed results.

------------------------------------------------------------------------
r11310 | cbiere | 2006-07-15 15:39:16 -0400 (Sat, 15 Jul 2006) | 2 lines

 * 2700 more spam items.

------------------------------------------------------------------------
r11309 | cbiere | 2006-07-15 14:59:23 -0400 (Sat, 15 Jul 2006) | 5 lines

 * main_gui_timer():
   * Simplified for less duplicate code.
   * search_gui_flush() can take a lot of cpu-time, thus throttle it too
     when overloaded.

------------------------------------------------------------------------
r11308 | cbiere | 2006-07-15 14:23:20 -0400 (Sat, 15 Jul 2006) | 3 lines

 * tm_now_exact(): Fixed bug in previous "bugfix" which completely killed
   sub-second precision.

------------------------------------------------------------------------
r11307 | cbiere | 2006-07-15 11:05:44 -0400 (Sat, 15 Jul 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r11306 | rmanfredi | 2006-07-15 10:32:03 -0400 (Sat, 15 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11305 | cbiere | 2006-07-14 18:27:33 -0400 (Fri, 14 Jul 2006) | 2 lines

 * Another pr0n spammer.

------------------------------------------------------------------------
r11304 | cbiere | 2006-07-14 12:08:15 -0400 (Fri, 14 Jul 2006) | 4 lines

 * socket_read(): Fixed bug: Don't check the first byte again after
   socket_tls_setup() has been called. This caused an assertion failure
   when the handshake didn't succeed in one step.

------------------------------------------------------------------------
r11303 | rmanfredi | 2006-07-11 14:35:22 -0400 (Tue, 11 Jul 2006) | 2 lines

Added gm_getproctitle().

------------------------------------------------------------------------
r11302 | cbiere | 2006-07-11 11:02:26 -0400 (Tue, 11 Jul 2006) | 3 lines

 * iov_scatter_string(): Corrected the offset at which possible left-over
   space of the last used buffer is cleared.

------------------------------------------------------------------------
r11301 | cbiere | 2006-07-11 08:27:41 -0400 (Tue, 11 Jul 2006) | 4 lines

 * iov_clear(): Cosmetic change.
 * gm_setproctitle_init(): Forgot to subtract the amount of argv elements
   when calling iov_init_from_string_vector() for the "env_ptr".

------------------------------------------------------------------------
r11300 | cbiere | 2006-07-09 13:43:43 -0400 (Sun, 09 Jul 2006) | 2 lines

 * Corrected multichoice property "gnet_stats_drop_reasons_type".

------------------------------------------------------------------------
r11299 | rmanfredi | 2006-07-09 12:48:22 -0400 (Sun, 09 Jul 2006) | 2 lines

Added keyword expansion.

------------------------------------------------------------------------
r11298 | rmanfredi | 2006-07-09 09:41:50 -0400 (Sun, 09 Jul 2006) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r11297 | rmanfredi | 2006-07-09 09:40:28 -0400 (Sun, 09 Jul 2006) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r11296 | rmanfredi | 2006-07-09 09:21:04 -0400 (Sun, 09 Jul 2006) | 2 lines

Set keyword expansion properties.

------------------------------------------------------------------------
r11295 | rmanfredi | 2006-07-09 09:19:12 -0400 (Sun, 09 Jul 2006) | 3 lines

Added skeleton of the DHT routing table.
New "servent_kuid" and "dht_debug" properties.

------------------------------------------------------------------------
r11294 | rmanfredi | 2006-07-09 09:17:52 -0400 (Sun, 09 Jul 2006) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r11293 | cbiere | 2006-07-09 03:43:45 -0400 (Sun, 09 Jul 2006) | 2 lines

 * Common TLS functions.

------------------------------------------------------------------------
r11290 | cbiere | 2006-07-08 17:38:34 -0400 (Sat, 08 Jul 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r11289 | rmanfredi | 2006-07-08 17:35:03 -0400 (Sat, 08 Jul 2006) | 3 lines

Added hash_list_moveto_head() and hash_list_moveto_tail() to be able to
handle LRU hashlists.

------------------------------------------------------------------------
r11288 | cbiere | 2006-07-08 12:19:04 -0400 (Sat, 08 Jul 2006) | 2 lines

 * This is work in progress.

------------------------------------------------------------------------
r11287 | cbiere | 2006-07-08 12:01:11 -0400 (Sat, 08 Jul 2006) | 2 lines

 * Call srandom() before initstate() unconditionally.

------------------------------------------------------------------------
r11286 | rmanfredi | 2006-07-08 11:40:25 -0400 (Sat, 08 Jul 2006) | 2 lines

Added kuid_t to make things a little bit safer and readable.

------------------------------------------------------------------------
r11285 | rmanfredi | 2006-07-08 11:32:08 -0400 (Sat, 08 Jul 2006) | 3 lines

Changed svn:keywords to:
Author Date Id Revision

------------------------------------------------------------------------
r11284 | rmanfredi | 2006-07-08 11:29:35 -0400 (Sat, 08 Jul 2006) | 4 lines

New svn:keywords permissions set as:
v$yyq
p

------------------------------------------------------------------------
r11283 | rmanfredi | 2006-07-08 11:23:23 -0400 (Sat, 08 Jul 2006) | 5 lines

Added metaconfig check for initstate() because HAS_INITSTATE was never set.
Regenerated Configure .
First contribution to the DHT: Kademlia User ID (KUID).
Added DHT to the build system.

------------------------------------------------------------------------
r11282 | cbiere | 2006-07-08 00:46:50 -0400 (Sat, 08 Jul 2006) | 2 lines

 * More spammers.

------------------------------------------------------------------------
r11281 | cbiere | 2006-07-07 22:39:29 -0400 (Fri, 07 Jul 2006) | 2 lines

 * More hosts of "WEIRD" spammers.

------------------------------------------------------------------------
r11280 | rmanfredi | 2006-07-07 13:11:14 -0400 (Fri, 07 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11279 | cbiere | 2006-07-07 10:32:51 -0400 (Fri, 07 Jul 2006) | 2 lines

 * More spam; 12053 listed items.

------------------------------------------------------------------------
r11278 | cbiere | 2006-07-06 18:26:18 -0400 (Thu, 06 Jul 2006) | 2 lines

 * host_addr_6to4_to_ipv4(): Fixed; the net type was not corrected.

------------------------------------------------------------------------
r11277 | cbiere | 2006-07-06 13:34:39 -0400 (Thu, 06 Jul 2006) | 2 lines

 * Updated list of GWCs.

------------------------------------------------------------------------
r11276 | cbiere | 2006-07-06 12:53:23 -0400 (Thu, 06 Jul 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r11275 | cbiere | 2006-07-06 08:47:10 -0400 (Thu, 06 Jul 2006) | 2 lines

 * Another "WEIRD" spammer.

------------------------------------------------------------------------
r11274 | cbiere | 2006-07-05 22:17:58 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Additional (or new) address of Shareaza-based WMV spammer.

------------------------------------------------------------------------
r11273 | cbiere | 2006-07-05 22:11:46 -0400 (Wed, 05 Jul 2006) | 2 lines

 * More servers of intentmediaworks.

------------------------------------------------------------------------
r11272 | cbiere | 2006-07-05 22:00:19 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another spam host of intentmediaworks.

------------------------------------------------------------------------
r11271 | cbiere | 2006-07-05 21:45:19 -0400 (Wed, 05 Jul 2006) | 2 lines

 * lowth Amazon URL spam again.

------------------------------------------------------------------------
r11270 | cbiere | 2006-07-05 21:39:08 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r11269 | cbiere | 2006-07-05 21:07:37 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another "WEIRD" spammer.

------------------------------------------------------------------------
r11268 | cbiere | 2006-07-05 15:08:24 -0400 (Wed, 05 Jul 2006) | 2 lines

 * More WMV spammers.

------------------------------------------------------------------------
r11267 | cbiere | 2006-07-05 14:59:26 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Extended range.

------------------------------------------------------------------------
r11266 | cbiere | 2006-07-05 14:57:29 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r11265 | cbiere | 2006-07-05 03:52:40 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r11264 | cbiere | 2006-07-05 03:21:31 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Added WEIRD spammer.

------------------------------------------------------------------------
r11263 | cbiere | 2006-07-05 00:33:45 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Next volunteer.

------------------------------------------------------------------------
r11262 | cbiere | 2006-07-05 00:26:54 -0400 (Wed, 05 Jul 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r11261 | cbiere | 2006-07-04 23:04:13 -0400 (Tue, 04 Jul 2006) | 2 lines

 * Added Amazon link spammer.

------------------------------------------------------------------------
r11260 | cbiere | 2006-07-04 16:29:45 -0400 (Tue, 04 Jul 2006) | 3 lines

 * Use ignore_reason_to_string().
 * Don't use default statements when applying switch() to enums.

------------------------------------------------------------------------
r11259 | cbiere | 2006-07-04 15:00:32 -0400 (Tue, 04 Jul 2006) | 3 lines

 * Added ignore_reason_to_string().
 * Removed unnecessary explicit values for IGNORE_* enums.

------------------------------------------------------------------------
r11258 | rmanfredi | 2006-07-04 14:42:15 -0400 (Tue, 04 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11257 | rmanfredi | 2006-07-04 14:28:23 -0400 (Tue, 04 Jul 2006) | 2 lines

Fixed compiler warnings about signed versus unsigned comparisons.

------------------------------------------------------------------------
r11256 | rmanfredi | 2006-07-04 14:22:53 -0400 (Tue, 04 Jul 2006) | 2 lines

Removed default in switch().

------------------------------------------------------------------------
r11255 | rmanfredi | 2006-07-02 13:18:27 -0400 (Sun, 02 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11254 | rmanfredi | 2006-07-02 06:15:11 -0400 (Sun, 02 Jul 2006) | 2 lines

Commented public routine which had no comment.

------------------------------------------------------------------------
r11253 | cbiere | 2006-07-01 20:31:48 -0400 (Sat, 01 Jul 2006) | 4 lines

 * dm_expire():
   * Fixed compiler warning "comparison between signed and unsigned".
   * Removed unnecessary cast.

------------------------------------------------------------------------
r11252 | cbiere | 2006-07-01 20:18:23 -0400 (Sat, 01 Jul 2006) | 2 lines

 * Removed unnecessary blank line.

------------------------------------------------------------------------
r11251 | cbiere | 2006-07-01 20:17:05 -0400 (Sat, 01 Jul 2006) | 2 lines

 * socket_create_and_bind(): Removed unnecessary check.

------------------------------------------------------------------------
r11250 | cbiere | 2006-07-01 20:15:56 -0400 (Sat, 01 Jul 2006) | 2 lines

 * Added ST_UNREQUESTED.

------------------------------------------------------------------------
r11249 | cbiere | 2006-07-01 19:00:38 -0400 (Sat, 01 Jul 2006) | 2 lines

 * Restored comment from spam.txt.mine.

------------------------------------------------------------------------
r11248 | rmanfredi | 2006-07-01 17:20:27 -0400 (Sat, 01 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11247 | cbiere | 2006-07-01 17:17:18 -0400 (Sat, 01 Jul 2006) | 2 lines

 * Removed item without comment; comment was lost by SVN conflict resolution.

------------------------------------------------------------------------
r11246 | cbiere | 2006-07-01 16:50:58 -0400 (Sat, 01 Jul 2006) | 2 lines

 * oob_reply_acks_garbage_collect(): Fixed misplaced parentheses.

------------------------------------------------------------------------
r11245 | cbiere | 2006-07-01 16:49:36 -0400 (Sat, 01 Jul 2006) | 2 lines

 * ora_free(): Nullify the pointer after the memory has been freed.

------------------------------------------------------------------------
r11244 | cbiere | 2006-07-01 16:44:22 -0400 (Sat, 01 Jul 2006) | 3 lines

 * Added checks to catch unrequested query hits from a given IP address
   and port.

------------------------------------------------------------------------
r11243 | cbiere | 2006-07-01 16:41:38 -0400 (Sat, 01 Jul 2006) | 3 lines

 * Removed a few dupes.
 * Added some spam.

------------------------------------------------------------------------
r11242 | cbiere | 2006-07-01 16:00:26 -0400 (Sat, 01 Jul 2006) | 3 lines

 * Fixed compiler warnings regarding signedness mismatches in comparisons
   which were previously hidden by use of gint64 and exposed by time_delta_t.

------------------------------------------------------------------------
r11241 | cbiere | 2006-07-01 15:36:23 -0400 (Sat, 01 Jul 2006) | 5 lines

 * Added type time_delta_t b/c time_t would a bad choice and hardcoding
   any other integer type could cause precision differences/loss.
 * Added static assertion to ensure that time_t is at least signed which
   gives no guarantee about a flat encoding of course.

------------------------------------------------------------------------
r11240 | cbiere | 2006-07-01 15:20:28 -0400 (Sat, 01 Jul 2006) | 7 lines

 * delta_time():
   * Changed from macro to static inline function.
   * Ignore difftime() always but check for USE_DIFFTIME just in case there is
     really such a system.
   * Changed return type to long. time_t IFF signed would be more appropriate
     but confusing and encourage misuse of 'time_t'.

------------------------------------------------------------------------
r11239 | cbiere | 2006-07-01 13:38:20 -0400 (Sat, 01 Jul 2006) | 3 lines

 * handle_proxy_ack(): Check for hostile IP addresses too. At least with
   version >= 2, this is necessary for the embedded address.

------------------------------------------------------------------------
r11238 | rmanfredi | 2006-07-01 12:20:43 -0400 (Sat, 01 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11237 | rmanfredi | 2006-07-01 12:16:23 -0400 (Sat, 01 Jul 2006) | 2 lines

Make sure SPAM is marked ignored as well by ignore_is_requested().

------------------------------------------------------------------------
r11236 | rmanfredi | 2006-07-01 08:29:02 -0400 (Sat, 01 Jul 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11235 | rmanfredi | 2006-06-30 16:19:43 -0400 (Fri, 30 Jun 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11234 | rmanfredi | 2006-06-30 15:40:42 -0400 (Fri, 30 Jun 2006) | 2 lines

Added more DRM spam from http://www.vidlocklicense.com/

------------------------------------------------------------------------
r11233 | cbiere | 2006-06-30 15:39:41 -0400 (Fri, 30 Jun 2006) | 3 lines

 * Relaxed spam detection by alt-loc count a bit; BearShare seems to have
   a higher limit.

------------------------------------------------------------------------
r11232 | rmanfredi | 2006-06-30 15:26:11 -0400 (Fri, 30 Jun 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11231 | daichik | 2006-06-30 12:14:43 -0400 (Fri, 30 Jun 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11230 | cbiere | 2006-06-30 11:39:02 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Another mouse bites the cheese.

------------------------------------------------------------------------
r11229 | cbiere | 2006-06-30 11:28:25 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Busted another WMA-DRM spammer.

------------------------------------------------------------------------
r11228 | rmanfredi | 2006-06-30 08:46:48 -0400 (Fri, 30 Jun 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r11227 | cbiere | 2006-06-30 05:55:05 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Added plain text conversion of "Reliable RUDP version 1.03.pdf".

------------------------------------------------------------------------
r11226 | cbiere | 2006-06-30 05:49:25 -0400 (Fri, 30 Jun 2006) | 2 lines

 * node_parse(): Prepared handling of RUDP packets.

------------------------------------------------------------------------
r11225 | cbiere | 2006-06-30 05:25:25 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r11224 | cbiere | 2006-06-30 05:17:11 -0400 (Fri, 30 Jun 2006) | 4 lines

 * Prepared handling of RUDP packets.
 * Converted GTA_MSG_* from definitions to enums to take advantage of
   compile-time warnings in combination with `switch' if desired.

------------------------------------------------------------------------
r11223 | cbiere | 2006-06-30 04:53:29 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Complete RUDP debugging support.

------------------------------------------------------------------------
r11222 | cbiere | 2006-06-30 04:31:29 -0400 (Fri, 30 Jun 2006) | 2 lines

 * Added missing #include for tls_cache_init/close.

------------------------------------------------------------------------
r11221 | cbiere | 2006-06-29 18:50:23 -0400 (Thu, 29 Jun 2006) | 3 lines

 * spam_db_open(): Don't drop the table just clear it on reload. Otherwise,
   we get warnings that the database schema has changed.

------------------------------------------------------------------------
r11220 | cbiere | 2006-06-29 18:44:05 -0400 (Thu, 29 Jun 2006) | 3 lines

 * Merged boolean parameter "push" for download functions into the flags
   parameter using flags "CONNECT_F_PUSH".

------------------------------------------------------------------------
r11219 | cbiere | 2006-06-29 18:38:53 -0400 (Thu, 29 Jun 2006) | 3 lines

 * Moved call to tls_cache_init() to main().
 * Moved call to tls_cache_close() to gtk_gnutella_exit().

------------------------------------------------------------------------
r11218 | cbiere | 2006-06-29 16:14:55 -0400 (Thu, 29 Jun 2006) | 2 lines

 * Fixed prototype.

------------------------------------------------------------------------
r11217 | cbiere | 2006-06-29 16:13:00 -0400 (Thu, 29 Jun 2006) | 2 lines

 * Added RUDP support.

------------------------------------------------------------------------
r11216 | cbiere | 2006-06-29 16:12:18 -0400 (Thu, 29 Jun 2006) | 7 lines

 * node_process_handshake_header(): Removed unnecessary check for
   SOCKET_USES_TLS(); this is already checked in core/sockets.c.
 * node_close(): Call tls_cache_close().
 * node_connect_back(): Use TLS for connect-back connections. It does not
   matter what or how we send it and it might help to discover more TLS
   hosts.

------------------------------------------------------------------------
r11215 | cbiere | 2006-06-29 16:10:20 -0400 (Thu, 29 Jun 2006) | 2 lines

 * spam_db_open(): Fixed warning message.

------------------------------------------------------------------------
r11214 | cbiere | 2006-06-29 16:09:30 -0400 (Thu, 29 Jun 2006) | 3 lines

 * download_request(), upload_request(): Removed unnecessary check for
   SOCKET_USES_TLS(); this is already checked in core/sockets.c.

------------------------------------------------------------------------
r11213 | cbiere | 2006-06-29 16:07:41 -0400 (Thu, 29 Jun 2006) | 3 lines

 * socket_tls_setup(): Insert the host into the TLS cache as soon as the
   handshake succeeded for outgoing connections.

------------------------------------------------------------------------
r11212 | cbiere | 2006-06-29 16:05:48 -0400 (Thu, 29 Jun 2006) | 9 lines

 * Store the tls_hosts table in the grande databaise.
 * Use host_pack() instead of host_addr_port_to_string() for compactness.
 * Additional debug messages.
 * tls_cache_lookup(): Don't emit a critical warning when is_host_addr()
   fails for the given address. This happens when connecting by hostname
   instead of IP address. It's more comfortable and just as safe to
   treat this gracefully instead of requiring an additional pre-check.
 * Renamed tls_cache_add() to tls_cache_insert().

------------------------------------------------------------------------
r11211 | cbiere | 2006-06-29 14:55:47 -0400 (Thu, 29 Jun 2006) | 3 lines

 * Added gdb_stmt_bind_static_text(), gdb_stmt_bind_int64() and
   gdb_stmt_column_int64().

------------------------------------------------------------------------
r11210 | cbiere | 2006-06-28 19:02:54 -0400 (Wed, 28 Jun 2006) | 2 lines

 * search_gui_create_record(): Fixed typo: EVIL != SPAM.

------------------------------------------------------------------------
r11209 | cbiere | 2006-06-28 17:40:48 -0400 (Wed, 28 Jun 2006) | 4 lines

 * Added detection of evil filenames in search results so that they are
   are locally ignored and not forwarded.
 * search_gui_flush(): Added boolean parameter to force a flush.

------------------------------------------------------------------------
r11208 | cbiere | 2006-06-28 16:44:25 -0400 (Wed, 28 Jun 2006) | 2 lines

 * is_evil_filename(): Continue correctly from "endptr".

------------------------------------------------------------------------
r11207 | cbiere | 2006-06-28 16:31:37 -0400 (Wed, 28 Jun 2006) | 3 lines

 * Added is_evil_filename() and url_normalize_char() to catch bad filenames
   in search results.

------------------------------------------------------------------------
r11206 | cbiere | 2006-06-27 21:22:32 -0400 (Tue, 27 Jun 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11205 | cbiere | 2006-06-27 21:03:03 -0400 (Tue, 27 Jun 2006) | 2 lines

 * Added another DRM WMV spammer; seemingly run by WhenU/SaveNow.

------------------------------------------------------------------------
r11204 | cbiere | 2006-06-27 20:35:38 -0400 (Tue, 27 Jun 2006) | 2 lines

 * Another DRM WMV spammer.

------------------------------------------------------------------------
r11203 | daichik | 2006-06-27 01:00:23 -0400 (Tue, 27 Jun 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11202 | cbiere | 2006-06-26 19:25:19 -0400 (Mon, 26 Jun 2006) | 2 lines

 * Include gdb.h unconditionally for gdb_ stubs.

------------------------------------------------------------------------
r11201 | cbiere | 2006-06-26 18:34:25 -0400 (Mon, 26 Jun 2006) | 3 lines

 * spam_db_open(): Declare the column types so that the database can be
   dumped in a human-readable form.

------------------------------------------------------------------------
r11200 | cbiere | 2006-06-26 18:31:23 -0400 (Mon, 26 Jun 2006) | 3 lines

 * Added gdb_rollback().
 * Added gdb_declare_types().

------------------------------------------------------------------------
r11199 | cbiere | 2006-06-26 18:00:19 -0400 (Mon, 26 Jun 2006) | 2 lines

 * Regenerated.

------------------------------------------------------------------------
r11198 | cbiere | 2006-06-26 17:54:32 -0400 (Mon, 26 Jun 2006) | 3 lines

 * Added struct packed_host, packed_host_unpack(), packed_host_size(),
   host_pack().

------------------------------------------------------------------------
r11197 | cbiere | 2006-06-26 15:51:00 -0400 (Mon, 26 Jun 2006) | 5 lines

 * Use a larger read buffer.
 * Handle error from read().
 * Use g_message() instead of printf().
 * Removed unnecessary casts.

------------------------------------------------------------------------
r11196 | cbiere | 2006-06-26 13:02:17 -0400 (Mon, 26 Jun 2006) | 2 lines

 * tt_check(): Fixed pedantic compiler warning regarding pointer signedness.

------------------------------------------------------------------------
r11195 | cbiere | 2006-06-26 12:55:41 -0400 (Mon, 26 Jun 2006) | 2 lines

 * Use g_warning() instead of g_critical() b/c GLib 1.2 does not have it.

------------------------------------------------------------------------
r11194 | cbiere | 2006-06-26 08:45:54 -0400 (Mon, 26 Jun 2006) | 2 lines

 * Added gdb_begin() and gdb_commit() for non-sqlite compiling.

------------------------------------------------------------------------
r11193 | cbiere | 2006-06-26 03:38:14 -0400 (Mon, 26 Jun 2006) | 3 lines

 * Renamed guc_query_bitzi_by_urn() to guc_query_bitzi_by_sha1().
 * Renamed guc_querycache_bitzi_by_urn() to guc_query_cache_bitzi_by_sha1().

------------------------------------------------------------------------
r11192 | cbiere | 2006-06-26 03:25:53 -0400 (Mon, 26 Jun 2006) | 9 lines

 * bitzi_data_t: Renamed member "urnsha1" to "sha1".
 * bitzi_create(): Take advantage of zero-initialization.
 * bitzi_destroy():
   * Fixed typos in debug messages.
   * Use atom_.*_free_null() and removed unnecessary NULL checks.
 * bitzi_init(): Moved loader specific code to bitzi_load_cache().
 * Renamed bitzi_query_byurnsha1() to bitzi_query_by_sha1().
 * Renamed bitzi_querycache_byurnsha1() to bitzi_query_cache_by_sha1().

------------------------------------------------------------------------
r11191 | cbiere | 2006-06-26 02:34:19 -0400 (Mon, 26 Jun 2006) | 17 lines

 * enum gdb_step: Corrected prefix to GDB_.
 * gdb_init():
   * Check whether sqlite3_open() succeeded.
   * Call sqlite3_close() in any case before terminating.
 * gdb_close(): Finalize the prepared statements.
 * gdb_create(): Do not use g_assert(); emit a warning and return an error.
 * gdb_get_config_value():
   * Re-added sqlite3_reset() which was accidently lost during the
     last conflict resolution.
   * Use gdb_stmt_prepare().
 * gdb_set_config_value():
   * Fixed copy & paste mistake in variable name resetting the wrong statement.
   * Use gdb_stmt_prepare().
 * gdb_stmt_finalize(): Fixed bogus check causing a crash.
 * Removed unnecessary placeholder for gdb_get_config_value().
 * Added some function documentation.

------------------------------------------------------------------------
r11190 | cbiere | 2006-06-26 02:22:20 -0400 (Mon, 26 Jun 2006) | 4 lines

 * gtk_gnutella_exit(): Moved gdb_close() further down because spam_close()
   and soon a lot other modules must terminate first due to non-finalized
   prepared SQL statements which prevent sqlite3_close() from succeeding.

------------------------------------------------------------------------
r11189 | cbiere | 2006-06-25 20:25:43 -0400 (Sun, 25 Jun 2006) | 2 lines

 * And another colo.

------------------------------------------------------------------------
r11188 | cbiere | 2006-06-25 19:42:34 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Added another DRM WMV spammer.

------------------------------------------------------------------------
r11187 | cbiere | 2006-06-25 18:06:33 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Renamed storage_sqlite3.[ch] to gdb.[ch].

------------------------------------------------------------------------
r11186 | cbiere | 2006-06-25 18:03:35 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Refactorized database_ to gdb_.

------------------------------------------------------------------------
r11185 | cbiere | 2006-06-25 18:00:15 -0400 (Sun, 25 Jun 2006) | 3 lines

 * Refactorized database_ to gdb_.
 * Renamed storage_sqlite3.[ch] to gdb.[ch].

------------------------------------------------------------------------
r11184 | rmanfredi | 2006-06-25 15:27:57 -0400 (Sun, 25 Jun 2006) | 3 lines

Fixed code style.
Added comments for public routines.  Some I could not figure out so I left "?".

------------------------------------------------------------------------
r11183 | daichik | 2006-06-25 14:29:42 -0400 (Sun, 25 Jun 2006) | 2 lines

Removed the executable bit.Removed the executable bit.

------------------------------------------------------------------------
r11182 | cbiere | 2006-06-25 14:20:34 -0400 (Sun, 25 Jun 2006) | 3 lines

 * database_get_config_value(): Corrected typo in error message.
 * database_close(): DTRT.

------------------------------------------------------------------------
r11181 | cbiere | 2006-06-25 14:09:29 -0400 (Sun, 25 Jun 2006) | 4 lines

 * database_get_config_value(), database_set_config_value():
   * Enumerate variables for clarity.
   * Write SQL statements with "proper" character-case.

------------------------------------------------------------------------
r11180 | cbiere | 2006-06-25 14:04:36 -0400 (Sun, 25 Jun 2006) | 4 lines

 * database_set_config_value(): Use (-1) instead of strlen().
 * database_begin(): Corrected location information.
 * database_commit(): Removed unnecessary line-break.

------------------------------------------------------------------------
r11179 | cbiere | 2006-06-25 13:52:03 -0400 (Sun, 25 Jun 2006) | 3 lines

 * database_get_config_value(): sqlite3_column_text() returns
   "const unsigned char *" instead of "const char *", just cast it.

------------------------------------------------------------------------
r11178 | nonamer | 2006-06-25 13:40:16 -0400 (Sun, 25 Jun 2006) | 2 lines

Litle cleanup.

------------------------------------------------------------------------
r11177 | cbiere | 2006-06-25 13:04:09 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Converted C++ style comments.

------------------------------------------------------------------------
r11176 | cbiere | 2006-06-25 12:57:03 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Use database_* wrappers instead of sqlite3_*() functions.

------------------------------------------------------------------------
r11175 | cbiere | 2006-06-25 12:55:53 -0400 (Sun, 25 Jun 2006) | 2 lines

 * No need to check for HAS_SQLITE.

------------------------------------------------------------------------
r11174 | cbiere | 2006-06-25 12:54:58 -0400 (Sun, 25 Jun 2006) | 9 lines

 * Added sqlite3 wrappers so that persistent_db is not exported and
   sqlite3 does not have to be directly referenced.
 * database_init(): Use make_pathname().
 * database_get_config_value():
   * Use (-1) instead of strlen(), since
      strlen() returns size_t but sqlite3 uses int and it can calculate
      it itself anyway.
   * Do not deconstify key and value.

------------------------------------------------------------------------
r11173 | cbiere | 2006-06-25 12:50:15 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Added vi format tag.

------------------------------------------------------------------------
r11172 | cbiere | 2006-06-25 12:49:29 -0400 (Sun, 25 Jun 2006) | 2 lines

 * tth_base32(): Fixed cast.

------------------------------------------------------------------------
r11171 | nonamer | 2006-06-25 10:44:11 -0400 (Sun, 25 Jun 2006) | 3 lines

* Set config value added. 


------------------------------------------------------------------------
r11170 | cbiere | 2006-06-25 10:21:29 -0400 (Sun, 25 Jun 2006) | 2 lines

 * Added SVN properties.

------------------------------------------------------------------------
r11169 | nonamer | 2006-06-25 10:13:40 -0400 (Sun, 25 Jun 2006) | 2 lines

Use the global database to store the spam table.

------------------------------------------------------------------------
r11168 | daichik | 2006-06-25 10:03:56 -0400 (Sun, 25 Jun 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r11167 | nonamer | 2006-06-25 09:17:17 -0400 (Sun, 25 Jun 2006) | 2 lines

Init and close the database on start/shutdown

------------------------------------------------------------------------
r11166 | nonamer | 2006-06-25 09:16:51 -0400 (Sun, 25 Jun 2006) | 2 lines

Use a primary key on the key column

------------------------------------------------------------------------
r11165 | nonamer | 2006-06-25 09:09:57 -0400 (Sun, 25 Jun 2006) | 4 lines

Added storage_sqlite3 helper files. 
On open a configuration table is created if it does not exist so
the schema version per table can be stored there for future upgrades.

------------------------------------------------------------------------
r11164 | cbiere | 2006-06-25 08:46:08 -0400 (Sun, 25 Jun 2006) | 2 lines

 * tls_cache_bind_key(): Removed misplaced '&' from key argument.

------------------------------------------------------------------------
r11163 | daichik | 2006-06-25 07:13:41 -0400 (Sun, 25 Jun 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11162 | rmanfredi | 2006-06-25 06:14:56 -0400 (Sun, 25 Jun 2006) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r11161 | rmanfredi | 2006-06-25 06:08:54 -0400 (Sun, 25 Jun 2006) | 2 lines

Fixed uninitialized variable.

------------------------------------------------------------------------
r11160 | rmanfredi | 2006-06-24 03:57:07 -0400 (Sat, 24 Jun 2006) | 2 lines

Regenerated after Jmakefile change.

------------------------------------------------------------------------
r11159 | cbiere | 2006-06-24 03:48:22 -0400 (Sat, 24 Jun 2006) | 3 lines

 * struct tth: Changed base type of "data" to unsigned char to fix pedantic
   compiler warnings regarding signedness mismatches of pointers.

------------------------------------------------------------------------
r11158 | cbiere | 2006-06-24 03:43:51 -0400 (Sat, 24 Jun 2006) | 7 lines

 * Added "struct packed_host_addr", host_addr_pack(),
   packed_host_addr_unpack(), packed_host_addr_size() to create a more
   compact representation of an host_addr_t.
 * Renamed host_addr_set_ipv4() to host_addr_get_ipv4().
 * Renamed host_addr_set_ipv6() to host_addr_get_ipv6() and changed the
   interface so that it is analogue to host_addr_get_ipv4().

------------------------------------------------------------------------
r11157 | cbiere | 2006-06-24 03:36:10 -0400 (Sat, 24 Jun 2006) | 2 lines

 * Added src/core/tls_cache.[ch].

------------------------------------------------------------------------
r11156 | cbiere | 2006-06-24 03:34:37 -0400 (Sat, 24 Jun 2006) | 2 lines

 * Added src/core/tls_cache.[ch].

------------------------------------------------------------------------
r11155 | cbiere | 2006-06-24 03:31:44 -0400 (Sat, 24 Jun 2006) | 3 lines

 * Extracted the caching of TLS-capable hosts from nodes.c and added
   support for SQLite. When using SQLite the cache is also persistent.

------------------------------------------------------------------------
r11154 | cbiere | 2006-06-24 03:05:31 -0400 (Sat, 24 Jun 2006) | 2 lines

 * Added poke_be64().

------------------------------------------------------------------------
r11153 | rmanfredi | 2006-06-23 18:15:33 -0400 (Fri, 23 Jun 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r11152 | rmanfredi | 2006-06-23 14:36:05 -0400 (Fri, 23 Jun 2006) | 3 lines

Forgot to #undef g_string_append_c in the g_string_append_len() definition,
which caused double tracking of the string.

------------------------------------------------------------------------
r11151 | cbiere | 2006-06-22 23:14:39 -0400 (Thu, 22 Jun 2006) | 3 lines

 * Added GUI controls for the GUI properties "search_discard_spam" and
   "search_discard_hashless" under Search Results->Settings.

------------------------------------------------------------------------
r11150 | cbiere | 2006-06-22 23:08:08 -0400 (Thu, 22 Jun 2006) | 6 lines

 * Renamed properties and inverted their meaning:
   * search_show_hashless -> search_discard_hashless
   * search_show_spam -> search_discard_spam
   * These names describe their effect better. They do not only affect the
     display of results but, for example, auto-download filter rules too.

------------------------------------------------------------------------
r11149 | cbiere | 2006-06-22 22:26:00 -0400 (Thu, 22 Jun 2006) | 2 lines

 * query_muid_map_remove_oldest(): Removed unused variable.

------------------------------------------------------------------------
r11148 | cbiere | 2006-06-22 22:23:57 -0400 (Thu, 22 Jun 2006) | 3 lines

 * Experimental use of SQLite instead of GHashTable to check for known
   SHA-1s of spam files.

------------------------------------------------------------------------
r11147 | cbiere | 2006-06-22 22:19:29 -0400 (Thu, 22 Jun 2006) | 4 lines

 * query_muid_map_remove_oldest(): Fixed memory leak; old_muid is cleared
   by atom_guid_free_null() thus it must not be used to indicate whether an
   item was removed.

------------------------------------------------------------------------
r11146 | cbiere | 2006-06-22 15:35:58 -0400 (Thu, 22 Jun 2006) | 3 lines

 * Replaced SVN Id tag so that we know which revision of the Bitzi
   sources it is based on.

------------------------------------------------------------------------
r11145 | cbiere | 2006-06-22 15:32:48 -0400 (Thu, 22 Jun 2006) | 11 lines

 * Renamed tiger_init() to tiger_check().
 * Replaced tiger.[ch] and tigertree.[ch] with versions that have been
   successfully tested on a big-endian machine.
 * tiger():
   * Changed the hash to a byte array so that it's endian-independent
     like any other hash function.
   * Make sure data which is not aligned to an 8-byte boundary is probably
     handled and does not cause undefined behaviour on architectures with
     strict alignment requirements.
 * Removed unused tt_copy().

------------------------------------------------------------------------
r11144 | cbiere | 2006-06-22 15:24:41 -0400 (Thu, 22 Jun 2006) | 2 lines

 * Added poke_le64().

------------------------------------------------------------------------
r11143 | cbiere | 2006-06-22 09:01:51 -0400 (Thu, 22 Jun 2006) | 4 lines

 * record_query_string(): Do not record the query if "search_muid_track_amount"
   is zero.
 * map_muid_to_query_string(): It is unnecessary to collect garbage here too.

------------------------------------------------------------------------
r11142 | cbiere | 2006-06-22 00:21:30 -0400 (Thu, 22 Jun 2006) | 2 lines

 * search_update_details(): Show the original query instead of the "tag".

------------------------------------------------------------------------
r11141 | cbiere | 2006-06-22 00:13:03 -0400 (Thu, 22 Jun 2006) | 6 lines

 * Added tracking of queries so that a routed query hit can be linked back to
   the original search term. The amount of queries to track is configured by
   the property "search_muid_track_amount" which is zero by default. The GUI
   shows the search term under Search Results->Details->Query. The "Tag"
   row was recycled for this (as it never showed anything).

------------------------------------------------------------------------
r11140 | cbiere | 2006-06-22 00:04:39 -0400 (Thu, 22 Jun 2006) | 3 lines

 * Simplified hash list again because storing an additional data pointer is
   not useful this way.

------------------------------------------------------------------------
r11139 | cbiere | 2006-06-21 23:57:09 -0400 (Wed, 21 Jun 2006) | 2 lines

 * Added property search_muid_track_amount.

------------------------------------------------------------------------
r11138 | cbiere | 2006-06-21 19:41:41 -0400 (Wed, 21 Jun 2006) | 4 lines

 * Style fixes.
 * Removed unnecessary casts.
 * message_compare_func(), message_hash_func(): Simplified.

------------------------------------------------------------------------
r11137 | cbiere | 2006-06-21 19:16:45 -0400 (Wed, 21 Jun 2006) | 2 lines

 * qhit_send_node(): Corrected warning message.

------------------------------------------------------------------------
r11136 | cbiere | 2006-06-21 16:17:20 -0400 (Wed, 21 Jun 2006) | 2 lines

 * search_request(): Use str_len_capped().

------------------------------------------------------------------------
r11135 | cbiere | 2006-06-21 16:14:30 -0400 (Wed, 21 Jun 2006) | 2 lines

 * Added str_len_capped().

------------------------------------------------------------------------
r11134 | cbiere | 2006-06-21 14:18:52 -0400 (Wed, 21 Jun 2006) | 7 lines

 * Replaced a couple of atom_.*_free() with atom_.*_null() for less overhead
   and safety.
 * Changed search_free_proxies() to static function.
 * Let search_free_proxies() check for rs->proxies == NULL instead of doing
   this each time before calling it.
 * search_free_record(): Added assertion; magic would be better.

------------------------------------------------------------------------
r11133 | cbiere | 2006-06-21 13:59:33 -0400 (Wed, 21 Jun 2006) | 3 lines

 * download_request(): Moved some code to vendor_is_evil() and added another
   idiot.

------------------------------------------------------------------------
r11132 | cbiere | 2006-06-20 19:02:21 -0400 (Tue, 20 Jun 2006) | 2 lines

 * Use the new magnet icon in popup menus.

------------------------------------------------------------------------
r11131 | cbiere | 2006-06-20 18:58:04 -0400 (Tue, 20 Jun 2006) | 3 lines

 * ntp_send_probe(): Do not emit a critical warning if the socket is NULL;
   it is not a bug if there is only an IPv4 or IPv6 socket.

------------------------------------------------------------------------
r11130 | cbiere | 2006-06-20 18:52:40 -0400 (Tue, 20 Jun 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11129 | cbiere | 2006-06-20 18:13:22 -0400 (Tue, 20 Jun 2006) | 3 lines

 * Moved PNG magnets to pixmap directory.
 * Added magnet icons to MANIFEST.

------------------------------------------------------------------------
r11128 | cbiere | 2006-06-20 16:07:20 -0400 (Tue, 20 Jun 2006) | 2 lines

 * Added tt_check() to verify the TTH calculation.

------------------------------------------------------------------------
r11127 | cbiere | 2006-06-20 14:02:26 -0400 (Tue, 20 Jun 2006) | 2 lines

 * Added missing lines for SQLite detection code.

------------------------------------------------------------------------
r11126 | cbiere | 2006-06-20 08:36:57 -0400 (Tue, 20 Jun 2006) | 3 lines

 * free_data(): Fixed syntax error. If the sizeof operator is followed by
   a type, the type must be enclosed in parentheses.

------------------------------------------------------------------------
r11125 | cbiere | 2006-06-20 05:17:28 -0400 (Tue, 20 Jun 2006) | 4 lines

 * Check for sqlite3 first which is the up-to-date version of SQLite fallback
   to sqlite if not found. SQLite 2.x is seemingly outdated, we don't want to
   support both.

------------------------------------------------------------------------
r11124 | cbiere | 2006-06-20 05:03:01 -0400 (Tue, 20 Jun 2006) | 2 lines

 * Gtk-Gnutella requires SQLite 3.x (the library).

------------------------------------------------------------------------
r11123 | cbiere | 2006-06-20 04:52:54 -0400 (Tue, 20 Jun 2006) | 2 lines

 * Look for alternate package sqlite3 if sqlite is not found.

------------------------------------------------------------------------
r11122 | cbiere | 2006-06-19 17:29:51 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Added copyleft statement.

------------------------------------------------------------------------
r11121 | cbiere | 2006-06-19 17:16:08 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Enhanced magnet icon by T`az.

------------------------------------------------------------------------
r11120 | cbiere | 2006-06-19 16:33:52 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Added correct mime-type.

------------------------------------------------------------------------
r11119 | cbiere | 2006-06-19 16:32:53 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Magnet icon provided by T`az.

------------------------------------------------------------------------
r11118 | cbiere | 2006-06-19 15:46:14 -0400 (Mon, 19 Jun 2006) | 2 lines

 * download_moved_permanently(): Disabled because it could cause trouble.

------------------------------------------------------------------------
r11117 | cbiere | 2006-06-19 15:45:55 -0400 (Mon, 19 Jun 2006) | 3 lines

 * iov_scatter_string(): Make sure the string is NUL-terminated and truncate
   it if necessary.

------------------------------------------------------------------------
r11116 | cbiere | 2006-06-19 12:45:37 -0400 (Mon, 19 Jun 2006) | 5 lines

 * select_encoding(): Fixed bug: When trying to workaround the deflate issue
   with Safari, "buf" was modified so that the code looked in the User-Agent
   header for "gzip" so "gzip" was never tried. "gzip" seems to work fine
   with Safari.

------------------------------------------------------------------------
r11115 | rmanfredi | 2006-06-19 12:16:23 -0400 (Mon, 19 Jun 2006) | 2 lines

Run "make Makefiles.SH" (invoking jmake) followed by "metaconfig -m".

------------------------------------------------------------------------
r11114 | cbiere | 2006-06-19 11:06:21 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Added compiler flags for SQLite.

------------------------------------------------------------------------
r11113 | cbiere | 2006-06-19 10:49:34 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Added compiler flags for SQLite.

------------------------------------------------------------------------
r11112 | cbiere | 2006-06-19 10:43:31 -0400 (Mon, 19 Jun 2006) | 2 lines

 * You need neither glade nor bison for Gtk-Gnutella.

------------------------------------------------------------------------
r11111 | cbiere | 2006-06-19 10:40:26 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Set d_sqlite if SQLite was found.

------------------------------------------------------------------------
r11110 | cbiere | 2006-06-19 09:41:47 -0400 (Mon, 19 Jun 2006) | 2 lines

 * Added missing "fi".

------------------------------------------------------------------------
r11109 | cbiere | 2006-06-18 17:26:11 -0400 (Sun, 18 Jun 2006) | 2 lines

 * Include <stdlib.h> for the prototype.

------------------------------------------------------------------------
r11108 | cbiere | 2006-06-18 17:24:41 -0400 (Sun, 18 Jun 2006) | 4 lines

 * Added missing semi-colon in gm_setproctitle().
 * Added "inline" to function prototype to hide warnings when setproctitle()
   is available.

------------------------------------------------------------------------
r11107 | rmanfredi | 2006-06-18 17:21:44 -0400 (Sun, 18 Jun 2006) | 2 lines

Rerun "metaconfig -m".

------------------------------------------------------------------------
r11106 | cbiere | 2006-06-18 17:20:14 -0400 (Sun, 18 Jun 2006) | 2 lines

 * Added sqlite.

------------------------------------------------------------------------
r11105 | cbiere | 2006-06-18 17:05:37 -0400 (Sun, 18 Jun 2006) | 2 lines

 * Added sqlite.

------------------------------------------------------------------------
r11104 | cbiere | 2006-06-18 16:47:14 -0400 (Sun, 18 Jun 2006) | 2 lines

 * Added sqliteconfig.U.

------------------------------------------------------------------------
r11103 | cbiere | 2006-06-18 16:45:29 -0400 (Sun, 18 Jun 2006) | 2 lines

 * dist module to detect presence of SQLite.

------------------------------------------------------------------------
r11102 | rmanfredi | 2006-06-18 13:12:33 -0400 (Sun, 18 Jun 2006) | 2 lines

Updated bogons and geo-ip information.

------------------------------------------------------------------------
r11101 | rmanfredi | 2006-06-18 12:25:57 -0400 (Sun, 18 Jun 2006) | 2 lines

Rerun metaconfig.

------------------------------------------------------------------------
r11100 | cbiere | 2006-06-18 11:25:06 -0400 (Sun, 18 Jun 2006) | 2 lines

 * Added d_setproctitle.U.

------------------------------------------------------------------------
r11099 | cbiere | 2006-06-18 11:23:44 -0400 (Sun, 18 Jun 2006) | 2 lines

 * dist module to detect setproctitle(fmt, ...).

------------------------------------------------------------------------
r11098 | cbiere | 2006-06-18 11:09:29 -0400 (Sun, 18 Jun 2006) | 8 lines

 * gm_setproctitle(): Switched back to the string scattering version but
   use env[] too this time. Otherwise argv[] is likely too short to hold
   the complete process title. Also, do not arbitrary limit the number of
   argv[] elements. Decomposed gm_setproctitle() into various functions for
   readability. This solution should be safe with picky memory checkers.
 * Ignore the bogus variant of setproctitle() which uses no format string
   since nobody seems to have that.

------------------------------------------------------------------------
r11097 | rmanfredi | 2006-06-18 03:46:45 -0400 (Sun, 18 Jun 2006) | 5 lines

Really revert to the previous version of gm_setproctitle().
Added pedantic "size_t" declarations instead of "gint" to hold the
result of strlen().  Not that I fear that it would overflow here but we
need to show good code.

------------------------------------------------------------------------
r11096 | rmanfredi | 2006-06-17 16:22:58 -0400 (Sat, 17 Jun 2006) | 2 lines

Use walloc() instead of malloc() for row data.

------------------------------------------------------------------------
r11095 | rmanfredi | 2006-06-17 16:21:41 -0400 (Sat, 17 Jun 2006) | 4 lines

Reverted to previous version of setproctitle() emulation since the newer
version was not working properly under linux and its code was harder
to follow.

------------------------------------------------------------------------
r11094 | rmanfredi | 2006-06-17 15:54:18 -0400 (Sat, 17 Jun 2006) | 2 lines

Forgot to remove one statement.

------------------------------------------------------------------------
r11093 | rmanfredi | 2006-06-17 15:50:50 -0400 (Sat, 17 Jun 2006) | 2 lines

Fixed huge memory leak.

------------------------------------------------------------------------
r11092 | cbiere | 2006-06-17 09:38:39 -0400 (Sat, 17 Jun 2006) | 3 lines

 * request_new_sockets(): Fixed bug in previous commit, the bind address for
   the TCP socket was not properly set.

------------------------------------------------------------------------
r11091 | rmanfredi | 2006-06-17 08:26:27 -0400 (Sat, 17 Jun 2006) | 3 lines

Must use the metric system for dumping sizes, because otherwise
the extra "i" in the units throws all formatting off.

------------------------------------------------------------------------
r11090 | cbiere | 2006-06-17 08:10:08 -0400 (Sat, 17 Jun 2006) | 3 lines

 * Use the correct bind address for the sockets
   when UDP support is (re-)enabled.

------------------------------------------------------------------------
r11089 | rmanfredi | 2006-06-17 06:07:12 -0400 (Sat, 17 Jun 2006) | 3 lines

Made gtk-gnutella compile again with the following malloc debugging flags:
	-DTRACK_MALLOC -DREMAP_ZALLOC -DMALLOC_FRAMES -DMALLOC_STATS -DTRACK_ATOMS

------------------------------------------------------------------------
r11088 | rmanfredi | 2006-06-17 05:37:19 -0400 (Sat, 17 Jun 2006) | 4 lines

Regenerated with newest jmake: the CPP flags are now systematically included
in the mkdep call to generate proper dependencies when #include are dependent
on some externally set symbols.

------------------------------------------------------------------------
r11087 | cbiere | 2006-06-16 22:44:55 -0400 (Fri, 16 Jun 2006) | 2 lines

 * socket_read(): Simplified TLS detection.

------------------------------------------------------------------------
r11086 | cbiere | 2006-06-16 16:48:00 -0400 (Fri, 16 Jun 2006) | 2 lines

 * search_gui_handle_magnet(): Removed oudated comment.

------------------------------------------------------------------------
r11085 | cbiere | 2006-06-16 16:00:30 -0400 (Fri, 16 Jun 2006) | 2 lines

 * Another Gnoozle bites the dust.

------------------------------------------------------------------------
r11084 | cbiere | 2006-06-16 13:05:25 -0400 (Fri, 16 Jun 2006) | 2 lines

 * Fixed svn properties; these are binary files.

------------------------------------------------------------------------
r11083 | daichik | 2006-06-16 11:18:02 -0400 (Fri, 16 Jun 2006) | 2 lines

Updated Japanese translations.Updated Japanese translations.

------------------------------------------------------------------------
r11082 | daichik | 2006-06-16 11:15:24 -0400 (Fri, 16 Jun 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11081 | cbiere | 2006-06-16 06:38:41 -0400 (Fri, 16 Jun 2006) | 2 lines

 * struct ul_stats: Use an atom for "filename" instead of g_strdup().

------------------------------------------------------------------------
r11080 | cbiere | 2006-06-16 06:32:34 -0400 (Fri, 16 Jun 2006) | 9 lines

 * Removed deprecated charset mapping code.
 * core/matching.h: Moved private declarations to core/matching.c.
 * struct st_entry: Use an atom for "string" instead of g_strdup().
 * st_insert_item():
 * Moved modified version of setup_char_map() to core/matching.c;
   discarded all non-UTF-8 mapping.
 * Added st_alloc().
 * Made st_search_callback less specific.

------------------------------------------------------------------------
r11079 | cbiere | 2006-06-16 06:19:41 -0400 (Fri, 16 Jun 2006) | 2 lines

 * atom_free(): The atom must be removed from the global table as well.

------------------------------------------------------------------------
r11078 | cbiere | 2006-06-16 06:09:12 -0400 (Fri, 16 Jun 2006) | 2 lines

 * Use a string atom for "meta" of "struct result_data" instead of g_strdup().

------------------------------------------------------------------------
r11077 | cbiere | 2006-06-16 04:54:07 -0400 (Fri, 16 Jun 2006) | 2 lines

 * Added utf8_byte_is_allowed().

------------------------------------------------------------------------
r11076 | cbiere | 2006-06-16 03:41:28 -0400 (Fri, 16 Jun 2006) | 4 lines

 * Record the addresses of all created atoms so atom_get(t, atom_get(t, x))
   hashes x only the first time and otherwise does not have to look at
   the atom data at all.

------------------------------------------------------------------------
r11075 | cbiere | 2006-06-15 18:18:36 -0400 (Thu, 15 Jun 2006) | 5 lines

 * Removed the FORTH ban b/c the observed hostile behaviour was caused
   a scientific experiment:
   http://groups.yahoo.com/group/the_gdf/message/22445


------------------------------------------------------------------------
r11074 | cbiere | 2006-06-14 23:31:30 -0400 (Wed, 14 Jun 2006) | 3 lines

 * file_info_unlink(): Do not unlink partial files.
 * Added a few consistency checks after a crash in file_info_reset().

------------------------------------------------------------------------
r11073 | cbiere | 2006-06-14 23:26:48 -0400 (Wed, 14 Jun 2006) | 3 lines

 * download_write_data(): Don't display truncated values in the debug
   message.

------------------------------------------------------------------------
r11072 | cbiere | 2006-06-14 21:50:30 -0400 (Wed, 14 Jun 2006) | 3 lines

 * download_request(): Check the Content-Encoding header before using
   content_encoding.

------------------------------------------------------------------------
r11071 | cbiere | 2006-06-14 21:15:33 -0400 (Wed, 14 Jun 2006) | 8 lines

 * Added buffers_strip_trailing().
 * download_flush(): Fixed bug: Do not blatantly modify b->held because it
   will not really cause the data to be discard and further cause an
   an assertion failure "written <= b->held". Use buffers_strip_trailing()
   instead.
 * download_request(): Advertise support for "deflate" for all downloads,
   not just browse host downloads.

------------------------------------------------------------------------
r11070 | cbiere | 2006-06-14 21:08:42 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added TTH_BASE32_SIZE and TTH_RAW_SIZE.

------------------------------------------------------------------------
r11069 | cbiere | 2006-06-14 21:07:58 -0400 (Wed, 14 Jun 2006) | 3 lines

 * Added struct tth.
 * Added tth_base32() and base32_tth().

------------------------------------------------------------------------
r11068 | cbiere | 2006-06-14 21:04:56 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added pmsg_discard_trailing().

------------------------------------------------------------------------
r11067 | cbiere | 2006-06-14 21:04:23 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added enum type http_content_encoding_t.

------------------------------------------------------------------------
r11066 | cbiere | 2006-06-14 02:50:36 -0400 (Wed, 14 Jun 2006) | 6 lines

 * get_results_set():
  * Filter Gnoozle spam.
  * Don't drop spam here so that it can be inspected from the GUI if desired.
 * search_results():
  * Don't forward the results set if it was marked as spammy.

------------------------------------------------------------------------
r11065 | cbiere | 2006-06-14 02:44:08 -0400 (Wed, 14 Jun 2006) | 5 lines

 * search_gui_create_record(): Differ between spam records and records in
   spam sets.
 * search_matched(): Ignore spam results and results without a hash unless
   explicitely requested.

------------------------------------------------------------------------
r11064 | cbiere | 2006-06-14 02:39:50 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Don't export search_matched() it should be static.

------------------------------------------------------------------------
r11063 | cbiere | 2006-06-14 02:36:26 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added properties "search_show_spam" and "search_show_hashless".

------------------------------------------------------------------------
r11062 | cbiere | 2006-06-14 02:32:14 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added GNZL.

------------------------------------------------------------------------
r11061 | cbiere | 2006-06-14 00:59:03 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Added ST_SPAM flag.

------------------------------------------------------------------------
r11060 | cbiere | 2006-06-14 00:51:59 -0400 (Wed, 14 Jun 2006) | 2 lines

 * Another Gnoozle huckster.

------------------------------------------------------------------------
r11059 | cbiere | 2006-06-13 15:10:19 -0400 (Tue, 13 Jun 2006) | 2 lines

 * get_results_set(): Drop query hits with excessive alt-locs.

------------------------------------------------------------------------
r11058 | rmanfredi | 2006-06-13 01:12:42 -0400 (Tue, 13 Jun 2006) | 2 lines

Bumped date.  All GTKG before are vulnerable to the UDP crawling bug.

------------------------------------------------------------------------
r11057 | rmanfredi | 2006-06-13 01:10:35 -0400 (Tue, 13 Jun 2006) | 3 lines

Moved assertion: it only holds when user-agent data is actually stuffed
into the buffer.

------------------------------------------------------------------------
r11056 | cbiere | 2006-06-12 19:17:33 -0400 (Mon, 12 Jun 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11055 | cbiere | 2006-06-12 17:10:47 -0400 (Mon, 12 Jun 2006) | 3 lines

 * urn_get_sha1(): Fixed wrong return value causing a bogus SHA-1 when
   the URN prefix was unsupported.

------------------------------------------------------------------------
r11054 | cbiere | 2006-06-12 06:29:58 -0400 (Mon, 12 Jun 2006) | 2 lines

 * More evil Gnoozle spammers.

------------------------------------------------------------------------
r11053 | cbiere | 2006-06-12 06:18:14 -0400 (Mon, 12 Jun 2006) | 2 lines

 * Added further Gnoozle spammers.

------------------------------------------------------------------------
r11052 | cbiere | 2006-06-11 17:35:51 -0400 (Sun, 11 Jun 2006) | 3 lines

 * gui_update_download(): Fixed display of the download rate and status
   per source.

------------------------------------------------------------------------
r11051 | cbiere | 2006-06-11 17:33:33 -0400 (Sun, 11 Jun 2006) | 2 lines

 * search_gui_cmp_info(): Fixed sorting by path for local results.

------------------------------------------------------------------------
r11050 | cbiere | 2006-06-11 17:31:42 -0400 (Sun, 11 Jun 2006) | 2 lines

 * Removed prototype for non-existent function.

------------------------------------------------------------------------
r11049 | cbiere | 2006-06-10 14:30:47 -0400 (Sat, 10 Jun 2006) | 2 lines

 * More spam. Reached 11032 items.

------------------------------------------------------------------------
r11048 | cbiere | 2006-06-10 13:47:03 -0400 (Sat, 10 Jun 2006) | 2 lines

 * Added range used by Gnoozle for "sponsored results" spamming.

------------------------------------------------------------------------
r11047 | cbiere | 2006-06-09 19:43:19 -0400 (Fri, 09 Jun 2006) | 2 lines

 * Added DRM spamming server farm of MediaDefender.

------------------------------------------------------------------------
r11046 | cbiere | 2006-06-09 19:31:12 -0400 (Fri, 09 Jun 2006) | 2 lines

 * The WMA-DRM saga continues.

------------------------------------------------------------------------
r11045 | cbiere | 2006-06-09 18:16:11 -0400 (Fri, 09 Jun 2006) | 2 lines

 * More WMA-DRM crap.

------------------------------------------------------------------------
r11044 | cbiere | 2006-06-09 12:54:11 -0400 (Fri, 09 Jun 2006) | 2 lines

 * Another ton of WMA-DRM spam. The list contains now over 10000 items.

------------------------------------------------------------------------
r11043 | cbiere | 2006-06-09 10:22:44 -0400 (Fri, 09 Jun 2006) | 2 lines

 * Added a ton of WMA-DRM spam.

------------------------------------------------------------------------
r11042 | cbiere | 2006-06-09 02:51:37 -0400 (Fri, 09 Jun 2006) | 3 lines

 * download_read(): If buffers_add_read() wasn't reached due to an error
   condition, the "pmsg_t" buffer was leaked.

------------------------------------------------------------------------
r11041 | cbiere | 2006-06-08 22:52:53 -0400 (Thu, 08 Jun 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11040 | cbiere | 2006-06-08 18:05:11 -0400 (Thu, 08 Jun 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11039 | cbiere | 2006-06-08 18:02:19 -0400 (Thu, 08 Jun 2006) | 2 lines

 * Extended spammer range.

------------------------------------------------------------------------
r11038 | cbiere | 2006-06-08 18:00:26 -0400 (Thu, 08 Jun 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r11037 | cbiere | 2006-06-08 17:59:42 -0400 (Thu, 08 Jun 2006) | 2 lines

 * Another WMV spammer.

------------------------------------------------------------------------
r11036 | cbiere | 2006-06-08 16:33:14 -0400 (Thu, 08 Jun 2006) | 3 lines

 * gm_setproctitle(): Prevent that the process title is truncated by leaving
   the loop too early.

------------------------------------------------------------------------
r11035 | daichik | 2006-06-07 10:16:04 -0400 (Wed, 07 Jun 2006) | 2 lines

Seven Neighbours, Six Republics, Five Nations, Four Languages, Three Religions, Two Scripts and One Goal.

------------------------------------------------------------------------
r11034 | cbiere | 2006-06-03 13:12:12 -0400 (Sat, 03 Jun 2006) | 2 lines

 * ggept_hname_extract(): Handle HNAME more strictly.

------------------------------------------------------------------------
r11033 | daichik | 2006-06-01 10:29:54 -0400 (Thu, 01 Jun 2006) | 2 lines

Updated Japanese translation.

------------------------------------------------------------------------
r11032 | daichik | 2006-06-01 10:23:47 -0400 (Thu, 01 Jun 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11031 | cbiere | 2006-05-31 15:05:55 -0400 (Wed, 31 May 2006) | 6 lines

 * download_request(): Use "download_retry_refused_delay" instead of
   "download_retry_busy_delay" if we didn't receive a complete response,
   because the latter is 30 minutes by default whereas the former is only
   one minute and the server is most likely heavily overloaded or not
   a web/gnutella server at all. Retrying after a minute is too aggressive.

------------------------------------------------------------------------
r11030 | cbiere | 2006-05-30 16:21:01 -0400 (Tue, 30 May 2006) | 2 lines

 * Changed property description without modifying its meaning.

------------------------------------------------------------------------
r11029 | cbiere | 2006-05-30 16:17:51 -0400 (Tue, 30 May 2006) | 2 lines

 * node_supports_tls(): Don't emit any critical warnings, there's no bug.

------------------------------------------------------------------------
r11028 | cbiere | 2006-05-29 18:18:23 -0400 (Mon, 29 May 2006) | 3 lines

 * buffers_add_read(): b->last didn't really point to the last element of
   the list, so appending an element was more expensive than necessary.

------------------------------------------------------------------------
r11027 | cbiere | 2006-05-29 16:43:21 -0400 (Mon, 29 May 2006) | 2 lines

 * buffers_add_read(): Ensure the last element has no follower.

------------------------------------------------------------------------
r11026 | cbiere | 2006-05-29 11:06:47 -0400 (Mon, 29 May 2006) | 3 lines

 * socket_udp_accept(): Cast from to (void *) because on IRIX msg_name
   has type "caddr_t" instead of (void *) causing a compiler warning.

------------------------------------------------------------------------
r11025 | cbiere | 2006-05-29 10:47:08 -0400 (Mon, 29 May 2006) | 2 lines

 * filepath_directory(): Removed unused variable.

------------------------------------------------------------------------
r11024 | daichik | 2006-05-29 09:01:57 -0400 (Mon, 29 May 2006) | 2 lines

Minor changes.

------------------------------------------------------------------------
r11023 | daichik | 2006-05-29 07:41:35 -0400 (Mon, 29 May 2006) | 2 lines

Updated Norwegian Bokmaal translation by Alexander Nicolaysen Sornes.

------------------------------------------------------------------------
r11022 | cbiere | 2006-05-28 19:00:29 -0400 (Sun, 28 May 2006) | 3 lines

 * Added drag support for local searches for passing the local pathname of the
   dragged file as file: URI to other applications.

------------------------------------------------------------------------
r11021 | cbiere | 2006-05-28 18:55:54 -0400 (Sun, 28 May 2006) | 3 lines

 * search_gui_create_record():
   Set rc->info to the directory if a path is known and convert it for the GUI.

------------------------------------------------------------------------
r11020 | cbiere | 2006-05-28 18:53:02 -0400 (Sun, 28 May 2006) | 4 lines

 * search_add_local_file(): Set rc->path to the full pathname of the given
   file and let the GUI convert the string if necessary. We need the full
   pathname for DND later which requires the real path not a converted version.

------------------------------------------------------------------------
r11019 | cbiere | 2006-05-28 18:48:52 -0400 (Sun, 28 May 2006) | 2 lines

 * Added ipv4_unspecified and ipv4_loopback.

------------------------------------------------------------------------
r11018 | cbiere | 2006-05-28 18:48:08 -0400 (Sun, 28 May 2006) | 2 lines

 * Added lazy_filename_to_ui_string().

------------------------------------------------------------------------
r11017 | cbiere | 2006-05-28 18:47:33 -0400 (Sun, 28 May 2006) | 3 lines

 * Replaced UI_USES_UTF8_ENCODING with a static inline function for less
   #ifdef clutter.

------------------------------------------------------------------------
r11016 | cbiere | 2006-05-28 18:44:54 -0400 (Sun, 28 May 2006) | 4 lines

 * is_local_addr(): Don't use DNS resolution more than once because it's
   unlikely to succeed later if it failed for local names and it would
   cause blocking because it's not asynchronous.

------------------------------------------------------------------------
r11015 | cbiere | 2006-05-28 18:42:05 -0400 (Sun, 28 May 2006) | 2 lines

 * Added filepath_directory(), the counter-part of filepath_basename().

------------------------------------------------------------------------
r11014 | cbiere | 2006-05-28 16:54:09 -0400 (Sun, 28 May 2006) | 2 lines

 * Applied update provided by Alexander N. Sørnes.

------------------------------------------------------------------------
r11013 | cbiere | 2006-05-28 15:33:25 -0400 (Sun, 28 May 2006) | 2 lines

 * Added Norwegian Nynorsk strings provided by Alexander N. Sørnes.

------------------------------------------------------------------------
r11012 | cbiere | 2006-05-28 01:41:24 -0400 (Sun, 28 May 2006) | 2 lines

 * search_matched(): Do not filter local searches at all.

------------------------------------------------------------------------
r11011 | cbiere | 2006-05-27 21:56:07 -0400 (Sat, 27 May 2006) | 6 lines

 * download_fallback_to_push(): Prevent that we fall back to push if we're
   already receiving data or already sent the push. This should fix some
   assertion failures that would occur later.
 * download_write_data(): Prevent an integer overflow.
 * download_write_request(): Removed unnecessary cast.

------------------------------------------------------------------------
r11010 | cbiere | 2006-05-27 17:23:26 -0400 (Sat, 27 May 2006) | 3 lines

 * Removed a few duplicates.
 * Added more spam.

------------------------------------------------------------------------
r11009 | daichik | 2006-05-27 08:59:48 -0400 (Sat, 27 May 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r11008 | daichik | 2006-05-27 08:53:54 -0400 (Sat, 27 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r11007 | cbiere | 2006-05-25 10:49:54 -0400 (Thu, 25 May 2006) | 5 lines

 * node_tsync_udp(): Again, check "outq" of the UDP node because it might
   not be available if only IPv4 or only IPv6 is enabled instead of both.
 * node_process_handshake_header(): Give a more useful error response.
 * node_fill_info(): Stick the physical address and port for the pseudo nodes.

------------------------------------------------------------------------
r11006 | cbiere | 2006-05-25 09:55:36 -0400 (Thu, 25 May 2006) | 3 lines

 * download_rx_done(): Do not try to verify the SHA-1 if the filesize is still
   unknown or if it's a browse host download. Fixes an assertion failure.

------------------------------------------------------------------------
r11005 | cbiere | 2006-05-25 08:52:13 -0400 (Thu, 25 May 2006) | 3 lines

 * socket_udp_accept(): Fixed crash on receiving UDP packet caused by
   initializing from_addr the wrong way.

------------------------------------------------------------------------
r11004 | cbiere | 2006-05-25 08:45:26 -0400 (Thu, 25 May 2006) | 2 lines

 * Added socket_addr_init().

------------------------------------------------------------------------
r11003 | cbiere | 2006-05-25 05:55:43 -0400 (Thu, 25 May 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r11002 | cbiere | 2006-05-25 05:54:59 -0400 (Thu, 25 May 2006) | 3 lines

 * prop_get_by_regex(): Make sure regfree() is called even if regcomp()
   failed.

------------------------------------------------------------------------
r11001 | cbiere | 2006-05-25 05:53:49 -0400 (Thu, 25 May 2006) | 2 lines

 * Moved prototype of search_locally() so that it's visible for the bridge.

------------------------------------------------------------------------
r11000 | cbiere | 2006-05-25 05:52:29 -0400 (Thu, 25 May 2006) | 5 lines

 * Added cmsg_nxthdr() so that we can keep the const-qualifier without
   nasty warnings caused by the Linux-variant of CMSG_NXTHDR().
 * socket_udp_accept(): Use socket_addr_set() and socket_addr_get_sockaddr()
   so that we don't have to worry about USE_IPV6 here.

------------------------------------------------------------------------
r10999 | cbiere | 2006-05-25 05:49:43 -0400 (Thu, 25 May 2006) | 2 lines

 * Added socket_addr_get_const_sockaddr().

------------------------------------------------------------------------
r10998 | cbiere | 2006-05-24 23:34:19 -0400 (Wed, 24 May 2006) | 2 lines

 * search_locally(): Use case-insensitive matching.

------------------------------------------------------------------------
r10997 | cbiere | 2006-05-24 23:01:57 -0400 (Wed, 24 May 2006) | 4 lines

 * New feature: The search prefix "local:" allows one to search the (local)
   shared files by either a regular expression or an urn:sha1. Just "local:"
   alone lists all shared files.

------------------------------------------------------------------------
r10996 | cbiere | 2006-05-24 22:57:11 -0400 (Wed, 24 May 2006) | 4 lines

 * udp_connect_back(), udp_send_ping(): Check whether n->outq is set
   because depending on the destination address IPv4 or IPv6 might not be
   available.

------------------------------------------------------------------------
r10995 | cbiere | 2006-05-24 22:55:17 -0400 (Wed, 24 May 2006) | 3 lines

 * gm_setproctitle(): Do not write over object boundaries but scatter the
   title over the argv elements.

------------------------------------------------------------------------
r10994 | cbiere | 2006-05-24 16:57:44 -0400 (Wed, 24 May 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r10993 | cbiere | 2006-05-24 00:43:49 -0400 (Wed, 24 May 2006) | 2 lines

 * Removed dead caches.

------------------------------------------------------------------------
r10992 | cbiere | 2006-05-24 00:28:12 -0400 (Wed, 24 May 2006) | 23 lines

 * search_gui_option_menu_searches_update(): Truncate the title (search string)
   for the menu item to 41 characters to be prevent an extremely wide menu.
 * search_gui_extract_ext(): Don't modify variable whilst passing them
   as parameter. This is bad style and can bite if the function is actually
   a macro.
 * search_gui_clean_r_set(): Removed unnecessary casts.
 * search_gui_parse_text_query():
   * Don't hyphen when surrounded by spaces even though it doesn't matter in
     the end.
   * Directly create a list of rules instead of words first.
 * search_gui_handle_magnet():
   * Use SEARCH_F_LITERAL.
   * Only start a download when we now a "display name" as well.
 * Added search_gui_handle_urn().
 * Added search_gui_query_free().
 * Renamed search_gui_parse_query() to search_gui_handle_query() because
   it does much more than just parsing and has side-effects.
 * search_gui_handle_query():
  * Use the search flags and prevent recursive parsing of the search string.
  * Handle "urn:" like the other prefixes for simpler and more readable code.
  * Catch "local:" too which isn't implemented yet.
  * Return a struct for simpler code.

------------------------------------------------------------------------
r10991 | cbiere | 2006-05-24 00:10:18 -0400 (Wed, 24 May 2006) | 2 lines

 * Added handle_urn().

------------------------------------------------------------------------
r10990 | cbiere | 2006-05-24 00:09:27 -0400 (Wed, 24 May 2006) | 3 lines

 * xml_to_search(): Set SEARCH_F_LITERAL to prevent that the search string
   is interpreted (again).

------------------------------------------------------------------------
r10989 | cbiere | 2006-05-24 00:08:26 -0400 (Wed, 24 May 2006) | 2 lines

 * Added SEARCH_F_LITERAL for preventing interpreting the search string.

------------------------------------------------------------------------
r10988 | cbiere | 2006-05-23 22:56:20 -0400 (Tue, 23 May 2006) | 3 lines

 * gm_setproctitle(): Don't nuke the environment because it can cause
   crashes and is completely unnecessary.

------------------------------------------------------------------------
r10987 | cbiere | 2006-05-23 22:54:21 -0400 (Tue, 23 May 2006) | 2 lines

 * Added utf8_strcpy_max().

------------------------------------------------------------------------
r10986 | cbiere | 2006-05-23 22:53:23 -0400 (Tue, 23 May 2006) | 4 lines

 * Added magnet_set_exact_topic().
 * Export magnet_add_search().
 * magnet_handle_key(): Reuse existing code even if it's not much.

------------------------------------------------------------------------
r10985 | cbiere | 2006-05-22 19:06:29 -0400 (Mon, 22 May 2006) | 5 lines

 * time_advance():
  * Made it a little more readable.
  * Changed delta to gulong to reduce the likeliness for implicit truncation
    by the prototype.

------------------------------------------------------------------------
r10984 | cbiere | 2006-05-22 18:56:59 -0400 (Mon, 22 May 2006) | 2 lines

 * download_push_ack(): Replaced sscanf() with parse_giv().

------------------------------------------------------------------------
r10983 | cbiere | 2006-05-22 18:53:07 -0400 (Mon, 22 May 2006) | 3 lines

 * upload_connect_conf(): Don't send the real filename but just a dummy in
   a GIV request to save bandwidth.

------------------------------------------------------------------------
r10982 | rmanfredi | 2006-05-22 16:27:19 -0400 (Mon, 22 May 2006) | 3 lines

Using "x != 255" can only be understood if x is known to be 8-bit unsigned.
Better use "x < 255" for the casual source reader.

------------------------------------------------------------------------
r10981 | cbiere | 2006-05-22 16:16:20 -0400 (Mon, 22 May 2006) | 2 lines

 * Fixed missing type in variable declaration of "ret".

------------------------------------------------------------------------
r10980 | rmanfredi | 2006-05-22 15:48:45 -0400 (Mon, 22 May 2006) | 2 lines

Ran "metaconfig" again to include new checks and cpp definitions.

------------------------------------------------------------------------
r10979 | rmanfredi | 2006-05-22 15:44:59 -0400 (Mon, 22 May 2006) | 2 lines

Better anti-overflow hop count management.

------------------------------------------------------------------------
r10978 | cbiere | 2006-05-22 15:39:12 -0400 (Mon, 22 May 2006) | 2 lines

 * Added dist modules U/new/d_getifaddrs.U, U/new/i_ifaddrs.U, U/new/i_netif.U.

------------------------------------------------------------------------
r10977 | cbiere | 2006-05-22 15:27:54 -0400 (Mon, 22 May 2006) | 3 lines

 * gm_setproctitle(): Reimplemented after Bill Pringlemeir found a potential
   off-by-one issue. Prepared for using setproctitle() where available.

------------------------------------------------------------------------
r10976 | cbiere | 2006-05-22 12:43:01 -0400 (Mon, 22 May 2006) | 6 lines

 * Added consistency checks.
 * file_info_close(): Use g_hash_table_foreach_remove() for fi_by_size
   because fi_free() will/might be called by following clean up routines
   and those would find a bogus/deallocated GSList in the fi_by_size
   hashtable causing failing consistency checks at the very least.

------------------------------------------------------------------------
r10975 | cbiere | 2006-05-22 12:38:49 -0400 (Mon, 22 May 2006) | 3 lines

 * Show "gnet_addr" and "gnet_port" in the tooltip so that we can see which
   port the peer announced e.g., for manual connecting to it.

------------------------------------------------------------------------
r10974 | cbiere | 2006-05-22 12:37:19 -0400 (Mon, 22 May 2006) | 2 lines

 * local_addr_changed(): Reset our address also if it's an IPv4-mapped address.

------------------------------------------------------------------------
r10973 | cbiere | 2006-05-22 12:36:21 -0400 (Mon, 22 May 2006) | 3 lines

 * socket_create_and_bind():
  * Enable socket option IPV6_V6ONLY for IPv6 sockets if available.

------------------------------------------------------------------------
r10972 | cbiere | 2006-05-22 12:35:00 -0400 (Mon, 22 May 2006) | 2 lines

 * Added gm_slist_is_looping().

------------------------------------------------------------------------
r10971 | cbiere | 2006-05-22 12:34:02 -0400 (Mon, 22 May 2006) | 2 lines

 * Added host_addr_is_ipv4_mapped().

------------------------------------------------------------------------
r10970 | cbiere | 2006-05-22 12:33:31 -0400 (Mon, 22 May 2006) | 2 lines

 * host_addr_to_name(): Fixed compiler warning.

------------------------------------------------------------------------
r10969 | rmanfredi | 2006-05-22 11:33:38 -0400 (Mon, 22 May 2006) | 3 lines

We don't want any overflows on the hop count.  If morons send us UDP packets
with hop=255, that's just fine!

------------------------------------------------------------------------
r10968 | cbiere | 2006-05-21 21:51:57 -0400 (Sun, 21 May 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r10967 | cbiere | 2006-05-21 21:22:09 -0400 (Sun, 21 May 2006) | 4 lines

 * vmsg_send_messages_supported(): This was completey broken as the payload
   pointer was never updated. Thus only the first item was initialized and
   the rest was bogus.

------------------------------------------------------------------------
r10966 | cbiere | 2006-05-21 20:25:47 -0400 (Sun, 21 May 2006) | 2 lines

 * node_add_socket(): Use "forced" for simplicity and less duplication.

------------------------------------------------------------------------
r10965 | cbiere | 2006-05-21 20:23:36 -0400 (Sun, 21 May 2006) | 3 lines

 * Moved definition of socket_addr_t and its functions from core/sockets.c
   to lib/host_addr.h.

------------------------------------------------------------------------
r10964 | cbiere | 2006-05-21 20:20:37 -0400 (Sun, 21 May 2006) | 6 lines

 * Moved socket_addr_set() from core/sockets.c.
 * socket_addr_set(): Set sin_len and sin6_len because some functions might
   require this on platforms which have this struct member.
 * host_addr_to_name(): Use getnameinfo() instead of gethostbyaddr()
   because the latter might lack support for IPv6.

------------------------------------------------------------------------
r10963 | cbiere | 2006-05-21 20:11:30 -0400 (Sun, 21 May 2006) | 3 lines

 * node_add_socket(): Don't prevent connections to private addresses when
   connecting manually.

------------------------------------------------------------------------
r10962 | cbiere | 2006-05-21 20:08:43 -0400 (Sun, 21 May 2006) | 3 lines

 * update_address_information(): Don't show "<none>" if one of the addresses
   is not available; just hide it.

------------------------------------------------------------------------
r10961 | cbiere | 2006-05-21 16:45:31 -0400 (Sun, 21 May 2006) | 2 lines

 * Added dist modules necessary for detection of getifaddrs().

------------------------------------------------------------------------
r10960 | cbiere | 2006-05-21 16:11:22 -0400 (Sun, 21 May 2006) | 3 lines

 * Fixed prototype for host_addr_free_interface_addrs().
 * Fixed host_addr_get_interface_addrs().

------------------------------------------------------------------------
r10959 | cbiere | 2006-05-21 16:07:11 -0400 (Sun, 21 May 2006) | 4 lines

 * local_addr_changed(): When the current IP address is invalid or does not
   match the correct network type, reset it and try to find the correct one
   by looking at all network interfaces.

------------------------------------------------------------------------
r10958 | cbiere | 2006-05-21 14:35:01 -0400 (Sun, 21 May 2006) | 2 lines

 * Added host_addr_get_interface_addrs() and host_addr_free_interface_addrs().

------------------------------------------------------------------------
r10957 | cbiere | 2006-05-21 14:29:56 -0400 (Sun, 21 May 2006) | 3 lines

 * addr_ipv4_changed(), addr_ipv6_changed(): Clear each peer address not just
   the first one.

------------------------------------------------------------------------
r10956 | cbiere | 2006-05-21 14:17:51 -0400 (Sun, 21 May 2006) | 2 lines

* is_local_addr(): Corrected prefix length for site/link local address.

------------------------------------------------------------------------
r10955 | daichik | 2006-05-21 12:05:57 -0400 (Sun, 21 May 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10954 | daichik | 2006-05-21 12:05:07 -0400 (Sun, 21 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10953 | cbiere | 2006-05-20 14:50:29 -0400 (Sat, 20 May 2006) | 4 lines

 * file_info_size_known(), file_info_hash_insert_name_size():
   * Make sure we don't insert transient downloads into these hashtables.
 * fi_free(): Check the hashtables for leaked references to be sure.

------------------------------------------------------------------------
r10952 | cbiere | 2006-05-20 14:47:44 -0400 (Sat, 20 May 2006) | 3 lines

 * download_request(): Added further special handling for browse host
   downloads.

------------------------------------------------------------------------
r10951 | cbiere | 2006-05-20 14:43:23 -0400 (Sat, 20 May 2006) | 2 lines

 * Added atom_gui_free_null().

------------------------------------------------------------------------
r10950 | cbiere | 2006-05-20 13:31:30 -0400 (Sat, 20 May 2006) | 3 lines

 * download_request(): Moved check for "size == 0 && file_size_known" because
   it interferred with browse host downloads.

------------------------------------------------------------------------
r10949 | cbiere | 2006-05-20 13:18:36 -0400 (Sat, 20 May 2006) | 2 lines

 * browse_data_ind(): Check whether the download is still running.

------------------------------------------------------------------------
r10948 | cbiere | 2006-05-20 12:56:56 -0400 (Sat, 20 May 2006) | 2 lines

 * Use atom_*_free_null() because it's good for one's health.

------------------------------------------------------------------------
r10947 | cbiere | 2006-05-20 12:50:12 -0400 (Sat, 20 May 2006) | 2 lines

 * ntp_send_probes(): Don't send probes to any but the configured protcols.

------------------------------------------------------------------------
r10946 | cbiere | 2006-05-20 12:14:36 -0400 (Sat, 20 May 2006) | 5 lines

 * Fixed bug concerning purging of files.
 * Renamed some "fi" to "info" for clarity because "fi" is normally
   of type "file_info_t *" which can be confusing.
 * Fixed fi_gui_get_handle().

------------------------------------------------------------------------
r10945 | cbiere | 2006-05-20 11:28:41 -0400 (Sat, 20 May 2006) | 2 lines

 * Fixed typo in description.

------------------------------------------------------------------------
r10944 | cbiere | 2006-05-20 11:22:06 -0400 (Sat, 20 May 2006) | 5 lines

 * socket_udp_accept(): Return the original recvmsg() return value instead
   of just success/failure.
 * socket_udp_event(): Call socket_udp_accept() multiple times (with an
   upper limit) until the datagram buffer is "empty".

------------------------------------------------------------------------
r10943 | cbiere | 2006-05-20 10:12:50 -0400 (Sat, 20 May 2006) | 3 lines

 * Use recvmsg() even if it there isn't msg_flags. It might still be useful
   for IP_RECVDSTADDR.

------------------------------------------------------------------------
r10942 | cbiere | 2006-05-20 10:02:30 -0400 (Sat, 20 May 2006) | 4 lines

 * gui_create_dlg_faq(): Forgot to append the terminating NUL after
   decoding HTML entities so that there could be non-UTF-8 between
   the current and the previous end of the string.

------------------------------------------------------------------------
r10941 | cbiere | 2006-05-20 09:53:40 -0400 (Sat, 20 May 2006) | 5 lines

 * is_readable():
   * Take advantage of inputevt_data_available() to
     calculate the amount of buffers we should allocate.
   * Minor simplified.

------------------------------------------------------------------------
r10940 | cbiere | 2006-05-20 09:44:43 -0400 (Sat, 20 May 2006) | 3 lines

 * Added inputevt_data_available() to get a hint about how much data is
   buffered for the current event. This works for kqueue only.

------------------------------------------------------------------------
r10939 | cbiere | 2006-05-20 09:39:11 -0400 (Sat, 20 May 2006) | 3 lines

 * node_data_ind(): node_read() returns no error condition. Instead check
   whether the node's status is GTA_NODE_CONNECTED.

------------------------------------------------------------------------
r10938 | daichik | 2006-05-20 09:02:24 -0400 (Sat, 20 May 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10937 | daichik | 2006-05-20 08:49:00 -0400 (Sat, 20 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10936 | cbiere | 2006-05-20 08:15:19 -0400 (Sat, 20 May 2006) | 3 lines

 * download_write_data(): Check whether the download is still running to
   catch download_queue() and return FALSE if it isn't.

------------------------------------------------------------------------
r10935 | cbiere | 2006-05-20 07:33:17 -0400 (Sat, 20 May 2006) | 2 lines

 * Adapted rx_inflate_recv() and rx_chunk_recv() to new interface. 

------------------------------------------------------------------------
r10934 | cbiere | 2006-05-20 07:32:07 -0400 (Sat, 20 May 2006) | 2 lines

 * socket_udp_listen(): Removed unused variable.

------------------------------------------------------------------------
r10933 | cbiere | 2006-05-20 07:28:12 -0400 (Sat, 20 May 2006) | 4 lines

 * socket_create_and_bind(): Moved enabling of SO_REUSEADDR from
	socket_tcp_listen() and socket_udp_listen() into this function
	because Linux needs it before bind().

------------------------------------------------------------------------
r10932 | cbiere | 2006-05-20 07:18:15 -0400 (Sat, 20 May 2006) | 5 lines

 * Added boolean return value to rx_data_t and rx_recv() so that the receiver
   can request a stop (or indicate an error) by returning FALSE.
 * is_readable(): Use bio_readv() so that we can fill multiple buffers in one
   go for less system call overhead and decreased (poll) round-trip.

------------------------------------------------------------------------
r10931 | cbiere | 2006-05-20 07:11:27 -0400 (Sat, 20 May 2006) | 3 lines

 * Reduced BUF_SIZE to 2048 because that's closer the common MTU and thus
   a likely chunk size we'll receive which means less unused buffer overhead.

------------------------------------------------------------------------
r10930 | cbiere | 2006-05-20 07:07:32 -0400 (Sat, 20 May 2006) | 2 lines

 * is_local_addr(): Don't bother with IPv4 resp. IPv6 if it's disabled.

------------------------------------------------------------------------
r10929 | cbiere | 2006-05-20 02:19:36 -0400 (Sat, 20 May 2006) | 3 lines

 * cproxy_build_request(): Send two X-Node headers instead of one with
   two addresses. LimeWire doesn't like it otherwise.

------------------------------------------------------------------------
r10928 | cbiere | 2006-05-20 01:49:00 -0400 (Sat, 20 May 2006) | 8 lines

 * Added explicit IPv6 sockets for TCP and UDP because on many systems this
   is necessary anyway to handle IPv4 and IPv6 at the same time. It's also
   necessary when the bind address isn't the unspecified address. This also
   allows more easily to keep track (or configuration) of the IPv4 and IPv6
   address.
 * download_build_url(): Return NULL if the download address or port is
   invalid.

------------------------------------------------------------------------
r10927 | cbiere | 2006-05-20 01:42:12 -0400 (Sat, 20 May 2006) | 2 lines

 * Removed unnecessary node_udp_gui_show() and node_udp_gui_remove().

------------------------------------------------------------------------
r10926 | cbiere | 2006-05-20 01:40:47 -0400 (Sat, 20 May 2006) | 2 lines

 * Replaced socket_free() with socket_free_null().

------------------------------------------------------------------------
r10925 | cbiere | 2006-05-20 01:37:35 -0400 (Sat, 20 May 2006) | 5 lines

 * Added guc_listen_port() guc_listen_addr() because this is more comfortable
   than fiddling with core properties in the GUI code.
 * Removed guc_node_udp_gui_remove() and guc_node_udp_gui_show() because
   they are unnecessary.

------------------------------------------------------------------------
r10924 | cbiere | 2006-05-20 01:35:17 -0400 (Sat, 20 May 2006) | 3 lines

 * file_info_build_magnet(): Check for NULL because not all downloads gain
   valid URLs.

------------------------------------------------------------------------
r10923 | cbiere | 2006-05-20 01:34:03 -0400 (Sat, 20 May 2006) | 4 lines

 * Corrected parsing of the X-Node header so that we can pickup two
   addresses for hosts that have IPv4 and IPv6.
 * Pickup announced TLS support and pass it on.

------------------------------------------------------------------------
r10922 | cbiere | 2006-05-20 01:30:21 -0400 (Sat, 20 May 2006) | 3 lines

 * Added local_ip6, current_ip6_stamp, average_ip6_uptime, forced_local_ip6,
   bind_to_forced_local_ip6 for better IPv6 support.

------------------------------------------------------------------------
r10921 | cbiere | 2006-05-20 01:28:30 -0400 (Sat, 20 May 2006) | 2 lines

 * ggept_gtkg_ipv6_extract(): Removed now unnecessary #ifdef.

------------------------------------------------------------------------
r10920 | cbiere | 2006-05-20 01:25:44 -0400 (Sat, 20 May 2006) | 2 lines

 * copy_selection_to_clipboard(): Don't set the clipboard text, if url is NULL.

------------------------------------------------------------------------
r10919 | cbiere | 2006-05-20 01:23:45 -0400 (Sat, 20 May 2006) | 2 lines

 * gui_create_dlg_faq(): Convert HTML-entities to the corresponding characters.

------------------------------------------------------------------------
r10918 | cbiere | 2006-05-20 01:21:08 -0400 (Sat, 20 May 2006) | 3 lines

 * Removed IPv4-only short cuts because that's too error-prone and
   causes many #ifdefs.

------------------------------------------------------------------------
r10917 | cbiere | 2006-05-20 01:18:59 -0400 (Sat, 20 May 2006) | 2 lines

 * Export utf8_encode_char().

------------------------------------------------------------------------
r10916 | cbiere | 2006-05-20 01:16:58 -0400 (Sat, 20 May 2006) | 2 lines

 * Added html_decode_entity().

------------------------------------------------------------------------
r10915 | cbiere | 2006-05-20 01:15:13 -0400 (Sat, 20 May 2006) | 2 lines

 * Added src/lib/html.h for HTML-specific stuff.

------------------------------------------------------------------------
r10914 | cbiere | 2006-05-19 13:02:19 -0400 (Fri, 19 May 2006) | 2 lines

 * search_gui_handle_magnet(): Forgot the prefix for urn:sha1 searches.

------------------------------------------------------------------------
r10913 | cbiere | 2006-05-19 12:59:35 -0400 (Fri, 19 May 2006) | 2 lines

 * search_gui_handle_magnet(): Changed statusbar message.

------------------------------------------------------------------------
r10912 | cbiere | 2006-05-19 12:39:28 -0400 (Fri, 19 May 2006) | 5 lines

 * search_gui_handle_magnet():
   * Start searches from magnet as well.
   * Initiate a search by urn:sha1 if there's no source.
   * Initiate a download if we know the urn:sha1 even if there's no source.

------------------------------------------------------------------------
r10911 | cbiere | 2006-05-19 08:31:46 -0400 (Fri, 19 May 2006) | 2 lines

 * Added consistency checks.

------------------------------------------------------------------------
r10910 | cbiere | 2006-05-19 08:26:42 -0400 (Fri, 19 May 2006) | 2 lines

 * buffers_match(): Initialize `b' before accessing it.

------------------------------------------------------------------------
r10909 | cbiere | 2006-05-19 08:18:11 -0400 (Fri, 19 May 2006) | 2 lines

 * Added missing function g_slist_delete_link().

------------------------------------------------------------------------
r10908 | cbiere | 2006-05-18 19:05:40 -0400 (Thu, 18 May 2006) | 3 lines

 * Changed the buffer management so that we do not unnecessarily copy
   downloaded data before writing it to disk.

------------------------------------------------------------------------
r10907 | cbiere | 2006-05-18 18:14:51 -0400 (Thu, 18 May 2006) | 3 lines

 * pmsg_size(): Added const-qualifier.
 * Added pmsg_discard().

------------------------------------------------------------------------
r10906 | cbiere | 2006-05-18 12:04:40 -0400 (Thu, 18 May 2006) | 2 lines

 * Removed some silly code which should not be necessary any longer.

------------------------------------------------------------------------
r10905 | cbiere | 2006-05-18 12:03:04 -0400 (Thu, 18 May 2006) | 2 lines

 * Removed unused property.

------------------------------------------------------------------------
r10904 | cbiere | 2006-05-18 12:02:11 -0400 (Thu, 18 May 2006) | 2 lines

 * Removed unused struct member.

------------------------------------------------------------------------
r10903 | cbiere | 2006-05-18 11:20:05 -0400 (Thu, 18 May 2006) | 2 lines

 * Ripped out embrionic code for historic and never used feature.

------------------------------------------------------------------------
r10902 | cbiere | 2006-05-18 11:14:11 -0400 (Thu, 18 May 2006) | 2 lines

 * Removed unused code.

------------------------------------------------------------------------
r10901 | cbiere | 2006-05-18 11:04:21 -0400 (Thu, 18 May 2006) | 5 lines

 * tm_now_exact():
  * Added comment.
  * Corrected; tv_usec must not be "corrected" if tv_sec didn't change
    but tv_usec increased.

------------------------------------------------------------------------
r10900 | cbiere | 2006-05-18 10:50:14 -0400 (Thu, 18 May 2006) | 4 lines

 * bg_sched_timer():
  * Catch/prevent integer overflows.
  * Catch "special case": ticks and bt->prev_ticks smaller than DELTA_FACTOR.

------------------------------------------------------------------------
r10899 | cbiere | 2006-05-18 10:13:59 -0400 (Thu, 18 May 2006) | 2 lines

 * Corrected style.

------------------------------------------------------------------------
r10898 | cbiere | 2006-05-17 10:41:19 -0400 (Wed, 17 May 2006) | 2 lines

 * socket_udp_extract_dst_addr(): This is the real thing.

------------------------------------------------------------------------
r10897 | cbiere | 2006-05-17 10:33:53 -0400 (Wed, 17 May 2006) | 2 lines

 * socket_udp_extract_dst_addr(): I have mercy upon Linux.

------------------------------------------------------------------------
r10896 | cbiere | 2006-05-17 06:47:49 -0400 (Wed, 17 May 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r10895 | cbiere | 2006-05-17 06:45:29 -0400 (Wed, 17 May 2006) | 5 lines

 * search_gui_handle_magnet(): Improved extraction of filename.
 * search_xml_indent(): Use gm_string_finalize().
 * search_gui_handle_http(): Use url_fix_escape(); unescaping the URL
   would destroy its semantic (e.g., consider & and ?).

------------------------------------------------------------------------
r10894 | cbiere | 2006-05-17 06:41:05 -0400 (Wed, 17 May 2006) | 3 lines

 * Use url_fix_escape() instead of url_escape_special() to prevent nasty
   surprises.

------------------------------------------------------------------------
r10893 | cbiere | 2006-05-17 06:39:11 -0400 (Wed, 17 May 2006) | 3 lines

 * Replaced url_escape_special() with url_fix_escape() because the former
   was rather nonsense. This is used to to fix an incomplete escaping.

------------------------------------------------------------------------
r10892 | cbiere | 2006-05-17 06:36:39 -0400 (Wed, 17 May 2006) | 2 lines

 * config_comment(), magnet_to_string(): Use gm_string_finalize().

------------------------------------------------------------------------
r10891 | cbiere | 2006-05-17 06:33:23 -0400 (Wed, 17 May 2006) | 2 lines

 * Removed unnecessary casts and parentheses.

------------------------------------------------------------------------
r10890 | cbiere | 2006-05-17 06:31:04 -0400 (Wed, 17 May 2006) | 2 lines

 * Added gm_string_finalize().

------------------------------------------------------------------------
r10889 | cbiere | 2006-05-17 02:14:44 -0400 (Wed, 17 May 2006) | 2 lines

 * Corrected prototypes.

------------------------------------------------------------------------
r10888 | cbiere | 2006-05-17 02:13:16 -0400 (Wed, 17 May 2006) | 2 lines

 * Fixed typo in comment.

------------------------------------------------------------------------
r10887 | cbiere | 2006-05-17 02:11:52 -0400 (Wed, 17 May 2006) | 2 lines

 * Removed unnecessary casts.

------------------------------------------------------------------------
r10886 | cbiere | 2006-05-17 02:07:40 -0400 (Wed, 17 May 2006) | 3 lines

 * Use the network RX drivers for support of "chunked" and "deflate" encoded
   transfers i.e., true HTTP/1.1 conformance.

------------------------------------------------------------------------
r10885 | cbiere | 2006-05-17 02:03:05 -0400 (Wed, 17 May 2006) | 3 lines

 * search_gui_handle_magnet(): "uri" was renamed to "path".
 * search_gui_handle_http(): Convert the URL to a magnet the right way.

------------------------------------------------------------------------
r10884 | cbiere | 2006-05-17 01:48:34 -0400 (Wed, 17 May 2006) | 2 lines

 * search_gui_get_magnet(): Use magnet_* instead of doing this manually.

------------------------------------------------------------------------
r10883 | cbiere | 2006-05-17 01:47:28 -0400 (Wed, 17 May 2006) | 2 lines

 * refresh_popups(): Added "popup_search_copy_magnet".

------------------------------------------------------------------------
r10882 | cbiere | 2006-05-17 01:45:46 -0400 (Wed, 17 May 2006) | 4 lines

 * Added magic to fileinfo_t.
 * Replaced some macros with static inline functions.
 * file_info_build_magnet(): Use magnet_* instead of doing this manually.

------------------------------------------------------------------------
r10881 | cbiere | 2006-05-17 01:39:53 -0400 (Wed, 17 May 2006) | 5 lines

 * Replaced macros with static inline functions.
 * Escape '+' as well so that decode(encode(+)) gains '+' instead of a space.
 * Added url_escape_special() for escaping URLs that (may) contain a search
   with parameters after the path.

------------------------------------------------------------------------
r10880 | cbiere | 2006-05-17 01:36:22 -0400 (Wed, 17 May 2006) | 2 lines

 * Added atom_filesize_free_null().

------------------------------------------------------------------------
r10879 | cbiere | 2006-05-17 01:34:44 -0400 (Wed, 17 May 2006) | 2 lines

 * Extended magnet code so that magnets can also be created not just parsed.

------------------------------------------------------------------------
r10878 | cbiere | 2006-05-17 00:45:22 -0400 (Wed, 17 May 2006) | 2 lines

 * Removed ranges because MY SERVER IS IN THAT RANGE.

------------------------------------------------------------------------
r10877 | daichik | 2006-05-16 23:18:49 -0400 (Tue, 16 May 2006) | 2 lines

Minor fixes.

------------------------------------------------------------------------
r10876 | daichik | 2006-05-16 22:16:18 -0400 (Tue, 16 May 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10875 | daichik | 2006-05-16 22:10:27 -0400 (Tue, 16 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10874 | cbiere | 2006-05-16 11:55:48 -0400 (Tue, 16 May 2006) | 2 lines

 * [GTK2] Added feature to generate magnets from search results or downloads.

------------------------------------------------------------------------
r10873 | cbiere | 2006-05-16 11:45:03 -0400 (Tue, 16 May 2006) | 2 lines

 * Moved file_info_hash_insert_name_size() upwards to fix compile issue.

------------------------------------------------------------------------
r10872 | cbiere | 2006-05-16 10:07:33 -0400 (Tue, 16 May 2006) | 2 lines

 * fi_resize(): Add the fileinfo to the hashtables.

------------------------------------------------------------------------
r10871 | cbiere | 2006-05-15 14:06:22 -0400 (Mon, 15 May 2006) | 2 lines

 * Added file_info_build_magnet().

------------------------------------------------------------------------
r10870 | cbiere | 2006-05-15 14:05:21 -0400 (Mon, 15 May 2006) | 2 lines

 * plus_to_space(): Minor optimization.

------------------------------------------------------------------------
r10869 | cbiere | 2006-05-15 08:41:16 -0400 (Mon, 15 May 2006) | 2 lines

 * Include glib-missing.h for GEqualFunc missing in Gtk+ 1.2.

------------------------------------------------------------------------
r10868 | cbiere | 2006-05-15 05:51:07 -0400 (Mon, 15 May 2006) | 2 lines

 * Fixed logic so that files with unknown sizes can be downloaded.

------------------------------------------------------------------------
r10867 | cbiere | 2006-05-15 05:49:35 -0400 (Mon, 15 May 2006) | 3 lines

 * magnet_parse_exact_source(): Slightly modified so that no
   struct magnet_resource is referenced or modified.

------------------------------------------------------------------------
r10866 | cbiere | 2006-05-15 05:45:25 -0400 (Mon, 15 May 2006) | 2 lines

 * Added handle_http() so that plain HTTP URLs are handled as well.

------------------------------------------------------------------------
r10865 | cbiere | 2006-05-15 05:44:36 -0400 (Mon, 15 May 2006) | 3 lines

 * search_gui_handle_magnet(): Ignore a zero/unknown size.
 * Added search_gui_handle_http() for plain HTTP URLs.

------------------------------------------------------------------------
r10864 | cbiere | 2006-05-15 05:42:58 -0400 (Mon, 15 May 2006) | 2 lines

 * Show a question mark in the "Size" column if the size is unknown.

------------------------------------------------------------------------
r10863 | cbiere | 2006-05-15 01:29:09 -0400 (Mon, 15 May 2006) | 2 lines

 * magnet_parse(): Fixed prototype mismatch.

------------------------------------------------------------------------
r10862 | cbiere | 2006-05-15 00:31:35 -0400 (Mon, 15 May 2006) | 3 lines

 * Moved magnet handling code to lib/magnet.[ch]
 * Handle dropped magnet and magnets in the search box exactly the same way.

------------------------------------------------------------------------
r10861 | cbiere | 2006-05-15 00:24:45 -0400 (Mon, 15 May 2006) | 2 lines

 * Use atom_str_free_null().

------------------------------------------------------------------------
r10860 | cbiere | 2006-05-15 00:22:26 -0400 (Mon, 15 May 2006) | 2 lines

 * download_resume(): Don't crash, just cry if the download is queued.

------------------------------------------------------------------------
r10859 | cbiere | 2006-05-15 00:18:43 -0400 (Mon, 15 May 2006) | 5 lines

 * socket_connect_by_name_helper():
  * Pick a random address instead of the first one.
  * Re-create the socket with TLS enabled if the resolved address is in the
    TLS cache.

------------------------------------------------------------------------
r10858 | cbiere | 2006-05-15 00:13:43 -0400 (Mon, 15 May 2006) | 3 lines

 * Added atom_str_free_null() and atom_sha1_free_null() for more comfort,
   safety and less duplication.

------------------------------------------------------------------------
r10857 | cbiere | 2006-05-14 19:07:49 -0400 (Sun, 14 May 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r10856 | cbiere | 2006-05-14 19:03:12 -0400 (Sun, 14 May 2006) | 3 lines

 * search_gui_new_search_full(): Call gtk_tree_sortable_set_sort_column_id();
   maybe this fixes the crashes related to the search results display.

------------------------------------------------------------------------
r10855 | cbiere | 2006-05-14 19:01:01 -0400 (Sun, 14 May 2006) | 5 lines

 * cell_renderer(): Show the country and vendor in the sources column.
 * add_column(), fi_gui_init(): The treeview for the filename aliases
   should not use the custom cell renderer.
 * gui_update_download_server(): Pickup updates of the vendor information.

------------------------------------------------------------------------
r10854 | cbiere | 2006-05-14 17:18:27 -0400 (Sun, 14 May 2006) | 2 lines

 * alloc_dump(): Removed unnecessary cast.

------------------------------------------------------------------------
r10853 | cbiere | 2006-05-14 17:08:57 -0400 (Sun, 14 May 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r10852 | cbiere | 2006-05-14 16:33:26 -0400 (Sun, 14 May 2006) | 3 lines

 * socket_connect_prepare(): Enable TLS automagically if we know the host
   supports it.

------------------------------------------------------------------------
r10851 | cbiere | 2006-05-14 16:32:23 -0400 (Sun, 14 May 2006) | 5 lines

 * upload_request():
  * Record if the host supports TLS except unencrypted incoming connections
    because we don't know whether the announced IP address is correct or
    whether the connection is proxied.

------------------------------------------------------------------------
r10850 | cbiere | 2006-05-14 16:30:50 -0400 (Sun, 14 May 2006) | 8 lines

 * download_requeue(): Don't crash just cry if download is already queued.
 * download_request():
  * Record if the host supports TLS except unencrypted incoming connections
    because we don't know whether the announced IP address is correct or
    whether the connection is proxied.
 * download_send_request():
  * Always update the "host" so that we can see the actual encryption status.

------------------------------------------------------------------------
r10849 | cbiere | 2006-05-14 16:26:07 -0400 (Sun, 14 May 2006) | 3 lines

 * Added node_add_tls_host() and node_supports_tls() to keep track of hosts
   that support TLS.

------------------------------------------------------------------------
r10848 | cbiere | 2006-05-14 16:18:58 -0400 (Sun, 14 May 2006) | 4 lines

 * header_get_feature():
  * Return a boolean success status.
  * Allow NULL pointers for cases where the version doesn't matter.

------------------------------------------------------------------------
r10847 | cbiere | 2006-05-14 16:15:07 -0400 (Sun, 14 May 2006) | 5 lines

 * Changed "hash list" slightly so that the key can be associated with an
   arbitrary data pointer.
 * hash_list_remove(): Return the data associated with the key so that the
   memory can be freed/unreferenced if necessary.

------------------------------------------------------------------------
r10846 | cbiere | 2006-05-14 16:10:38 -0400 (Sun, 14 May 2006) | 3 lines

 * on_tree_view_search_results_click_column(): Fetch the model directly
   from the search context.

------------------------------------------------------------------------
r10845 | cbiere | 2006-05-14 16:09:27 -0400 (Sun, 14 May 2006) | 2 lines

 * fileinfo_numeric_status(): Fixed sorting by status.

------------------------------------------------------------------------
r10844 | cbiere | 2006-05-13 21:52:03 -0400 (Sat, 13 May 2006) | 2 lines

 * [GTK2] Merged all three download panes into a single one.

------------------------------------------------------------------------
r10843 | cbiere | 2006-05-13 18:47:08 -0400 (Sat, 13 May 2006) | 6 lines

 * download_clone():
  * Fixed typo in previous commit which caused a missing atom reference
    and thus crashes.
 * download_source_progress():
  * Return zero if the source is not active because it looks less confusing. 

------------------------------------------------------------------------
r10842 | cbiere | 2006-05-13 18:42:37 -0400 (Sat, 13 May 2006) | 3 lines

 * shared_file_complete_by_sha1():
  * Use deconstify_gchar() to suppress compiler warning with GLib 1.2.

------------------------------------------------------------------------
r10841 | cbiere | 2006-05-13 18:41:07 -0400 (Sat, 13 May 2006) | 2 lines

 * Moved definition of download_check() because it's not only for the core.

------------------------------------------------------------------------
r10840 | cbiere | 2006-05-13 18:29:33 -0400 (Sat, 13 May 2006) | 2 lines

 * Changed assertion macros for less string data overhead.

------------------------------------------------------------------------
r10839 | cbiere | 2006-05-13 18:17:10 -0400 (Sat, 13 May 2006) | 2 lines

 * file_info_unlink(): Added assertion check.

------------------------------------------------------------------------
r10838 | cbiere | 2006-05-11 09:23:30 -0400 (Thu, 11 May 2006) | 3 lines

 * Don't with an error if a storage property e.g. "guid" could not be
   parsed properly. Instead note the failure and keep the current value.

------------------------------------------------------------------------
r10837 | daichik | 2006-05-11 00:15:38 -0400 (Thu, 11 May 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10836 | daichik | 2006-05-10 23:58:10 -0400 (Wed, 10 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10835 | cbiere | 2006-05-09 02:16:57 -0400 (Tue, 09 May 2006) | 2 lines

 * Another vidlock DRM spammer.

------------------------------------------------------------------------
r10834 | cbiere | 2006-05-09 02:05:42 -0400 (Tue, 09 May 2006) | 2 lines

 * Time for breakfast.

------------------------------------------------------------------------
r10833 | cbiere | 2006-05-09 01:52:45 -0400 (Tue, 09 May 2006) | 17 lines

 * urlinfo_hash():
  * Added missing cast, without it the shift-operation is bogus.
 * urlinfo_eq():
  * Don't compare the host addresses first but do the cheaper checks.
 * dmesh_url_parse():
  * Check the sha1 here too.
 * dmesh_raw_add():
 * dmesh_multiple_downloads():
  * Don't call file_info_try_to_swarm_with() or download_auto_new with the
    urn:sha1 as filename; use the existing name instead.
 * dmesh_collect_compact_locations():
  * Fixed for IPv6.
  * Simplified.
 * dmesh_collect_locations():
  * Simplified.
  * Allow missing timestamps.

------------------------------------------------------------------------
r10832 | cbiere | 2006-05-09 01:41:12 -0400 (Tue, 09 May 2006) | 2 lines

 * Updated prototypes.

------------------------------------------------------------------------
r10831 | cbiere | 2006-05-09 01:39:38 -0400 (Tue, 09 May 2006) | 6 lines

 * fi_alias(), file_info_lookup(), file_info_get(): Added const-qualifiers.
 * file_info_try_to_swarm_with():
  * Allow NULL as "file_name" so that the existing filename is used; this
    prevents ugly urn_sha1_[...] filenames during the next session if there's
    no partial file and fileinfo record yet.

------------------------------------------------------------------------
r10830 | cbiere | 2006-05-09 01:36:03 -0400 (Tue, 09 May 2006) | 5 lines

 * Added download_escape_name() for simpler handling of d->escaped_name.
 * download_store():
  * Prevent storing of downloads with custom URIs as it would cause bogus
    requests during the next session.

------------------------------------------------------------------------
r10829 | cbiere | 2006-05-09 01:33:23 -0400 (Tue, 09 May 2006) | 5 lines

 * huge_collect_locations():
  * Added const-qualifier.
  * Don't apply dmesh_collect_locations() to X-Alt any longer; it should not
    be necessary anymore and causes a lot of unnecessary warnings.

------------------------------------------------------------------------
r10828 | cbiere | 2006-05-09 01:31:35 -0400 (Tue, 09 May 2006) | 2 lines

 * Minor indent correction.

------------------------------------------------------------------------
r10827 | cbiere | 2006-05-09 01:30:11 -0400 (Tue, 09 May 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r10826 | cbiere | 2006-05-08 17:54:52 -0400 (Mon, 08 May 2006) | 2 lines

 * Never call dmesh_add() if d->uri is set because it would add a wrong URL.

------------------------------------------------------------------------
r10825 | cbiere | 2006-05-08 17:48:58 -0400 (Mon, 08 May 2006) | 11 lines

 * download_queue_hold_delay_v():
  * Always use time_advance() instead of a raw '+' for time_t.
 * download_bad_source():
  * Don't use dmesh_remove() if we used requested the file by a custom
    URI because it would add a wrong URI to dmesh_ban.
 * update_available_ranges():
  * Ignore "X-Available-Range: bytes".
 * download_bad_source():
  * Accept "Content-Length: 0".
  * Allow download_convert_to_urires() but only if we did not use a custom URI.

------------------------------------------------------------------------
r10824 | cbiere | 2006-05-07 21:16:42 -0400 (Sun, 07 May 2006) | 2 lines

 * Added const-qualifiers.

------------------------------------------------------------------------
r10823 | cbiere | 2006-05-07 21:14:48 -0400 (Sun, 07 May 2006) | 3 lines

 * download_new_uri(), download_new():
  * The SHA-1 is optional.

------------------------------------------------------------------------
r10822 | cbiere | 2006-05-07 20:51:38 -0400 (Sun, 07 May 2006) | 2 lines

 * If "display name" is missing use the basename of the first URI - if any.

------------------------------------------------------------------------
r10821 | cbiere | 2006-05-07 20:11:05 -0400 (Sun, 07 May 2006) | 4 lines

 * huge_collect_locations():
  * Check X-Alt for non-compact alternate locations as well. It's only to our
    advantage.

------------------------------------------------------------------------
r10820 | cbiere | 2006-05-07 20:09:18 -0400 (Sun, 07 May 2006) | 7 lines

 * download_send_request():
  * Use the hostname for the HTTP "Host" header if available instead of the
    raw address.
 * download_new(), download_new_uri():
  * If a hostname is provided, use the DNS resolver and start the download
    from the callback function.

------------------------------------------------------------------------
r10819 | cbiere | 2006-05-07 20:03:59 -0400 (Sun, 07 May 2006) | 3 lines

 * magnet_parse_exact_source(), handle_magnet():
  * Handle "urn:bitprint" as well.

------------------------------------------------------------------------
r10818 | cbiere | 2006-05-07 16:37:13 -0400 (Sun, 07 May 2006) | 2 lines

 * Bumped date.

------------------------------------------------------------------------
r10817 | daichik | 2006-05-07 12:15:07 -0400 (Sun, 07 May 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10816 | cbiere | 2006-05-07 08:39:11 -0400 (Sun, 07 May 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r10815 | cbiere | 2006-05-07 08:02:48 -0400 (Sun, 07 May 2006) | 31 lines

 * lib/misc.[ch]:
  * Added short_time_ascii() as untranslated variant of short_time().
  * Added parameter to compact_size(), short_size() etc. to use metric
    units or base2.
  * control_escape():
   * Drop the carriage return instead of escaping it in CRLF sequences
     to get rid of the trailing \0x0D when dumping (HTTP) headers for
     logging purposes.
  * Replaced CHAR_IS_SAFE with static inline function char_is_safe().
 * core/sockets.c:
  * Add "tls/1.0" to the X-Feature headers for gnutella, up- and downloads
    so that we can switch to encryption for follow-up connections.
  * socket_read(): Use short_time_ascii() because the receiver might not
    understand Swahili.
 * core/downloads.[ch]:
   * Added download_check() which should be used instead of
     "g_assert(d != NULL);" for consistency checks.
   * Added download_alloc() and download_free() for magic handling.
 * has_same_download():
   * Fixed bug: If we know the SHA-1, equivalent filenames are irrelevant.
   * Take the filesize into account as well, if we don't know the SHA-1.
 * ui/gtk/settings.c():
   * Added display_metric_units_changed() which listens to
     PROP_DISPLAY_METRIC_UNITS so that we don't have to go through the
     whole property system to get the current value.
   * show_metric_units(): Return the cached value of PROP_DISPLAY_METRIC_UNITS.
 * ui/gtk/gtk2/gnet_stats.c:
   Cleared gnet_stats_update_flowc() and gnet_stats_update_recv() because
   this was just unreadable broken crap.
 * Otherwise: Use show_metric_units() to respect the user preference.

------------------------------------------------------------------------
r10814 | cbiere | 2006-05-07 07:05:01 -0400 (Sun, 07 May 2006) | 2 lines

 * Added property "display_metric_units" for those who prefer the power of ten.

------------------------------------------------------------------------
r10813 | cbiere | 2006-05-07 07:01:49 -0400 (Sun, 07 May 2006) | 3 lines

 * Added checkbutton "Show _metric units" in Preferences->User-Interface
   for all you KiBi haters.

------------------------------------------------------------------------
r10812 | cbiere | 2006-05-07 06:52:38 -0400 (Sun, 07 May 2006) | 4 lines

 * process_rdf_description():
  * Tagged string as translatable.
  * Slighty simplified.

------------------------------------------------------------------------
r10811 | cbiere | 2006-05-07 06:50:21 -0400 (Sun, 07 May 2006) | 2 lines

 * recurse_scan(): Replaced non-standard construct finding the string end.

------------------------------------------------------------------------
r10810 | cbiere | 2006-05-07 06:49:19 -0400 (Sun, 07 May 2006) | 2 lines

 * header_features_add(): Added const-qualifier.

------------------------------------------------------------------------
r10809 | cbiere | 2006-05-06 22:17:56 -0400 (Sat, 06 May 2006) | 2 lines

 * Time for a snack.

------------------------------------------------------------------------
r10808 | cbiere | 2006-05-06 22:15:55 -0400 (Sat, 06 May 2006) | 2 lines

 * Updated translation by Lorenzo Gaifas.

------------------------------------------------------------------------
r10807 | cbiere | 2006-05-06 21:58:59 -0400 (Sat, 06 May 2006) | 12 lines

 * config_comment():
  * Rewritten; the returned string is now newly allocated because configuration
    comments can be quite long especially if not ASCII and any fixed limit
    would be likely to small or execessively large. The previous code was not
    allocation free anyway and used more memory.
  * Make sure all comment lines start with a hash. The case of a newline
    character inside the comment text was not handled in the previous code
    causing bogus lines in the configuration.
 * prop_load_from_file():
  * Skip over too long lines.
  * Use skip_ascii_*().

------------------------------------------------------------------------
r10806 | cbiere | 2006-05-06 19:43:53 -0400 (Sat, 06 May 2006) | 2 lines

 * Added skip_ascii_non_spaces().

------------------------------------------------------------------------
r10805 | cbiere | 2006-05-06 15:54:44 -0400 (Sat, 06 May 2006) | 5 lines

 * gui_create_dlg_about():
  * Try to convert the contributors' names for Gtk+ 1.2 so that they are
    at least fully readable when using UTF-8, ISO-8859-1 or compatible
    character sets.

------------------------------------------------------------------------
r10804 | cbiere | 2006-05-06 15:39:24 -0400 (Sat, 06 May 2006) | 3 lines

 * Added translators to the list of contributors in the "About" dialogue if
   not already mentioned otherwise.

------------------------------------------------------------------------
r10803 | cbiere | 2006-05-06 15:36:46 -0400 (Sat, 06 May 2006) | 20 lines

 * lib/misc.[ch]:
  * Added parameter names to prototypes so that it's easier to see what
    the parameter's use is.
  * Added file_does_not_exist() which explicitely checks for ENOENT.
  * unique_filename():
   * Fixed bug: The optional extension was added before instead of after the
     unique salt e.g., "example.txt.01" instead of "example.01.txt".
   * Added callback parameter "name_is_uniq" that can be used to check
     for the uniqueness of the create name independent of the filesystem
     namespace.
   * Clean-up for better readability.
 * core/fileinfo.c:
  * file_info_new_outname(): Use unique_filename() instead doing almost the
    same again here. Added file_info_name_is_uniq() and extended
    unique_filename() slightly for this purpose.
 * Others:
  * Renamed parameters/variables called "basename" because this could clash
    with POSIX function of the same name.
  * Updated the use of unique_filename().

------------------------------------------------------------------------
r10802 | cbiere | 2006-05-05 10:48:25 -0400 (Fri, 05 May 2006) | 2 lines

 * Get the fuck out of here.

------------------------------------------------------------------------
r10801 | cbiere | 2006-05-04 17:21:21 -0400 (Thu, 04 May 2006) | 3 lines

 * search_gui_create_record():
  * Checked rc->flags for SR_SPAM before it was initialized.

------------------------------------------------------------------------
r10800 | cbiere | 2006-05-04 17:11:53 -0400 (Thu, 04 May 2006) | 12 lines

 * get_results_set():
  * Mark single records as spam, not the whole set for accurate information
    when browsing a host.
  * Renamed "e" to "endptr".
  * Minor simplification.
 * search_gui_create_record():
  * Prepend spam items with "<SPAM> ". This is for browsing hosts.
 * if/core/search.h:
  * Changed macro constants to enums.
  * Removed ST_SPAM.
  * Added SR_SPAM.

------------------------------------------------------------------------
r10799 | rmanfredi | 2006-05-02 02:29:43 -0400 (Tue, 02 May 2006) | 5 lines

Fixed d_socker_get.U: the $ldflags variable cannot hold any library, only
linker flags.  The unit therefore exports $sockercflags and $sockerldflags
for the Makefile files to use.
Added $sockercflags and $sockerldflags to src/Jmakefile and regenerated files.

------------------------------------------------------------------------
r10798 | cbiere | 2006-05-01 14:49:37 -0400 (Mon, 01 May 2006) | 3 lines

 * Changed order of arguments for compiling the test program so that it
   (hopefully) works with the linker on IRIX.

------------------------------------------------------------------------
r10797 | cbiere | 2006-05-01 14:43:41 -0400 (Mon, 01 May 2006) | 2 lines

 * Mahlzeit.

------------------------------------------------------------------------
r10796 | cbiere | 2006-05-01 09:55:56 -0400 (Mon, 01 May 2006) | 2 lines

 * Swapped sorting direction for consistency with the rest of the GUI and Gtk+.

------------------------------------------------------------------------
r10795 | cbiere | 2006-04-30 22:51:25 -0400 (Sun, 30 Apr 2006) | 2 lines

 * tx_deflate_close(): Make sure we don't send the GZIP trailer more than once.

------------------------------------------------------------------------
r10794 | cbiere | 2006-04-30 22:44:46 -0400 (Sun, 30 Apr 2006) | 6 lines

 * tx_deflate_close():
  * The gzip trailer which contains the CRC-32 and uncompressed size was not
    send due to not waiting for the flush. This may also explain the problems
    with AppleWebKit (Safari). Discovered by downloading the browse host
    data and noticing that gzip -d complained.

------------------------------------------------------------------------
r10793 | cbiere | 2006-04-30 12:37:07 -0400 (Sun, 30 Apr 2006) | 2 lines

 * ignore_is_requested(): Ignore "filename" and "size" if sha1 is provided.

------------------------------------------------------------------------
r10792 | cbiere | 2006-04-30 12:31:32 -0400 (Sun, 30 Apr 2006) | 2 lines

 * search_gui_menu_select(): Removed unnecessary line break.

------------------------------------------------------------------------
r10791 | cbiere | 2006-04-29 13:41:07 -0400 (Sat, 29 Apr 2006) | 2 lines

 * Added Lorenzo Gaifas to list of translators.

------------------------------------------------------------------------
r10790 | cbiere | 2006-04-29 13:35:11 -0400 (Sat, 29 Apr 2006) | 4 lines

 * More spam.
 * Added MD5 sums for some executables because they are useful to find
   additional information about them.

------------------------------------------------------------------------
r10789 | daichik | 2006-04-29 01:10:54 -0400 (Sat, 29 Apr 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10788 | daichik | 2006-04-29 00:56:19 -0400 (Sat, 29 Apr 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10787 | cbiere | 2006-04-28 09:40:33 -0400 (Fri, 28 Apr 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r10786 | rmanfredi | 2006-04-27 01:46:18 -0400 (Thu, 27 Apr 2006) | 2 lines

Regenerated Configure to include socker tests.

------------------------------------------------------------------------
r10785 | cbiere | 2006-04-26 22:47:50 -0400 (Wed, 26 Apr 2006) | 2 lines

 * Updated.

------------------------------------------------------------------------
r10784 | cbiere | 2006-04-26 22:46:54 -0400 (Wed, 26 Apr 2006) | 2 lines

 * Oishii desu yo.

------------------------------------------------------------------------
r10783 | cbiere | 2006-04-26 19:55:56 -0400 (Wed, 26 Apr 2006) | 2 lines

 * socket_set_accept_filters(): Destroyed copy&paste evidence.

------------------------------------------------------------------------
r10782 | cbiere | 2006-04-26 19:20:27 -0400 (Wed, 26 Apr 2006) | 4 lines

 * Added socket_set_accept_filters() which utilizes TCP_DEFER_ACCEPT (Linux)
   and/or SO_ACCEPTFILTER (FreeBSD) if available to reduce waste of socket
   resources.

------------------------------------------------------------------------
r10781 | cbiere | 2006-04-26 19:14:59 -0400 (Wed, 26 Apr 2006) | 2 lines

 * Added PROP_TCP_DEFER_ACCEPT_TIMEOUT with a default of 10 (seconds).

------------------------------------------------------------------------
r10780 | cbiere | 2006-04-26 19:09:51 -0400 (Wed, 26 Apr 2006) | 2 lines

 * Fixed compiler warnings.

------------------------------------------------------------------------
r10779 | cbiere | 2006-04-25 15:17:55 -0400 (Tue, 25 Apr 2006) | 2 lines

 * Added U/new/d_socker_get.U.

------------------------------------------------------------------------
r10778 | cbiere | 2006-04-25 14:42:54 -0400 (Tue, 25 Apr 2006) | 2 lines

 * Spam 4tw.

------------------------------------------------------------------------
r10777 | cbiere | 2006-04-25 12:52:37 -0400 (Tue, 25 Apr 2006) | 2 lines

 * Fixed format mismatches.

------------------------------------------------------------------------
r10776 | daichik | 2006-04-25 10:56:41 -0400 (Tue, 25 Apr 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10775 | cbiere | 2006-04-24 19:40:43 -0400 (Mon, 24 Apr 2006) | 2 lines

 * Added Italian translation provided by Lorenzo Gaifas.

------------------------------------------------------------------------
r10774 | cbiere | 2006-04-24 07:02:49 -0400 (Mon, 24 Apr 2006) | 2 lines

 * More spam.

------------------------------------------------------------------------
r10773 | cbiere | 2006-04-24 07:00:59 -0400 (Mon, 24 Apr 2006) | 2 lines

 * Added DRM spammers affiliated with vidlock spreading "WM" files.

------------------------------------------------------------------------
r10772 | rmanfredi | 2006-04-23 03:47:32 -0400 (Sun, 23 Apr 2006) | 3 lines

Fixed errors spotted by metalint.
Avoid adding socker's cc and ld flags at each Configure run.

------------------------------------------------------------------------
r10771 | cbiere | 2006-04-22 21:52:53 -0400 (Sat, 22 Apr 2006) | 2 lines

 * Added dist module to detect socker_get() support.

------------------------------------------------------------------------
r10770 | cbiere | 2006-04-22 21:30:36 -0400 (Sat, 22 Apr 2006) | 3 lines

 * Make sure the "firewalled" state is re-evualate whenever a property
   of the listening sockets changed or they are disabled.

------------------------------------------------------------------------
r10769 | cbiere | 2006-04-22 21:28:03 -0400 (Sat, 22 Apr 2006) | 2 lines

 * Prepared native support for Socker.

------------------------------------------------------------------------
r10768 | cbiere | 2006-04-22 21:25:31 -0400 (Sat, 22 Apr 2006) | 4 lines

 * node_became_firewalled(), node_became_udp_firewalled():
  * Increased the maximum amount of connect back requests because not all
    connected peers might reply.

------------------------------------------------------------------------
r10767 | cbiere | 2006-04-22 19:22:17 -0400 (Sat, 22 Apr 2006) | 2 lines

 * Typo fix in comment.

------------------------------------------------------------------------
r10766 | cbiere | 2006-04-22 19:20:37 -0400 (Sat, 22 Apr 2006) | 3 lines

 * Fixed a problem which caused a reset of the listening port to zero when
   the socket properties changed.

------------------------------------------------------------------------
r10765 | cbiere | 2006-04-22 19:19:16 -0400 (Sat, 22 Apr 2006) | 3 lines

 * Use an enum for the atom type instead of macro definitions.
 * Use size_t instead of gint where appropriate.

------------------------------------------------------------------------
r10764 | cbiere | 2006-04-22 19:17:51 -0400 (Sat, 22 Apr 2006) | 3 lines

 * host_addr_port_to_string_buf():
  * 32-bit values are more than sufficient here. 

------------------------------------------------------------------------
r10763 | rmanfredi | 2006-04-22 16:57:17 -0400 (Sat, 22 Apr 2006) | 4 lines

Make sure we set the "last_update" field after finishing the moving to ensure
the entry will linger the proper amount of time, as determined by the
"entry_removal_timeout" property.

------------------------------------------------------------------------
r10762 | cbiere | 2006-04-22 11:07:37 -0400 (Sat, 22 Apr 2006) | 2 lines

 * Updated list of UHCs.

------------------------------------------------------------------------
r10753 | cbiere | 2006-04-21 15:34:39 -0400 (Fri, 21 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10752 | cbiere | 2006-04-21 00:50:28 -0400 (Fri, 21 Apr 2006) | 2 lines

 * too_big_for_gnutella(): Compiler-Warning-Limbo.

------------------------------------------------------------------------
r10751 | cbiere | 2006-04-21 00:33:47 -0400 (Fri, 21 Apr 2006) | 2 lines

 * too_big_for_gnutella(): Got rid of filthy casting.

------------------------------------------------------------------------
r10750 | cbiere | 2006-04-21 00:21:19 -0400 (Fri, 21 Apr 2006) | 2 lines

 * Take advantage of seek_to_filepos().

------------------------------------------------------------------------
r10749 | cbiere | 2006-04-21 00:11:09 -0400 (Fri, 21 Apr 2006) | 8 lines

 * Use a filesize_t atom instead of a uint64 atom because filesize_t might
   not be the same.
 * file_info_fd_store_binary(): Safer handling of fi->size.
 * list_clone_shift():
  * Moved code to create a random offset to separate function and replaced
    random_value() with random_raw().
 * Take advantage of seek_to_filepos().

------------------------------------------------------------------------
r10748 | cbiere | 2006-04-20 23:59:06 -0400 (Thu, 20 Apr 2006) | 4 lines

 * Added ATOM_FILESIZE because filesize_t is not necessarily guint64.
 * Replaced atom_*_get() and atom_*_free() macros with static inline functions
   for slightly better type-safety.

------------------------------------------------------------------------
r10747 | cbiere | 2006-04-20 23:53:04 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Added seek_to_filepos().

------------------------------------------------------------------------
r10746 | cbiere | 2006-04-20 20:08:15 -0400 (Thu, 20 Apr 2006) | 5 lines

 * Moved some common code to reverse_strlcpy().
 * Added off_t_to_string_buf() and off_t_to_string().
 * Added time_t_to_string_buf() and time_t_to_string().
 * Fixed type of the value parameter for uint32_to_string_buf().

------------------------------------------------------------------------
r10745 | cbiere | 2006-04-20 20:03:26 -0400 (Thu, 20 Apr 2006) | 3 lines

 * Added MAX_INT_VAL() and OFF_T_MAX.
 * Added missing parentheses around TIME_T_MAX.

------------------------------------------------------------------------
r10744 | cbiere | 2006-04-20 17:37:35 -0400 (Thu, 20 Apr 2006) | 2 lines

 * More 64-bit cleanness fixes.

------------------------------------------------------------------------
r10743 | cbiere | 2006-04-20 17:04:20 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Fixed bogus prototypes.

------------------------------------------------------------------------
r10742 | cbiere | 2006-04-20 16:34:16 -0400 (Thu, 20 Apr 2006) | 6 lines

 * resolve_hostname():
  * gethostbyname():
    * Check whether he->h_addr_list is NULL, just in case.
    * Accidently picked the first item multiple times instead of the one
      at the current index.

------------------------------------------------------------------------
r10741 | cbiere | 2006-04-20 02:09:04 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Fixed compilation issues for IPv4-only platforms.

------------------------------------------------------------------------
r10740 | cbiere | 2006-04-20 01:55:45 -0400 (Thu, 20 Apr 2006) | 6 lines

 * resolve_hostname():
  * Manually check whether gethostbyname() returned addresses of the
    desired address family.
  * Fixed member name.
  * Fixed function name.

------------------------------------------------------------------------
r10739 | cbiere | 2006-04-20 01:40:34 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Updated users of the DNS resolver interface.

------------------------------------------------------------------------
r10738 | cbiere | 2006-04-20 01:37:04 -0400 (Thu, 20 Apr 2006) | 6 lines

 * Added name_to_single_host_addr().
 * Changed name_to_host_addr() to resolve a list of all gathered addresses
   and added a "net" parameter to limit lookups to the given network family.
 * Added net_type_to_af() and net_type_to_pf() to convert NET_TYPE_* to
   AF_* resp. PF_* constants.

------------------------------------------------------------------------
r10737 | cbiere | 2006-04-20 01:34:12 -0400 (Thu, 20 Apr 2006) | 3 lines

 * prop_parse_ip():
  * Accept "<none>" because that's how zero_host_addr is stored.

------------------------------------------------------------------------
r10736 | cbiere | 2006-04-20 01:32:53 -0400 (Thu, 20 Apr 2006) | 7 lines

 * Reduced caching time to 300 to 60 seconds.
 * Splitted requests and responses to reduce the amount of unnecessary
   data shoved back and forth.
 * Changed callback so that a hostname can resolve to multiple addresses.
 * adns_cache_entry_t:
  * Support a variable number of addresses instead of just one.

------------------------------------------------------------------------
r10735 | cbiere | 2006-04-20 01:24:03 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Added settings_dns_net().

------------------------------------------------------------------------
r10734 | cbiere | 2006-04-20 01:21:12 -0400 (Thu, 20 Apr 2006) | 3 lines

 * hash_list_length(): Changed return type to unsigned int instead of signed.
 * hash_list_regression(): Ensure that "len" is non-negative.

------------------------------------------------------------------------
r10733 | cbiere | 2006-04-20 01:18:30 -0400 (Thu, 20 Apr 2006) | 2 lines

 * guid_random_fill(): Use random_raw() instead of random_value().

------------------------------------------------------------------------
r10732 | cbiere | 2006-04-20 01:08:05 -0400 (Thu, 20 Apr 2006) | 2 lines

 * Added random_raw().

------------------------------------------------------------------------
r10731 | cbiere | 2006-04-18 18:31:30 -0400 (Tue, 18 Apr 2006) | 4 lines

 * buffers_add_read(), buffers_strip_leading():
  * Cast "iov_base" of "struct iov" to (gchar *) before applying
    pointer arithmetic.

------------------------------------------------------------------------
r10730 | cbiere | 2006-04-18 18:19:31 -0400 (Tue, 18 Apr 2006) | 29 lines

 * struct getline:
  * Use size_t instead of guint.
 * getline_str():
  * Added a const-qualifier to the return type. gwcache.c is the only
    user which actually needs to modify the string.
 * getline_read():
  * Return an enum type instead of a plain gint.
  * Use size_t instead of gint.
  * Slightly simplified.

 * socket_read():
  * Show banlimit as human-readable date.
 * socket_udp_accept():
  * Dump the destination address only if it differs from the previous or
    the debug level is higher than 1.

 * download_check_status():
  * Mark the source as bad if the return status is not proper HTTP and
    this isn't a follow-up request.
 * download_request():
  * Use time_advance() for time_t instead of plain '+'.
  * Show a message if the server sent an unparseable Content-Length header.

 * upload_request():
  * Don't modify the request line, parse it read-only.

 * Otherwise: Adapted code to changes of getline.


------------------------------------------------------------------------
r10729 | cbiere | 2006-04-18 17:43:14 -0400 (Tue, 18 Apr 2006) | 3 lines

 * Added const qualifiers where possible.
 * Use size_t instead of guint or gint if appropriate.

------------------------------------------------------------------------
r10728 | cbiere | 2006-04-18 17:38:45 -0400 (Tue, 18 Apr 2006) | 3 lines

 * Added a column "Route" to the search results which shows whether a result
   arrived over TCP or UDP, the last hop, the TTL and the hops count.

------------------------------------------------------------------------
r10727 | cbiere | 2006-04-18 17:35:19 -0400 (Tue, 18 Apr 2006) | 3 lines

 * get_results_set():
  * Copy TTL and hops count from the header to the result set.

------------------------------------------------------------------------
r10726 | rmanfredi | 2006-04-18 17:34:46 -0400 (Tue, 18 Apr 2006) | 2 lines

Ran "metaconfig" again.

------------------------------------------------------------------------
r10725 | cbiere | 2006-04-18 17:33:56 -0400 (Tue, 18 Apr 2006) | 5 lines

 * Added search_gui_get_route().
 * search_matched():
   * UDP/TCP and routing information are moved to dedicated column "Route"
     from the "Info" column.

------------------------------------------------------------------------
r10724 | cbiere | 2006-04-18 17:31:13 -0400 (Tue, 18 Apr 2006) | 4 lines

 * struct gnet_results_set:
  * Added members "hops" and "ttl".
  * Sorted members from largest to smallest for compactness.

------------------------------------------------------------------------
r10723 | cbiere | 2006-04-18 17:29:13 -0400 (Tue, 18 Apr 2006) | 3 lines

 * str_chomp():
  * Changed the return type and type of the length parameter to size_t.

------------------------------------------------------------------------
r10722 | cbiere | 2006-04-18 17:27:47 -0400 (Tue, 18 Apr 2006) | 3 lines

 * bit_array_flip():
  * Added return value.

------------------------------------------------------------------------
r10721 | cbiere | 2006-04-18 17:26:25 -0400 (Tue, 18 Apr 2006) | 3 lines

 * spam_load():
  * Use bit_array_t instead of an array of chars.

------------------------------------------------------------------------
r10720 | cbiere | 2006-04-18 17:24:45 -0400 (Tue, 18 Apr 2006) | 3 lines

 * parq_upload_load_queue():
  * Use bit_array_t instead of array of chars.

------------------------------------------------------------------------
r10719 | cbiere | 2006-04-18 17:22:07 -0400 (Tue, 18 Apr 2006) | 2 lines

 * Added src/lib/bit_array.h.

------------------------------------------------------------------------
r10718 | cbiere | 2006-04-18 17:03:52 -0400 (Tue, 18 Apr 2006) | 3 lines

 * listen_port_changed():
  * Use bit_array_* instead of the manual code.

------------------------------------------------------------------------
r10717 | cbiere | 2006-04-18 17:02:35 -0400 (Tue, 18 Apr 2006) | 2 lines

 * Moved bit array code from lib/inputevt.c to a dedicated file bit_array.h

------------------------------------------------------------------------
r10716 | cbiere | 2006-04-18 17:01:08 -0400 (Tue, 18 Apr 2006) | 2 lines

 * Moved bit array code from lib/inputevt.c a dedicated file bit_array.h.

------------------------------------------------------------------------
r10715 | cbiere | 2006-04-18 15:56:06 -0400 (Tue, 18 Apr 2006) | 3 lines

 * node_get_status():
   * Copy the "n_spam" member too.

------------------------------------------------------------------------
r10714 | cbiere | 2006-04-18 15:48:30 -0400 (Tue, 18 Apr 2006) | 2 lines

Itadekimasu!

------------------------------------------------------------------------
r10713 | cbiere | 2006-04-17 20:21:42 -0400 (Mon, 17 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10712 | cbiere | 2006-04-17 11:51:21 -0400 (Mon, 17 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10711 | daichik | 2006-04-17 10:37:27 -0400 (Mon, 17 Apr 2006) | 4 lines

* Updated.
* Bump the version up.
* Discarded an obsolete string.

------------------------------------------------------------------------
r10710 | cbiere | 2006-04-17 09:16:54 -0400 (Mon, 17 Apr 2006) | 2 lines

 * Show a spam counter per node.

------------------------------------------------------------------------
r10709 | cbiere | 2006-04-16 10:35:43 -0400 (Sun, 16 Apr 2006) | 8 lines

 * Added bind_to_forced_local_ip with FALSE as default for
   backwards-compatibility.
 * listen_port_changed():
  * Only use the forced local address as bind address if it's actually
    valid and if "bind_to_forced_local_ip" is TRUE because the forced
    address may not work with bind() behind a NAT as it corresponds to
    no interface.

------------------------------------------------------------------------
r10708 | cbiere | 2006-04-16 10:21:09 -0400 (Sun, 16 Apr 2006) | 3 lines

 * socket_tcp_listen(), socket_udp_listen():
  * Don't translate the bind address, the resulting address would be wrong.

------------------------------------------------------------------------
r10707 | cbiere | 2006-04-16 09:42:12 -0400 (Sun, 16 Apr 2006) | 2 lines

 * Re-create the sockets if "force_local_ip" or "forced_local_ip" change.

------------------------------------------------------------------------
r10706 | cbiere | 2006-04-16 09:15:47 -0400 (Sun, 16 Apr 2006) | 4 lines

 * listen_port_changed(): If "force_local_ip" is TRUE, use "forced_local_addr"
   as address for bind() instead of the unspecified address. This is especially
   useful to run multiple instances on different interfaces.

------------------------------------------------------------------------
r10705 | cbiere | 2006-04-16 05:57:29 -0400 (Sun, 16 Apr 2006) | 2 lines

 * Use is_temporary_error().

------------------------------------------------------------------------
r10704 | cbiere | 2006-04-16 05:55:59 -0400 (Sun, 16 Apr 2006) | 3 lines

 * Added is_temporary_error(): Use this to check for EAGAIN, EWOULDBLOCK
   and EINTR because the handling of these is usually the same.

------------------------------------------------------------------------
r10703 | cbiere | 2006-04-16 05:04:23 -0400 (Sun, 16 Apr 2006) | 4 lines

 * Use socket_listen_port() instead of the property "listen_port" so that
   we don't announce a non-zero port even though the socket is not active
   currently.

------------------------------------------------------------------------
r10702 | cbiere | 2006-04-16 04:50:56 -0400 (Sun, 16 Apr 2006) | 4 lines

 * Use socket_listen_port() instead of the property "listen_port" so that
   we don't announce a non-zero port even though the socket is not active
   currently.

------------------------------------------------------------------------
r10701 | cbiere | 2006-04-16 04:42:58 -0400 (Sun, 16 Apr 2006) | 14 lines

 * Properties:
  * Changed type "IP" so that it uses host_addr_t instead of a raw guint32.
  * PROP_LOCAL_IP, PROP_FORCE_LOCAL_IP, PROP_IPV6_TRT_PREFIX, PROP_PROXY_ADDR:
    Changed type from string to IP so that the values don't have to be
    parsed and cached manually, the property framework does this.
 * string_to_host_addr():
  * Return a boolean indicating success or failure and return the parsed
    address through a given pointer if requested. This it's easier to
    differ between "0.0.0.0", "::" and unparseable addresses.
 * listen_port_changed():
  * Don't reset the port number to zero if the socket(s) could not be
    created. This often a temporary problem or accident which should not
    affect the configuration permantly.

------------------------------------------------------------------------
r10700 | cbiere | 2006-04-16 02:17:59 -0400 (Sun, 16 Apr 2006) | 2 lines

 * hostiles_retrieve(): Differ between global and private file in the warning.

------------------------------------------------------------------------
r10699 | cbiere | 2006-04-15 20:25:17 -0400 (Sat, 15 Apr 2006) | 3 lines

 * Fixed typo in comment.
 * Removed unnecessary casts.

------------------------------------------------------------------------
r10698 | cbiere | 2006-04-15 20:23:57 -0400 (Sat, 15 Apr 2006) | 3 lines

 * socket_accept():
  * Fixed typo which caused that guess_local_ip() was never called from here.

------------------------------------------------------------------------
r10697 | cbiere | 2006-04-15 20:21:36 -0400 (Sat, 15 Apr 2006) | 5 lines

 * Changed G_LIST_FOREACH() and G_SLIST_FOREACH() so that they don't have
   a user_data parameter and added G_LIST_FOREACH_WITH_DATA()
   and G_SLIST_FOREACH_WITH_DATA() for cases where a user_data parameter
   is necessary.

------------------------------------------------------------------------
r10696 | cbiere | 2006-04-15 16:51:23 -0400 (Sat, 15 Apr 2006) | 10 lines

 * Renamed ipv6_trt_addr to socket_ipv6_trt_addr.
 * socket_connect_finalize():
  * Bugfix: Check whether the bind address is valid and ignore it otherwise
            to prevent an assertion failure. This can happen if the property
	    "force_local_ip" is not set or unparseable.
 * socket_tcp_listen():
 * socket_udp_listen():
  * Use socket_ipv6_trt_map() too.
 * Added socket_set_bind_address().

------------------------------------------------------------------------
r10695 | cbiere | 2006-04-15 13:13:32 -0400 (Sat, 15 Apr 2006) | 2 lines

 * Fixed more compiler warnings.

------------------------------------------------------------------------
r10694 | cbiere | 2006-04-15 09:42:57 -0400 (Sat, 15 Apr 2006) | 2 lines

 * Fixed compile issue for platforms without IPV6_RECVDSTADDR.

------------------------------------------------------------------------
r10693 | rmanfredi | 2006-04-15 07:53:01 -0400 (Sat, 15 Apr 2006) | 2 lines

File is not shared if its index is 0.

------------------------------------------------------------------------
r10692 | rmanfredi | 2006-04-15 04:04:08 -0400 (Sat, 15 Apr 2006) | 3 lines

Flush the ASCI fileinfo database at shutdown time AFTER having stopped all
the downloads and flushed the data buffers, not before stopping them.

------------------------------------------------------------------------
r10691 | cbiere | 2006-04-14 17:11:24 -0400 (Fri, 14 Apr 2006) | 2 lines

More spammers, more spam.

------------------------------------------------------------------------
r10690 | cbiere | 2006-04-14 15:26:54 -0400 (Fri, 14 Apr 2006) | 2 lines

More spammers, more spam.

------------------------------------------------------------------------
r10689 | cbiere | 2006-04-14 14:57:12 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10688 | cbiere | 2006-04-14 14:19:33 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10687 | cbiere | 2006-04-14 13:53:16 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10686 | cbiere | 2006-04-14 13:14:58 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10685 | cbiere | 2006-04-14 13:06:44 -0400 (Fri, 14 Apr 2006) | 2 lines

Another DRM spammer.

------------------------------------------------------------------------
r10684 | cbiere | 2006-04-14 12:50:52 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10683 | cbiere | 2006-04-14 12:32:46 -0400 (Fri, 14 Apr 2006) | 2 lines

Another DRM spammer.

------------------------------------------------------------------------
r10682 | cbiere | 2006-04-14 12:29:12 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10681 | cbiere | 2006-04-14 11:32:49 -0400 (Fri, 14 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10680 | cbiere | 2006-04-14 11:21:15 -0400 (Fri, 14 Apr 2006) | 2 lines

The next DRM spammer.

------------------------------------------------------------------------
r10679 | cbiere | 2006-04-14 11:08:31 -0400 (Fri, 14 Apr 2006) | 2 lines

Another one tinned.

------------------------------------------------------------------------
r10678 | cbiere | 2006-04-14 10:19:36 -0400 (Fri, 14 Apr 2006) | 2 lines

Extended WMV spammer range.

------------------------------------------------------------------------
r10677 | cbiere | 2006-04-14 02:57:28 -0400 (Fri, 14 Apr 2006) | 2 lines

 * ipv6_trt_prefix_changed(): Removed unused variable.

------------------------------------------------------------------------
r10676 | cbiere | 2006-04-14 02:24:20 -0400 (Fri, 14 Apr 2006) | 4 lines

 * Added support IPv6-to-IPv4 Transport Relay Translator. The prefix must
   be set manually. This is for IPv6-only hosts using this method to connect
   to IPv4-only hosts (RFC 3142).

------------------------------------------------------------------------
r10675 | cbiere | 2006-04-14 02:21:25 -0400 (Fri, 14 Apr 2006) | 2 lines

 * Added PROP_USE_IPV6_TRT and PROP_IPV6_TRT_PREFIX for RFC 3142 support.

------------------------------------------------------------------------
r10674 | cbiere | 2006-04-13 17:27:54 -0400 (Thu, 13 Apr 2006) | 2 lines

Back to unstable.

------------------------------------------------------------------------
r10673 | cbiere | 2006-04-13 12:24:58 -0400 (Thu, 13 Apr 2006) | 2 lines

 * Unshare files which have been identified as spam.

------------------------------------------------------------------------
r10672 | cbiere | 2006-04-13 12:18:39 -0400 (Thu, 13 Apr 2006) | 4 lines

* Removed unnecessary casts.
* Cast "unknown" values for messages to unsigned rather than signed integers
  because overflow of a signed integer would provoke undefined behaviour.

------------------------------------------------------------------------
r10671 | cbiere | 2006-04-13 12:10:51 -0400 (Thu, 13 Apr 2006) | 4 lines

parq_still_sharing():
 * Use sha1_hash_available() because sf->sha1_digest might be still be
   unitialized.

------------------------------------------------------------------------
r10670 | cbiere | 2006-04-13 12:03:18 -0400 (Thu, 13 Apr 2006) | 3 lines

listen_port_changed():
 * Added comment.

------------------------------------------------------------------------
r10669 | cbiere | 2006-04-13 12:01:39 -0400 (Thu, 13 Apr 2006) | 21 lines

* get_sol():
 * Initialize to the variables to the macro constants if available.
 * Added IPPROTO_IPV6.
* Added sol_ipv6().
socket_tos():
 * Set tosname only if there's actually something to warn about.
* Added socket_udp_extract_dst_addr().
* socket_udp_accept():
 * Extract the destination address from UDP packets if available for
   better detection of one's own address.
* socket_set_linger():
 * Use sol_tcp() instead of the hardcoded macro constant.
* socket_tcp_listen():
* socket_udp_listen():
 * Allow creation of sockets for port numbers below 1024.
* socket_enable_recvdstaddr():
 * Enable reception of the destination address with UDP packets.
* sock_cork():
 * Don't define TCP_CORK, just pick the right option.
 * Don't emit a warning unless socket_debug is set.

------------------------------------------------------------------------
r10668 | cbiere | 2006-04-13 11:36:09 -0400 (Thu, 13 Apr 2006) | 3 lines

 * Use the result of a compile-time check to treat the udata member of
   struct kevent either as integer or pointer depending on the implementation.

------------------------------------------------------------------------
r10667 | cbiere | 2006-04-13 11:31:22 -0400 (Thu, 13 Apr 2006) | 2 lines

Additional check for kqueue() support.

------------------------------------------------------------------------
r10666 | cbiere | 2006-04-13 11:15:21 -0400 (Thu, 13 Apr 2006) | 3 lines

supports_chunked():
 * Removed slashes from pattern as some unofficial versions don't have them.

------------------------------------------------------------------------
r10665 | cbiere | 2006-04-13 11:11:36 -0400 (Thu, 13 Apr 2006) | 2 lines

Moved safer casts from lib/misc.h to casts.h.

------------------------------------------------------------------------
r10664 | cbiere | 2006-04-13 11:09:27 -0400 (Thu, 13 Apr 2006) | 2 lines

Added DRM spammer.

------------------------------------------------------------------------
r10663 | cbiere | 2006-04-13 11:08:28 -0400 (Thu, 13 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10662 | cbiere | 2006-04-11 10:13:40 -0400 (Tue, 11 Apr 2006) | 2 lines

Fixed bug #1467793 "uname() return value".

------------------------------------------------------------------------
r10661 | cbiere | 2006-04-09 17:54:59 -0400 (Sun, 09 Apr 2006) | 3 lines

get_results_set():
 * Don't discard spam when it comes from host browsing.

------------------------------------------------------------------------
r10660 | cbiere | 2006-04-09 17:53:26 -0400 (Sun, 09 Apr 2006) | 3 lines

browse_host_dl_free():
 * Always use G_FREE_NULL() even if seemingly pointless.

------------------------------------------------------------------------
r10659 | cbiere | 2006-04-09 17:51:20 -0400 (Sun, 09 Apr 2006) | 2 lines

Added magic to bio_source_t for consistency checks.

------------------------------------------------------------------------
r10658 | cbiere | 2006-04-09 13:16:49 -0400 (Sun, 09 Apr 2006) | 3 lines

 * Removed unnecessary "udp_addr"; just use "last_hop" and check for the
   ST_UDP flag.

------------------------------------------------------------------------
r10657 | cbiere | 2006-04-09 12:46:16 -0400 (Sun, 09 Apr 2006) | 2 lines

 * Reduced the noise level a bit.

------------------------------------------------------------------------
r10656 | daichik | 2006-04-09 11:28:11 -0400 (Sun, 09 Apr 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10655 | cbiere | 2006-04-08 20:12:49 -0400 (Sat, 08 Apr 2006) | 2 lines

 * Omit the X-Token header if unnecessary.

------------------------------------------------------------------------
r10654 | cbiere | 2006-04-08 19:07:48 -0400 (Sat, 08 Apr 2006) | 3 lines

http_send_status():
 * Omit the X-Token header if unnecessary.

------------------------------------------------------------------------
r10653 | cbiere | 2006-04-08 18:55:30 -0400 (Sat, 08 Apr 2006) | 4 lines

 * struct gnutella_socket:
   * Added omit_token so that the X-Token header can be omitted if unnecessary.
 * Added socket_disable_token() and socket_omit_token().

------------------------------------------------------------------------
r10652 | cbiere | 2006-04-08 18:01:03 -0400 (Sat, 08 Apr 2006) | 3 lines

 * Disable "chunked" transfer-encoding for browse host uploads when the client
   is based on LimeWire as they seemingly have a problem to handle it.

------------------------------------------------------------------------
r10651 | rmanfredi | 2006-04-08 16:20:08 -0400 (Sat, 08 Apr 2006) | 2 lines

Removed spurious echo-ed strings and made sure $cat is sent to &4.

------------------------------------------------------------------------
r10650 | cbiere | 2006-04-08 16:04:15 -0400 (Sat, 08 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10649 | cbiere | 2006-04-08 14:30:15 -0400 (Sat, 08 Apr 2006) | 2 lines

 * Use G_N_ELEMENTS() instead of magic values.

------------------------------------------------------------------------
r10648 | cbiere | 2006-04-08 14:21:43 -0400 (Sat, 08 Apr 2006) | 3 lines

 * Corrected rank orientation.
 * Update the rank only when the sort column changes.

------------------------------------------------------------------------
r10647 | cbiere | 2006-04-08 13:45:51 -0400 (Sat, 08 Apr 2006) | 3 lines

 * Better sorting of the search results so that selecting a different sort
   column gains a relative sorting to the current order ("stable" sort).

------------------------------------------------------------------------
r10646 | cbiere | 2006-04-08 13:43:16 -0400 (Sat, 08 Apr 2006) | 3 lines

 * Relabeled the parameters in the prototypes, the previous names were probably
   caused by a bulk-replace accident.

------------------------------------------------------------------------
r10645 | cbiere | 2006-04-08 05:17:06 -0400 (Sat, 08 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10644 | cbiere | 2006-04-08 03:19:38 -0400 (Sat, 08 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10643 | cbiere | 2006-04-08 00:33:26 -0400 (Sat, 08 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10642 | cbiere | 2006-04-07 22:08:29 -0400 (Fri, 07 Apr 2006) | 2 lines

Added a WMA-DRM spammer range.

------------------------------------------------------------------------
r10641 | cbiere | 2006-04-07 21:29:03 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10640 | cbiere | 2006-04-07 19:00:13 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10639 | cbiere | 2006-04-07 18:29:31 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10638 | cbiere | 2006-04-07 17:32:02 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10637 | cbiere | 2006-04-07 16:39:03 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10636 | cbiere | 2006-04-07 12:23:07 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10635 | cbiere | 2006-04-07 11:51:17 -0400 (Fri, 07 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10634 | cbiere | 2006-04-06 19:49:23 -0400 (Thu, 06 Apr 2006) | 2 lines

Keep drop stats for messages that are considered spam.

------------------------------------------------------------------------
r10633 | cbiere | 2006-04-06 19:47:21 -0400 (Thu, 06 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10632 | cbiere | 2006-04-06 19:46:29 -0400 (Thu, 06 Apr 2006) | 3 lines

spam_load():
 * Don't count unknown tags as duplicates.

------------------------------------------------------------------------
r10631 | cbiere | 2006-04-06 16:24:46 -0400 (Thu, 06 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10630 | cbiere | 2006-04-06 13:01:16 -0400 (Thu, 06 Apr 2006) | 6 lines

unique_substr():
 * Do not blindly truncate words by a single byte but check whether the last
   bytes form a valid UTF-8 character. As qrp_hashcode() aborts on such
   corrupted encodings there was not really an issue (like bad items in the
   QRP) but this should be better practice.

------------------------------------------------------------------------
r10629 | cbiere | 2006-04-05 21:34:32 -0400 (Wed, 05 Apr 2006) | 2 lines

Added SVN property keywords.

------------------------------------------------------------------------
r10628 | cbiere | 2006-04-05 21:32:12 -0400 (Wed, 05 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10627 | cbiere | 2006-04-05 20:53:45 -0400 (Wed, 05 Apr 2006) | 2 lines

Fixed compile errors.

------------------------------------------------------------------------
r10626 | cbiere | 2006-04-05 20:33:24 -0400 (Wed, 05 Apr 2006) | 2 lines

More spam.

------------------------------------------------------------------------
r10625 | cbiere | 2006-04-05 20:32:26 -0400 (Wed, 05 Apr 2006) | 2 lines

More hostiles.

------------------------------------------------------------------------
r10624 | cbiere | 2006-04-05 19:20:04 -0400 (Wed, 05 Apr 2006) | 2 lines

List of spam checksums.

------------------------------------------------------------------------
r10623 | cbiere | 2006-04-05 19:15:59 -0400 (Wed, 05 Apr 2006) | 2 lines

Added spam.[ch] to MANIFEST.

------------------------------------------------------------------------
r10622 | cbiere | 2006-04-05 19:14:47 -0400 (Wed, 05 Apr 2006) | 2 lines

Plugged SHA-1 spam filter.

------------------------------------------------------------------------
r10621 | cbiere | 2006-04-05 19:11:15 -0400 (Wed, 05 Apr 2006) | 2 lines

SHA-1 based spam filtering.

------------------------------------------------------------------------
r10619 | cbiere | 2006-03-29 09:02:58 -0500 (Wed, 29 Mar 2006) | 2 lines

Changed type of ban_countwait to unsigned int.

------------------------------------------------------------------------
r10618 | cbiere | 2006-03-29 08:46:50 -0500 (Wed, 29 Mar 2006) | 2 lines

Fixed picky compiler warnings regarding unused return values.

------------------------------------------------------------------------
r10617 | cbiere | 2006-03-29 07:19:49 -0500 (Wed, 29 Mar 2006) | 2 lines

Enabled missing Gtk+ functions for older Gtk+ 2.0 as well.

------------------------------------------------------------------------
r10602 | cbiere | 2006-03-19 06:32:49 -0500 (Sun, 19 Mar 2006) | 2 lines

Operation White Lightning.

------------------------------------------------------------------------
r10601 | daichik | 2006-03-18 11:45:41 -0500 (Sat, 18 Mar 2006) | 2 lines

And updated.

------------------------------------------------------------------------
r10600 | cbiere | 2006-03-18 11:39:22 -0500 (Sat, 18 Mar 2006) | 2 lines

Fixed properties.

------------------------------------------------------------------------
r10599 | cbiere | 2006-03-18 11:28:05 -0500 (Sat, 18 Mar 2006) | 7 lines

src/if/props.tpl:
 * Modified so that src/if/gui_property.c is empty when compiling for topless
   mode.
scripts/make_topless.sh:
 * Modifying src/if/gui_property.c is not necessary anymore.
 * Check GTK_VERSION to allow compiling against the Gtk+/GLib 1.2 base too.

------------------------------------------------------------------------
r10598 | nonamer | 2006-03-18 10:28:59 -0500 (Sat, 18 Mar 2006) | 5 lines

Added a property to allow a client to ignore the Retry-After 
header more then once, the default is still 1, but it can be
overriden now using parq_ban_bad_maxcountwait.


------------------------------------------------------------------------
r10597 | nonamer | 2006-03-18 05:57:11 -0500 (Sat, 18 Mar 2006) | 2 lines

Some additional commands are needed 

------------------------------------------------------------------------
r10594 | daichik | 2006-03-15 08:41:51 -0500 (Wed, 15 Mar 2006) | 2 lines

Changed keywords, should work again.

------------------------------------------------------------------------
r10592 | daichik | 2006-03-15 08:27:29 -0500 (Wed, 15 Mar 2006) | 2 lines

Set proper properties properly.

------------------------------------------------------------------------
r10591 | daichik | 2006-03-15 08:09:08 -0500 (Wed, 15 Mar 2006) | 2 lines

Removed executable bits.

------------------------------------------------------------------------
r10590 | cbiere | 2006-03-14 20:42:11 -0500 (Tue, 14 Mar 2006) | 2 lines

Touch generated GUI files to prevent their re-generation.

------------------------------------------------------------------------
r10589 | cbiere | 2006-03-14 20:31:13 -0500 (Tue, 14 Mar 2006) | 2 lines

Pseudo edit to bump timestamps.

------------------------------------------------------------------------
r10588 | cbiere | 2006-03-14 20:28:52 -0500 (Tue, 14 Mar 2006) | 2 lines

Pseudo edit to bump timestamps.

------------------------------------------------------------------------
r10587 | cbiere | 2006-03-14 20:14:19 -0500 (Tue, 14 Mar 2006) | 2 lines

Added script to compile gtk-gnutella for topless mode.

------------------------------------------------------------------------
r10583 | cbiere | 2006-03-14 18:53:13 -0500 (Tue, 14 Mar 2006) | 2 lines

Correct repository URL.

------------------------------------------------------------------------
r10580 | cbiere | 2006-03-14 17:58:17 -0500 (Tue, 14 Mar 2006) | 2 lines

Renamed gtk-gnutella-current to gtk-gnutella.

------------------------------------------------------------------------
r10579 | cbiere | 2006-03-14 17:45:10 -0500 (Tue, 14 Mar 2006) | 2 lines

Replaced CVS with SVN.

------------------------------------------------------------------------
r10578 | cbiere | 2006-03-14 17:44:05 -0500 (Tue, 14 Mar 2006) | 2 lines

Adapted from CVS to SVN.

------------------------------------------------------------------------
r10577 | cbiere | 2006-03-14 16:51:26 -0500 (Tue, 14 Mar 2006) | 2 lines

Adapted instructions for SVN (untested).

------------------------------------------------------------------------
r10576 | cbiere | 2006-03-14 16:27:36 -0500 (Tue, 14 Mar 2006) | 2 lines

Removed deprecated .cvsignore files.

------------------------------------------------------------------------
r10575 | cbiere | 2006-03-14 16:24:57 -0500 (Tue, 14 Mar 2006) | 2 lines

Corrected instructions to create a patch. svs defaults to unified diff.

------------------------------------------------------------------------
r10572 | cbiere | 2006-03-14 15:56:19 -0500 (Tue, 14 Mar 2006) | 2 lines

Replaced CVS with SVN.

------------------------------------------------------------------------
r10571 | cbiere | 2006-03-14 15:52:52 -0500 (Tue, 14 Mar 2006) | 2 lines

Test edit s/CVS/SVN/.

------------------------------------------------------------------------
r10569 | rmanfredi | 2006-03-14 13:45:41 -0500 (Tue, 14 Mar 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10568 | cbiere | 2006-03-14 09:54:24 -0500 (Tue, 14 Mar 2006) | 2 lines

Fixed broken topless support.

------------------------------------------------------------------------
r10567 | rmanfredi | 2006-03-11 10:09:09 -0500 (Sat, 11 Mar 2006) | 3 lines

Flush ASAP when file is overcommitted: we have more data buffered than
there are in the file.

------------------------------------------------------------------------
r10566 | rmanfredi | 2006-03-11 10:07:18 -0500 (Sat, 11 Mar 2006) | 2 lines

Fixed improper UDP overhead accounting.

------------------------------------------------------------------------
r10564 | daichik | 2006-03-11 02:28:27 -0500 (Sat, 11 Mar 2006) | 7 lines

Okay, I heard your complains about a bunch of line-number diffs,
now you're supposed to know the places where these strings are
located, i.e. if a translator points the misspelling out, you
can immediately fix that without an information.

Der Himmel sei mein Zeuge.

------------------------------------------------------------------------
r10559 | guruz | 2006-03-02 10:44:17 -0500 (Thu, 02 Mar 2006) | 2 lines

added the UHC of guruz

------------------------------------------------------------------------
r10558 | cbiere | 2006-02-26 09:24:10 -0500 (Sun, 26 Feb 2006) | 2 lines

Added an UHC.

------------------------------------------------------------------------
r10557 | cbiere | 2006-02-25 13:54:22 -0500 (Sat, 25 Feb 2006) | 4 lines

 * Removed unnecessary casts and parentheses.
cq_insert(), cq_clock(), cq_resched():
 * Use time_advance() so that the code works until the apocalypse.

------------------------------------------------------------------------
r10556 | cbiere | 2006-02-25 13:50:51 -0500 (Sat, 25 Feb 2006) | 2 lines

Added time_advance().

------------------------------------------------------------------------
r10555 | cbiere | 2006-02-25 08:20:22 -0500 (Sat, 25 Feb 2006) | 2 lines

Added definition of TIME_T_MAX.

------------------------------------------------------------------------
r10554 | cbiere | 2006-02-25 06:22:47 -0500 (Sat, 25 Feb 2006) | 3 lines

tm_now_exact(), tm_time_exact():
 * Protect the time-space continuum even if it means freezing the time.

------------------------------------------------------------------------
r10552 | cbiere | 2006-02-25 05:22:19 -0500 (Sat, 25 Feb 2006) | 3 lines

paned_restore_position():
 * Fixed dishelvement causing a compile-issue for non-C99 compilers.

------------------------------------------------------------------------
r10551 | cbiere | 2006-02-25 05:16:56 -0500 (Sat, 25 Feb 2006) | 4 lines

check_cpu_usage():
 * Prevent division-by-zero the right way (not with "== 0.0").
 * Prevent cpu_percent > 100.0.

------------------------------------------------------------------------
r10550 | cbiere | 2006-02-25 05:07:59 -0500 (Sat, 25 Feb 2006) | 3 lines

check_cpu_usage():
 * Fixed dangerous typo: ',' vs ';'.

------------------------------------------------------------------------
r10549 | cbiere | 2006-02-24 19:57:00 -0500 (Fri, 24 Feb 2006) | 2 lines

Tagged as broken.

------------------------------------------------------------------------
r10548 | cbiere | 2006-02-24 19:02:47 -0500 (Fri, 24 Feb 2006) | 3 lines

dmesh_ban_add():
 * Prevent an integer overflow "lifetime".

------------------------------------------------------------------------
r10547 | cbiere | 2006-02-24 18:02:03 -0500 (Fri, 24 Feb 2006) | 2 lines

 * Prevent under- and overflow of the delay parameter for cq_insert().

------------------------------------------------------------------------
r10546 | cbiere | 2006-02-24 17:13:44 -0500 (Fri, 24 Feb 2006) | 3 lines

aging_insert():
 * Prevent integer under- and overflow.

------------------------------------------------------------------------
r10545 | rmanfredi | 2006-02-23 18:40:53 -0500 (Thu, 23 Feb 2006) | 2 lines

Removed spurious trailing "\n" at the end of strings logged via g_message().

------------------------------------------------------------------------
r10544 | rmanfredi | 2006-02-23 14:05:55 -0500 (Thu, 23 Feb 2006) | 2 lines

Applied Debian patches from Anand Kumria.

------------------------------------------------------------------------
r10543 | rmanfredi | 2006-02-23 14:04:06 -0500 (Thu, 23 Feb 2006) | 2 lines

Added missing debian/compat file.

------------------------------------------------------------------------
r10540 | rmanfredi | 2006-02-22 11:43:25 -0500 (Wed, 22 Feb 2006) | 3 lines

Was wrongly installing under debian/gtk-gnutella instead of debian/tmp,
as the build scripts expect the package to be held there.

------------------------------------------------------------------------
r10539 | rmanfredi | 2006-02-22 11:20:07 -0500 (Wed, 22 Feb 2006) | 2 lines

Removed needless blank line.

------------------------------------------------------------------------
r10538 | rmanfredi | 2006-02-22 11:17:05 -0500 (Wed, 22 Feb 2006) | 2 lines

Updated Debian build instructions: debian/rules no longer start with #!.

------------------------------------------------------------------------
r10537 | rmanfredi | 2006-02-22 11:10:05 -0500 (Wed, 22 Feb 2006) | 2 lines

Release 0.96.1.

------------------------------------------------------------------------
r10536 | rmanfredi | 2006-02-22 11:08:59 -0500 (Wed, 22 Feb 2006) | 2 lines

Release 0.96.1 stable.

------------------------------------------------------------------------
r10535 | rmanfredi | 2006-02-22 11:07:19 -0500 (Wed, 22 Feb 2006) | 2 lines

Updated for 0.96.1.

------------------------------------------------------------------------
r10534 | rmanfredi | 2006-02-22 11:02:31 -0500 (Wed, 22 Feb 2006) | 2 lines

New keys for 0.96.1.

------------------------------------------------------------------------
r10533 | rmanfredi | 2006-02-22 10:54:39 -0500 (Wed, 22 Feb 2006) | 2 lines

No longer need to fake presence of a README.debian: manifests were updated!

------------------------------------------------------------------------
r10532 | rmanfredi | 2006-02-22 10:47:47 -0500 (Wed, 22 Feb 2006) | 2 lines

Updated copyright year.

------------------------------------------------------------------------
r10531 | rmanfredi | 2006-02-22 08:55:25 -0500 (Wed, 22 Feb 2006) | 3 lines

Inferring pseudo-HTTP/1.1 from GnucDNA won't do us any good if there's
no Content-Length header present anyway.

------------------------------------------------------------------------
r10530 | rmanfredi | 2006-02-22 07:44:11 -0500 (Wed, 22 Feb 2006) | 4 lines

Only update the range in the GUI after we decided which boundaries we'll use.
Added workaround against broken HTTP servers such as GnucDNA which don't
show us the HTTP version in their statuses.

------------------------------------------------------------------------
r10529 | rmanfredi | 2006-02-22 07:38:19 -0500 (Wed, 22 Feb 2006) | 6 lines

Was wrongly showing twice the same b/w rate in downloads with more than one
source: the second rate is supposed to be the aggregated rate of all the
sources.
Downloads now show how many HTTP requests were made on the same connection,
if more than one, by appending a "#n" at the end of the status.

------------------------------------------------------------------------
r10528 | rmanfredi | 2006-02-22 05:25:35 -0500 (Wed, 22 Feb 2006) | 3 lines

Made root window position fixup more robust to avoid random jumps when
we cannot determine the window position correctly.

------------------------------------------------------------------------
r10527 | rmanfredi | 2006-02-22 05:24:11 -0500 (Wed, 22 Feb 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10526 | rmanfredi | 2006-02-22 04:08:24 -0500 (Wed, 22 Feb 2006) | 3 lines

Further fix for #1421940, regarding the vertical position of the search
list on the sidebar, which continuously went off after each restart.

------------------------------------------------------------------------
r10525 | cbiere | 2006-02-22 03:34:31 -0500 (Wed, 22 Feb 2006) | 2 lines

Fix for bug #1421940: "Width of left column is ever growing".

------------------------------------------------------------------------
r10524 | rmanfredi | 2006-02-19 16:23:12 -0500 (Sun, 19 Feb 2006) | 3 lines

Take into account buffered data when showing download progress, instead
of waiting for the data to be flused on disk to update the counters.

------------------------------------------------------------------------
r10523 | rmanfredi | 2006-02-19 05:18:56 -0500 (Sun, 19 Feb 2006) | 2 lines

Version of 2006-02-19.

------------------------------------------------------------------------
r10522 | rmanfredi | 2006-02-19 05:17:12 -0500 (Sun, 19 Feb 2006) | 3 lines

Fixed misdetection of chunk completion, causing undue abortion of downloads
each time a chunk was completed.

------------------------------------------------------------------------
r10521 | rmanfredi | 2006-02-16 15:16:13 -0500 (Thu, 16 Feb 2006) | 2 lines

Version of 2006-02-16.

------------------------------------------------------------------------
r10520 | rmanfredi | 2006-02-16 15:14:35 -0500 (Thu, 16 Feb 2006) | 2 lines

Forgot to reset download buffers on incomplete writes (fixes bug #1429981).

------------------------------------------------------------------------
r10519 | rmanfredi | 2006-02-16 01:40:27 -0500 (Thu, 16 Feb 2006) | 3 lines

Minimum connection timeout is set to 15 seconds.
Default for "maximum % of slots / vendor" raised to 90.

------------------------------------------------------------------------
r10515 | cbiere | 2006-02-12 15:35:52 -0500 (Sun, 12 Feb 2006) | 4 lines

 * Removed noisy comments.
 * Updated translations.
 * Applied patch by Klaus Ethgen from debian bugreport #324312.

------------------------------------------------------------------------
r10514 | rmanfredi | 2006-02-11 17:15:55 -0500 (Sat, 11 Feb 2006) | 3 lines

Removed README.debian.
Added src/ui/gtk/gtk1/interface-glade.t

------------------------------------------------------------------------
r10513 | rmanfredi | 2006-02-10 13:55:28 -0500 (Fri, 10 Feb 2006) | 2 lines

Make sure a query hit has at least a 16-byte payload or we drop it ASAP.

------------------------------------------------------------------------
r10512 | cbiere | 2006-02-09 19:00:24 -0500 (Thu, 09 Feb 2006) | 2 lines

Added sponsored caches.

------------------------------------------------------------------------
r10511 | daichik | 2006-02-07 08:29:05 -0500 (Tue, 07 Feb 2006) | 2 lines

Fixed typo. again.

------------------------------------------------------------------------
r10510 | daichik | 2006-02-07 08:28:16 -0500 (Tue, 07 Feb 2006) | 6 lines

Reverted style of some place holders* so that they're consistent
with the others. Now "[]" is used for the place holders*.

* It only appears in the Glade to which a developer can easily
get what a given tab, form and pane mean in the GUI.

------------------------------------------------------------------------
r10509 | daichik | 2006-02-06 21:49:39 -0500 (Mon, 06 Feb 2006) | 2 lines

Applied a Debian patch provided by Anand Kumria <wildfire@progsoc.org>.

------------------------------------------------------------------------
r10508 | cbiere | 2006-02-06 15:02:41 -0500 (Mon, 06 Feb 2006) | 4 lines

gui_update_download():
 * Don't assert that the download ID has a known parent; the core might easily
   forget to register it first.

------------------------------------------------------------------------
r10507 | rmanfredi | 2006-02-06 12:36:25 -0500 (Mon, 06 Feb 2006) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10506 | rmanfredi | 2006-02-06 12:33:44 -0500 (Mon, 06 Feb 2006) | 2 lines

Must cd to "extra_files" now to run "make update".

------------------------------------------------------------------------
r10505 | rmanfredi | 2006-02-06 12:32:32 -0500 (Mon, 06 Feb 2006) | 2 lines

Make sure the GTK+ flags contain all the glib flags.

------------------------------------------------------------------------
r10504 | rmanfredi | 2006-02-06 12:31:59 -0500 (Mon, 06 Feb 2006) | 2 lines

Use the Warn unit to emit critical warnings.

------------------------------------------------------------------------
r10503 | cbiere | 2006-02-06 09:35:54 -0500 (Mon, 06 Feb 2006) | 3 lines

drag_data_get():
 * Fixed compiler warnings concerning the pointer signdness.

------------------------------------------------------------------------
r10502 | daichik | 2006-02-05 04:30:36 -0500 (Sun, 05 Feb 2006) | 2 lines

Suggested commits for the better strings handling in the translation.

------------------------------------------------------------------------
r10501 | daichik | 2006-02-05 04:17:27 -0500 (Sun, 05 Feb 2006) | 2 lines

Minor comment changes.

------------------------------------------------------------------------
r10500 | daichik | 2006-02-04 23:55:03 -0500 (Sat, 04 Feb 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10499 | cbiere | 2006-02-04 18:37:57 -0500 (Sat, 04 Feb 2006) | 2 lines

Another polling range.

------------------------------------------------------------------------
r10498 | rmanfredi | 2006-02-04 16:32:37 -0500 (Sat, 04 Feb 2006) | 2 lines

Print PFS indication for actively queued entries as well.

------------------------------------------------------------------------
r10497 | rmanfredi | 2006-02-04 16:31:47 -0500 (Sat, 04 Feb 2006) | 2 lines

Removed obsolete keys.

------------------------------------------------------------------------
r10496 | rmanfredi | 2006-02-04 16:31:46 -0500 (Sat, 04 Feb 2006) | 2 lines

Fixed indentation of long line.

------------------------------------------------------------------------
r10495 | daichik | 2006-02-04 00:17:32 -0500 (Sat, 04 Feb 2006) | 3 lines

* Sync'd with the source.
* Bump the version up.

------------------------------------------------------------------------
r10494 | cbiere | 2006-02-03 16:15:02 -0500 (Fri, 03 Feb 2006) | 2 lines

Back to unstable.

------------------------------------------------------------------------
r10493 | cbiere | 2006-02-03 16:01:26 -0500 (Fri, 03 Feb 2006) | 2 lines

Updated list of UHCs.

------------------------------------------------------------------------
r10492 | cbiere | 2006-02-02 19:14:00 -0500 (Thu, 02 Feb 2006) | 2 lines

Corrected jab_tab.

------------------------------------------------------------------------
r10491 | cbiere | 2006-02-02 19:00:41 -0500 (Thu, 02 Feb 2006) | 5 lines

search_update_tooltip():
 * Removed SHA1 and GUID from the tooltips.
 * Show the filename with hiragana and katakana converted to latin characters
   if the filename contains such characters as additional tooltip string.

------------------------------------------------------------------------
r10490 | cbiere | 2006-02-02 18:58:20 -0500 (Thu, 02 Feb 2006) | 5 lines

utf8_dejap():
utf8_can_dejap():
 * Added simplistic functions to convert hiragana and katakana to latin
   character sequences.

------------------------------------------------------------------------
r10489 | cbiere | 2006-02-02 02:54:29 -0500 (Thu, 02 Feb 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10488 | cbiere | 2006-02-02 00:35:31 -0500 (Thu, 02 Feb 2006) | 2 lines

Fixed macro definition; fixes bug #1421170 "CVS won't compile".

------------------------------------------------------------------------
r10487 | cbiere | 2006-02-01 18:21:35 -0500 (Wed, 01 Feb 2006) | 2 lines

orz

------------------------------------------------------------------------
r10486 | cbiere | 2006-02-01 18:13:21 -0500 (Wed, 01 Feb 2006) | 2 lines

Show the last hop for each search result.

------------------------------------------------------------------------
r10485 | cbiere | 2006-02-01 17:39:23 -0500 (Wed, 01 Feb 2006) | 2 lines

ZOMFG.

------------------------------------------------------------------------
r10484 | rmanfredi | 2006-02-01 17:29:39 -0500 (Wed, 01 Feb 2006) | 2 lines

Use conditionnal form when reaching "code that should not have been".

------------------------------------------------------------------------
r10483 | rmanfredi | 2006-02-01 17:27:30 -0500 (Wed, 01 Feb 2006) | 3 lines

Fixed issue when browse host is the only search in the list: it could not
be closed, and GTKG would dump a core at exit time.

------------------------------------------------------------------------
r10482 | cbiere | 2006-01-31 03:16:13 -0500 (Tue, 31 Jan 2006) | 2 lines

Fix for bug #1420072 "Sudden death by browse host".

------------------------------------------------------------------------
r10481 | cbiere | 2006-01-31 01:43:24 -0500 (Tue, 31 Jan 2006) | 2 lines

Extended ranges to kick out the bots of Sound Control Media Protection(?).

------------------------------------------------------------------------
r10480 | rmanfredi | 2006-01-30 13:43:26 -0500 (Mon, 30 Jan 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10479 | rmanfredi | 2006-01-30 12:09:55 -0500 (Mon, 30 Jan 2006) | 2 lines

Fixed line incorrectly starting with a leading $ instead of %.

------------------------------------------------------------------------
r10473 | rmanfredi | 2006-01-26 14:16:53 -0500 (Thu, 26 Jan 2006) | 3 lines

Desktop and png files are located in extra_files now, no longer at the
root of the source tree.

------------------------------------------------------------------------
r10469 | rmanfredi | 2006-01-24 16:17:04 -0500 (Tue, 24 Jan 2006) | 2 lines

Release 0.96 of 2006-01-24.

------------------------------------------------------------------------
r10468 | rmanfredi | 2006-01-24 16:15:50 -0500 (Tue, 24 Jan 2006) | 2 lines

Release 0.96.

------------------------------------------------------------------------
r10467 | rmanfredi | 2006-01-24 16:15:48 -0500 (Tue, 24 Jan 2006) | 2 lines

Updated.

------------------------------------------------------------------------
r10466 | rmanfredi | 2006-01-21 14:19:16 -0500 (Sat, 21 Jan 2006) | 2 lines

Fixed crash on exit when hosts are browsed.

------------------------------------------------------------------------
r10465 | rmanfredi | 2006-01-21 14:04:19 -0500 (Sat, 21 Jan 2006) | 3 lines

Added option to copy browse-host results to passive searches (disabled
by default).  Setting done in GUI from search option pane.

------------------------------------------------------------------------
r10464 | rmanfredi | 2006-01-21 14:01:15 -0500 (Sat, 21 Jan 2006) | 3 lines

Added cygwin directory containing rules suitable for building cygwin
binaries (on a cygwin platform, no cross-compiling).

------------------------------------------------------------------------
r10463 | rmanfredi | 2006-01-21 13:17:51 -0500 (Sat, 21 Jan 2006) | 2 lines

Do not deselect items on menu "browse host" selection.

------------------------------------------------------------------------
r10462 | daichik | 2006-01-15 08:36:10 -0500 (Sun, 15 Jan 2006) | 2 lines

Updated copyright information.

------------------------------------------------------------------------
r10461 | rmanfredi | 2006-01-13 05:47:56 -0500 (Fri, 13 Jan 2006) | 3 lines

Guard against servers incorrectly shrinking the HTTP range in such a
way that the end is lower than the beginning! (Shareaza 2.1.0.0 does this)

------------------------------------------------------------------------
r10460 | cbiere | 2006-01-10 05:32:57 -0500 (Tue, 10 Jan 2006) | 3 lines

parq_upload_continue():
 * Reduce noise level.

------------------------------------------------------------------------
r10459 | cbiere | 2006-01-10 05:28:53 -0500 (Tue, 10 Jan 2006) | 3 lines

gui_record_host_eq():
 * Fixed inverted logic.

------------------------------------------------------------------------
r10458 | cbiere | 2006-01-10 05:23:09 -0500 (Tue, 10 Jan 2006) | 4 lines

search_gui_parse_text_query():
 * Fixed bug: a hyphen surrounded by spaces would create a filter that
   discards all results.

------------------------------------------------------------------------
r10457 | cbiere | 2006-01-10 05:12:02 -0500 (Tue, 10 Jan 2006) | 3 lines

search_gui_browse_selected():
 * Removed some unnecessary code.

------------------------------------------------------------------------
r10456 | cbiere | 2006-01-10 05:08:33 -0500 (Tue, 10 Jan 2006) | 2 lines

Fixed bug #1395036.

------------------------------------------------------------------------
r10455 | cbiere | 2006-01-10 04:49:04 -0500 (Tue, 10 Jan 2006) | 2 lines

More spamming ranges.

------------------------------------------------------------------------
r10454 | cbiere | 2006-01-06 21:18:08 -0500 (Fri, 06 Jan 2006) | 2 lines

Another SCMP range.

------------------------------------------------------------------------
r10453 | cbiere | 2006-01-06 21:08:57 -0500 (Fri, 06 Jan 2006) | 2 lines

Another SCMP range.

------------------------------------------------------------------------
r10452 | daichik | 2006-01-01 20:25:46 -0500 (Sun, 01 Jan 2006) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10451 | daichik | 2006-01-01 20:23:11 -0500 (Sun, 01 Jan 2006) | 2 lines

Sync'd with the source.

------------------------------------------------------------------------
r10450 | rmanfredi | 2006-01-01 14:28:03 -0500 (Sun, 01 Jan 2006) | 2 lines

Ooops, must make CVS "unstable" again.

------------------------------------------------------------------------
r10449 | rmanfredi | 2006-01-01 14:25:50 -0500 (Sun, 01 Jan 2006) | 2 lines

Bumped date.

------------------------------------------------------------------------
r10448 | rmanfredi | 2006-01-01 14:14:28 -0500 (Sun, 01 Jan 2006) | 2 lines

Added GUI mappings for new properties.

------------------------------------------------------------------------
r10447 | rmanfredi | 2006-01-01 14:12:40 -0500 (Sun, 01 Jan 2006) | 2 lines

Honour browse_host_max_results for browse-host searches.

------------------------------------------------------------------------
r10446 | rmanfredi | 2006-01-01 14:11:26 -0500 (Sun, 01 Jan 2006) | 2 lines

Added property "browse_host_max_results".

------------------------------------------------------------------------
r10445 | rmanfredi | 2006-01-01 14:10:17 -0500 (Sun, 01 Jan 2006) | 2 lines

Added properties "html_browse_served" and "qhits_browse_served".

------------------------------------------------------------------------
r10444 | rmanfredi | 2006-01-01 14:09:03 -0500 (Sun, 01 Jan 2006) | 3 lines

Distinguish between fully completed browse host requests and those that
are aborted in the middle of the transmission.

------------------------------------------------------------------------
r10443 | cbiere | 2006-01-01 10:04:03 -0500 (Sun, 01 Jan 2006) | 2 lines

The next bunch of ranges used by SCMP.

------------------------------------------------------------------------
r10442 | cbiere | 2005-12-31 17:36:10 -0500 (Sat, 31 Dec 2005) | 2 lines

Busted more spammers.

------------------------------------------------------------------------
r10441 | cbiere | 2005-12-31 17:15:58 -0500 (Sat, 31 Dec 2005) | 2 lines

More bot ranges of SCMP and its alias.

------------------------------------------------------------------------
r10440 | cbiere | 2005-12-31 17:07:06 -0500 (Sat, 31 Dec 2005) | 2 lines

And again SCMP.

------------------------------------------------------------------------
r10439 | cbiere | 2005-12-31 15:19:28 -0500 (Sat, 31 Dec 2005) | 2 lines

SCMP again.

------------------------------------------------------------------------
r10438 | cbiere | 2005-12-31 14:37:21 -0500 (Sat, 31 Dec 2005) | 2 lines

More SCMP ranges.

------------------------------------------------------------------------
r10437 | cbiere | 2005-12-30 22:06:29 -0500 (Fri, 30 Dec 2005) | 2 lines

Another SCMP range.

------------------------------------------------------------------------
r10436 | cbiere | 2005-12-30 22:02:00 -0500 (Fri, 30 Dec 2005) | 2 lines

Added another range used by Sound Control Media Protection.

------------------------------------------------------------------------
r10435 | daichik | 2005-12-30 08:21:55 -0500 (Fri, 30 Dec 2005) | 3 lines

* Sync'd with the source.
* Discarded obsolete translations.

------------------------------------------------------------------------
r10434 | cbiere | 2005-12-27 11:37:55 -0500 (Tue, 27 Dec 2005) | 2 lines

Removed dead UHC.

------------------------------------------------------------------------
r10433 | cbiere | 2005-12-27 11:37:22 -0500 (Tue, 27 Dec 2005) | 4 lines

connect_http():
 * Fixed memory-leak.
 * Use writev() instead of gm_snprintf() and write().

------------------------------------------------------------------------
r10432 | cbiere | 2005-12-27 11:34:49 -0500 (Tue, 27 Dec 2005) | 2 lines

Removed unnecessary casts.

------------------------------------------------------------------------
r10431 | cbiere | 2005-12-27 11:30:29 -0500 (Tue, 27 Dec 2005) | 2 lines

Always include mmap() stuff.

------------------------------------------------------------------------
r10430 | cbiere | 2005-12-27 11:29:29 -0500 (Tue, 27 Dec 2005) | 7 lines

binary_hash():
 * Changed prototype.
 * Removed unnecessary cast.
 * Slightly stronger hashing.
atom_dealloc():
 * Use compat_page_free() instead of free().

------------------------------------------------------------------------
r10429 | cbiere | 2005-12-27 08:10:50 -0500 (Tue, 27 Dec 2005) | 9 lines

random_init():
 * Use initstate() if available instead of srandom() for a larger period.
compat_page_align():
 * Use mmap() instead of malloc() as fall-back method.
 * Replaced "uintptr_t" with "gulong" for now because the build environment
   does not necessarily provide the former.
compat_page_free():
 * Added; frees memory allocated with compat_page_align().

------------------------------------------------------------------------
r10428 | cbiere | 2005-12-27 08:05:51 -0500 (Tue, 27 Dec 2005) | 2 lines

Changed model back to GtkListStore.

------------------------------------------------------------------------
r10427 | cbiere | 2005-12-27 08:02:29 -0500 (Tue, 27 Dec 2005) | 3 lines

qrt_build_query_target():
 * Removed unused variable "count".

------------------------------------------------------------------------
r10426 | rmanfredi | 2005-12-27 06:50:27 -0500 (Tue, 27 Dec 2005) | 2 lines

Simplified logic of qrt_build_query_target().

------------------------------------------------------------------------
r10425 | cbiere | 2005-12-23 14:40:03 -0500 (Fri, 23 Dec 2005) | 3 lines

drag_data_received():
 * Corrected cast.

------------------------------------------------------------------------
r10424 | daichik | 2005-12-23 14:35:42 -0500 (Fri, 23 Dec 2005) | 2 lines

Reverted for the sake of our sanity.

------------------------------------------------------------------------
r10423 | cbiere | 2005-12-23 13:08:30 -0500 (Fri, 23 Dec 2005) | 3 lines

socket_accept():
 * Don't emit a warning if errno is ECONNABORTED or EAGAIN.

------------------------------------------------------------------------
r10422 | cbiere | 2005-12-23 12:51:46 -0500 (Fri, 23 Dec 2005) | 3 lines

get_results_set():
 * Hide useless warning if not debugging.

------------------------------------------------------------------------
r10421 | cbiere | 2005-12-23 11:29:41 -0500 (Fri, 23 Dec 2005) | 2 lines

Major improvement by dic.

------------------------------------------------------------------------
r10420 | cbiere | 2005-12-22 11:23:42 -0500 (Thu, 22 Dec 2005) | 7 lines

Replaced RT_SLOT_SET/RT_SLOT_CLEAR with qrt_patch_slot().
unique_substr():
 * Replaced INSERT macro with insert_substr().
 * Make a copy of the string before fiddling with it; it might be read-only.
unique_substrings:
 * Removed unnecessary "count" member; just use g_hash_table_size().

------------------------------------------------------------------------
r10419 | cbiere | 2005-12-22 10:45:20 -0500 (Thu, 22 Dec 2005) | 4 lines

PROTECT_ATOMS:
 * Implemented more memory-efficient atom protection so that it's actually
   usable.

------------------------------------------------------------------------
r10418 | cbiere | 2005-12-22 10:45:06 -0500 (Thu, 22 Dec 2005) | 4 lines

Added:
 * round_size()
 * compat_page_align()

------------------------------------------------------------------------
r10417 | cbiere | 2005-12-22 05:25:17 -0500 (Thu, 22 Dec 2005) | 3 lines

string_to_ip_strict():
 * Disallow a trailing dot after an IPv4 address.

------------------------------------------------------------------------
r10416 | cbiere | 2005-12-22 05:24:06 -0500 (Thu, 22 Dec 2005) | 3 lines

socket_set_nonblocking():
 * Skipping setting the flags, if the socket is already non-blocking.

------------------------------------------------------------------------
r10415 | rmanfredi | 2005-12-21 11:37:09 -0500 (Wed, 21 Dec 2005) | 2 lines

Added cast to prevent compilation warning.

------------------------------------------------------------------------
r10414 | cbiere | 2005-12-21 11:16:51 -0500 (Wed, 21 Dec 2005) | 2 lines

Added missing cast.

------------------------------------------------------------------------
r10413 | rmanfredi | 2005-12-21 08:43:04 -0500 (Wed, 21 Dec 2005) | 2 lines

Blindly accept remote GTKG version identification if we're expired.

------------------------------------------------------------------------
r10412 | rmanfredi | 2005-12-20 18:13:33 -0500 (Tue, 20 Dec 2005) | 2 lines

Typo fix in my factorization.

------------------------------------------------------------------------
r10411 | rmanfredi | 2005-12-20 18:12:25 -0500 (Tue, 20 Dec 2005) | 4 lines

Applied patch from Bill Pringlemeir <bpringle@sympatico.ca>:
Use specialized routines for 8-bit and 4-bit patches to increase the speed
of QRP patching, which is CPU intensive.

------------------------------------------------------------------------
r10410 | cbiere | 2005-12-20 08:28:42 -0500 (Tue, 20 Dec 2005) | 3 lines

host_addr_to_name():
 * Convert the address to IPv4 if possible.

------------------------------------------------------------------------
r10409 | cbiere | 2005-12-20 07:03:42 -0500 (Tue, 20 Dec 2005) | 4 lines

get_results_set():
 * Replace a private IP address if it's a browse host search because we
   know that the peer is connectible then.

------------------------------------------------------------------------
r10408 | cbiere | 2005-12-20 06:15:18 -0500 (Tue, 20 Dec 2005) | 3 lines

search_get_kept_results():
 * Don't claim OOB query hits if the search is stopped.

------------------------------------------------------------------------
r10407 | cbiere | 2005-12-19 11:06:10 -0500 (Mon, 19 Dec 2005) | 2 lines

[GTK1] Adjust the paned gutter if the first child becomes invisible.

------------------------------------------------------------------------
r10406 | cbiere | 2005-12-19 11:03:50 -0500 (Mon, 19 Dec 2005) | 5 lines

settings_gui_save_panes():
 * Only update the value if the first child is visible.
settings_gui_restore_panes():
 * If the first child is invisible, use zero instead of the stored value.

------------------------------------------------------------------------
r10405 | cbiere | 2005-12-19 10:31:20 -0500 (Mon, 19 Dec 2005) | 2 lines

[GTK1] Added gtk_paned_child1() and gtk_paned_child2().

------------------------------------------------------------------------
r10404 | cbiere | 2005-12-19 06:37:40 -0500 (Mon, 19 Dec 2005) | 2 lines

[GTK1] Added drop support (for magnet links).

------------------------------------------------------------------------
r10403 | cbiere | 2005-12-19 06:19:24 -0500 (Mon, 19 Dec 2005) | 2 lines

Added drag support.

------------------------------------------------------------------------
r10402 | cbiere | 2005-12-19 06:18:22 -0500 (Mon, 19 Dec 2005) | 3 lines

drag_begin():
 * Replaced g_strdup_printf() with g_strconcat().

------------------------------------------------------------------------
r10401 | graaff | 2005-12-19 04:36:32 -0500 (Mon, 19 Dec 2005) | 2 lines

Include step in release process on checking project details upon release.

------------------------------------------------------------------------
r10400 | cbiere | 2005-12-19 02:42:08 -0500 (Mon, 19 Dec 2005) | 2 lines

Removed unnecessary floating point conversions.

------------------------------------------------------------------------
r10399 | cbiere | 2005-12-19 02:29:29 -0500 (Mon, 19 Dec 2005) | 2 lines

Fixed percentage calculations.

------------------------------------------------------------------------
r10398 | cbiere | 2005-12-19 02:18:34 -0500 (Mon, 19 Dec 2005) | 6 lines

add_list_columns():
 * Make the search list sortable again.
search_gui_set_data():
 * Use gtk_tree_store_set_value() instead of gtk_tree_store_set(); it might
   be a bit faster.

------------------------------------------------------------------------
r10397 | cbiere | 2005-12-19 02:15:48 -0500 (Mon, 19 Dec 2005) | 5 lines

cell_renderer_func():
 * Use g_value_get_pointer() instead of g_value_peek_pointer().
nodes_gui_add_node():
 * Store the column after all contents are initialized.

------------------------------------------------------------------------
r10396 | cbiere | 2005-12-19 02:12:17 -0500 (Mon, 19 Dec 2005) | 2 lines

Fixed missing horizon stats display updates.

------------------------------------------------------------------------
r10395 | cbiere | 2005-12-18 01:09:10 -0500 (Sun, 18 Dec 2005) | 2 lines

Added guc_download_new_uri().

------------------------------------------------------------------------
r10394 | cbiere | 2005-12-18 01:00:26 -0500 (Sun, 18 Dec 2005) | 2 lines

Better non-working magnet-link support.

------------------------------------------------------------------------
r10393 | cbiere | 2005-12-17 23:40:20 -0500 (Sat, 17 Dec 2005) | 2 lines

Added src/ui/topless/gui.h.

------------------------------------------------------------------------
r10392 | cbiere | 2005-12-17 20:05:48 -0500 (Sat, 17 Dec 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10391 | daichik | 2005-12-17 06:05:59 -0500 (Sat, 17 Dec 2005) | 6 lines

Applied Debian patch (gtk-gnutella_0.96b-1.diff) except
gtk-gnutella.desktop, src/common.h.

  * 80+ lines are wrapped.
  * Typographical errors are fixed as well.

------------------------------------------------------------------------
r10390 | cbiere | 2005-12-17 05:40:39 -0500 (Sat, 17 Dec 2005) | 6 lines

drag_begin():
drag_end():
 * Removed unnecessary NULL checks.
fi_gui_init():
 * Fixed broken drag support.

------------------------------------------------------------------------
r10389 | cbiere | 2005-12-17 05:39:23 -0500 (Sat, 17 Dec 2005) | 3 lines

* Figured out why compare_size_func() may see NULL; added comments and removed
  the warning.

------------------------------------------------------------------------
r10388 | cbiere | 2005-12-17 05:37:15 -0500 (Sat, 17 Dec 2005) | 3 lines

adns_resolve():
 * Eradicate gsize.

------------------------------------------------------------------------
r10387 | cbiere | 2005-12-17 05:36:36 -0500 (Sat, 17 Dec 2005) | 3 lines

upload_connect_conf():
 * Don't use "errno" for partial writes.

------------------------------------------------------------------------
r10386 | cbiere | 2005-12-17 05:35:24 -0500 (Sat, 17 Dec 2005) | 5 lines

* Style fixes.
* Removed unnecessary casts and parentheses.
shell_timer():
 * Don't ignore the result of g_slist_prepend().

------------------------------------------------------------------------
r10385 | cbiere | 2005-12-17 05:33:09 -0500 (Sat, 17 Dec 2005) | 3 lines

http_send_status():
 * Don't use "errno" for partial writes.

------------------------------------------------------------------------
r10384 | cbiere | 2005-12-17 05:32:06 -0500 (Sat, 17 Dec 2005) | 3 lines

gip_country():
 * Made country detection work with 6to4 addresses.

------------------------------------------------------------------------
r10383 | cbiere | 2005-12-17 05:30:43 -0500 (Sat, 17 Dec 2005) | 4 lines

fi_alias():
file_info_hash_insert():
 * Don't ignore the result of g_slist_append().

------------------------------------------------------------------------
r10382 | daichik | 2005-12-17 04:38:29 -0500 (Sat, 17 Dec 2005) | 2 lines

Sync'd.

------------------------------------------------------------------------
r10381 | daichik | 2005-12-17 04:34:01 -0500 (Sat, 17 Dec 2005) | 2 lines

Minor updates.

------------------------------------------------------------------------
r10380 | daichik | 2005-12-17 04:29:42 -0500 (Sat, 17 Dec 2005) | 2 lines

Sync'd with the source.

------------------------------------------------------------------------
r10379 | daichik | 2005-12-17 04:25:45 -0500 (Sat, 17 Dec 2005) | 2 lines

Modified comments for Doxygen.

------------------------------------------------------------------------
r10378 | cbiere | 2005-12-16 09:51:42 -0500 (Fri, 16 Dec 2005) | 2 lines

Added NODES_F_FORCE flag for bypassing the "unstable IP" blockade.

------------------------------------------------------------------------
r10377 | cbiere | 2005-12-16 09:40:30 -0500 (Fri, 16 Dec 2005) | 5 lines

node_can_accept_connection():
 * Removed the "connection is incoming" requirement so that outgoing
   connections respect the ultrapeer limit as well. This should fix
   bug #1379123.

------------------------------------------------------------------------
r10376 | cbiere | 2005-12-16 05:01:56 -0500 (Fri, 16 Dec 2005) | 2 lines

Added another spammer.

------------------------------------------------------------------------
r10375 | cbiere | 2005-12-16 04:49:51 -0500 (Fri, 16 Dec 2005) | 3 lines

download_request():
 * Make sure download_convert_to_urires() is only used if an SHA1 is known.

------------------------------------------------------------------------
r10374 | cbiere | 2005-12-16 04:37:19 -0500 (Fri, 16 Dec 2005) | 4 lines

download_request():
 * The overlap size must be taken into account when checking for range
   mismatches.

------------------------------------------------------------------------
r10373 | cbiere | 2005-12-15 12:16:59 -0500 (Thu, 15 Dec 2005) | 4 lines

* Fixed bug that prevented adding a GGEP IPV6 for a true IPv6 address.
* Extract IPv6 address GGEP IPV6 from pongs and use it as the node address
  if the hop count is zero.

------------------------------------------------------------------------
r10372 | cbiere | 2005-12-15 12:12:47 -0500 (Thu, 15 Dec 2005) | 3 lines

* Converted PONG_META_HAS_* defines to enums.
* Added PONG_META_HAS_IPV6.

------------------------------------------------------------------------
r10371 | cbiere | 2005-12-15 05:20:29 -0500 (Thu, 15 Dec 2005) | 4 lines

filter_apply_changes():
 * Always call filter_adapt_order() so that drag and drop changes become
   effective.

------------------------------------------------------------------------
r10370 | cbiere | 2005-12-13 16:31:20 -0500 (Tue, 13 Dec 2005) | 2 lines

Trigger a graphical update once the bitzi meta-data is updated.

------------------------------------------------------------------------
r10369 | daichik | 2005-12-13 09:18:19 -0500 (Tue, 13 Dec 2005) | 2 lines

Style change.

------------------------------------------------------------------------
r10367 | rmanfredi | 2005-12-12 01:59:29 -0500 (Mon, 12 Dec 2005) | 2 lines

Added src/if/ui/gtk/uploads.h.

------------------------------------------------------------------------
r10366 | rmanfredi | 2005-12-11 15:54:40 -0500 (Sun, 11 Dec 2005) | 2 lines

Version of 2005-12-11.

------------------------------------------------------------------------
r10365 | rmanfredi | 2005-12-11 15:37:13 -0500 (Sun, 11 Dec 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10364 | rmanfredi | 2005-12-11 15:35:23 -0500 (Sun, 11 Dec 2005) | 3 lines

Added d_fast_assert.U to configure FAST_ASSERTIONS.
Have that setting displayed at the end of Configure.

------------------------------------------------------------------------
r10363 | rmanfredi | 2005-12-11 09:32:10 -0500 (Sun, 11 Dec 2005) | 2 lines

Fixed metaconfig symbol usage.

------------------------------------------------------------------------
r10362 | rmanfredi | 2005-12-11 09:31:10 -0500 (Sun, 11 Dec 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10361 | rmanfredi | 2005-12-11 09:30:18 -0500 (Sun, 11 Dec 2005) | 2 lines

Added two new metaconfig units.

------------------------------------------------------------------------
r10360 | rmanfredi | 2005-12-11 08:52:52 -0500 (Sun, 11 Dec 2005) | 2 lines

Allow launching of "browse host" on expired (completed) uploads from the GUI.

------------------------------------------------------------------------
r10359 | rmanfredi | 2005-12-10 07:54:17 -0500 (Sat, 10 Dec 2005) | 3 lines

Browse all the hosts of the selected entries like GTK2 does, not simply
the host listed in the detailed information pane.

------------------------------------------------------------------------
r10357 | daichik | 2005-12-08 08:06:40 -0500 (Thu, 08 Dec 2005) | 2 lines

Revised.

------------------------------------------------------------------------
r10356 | daichik | 2005-12-08 07:48:05 -0500 (Thu, 08 Dec 2005) | 2 lines

Sync'd with the source.

------------------------------------------------------------------------
r10355 | cbiere | 2005-12-07 19:49:08 -0500 (Wed, 07 Dec 2005) | 3 lines

settings_getphysmemsize():
 * Corrected type of "pagesize" from guint32 to size_t.

------------------------------------------------------------------------
r10354 | cbiere | 2005-12-07 19:47:40 -0500 (Wed, 07 Dec 2005) | 5 lines

http_range_parse():
 * Handle "last-byte-pos" of a range request properly. This value may extend
   beyond the file length and must be adjusted by the server, it's not a
   malformed request.

------------------------------------------------------------------------
r10353 | cbiere | 2005-12-07 19:45:47 -0500 (Wed, 07 Dec 2005) | 5 lines

main_gui_shutdown():
 * Close the preferences dialog on shutdown too because for example
   hitting the "close" button, which causes the window dimensions to be
   stored, may cause a crash if the property system has already been shutdown.

------------------------------------------------------------------------
r10352 | cbiere | 2005-12-07 18:10:50 -0500 (Wed, 07 Dec 2005) | 7 lines

bio_sendfile():
 * Watch out for off_t overflows.
 * [mmap] Align the map offset to the page size because some implementations
   require this.
 * [mmap] Don't try send more data with write() than we've actually mapped.
 * [mmap] Make sure the 256 KiB window does not overflow off_t.

------------------------------------------------------------------------
r10351 | cbiere | 2005-12-07 18:03:48 -0500 (Wed, 07 Dec 2005) | 4 lines

compat_pagesize():
	* Changed return type from glong to size_t.
	* Cache the result from compat_pagesize_intern().

------------------------------------------------------------------------
r10350 | rmanfredi | 2005-12-05 16:24:04 -0500 (Mon, 05 Dec 2005) | 2 lines

Added ranges for "Sound Control Media Protection, Ltd.".

------------------------------------------------------------------------
r10349 | daichik | 2005-12-03 21:14:44 -0500 (Sat, 03 Dec 2005) | 2 lines

Discarded context labels by Alexander N. Sornes.

------------------------------------------------------------------------
r10348 | daichik | 2005-12-03 18:14:08 -0500 (Sat, 03 Dec 2005) | 2 lines

Updated Norwegian Bokmal translations by Alexander N. Sornes.

------------------------------------------------------------------------
r10347 | cbiere | 2005-12-02 17:54:02 -0500 (Fri, 02 Dec 2005) | 5 lines

recurse_scan():
 * Removed unnecessary variable "dir_slash".
 * Use make_pathname() to prevent duplicating code.
 * Inverted if/else order to get rid of an unnecessary "!".

------------------------------------------------------------------------
r10346 | cbiere | 2005-12-02 17:50:42 -0500 (Fri, 02 Dec 2005) | 4 lines

make_pathname():
 * Use "(void *) 0" for variadic parameter lists.
 * Renamed "l" to "n" for better readability.

------------------------------------------------------------------------
r10345 | cbiere | 2005-12-02 17:18:37 -0500 (Fri, 02 Dec 2005) | 2 lines

Added German translations.

------------------------------------------------------------------------
r10344 | daichik | 2005-12-02 16:53:09 -0500 (Fri, 02 Dec 2005) | 2 lines

Very minor updates.

------------------------------------------------------------------------
r10343 | daichik | 2005-12-02 16:49:50 -0500 (Fri, 02 Dec 2005) | 2 lines

Added Norwegian Bokmal translations by Alexander Nicolaysen Sornes.

------------------------------------------------------------------------
r10342 | daichik | 2005-12-02 16:49:02 -0500 (Fri, 02 Dec 2005) | 2 lines

Updated Norwegian Bokmal translations by Alexander Nicolaysen Sornes.

------------------------------------------------------------------------
r10341 | daichik | 2005-12-02 16:41:27 -0500 (Fri, 02 Dec 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10340 | cbiere | 2005-12-01 17:27:10 -0500 (Thu, 01 Dec 2005) | 2 lines

Fixed Browse-Host-Of-Death.

------------------------------------------------------------------------
r10339 | rmanfredi | 2005-12-01 15:23:24 -0500 (Thu, 01 Dec 2005) | 3 lines

First take at browse-host from the upload pane.
Unfortunately, this method allows only browsing of *active* uploads.

------------------------------------------------------------------------
r10338 | cbiere | 2005-11-30 15:10:07 -0500 (Wed, 30 Nov 2005) | 4 lines

on_button_prefs_close_clicked():
on_dlg_prefs_delete_event():
 * Added precautions against an unrealized dialog window.

------------------------------------------------------------------------
r10337 | nonamer | 2005-11-30 13:04:05 -0500 (Wed, 30 Nov 2005) | 2 lines

Updated, back to some other errors, like where to find G_LOG_LEVEL0

------------------------------------------------------------------------
r10336 | rmanfredi | 2005-11-30 12:54:44 -0500 (Wed, 30 Nov 2005) | 2 lines

Assume remote servent supports HTTP/1.1 unless proven otherwise.

------------------------------------------------------------------------
r10335 | rmanfredi | 2005-11-30 11:43:41 -0500 (Wed, 30 Nov 2005) | 3 lines

Asynchronous freeing for TX and RX stack means we must disable them when
tx_free() or rx_free() is called...

------------------------------------------------------------------------
r10334 | rmanfredi | 2005-11-29 17:44:15 -0500 (Tue, 29 Nov 2005) | 2 lines

Version of 2005-11-29.

------------------------------------------------------------------------
r10333 | rmanfredi | 2005-11-29 17:41:33 -0500 (Tue, 29 Nov 2005) | 4 lines

Update downloads pane when browse-host is created or when search is closed.
Avoid memory leak when we cannot create the browse-host due to a duplicate
download running.

------------------------------------------------------------------------
r10332 | rmanfredi | 2005-11-29 17:14:56 -0500 (Tue, 29 Nov 2005) | 2 lines

Always collect the TX and RX stacks asynchronously.

------------------------------------------------------------------------
r10331 | cbiere | 2005-11-29 09:57:00 -0500 (Tue, 29 Nov 2005) | 3 lines

host_addr_6to4_to_ipv4():
 * Fixed compiler warning for IPv4-only compilation.

------------------------------------------------------------------------
r10329 | daichik | 2005-11-28 10:23:03 -0500 (Mon, 28 Nov 2005) | 2 lines

Sync'd.

------------------------------------------------------------------------
r10327 | cbiere | 2005-11-27 15:32:22 -0500 (Sun, 27 Nov 2005) | 4 lines

shell_add():
 * g_message() is more appropriate than g_warning() here.
 * Removed spurious line break from message.

------------------------------------------------------------------------
r10326 | cbiere | 2005-11-27 15:20:46 -0500 (Sun, 27 Nov 2005) | 2 lines

Added "RESCAN" command to the shell interface.

------------------------------------------------------------------------
r10325 | rmanfredi | 2005-11-27 11:18:37 -0500 (Sun, 27 Nov 2005) | 2 lines

Rolled back iodiotic fix.

------------------------------------------------------------------------
r10324 | rmanfredi | 2005-11-27 10:23:25 -0500 (Sun, 27 Nov 2005) | 4 lines

Must convert "start_stamp" from GMT back to local time when deciding whether
a search has expired, since search creation time is expressed using the
kernel local time.

------------------------------------------------------------------------
r10323 | cbiere | 2005-11-27 00:49:41 -0500 (Sun, 27 Nov 2005) | 2 lines

Added Alexander N. S��rnes to the list of translators.

------------------------------------------------------------------------
r10322 | cbiere | 2005-11-27 00:28:37 -0500 (Sun, 27 Nov 2005) | 2 lines

Added partial Norwegian Bokm��l translation by Alexander N. S��rnes.

------------------------------------------------------------------------
r10321 | cbiere | 2005-11-26 23:37:45 -0500 (Sat, 26 Nov 2005) | 11 lines

* Changed SEARCH_{PASSIVE,ENABLED,BROWSE} from macro definitions to enums
  and added "_F_" to make clear these are flags.
* search_gui_new_search_entered():
  * Added half-decent support for "browse:<hort>:<port>" to support abitrary
    hosts using the search inputbox.
* search_expired():
  * Don't use "start_stamp" because its value unreliable; searches with
    session lifetime are never considered expired here.
* xml_to_search():
  * Restore searches with session lifetime as disabled.

------------------------------------------------------------------------
r10320 | cbiere | 2005-11-26 17:35:12 -0500 (Sat, 26 Nov 2005) | 2 lines

Updated prototypes.

------------------------------------------------------------------------
r10319 | cbiere | 2005-11-26 17:24:40 -0500 (Sat, 26 Nov 2005) | 3 lines

* Ignore "Browse Host", "Disconnect" and "Reverse DNS Lookup" for the
  "Pseudo UDP node".

------------------------------------------------------------------------
r10318 | cbiere | 2005-11-26 17:19:12 -0500 (Sat, 26 Nov 2005) | 4 lines

struct gnet_node_info:
 * Added member "is_pseudo" so that one can determine whether the given
   node is the pseudo UDP node or an usual node.

------------------------------------------------------------------------
r10317 | cbiere | 2005-11-26 17:17:15 -0500 (Sat, 26 Nov 2005) | 4 lines

node_remove_by_handle():
 * Don't disable UDP if the "pseudo UDP node" is removed. This effect is not
   obvious and enabling UDP again is not equally simple.

------------------------------------------------------------------------
r10316 | cbiere | 2005-11-26 11:29:07 -0500 (Sat, 26 Nov 2005) | 3 lines

* Replaced G_GNUC_FORMAT() with PRINTF_FUNC_PTR() because older GCCs don't
  like function attributes for function pointers.

------------------------------------------------------------------------
r10315 | cbiere | 2005-11-26 11:26:30 -0500 (Sat, 26 Nov 2005) | 3 lines

* Added PRINTF_FUNC_PTR() because older GCCs don't like function attributes
  for function pointers.

------------------------------------------------------------------------
r10314 | cbiere | 2005-11-25 22:45:53 -0500 (Fri, 25 Nov 2005) | 2 lines

Removed dead UHCs.

------------------------------------------------------------------------
r10313 | cbiere | 2005-11-25 22:44:35 -0500 (Fri, 25 Nov 2005) | 3 lines

socket_connect_prepare():
 * Suppress warning about unused parameter flags when compiling without GNUTLS.

------------------------------------------------------------------------
r10312 | cbiere | 2005-11-25 20:58:49 -0500 (Fri, 25 Nov 2005) | 2 lines

...and the scum moves on. Thanks a lot Voxel.net, good job.

------------------------------------------------------------------------
r10311 | cbiere | 2005-11-25 19:53:07 -0500 (Fri, 25 Nov 2005) | 2 lines

Fixed compile error for systems without getaddrinfo(). Patch by Ian Sheldon.

------------------------------------------------------------------------
r10309 | daichik | 2005-11-24 10:34:34 -0500 (Thu, 24 Nov 2005) | 2 lines

Added.

------------------------------------------------------------------------
r10302 | daichik | 2005-11-23 01:23:47 -0500 (Wed, 23 Nov 2005) | 2 lines

Sync'd.

------------------------------------------------------------------------
r10294 | rmanfredi | 2005-11-22 16:44:30 -0500 (Tue, 22 Nov 2005) | 2 lines

Last second change.

------------------------------------------------------------------------
r10293 | rmanfredi | 2005-11-22 16:42:49 -0500 (Tue, 22 Nov 2005) | 2 lines

Made it clear that this message can be sent unsolicited.

------------------------------------------------------------------------
r10292 | rmanfredi | 2005-11-22 16:41:01 -0500 (Tue, 22 Nov 2005) | 2 lines

Added mention of (unused yet) GTKG/20v1.

------------------------------------------------------------------------
r10291 | rmanfredi | 2005-11-22 16:40:00 -0500 (Tue, 22 Nov 2005) | 2 lines

Minor changes.

------------------------------------------------------------------------
r10290 | rmanfredi | 2005-11-22 16:38:11 -0500 (Tue, 22 Nov 2005) | 2 lines

Last minute update.

------------------------------------------------------------------------
r10289 | rmanfredi | 2005-11-22 16:36:55 -0500 (Tue, 22 Nov 2005) | 2 lines

Release 0.96 beta.

------------------------------------------------------------------------
r10288 | rmanfredi | 2005-11-22 16:17:40 -0500 (Tue, 22 Nov 2005) | 2 lines

Updated for 0.96.

------------------------------------------------------------------------
r10287 | rmanfredi | 2005-11-22 16:14:05 -0500 (Tue, 22 Nov 2005) | 2 lines

Added token keys for 0.96.

------------------------------------------------------------------------
r10286 | cbiere | 2005-11-22 14:37:22 -0500 (Tue, 22 Nov 2005) | 2 lines

More browse host action.

------------------------------------------------------------------------
r10285 | cbiere | 2005-11-22 14:34:26 -0500 (Tue, 22 Nov 2005) | 2 lines

Include "gtk/search_common.h" to make search_gui_new_browse_host() visible.

------------------------------------------------------------------------
r10284 | cbiere | 2005-11-22 14:32:15 -0500 (Tue, 22 Nov 2005) | 2 lines

Moved inclusion of "search.h" because it references "record_t".

------------------------------------------------------------------------
r10283 | rmanfredi | 2005-11-22 14:10:22 -0500 (Tue, 22 Nov 2005) | 2 lines

New locations for the FAQ.

------------------------------------------------------------------------
r10282 | rmanfredi | 2005-11-22 14:09:04 -0500 (Tue, 22 Nov 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10281 | rmanfredi | 2005-11-22 14:07:59 -0500 (Tue, 22 Nov 2005) | 2 lines

New set of subdirs.

------------------------------------------------------------------------
r10280 | rmanfredi | 2005-11-22 14:07:19 -0500 (Tue, 22 Nov 2005) | 2 lines

Created.

------------------------------------------------------------------------
r10279 | rmanfredi | 2005-11-22 14:05:47 -0500 (Tue, 22 Nov 2005) | 2 lines

Deleted.

------------------------------------------------------------------------
r10278 | daichik | 2005-11-22 10:36:25 -0500 (Tue, 22 Nov 2005) | 4 lines

* Formal name for U.K. gets shortened (it's still formal nonetheless).
* I was not sure whether "Leaf node" could be "Leafpeer" for the
  integrity with "Ultrapeer".

------------------------------------------------------------------------
r10277 | daichik | 2005-11-22 10:29:26 -0500 (Tue, 22 Nov 2005) | 2 lines

Sync'd with the sources.

------------------------------------------------------------------------
r10276 | nonamer | 2005-11-22 08:28:34 -0500 (Tue, 22 Nov 2005) | 2 lines

Typo's

------------------------------------------------------------------------
r10275 | rmanfredi | 2005-11-21 16:46:57 -0500 (Mon, 21 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10274 | rmanfredi | 2005-11-21 16:40:16 -0500 (Mon, 21 Nov 2005) | 2 lines

Fill-in extra info fields used for launching a browse-host from a node.

------------------------------------------------------------------------
r10273 | rmanfredi | 2005-11-21 16:38:05 -0500 (Mon, 21 Nov 2005) | 2 lines

Added FAQ-related files.

------------------------------------------------------------------------
r10272 | rmanfredi | 2005-11-21 16:37:11 -0500 (Mon, 21 Nov 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10271 | rmanfredi | 2005-11-21 16:36:24 -0500 (Mon, 21 Nov 2005) | 2 lines

Added 3 subdirs.

------------------------------------------------------------------------
r10270 | rmanfredi | 2005-11-21 16:36:03 -0500 (Mon, 21 Nov 2005) | 2 lines

Generated.

------------------------------------------------------------------------
r10269 | rmanfredi | 2005-11-21 16:34:51 -0500 (Mon, 21 Nov 2005) | 2 lines

Created.

------------------------------------------------------------------------
r10268 | rmanfredi | 2005-11-21 16:25:09 -0500 (Mon, 21 Nov 2005) | 2 lines

Updated before beta release.

------------------------------------------------------------------------
r10267 | rmanfredi | 2005-11-21 16:19:24 -0500 (Mon, 21 Nov 2005) | 2 lines

Feedback on browse-host launching now done in search_gui_new_browse_host().

------------------------------------------------------------------------
r10266 | rmanfredi | 2005-11-21 16:18:34 -0500 (Mon, 21 Nov 2005) | 2 lines

Added ability to launch browse-host from the Gnutella network pane.

------------------------------------------------------------------------
r10265 | rmanfredi | 2005-11-21 16:17:46 -0500 (Mon, 21 Nov 2005) | 2 lines

Always activate "purge" on the downloads pane, even for completed entries.

------------------------------------------------------------------------
r10264 | rmanfredi | 2005-11-21 16:16:25 -0500 (Mon, 21 Nov 2005) | 2 lines

Implemented browse-host launching from the active/queue download panes.

------------------------------------------------------------------------
r10263 | rmanfredi | 2005-11-21 16:15:38 -0500 (Mon, 21 Nov 2005) | 2 lines

Browsing from uploads not implemented yet.

------------------------------------------------------------------------
r10262 | rmanfredi | 2005-11-21 16:15:15 -0500 (Mon, 21 Nov 2005) | 2 lines

Factorized GUI feedback on browse-host launching here.

------------------------------------------------------------------------
r10261 | rmanfredi | 2005-11-21 16:14:28 -0500 (Mon, 21 Nov 2005) | 3 lines

Added extra information to the gnet_node_info_t structure to be able
to launch host browsing.

------------------------------------------------------------------------
r10260 | rmanfredi | 2005-11-21 16:13:47 -0500 (Mon, 21 Nov 2005) | 2 lines

Removed declaration of fi_purge().

------------------------------------------------------------------------
r10259 | rmanfredi | 2005-11-21 16:13:23 -0500 (Mon, 21 Nov 2005) | 2 lines

Added download_hostname().

------------------------------------------------------------------------
r10258 | rmanfredi | 2005-11-21 16:12:59 -0500 (Mon, 21 Nov 2005) | 2 lines

Removed guc_fi_purge().

------------------------------------------------------------------------
r10257 | rmanfredi | 2005-11-21 16:12:27 -0500 (Mon, 21 Nov 2005) | 2 lines

Return up to 15 alt-locations per hit.

------------------------------------------------------------------------
r10256 | rmanfredi | 2005-11-21 16:11:54 -0500 (Mon, 21 Nov 2005) | 2 lines

Made fi_purge() static.

------------------------------------------------------------------------
r10255 | rmanfredi | 2005-11-21 16:11:24 -0500 (Mon, 21 Nov 2005) | 2 lines

Monitor completion of browse-host downloads for which size is known.

------------------------------------------------------------------------
r10254 | cbiere | 2005-11-21 11:58:29 -0500 (Mon, 21 Nov 2005) | 2 lines

Added another spammer.

------------------------------------------------------------------------
r10253 | cbiere | 2005-11-21 11:20:12 -0500 (Mon, 21 Nov 2005) | 2 lines

Reverted visual changes to the nodes pane.

------------------------------------------------------------------------
r10251 | cbiere | 2005-11-20 13:57:33 -0500 (Sun, 20 Nov 2005) | 3 lines

update_row():
 * Update the status information periodically; not only on an event.

------------------------------------------------------------------------
r10248 | nonamer | 2005-11-20 04:33:49 -0500 (Sun, 20 Nov 2005) | 2 lines

Accepting the gifts from cbiere

------------------------------------------------------------------------
r10245 | daichik | 2005-11-20 02:19:22 -0500 (Sun, 20 Nov 2005) | 3 lines

Final update for release 0.96.
nonamer, they're gifts from cbiere.

------------------------------------------------------------------------
r10244 | cbiere | 2005-11-19 12:36:25 -0500 (Sat, 19 Nov 2005) | 2 lines

Changed "matches regex" to "matches the regex pattern".

------------------------------------------------------------------------
r10243 | cbiere | 2005-11-19 12:30:31 -0500 (Sat, 19 Nov 2005) | 2 lines

Changed "regex" to "regex pattern" as suggested by BP.

------------------------------------------------------------------------
r10242 | cbiere | 2005-11-19 07:40:49 -0500 (Sat, 19 Nov 2005) | 8 lines

search_gui_add_record():
 * Force an update of the parent node, so that sorting on # works correctly.
remove_selected_file():
 * Update the source counter for the parent node and force an update to
   preserve the sort order.
 * Don't remove the parent from the sha1->parent mapping table if a child
   node was removed.

------------------------------------------------------------------------
r10241 | cbiere | 2005-11-19 06:17:55 -0500 (Sat, 19 Nov 2005) | 3 lines

build_url_from_download():
 * Don't create a bogus URL for browse host downloads.

------------------------------------------------------------------------
r10240 | cbiere | 2005-11-19 06:15:44 -0500 (Sat, 19 Nov 2005) | 3 lines

tree_view_motion_timeout():
 * Focus or not is irrelevant.

------------------------------------------------------------------------
r10239 | cbiere | 2005-11-19 05:28:53 -0500 (Sat, 19 Nov 2005) | 2 lines

Store timestamps in human-readable form instead of raw integers.

------------------------------------------------------------------------
r10238 | cbiere | 2005-11-19 05:26:59 -0500 (Sat, 19 Nov 2005) | 2 lines

Added TIMESTAMP_BUF_LEN.

------------------------------------------------------------------------
r10237 | nonamer | 2005-11-19 04:27:58 -0500 (Sat, 19 Nov 2005) | 2 lines

Keep dutch translation up2date

------------------------------------------------------------------------
r10236 | rmanfredi | 2005-11-19 04:11:04 -0500 (Sat, 19 Nov 2005) | 2 lines

Remove compiler warning: time_t cast to int for formatting purposes.

------------------------------------------------------------------------
r10235 | daichik | 2005-11-19 03:26:52 -0500 (Sat, 19 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10234 | rmanfredi | 2005-11-18 17:59:34 -0500 (Fri, 18 Nov 2005) | 4 lines

Make sure we update the fileinfo properly when BH receives data.
Also update the "activity timestamp" on the download to avoid having it
flagged as "stalled" in the GUI after some time.

------------------------------------------------------------------------
r10233 | cbiere | 2005-11-18 17:46:55 -0500 (Fri, 18 Nov 2005) | 4 lines

* Renamed regression_checks() to utf8_regression_checks() and removed the
  static qualifier so that not using it currently doesn't cause compiler
  warnings.

------------------------------------------------------------------------
r10232 | cbiere | 2005-11-18 17:34:53 -0500 (Fri, 18 Nov 2005) | 2 lines

Renamed timestamp_locale_to_string_buf() to time_locale_to_string_buf().

------------------------------------------------------------------------
r10231 | rmanfredi | 2005-11-18 17:33:29 -0500 (Fri, 18 Nov 2005) | 2 lines

Update fileinfo status when browse-host download is completed.

------------------------------------------------------------------------
r10230 | rmanfredi | 2005-11-18 17:31:55 -0500 (Fri, 18 Nov 2005) | 3 lines

Don't say "Finished" when size is 0 and done is 0:  Most probably the size
is unknown and the download has not even started.

------------------------------------------------------------------------
r10229 | cbiere | 2005-11-18 17:31:04 -0500 (Fri, 18 Nov 2005) | 7 lines

* Renamed timestamp_locale_to_string_buf() to time_locale_to_string_buf()
  and reverted changes. Just accept that it returns a string using the
  locale's encoding.
* Added lazy_locale_to_ui_string() and lazy_locale_to_ui_string2().
* download_queue_v():
 * Use lazy_locale_to_ui_string() to convert the timestamp string for the GUI.

------------------------------------------------------------------------
r10228 | rmanfredi | 2005-11-18 17:01:35 -0500 (Fri, 18 Nov 2005) | 3 lines

Initialize d->bio correctly for browse-host for proper b/w display.
When we get EOF and the fileinfo says we got it all, mark BH complete.

------------------------------------------------------------------------
r10227 | rmanfredi | 2005-11-18 17:00:35 -0500 (Fri, 18 Nov 2005) | 2 lines

Added browse_host_io_source().

------------------------------------------------------------------------
r10226 | rmanfredi | 2005-11-18 14:21:08 -0500 (Fri, 18 Nov 2005) | 2 lines

Show amount of alt locs in parenthesis if more than 1.

------------------------------------------------------------------------
r10225 | rmanfredi | 2005-11-18 13:57:29 -0500 (Fri, 18 Nov 2005) | 2 lines

Don't verify/move completed browse-host downloads.

------------------------------------------------------------------------
r10224 | cbiere | 2005-11-18 12:26:34 -0500 (Fri, 18 Nov 2005) | 3 lines

timestamp_locale_to_string_buf():
 * Added missing offset to year.

------------------------------------------------------------------------
r10223 | cbiere | 2005-11-18 12:24:44 -0500 (Fri, 18 Nov 2005) | 3 lines

timestamp_locale_to_string_buf():
 * Added note for translators.

------------------------------------------------------------------------
r10222 | cbiere | 2005-11-18 12:06:06 -0500 (Fri, 18 Nov 2005) | 3 lines

timestamp_locale_to_string_buf():
 * Replaced strftime() so that we get the encoding we want.

------------------------------------------------------------------------
r10221 | daichik | 2005-11-18 10:21:03 -0500 (Fri, 18 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10220 | daichik | 2005-11-18 10:16:26 -0500 (Fri, 18 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10218 | cbiere | 2005-11-18 09:58:10 -0500 (Fri, 18 Nov 2005) | 3 lines

search_gui_get_info():
 * Don't convert the string, it should be UTF-8 already.

------------------------------------------------------------------------
r10217 | cbiere | 2005-11-18 08:25:19 -0500 (Fri, 18 Nov 2005) | 3 lines

gui_create_dlg_faq():
 * Don't release the created strings, file_path_set() doesn't copy them.

------------------------------------------------------------------------
r10216 | cbiere | 2005-11-18 08:20:56 -0500 (Fri, 18 Nov 2005) | 2 lines

Sort properly when using the "Range" column as key.

------------------------------------------------------------------------
r10215 | cbiere | 2005-11-18 05:13:44 -0500 (Fri, 18 Nov 2005) | 2 lines

Added GUI element to configure IPv4/IPv6 support.

------------------------------------------------------------------------
r10211 | cbiere | 2005-11-17 17:08:08 -0500 (Thu, 17 Nov 2005) | 2 lines

Changed language codes (except zh_CN) to two-letter ISO 639 codes.

------------------------------------------------------------------------
r10210 | cbiere | 2005-11-17 16:48:19 -0500 (Thu, 17 Nov 2005) | 2 lines

Added "Browse Host" item to the popup menu at the nodes pane.

------------------------------------------------------------------------
r10209 | cbiere | 2005-11-17 16:14:16 -0500 (Thu, 17 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10208 | rmanfredi | 2005-11-17 16:08:07 -0500 (Thu, 17 Nov 2005) | 3 lines

Disable restart and reissue timeout for non-active searches (passive and
browse).

------------------------------------------------------------------------
r10207 | cbiere | 2005-11-17 16:07:18 -0500 (Thu, 17 Nov 2005) | 2 lines

Added "Browse Host" item to the popup menu at the nodes pane.

------------------------------------------------------------------------
r10206 | cbiere | 2005-11-17 16:04:44 -0500 (Thu, 17 Nov 2005) | 2 lines

Added missing prototypes.

------------------------------------------------------------------------
r10205 | rmanfredi | 2005-11-17 16:04:33 -0500 (Thu, 17 Nov 2005) | 2 lines

Don't mess-up with "fi->done" when there's no chunklist...

------------------------------------------------------------------------
r10204 | cbiere | 2005-11-17 15:50:38 -0500 (Thu, 17 Nov 2005) | 2 lines

Added "Browse Host" item to the popup menus at downloads/queue/uploads.

------------------------------------------------------------------------
r10203 | cbiere | 2005-11-17 15:47:42 -0500 (Thu, 17 Nov 2005) | 2 lines

Added handler stubs for *_browse_host_active().

------------------------------------------------------------------------
r10202 | rmanfredi | 2005-11-17 15:11:31 -0500 (Thu, 17 Nov 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r10201 | rmanfredi | 2005-11-17 15:09:09 -0500 (Thu, 17 Nov 2005) | 2 lines

Update GUI information when size of browse host is known.

------------------------------------------------------------------------
r10200 | rmanfredi | 2005-11-17 15:08:21 -0500 (Thu, 17 Nov 2005) | 3 lines

Added counting of received bytes during host browsing.
Better handling of sudden file size knowledge.

------------------------------------------------------------------------
r10199 | rmanfredi | 2005-11-17 15:06:26 -0500 (Thu, 17 Nov 2005) | 2 lines

Added counting of received bytes during host browsing.

------------------------------------------------------------------------
r10198 | nonamer | 2005-11-17 13:49:51 -0500 (Thu, 17 Nov 2005) | 2 lines

Don't store an int as a string ...

------------------------------------------------------------------------
r10196 | cbiere | 2005-11-17 11:49:53 -0500 (Thu, 17 Nov 2005) | 2 lines

Moved localized files.

------------------------------------------------------------------------
r10195 | cbiere | 2005-11-17 11:44:55 -0500 (Thu, 17 Nov 2005) | 2 lines

Moving files.

------------------------------------------------------------------------
r10194 | cbiere | 2005-11-17 10:57:33 -0500 (Thu, 17 Nov 2005) | 2 lines

Removed dead code.

------------------------------------------------------------------------
r10193 | nonamer | 2005-11-17 02:58:57 -0500 (Thu, 17 Nov 2005) | 3 lines

Make PARQ backoff a bit on every failed QUEUE attempt. The failed
queue attempts are stored so that it doesn't get reset on the next restart

------------------------------------------------------------------------
r10192 | cbiere | 2005-11-16 16:08:47 -0500 (Wed, 16 Nov 2005) | 3 lines

icon_init():
 * Commented out code that causes a crash at least with twm on iconize.

------------------------------------------------------------------------
r10191 | rmanfredi | 2005-11-16 15:33:56 -0500 (Wed, 16 Nov 2005) | 3 lines

Was still incorrectly handling Z_STREAM_END, causing the last message
to be incorrectly dropped.

------------------------------------------------------------------------
r10190 | rmanfredi | 2005-11-16 15:33:03 -0500 (Wed, 16 Nov 2005) | 2 lines

Added debugging trace.

------------------------------------------------------------------------
r10189 | rmanfredi | 2005-11-16 15:32:34 -0500 (Wed, 16 Nov 2005) | 2 lines

Count the query hits we receive as part of browse-host as Gnutella traffic.

------------------------------------------------------------------------
r10188 | rmanfredi | 2005-11-16 15:04:22 -0500 (Wed, 16 Nov 2005) | 4 lines

Forgot to call gui_search_force_update_tab_label() when issuing a
browse host.  Since we don't move to the newly created search, the
tab was not updated immediately.

------------------------------------------------------------------------
r10187 | cbiere | 2005-11-16 08:35:14 -0500 (Wed, 16 Nov 2005) | 2 lines

Some functions were moved from gtk-missing.c to misc.c.

------------------------------------------------------------------------
r10186 | nonamer | 2005-11-16 08:29:06 -0500 (Wed, 16 Nov 2005) | 3 lines

Somewhat more consistent translation.
I am supposed to ask cbiere or rmanfredi, I don't know what the question is. Neither what the answer would be.

------------------------------------------------------------------------
r10185 | cbiere | 2005-11-16 07:53:49 -0500 (Wed, 16 Nov 2005) | 2 lines

Fixed restoring of the pane positions.

------------------------------------------------------------------------
r10184 | rmanfredi | 2005-11-16 05:55:54 -0500 (Wed, 16 Nov 2005) | 2 lines

Propagated GTK1 changes that were absent in the GTK2 version.

------------------------------------------------------------------------
r10183 | cbiere | 2005-11-16 04:56:54 -0500 (Wed, 16 Nov 2005) | 2 lines

Replaced __func__.

------------------------------------------------------------------------
r10182 | cbiere | 2005-11-16 04:55:38 -0500 (Wed, 16 Nov 2005) | 3 lines

* Added const-qualifiers.
* Added G_GNUC_PRINTF() for print-like callback functions.

------------------------------------------------------------------------
r10181 | daichik | 2005-11-16 04:41:09 -0500 (Wed, 16 Nov 2005) | 2 lines

Ask cbiere or rmanfredi.

------------------------------------------------------------------------
r10180 | nonamer | 2005-11-16 04:26:22 -0500 (Wed, 16 Nov 2005) | 2 lines

Someday daichick will stop adding more and more translation ;)

------------------------------------------------------------------------
r10179 | daichik | 2005-11-16 04:20:25 -0500 (Wed, 16 Nov 2005) | 2 lines

You're already translator, aren't you?

------------------------------------------------------------------------
r10178 | daichik | 2005-11-16 04:11:21 -0500 (Wed, 16 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10177 | daichik | 2005-11-16 04:10:29 -0500 (Wed, 16 Nov 2005) | 2 lines

Updated Greek translations by Bouklis Panos.

------------------------------------------------------------------------
r10176 | daichik | 2005-11-16 04:04:30 -0500 (Wed, 16 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10175 | daichik | 2005-11-16 03:58:26 -0500 (Wed, 16 Nov 2005) | 4 lines

* Corrected typos.
* Changed spelling in American English style, because British English
  has own language code "en_GB".

------------------------------------------------------------------------
r10174 | daichik | 2005-11-16 03:18:31 -0500 (Wed, 16 Nov 2005) | 2 lines

Marked strings translatable.

------------------------------------------------------------------------
r10173 | daichik | 2005-11-16 03:13:24 -0500 (Wed, 16 Nov 2005) | 4 lines

* Corrected typos.
* Changed spelling in American English style, because British English
  has own language code "en_GB".

------------------------------------------------------------------------
r10172 | cbiere | 2005-11-15 20:14:33 -0500 (Tue, 15 Nov 2005) | 4 lines

search_new():
 * Removed C++ style comment.
 * Don't mess with the query string if it's a passive or browse host search.

------------------------------------------------------------------------
r10171 | cbiere | 2005-11-15 20:11:54 -0500 (Tue, 15 Nov 2005) | 2 lines

Added missing search_gui_browse_selected().

------------------------------------------------------------------------
r10170 | cbiere | 2005-11-15 20:05:37 -0500 (Tue, 15 Nov 2005) | 3 lines

download_request():
 * Added missing check against NULL after header_get().

------------------------------------------------------------------------
r10169 | cbiere | 2005-11-15 17:23:33 -0500 (Tue, 15 Nov 2005) | 2 lines

Added a few translations.

------------------------------------------------------------------------
r10168 | cbiere | 2005-11-15 16:42:19 -0500 (Tue, 15 Nov 2005) | 2 lines

Killed another G_MAXUINT64.

------------------------------------------------------------------------
r10167 | cbiere | 2005-11-15 16:41:13 -0500 (Tue, 15 Nov 2005) | 2 lines

Removed unnecessary G_MAXUINT64 macro.

------------------------------------------------------------------------
r10166 | rmanfredi | 2005-11-15 16:33:11 -0500 (Tue, 15 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10165 | rmanfredi | 2005-11-15 16:30:07 -0500 (Tue, 15 Nov 2005) | 3 lines

Must NOT perform any processing on "tx" after invoking the upper layer's
service routine: the whole stack may have been dismantled already!

------------------------------------------------------------------------
r10164 | rmanfredi | 2005-11-15 16:28:43 -0500 (Tue, 15 Nov 2005) | 2 lines

Do not report decompression failure for Z_STREAM_END.

------------------------------------------------------------------------
r10163 | rmanfredi | 2005-11-15 16:28:08 -0500 (Tue, 15 Nov 2005) | 2 lines

Added "chunk_end" callback to warn upper layer that data reception is finished.

------------------------------------------------------------------------
r10162 | rmanfredi | 2005-11-15 16:27:09 -0500 (Tue, 15 Nov 2005) | 2 lines

Made RX stack creation look like TX stack creation.

------------------------------------------------------------------------
r10161 | rmanfredi | 2005-11-15 16:26:01 -0500 (Tue, 15 Nov 2005) | 2 lines

Added more ui->core calls.

------------------------------------------------------------------------
r10160 | rmanfredi | 2005-11-15 16:25:28 -0500 (Tue, 15 Nov 2005) | 2 lines

[GTK1] Added client-side "browse host" support.

------------------------------------------------------------------------
r10159 | rmanfredi | 2005-11-15 16:21:42 -0500 (Tue, 15 Nov 2005) | 2 lines

Added client-side "browse host" support.

------------------------------------------------------------------------
r10158 | rmanfredi | 2005-11-15 16:21:37 -0500 (Tue, 15 Nov 2005) | 2 lines

Fixed ctx->utf8_name allocation.

------------------------------------------------------------------------
r10157 | rmanfredi | 2005-11-15 16:19:21 -0500 (Tue, 15 Nov 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10156 | rmanfredi | 2005-11-15 16:18:36 -0500 (Tue, 15 Nov 2005) | 2 lines

Added bh_download.c.

------------------------------------------------------------------------
r10155 | rmanfredi | 2005-11-15 16:17:53 -0500 (Tue, 15 Nov 2005) | 2 lines

Added src/core/bh_download.[ch].

------------------------------------------------------------------------
r10154 | rmanfredi | 2005-11-15 16:14:44 -0500 (Tue, 15 Nov 2005) | 2 lines

Added definition for G_MAXUINT64 (missing in glib1.x).

------------------------------------------------------------------------
r10153 | cbiere | 2005-11-15 15:21:46 -0500 (Tue, 15 Nov 2005) | 2 lines

Added missing gui_menu_shutdown() stub for GTK1.

------------------------------------------------------------------------
r10152 | cbiere | 2005-11-15 09:53:28 -0500 (Tue, 15 Nov 2005) | 2 lines

Hide Help->Keyboard shortcuts for now.

------------------------------------------------------------------------
r10151 | cbiere | 2005-11-15 09:47:10 -0500 (Tue, 15 Nov 2005) | 3 lines

* Added gui_menu_shutdown() to remove signal handlers on shutdown.
* Removed auto-collapse/expand stuff.

------------------------------------------------------------------------
r10150 | cbiere | 2005-11-15 09:42:10 -0500 (Tue, 15 Nov 2005) | 3 lines

tree_view_motion_timeout():
 * Check for focus too.

------------------------------------------------------------------------
r10149 | cbiere | 2005-11-15 09:37:25 -0500 (Tue, 15 Nov 2005) | 3 lines

* Style fixes.
* Added missing #include for prototype.

------------------------------------------------------------------------
r10148 | cbiere | 2005-11-15 09:32:33 -0500 (Tue, 15 Nov 2005) | 3 lines

* Replaced memory allocation; walloc() is not necessary here; make
  pseudo-leaks disappear from TRACK_ZALLOC.

------------------------------------------------------------------------
r10147 | cbiere | 2005-11-15 09:29:05 -0500 (Tue, 15 Nov 2005) | 3 lines

* Fixed recent memory leaks.
* Moved mostly static columns to the parent level.

------------------------------------------------------------------------
r10146 | cbiere | 2005-11-14 08:18:00 -0500 (Mon, 14 Nov 2005) | 3 lines

* Claim co-authorship.
* Mark as stable again.

------------------------------------------------------------------------
r10145 | cbiere | 2005-11-14 08:10:05 -0500 (Mon, 14 Nov 2005) | 4 lines

* Added IPv6 support to the search results filter.
* Changed format for storing IP filter rules from IP + netmask to
  IP/netmask (CIDR).

------------------------------------------------------------------------
r10144 | cbiere | 2005-11-14 08:05:36 -0500 (Mon, 14 Nov 2005) | 2 lines

Added missing handling of IPv6 addresses.

------------------------------------------------------------------------
r10143 | cbiere | 2005-11-14 08:04:22 -0500 (Mon, 14 Nov 2005) | 3 lines

hostiles_check():
 * Check 6to4 addresses against the hostiles list as well.

------------------------------------------------------------------------
r10142 | cbiere | 2005-11-14 07:48:54 -0500 (Mon, 14 Nov 2005) | 2 lines

Removed dead code.

------------------------------------------------------------------------
r10141 | cbiere | 2005-11-14 07:47:28 -0500 (Mon, 14 Nov 2005) | 2 lines

Added host_addr_6to4_to_ipv4().

------------------------------------------------------------------------
r10140 | cbiere | 2005-11-14 07:46:34 -0500 (Mon, 14 Nov 2005) | 2 lines

Updated some comments.

------------------------------------------------------------------------
r10139 | cbiere | 2005-11-14 07:45:56 -0500 (Mon, 14 Nov 2005) | 3 lines

node_is_now_connected():
 * Removed weird/ancient comment.

------------------------------------------------------------------------
r10138 | cbiere | 2005-11-14 07:45:11 -0500 (Mon, 14 Nov 2005) | 3 lines

bio_sendfile():
 * Added check for HAS_MADVISE.

------------------------------------------------------------------------
r10137 | cbiere | 2005-11-14 07:43:56 -0500 (Mon, 14 Nov 2005) | 2 lines

Removed useless comment.

------------------------------------------------------------------------
r10136 | nonamer | 2005-11-14 03:14:47 -0500 (Mon, 14 Nov 2005) | 2 lines

Updated dutch translation

------------------------------------------------------------------------
r10135 | cbiere | 2005-11-13 09:41:28 -0500 (Sun, 13 Nov 2005) | 2 lines

Fixed restoring of GtkOptionMenu settings.

------------------------------------------------------------------------
r10134 | daichik | 2005-11-13 08:44:52 -0500 (Sun, 13 Nov 2005) | 2 lines

Minor corrections.

------------------------------------------------------------------------
r10133 | daichik | 2005-11-13 08:23:02 -0500 (Sun, 13 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10132 | daichik | 2005-11-13 08:21:52 -0500 (Sun, 13 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10131 | cbiere | 2005-11-13 08:20:51 -0500 (Sun, 13 Nov 2005) | 2 lines

Corrected a tooltip: "File" vs. "Settings".

------------------------------------------------------------------------
r10130 | cbiere | 2005-11-13 07:42:15 -0500 (Sun, 13 Nov 2005) | 3 lines

* Added missing units.
* Added missing translation tags.

------------------------------------------------------------------------
r10129 | cbiere | 2005-11-13 07:24:24 -0500 (Sun, 13 Nov 2005) | 2 lines

Changed column title from "Charset" to "Encoding".

------------------------------------------------------------------------
r10128 | cbiere | 2005-11-13 07:00:26 -0500 (Sun, 13 Nov 2005) | 3 lines

prop_parse_timestamp():
 * Fixed bogus compiler warning.

------------------------------------------------------------------------
r10127 | cbiere | 2005-11-13 05:36:12 -0500 (Sun, 13 Nov 2005) | 2 lines

Added FrostWire's Gnutella vendor ID "SNOW".

------------------------------------------------------------------------
r10126 | cbiere | 2005-11-13 04:49:04 -0500 (Sun, 13 Nov 2005) | 3 lines

socket_read():
 * Style fix.

------------------------------------------------------------------------
r10125 | cbiere | 2005-11-13 04:42:45 -0500 (Sun, 13 Nov 2005) | 4 lines

socket_read():
 * PARQ's "QUEUE *" request was not listed as valid handshake so it caused a
   failed TLS handshake.

------------------------------------------------------------------------
r10124 | cbiere | 2005-11-12 16:50:12 -0500 (Sat, 12 Nov 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r10123 | cbiere | 2005-11-12 15:56:45 -0500 (Sat, 12 Nov 2005) | 3 lines

filename_to_utf8_normalized():
 * Prevent misdetection of ISO-8859-* which would mangle UTF-8.

------------------------------------------------------------------------
r10122 | cbiere | 2005-11-12 15:14:43 -0500 (Sat, 12 Nov 2005) | 15 lines

get_filename_charsets():
 * Skip duplicate listings of the locale charset or UTF-8.
 * Always append the locale charset (if not listed and not UTF-8) to the list.
locale_init():
 * Moved iconv() related initializations to conversion_init().
hyper_iconv():
complete_iconv():
 * Added parameter "abort_on_error" to stop conversion on soft errors if
   requested.
filename_to_utf8_normalized():
 * Try all charsets listed in G_FILENAME_ENCODING and use the first
   successfully converted string or just strip non-UTF-8 characters on
   complete failure.
 * Show some warnings and debug messages for now.

------------------------------------------------------------------------
r10121 | cbiere | 2005-11-12 13:31:40 -0500 (Sat, 12 Nov 2005) | 2 lines

Removed unnecessary casts.

------------------------------------------------------------------------
r10120 | cbiere | 2005-11-12 07:04:35 -0500 (Sat, 12 Nov 2005) | 4 lines

* Fixed a recent endian problem concerning the vendor IDs.
* Removed vendor_code_be32_str() again.
* Added deactivated stubs for the UDP Head Ping/Pong vendor messages.

------------------------------------------------------------------------
r10119 | cbiere | 2005-11-12 06:32:24 -0500 (Sat, 12 Nov 2005) | 2 lines

Minor style fix.

------------------------------------------------------------------------
r10118 | cbiere | 2005-11-12 06:29:52 -0500 (Sat, 12 Nov 2005) | 3 lines

* Use a multichoice property to select the drop reasons message type instead
  of manually handling a GtkCombo or GtkOptionMenu.

------------------------------------------------------------------------
r10117 | cbiere | 2005-11-12 06:16:17 -0500 (Sat, 12 Nov 2005) | 2 lines

Converted all GtkCombos used for multiple choice to GtkOptionMenus.

------------------------------------------------------------------------
r10116 | cbiere | 2005-11-12 06:13:42 -0500 (Sat, 12 Nov 2005) | 3 lines

* Minor style fixes.
* Added const-qualifiers.

------------------------------------------------------------------------
r10115 | cbiere | 2005-11-12 06:12:42 -0500 (Sat, 12 Nov 2005) | 3 lines

search_stats_gui_init():
 * Removed dead code.

------------------------------------------------------------------------
r10114 | cbiere | 2005-11-12 06:10:03 -0500 (Sat, 12 Nov 2005) | 3 lines

main_gui_early_init():
 * Minor style fix.

------------------------------------------------------------------------
r10113 | cbiere | 2005-11-12 06:08:20 -0500 (Sat, 12 Nov 2005) | 3 lines

search_gui_update_expiry(), search_gui_is_expired():
 * Don't expire passive searches.

------------------------------------------------------------------------
r10112 | cbiere | 2005-11-12 05:55:01 -0500 (Sat, 12 Nov 2005) | 2 lines

Added GUI property PROP_GNET_STATS_DROP_REASONS_TYPE.

------------------------------------------------------------------------
r10110 | daichik | 2005-11-11 17:38:27 -0500 (Fri, 11 Nov 2005) | 2 lines

Semi-final improvements.

------------------------------------------------------------------------
r10109 | daichik | 2005-11-11 17:35:57 -0500 (Fri, 11 Nov 2005) | 2 lines

Updated and discarded obsolete translations.

------------------------------------------------------------------------
r10108 | nonamer | 2005-11-11 02:21:49 -0500 (Fri, 11 Nov 2005) | 2 lines

Updated translation

------------------------------------------------------------------------
r10107 | cbiere | 2005-11-10 23:47:20 -0500 (Thu, 10 Nov 2005) | 2 lines

* Fixed two format strings; oversight in previous commit.

------------------------------------------------------------------------
r10106 | cbiere | 2005-11-10 22:57:01 -0500 (Thu, 10 Nov 2005) | 2 lines

* Removed PROP_ALLOW_AUTO_REQUERIES.

------------------------------------------------------------------------
r10105 | cbiere | 2005-11-10 22:52:41 -0500 (Thu, 10 Nov 2005) | 6 lines

* Added search_gui_update_expiry() to update the expiration time for the
  current search.
* Added search_gui_is_expired() for checking whether a search has expired
  regardless of it's en/disabled state.
* Stop and don't automagically re-start expired searches.

------------------------------------------------------------------------
r10104 | cbiere | 2005-11-10 22:48:12 -0500 (Thu, 10 Nov 2005) | 3 lines

* Added search_set_create_time().
* Removed PROP_ALLOW_AUTO_REQUERIES.

------------------------------------------------------------------------
r10103 | cbiere | 2005-11-10 22:44:20 -0500 (Thu, 10 Nov 2005) | 4 lines

* Renamed gtk_combo_init_choices() to widget_init_choices() and extended it
  so that it can handle GtkOptionMenu too.
* Removed PROP_ALLOW_AUTO_REQUERIES.

------------------------------------------------------------------------
r10102 | cbiere | 2005-11-10 19:24:25 -0500 (Thu, 10 Nov 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r10101 | cbiere | 2005-11-10 19:19:38 -0500 (Thu, 10 Nov 2005) | 4 lines

* Changed effect of F2 to cycle between
  "focus searchbar" -> "hide searchbar" -> "show and focus searchbar"
* Added option menu to select the search lifetime.

------------------------------------------------------------------------
r10100 | cbiere | 2005-11-10 19:09:15 -0500 (Thu, 10 Nov 2005) | 2 lines

* Added stub for keyboard shortcut dialog.

------------------------------------------------------------------------
r10099 | cbiere | 2005-11-10 19:07:37 -0500 (Thu, 10 Nov 2005) | 2 lines

* Added attributes "CreateTime" and "Lifetime" to searches.

------------------------------------------------------------------------
r10098 | cbiere | 2005-11-10 18:59:49 -0500 (Thu, 10 Nov 2005) | 2 lines

* Added runtime property "search_lifetime".

------------------------------------------------------------------------
r10097 | cbiere | 2005-11-10 18:54:55 -0500 (Thu, 10 Nov 2005) | 2 lines

* Marked file as OK again.

------------------------------------------------------------------------
r10096 | cbiere | 2005-11-10 18:54:15 -0500 (Thu, 10 Nov 2005) | 4 lines

* Added timestamp_to_string() and timestamp_to_string_buf().
* Renamed date_to_*_gchar() functions to timestamp_*_to_string().
* Renamed date_to_iso_gchar() to timestamp_utc_to_string().

------------------------------------------------------------------------
r10095 | rmanfredi | 2005-11-10 15:58:25 -0500 (Thu, 10 Nov 2005) | 4 lines

When a bg_task is killed, don't launch any more processing in the
"done" callback: this cause QRP compression to attempt to send data
on a node that was being removed.

------------------------------------------------------------------------
r10094 | daichik | 2005-11-10 09:47:47 -0500 (Thu, 10 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10093 | daichik | 2005-11-10 09:45:08 -0500 (Thu, 10 Nov 2005) | 2 lines

Updated and discarded obsolete translations.

------------------------------------------------------------------------
r10092 | rmanfredi | 2005-11-10 04:56:41 -0500 (Thu, 10 Nov 2005) | 2 lines

Use YY-MM-DD for formatting dates, more readable than YYYYMMDD.

------------------------------------------------------------------------
r10091 | cbiere | 2005-11-09 15:26:09 -0500 (Wed, 09 Nov 2005) | 2 lines

Added "Charset" column.

------------------------------------------------------------------------
r10090 | cbiere | 2005-11-09 15:25:13 -0500 (Wed, 09 Nov 2005) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r10089 | cbiere | 2005-11-09 15:13:00 -0500 (Wed, 09 Nov 2005) | 3 lines

search_gui_compare_records():
 * Added missing case "c_sr_charset".

------------------------------------------------------------------------
r10088 | cbiere | 2005-11-09 15:11:57 -0500 (Wed, 09 Nov 2005) | 2 lines

Added missing sentinel.

------------------------------------------------------------------------
r10087 | cbiere | 2005-11-09 14:59:29 -0500 (Wed, 09 Nov 2005) | 4 lines

* [GTK2] Use only a single column in the GtkTreeStore for the search results
  and multiplex the columns in the cell_data_func for the GtkCellRenderer
  of each GtkTreeViewColumn.

------------------------------------------------------------------------
r10086 | cbiere | 2005-11-09 14:55:20 -0500 (Wed, 09 Nov 2005) | 3 lines

* Added "Charset" column.
* [GTK2] Removed internal "record" column.

------------------------------------------------------------------------
r10085 | cbiere | 2005-11-09 14:51:58 -0500 (Wed, 09 Nov 2005) | 2 lines

Renamed guc_http_range_to_gchar() to guc_http_range_to_string().

------------------------------------------------------------------------
r10084 | cbiere | 2005-11-09 14:49:56 -0500 (Wed, 09 Nov 2005) | 4 lines

* Changed combo_searches to option_menu_searches.
* Added a "Charset" column to the search results tree instead of showing
  this information inside the filename.

------------------------------------------------------------------------
r10083 | cbiere | 2005-11-09 14:47:43 -0500 (Wed, 09 Nov 2005) | 4 lines

* Use lazy_utf8_to_ui_string() instead of lazy_utf8_to_locale() to make the
  intention clear.
* Simplified and updated some code.

------------------------------------------------------------------------
r10082 | cbiere | 2005-11-09 14:46:19 -0500 (Wed, 09 Nov 2005) | 3 lines

* Minor style fixes.
* Let the columns auto-size.

------------------------------------------------------------------------
r10081 | cbiere | 2005-11-09 14:45:17 -0500 (Wed, 09 Nov 2005) | 4 lines

monitor_gui_add():
 * Prepend the character set information manually now that
   lazy_unknown_to_utf8_normalized() doesn't do this anymore.

------------------------------------------------------------------------
r10080 | cbiere | 2005-11-09 14:43:41 -0500 (Wed, 09 Nov 2005) | 3 lines

stats_hash_to_treeview():
 * Updated 3rd parameter to unknown_to_utf8_normalized().

------------------------------------------------------------------------
r10079 | cbiere | 2005-11-09 14:42:44 -0500 (Wed, 09 Nov 2005) | 6 lines

gui_init_menu():
 * Changed type of the page column to G_TYPE_POINTER so that
    tree_selection_collect_data() can be used.
 * Listen for the "switch-page" event on "notebook_main" because the
   page can be changed from another menu now.

------------------------------------------------------------------------
r10078 | cbiere | 2005-11-09 14:40:03 -0500 (Wed, 09 Nov 2005) | 3 lines

* Some clean-up.
* Changed tree_selection_collect_data() to make it more versatile.

------------------------------------------------------------------------
r10077 | cbiere | 2005-11-09 14:38:49 -0500 (Wed, 09 Nov 2005) | 4 lines

unknown_to_utf8_normalized(), unknown_to_utf8() etc.:
 * Changed boolean parameter "add_charset" to string pointer so that the
   user knows the used character set.

------------------------------------------------------------------------
r10076 | cbiere | 2005-11-09 14:36:04 -0500 (Wed, 09 Nov 2005) | 8 lines

* Added hotkeys to hide/show the sidebar (F8) and the navigation tree (F9).
* Added hotkey for the search edit box (F2).
* Changed the menu layout.
* Converted gtk_combo_searches to gtk_option_menu resp. added it to GTK2
  as alternate way to switch between searches.
* Put all gnet stats into a single notebook.
* [GTK2] Finally converted the last CList and CTree to GtkTreeView.

------------------------------------------------------------------------
r10075 | cbiere | 2005-11-09 14:30:58 -0500 (Wed, 09 Nov 2005) | 4 lines

* Merged PROP_GNET_STATS_DROP_PERC with PROP_GNET_STATS_PERC.
* Moved "General stats", "Drop stats" and "Horizon stats" in the stats
  notebook to clean up the gnet stats mess.

------------------------------------------------------------------------
r10074 | cbiere | 2005-11-09 14:28:11 -0500 (Wed, 09 Nov 2005) | 3 lines

* Added handler for PROP_SIDEBAR_VISIBLE.
* Make sure the sidebar is shown if the navigation is requested to be shown.

------------------------------------------------------------------------
r10073 | cbiere | 2005-11-09 14:27:12 -0500 (Wed, 09 Nov 2005) | 3 lines

* Added handlers for PROP_SIDEBAR_VISIBLE.
* Got rid of PROP_GNET_STATS_DROP_PERC.

------------------------------------------------------------------------
r10072 | cbiere | 2005-11-09 14:25:38 -0500 (Wed, 09 Nov 2005) | 3 lines

search_retrieve_xml():
 * Renamed filter_rule_to_gchar() to filter_rule_to_string().

------------------------------------------------------------------------
r10071 | cbiere | 2005-11-09 14:24:53 -0500 (Wed, 09 Nov 2005) | 3 lines

* Converted gtk_combo_searches to gtk_option_menu_searches.
* Added utf8_name to record_t.

------------------------------------------------------------------------
r10070 | cbiere | 2005-11-09 14:21:52 -0500 (Wed, 09 Nov 2005) | 2 lines

[GTK2] Added tree_find_iter_by_data().

------------------------------------------------------------------------
r10069 | cbiere | 2005-11-09 14:20:16 -0500 (Wed, 09 Nov 2005) | 3 lines

* Renamed menu_search_searches to menu_search_results.
* Always highlight the currently selected item in the tree menu.

------------------------------------------------------------------------
r10068 | cbiere | 2005-11-09 14:18:51 -0500 (Wed, 09 Nov 2005) | 2 lines

[GTK2] Converted filter GUI to GTK2 with treeviews to get rid of flickering.

------------------------------------------------------------------------
r10067 | cbiere | 2005-11-09 14:17:44 -0500 (Wed, 09 Nov 2005) | 3 lines

Added PROP_NAVTREE_VISIBLE.
Added PROP_SIDEBAR_VISIBLE.

------------------------------------------------------------------------
r10066 | cbiere | 2005-11-09 14:16:53 -0500 (Wed, 09 Nov 2005) | 2 lines

Renamed all *_to_gchar() functions to *_to_string().

------------------------------------------------------------------------
r10065 | rmanfredi | 2005-11-09 13:27:50 -0500 (Wed, 09 Nov 2005) | 3 lines

Got rid of warnings.
Must make the offsetting optional.  I need it with FVWM2... (FIXME).

------------------------------------------------------------------------
r10064 | rmanfredi | 2005-11-09 13:27:05 -0500 (Wed, 09 Nov 2005) | 3 lines

Moved filtering cache variable out of the GUI record.
Now uses a dedicated filtering context that is cleaned up ASAP.

------------------------------------------------------------------------
r10063 | rmanfredi | 2005-11-09 07:29:52 -0500 (Wed, 09 Nov 2005) | 2 lines

Re-activated suffix filtering rules.

------------------------------------------------------------------------
r10062 | daichik | 2005-11-08 07:53:35 -0500 (Tue, 08 Nov 2005) | 2 lines

Fixed that should be fixed.

------------------------------------------------------------------------
r10061 | nonamer | 2005-11-07 06:29:41 -0500 (Mon, 07 Nov 2005) | 2 lines

Keep translations up2date

------------------------------------------------------------------------
r10060 | daichik | 2005-11-07 06:17:25 -0500 (Mon, 07 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10059 | daichik | 2005-11-07 06:14:35 -0500 (Mon, 07 Nov 2005) | 2 lines

Updated (Sorry so many updating, but they're frozen soon).

------------------------------------------------------------------------
r10058 | cbiere | 2005-11-07 04:50:13 -0500 (Mon, 07 Nov 2005) | 4 lines

* Added "Clear" button to search monitor.
* Added "Copy to clipboard" to the context menu of the search monitor.
* Stop the monitor on any button click not just the right button.

------------------------------------------------------------------------
r10057 | cbiere | 2005-11-07 04:05:52 -0500 (Mon, 07 Nov 2005) | 4 lines

* Removed non-working ISO-2022 detection because it's very seldomly used
  for filenames anyway.
* Added a weak detection for SJIS.

------------------------------------------------------------------------
r10056 | cbiere | 2005-11-07 04:02:30 -0500 (Mon, 07 Nov 2005) | 3 lines

udp_received():
 * Show the address as well when detecting NTP.

------------------------------------------------------------------------
r10055 | cbiere | 2005-11-07 04:01:47 -0500 (Mon, 07 Nov 2005) | 3 lines

download_retrieve():
 * Suppress non-warning message when not debugging.

------------------------------------------------------------------------
r10054 | daichik | 2005-11-06 04:37:15 -0500 (Sun, 06 Nov 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r10053 | cbiere | 2005-11-05 23:52:00 -0500 (Sat, 05 Nov 2005) | 3 lines

* Fixed the bug that caused the popup to disappear as soon as the button
  was de-pressed.

------------------------------------------------------------------------
r10052 | cbiere | 2005-11-05 23:26:24 -0500 (Sat, 05 Nov 2005) | 2 lines

Save and restore also the coordinates and position of the preferences dialog.

------------------------------------------------------------------------
r10051 | cbiere | 2005-11-05 21:08:52 -0500 (Sat, 05 Nov 2005) | 2 lines

* Added navigation menu to GTK1 too.

------------------------------------------------------------------------
r10050 | cbiere | 2005-11-05 20:57:52 -0500 (Sat, 05 Nov 2005) | 3 lines

short_time():
 * Made this translatable.

------------------------------------------------------------------------
r10049 | cbiere | 2005-11-05 20:44:07 -0500 (Sat, 05 Nov 2005) | 2 lines

* Changed "Location" to "Country".

------------------------------------------------------------------------
r10048 | cbiere | 2005-11-05 20:41:21 -0500 (Sat, 05 Nov 2005) | 4 lines

filter_init():
 * filter_new() accepts only UTF-8 strings. Thus convert the localized
   strings.

------------------------------------------------------------------------
r10047 | cbiere | 2005-11-05 20:22:38 -0500 (Sat, 05 Nov 2005) | 3 lines

* Changed "Connected" to "Connected time".
* Changed "Info" to "Status".

------------------------------------------------------------------------
r10046 | cbiere | 2005-11-05 20:12:51 -0500 (Sat, 05 Nov 2005) | 3 lines

nodes_gui_create_treeview_nodes():
 * Forgot to use gettext() for the title strings.

------------------------------------------------------------------------
r10045 | daichik | 2005-11-05 19:53:38 -0500 (Sat, 05 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10044 | daichik | 2005-11-05 19:50:54 -0500 (Sat, 05 Nov 2005) | 3 lines

Updated and bump the version up.
Discarded obsolete translations.

------------------------------------------------------------------------
r10043 | cbiere | 2005-11-05 19:22:10 -0500 (Sat, 05 Nov 2005) | 2 lines

* Regenerated with better maximum value for time_t.

------------------------------------------------------------------------
r10042 | cbiere | 2005-11-05 19:01:08 -0500 (Sat, 05 Nov 2005) | 2 lines

* Removed debugging breakpoint.

------------------------------------------------------------------------
r10041 | cbiere | 2005-11-05 18:51:40 -0500 (Sat, 05 Nov 2005) | 2 lines

* Disabled regression checks for this revision.

------------------------------------------------------------------------
r10040 | cbiere | 2005-11-05 18:49:32 -0500 (Sat, 05 Nov 2005) | 2 lines

* Changed the presentation of nodes.

------------------------------------------------------------------------
r10039 | cbiere | 2005-11-05 18:45:53 -0500 (Sat, 05 Nov 2005) | 3 lines

* Added switch to hide the navigation tree.
* Added navigation menu.

------------------------------------------------------------------------
r10038 | cbiere | 2005-11-05 18:43:34 -0500 (Sat, 05 Nov 2005) | 2 lines

* Added handler for navigation tree visibility switch.

------------------------------------------------------------------------
r10037 | cbiere | 2005-11-05 18:42:14 -0500 (Sat, 05 Nov 2005) | 2 lines

* Added menuitem callbacks for the new navigation menu.

------------------------------------------------------------------------
r10036 | cbiere | 2005-11-05 18:39:58 -0500 (Sat, 05 Nov 2005) | 3 lines

* Converted PROP_NODE_LAST_ULTRA_LEAF_SWITCH and PROP_START_STAMP to
  PROP_TYPE_TIMESTAMP.

------------------------------------------------------------------------
r10035 | cbiere | 2005-11-05 18:35:26 -0500 (Sat, 05 Nov 2005) | 2 lines

Converted several properties to "timestamp".

------------------------------------------------------------------------
r10034 | cbiere | 2005-11-05 18:31:49 -0500 (Sat, 05 Nov 2005) | 2 lines

Added property type "timestamp" and converted some properties to it.

------------------------------------------------------------------------
r10033 | cbiere | 2005-11-05 18:29:27 -0500 (Sat, 05 Nov 2005) | 2 lines

Added new property type "timestamp".

------------------------------------------------------------------------
r10032 | cbiere | 2005-11-04 20:03:12 -0500 (Fri, 04 Nov 2005) | 4 lines

* [GTK2] Increased the timeout for menu collapse/expand action to make it
  less nervous and so that you pass over the area without causing unnecessary
  expanding/collapsing.

------------------------------------------------------------------------
r10031 | cbiere | 2005-11-04 20:01:46 -0500 (Fri, 04 Nov 2005) | 2 lines

[GTK2] Fixed the random uncollapsed branch problem in the tree menu.

------------------------------------------------------------------------
r10030 | cbiere | 2005-11-04 19:39:12 -0500 (Fri, 04 Nov 2005) | 2 lines

[GTK2] There's no widget "label_dbg_property_name".

------------------------------------------------------------------------
r10029 | cbiere | 2005-11-04 19:36:29 -0500 (Fri, 04 Nov 2005) | 2 lines

[GTK1] Corrected sorting by "Saved".

------------------------------------------------------------------------
r10028 | cbiere | 2005-11-04 19:18:21 -0500 (Fri, 04 Nov 2005) | 3 lines

* Corrected titles of the property browser.
* Align the title for the "Value" column to right.

------------------------------------------------------------------------
r10027 | cbiere | 2005-11-04 19:14:12 -0500 (Fri, 04 Nov 2005) | 3 lines

Corrected column indices.
[GTK2] Autosize all columns except the "Value" column.

------------------------------------------------------------------------
r10026 | cbiere | 2005-11-04 18:04:53 -0500 (Fri, 04 Nov 2005) | 3 lines

* Extended property browser.
* Increased the default width of the FAQ dialog.

------------------------------------------------------------------------
r10025 | cbiere | 2005-11-04 18:01:57 -0500 (Fri, 04 Nov 2005) | 5 lines

* Extended the property browser so that it shows the default value, whether
  the property is saved and the type.
* [GTK1] The list can be sorted now.
* FIXME: Min/Max is not yet displayed.

------------------------------------------------------------------------
r10024 | cbiere | 2005-11-04 17:58:27 -0500 (Fri, 04 Nov 2005) | 2 lines

Removed unnecessary mappings for some "Diverse properties".

------------------------------------------------------------------------
r10023 | cbiere | 2005-11-04 17:57:29 -0500 (Fri, 04 Nov 2005) | 4 lines

* Added prop_type_to_string(), prop_is_saved(), prop_default_to_string().
* Changed macro PROP() so that the parameters are always checked and we
  see where it fails.

------------------------------------------------------------------------
r10022 | cbiere | 2005-11-04 17:55:15 -0500 (Fri, 04 Nov 2005) | 4 lines

Added *_prop_type_to_string().
Added *_prop_default_to_string().
Added *_prop_is_saved().

------------------------------------------------------------------------
r10021 | cbiere | 2005-11-04 17:49:54 -0500 (Fri, 04 Nov 2005) | 2 lines

Added copies of the homepage FAQs as locale-specific FAQs.

------------------------------------------------------------------------
r10020 | cbiere | 2005-11-04 17:47:31 -0500 (Fri, 04 Nov 2005) | 3 lines

gui_create_dlg_faq():
	Strip HTML tags so that the files don't have to preprocessed.

------------------------------------------------------------------------
r10019 | cbiere | 2005-11-04 15:52:43 -0500 (Fri, 04 Nov 2005) | 3 lines

ntp_send_probes():
	Don't probe "localhost" for now.

------------------------------------------------------------------------
r10018 | nonamer | 2005-11-04 12:53:16 -0500 (Fri, 04 Nov 2005) | 2 lines

Fixed PeermodeChange

------------------------------------------------------------------------
r10017 | cbiere | 2005-11-03 18:58:44 -0500 (Thu, 03 Nov 2005) | 2 lines

Don't automagically collapse trees that have a selected child.

------------------------------------------------------------------------
r10016 | rmanfredi | 2005-11-03 04:24:29 -0500 (Thu, 03 Nov 2005) | 2 lines

Added GUI mapping for new pfsp_minimum_filesize property.

------------------------------------------------------------------------
r10015 | rmanfredi | 2005-11-03 03:51:51 -0500 (Thu, 03 Nov 2005) | 2 lines

Code cleanup.

------------------------------------------------------------------------
r10014 | rmanfredi | 2005-11-03 03:45:39 -0500 (Thu, 03 Nov 2005) | 6 lines

Tuned algorithm for PFSP with low amount of sources: use the amount of
alive sources instead of the amount known in the mesh. Also request
the minimum filesize for PFSP as quickly as possible, but otherwise
request the smallest chunk size first to have rapid exchanges with the
remote server to gather more sources.

------------------------------------------------------------------------
r10013 | rmanfredi | 2005-11-03 03:41:31 -0500 (Thu, 03 Nov 2005) | 2 lines

Added .srt (video subtitles) to the default list of shared extensions.

------------------------------------------------------------------------
r10012 | rmanfredi | 2005-11-03 03:37:39 -0500 (Thu, 03 Nov 2005) | 2 lines

Added extra assertions to ensure the list integrity is preserved.

------------------------------------------------------------------------
r10011 | cbiere | 2005-11-02 10:14:56 -0500 (Wed, 02 Nov 2005) | 5 lines

* Don't use a file global static variable as string buffer.
* tmpstr was used without being initialized.
* Style fixes.
* Use utf8_enforce() to be absolutely certain the encoding is correct.

------------------------------------------------------------------------
r10010 | daichik | 2005-11-02 08:38:24 -0500 (Wed, 02 Nov 2005) | 2 lines

Fixed an error.

------------------------------------------------------------------------
r10009 | cbiere | 2005-11-02 08:10:38 -0500 (Wed, 02 Nov 2005) | 2 lines

Fixed bad macro reference.

------------------------------------------------------------------------
r10008 | nonamer | 2005-11-02 07:51:03 -0500 (Wed, 02 Nov 2005) | 2 lines

Updated dutch translation

------------------------------------------------------------------------
r10007 | daichik | 2005-11-02 07:41:19 -0500 (Wed, 02 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r10006 | daichik | 2005-11-02 07:39:32 -0500 (Wed, 02 Nov 2005) | 2 lines

Updated with the latest CVS release version (2005-11-02).

------------------------------------------------------------------------
r10005 | cbiere | 2005-11-02 05:29:53 -0500 (Wed, 02 Nov 2005) | 4 lines

G_FREE_NULL():
 * Use G_STMT_START/END instead of do { } while(0).
Bumped date.

------------------------------------------------------------------------
r10004 | cbiere | 2005-11-02 05:28:09 -0500 (Wed, 02 Nov 2005) | 2 lines

Further new code for the FAQ dialog.

------------------------------------------------------------------------
r10003 | cbiere | 2005-11-02 05:23:59 -0500 (Wed, 02 Nov 2005) | 3 lines

* Added code for the FAQ dialog.
* Simplified the code to initialize the About dialog.

------------------------------------------------------------------------
r10002 | cbiere | 2005-11-02 05:20:51 -0500 (Wed, 02 Nov 2005) | 2 lines

Added preliminary FAQ dialog at Help->FAQ.

------------------------------------------------------------------------
r10001 | cbiere | 2005-11-02 05:17:50 -0500 (Wed, 02 Nov 2005) | 2 lines

Added lazy_string_to_printf_escape() for printing truly harmless strings.

------------------------------------------------------------------------
r10000 | cbiere | 2005-11-02 04:29:55 -0500 (Wed, 02 Nov 2005) | 3 lines

* Added WFREE_NULL() macro as analogous for G_FREE_NULL() which should be used
  from now on for greater justice.

------------------------------------------------------------------------
r9999 | cbiere | 2005-11-02 04:28:33 -0500 (Wed, 02 Nov 2005) | 2 lines

Export more functions.

------------------------------------------------------------------------
r9998 | cbiere | 2005-11-02 04:28:06 -0500 (Wed, 02 Nov 2005) | 4 lines

* Changed order of parameters for several functions: The destination buffer
  its size should precede the source buffer just like snprintf(), strcpy()
  etc. (The strlcpy() order sucks.)

------------------------------------------------------------------------
r9997 | cbiere | 2005-11-02 04:25:23 -0500 (Wed, 02 Nov 2005) | 4 lines

* Minor style fixes.
* Changed DO_VSNPRINTF() to static inline function for better readability and
  added better doxygen documentation.

------------------------------------------------------------------------
r9996 | cbiere | 2005-11-02 04:23:04 -0500 (Wed, 02 Nov 2005) | 4 lines

prepare_browsing():
	Bumped size "name" buffer. For UTF-8 with localized text use about
	4x (PI) the buffer size that would be reasonable for English.

------------------------------------------------------------------------
r9995 | cbiere | 2005-11-02 04:21:16 -0500 (Wed, 02 Nov 2005) | 8 lines

* Moved some code from socket_udp_accept() to socket_udp_event() and made
  the latter the actual event callback. When there's a lot of UDP traffic
  it might be better to call recvfrom() several times before polling again.
  Even if it's not a plus for performance it might prevent packet lossage
  and allow higher UDP throughput. Linux kernels have also special ways to
  retrieve more information about the UDP/socket status which could be used
  here.

------------------------------------------------------------------------
r9994 | cbiere | 2005-11-02 04:14:36 -0500 (Wed, 02 Nov 2005) | 3 lines

* Convert the ack_message from ISO-8859-1 to the UI string encoding; at
  least BearShare sends localized messages.

------------------------------------------------------------------------
r9993 | cbiere | 2005-11-02 04:11:05 -0500 (Wed, 02 Nov 2005) | 3 lines

Minor style mod.
Added Pango to the list of log prefixes.

------------------------------------------------------------------------
r9992 | cbiere | 2005-11-02 04:09:00 -0500 (Wed, 02 Nov 2005) | 2 lines

Changed el_EL to el_GR.

------------------------------------------------------------------------
r9991 | cbiere | 2005-11-02 04:07:48 -0500 (Wed, 02 Nov 2005) | 2 lines

Updated; BearShare is seemingly undead.

------------------------------------------------------------------------
r9990 | cbiere | 2005-11-01 20:42:59 -0500 (Tue, 01 Nov 2005) | 2 lines

Added language information string.

------------------------------------------------------------------------
r9989 | cbiere | 2005-11-01 20:28:41 -0500 (Tue, 01 Nov 2005) | 2 lines

Corrected a malformed entry.

------------------------------------------------------------------------
r9988 | cbiere | 2005-11-01 19:32:36 -0500 (Tue, 01 Nov 2005) | 2 lines

You are not welcum.

------------------------------------------------------------------------
r9987 | cbiere | 2005-11-01 19:28:40 -0500 (Tue, 01 Nov 2005) | 3 lines

* Removed ASF, WMV and WMA from the default extension for shared files. This
  is usually just crap. This makes it less likely we accidently relay it.

------------------------------------------------------------------------
r9986 | cbiere | 2005-11-01 18:42:52 -0500 (Tue, 01 Nov 2005) | 2 lines

Walks like a duck, quacks like a duck, must be a duck.

------------------------------------------------------------------------
r9985 | cbiere | 2005-11-01 18:10:10 -0500 (Tue, 01 Nov 2005) | 2 lines

More volunteers.

------------------------------------------------------------------------
r9984 | cbiere | 2005-11-01 17:49:28 -0500 (Tue, 01 Nov 2005) | 2 lines

In the midnight hour I ban more more more.

------------------------------------------------------------------------
r9983 | cbiere | 2005-11-01 17:42:25 -0500 (Tue, 01 Nov 2005) | 2 lines

More lemmings fun.

------------------------------------------------------------------------
r9982 | cbiere | 2005-11-01 17:35:17 -0500 (Tue, 01 Nov 2005) | 2 lines

I'm not impressed. Try harder.

------------------------------------------------------------------------
r9981 | cbiere | 2005-11-01 16:36:31 -0500 (Tue, 01 Nov 2005) | 2 lines

Added src/lib/utf8.c.

------------------------------------------------------------------------
r9980 | cbiere | 2005-11-01 16:33:16 -0500 (Tue, 01 Nov 2005) | 2 lines

Moved some entry boxes so that they are not confused with entry_search.

------------------------------------------------------------------------
r9979 | cbiere | 2005-11-01 16:29:27 -0500 (Tue, 01 Nov 2005) | 5 lines

Added locale_get_language() to determine the currently used language.
locale_init():
	Moved non-warning messages to local_init_show_results().
	Skip regression checks if the current revision is considered alright.

------------------------------------------------------------------------
r9978 | cbiere | 2005-11-01 16:26:38 -0500 (Tue, 01 Nov 2005) | 3 lines

Changed definition of RCSID() so that the string can be accessed.
Bumped date.

------------------------------------------------------------------------
r9977 | nonamer | 2005-11-01 05:27:45 -0500 (Tue, 01 Nov 2005) | 2 lines

Keeping the translation up to date

------------------------------------------------------------------------
r9976 | daichik | 2005-11-01 05:12:52 -0500 (Tue, 01 Nov 2005) | 2 lines

Updated Japanese translations.

------------------------------------------------------------------------
r9975 | daichik | 2005-11-01 05:10:02 -0500 (Tue, 01 Nov 2005) | 2 lines

Updated with the latest CVS release version (2005-10-31).

------------------------------------------------------------------------
r9974 | cbiere | 2005-11-01 03:03:13 -0500 (Tue, 01 Nov 2005) | 3 lines

gui_init_menu():
	Handle GtkTreeView events for autoexpanding and -collapsing.

------------------------------------------------------------------------
r9973 | cbiere | 2005-11-01 02:58:41 -0500 (Tue, 01 Nov 2005) | 2 lines

Hide GTK1-specific prototypes for GTK2.

------------------------------------------------------------------------
r9972 | cbiere | 2005-11-01 02:57:59 -0500 (Tue, 01 Nov 2005) | 4 lines

Hide GTK1 code for GTK2.
dbg_property_show_list():
	Fixed variable name.

------------------------------------------------------------------------
r9971 | cbiere | 2005-11-01 02:56:57 -0500 (Tue, 01 Nov 2005) | 2 lines

Removed unnecessary property mappings.

------------------------------------------------------------------------
r9970 | cbiere | 2005-11-01 02:56:16 -0500 (Tue, 01 Nov 2005) | 6 lines

mq_tcp_service():
mq_tcp_putq():
	tx_writev() returns ssize_t.
mq_tcp_putq():
	Added note that the assertion failed.

------------------------------------------------------------------------
r9969 | cbiere | 2005-11-01 02:49:56 -0500 (Tue, 01 Nov 2005) | 2 lines

Let the navigation menu automagically expand and collapse.

------------------------------------------------------------------------
r9968 | cbiere | 2005-11-01 02:46:35 -0500 (Tue, 01 Nov 2005) | 3 lines

tree_view_motion_set_callback():
	Added parameter "interval".

------------------------------------------------------------------------
r9967 | cbiere | 2005-11-01 02:43:17 -0500 (Tue, 01 Nov 2005) | 3 lines

prop_set_guint32():
	Fixed log message.

------------------------------------------------------------------------
r9966 | cbiere | 2005-11-01 02:14:40 -0500 (Tue, 01 Nov 2005) | 3 lines

Style fixes.
Added assertions.

------------------------------------------------------------------------
r9965 | cbiere | 2005-11-01 02:14:08 -0500 (Tue, 01 Nov 2005) | 3 lines

on_clist_nodes_unselect_row():
	Fixed misleading cast.

------------------------------------------------------------------------
r9964 | cbiere | 2005-11-01 02:13:08 -0500 (Tue, 01 Nov 2005) | 2 lines

[GTK1] Added property browser.

------------------------------------------------------------------------
r9963 | cbiere | 2005-11-01 02:09:04 -0500 (Tue, 01 Nov 2005) | 2 lines

Added host_addr_is_loopback() which checks for ::1 and 127.0.0.1.

------------------------------------------------------------------------
r9962 | cbiere | 2005-11-01 02:07:59 -0500 (Tue, 01 Nov 2005) | 3 lines

udp_received():
	Check also for ::1 as sender address.

------------------------------------------------------------------------
r9961 | cbiere | 2005-11-01 02:05:41 -0500 (Tue, 01 Nov 2005) | 3 lines

* Fixed detection of a local NTP daemon. This didn't work when localhost
  resolves to ::1 but the UDP socket handles only IPv4.

------------------------------------------------------------------------
r9960 | cbiere | 2005-11-01 02:03:29 -0500 (Tue, 01 Nov 2005) | 4 lines

dmesh_url_parse():
	* Check whether name_to_host_addr() succeeded; added comment that
	  this may block.

------------------------------------------------------------------------
r9959 | cbiere | 2005-11-01 02:02:30 -0500 (Tue, 01 Nov 2005) | 7 lines

slow_main_timer():
	Respect cpu_debug.
log_cpu_usage():
	Fixed overlong message.
log_handler():
	Use the compact ISO 8601 date format for log messages.

------------------------------------------------------------------------
r9958 | cbiere | 2005-11-01 02:00:16 -0500 (Tue, 01 Nov 2005) | 3 lines

Added property "cpu_debug" which controls the emission of periodic
	cpu usage stats for now.

------------------------------------------------------------------------
r9957 | cbiere | 2005-11-01 01:58:28 -0500 (Tue, 01 Nov 2005) | 2 lines

[GTK1] Added property browser.

------------------------------------------------------------------------
r9956 | cbiere | 2005-10-31 18:06:29 -0500 (Mon, 31 Oct 2005) | 2 lines

Added documentation to host_addr_convert().

------------------------------------------------------------------------
r9955 | cbiere | 2005-10-31 18:02:41 -0500 (Mon, 31 Oct 2005) | 4 lines

utf16_encode_char_compact():
	Return -1 instead of 0 for invalid characters, so that NUL is no
	special case.

------------------------------------------------------------------------
r9953 | cbiere | 2005-10-31 15:56:59 -0500 (Mon, 31 Oct 2005) | 2 lines

Removed unused reference to GTK_COMBO_BOX().

------------------------------------------------------------------------
r9952 | rmanfredi | 2005-10-31 14:25:15 -0500 (Mon, 31 Oct 2005) | 3 lines

Don't pursue QRT patch sending when node connection has been broken:
the data structures we're using have already been freed by node_remove().

------------------------------------------------------------------------
r9951 | cbiere | 2005-10-31 12:34:39 -0500 (Mon, 31 Oct 2005) | 3 lines

filter_apply():
	Removed unused variable as reported by "jews".

------------------------------------------------------------------------
r9950 | cbiere | 2005-10-31 12:00:46 -0500 (Mon, 31 Oct 2005) | 2 lines

Added an odd range.

------------------------------------------------------------------------
r9949 | cbiere | 2005-10-31 01:33:24 -0500 (Mon, 31 Oct 2005) | 2 lines

Always convert rec->name to UTF-8 before using it.

------------------------------------------------------------------------
r9948 | cbiere | 2005-10-31 01:31:48 -0500 (Mon, 31 Oct 2005) | 2 lines

Corrected arguments for several formats strings concerning size_t.

------------------------------------------------------------------------
r9947 | cbiere | 2005-10-30 21:29:04 -0500 (Sun, 30 Oct 2005) | 3 lines

Don't consider CVS broken any longer.
Bumped date.

------------------------------------------------------------------------
r9946 | cbiere | 2005-10-30 21:27:44 -0500 (Sun, 30 Oct 2005) | 3 lines

uploads_gui_add_upload():
	Convert the filename from UTF-8 to the UI's encoding.

------------------------------------------------------------------------
r9945 | cbiere | 2005-10-30 21:26:55 -0500 (Sun, 30 Oct 2005) | 4 lines

filter_to_xml():
rule_to_xml():
	Added assertions to ensure everything is UTF-8 encoded.

------------------------------------------------------------------------
r9944 | cbiere | 2005-10-30 21:23:30 -0500 (Sun, 30 Oct 2005) | 3 lines

Convert strings to the GUI's encoding before passing them to the GUI.
Style fixes.

------------------------------------------------------------------------
r9943 | cbiere | 2005-10-30 21:18:12 -0500 (Sun, 30 Oct 2005) | 3 lines

struct gnet_upload_info:
	Added comment that name and user_agent are UTF-8 encoded.

------------------------------------------------------------------------
r9942 | cbiere | 2005-10-30 21:17:03 -0500 (Sun, 30 Oct 2005) | 3 lines

upload_get_info():
	Make sure info->name and info->user_agent are UTF-8 encoded.

------------------------------------------------------------------------
r9941 | cbiere | 2005-10-30 20:18:29 -0500 (Sun, 30 Oct 2005) | 3 lines

utf8_remap():
	Removed evil semicolon from hell.

------------------------------------------------------------------------
r9940 | cbiere | 2005-10-30 18:31:45 -0500 (Sun, 30 Oct 2005) | 2 lines

Rely on the core to ensure UTF-8 encoding.

------------------------------------------------------------------------
r9939 | cbiere | 2005-10-30 18:29:41 -0500 (Sun, 30 Oct 2005) | 4 lines

on_entry_search_changed():
	* Normalize input on-the-fly since Gtk+ might not render it correctly
	  otherwise.

------------------------------------------------------------------------
r9938 | cbiere | 2005-10-30 18:08:15 -0500 (Sun, 30 Oct 2005) | 3 lines

gui_update_download_column():
	Don't convert the string here, it should have been converted before.

------------------------------------------------------------------------
r9937 | cbiere | 2005-10-30 18:06:21 -0500 (Sun, 30 Oct 2005) | 3 lines

struct results_set:
	Use "union vendor_code" instead of raw 4 bytes.

------------------------------------------------------------------------
r9936 | cbiere | 2005-10-30 18:05:00 -0500 (Sun, 30 Oct 2005) | 8 lines

Style fixes.
Added filter_lazy_utf8_to_ui_string() to not interfere with other uses of
	utf8_to_ui_string().
Added assertion to ensure strings are UTF-8 encoded where expected.
filter_rule_condition_to_gchar():
	Simplified.
	Convert r->u.text.match to the UI's string encoding.

------------------------------------------------------------------------
r9935 | cbiere | 2005-10-30 17:54:21 -0500 (Sun, 30 Oct 2005) | 4 lines

filter_gui_set_ruleset():
	* Renamed filter_rule_condition_to_gchar() to
	  filter_rule_condition_to_string().

------------------------------------------------------------------------
r9934 | cbiere | 2005-10-30 17:51:47 -0500 (Sun, 30 Oct 2005) | 5 lines

Renamed filter_rule_condition_to_gchar() to filter_rule_condition_to_string().
Style fixes.
on_entry_filter_new_activate():
	Don't leak "name".

------------------------------------------------------------------------
r9933 | cbiere | 2005-10-30 17:48:41 -0500 (Sun, 30 Oct 2005) | 6 lines

* Use the LAZY_CONVERT() macro to generate the lazy variants of the converter
  functions.
* Moved utf8_to_filename() to related functions.
* Use UI_USES_UTF8_ENCODING instead of USE_GTK1/2 to make the intention clear
  and abstract from Gtk+.

------------------------------------------------------------------------
r9932 | cbiere | 2005-10-30 11:37:20 -0500 (Sun, 30 Oct 2005) | 2 lines

CVS is broken.

------------------------------------------------------------------------
r9931 | cbiere | 2005-10-30 08:16:03 -0500 (Sun, 30 Oct 2005) | 4 lines

Use a special union vendor_code for the 4 byte vendor codes for clarity
	and so that it can be easily accessed as big-endian integer as
	well as array of chars.

------------------------------------------------------------------------
r9930 | cbiere | 2005-10-30 08:07:00 -0500 (Sun, 30 Oct 2005) | 2 lines

Removed lazy_vendor_to_utf8() and lazy_vendor_to_locale().

------------------------------------------------------------------------
r9929 | cbiere | 2005-10-30 08:05:58 -0500 (Sun, 30 Oct 2005) | 2 lines

The core is now responsible to ensure UTF-8 encoding of the vendor strings.

------------------------------------------------------------------------
r9928 | cbiere | 2005-10-30 07:59:49 -0500 (Sun, 30 Oct 2005) | 5 lines

Changed w_concat_strings() to return the size of the walloc()ed buffer
	instead of the string length because the size is definitely needed
	for wfree() but the string length might be of no interest. So this
	should save some annoying +/-1.

------------------------------------------------------------------------
r9927 | cbiere | 2005-10-30 04:48:57 -0500 (Sun, 30 Oct 2005) | 4 lines

Corrected prototype of compact_query().
build_search_msg():
	Use size_t instead of gint to hold string lengths.

------------------------------------------------------------------------
r9926 | cbiere | 2005-10-30 03:26:32 -0500 (Sun, 30 Oct 2005) | 3 lines

gtk_mass_widget_set_sensitive():
	Use a parameter to tell the array length instead of NULL-termination.

------------------------------------------------------------------------
r9925 | cbiere | 2005-10-30 03:24:43 -0500 (Sun, 30 Oct 2005) | 4 lines

Tons of style fixes.
Use lazy_utf8_to_ui_string() because the strings should use UTF-8 encoding
	internally.

------------------------------------------------------------------------
r9924 | cbiere | 2005-10-30 03:21:20 -0500 (Sun, 30 Oct 2005) | 2 lines

Removed ancient search_retrieve_old().

------------------------------------------------------------------------
r9923 | cbiere | 2005-10-30 03:19:54 -0500 (Sun, 30 Oct 2005) | 3 lines

rule_to_xml():
	Minor style fix.

------------------------------------------------------------------------
r9922 | cbiere | 2005-10-30 03:18:07 -0500 (Sun, 30 Oct 2005) | 2 lines

Added lazy_utf8_to_ui_string().

------------------------------------------------------------------------
r9921 | cbiere | 2005-10-30 01:23:44 -0500 (Sun, 30 Oct 2005) | 4 lines

Fixed some harmless warnings.
unknown_to_utf8():
	Make sure "cd" is initialized.

------------------------------------------------------------------------
r9920 | cbiere | 2005-10-30 01:48:24 -0400 (Sun, 30 Oct 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r9919 | cbiere | 2005-10-30 01:47:48 -0400 (Sun, 30 Oct 2005) | 3 lines

* [GTK2] Replaced GtkComboBox with GtkCombo again so that Gtk+ 2.2 is
  sufficient.

------------------------------------------------------------------------
r9918 | cbiere | 2005-10-30 01:43:36 -0400 (Sun, 30 Oct 2005) | 4 lines

* [GTK2] Replaced GtkComboBox with GtkCombo again so that Gtk+ 2.2 is
  sufficient.
* Moved some code to search_common.c.

------------------------------------------------------------------------
r9917 | cbiere | 2005-10-30 01:37:23 -0400 (Sun, 30 Oct 2005) | 4 lines

* Forgot to set adns_helper_alive to TRUE so that DNS lookups caused stalls.
* Removed unnecessary variable adns_helper_alive; check adns_query_event_id
  instead.

------------------------------------------------------------------------
r9916 | cbiere | 2005-10-29 22:48:00 -0400 (Sat, 29 Oct 2005) | 4 lines

Removed trailing whitespace.
utf32_decompose_lookup():
	Correction: There was no bug; this function was and is correct.

------------------------------------------------------------------------
r9915 | cbiere | 2005-10-29 22:37:20 -0400 (Sat, 29 Oct 2005) | 3 lines

qrp_hashcode():
	Slightly optimized.

------------------------------------------------------------------------
r9914 | cbiere | 2005-10-29 22:35:39 -0400 (Sat, 29 Oct 2005) | 51 lines

Shuffled some functions around so that the functions they use are ahead
	of them. This makes a different when exported functions can be
	inlined due to a small code size.
uniskip():
	* Added documentation.
	* Changed parameter name for clarity.
Added utf32_bad_codepoint():
	* Optimized order of checks.
utf8_encoded_char_len():
	* Use utf32_bad_codepoint() for better readability.
utf8_encode_char():
	* Added parameter "size" so that we can create the character in-place
	  instead of always having to copy it.
utf8_decode_char():
utf8_decode_char_fast():
utf8_decode_char_less_fast():
	* Changed type of retlen to "guint *" and set it to 0 on failure
	  instead of -1 for simpler handling.
utf8_decode_char_fast():
	* Added utf8_2nd_byte_tab[] for smaller and simpler code.
Renamed utf8_is_valid_char() to utf8_char_len() because it returns a length;
	also just pass clen, there's no need to check for -1 anymore.
utf8_to_utf32():
	* Use utf8_decode_char_fast() and got rid of utf8_decode_lookahead().
utf32_to_utf8():
	* Got rid of utf8_buf because utf8_encode_char() encodes in-place now.
Added utf32_to_utf8_inplace():
	* Because the longest UTF-8 sequence is 4 bytes we can encode any
	  UTF-8 string directly into the UTF-32 string buffer.
utf32_decompose_lookup():
	* Decomposition to NFKD was completely broken due to a brain-damaged
	  thinko.
utf8_decompose():
	* Got rid of the memcpy(); it's not worth it for 4 byte especially
	  if it doesn't get inlined.
utf8_remap():
	* Take advantage of the better utf8_encode_char() interface to
	  prevent copying and don't use memcpy() for a maximum of 4 bytes.
utf32_compose():
	* Rewritten because the former version was buggy.
utf8_normalize():
	* Use utf32_to_utf8_inplace() instead of copying the string.
Added regression checks to ensure that the cases given in NormalizationTest.txt
	are correctly handled.
Moved other checks from unicode_decompose_init() to regression_checks()
	and put each check into its function.
TEST_NORMALIZATION_TEST_TXT and TEST_UTF8_DECODER can be defined to perform
	the complete set of regression checks. The former requires a huge
	table and the latter takes a few minutes, that's why they are disabled
	by default.

------------------------------------------------------------------------
r9913 | cbiere | 2005-10-29 19:30:20 -0400 (Sat, 29 Oct 2005) | 3 lines

Corrected copyright statement and author tag.
Added tables for normalization tests.

------------------------------------------------------------------------
r9912 | nonamer | 2005-10-29 06:26:25 -0400 (Sat, 29 Oct 2005) | 2 lines

I think I have hit a bug in gtranslator.

------------------------------------------------------------------------
r9911 | nonamer | 2005-10-29 06:21:20 -0400 (Sat, 29 Oct 2005) | 2 lines

Fuzzy -=3 = 0

------------------------------------------------------------------------
r9910 | rmanfredi | 2005-10-29 04:02:11 -0400 (Sat, 29 Oct 2005) | 2 lines

Fixed missing brace in GTK1 code branch.

------------------------------------------------------------------------
r9909 | rmanfredi | 2005-10-29 03:54:29 -0400 (Sat, 29 Oct 2005) | 2 lines

Fixed inconsistent declaration for utf8_decode_char().

------------------------------------------------------------------------
r9908 | daichik | 2005-10-29 02:15:32 -0400 (Sat, 29 Oct 2005) | 4 lines

Updated with `make update-po'.

PS. Congrats Jeroen, but you have still 3 fuzzy strings.

------------------------------------------------------------------------
r9907 | cbiere | 2005-10-29 02:07:28 -0400 (Sat, 29 Oct 2005) | 2 lines

Added missing target "all" manually.

------------------------------------------------------------------------
r9906 | cbiere | 2005-10-29 01:33:17 -0400 (Sat, 29 Oct 2005) | 2 lines

Reverted change to utf8.h.

------------------------------------------------------------------------
r9905 | nonamer | 2005-10-28 15:32:36 -0400 (Fri, 28 Oct 2005) | 2 lines

Argument mismatch

------------------------------------------------------------------------
r9904 | nonamer | 2005-10-28 15:19:44 -0400 (Fri, 28 Oct 2005) | 2 lines

All translated...

------------------------------------------------------------------------
r9903 | cbiere | 2005-10-28 13:35:26 -0400 (Fri, 28 Oct 2005) | 3 lines

* Removed #define for STACKSIZE. This seems to be defined on Darwin in a
  system header file.

------------------------------------------------------------------------
r9902 | cbiere | 2005-10-28 13:33:39 -0400 (Fri, 28 Oct 2005) | 3 lines

utf8_decode_char_fast():
	Don't allow NULL as any parameter to get rid of the runtime NULL-check.

------------------------------------------------------------------------
r9901 | cbiere | 2005-10-28 13:31:46 -0400 (Fri, 28 Oct 2005) | 2 lines

Added utf8_2nd_byte_tab[] for a simpler and faster utf8_decode_char_fast().

------------------------------------------------------------------------
r9900 | nonamer | 2005-10-28 07:38:30 -0400 (Fri, 28 Oct 2005) | 3 lines

Translations left: 0
Fuzzies left: 489

------------------------------------------------------------------------
r9899 | nonamer | 2005-10-28 05:43:37 -0400 (Fri, 28 Oct 2005) | 2 lines

Countries translated

------------------------------------------------------------------------
r9898 | cbiere | 2005-10-28 03:22:55 -0400 (Fri, 28 Oct 2005) | 2 lines

Applied patch for Greek translation by Bouklis Panos.

------------------------------------------------------------------------
r9895 | cbiere | 2005-10-27 16:29:29 -0400 (Thu, 27 Oct 2005) | 8 lines

Set adns_helper_alive to FALSE by default instead of TRUE.
adns_cache_free():
	Don't return NULL, this is obscure.
adns_init():
	Make sure adns_cache() is initialized.
	Check whether inputevt_add() failed, just in case.
	Show the errno message if open() failed for /dev/null.

------------------------------------------------------------------------
r9894 | cbiere | 2005-10-27 16:15:28 -0400 (Thu, 27 Oct 2005) | 3 lines

Use GtkListStore instead of GtkTreeStore to get rid of the initial whitespace
	reserver for unused column-expanders.

------------------------------------------------------------------------
r9893 | cbiere | 2005-10-27 16:14:20 -0400 (Thu, 27 Oct 2005) | 2 lines

Minor clean-up.

------------------------------------------------------------------------
r9892 | cbiere | 2005-10-27 16:13:22 -0400 (Thu, 27 Oct 2005) | 6 lines

locale_init():
	* Don't use iconv() for UTF-8 -> UTF-8 conversions.
unicode_decompose_init():
	Added regression.
Added lazy_unknown_to_utf8_normalized().

------------------------------------------------------------------------
r9891 | cbiere | 2005-10-27 16:11:06 -0400 (Thu, 27 Oct 2005) | 5 lines

* Prepend items at the top of the search monitor instead of appending them
   just like the Gtk+ 1.2 frontend.
* Use lazy_unknown_to_utf8_normalized() instead of
  lazy_locale_to_utf8_normalized().

------------------------------------------------------------------------
r9890 | nonamer | 2005-10-27 12:58:32 -0400 (Thu, 27 Oct 2005) | 2 lines

A little more translations

------------------------------------------------------------------------
r9889 | daichik | 2005-10-27 11:23:42 -0400 (Thu, 27 Oct 2005) | 2 lines

Added some lines.

------------------------------------------------------------------------
r9888 | daichik | 2005-10-27 11:00:08 -0400 (Thu, 27 Oct 2005) | 5 lines

Goedemorgen Jeroen, by the way:

    Fixed errors.
    Wrapped lines (make update-po).

------------------------------------------------------------------------
r9887 | nonamer | 2005-10-27 10:44:04 -0400 (Thu, 27 Oct 2005) | 2 lines

A little bit more translations

------------------------------------------------------------------------
r9886 | daichik | 2005-10-27 10:20:50 -0400 (Thu, 27 Oct 2005) | 2 lines

Added.

------------------------------------------------------------------------
r9885 | nonamer | 2005-10-27 07:44:16 -0400 (Thu, 27 Oct 2005) | 2 lines

A little update, still 400 translations left, and a lot fuzzzzzz as well

------------------------------------------------------------------------
r9884 | daichik | 2005-10-27 04:05:30 -0400 (Thu, 27 Oct 2005) | 5 lines

Added a new section.
Style changes (indentation).
Corrected typo.
Removed extra whitespaces.

------------------------------------------------------------------------
r9883 | daichik | 2005-10-27 03:40:19 -0400 (Thu, 27 Oct 2005) | 12 lines

NOTE: When you update this file, you may

    o Remove lines (because, unnecessary Id expansion happens)

      #: src/ui/gtk/gtk1/interface-glade.c:...
      msgid "$Id: interface-glade.c,v... Exp $"
      msgstr ""

    o Modify default charset

      "Content-Type: text/plain; charset=UTF-8\n"

------------------------------------------------------------------------
r9882 | daichik | 2005-10-27 03:15:57 -0400 (Thu, 27 Oct 2005) | 2 lines

Updated with the latest CVS release version (2005-10-24).

------------------------------------------------------------------------
r9881 | rmanfredi | 2005-10-26 16:05:43 -0400 (Wed, 26 Oct 2005) | 2 lines

Clarified position of constant in equality tests via new rule 4.6.

------------------------------------------------------------------------
r9880 | nonamer | 2005-10-26 15:15:24 -0400 (Wed, 26 Oct 2005) | 2 lines

This cache wasn't supposed to come back

------------------------------------------------------------------------
r9879 | cbiere | 2005-10-26 14:47:50 -0400 (Wed, 26 Oct 2005) | 3 lines

Revised previous incomplete fix. Use buffers_discard() instead of manually
	zero-ing b->held.

------------------------------------------------------------------------
r9878 | cbiere | 2005-10-26 10:02:23 -0400 (Wed, 26 Oct 2005) | 3 lines

R.I.P. BearShare.
Updated list of URLs.

------------------------------------------------------------------------
r9877 | cbiere | 2005-10-26 08:12:03 -0400 (Wed, 26 Oct 2005) | 3 lines

update_multichoice():
	Minor style fix.

------------------------------------------------------------------------
r9876 | cbiere | 2005-10-26 08:11:21 -0400 (Wed, 26 Oct 2005) | 2 lines

Removed utf8_or_locale_normalize(), use unknown_to_utf8_normalized() instead.

------------------------------------------------------------------------
r9875 | cbiere | 2005-10-26 08:07:17 -0400 (Wed, 26 Oct 2005) | 18 lines

utf8_is_valid_string():
	* Changed return type to gboolean and removed character counting
	  so that the name matches the actual behaviour and the empty
	  string is not considered invalid. In most cases, the caller does
	  not care about the number of Unicode characters.
utf8_is_valid_data():
	* Same as utf8_is_valid_string() but takes a length and ignores NUL
	  bytes.
utf8_char_count():
	* Returns the Unicode character count or -1 on invalidly encoded input.
utf8_data_char_count():
	* Same as utf8_char_count() but takes a length and ignores NUL bytes.
utf8_enforce():
	Minor simplification.
unknown_to_utf8():
unknown_to_utf8_normalized():
	Added a bool flag to request character set information for testing.

------------------------------------------------------------------------
r9874 | cbiere | 2005-10-26 08:00:23 -0400 (Wed, 26 Oct 2005) | 2 lines

Updated use of utf8_is_valid_string() and unknown_to_utf8_normalized().

------------------------------------------------------------------------
r9873 | cbiere | 2005-10-26 07:56:59 -0400 (Wed, 26 Oct 2005) | 4 lines

search_new():
	Updated use of utf8_is_valid_string().
	Reject canonized string shorter than 3 bytes from here.

------------------------------------------------------------------------
r9872 | cbiere | 2005-10-26 07:55:41 -0400 (Wed, 26 Oct 2005) | 3 lines

qrp_add_file():
	Replaced utf8_is_valid_string() with utf8_is_valid_data().

------------------------------------------------------------------------
r9871 | cbiere | 2005-10-26 07:54:56 -0400 (Wed, 26 Oct 2005) | 3 lines

st_insert_item():
	Replaced utf8_is_valid_string() with utf8_char_count().

------------------------------------------------------------------------
r9870 | cbiere | 2005-10-26 07:54:10 -0400 (Wed, 26 Oct 2005) | 9 lines

compact_query_utf8():
	Replacing utf8_is_valid_char() with utf8_char_len().
query_utf8_decode():
	Simplified.
search_request():
	Adjusted use of query_utf8_decode().
	Minor style fixes.
	Removed deprecated code.

------------------------------------------------------------------------
r9869 | cbiere | 2005-10-26 07:51:02 -0400 (Wed, 26 Oct 2005) | 8 lines

file_info_get():
	Updated use of unknown_to_utf8_normalized().
search_gui_add_record():
	* Prepend the used character set if the filename was converted. This
	  is not used for the actual filename when downloading the file.
gui_search_history_add():
	Added const-qualifier.

------------------------------------------------------------------------
r9868 | cbiere | 2005-10-26 07:47:39 -0400 (Wed, 26 Oct 2005) | 2 lines

Updated prototypes.

------------------------------------------------------------------------
r9867 | cbiere | 2005-10-26 07:47:06 -0400 (Wed, 26 Oct 2005) | 3 lines

stats_hash_to_treeview():
	Just use unknown_to_utf8_normalized().

------------------------------------------------------------------------
r9866 | cbiere | 2005-10-26 07:46:19 -0400 (Wed, 26 Oct 2005) | 6 lines

[GTK2] Converted the deprecated GtkCombo used for the search editbox to
	GtkComboBoxEntry.
search_gui_add_record():
	* Prepend the used character set if the filename was converted. This
	  is not used for the actual filename when downloading the file.

------------------------------------------------------------------------
r9865 | cbiere | 2005-10-26 05:24:22 -0400 (Wed, 26 Oct 2005) | 2 lines

Extended range at Voxel.net.

------------------------------------------------------------------------
r9864 | cbiere | 2005-10-26 05:10:37 -0400 (Wed, 26 Oct 2005) | 3 lines

download_request():
	Added more aggressive filtering.

------------------------------------------------------------------------
r9863 | rmanfredi | 2005-10-26 04:50:33 -0400 (Wed, 26 Oct 2005) | 3 lines

Added new spamming ranges.
Removed duplicates (ranges that were subranges of wider ones now).

------------------------------------------------------------------------
r9862 | rmanfredi | 2005-10-26 04:32:05 -0400 (Wed, 26 Oct 2005) | 2 lines

Added makefiles to extra_files.

------------------------------------------------------------------------
r9861 | rmanfredi | 2005-10-26 04:31:44 -0400 (Wed, 26 Oct 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9860 | rmanfredi | 2005-10-26 04:31:04 -0400 (Wed, 26 Oct 2005) | 2 lines

Moved handling of extra_files in that directory's Jmakefile.

------------------------------------------------------------------------
r9859 | rmanfredi | 2005-10-26 04:29:59 -0400 (Wed, 26 Oct 2005) | 2 lines

Generated.

------------------------------------------------------------------------
r9858 | rmanfredi | 2005-10-26 04:28:52 -0400 (Wed, 26 Oct 2005) | 2 lines

Created.

------------------------------------------------------------------------
r9857 | cbiere | 2005-10-26 03:54:57 -0400 (Wed, 26 Oct 2005) | 2 lines

Corrected network prefix.

------------------------------------------------------------------------
r9856 | cbiere | 2005-10-26 03:51:58 -0400 (Wed, 26 Oct 2005) | 2 lines

Added another range used by the same spammer.

------------------------------------------------------------------------
r9855 | cbiere | 2005-10-26 03:48:01 -0400 (Wed, 26 Oct 2005) | 2 lines

Extended range of spammer hosted by pie.us.

------------------------------------------------------------------------
r9854 | cbiere | 2005-10-26 02:46:05 -0400 (Wed, 26 Oct 2005) | 5 lines

download_stop_v():
download_close():
	* Fixed bug which caused an assertion failure when the download buffers
	  could not be flushed to disk.

------------------------------------------------------------------------
r9853 | cbiere | 2005-10-25 18:23:54 -0400 (Tue, 25 Oct 2005) | 2 lines

Added range of a German spammer.

------------------------------------------------------------------------
r9852 | cbiere | 2005-10-25 17:29:30 -0400 (Tue, 25 Oct 2005) | 2 lines

Minor fixes.

------------------------------------------------------------------------
r9851 | cbiere | 2005-10-25 16:23:35 -0400 (Tue, 25 Oct 2005) | 14 lines

Added additional x -> UTF-8 iconv contexts which will be loaded on demand.
Added unknown_to_utf8():
	* Which tries to guess the encoding used for the given string and
	  converts it to UTF-8 or returns the original string if it is
	  UTF-8 encoded.
utf8_to_filename():
	Skip unnecessary normalization for ASCII.
utf8_normalize():
	Skip unnecessary normalization for ASCII but return a copy for now.
Renamed latin_to_utf8_normalized() to iso8859_1_to_utf8_normalized().
lazy_vendor_to_utf8():
	* Check for ASCII instead of UTF-8 because headers do not use
	  UTF-8 but ISO-8859-1 encoding.

------------------------------------------------------------------------
r9850 | cbiere | 2005-10-25 16:12:16 -0400 (Tue, 25 Oct 2005) | 3 lines

file_info_get():
	Use unknown_to_utf8_normalized() instead of locale_to_utf8_normalized().

------------------------------------------------------------------------
r9849 | cbiere | 2005-10-25 15:55:39 -0400 (Tue, 25 Oct 2005) | 4 lines

search_update_details():
	* Free the result of unknown_to_utf8_normalized() only if the
	  result is a newly allocated string.

------------------------------------------------------------------------
r9848 | cbiere | 2005-10-25 15:53:21 -0400 (Tue, 25 Oct 2005) | 5 lines

search_gui_add_record():
	* Normalize the info string for the GUI.
	* Use unknown_to_utf8_normalized() instead of
	  search_gui_get_filename_extension().

------------------------------------------------------------------------
r9847 | cbiere | 2005-10-25 15:51:35 -0400 (Tue, 25 Oct 2005) | 3 lines

monitor_gui_append():
	Normalize the string for the GUI.

------------------------------------------------------------------------
r9846 | cbiere | 2005-10-25 15:50:04 -0400 (Tue, 25 Oct 2005) | 3 lines

search_new():
	Fixed variable name.

------------------------------------------------------------------------
r9845 | cbiere | 2005-10-25 15:48:45 -0400 (Tue, 25 Oct 2005) | 3 lines

gui_update_download_column():
	Normalize the string for the GUI.

------------------------------------------------------------------------
r9844 | cbiere | 2005-10-25 15:47:54 -0400 (Tue, 25 Oct 2005) | 3 lines

search_gui_set_details():
	Use unknown_to_utf8_normalized() for rc->name here too.

------------------------------------------------------------------------
r9843 | cbiere | 2005-10-25 15:46:12 -0400 (Tue, 25 Oct 2005) | 4 lines

search_gui_add_record():
	* Use unknown_to_utf8_normalized() instead of
	  search_gui_record_name_to_utf8().

------------------------------------------------------------------------
r9842 | cbiere | 2005-10-25 15:43:52 -0400 (Tue, 25 Oct 2005) | 5 lines

nodes_gui_update_node_info():
nodes_gui_add_node():
	* Convert the User-Agent from ISO-8859-1 to the current locale so
	  that it's properly displayed.

------------------------------------------------------------------------
r9841 | cbiere | 2005-10-25 15:40:49 -0400 (Tue, 25 Oct 2005) | 2 lines

Removed search_gui_record_name_to_utf8() again.

------------------------------------------------------------------------
r9840 | cbiere | 2005-10-25 15:37:31 -0400 (Tue, 25 Oct 2005) | 6 lines

upload_free_resources():
	* Changed order of functions so that u->special->close() still has
	  a valid socket file descriptor because it may call
	  update_poll_event() and an invalid fd would cause an
	  assertion failure.

------------------------------------------------------------------------
r9839 | cbiere | 2005-10-25 15:32:32 -0400 (Tue, 25 Oct 2005) | 4 lines

search_new():
	Added comments.
	Ensure that the query string is UTF-8 encoded at this stage.

------------------------------------------------------------------------
r9838 | cbiere | 2005-10-24 15:37:12 -0400 (Mon, 24 Oct 2005) | 3 lines

Added property pfsp_minimum_filesize: Don't share files smaller than this
	automagically with PFS. Default is 512 KiB.

------------------------------------------------------------------------
r9837 | cbiere | 2005-10-24 14:18:24 -0400 (Mon, 24 Oct 2005) | 2 lines

Removed temporary debug message again.

------------------------------------------------------------------------
r9836 | cbiere | 2005-10-24 14:07:48 -0400 (Mon, 24 Oct 2005) | 2 lines

Moved several files from the top-level dir to "extra_files".

------------------------------------------------------------------------
r9835 | cbiere | 2005-10-24 14:03:49 -0400 (Mon, 24 Oct 2005) | 2 lines

Fixed references to files that are now in the extra_files directory.

------------------------------------------------------------------------
r9834 | cbiere | 2005-10-24 13:58:03 -0400 (Mon, 24 Oct 2005) | 2 lines

Fixed references to files that are now in the extra_files directory.

------------------------------------------------------------------------
r9833 | cbiere | 2005-10-24 13:37:12 -0400 (Mon, 24 Oct 2005) | 2 lines

Moving diverse files from top-level directory to extra_files.

------------------------------------------------------------------------
r9832 | cbiere | 2005-10-24 13:34:51 -0400 (Mon, 24 Oct 2005) | 2 lines

Moved to scripts.

------------------------------------------------------------------------
r9831 | cbiere | 2005-10-24 13:33:50 -0400 (Mon, 24 Oct 2005) | 2 lines

Moving scripts from top-level dir.

------------------------------------------------------------------------
r9830 | cbiere | 2005-10-24 12:53:45 -0400 (Mon, 24 Oct 2005) | 2 lines

Removing directory "intl" as it's no longer used.

------------------------------------------------------------------------
r9829 | cbiere | 2005-10-24 10:35:53 -0400 (Mon, 24 Oct 2005) | 5 lines

Added search_gui_get_filename_extension():
	If the filename is not UTF-8 encoded convert it either from the
	current locale or ISO-8859-1 to UTF-8.
Added search_gui_record_name_to_utf8().

------------------------------------------------------------------------
r9828 | cbiere | 2005-10-24 10:32:20 -0400 (Mon, 24 Oct 2005) | 4 lines

Renamed is_latin_locale() to locale_is_latin().
Export latin_is_utf8() too.
Added latin_to_utf8_normalized().

------------------------------------------------------------------------
r9827 | cbiere | 2005-10-23 22:41:26 -0400 (Sun, 23 Oct 2005) | 3 lines

Use the UNI_NORM aliases instead of an explicit form for documentation
	purposes.

------------------------------------------------------------------------
r9826 | cbiere | 2005-10-23 22:35:38 -0400 (Sun, 23 Oct 2005) | 3 lines

Added aliases for the UNI_NORM_* enums to document the choice of
	a certain Unicode normalization form.

------------------------------------------------------------------------
r9825 | cbiere | 2005-10-23 22:33:50 -0400 (Sun, 23 Oct 2005) | 6 lines

Merged locale_get_charset() with get_locale_charset().
lazy_locale_to_utf8():
	Use UNI_NORM_GUI instead of UNI_NORM_NFC.
utf8_to_filename():
	Use UNI_NORM_FILESYSTEM.

------------------------------------------------------------------------
r9824 | cbiere | 2005-10-23 21:11:00 -0400 (Sun, 23 Oct 2005) | 5 lines

search_gui_new_search():
	Forgot that ui_string_to_utf8() may return the original string
	which caused a double-free bug. Replaced it with
	lazy_ui_string_to_utf8() so that freeing is not necessary.

------------------------------------------------------------------------
r9823 | cbiere | 2005-10-23 21:07:41 -0400 (Sun, 23 Oct 2005) | 3 lines

Replaced ui_string_to_utf8() with lazy_ui_string_to_utf8() for easier
	handling.

------------------------------------------------------------------------
r9822 | cbiere | 2005-10-23 20:28:59 -0400 (Sun, 23 Oct 2005) | 3 lines

recurse_scan():
	Convert from the filename character set instead of the locale.

------------------------------------------------------------------------
r9821 | cbiere | 2005-10-23 20:11:22 -0400 (Sun, 23 Oct 2005) | 2 lines

Back to the present.

------------------------------------------------------------------------
r9820 | cbiere | 2005-10-23 20:05:59 -0400 (Sun, 23 Oct 2005) | 5 lines

CVS ate my log message; in a nutshell: Implemented GLib-independent
	support for G_FILENAME_ENCODING to use a user-defined character
	set for filenames when creating files or when converting
	filenames of existing files to UTF-8.

------------------------------------------------------------------------
r9819 | cbiere | 2005-10-23 14:53:11 -0400 (Sun, 23 Oct 2005) | 3 lines

unique_filename():
	Minor style tweaks.

------------------------------------------------------------------------
r9818 | daichik | 2005-10-22 20:24:06 -0400 (Sat, 22 Oct 2005) | 2 lines

Corrected a typo.

------------------------------------------------------------------------
r9817 | cbiere | 2005-10-22 11:29:49 -0400 (Sat, 22 Oct 2005) | 2 lines

Removed superfluous xstr() macro.

------------------------------------------------------------------------
r9816 | cbiere | 2005-10-22 11:11:09 -0400 (Sat, 22 Oct 2005) | 2 lines

Corrected "Plural-Forms" with translator's approval.

------------------------------------------------------------------------
r9815 | cbiere | 2005-10-21 21:16:25 -0400 (Fri, 21 Oct 2005) | 3 lines

Changed example address for Language-Team.
Set charset to UTF-8.

------------------------------------------------------------------------
r9814 | cbiere | 2005-10-21 21:06:30 -0400 (Fri, 21 Oct 2005) | 2 lines

Documents how the homepage is managed.

------------------------------------------------------------------------
r9813 | daichik | 2005-10-21 19:42:23 -0400 (Fri, 21 Oct 2005) | 3 lines

Updated with the latest POT file.
Discarded obsolete translations.

------------------------------------------------------------------------
r9812 | daichik | 2005-10-21 19:40:51 -0400 (Fri, 21 Oct 2005) | 8 lines

Good works, welcome to the Gtk-Gnutella!

By the way:

    Updated with the latest POT file.
    Modified initial comment strings.
    Bump the version up at the `Project-Id-Version'.

------------------------------------------------------------------------
r9811 | daichik | 2005-10-21 19:36:17 -0400 (Fri, 21 Oct 2005) | 2 lines

Updated with the latest sources.

------------------------------------------------------------------------
r9810 | cbiere | 2005-10-21 18:55:08 -0400 (Fri, 21 Oct 2005) | 2 lines

Added Ian Sheldon to list of contributors.

------------------------------------------------------------------------
r9809 | cbiere | 2005-10-21 18:53:08 -0400 (Fri, 21 Oct 2005) | 4 lines

Added Ian Sheldon.
Added Bouklis Panos.
Converted to UTF-8.

------------------------------------------------------------------------
r9808 | cbiere | 2005-10-21 18:34:46 -0400 (Fri, 21 Oct 2005) | 3 lines

Applied edited patch #1334322 by Ian Sheldon to display timestamps in
	the queue status column.

------------------------------------------------------------------------
r9807 | cbiere | 2005-10-21 17:08:30 -0400 (Fri, 21 Oct 2005) | 2 lines

Added greek translation provided by Bouklis Panos.

------------------------------------------------------------------------
r9806 | cbiere | 2005-10-21 16:56:11 -0400 (Fri, 21 Oct 2005) | 5 lines

date_to_iso_gchar(), update_label_date(), update_entry_date():
	Slightly correct use of strftime(): If 0 is returned, the array
		contents are undefined. Thus make we get an empty string
		on failure instead of junk.

------------------------------------------------------------------------
r9805 | cbiere | 2005-10-21 15:30:36 -0400 (Fri, 21 Oct 2005) | 4 lines

parse_uint16(), parse_uint32(), parse_uint64():
	Use NON_NULL_PARAM() especially to make clear that "error" is
		a mandatory parameter to "enforce" error checking.

------------------------------------------------------------------------
r9804 | cbiere | 2005-10-21 15:28:54 -0400 (Fri, 21 Oct 2005) | 3 lines

Define G_STRLOC for GLib 1.2.x.
Added macro NON_NULL_PARAM() which wraps GCC's nonnull attribute.

------------------------------------------------------------------------
r9803 | cbiere | 2005-10-21 15:26:52 -0400 (Fri, 21 Oct 2005) | 6 lines

FAST_ASSERTIONS:
	Amended comments.
	Renamed raise_assert_failure() to eject_().
	Moved extern reference to assert_msg_ into eject_().
	Simplified replacements for g_assert() and g_assert_not_reached().

------------------------------------------------------------------------
r9802 | rmanfredi | 2005-10-21 14:15:53 -0400 (Fri, 21 Oct 2005) | 3 lines

Ban all use of StGiFy() -- it's meant to be an internal definition.
Use STRINGIFY() instead.

------------------------------------------------------------------------
r9801 | cbiere | 2005-10-21 13:39:06 -0400 (Fri, 21 Oct 2005) | 4 lines

get_params():
	Made this a little more clean and robust.
	Replaced atoi() with parse_uint32().

------------------------------------------------------------------------
r9800 | cbiere | 2005-10-21 13:33:49 -0400 (Fri, 21 Oct 2005) | 4 lines

handle_magnet():
	Added missing const-qualifier to "ep2".
	Fixed variable name: v -> u;

------------------------------------------------------------------------
r9799 | cbiere | 2005-10-21 12:52:54 -0400 (Fri, 21 Oct 2005) | 3 lines

Changed hex2int_tab, dec2int_tab, alnum2int_tab so that they can be
	declared const.

------------------------------------------------------------------------
r9798 | cbiere | 2005-10-21 12:39:38 -0400 (Fri, 21 Oct 2005) | 2 lines

Removed the const-qualifiers from the extern references to hex2int_tab etc.

------------------------------------------------------------------------
r9797 | cbiere | 2005-10-21 11:52:42 -0400 (Fri, 21 Oct 2005) | 2 lines

Removed unused gm_atoul().

------------------------------------------------------------------------
r9796 | cbiere | 2005-10-21 11:51:53 -0400 (Fri, 21 Oct 2005) | 8 lines

Use %u instead of %d for format strings where no signed values are expected.
buffers_match():
	Added const-qualifiers.
extract_retry_after():
	Replaced gm_atoul() with parse_uint32().
download_retrieve():
	Use uint64_to_string() instead of casting filesize_t to glong.

------------------------------------------------------------------------
r9795 | cbiere | 2005-10-21 11:46:19 -0400 (Fri, 21 Oct 2005) | 3 lines

handle_magnet():
	Replaced gm_atoul() with parse_uint16().

------------------------------------------------------------------------
r9794 | cbiere | 2005-10-20 21:39:11 -0400 (Thu, 20 Oct 2005) | 4 lines

Rearranged the property vector parsers so that prop_parse_vector()
	takes care of the vector itself (comma, leading/trailing space)
	and a specific routine parses a single element.

------------------------------------------------------------------------
r9793 | cbiere | 2005-10-20 21:33:47 -0400 (Thu, 20 Oct 2005) | 7 lines

Added g_strlcat() for GLib 1.2.x.
Simplified and optimized short_size(), short_kb_size(), compact_kb_size() etc.
string_to_ip_and_mask():
	Replaced gm_atoul() with parse_uint32().
set_signal():
	Corrected HAVE_SA_INTERRUPT to  HAS_SA_INTERRUPT.

------------------------------------------------------------------------
r9792 | cbiere | 2005-10-20 21:01:06 -0400 (Thu, 20 Oct 2005) | 2 lines

Slight correction of guiding comments.

------------------------------------------------------------------------
r9791 | cbiere | 2005-10-20 20:59:47 -0400 (Thu, 20 Oct 2005) | 2 lines

Added metaconfig check for strlcat().

------------------------------------------------------------------------
r9790 | cbiere | 2005-10-20 20:55:52 -0400 (Thu, 20 Oct 2005) | 3 lines

signal_handler():
	Correct variable name.

------------------------------------------------------------------------
r9789 | cbiere | 2005-10-20 20:55:14 -0400 (Thu, 20 Oct 2005) | 6 lines

alive_trim_upto():
	Don't use a free'd pointer for comparisons.
alive_ack_ping():
alive_get_roundtrip_ms():
	Added const-qualifiers.

------------------------------------------------------------------------
r9788 | rmanfredi | 2005-10-20 17:51:46 -0400 (Thu, 20 Oct 2005) | 4 lines

When we know a small amount of alternate sources and PFSP is enabled,
always include ourselves in the X-Alt we generate to help propagation
of alternates, even if the bandwidth is saturated.

------------------------------------------------------------------------
r9787 | cbiere | 2005-10-20 04:01:19 -0400 (Thu, 20 Oct 2005) | 3 lines

gmsg_mb_sendto_all():
	Corrected "size" parameter for gmsg_header_check().

------------------------------------------------------------------------
r9786 | cbiere | 2005-10-20 03:53:42 -0400 (Thu, 20 Oct 2005) | 2 lines

Added const-qualifier to pmsg_check_t().

------------------------------------------------------------------------
r9785 | cbiere | 2005-10-20 03:17:12 -0400 (Thu, 20 Oct 2005) | 4 lines

url_unescape():
	Renamed hex2dec() to hex2int().
	Use hex2int_inline(), the data has been checked.

------------------------------------------------------------------------
r9784 | cbiere | 2005-10-20 03:16:10 -0400 (Thu, 20 Oct 2005) | 3 lines

prop_parse_storage():
	Renamed hex2dec() to hex2int().

------------------------------------------------------------------------
r9783 | cbiere | 2005-10-20 03:00:55 -0400 (Thu, 20 Oct 2005) | 22 lines

Added dec2int() for fast decimal digit to integer conversions.
Added alnum2int() for fast any base (2-36) digit to integer conversions.
Renamed hex2dec() to hex2int() because this has nothing do with
	decimal values, it just converts a hex character to an integer.
string_to_ip_strict():
	Optimized string_to_ip_strict() with dec2int_inline().
parse_uint32(), parse_uint32(), parse_uint64():
	These are now generated by a macro as the implementations are
	identical except for the bitwidth. The code is also much more
	optimized due to a division-less overflow check and use of
	alnum2int_inline().
misc_init():
	Added initialization routines for the lookup tables and a
		some consistency checks for parse_uintX().
is_ascii_xdigit():
	Use hex2int_inline() instead of 2 range checks.
is_ascii_alnum():
	Use alnum2int_inline().
netmask_to_cidr():
is_pow2():
	Experimental use of __builtin_popcount(); this is deactivated!

------------------------------------------------------------------------
r9782 | cbiere | 2005-10-20 02:47:00 -0400 (Thu, 20 Oct 2005) | 3 lines

parse_chunk():
	Use hex2int_inline(), the data has been checked.

------------------------------------------------------------------------
r9781 | cbiere | 2005-10-20 02:45:41 -0400 (Thu, 20 Oct 2005) | 10 lines

Replaced macro UNISKIP() with inline function uniskip():
	Ignore codepoints beyond U+10FFFF.
uniskip():
utf8_encoded_char_len():
utf8_encode_char():
	Grouped these functions for better readability.
	Removed pointless assertions; the code is clear which means
		the assertions cannot trigger and these are internal
		routines where the penalty matters.

------------------------------------------------------------------------
r9780 | cbiere | 2005-10-20 02:39:19 -0400 (Thu, 20 Oct 2005) | 3 lines

route_exists_for_reply():
	Added const-qualifier.

------------------------------------------------------------------------
r9779 | cbiere | 2005-10-20 02:38:33 -0400 (Thu, 20 Oct 2005) | 8 lines

build_pong_msg():
build_ping_msg():
	Added a guint64 to the msg_init union to request nicer alignment.
build_ping_msg():
	Create the ggep struct only if necessary.
	Added assertion checks; the GGEP stream stuff should not fail here
		because there's sufficient space.

------------------------------------------------------------------------
r9778 | cbiere | 2005-10-20 02:34:39 -0400 (Thu, 20 Oct 2005) | 12 lines

msg_weight: Changed to guint8 to decrease table size.
Added const-qualifiers.
Removed unnecessary casts.
Added gmsg_header_check() to combine some consistency checks for the
	gnutella message header in order to prevent sending malformed
	packets.
gmsg_sendto_one_ggep():
	[BUGFIX] If the receiver doesn't support GGEP adjust the header too.
gmsg_split_sendto_all_but_one_ggep():
	[BUGFIX] Correct the header size field to the correct size when
	tripping GGEP data.

------------------------------------------------------------------------
r9777 | cbiere | 2005-10-18 07:08:10 -0400 (Tue, 18 Oct 2005) | 17 lines

UNICODE_IS_BYTE_ORDER_MARK():
	Look only at the lower 16 bits.
	Added shorter alias UNICODE_IS_BOM().
utf8_encoded_char_len():
	Do not encode BOMs either.
utf8_decode_char_fast():
	Replaced implementation with the corrected, further, optimized
		and tested, former utf8_decode_char_faster().
	Set "*retlen" to 1 instead of -1 for ASCII NUL, it's a completely
		valid character. Users of this routine check for a return
		value of 0 anyway.
unicode_decompose_init():
	Added (disabled) consistency checks to verify the implementation
		of utf8_decode_char_fast() against utf8_encode_char().
	These are disabled because they take a few seconds resp. minutes
		but are OK (that means NOT broken - like other checks).

------------------------------------------------------------------------
r9776 | cbiere | 2005-10-18 04:12:17 -0400 (Tue, 18 Oct 2005) | 11 lines

utf8_skip(): (was unused so far)
	Use values according to Unicode 4.1.0 i.e., the longest UTF-8
		sequence is only 4 bytes long and reject also surrogates.
	Use the full table; a single comparision seems to be worse than
		a larger table.
Added still inactive and untested utf8_decode_char_faster(). It's
	simpler and smaller than utf8_decode_char_fast() and should be
	faster especially for common cases as well.
utf32_strmaxlen():
	Minor optimization (should be).

------------------------------------------------------------------------
r9775 | cbiere | 2005-10-17 16:16:28 -0400 (Mon, 17 Oct 2005) | 9 lines

shell_exec_node():
	Replaced atol() with parse_uint32() to parse the port number.
shell_exec_set():
	Minor style fixes.
	Replaced atol() with parse_uint32().
	Fixed case PROP_TYPE_GUINT64; use the correct setter method and
		parse_uint64() instead of strtol().
	Don't ignore unparsable values; return an error instead.

------------------------------------------------------------------------
r9774 | cbiere | 2005-10-17 14:42:17 -0400 (Mon, 17 Oct 2005) | 12 lines

FAST_ASSERTIONS:
	Use an assembler instruction to trigger a SIGTRAP for even less
		overhead on x86 with GCC.
hex2dec_inline():
	Optimized by using a lookup table.
assertion_failure():
	Use raise() instead of abort() so that the default handler for the
		signal is used.
	Handle SIGSEGV and SIGTRAP as necessary.
main():
	Call misc_init() early to initialize the hex2dec LUT.

------------------------------------------------------------------------
r9773 | cbiere | 2005-10-16 17:12:16 -0400 (Sun, 16 Oct 2005) | 8 lines

is_ascii_string():
	Optimized by doing only one comparison per iteration instead of two.
locale_to_utf8():
locale_to_utf8_full():
locale_to_utf8_normalized():
	Fall-back to utf8_enforce() instead of crashing when the initialization
		of cd_locale_to_utf8 failed.

------------------------------------------------------------------------
r9772 | cbiere | 2005-10-16 13:18:24 -0400 (Sun, 16 Oct 2005) | 2 lines

Moved assert_trigger_ to lib/override.h.

------------------------------------------------------------------------
r9771 | cbiere | 2005-10-16 13:17:40 -0400 (Sun, 16 Oct 2005) | 5 lines

Use more appropriate message for g_assert_not_reached().
StGiFy(__LINE__) does not work; using STRINGIFY() instead.
Moved SIGSEGV trigger to raise_sigsegv() inline function.
Added comment regarding compiler flags.

------------------------------------------------------------------------
r9770 | cbiere | 2005-10-16 12:00:31 -0400 (Sun, 16 Oct 2005) | 2 lines

Moved definition of G_UNLIKELY to common.h.

------------------------------------------------------------------------
r9769 | cbiere | 2005-10-16 11:59:34 -0400 (Sun, 16 Oct 2005) | 4 lines

Added comments concerning the use of mmap() and its error handling.
signal_handler():
	Reset the handlers to their previous value instead of SIG_DFL.

------------------------------------------------------------------------
r9768 | cbiere | 2005-10-16 11:56:28 -0400 (Sun, 16 Oct 2005) | 4 lines

Moved definition of STDERR_FILENO to common.h and fixed inverted logic.
assertion_failure():
	Add linefeeds around message to ensure it stands out.

------------------------------------------------------------------------
r9767 | cbiere | 2005-10-16 11:55:01 -0400 (Sun, 16 Oct 2005) | 3 lines

Make sure STD{IN,OUT,ERR}_FILENO are defined.
Make sure G_LIKELY and G_UNLIKELY are defined.

------------------------------------------------------------------------
r9766 | rmanfredi | 2005-10-16 06:47:16 -0400 (Sun, 16 Oct 2005) | 3 lines

Fixed compilation of the FAST_ASSERTIONS branch of the code.
Make sure we identify a genuine segmentation fault as such.

------------------------------------------------------------------------
r9765 | cbiere | 2005-10-15 20:46:44 -0400 (Sat, 15 Oct 2005) | 2 lines

Added potential optimization for assertions.

------------------------------------------------------------------------
r9764 | cbiere | 2005-10-11 16:40:34 -0400 (Tue, 11 Oct 2005) | 4 lines

atom_get():
	Fixed issue with the static assertion for some Sun compiler:
		ftp://ftp0.mh.bbc.co.uk/pub/pkgsrc/pkgstat/20051009.1327/net/gtk-gnutella/.broken.html

------------------------------------------------------------------------
r9763 | daichik | 2005-10-09 17:16:59 -0400 (Sun, 09 Oct 2005) | 2 lines

Updated with the latest CVS release version (2005-10-02).

------------------------------------------------------------------------
r9762 | rmanfredi | 2005-10-09 08:28:22 -0400 (Sun, 09 Oct 2005) | 2 lines

More spamming ranges.

------------------------------------------------------------------------
r9761 | rmanfredi | 2005-10-09 08:11:03 -0400 (Sun, 09 Oct 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9760 | rmanfredi | 2005-10-09 07:01:52 -0400 (Sun, 09 Oct 2005) | 3 lines

Consolidated some subnets to remove duplicates.
Added two other spamming ranges.

------------------------------------------------------------------------
r9759 | rmanfredi | 2005-10-09 06:40:06 -0400 (Sun, 09 Oct 2005) | 2 lines

Added sources of TV series fakes.

------------------------------------------------------------------------
r9758 | rmanfredi | 2005-10-09 05:55:23 -0400 (Sun, 09 Oct 2005) | 2 lines

Added new spamming ranges.

------------------------------------------------------------------------
r9757 | cbiere | 2005-10-08 20:12:30 -0400 (Sat, 08 Oct 2005) | 2 lines

Added another spamming range.

------------------------------------------------------------------------
r9756 | rmanfredi | 2005-10-08 16:42:32 -0400 (Sat, 08 Oct 2005) | 2 lines

Added IPv6 documentation.

------------------------------------------------------------------------
r9755 | cbiere | 2005-10-08 09:13:05 -0400 (Sat, 08 Oct 2005) | 2 lines

Fixed compile errors with IPv4-only mode.

------------------------------------------------------------------------
r9754 | rmanfredi | 2005-10-07 16:53:22 -0400 (Fri, 07 Oct 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9753 | rmanfredi | 2005-10-07 16:52:16 -0400 (Fri, 07 Oct 2005) | 2 lines

Fixed #ifndef / #ifdef confusion.

------------------------------------------------------------------------
r9752 | rmanfredi | 2005-10-07 16:51:40 -0400 (Fri, 07 Oct 2005) | 2 lines

Removed d_lstat.U, as it is already a standard metaconfig unit.

------------------------------------------------------------------------
r9751 | nonamer | 2005-10-07 09:45:56 -0400 (Fri, 07 Oct 2005) | 2 lines

Patch from Gary Lawrence Murphy. RPM Spec file did not include gtk-gnutella.svg

------------------------------------------------------------------------
r9750 | cbiere | 2005-10-06 17:17:38 -0400 (Thu, 06 Oct 2005) | 3 lines

host_addr_is_6to4():
	Endian issue.

------------------------------------------------------------------------
r9749 | cbiere | 2005-10-06 17:17:01 -0400 (Thu, 06 Oct 2005) | 3 lines

host_addr_is_6to4():
	Endian issue.

------------------------------------------------------------------------
r9748 | cbiere | 2005-10-06 13:18:11 -0400 (Thu, 06 Oct 2005) | 3 lines

proxy_connect():
	Corrected check that determines whether proxy_hostname has been resolved.

------------------------------------------------------------------------
r9747 | cbiere | 2005-10-06 12:47:21 -0400 (Thu, 06 Oct 2005) | 6 lines

ipv4_addr_is_routable():
	Added further nets from RFC 3330.
Added host_addr_is_6to4() and host_addr_6to4_ipv4().
host_addr_is_routable():
	Check also for invalid 6to4 addresses.

------------------------------------------------------------------------
r9746 | cbiere | 2005-10-06 12:43:32 -0400 (Thu, 06 Oct 2005) | 3 lines

struct host_addr:
	Added u8, u16, u32 to union addr for convenience.

------------------------------------------------------------------------
r9745 | cbiere | 2005-10-06 12:42:26 -0400 (Thu, 06 Oct 2005) | 3 lines

is_symlink():
	Fixed compiler warning.

------------------------------------------------------------------------
r9744 | cbiere | 2005-10-04 09:34:21 -0400 (Tue, 04 Oct 2005) | 2 lines

Added metaconfig unit for lstat().

------------------------------------------------------------------------
r9743 | cbiere | 2005-10-04 09:31:27 -0400 (Tue, 04 Oct 2005) | 2 lines

Added const-qualifiers.

------------------------------------------------------------------------
r9742 | cbiere | 2005-10-04 09:30:49 -0400 (Tue, 04 Oct 2005) | 3 lines

Added const-qualifiers.
Detect missing support of IP TOS dynamically.

------------------------------------------------------------------------
r9741 | cbiere | 2005-10-04 09:29:38 -0400 (Tue, 04 Oct 2005) | 2 lines

Removed unnecessary IGNORESETTING.

------------------------------------------------------------------------
r9740 | cbiere | 2005-10-04 09:27:26 -0400 (Tue, 04 Oct 2005) | 2 lines

Don't make use of non-existent signals.

------------------------------------------------------------------------
r9739 | nonamer | 2005-10-04 02:43:20 -0400 (Tue, 04 Oct 2005) | 5 lines

In settings.c renamed the define IGNORE to IGNORESETTING as this define
conflicts with the windows mingw define.

Mingw doesn's support all socket option

------------------------------------------------------------------------
r9738 | rmanfredi | 2005-10-03 14:30:51 -0400 (Mon, 03 Oct 2005) | 2 lines

Regenerated with fixed ccflags.U.

------------------------------------------------------------------------
r9737 | cbiere | 2005-10-03 10:56:44 -0400 (Mon, 03 Oct 2005) | 3 lines

socket_udp_accept():
	Fixed sixth argument for recvfrom().

------------------------------------------------------------------------
r9736 | cbiere | 2005-10-03 10:49:17 -0400 (Mon, 03 Oct 2005) | 4 lines

gm_sanitize_filename():
	Possibly fixed the first Windoze-specific vulnerability:
	Always discard '/' even if "convert evil characters" is disabled.

------------------------------------------------------------------------
r9735 | rmanfredi | 2005-10-02 14:14:07 -0400 (Sun, 02 Oct 2005) | 2 lines

Version of 2005-10-02.

------------------------------------------------------------------------
r9734 | rmanfredi | 2005-10-02 11:07:33 -0400 (Sun, 02 Oct 2005) | 2 lines

Adjusted assertion.

------------------------------------------------------------------------
r9733 | rmanfredi | 2005-10-02 10:31:59 -0400 (Sun, 02 Oct 2005) | 2 lines

Removed wrong assertion.

------------------------------------------------------------------------
r9732 | rmanfredi | 2005-10-02 10:21:44 -0400 (Sun, 02 Oct 2005) | 3 lines

Include the TTL also for the fake_node (ourselves) to keep the route
and ttl lists balanced.

------------------------------------------------------------------------
r9731 | rmanfredi | 2005-10-02 09:35:12 -0400 (Sun, 02 Oct 2005) | 3 lines

Must also manage the ttls list when pruning route data since the two lists
are maintained in parallel.

------------------------------------------------------------------------
r9730 | rmanfredi | 2005-10-02 09:23:37 -0400 (Sun, 02 Oct 2005) | 2 lines

Fixed declaration of compat_mkdir().

------------------------------------------------------------------------
r9729 | rmanfredi | 2005-10-02 08:56:46 -0400 (Sun, 02 Oct 2005) | 6 lines

GTKG was not tracking the TTL of broadcasted messages received along a
given connection, thereby leading it to believe it was receiving undue
duplicates whereas the node was simply resending it with a higher TTL.
Added workaround to allow ultra connections to old (broken) GTKGs to be kept
without remote ending it abruptly: simply never send duplicates to those...

------------------------------------------------------------------------
r9728 | rmanfredi | 2005-10-02 08:21:46 -0400 (Sun, 02 Oct 2005) | 2 lines

Added post-condition to buffers_strip_leading().

------------------------------------------------------------------------
r9727 | rmanfredi | 2005-10-02 03:51:04 -0400 (Sun, 02 Oct 2005) | 2 lines

Fixed uninitialized warning.

------------------------------------------------------------------------
r9726 | rmanfredi | 2005-10-02 03:45:24 -0400 (Sun, 02 Oct 2005) | 2 lines

Version of 2005-10-01.

------------------------------------------------------------------------
r9725 | cbiere | 2005-10-01 16:52:51 -0400 (Sat, 01 Oct 2005) | 2 lines

Added missing settings for I_PWD and I_LANGINFO.

------------------------------------------------------------------------
r9724 | cbiere | 2005-10-01 13:13:43 -0400 (Sat, 01 Oct 2005) | 2 lines

Corrected #if directive.

------------------------------------------------------------------------
r9723 | rmanfredi | 2005-10-01 12:55:20 -0400 (Sat, 01 Oct 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9722 | rmanfredi | 2005-10-01 12:52:55 -0400 (Sat, 01 Oct 2005) | 2 lines

Deleted U/new/d_uname.U: HAS_UNAME is already known to standard metaconfig.

------------------------------------------------------------------------
r9721 | cbiere | 2005-10-01 12:45:44 -0400 (Sat, 01 Oct 2005) | 2 lines

Use I_PWD.

------------------------------------------------------------------------
r9720 | cbiere | 2005-10-01 12:37:33 -0400 (Sat, 01 Oct 2005) | 4 lines

socket_set_nonblocking():
	Corrected used of fcntl().
	ioctlsocket() looks still odd but who knows.

------------------------------------------------------------------------
r9719 | cbiere | 2005-10-01 12:23:49 -0400 (Sat, 01 Oct 2005) | 2 lines

Use echo instead of $cat.

------------------------------------------------------------------------
r9718 | cbiere | 2005-10-01 11:55:26 -0400 (Sat, 01 Oct 2005) | 2 lines

Protect inclusion of <langinfo.h> by I_LANGINFO.

------------------------------------------------------------------------
r9717 | cbiere | 2005-10-01 11:50:50 -0400 (Sat, 01 Oct 2005) | 7 lines

create_directory():
	Use compat_mkdir().
	If S_IROTH or S_IXOTH isn't defined, don't use it.
compat_mkdir():
	Changed type of mode to mode_t; this type was used before so it
	shouldn't cause problems.

------------------------------------------------------------------------
r9716 | cbiere | 2005-10-01 11:39:27 -0400 (Sat, 01 Oct 2005) | 5 lines

Protect inclusion of <pwd.h> by I_PWD.
get_home():
	Use g_get_home_dir() as fall-back.
	Skip getpwuid() if there's no getuid().

------------------------------------------------------------------------
r9715 | cbiere | 2005-10-01 11:21:46 -0400 (Sat, 01 Oct 2005) | 2 lines

Updated for getuid() and geteuid().

------------------------------------------------------------------------
r9714 | cbiere | 2005-10-01 11:20:42 -0400 (Sat, 01 Oct 2005) | 3 lines

Removed C++ style comments.
Added comments so that you don't get lost in the #ifdef jungle.

------------------------------------------------------------------------
r9713 | cbiere | 2005-10-01 11:15:49 -0400 (Sat, 01 Oct 2005) | 7 lines

Added compat_is_superuser().
gtk_gnutella_atexit():
	Don't install a handler for SIGALRM if there's no such signal.
main():
	Use compat_is_superuser().
	Don't install a handler for SIGPIPE if there's no such signal.

------------------------------------------------------------------------
r9712 | cbiere | 2005-10-01 11:13:07 -0400 (Sat, 01 Oct 2005) | 2 lines

Added metaconfig unit for getuid() and geteuid().

------------------------------------------------------------------------
r9711 | cbiere | 2005-10-01 10:56:25 -0400 (Sat, 01 Oct 2005) | 3 lines

socket_udp_accept():
	Just use recvfrom() if msg_flags is missing from struct msghdr.

------------------------------------------------------------------------
r9710 | cbiere | 2005-10-01 10:50:47 -0400 (Sat, 01 Oct 2005) | 4 lines

socket_tos():
	Fixed indentation of ``case'' statements.
	Removed MINGW32 check, we already have USE_IP_TOS.

------------------------------------------------------------------------
r9709 | cbiere | 2005-10-01 10:38:55 -0400 (Sat, 01 Oct 2005) | 2 lines

Updated for HAS_UNAME and I_SYS_UTSNAME.

------------------------------------------------------------------------
r9708 | cbiere | 2005-10-01 10:37:04 -0400 (Sat, 01 Oct 2005) | 2 lines

Added metaconfig unit for uname().

------------------------------------------------------------------------
r9707 | cbiere | 2005-10-01 10:22:42 -0400 (Sat, 01 Oct 2005) | 2 lines

Added inclusion check module for <sys/utsname.h>.

------------------------------------------------------------------------
r9706 | cbiere | 2005-10-01 10:17:35 -0400 (Sat, 01 Oct 2005) | 4 lines

Depend inclusion of <sys/utsname.h> on I_SYS_UTSNAME.
version_init():
	Use HAS_UNAME and use "Unknown" otherwise for now.

------------------------------------------------------------------------
r9705 | cbiere | 2005-10-01 10:05:51 -0400 (Sat, 01 Oct 2005) | 2 lines

Added DOWNLOAD_FILE_MODE.

------------------------------------------------------------------------
r9704 | cbiere | 2005-10-01 09:56:52 -0400 (Sat, 01 Oct 2005) | 3 lines

tm_cputime():
	Fixed for case !HAS_GETRUSAGE && !HAS_TIMES.

------------------------------------------------------------------------
r9703 | cbiere | 2005-10-01 09:55:52 -0400 (Sat, 01 Oct 2005) | 3 lines

random_init():
	Use tm_cputime() instead of times().

------------------------------------------------------------------------
r9702 | cbiere | 2005-10-01 09:35:35 -0400 (Sat, 01 Oct 2005) | 10 lines

Changed PROP_SYS_PHYSMEM to 64-bit integer.
Use 0750 as CONFIG_DIR_MODE in all cases (thus no dice for others).
Moved settings_getpagesize() as compat_pagesize() to lib/misc.[ch].
Added compat_max_fd().
Removed misused sysconf(), RTFM.
Added compat_mkdir().
settings_init():
	Show the memory limit too.
	Show the memory sizes in human-friendly form.

------------------------------------------------------------------------
r9701 | rmanfredi | 2005-10-01 09:09:55 -0400 (Sat, 01 Oct 2005) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r9700 | rmanfredi | 2005-10-01 09:09:10 -0400 (Sat, 01 Oct 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9699 | rmanfredi | 2005-10-01 09:08:38 -0400 (Sat, 01 Oct 2005) | 2 lines

Protect inclusion of <netdb.h> with I_NETDB and <pwd.h> with I_PWD.

------------------------------------------------------------------------
r9698 | rmanfredi | 2005-10-01 08:55:05 -0400 (Sat, 01 Oct 2005) | 2 lines

Fixed buffers_strip_leading() when amount == SOCK_BUFSZ.

------------------------------------------------------------------------
r9697 | cbiere | 2005-10-01 08:29:17 -0400 (Sat, 01 Oct 2005) | 2 lines

No <netdb.h> for MingW.

------------------------------------------------------------------------
r9696 | cbiere | 2005-10-01 08:28:27 -0400 (Sat, 01 Oct 2005) | 2 lines

Added module to figure out whether <netdb.h> should be included.

------------------------------------------------------------------------
r9695 | cbiere | 2005-10-01 08:11:44 -0400 (Sat, 01 Oct 2005) | 3 lines

Vastly improved readability.
Fixed typos.

------------------------------------------------------------------------
r9694 | nonamer | 2005-10-01 07:45:48 -0400 (Sat, 01 Oct 2005) | 7 lines

This includes the rest needed to compile under xmingw.
TODO: Rename the #ifndef / #ifdef MINGW32 to WIN32.
There are some wraps marked with FIXME WIN32: Which need to be looked after.
Also the common.h with MINGW32 defines should be somewhat cleaner.

Also included is the config.sh (config.sh.xmingw) for Configure -S

------------------------------------------------------------------------
r9693 | nonamer | 2005-10-01 06:37:33 -0400 (Sat, 01 Oct 2005) | 4 lines

Initial xmingw cross compile document. These were the steps I needed to perform
to get the build succeed a little bit further.
There are still some linking issues to resolve.

------------------------------------------------------------------------
r9692 | rmanfredi | 2005-10-01 02:13:55 -0400 (Sat, 01 Oct 2005) | 2 lines

Shortened comments making lines to large.

------------------------------------------------------------------------
r9691 | rmanfredi | 2005-10-01 02:13:24 -0400 (Sat, 01 Oct 2005) | 4 lines

Cache UTF-8 lowercasing result of record name to avoid paying the penalty
of the transformation each time a rule containing a text match is called.
Made sure we perform this transformation only when filtering with a text rule.

------------------------------------------------------------------------
r9690 | rmanfredi | 2005-10-01 02:11:30 -0400 (Sat, 01 Oct 2005) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r9689 | cbiere | 2005-09-30 18:07:43 -0400 (Fri, 30 Sep 2005) | 3 lines

Added a TODO explaining a possibility to optimize the use of epoll/kqueue
	further.

------------------------------------------------------------------------
r9688 | cbiere | 2005-09-30 17:16:57 -0400 (Fri, 30 Sep 2005) | 5 lines

UNISKIP():
	Added comment: There are no Unicode codepoints beyond U+10FFFF.
utf8_encoded_char_len():
	Check also for illegal codepoints.

------------------------------------------------------------------------
r9687 | rmanfredi | 2005-09-30 16:57:44 -0400 (Fri, 30 Sep 2005) | 3 lines

Optimize utf8_remap() further by not calling memcpy() for 1 byte.
Removed apparently misplaced code from utf8_encoded_char_len().

------------------------------------------------------------------------
r9686 | rmanfredi | 2005-09-30 16:55:10 -0400 (Fri, 30 Sep 2005) | 2 lines

Help the compiler further optimize.

------------------------------------------------------------------------
r9685 | rmanfredi | 2005-09-30 16:54:16 -0400 (Fri, 30 Sep 2005) | 2 lines

Signal the peer type of nodes sending us BYE messages.

------------------------------------------------------------------------
r9684 | rmanfredi | 2005-09-30 16:53:03 -0400 (Fri, 30 Sep 2005) | 3 lines

Signal fileinfo change when recv_last_rate is recomputed so that the GUI
can update the information.

------------------------------------------------------------------------
r9683 | rmanfredi | 2005-09-30 16:52:12 -0400 (Fri, 30 Sep 2005) | 2 lines

When debugging, emit CPU usage information every 20 secs or so.

------------------------------------------------------------------------
r9682 | cbiere | 2005-09-30 11:07:39 -0400 (Fri, 30 Sep 2005) | 3 lines

Corrected use of URL_POLICY_GWC_RULES.
Disallow uppercase characters too if URL_POLICY_ALLOW_ANY_CHAR is unset.

------------------------------------------------------------------------
r9681 | daichik | 2005-09-30 01:27:35 -0400 (Fri, 30 Sep 2005) | 2 lines

Updated with the latest CVS release (2005-09-28).

------------------------------------------------------------------------
r9680 | rmanfredi | 2005-09-29 14:54:30 -0400 (Thu, 29 Sep 2005) | 2 lines

Show estimated remaining time in the Download pane as well.

------------------------------------------------------------------------
r9679 | rmanfredi | 2005-09-29 14:50:56 -0400 (Thu, 29 Sep 2005) | 2 lines

Added comments for chunk status values.

------------------------------------------------------------------------
r9678 | rmanfredi | 2005-09-29 14:50:06 -0400 (Thu, 29 Sep 2005) | 2 lines

Transformed cascade of if/else into switch/case.

------------------------------------------------------------------------
r9677 | rmanfredi | 2005-09-29 14:11:35 -0400 (Thu, 29 Sep 2005) | 2 lines

Fixed buffers_strip_leading() when trailing I/O vector is emptied.

------------------------------------------------------------------------
r9676 | cbiere | 2005-09-28 18:42:18 -0400 (Wed, 28 Sep 2005) | 2 lines

Use the lib_debug property variable instead of static "url_debug".

------------------------------------------------------------------------
r9675 | cbiere | 2005-09-28 18:20:27 -0400 (Wed, 28 Sep 2005) | 4 lines

url_normalize():
	Got rid of redundant variable "u".
	Moved "dots" into the scope in which it's actually used.

------------------------------------------------------------------------
r9674 | cbiere | 2005-09-28 18:04:31 -0400 (Wed, 28 Sep 2005) | 3 lines

url_normalize():
	Corrected misplaced check which used an bogusly zero-initialized value.

------------------------------------------------------------------------
r9673 | rmanfredi | 2005-09-28 17:44:20 -0400 (Wed, 28 Sep 2005) | 5 lines

Don't compute the SHA1 of the QRT unless we're debugging!
Use node_type() in log messages.  Log queries with URNs explicitly.
Fixed qrp_can_route(): my last change caused queries with a single URN to
always be forwarded regardless of it matching the QRT entry.

------------------------------------------------------------------------
r9672 | rmanfredi | 2005-09-28 17:42:16 -0400 (Wed, 28 Sep 2005) | 3 lines

Fixed too long lines.
Added node_type().

------------------------------------------------------------------------
r9671 | rmanfredi | 2005-09-28 17:41:37 -0400 (Wed, 28 Sep 2005) | 2 lines

Log queries with URNs explicitly.

------------------------------------------------------------------------
r9670 | rmanfredi | 2005-09-28 15:37:08 -0400 (Wed, 28 Sep 2005) | 3 lines

Fixed buffers_strip_leading() when amount to strip exactly equals the size
of the socket's buffer.

------------------------------------------------------------------------
r9669 | rmanfredi | 2005-09-28 15:17:18 -0400 (Wed, 28 Sep 2005) | 2 lines

Version of 2005-09-28.

------------------------------------------------------------------------
r9668 | rmanfredi | 2005-09-28 15:14:01 -0400 (Wed, 28 Sep 2005) | 2 lines

Forgot to increase query hash vector size when adding URNs.

------------------------------------------------------------------------
r9667 | rmanfredi | 2005-09-28 15:01:17 -0400 (Wed, 28 Sep 2005) | 3 lines

Force qhvec_add() to sort entries: URNs first, words later.
Can simplify qrp_can_route() now that the query hash vector is sorted.

------------------------------------------------------------------------
r9666 | rmanfredi | 2005-09-28 14:59:58 -0400 (Wed, 28 Sep 2005) | 4 lines

Limit the amount of calls to qrp_node_can_route() by caching its results
accross query iterations, since the results are only used as a sorting
criterion.

------------------------------------------------------------------------
r9665 | rmanfredi | 2005-09-28 14:57:53 -0400 (Wed, 28 Sep 2005) | 2 lines

At exit time, one must not try to flush download buffers holding nothing.

------------------------------------------------------------------------
r9664 | cbiere | 2005-09-28 09:27:01 -0400 (Wed, 28 Sep 2005) | 2 lines

Disallow GWebCaches at ports below 1024 other than 80.

------------------------------------------------------------------------
r9663 | rmanfredi | 2005-09-27 18:12:49 -0400 (Tue, 27 Sep 2005) | 2 lines

Version of 2005-09-27.

------------------------------------------------------------------------
r9662 | rmanfredi | 2005-09-27 18:11:54 -0400 (Tue, 27 Sep 2005) | 4 lines

Revisited chunk size computation: use a more realistic estimate of the
potential concurrency we'll get, and account for the shrinking size of
the remaining data to be downloaded.

------------------------------------------------------------------------
r9661 | rmanfredi | 2005-09-27 17:30:28 -0400 (Tue, 27 Sep 2005) | 4 lines

Don't use fileinfo's lifecount to determine the amount of potentially
concurrent downloading sources.  Better estimate that amount using the
amount of active ones plus the amount of queued ones.

------------------------------------------------------------------------
r9660 | cbiere | 2005-09-27 16:31:58 -0400 (Tue, 27 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9659 | cbiere | 2005-09-27 16:30:18 -0400 (Tue, 27 Sep 2005) | 3 lines

There's no variable n, just use 1.
Added missing '}'.

------------------------------------------------------------------------
r9658 | rmanfredi | 2005-09-27 16:11:30 -0400 (Tue, 27 Sep 2005) | 2 lines

Added proper credit.

------------------------------------------------------------------------
r9657 | rmanfredi | 2005-09-27 16:07:29 -0400 (Tue, 27 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9656 | cbiere | 2005-09-27 15:58:04 -0400 (Tue, 27 Sep 2005) | 2 lines

Added module to check for epoll support.

------------------------------------------------------------------------
r9655 | rmanfredi | 2005-09-27 15:33:02 -0400 (Tue, 27 Sep 2005) | 2 lines

Added file_info_changed().

------------------------------------------------------------------------
r9654 | rmanfredi | 2005-09-27 15:28:52 -0400 (Tue, 27 Sep 2005) | 2 lines

Show SHA1 checking status and file moving feedback in the Download pane.

------------------------------------------------------------------------
r9653 | rmanfredi | 2005-09-27 15:28:05 -0400 (Tue, 27 Sep 2005) | 3 lines

Added file_info_changed() to signal fileinfo changed externally.
Added information in fileinfo status about SHA1 computation and moving.

------------------------------------------------------------------------
r9652 | cbiere | 2005-09-27 15:23:15 -0400 (Tue, 27 Sep 2005) | 5 lines

update_poll_event():
	Hopefully corrected use of epoll_ctl(). Especially the case for
	EPOLL_CTL_MOD was wrong: all flags must be passed not just the
	new one.

------------------------------------------------------------------------
r9651 | cbiere | 2005-09-27 14:25:22 -0400 (Tue, 27 Sep 2005) | 4 lines

file_info_pos_status():
	The times in which we casted filesizes or -offsets to gulong
	for printing are over.

------------------------------------------------------------------------
r9650 | rmanfredi | 2005-09-27 14:14:23 -0400 (Tue, 27 Sep 2005) | 5 lines

[GTK1] When download is done / checking SHA1 / moved, update parent's status.
[GTK1] Always freeze the Active and Queue pane trees, updating them only
once per second, as controlled via main_gui_timer(), or when a button press
was done that should trigger a display refresh.

------------------------------------------------------------------------
r9649 | rmanfredi | 2005-09-27 14:09:04 -0400 (Tue, 27 Sep 2005) | 2 lines

Added more information in file_info_pos_status() warning.

------------------------------------------------------------------------
r9648 | rmanfredi | 2005-09-27 14:08:19 -0400 (Tue, 27 Sep 2005) | 3 lines

Flush pending buffers at exit time.
Don't force flushing when downloading in virgin territory.

------------------------------------------------------------------------
r9647 | cbiere | 2005-09-27 10:40:51 -0400 (Tue, 27 Sep 2005) | 7 lines

update_poll_event():
	Make sure we ignored any flags other than
		INPUT_EVENT_R or INPUT_EVENT_W for "old".
	Made the determination of "op" more readable and made sure that
		a seemingly removed event (old == 0 and cur == 0) isn't
		removed again.

------------------------------------------------------------------------
r9646 | cbiere | 2005-09-27 10:31:21 -0400 (Tue, 27 Sep 2005) | 6 lines

Re-added INPUT_EVENT_RW and INPUT_EVENT_RWX now that it's handled properly.
update_poll_event():
	Return immediately if "old" and "cur" do not differ significantly.
inputevt_add_source():
	Let update_poll_event() decide whether and update is necessary or not.

------------------------------------------------------------------------
r9645 | cbiere | 2005-09-27 10:03:36 -0400 (Tue, 27 Sep 2005) | 3 lines

update_poll_event():
	Fixed another compile error for epoll() support.

------------------------------------------------------------------------
r9644 | cbiere | 2005-09-27 09:40:47 -0400 (Tue, 27 Sep 2005) | 3 lines

Fixed compile problem when using epoll() support.
Moved code of flush_kevents() back into update_poll_event().

------------------------------------------------------------------------
r9643 | cbiere | 2005-09-27 09:04:18 -0400 (Tue, 27 Sep 2005) | 3 lines

inputevt_timer():
	Ignore if check_poll_event() fails with EINTR, just in case...

------------------------------------------------------------------------
r9642 | cbiere | 2005-09-27 06:38:24 -0400 (Tue, 27 Sep 2005) | 2 lines

Some interface changes to get rid of a file-global poll_ctx.

------------------------------------------------------------------------
r9641 | cbiere | 2005-09-27 04:19:17 -0400 (Tue, 27 Sep 2005) | 2 lines

zero_handler must be visible in any case.

------------------------------------------------------------------------
r9640 | daichik | 2005-09-27 03:54:59 -0400 (Tue, 27 Sep 2005) | 2 lines

Updated with the latest CVS release (2005-09-26).

------------------------------------------------------------------------
r9639 | cbiere | 2005-09-27 01:30:38 -0400 (Tue, 27 Sep 2005) | 3 lines

inputevt_remove():
	Removed noisy debug message.

------------------------------------------------------------------------
r9638 | cbiere | 2005-09-27 01:27:09 -0400 (Tue, 27 Sep 2005) | 6 lines

inputevt_timer():
	Corrected assertion: No items are removed from the relay list
		whilst dispatching events but the counters are adjusted.
inputevt_add():
	Added consistency checks.

------------------------------------------------------------------------
r9637 | cbiere | 2005-09-27 01:14:09 -0400 (Tue, 27 Sep 2005) | 13 lines

inputevt_relay_t:
	Changed order of elements to reduce struct size.
poll_ctx:
	Added member "ht" which keeps track of all registered file descriptors.
Replaced add_poll_event() and remove_poll_event() with
	update_poll_event() to simplify and optimize use of kqueue()/epoll().
	Also allow polling for both read- and writeability because this
		seems to be necessary for the network stack.
inputevt_timer():
inputevt_remove():
inputevt_add_source():
	Allow multiple events with possibly different poll conditions.

------------------------------------------------------------------------
r9636 | cbiere | 2005-09-26 17:41:54 -0400 (Mon, 26 Sep 2005) | 3 lines

remove_poll_event():
	Fixed variable name.

------------------------------------------------------------------------
r9635 | cbiere | 2005-09-26 17:33:17 -0400 (Mon, 26 Sep 2005) | 4 lines

inputevt_init():
	READ_CONDITION is correct condition to poll a kqueue() or epoll()
	master fd; both use (POLLIN | POLLRDNORM) as event mask.

------------------------------------------------------------------------
r9634 | cbiere | 2005-09-26 17:18:29 -0400 (Mon, 26 Sep 2005) | 4 lines

remove_poll_event():
	"struct epoll_event" is not used by epoll_ctl() for EPOLL_CTL_DEL,
	just pass NULL.

------------------------------------------------------------------------
r9633 | cbiere | 2005-09-26 17:04:45 -0400 (Mon, 26 Sep 2005) | 2 lines

Corrected comments about IOV_MAX etc. and added _XOPEN_IOV_MAX.

------------------------------------------------------------------------
r9632 | cbiere | 2005-09-26 16:40:51 -0400 (Mon, 26 Sep 2005) | 4 lines

Don't ignore EEXIST, it's properly caused by not removing the previous
	event correctly.
Pass the stored IO condition to epoll_ctl() when removing an event.

------------------------------------------------------------------------
r9631 | rmanfredi | 2005-09-26 16:31:50 -0400 (Mon, 26 Sep 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9630 | rmanfredi | 2005-09-26 16:31:15 -0400 (Mon, 26 Sep 2005) | 4 lines

Moved computation of MAX_IOV_COUNT from bsched.c to here.
Moved GTKG constants at the top for easier editing.
Bumped date, given the scope of the recent changes.

------------------------------------------------------------------------
r9629 | rmanfredi | 2005-09-26 16:30:13 -0400 (Mon, 26 Sep 2005) | 2 lines

Added structure for managing download read buffers.

------------------------------------------------------------------------
r9628 | rmanfredi | 2005-09-26 16:28:25 -0400 (Mon, 26 Sep 2005) | 4 lines

Buffer more data per download to avoid endless lseek()/write() system
calls when swarming with lots of sources, and try to reduce filesystem
fragmentation by writing more data at once.

------------------------------------------------------------------------
r9627 | rmanfredi | 2005-09-26 16:27:11 -0400 (Mon, 26 Sep 2005) | 2 lines

Added GUI mappings for new download buffer properties.

------------------------------------------------------------------------
r9626 | rmanfredi | 2005-09-26 16:25:23 -0400 (Mon, 26 Sep 2005) | 2 lines

Added assertions.

------------------------------------------------------------------------
r9625 | rmanfredi | 2005-09-26 16:24:58 -0400 (Mon, 26 Sep 2005) | 2 lines

Added FILE_INFO_COMPLETE_AFTER().

------------------------------------------------------------------------
r9624 | rmanfredi | 2005-09-26 16:24:37 -0400 (Mon, 26 Sep 2005) | 2 lines

Added "download_buffer_size" and "download_buffer_read_ahead" properties.

------------------------------------------------------------------------
r9623 | cbiere | 2005-09-26 16:23:34 -0400 (Mon, 26 Sep 2005) | 2 lines

Added module to check for kqueue() support.

------------------------------------------------------------------------
r9622 | rmanfredi | 2005-09-26 16:22:45 -0400 (Mon, 26 Sep 2005) | 2 lines

Log system's max I/O vector size at startup time, when debugging.

------------------------------------------------------------------------
r9621 | rmanfredi | 2005-09-26 16:21:48 -0400 (Mon, 26 Sep 2005) | 3 lines

Moved safe_writev() from bsched.c to sockets.c.
Added safe_readv(), safe_writev_fd() and bio_readv().

------------------------------------------------------------------------
r9620 | cbiere | 2005-09-26 16:20:36 -0400 (Mon, 26 Sep 2005) | 11 lines

If both HAS_KQUEUE and HAS_EPOLL are defined, use the former.
Removed dispatch_max and max_ev nonsense; this causes unnecessarily large
	arrays. Instead put removed events into a list and nullify the relay
	pointer but keep the slot marked as used whilst dispatching events,
	then perform the actual remove after that.
inputevt_timer():
	"udata" contains the ID instead of the relay pointer now. This is
	cleaner and we can check whether the ID is used - for consistency.
inputevt_add_source():
	Use the ID as "udata".

------------------------------------------------------------------------
r9619 | cbiere | 2005-09-26 15:09:03 -0400 (Mon, 26 Sep 2005) | 4 lines

remove_poll_event():
	Use the stored IO condition to remove the correct event instead
	of trying both possibilities.

------------------------------------------------------------------------
r9618 | cbiere | 2005-09-26 14:42:42 -0400 (Mon, 26 Sep 2005) | 8 lines

Removed INPUT_EVENT_RWX and INPUT_EVENT_RW because these don't work easily
	with kqueue() and using them is rather pointless anyway. These
	were only used for proxy support because nobody bothered to check
	what's the right condition or switch it appropriately. Polling
	for both read and write could cause a lot of wasted CPU time
	because one of both condition might always trigger until the
	socket buffer is completely full.

------------------------------------------------------------------------
r9617 | cbiere | 2005-09-26 14:36:33 -0400 (Mon, 26 Sep 2005) | 3 lines

Removed INPUT_EVENT_RWX and INPUT_EVENT_RW because these don't work easily
	with kqueue() and using them is rather pointless anyway.

------------------------------------------------------------------------
r9616 | cbiere | 2005-09-26 14:34:32 -0400 (Mon, 26 Sep 2005) | 16 lines

Eliminated use of GIOCondition except for g_io_add_watch() to reduce
	confusion by converting the IO condition enums.
Removed INPUT_EVENT_RWX and INPUT_EVENT_RW because these don't work easily
	with kqueue() and using them is rather pointless anyway.
add_poll_event():
	With kqueue() you can only poll for either read or write events
	not both - unless you use two kqueue master fds. Make sure no
	such combined condition is used.
inputevt_init():
	Poll for (WRITE_CONDITION | READ_CONDITION) as I am not sure
	which condition is correct for kqueue() and epoll() - though I
	suspect polling for readability should be correct.
inputevt_add():
	Don't convert the IO condition enum, just check whether it's
		alright.

------------------------------------------------------------------------
r9615 | cbiere | 2005-09-26 13:13:26 -0400 (Mon, 26 Sep 2005) | 3 lines

add_poll_event():
	Ignore EEXIST failures from epoll_ctl() for now.

------------------------------------------------------------------------
r9614 | cbiere | 2005-09-26 12:51:29 -0400 (Mon, 26 Sep 2005) | 5 lines

wfree():
	Set the buffer to all-ones, this looks more useful than all-zeros
	because in the latter case 0/FALSE/NULL checks often hide a
	reference to already released memory.

------------------------------------------------------------------------
r9613 | cbiere | 2005-09-26 12:48:55 -0400 (Mon, 26 Sep 2005) | 3 lines

Removed poll_ctx.dispatch_id nonsense; keep track of the highest ID in
	use instead.

------------------------------------------------------------------------
r9612 | cbiere | 2005-09-26 12:46:12 -0400 (Mon, 26 Sep 2005) | 4 lines

qrt_update_send_next():
	Added assertion because there seems to be a bug here i.e., the
		memory looks already freed sometimes in UP mode.

------------------------------------------------------------------------
r9611 | cbiere | 2005-09-26 11:43:52 -0400 (Mon, 26 Sep 2005) | 3 lines

bit_array_realloc():
	Rephrased calculation.

------------------------------------------------------------------------
r9610 | cbiere | 2005-09-26 11:42:17 -0400 (Mon, 26 Sep 2005) | 4 lines

upload_free_resources():
	Call bsched_source_remove() before socket_free() not after, so that
		the file descriptor is still valid for the former.

------------------------------------------------------------------------
r9609 | cbiere | 2005-09-26 11:22:26 -0400 (Mon, 26 Sep 2005) | 3 lines

bit_array_realloc():
	Forgot to multiply with the member size.

------------------------------------------------------------------------
r9608 | cbiere | 2005-09-26 11:07:22 -0400 (Mon, 26 Sep 2005) | 4 lines

download_close():
	Call bsched_source_remove() before socket_free() not after, so that
	the file descriptor is still valid for the former.

------------------------------------------------------------------------
r9607 | cbiere | 2005-09-26 10:56:47 -0400 (Mon, 26 Sep 2005) | 4 lines

http_async_free_recursive():
	Call bsched_source_remove() before socket_free() not after, so that
		the file descriptor is still valid for the former.

------------------------------------------------------------------------
r9606 | cbiere | 2005-09-26 10:47:26 -0400 (Mon, 26 Sep 2005) | 3 lines

Added macros BIT_ARRAY_BYTE() and  BIT_ARRAY_BIT() for better readability.
Fixed index calculation for the byte position.

------------------------------------------------------------------------
r9605 | cbiere | 2005-09-26 10:44:16 -0400 (Mon, 26 Sep 2005) | 2 lines

Moved cond_to_string() as inputevt_cond_to_string() to inputevt.[ch].

------------------------------------------------------------------------
r9604 | cbiere | 2005-09-26 10:04:01 -0400 (Mon, 26 Sep 2005) | 16 lines

remove_poll_event():
	Catch kevent() failures other than ENOENT for now.
check_poll_events():
	Rather check that fd is non-negative to catch more possible bugs.
bit_array_first_clear():
	Fixed off-by-one: "to" is inclusive and must be tested too.
inputevt_timer():
	Protect against addition or removal of events whilst dispatching
	events.
inputevt_add_source():
	Rather check that fd is non-negative to catch more possible bugs.
	Don't recycle events that may still be dispatched because this
		could cause bogus events.
	Don't use bit_array_first_clear() if poll_ctx.num_ev is zero
		because the array is NULL then.

------------------------------------------------------------------------
r9603 | cbiere | 2005-09-26 09:55:39 -0400 (Mon, 26 Sep 2005) | 4 lines

node_remove_v():
	Call node_disable_read() before socket_free() not after, so that
	the file descriptor is still valid for the former.

------------------------------------------------------------------------
r9602 | cbiere | 2005-09-26 09:52:56 -0400 (Mon, 26 Sep 2005) | 4 lines

download_stop_v():
	Call bsched_source_remove() before socket_free() so that the
	file descriptor is still valid for the former.

------------------------------------------------------------------------
r9601 | cbiere | 2005-09-26 08:11:26 -0400 (Mon, 26 Sep 2005) | 3 lines

Corrected comment about bit_array_* functions.
Added bit_array_first_clear().

------------------------------------------------------------------------
r9600 | cbiere | 2005-09-26 07:30:08 -0400 (Mon, 26 Sep 2005) | 2 lines

Keep ID zero reserved just like GLib.

------------------------------------------------------------------------
r9599 | cbiere | 2005-09-26 07:25:43 -0400 (Mon, 26 Sep 2005) | 4 lines

bio_disable():
bsched_source_remove():
	Use inputevt_remove() instead of g_source_remove().

------------------------------------------------------------------------
r9598 | cbiere | 2005-09-26 05:45:59 -0400 (Mon, 26 Sep 2005) | 5 lines

Removed bad references to poll_ctx.
Corrected enum type and values given to the relay handler.
Move initialization code to inputevt_init().
kqueue() seems to work now but causes an assertion failure in is_writable().

------------------------------------------------------------------------
r9597 | daichik | 2005-09-25 22:18:12 -0400 (Sun, 25 Sep 2005) | 2 lines

Corrected a typo.

------------------------------------------------------------------------
r9596 | rmanfredi | 2005-09-25 17:41:48 -0400 (Sun, 25 Sep 2005) | 2 lines

Now merely wraps palloc() and pfree().

------------------------------------------------------------------------
r9595 | rmanfredi | 2005-09-25 17:41:10 -0400 (Sun, 25 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9594 | rmanfredi | 2005-09-25 17:40:46 -0400 (Sun, 25 Sep 2005) | 2 lines

Added palloc.c.

------------------------------------------------------------------------
r9593 | rmanfredi | 2005-09-25 17:40:24 -0400 (Sun, 25 Sep 2005) | 2 lines

Added src/lib/palloc.[ch] to perform pool allocation of fix-sized blocks.

------------------------------------------------------------------------
r9592 | rmanfredi | 2005-09-25 17:38:20 -0400 (Sun, 25 Sep 2005) | 2 lines

Log amount of bytes sent when removing an upload.

------------------------------------------------------------------------
r9591 | rmanfredi | 2005-09-25 17:37:19 -0400 (Sun, 25 Sep 2005) | 2 lines

Shortened comment to limit line length.

------------------------------------------------------------------------
r9590 | rmanfredi | 2005-09-25 17:36:39 -0400 (Sun, 25 Sep 2005) | 2 lines

Prefer download_outname(d) to d->file_name in user-visible messages.

------------------------------------------------------------------------
r9589 | cbiere | 2005-09-25 15:44:07 -0400 (Sun, 25 Sep 2005) | 3 lines

Added bit_array_realloc() to correct use of g_realloc().
Added (seemingly non-working) support for kqueue().

------------------------------------------------------------------------
r9588 | cbiere | 2005-09-25 13:10:32 -0400 (Sun, 25 Sep 2005) | 3 lines

Added bit_array_clear_range().
Fixed array overrun due to not dividing the index by bit-length.

------------------------------------------------------------------------
r9587 | rmanfredi | 2005-09-25 12:57:14 -0400 (Sun, 25 Sep 2005) | 4 lines

Added sha1_offset_in_uri() and sha1_extract_from_uri() to better modularize
the code and allow pretty printing of 404 error messages in the logs when
they ask an URN we no longer share.

------------------------------------------------------------------------
r9586 | rmanfredi | 2005-09-25 12:55:52 -0400 (Sun, 25 Sep 2005) | 2 lines

Shortened comments to avoid too long lines.

------------------------------------------------------------------------
r9585 | cbiere | 2005-09-25 12:50:07 -0400 (Sun, 25 Sep 2005) | 6 lines

Converted the BIT_ARRAY_* macros to inline functions because I know of
	no way to promote "1" to the proper type otherwise - other than
	always using a (intmax_t) cast.
epoll_ctx.num_ev must be initialized to some minimum value above zero
	because 2 * zero is still zero.

------------------------------------------------------------------------
r9584 | cbiere | 2005-09-25 12:21:21 -0400 (Sun, 25 Sep 2005) | 3 lines

Added epoll() support for better scalability. This is untested! You need a
	Linux 2.6 kernel. Define HAS_EPOLL for testing.

------------------------------------------------------------------------
r9583 | rmanfredi | 2005-09-25 08:12:40 -0400 (Sun, 25 Sep 2005) | 5 lines

Oops, must call the _transient version on transient updates.
Switched back to unconditional update of the pane when requested since the
redrawing of the progress is now only requested when the proper fileinfo is
updated and not at each update.

------------------------------------------------------------------------
r9582 | rmanfredi | 2005-09-25 07:14:11 -0400 (Sun, 25 Sep 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9581 | rmanfredi | 2005-09-25 07:10:39 -0400 (Sun, 25 Sep 2005) | 2 lines

Only redraw visual progress if the currently shown fileinfo is updated.

------------------------------------------------------------------------
r9580 | rmanfredi | 2005-09-25 07:10:11 -0400 (Sun, 25 Sep 2005) | 4 lines

Buffer updates to fileinfos to avoid too frequent GUI redrawing, like GTK2
is already doing.  Update every second though, don't enforce a 3 second limit.
Only redraw visual progress if the currently shown fileinfo is updated.

------------------------------------------------------------------------
r9579 | cbiere | 2005-09-25 06:01:47 -0400 (Sun, 25 Sep 2005) | 4 lines

Moved special pong pickup handling depending on "host_low_on_pongs" to
	feed_host_cache_from_headers() because some headers should always
	be save for "pongs" even when picked from an HTTP transaction.

------------------------------------------------------------------------
r9578 | rmanfredi | 2005-09-25 04:51:04 -0400 (Sun, 25 Sep 2005) | 2 lines

Disable "monopoly protection" when we're low on pongs (fixes #1177512).

------------------------------------------------------------------------
r9577 | rmanfredi | 2005-09-25 04:36:11 -0400 (Sun, 25 Sep 2005) | 2 lines

Version of 2005-09-25.

------------------------------------------------------------------------
r9576 | rmanfredi | 2005-09-25 04:34:52 -0400 (Sun, 25 Sep 2005) | 2 lines

Removed dead code section.

------------------------------------------------------------------------
r9575 | rmanfredi | 2005-09-25 04:34:12 -0400 (Sun, 25 Sep 2005) | 4 lines

Don't use alternate locations as source for "semi-pongs" when we're not
low on pongs: we can't know for sure that those nodes have free slots and
that their HTTP port is the same as their Gnutella port.

------------------------------------------------------------------------
r9574 | rmanfredi | 2005-09-25 04:32:42 -0400 (Sun, 25 Sep 2005) | 4 lines

Don't honour settings for monitoring node "bad IP / unstable" addresses
when we're low on pongs: we don't want to discard IP addresses or
connections and end up being forced to contact web caches for new addresses.

------------------------------------------------------------------------
r9573 | cbiere | 2005-09-25 04:04:08 -0400 (Sun, 25 Sep 2005) | 3 lines

search_update_details():
	Don't show a bogus "no SHA1 known" if there's no tag.

------------------------------------------------------------------------
r9572 | daichik | 2005-09-25 01:54:02 -0400 (Sun, 25 Sep 2005) | 2 lines

Changed translation for compatibility with the other vendors.

------------------------------------------------------------------------
r9571 | daichik | 2005-09-24 22:16:55 -0400 (Sat, 24 Sep 2005) | 2 lines

Updated translations (ISO 3166 country codes).

------------------------------------------------------------------------
r9570 | cbiere | 2005-09-23 15:02:12 -0400 (Fri, 23 Sep 2005) | 2 lines

Re-added jooz.

------------------------------------------------------------------------
r9569 | cbiere | 2005-09-23 14:49:53 -0400 (Fri, 23 Sep 2005) | 2 lines

Re-added krill.

------------------------------------------------------------------------
r9568 | daichik | 2005-09-22 00:43:21 -0400 (Thu, 22 Sep 2005) | 2 lines

Changed translations against 'valid', 'HSEP'.

------------------------------------------------------------------------
r9566 | cbiere | 2005-09-18 23:51:55 -0400 (Sun, 18 Sep 2005) | 2 lines

Re-added kisama which has a new home.

------------------------------------------------------------------------
r9565 | cbiere | 2005-09-18 23:40:28 -0400 (Sun, 18 Sep 2005) | 5 lines

on_tree_view_search_results_click_column():
	GTK_TREE_SORTABLE_UNSORTED_SORT_COLUMN_ID was introduced in Gtk+ 2.6;
	comment it out for older versions - this means you can't set a
	TreeView back to unsorted order using an older Gtk+.

------------------------------------------------------------------------
r9564 | cbiere | 2005-09-18 14:42:46 -0400 (Sun, 18 Sep 2005) | 8 lines

control_escape():
	Escape only ASCII control characters because anything else doesn't
		seem to work with UTF-8 or EUC-JP.
	Fixed bug in previous commit which could cause a crash due to
		allocated too few memory.
	Changed style so that the pre-scan loop looks identical to the
		second loop and variables exist only in the necessary scope.

------------------------------------------------------------------------
r9563 | cbiere | 2005-09-18 13:44:28 -0400 (Sun, 18 Sep 2005) | 4 lines

control_escape():
	Use isprint() rather than iscntrl() because the latter does not
	work well for encodings like EUC-JP.

------------------------------------------------------------------------
r9562 | daichik | 2005-09-18 08:05:37 -0400 (Sun, 18 Sep 2005) | 2 lines

Updated with the latest CVS release (2005-09-16).

------------------------------------------------------------------------
r9561 | rmanfredi | 2005-09-18 04:00:09 -0400 (Sun, 18 Sep 2005) | 3 lines

C symbol definition fix.
Enclose struct name and field name in quotes for better readability.

------------------------------------------------------------------------
r9560 | rmanfredi | 2005-09-17 19:04:04 -0400 (Sat, 17 Sep 2005) | 3 lines

Added new debugging variables to debugging().
Removed unused variable.

------------------------------------------------------------------------
r9559 | rmanfredi | 2005-09-17 18:54:29 -0400 (Sat, 17 Sep 2005) | 3 lines

Terminated the GWC known as http://krill.shacknet.nu:20095/gwc, and the
UHC that ran on that port.

------------------------------------------------------------------------
r9558 | rmanfredi | 2005-09-17 18:33:15 -0400 (Sat, 17 Sep 2005) | 5 lines

Added CHAR_IS_SPACE().
Made control_escape() skip chars which are CHAR_IS_SPACE().
Watch out: length computation is not the same as hex_escape() since the
for() loop is spelled out differently.  Was off by 1.

------------------------------------------------------------------------
r9557 | rmanfredi | 2005-09-17 18:31:46 -0400 (Sat, 17 Sep 2005) | 3 lines

Use VAL_EAGAIN instead of EAGAIN (could be EWOULDBLOCK on some systems).
Use VAL_O_NONBLOCK as the flag to turn non-blocking I/Os.

------------------------------------------------------------------------
r9556 | rmanfredi | 2005-09-17 18:30:28 -0400 (Sat, 17 Sep 2005) | 2 lines

Use VAL_EAGAIN instead of EAGAIN (could be EWOULDBLOCK on some systems).

------------------------------------------------------------------------
r9555 | rmanfredi | 2005-09-17 18:28:50 -0400 (Sat, 17 Sep 2005) | 2 lines

Use getdtablesize() to get amount of file descriptors.

------------------------------------------------------------------------
r9554 | rmanfredi | 2005-09-17 18:28:10 -0400 (Sat, 17 Sep 2005) | 2 lines

Added U/new/d_msg_flags.U.

------------------------------------------------------------------------
r9553 | rmanfredi | 2005-09-17 18:27:52 -0400 (Sat, 17 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9552 | cbiere | 2005-09-17 11:20:57 -0400 (Sat, 17 Sep 2005) | 7 lines

Added control_escape() which is similar to hex_escape() but escapes only
	control characters as defined by ASCII *and/or* the current locale.
log_handler():
	Use control_escape() so that UTF-8 and other locale encoded message
	are kept readable. hex_escape() is too destructive here and probably
	too paranoid.

------------------------------------------------------------------------
r9551 | cbiere | 2005-09-17 10:14:02 -0400 (Sat, 17 Sep 2005) | 4 lines

Swapped the "Vendor" box with the "Index" box as the former can be rather
	wide when it's gtk-gnutella, so it fits better with the longer
	info strings.

------------------------------------------------------------------------
r9550 | cbiere | 2005-09-17 09:37:50 -0400 (Sat, 17 Sep 2005) | 2 lines

Module to check whether "struct msghdr" has a member "msg_flags".

------------------------------------------------------------------------
r9549 | cbiere | 2005-09-17 09:20:38 -0400 (Sat, 17 Sep 2005) | 3 lines

socket_udp_accept():
	Handle missing ``msg_flags'' in ``struct msghdr''.

------------------------------------------------------------------------
r9548 | cbiere | 2005-09-17 05:59:19 -0400 (Sat, 17 Sep 2005) | 3 lines

upload_request():
	No need to dereference ``end'' in the loop.

------------------------------------------------------------------------
r9547 | rmanfredi | 2005-09-17 04:21:06 -0400 (Sat, 17 Sep 2005) | 2 lines

It's the cumulative time we want in tm_cputime()...

------------------------------------------------------------------------
r9546 | rmanfredi | 2005-09-17 02:40:22 -0400 (Sat, 17 Sep 2005) | 3 lines

Avoid too much indentation in clock_hz().
Use wall clock time if getrusage() fails and times() is missing.

------------------------------------------------------------------------
r9545 | cbiere | 2005-09-16 21:14:50 -0400 (Fri, 16 Sep 2005) | 2 lines

Updated list of UHCs.

------------------------------------------------------------------------
r9544 | cbiere | 2005-09-16 21:08:09 -0400 (Fri, 16 Sep 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9543 | cbiere | 2005-09-16 19:46:32 -0400 (Fri, 16 Sep 2005) | 10 lines

clock_hz():
	The return value of sysconf() is of type "long", not "int".
	Show a message if sysconf() actually fails.
	Fall back to CLK_TCK, HZ or CLOCKS_PER_SEC. HZ seems to be
		Linux-specific.
	Renamed "hz" to "freq" because the former seems to be an
		macro name on some OS.
tm_cputime():
	Fall back to times() should getrusage() fail

------------------------------------------------------------------------
r9542 | cbiere | 2005-09-16 19:41:48 -0400 (Fri, 16 Sep 2005) | 4 lines

shell_add():
	Use "low delay" as IP Type-Of-Service for the shell as this is
	interactive stuff.

------------------------------------------------------------------------
r9541 | cbiere | 2005-09-16 19:40:42 -0400 (Fri, 16 Sep 2005) | 5 lines

close_fds():
	Use tm_cputime() instead of tm_time_exact().
	Corrected mask in order to check only every 256th time.
	Show a message should this rare event actually occur.

------------------------------------------------------------------------
r9540 | rmanfredi | 2005-09-16 18:04:59 -0400 (Fri, 16 Sep 2005) | 2 lines

Version of 2005-09-16.

------------------------------------------------------------------------
r9539 | rmanfredi | 2005-09-16 18:04:16 -0400 (Fri, 16 Sep 2005) | 2 lines

New properties.

------------------------------------------------------------------------
r9538 | rmanfredi | 2005-09-16 18:01:28 -0400 (Fri, 16 Sep 2005) | 2 lines

Show "chip" icon when CPU is overloaded.

------------------------------------------------------------------------
r9537 | rmanfredi | 2005-09-16 17:59:52 -0400 (Fri, 16 Sep 2005) | 2 lines

Added callbacks for changes on the new properties.

------------------------------------------------------------------------
r9536 | rmanfredi | 2005-09-16 17:59:15 -0400 (Fri, 16 Sep 2005) | 2 lines

Cache results of lookup_widget().

------------------------------------------------------------------------
r9535 | rmanfredi | 2005-09-16 17:58:48 -0400 (Fri, 16 Sep 2005) | 2 lines

Reduce amount of GUI refreshing done when CPU overloaded.

------------------------------------------------------------------------
r9534 | rmanfredi | 2005-09-16 17:58:03 -0400 (Fri, 16 Sep 2005) | 2 lines

Now track the amount of times the callout queue ticks are scheduled.

------------------------------------------------------------------------
r9533 | rmanfredi | 2005-09-16 17:57:23 -0400 (Fri, 16 Sep 2005) | 2 lines

Declare debugging().

------------------------------------------------------------------------
r9532 | rmanfredi | 2005-09-16 17:57:03 -0400 (Fri, 16 Sep 2005) | 2 lines

Added some properties.

------------------------------------------------------------------------
r9531 | rmanfredi | 2005-09-16 17:55:59 -0400 (Fri, 16 Sep 2005) | 2 lines

Use socket_debug to control debugging messages.

------------------------------------------------------------------------
r9530 | rmanfredi | 2005-09-16 17:55:33 -0400 (Fri, 16 Sep 2005) | 2 lines

Use share_debug to control debugging messages.

------------------------------------------------------------------------
r9529 | rmanfredi | 2005-09-16 17:55:11 -0400 (Fri, 16 Sep 2005) | 2 lines

Optimized query routing via QRT.

------------------------------------------------------------------------
r9528 | rmanfredi | 2005-09-16 17:53:15 -0400 (Fri, 16 Sep 2005) | 2 lines

Use node_debug to control debugging messages.

------------------------------------------------------------------------
r9527 | rmanfredi | 2005-09-16 17:52:48 -0400 (Fri, 16 Sep 2005) | 2 lines

Use gmsg_debug to control debug messages.

------------------------------------------------------------------------
r9526 | rmanfredi | 2005-09-16 17:52:24 -0400 (Fri, 16 Sep 2005) | 2 lines

Use dmesh_debug to control debugging messages.

------------------------------------------------------------------------
r9525 | rmanfredi | 2005-09-16 17:51:44 -0400 (Fri, 16 Sep 2005) | 2 lines

Use ban_debug to control debugging messages.

------------------------------------------------------------------------
r9524 | rmanfredi | 2005-09-16 17:51:11 -0400 (Fri, 16 Sep 2005) | 2 lines

Now monitors the CPU usage and lower consumption if we detect overloads.

------------------------------------------------------------------------
r9523 | rmanfredi | 2005-09-16 17:50:07 -0400 (Fri, 16 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9522 | rmanfredi | 2005-09-16 17:48:34 -0400 (Fri, 16 Sep 2005) | 2 lines

Added pixmaps/chip.xpm.

------------------------------------------------------------------------
r9521 | cbiere | 2005-09-15 15:09:57 -0400 (Thu, 15 Sep 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9520 | cbiere | 2005-09-15 15:06:10 -0400 (Thu, 15 Sep 2005) | 2 lines

Added another UHC.

------------------------------------------------------------------------
r9519 | daichik | 2005-09-15 05:08:50 -0400 (Thu, 15 Sep 2005) | 2 lines

Reviced translations for 'swarming', 'source'.

------------------------------------------------------------------------
r9518 | rmanfredi | 2005-09-14 16:48:30 -0400 (Wed, 14 Sep 2005) | 2 lines

Linux has recvmsg() anyway.

------------------------------------------------------------------------
r9517 | cbiere | 2005-09-14 16:02:37 -0400 (Wed, 14 Sep 2005) | 3 lines

socket_udp_accept():
	Re-added extra wurst for Linux.

------------------------------------------------------------------------
r9516 | cbiere | 2005-09-14 15:34:42 -0400 (Wed, 14 Sep 2005) | 4 lines

socket_udp_accept():
	Use recvmsg() to detect truncated packets; passing MSG_TRUNC as
	flag to recvfrom() has no documented effect.

------------------------------------------------------------------------
r9515 | rmanfredi | 2005-09-14 13:59:51 -0400 (Wed, 14 Sep 2005) | 4 lines

Some optimizations to slightly reduce the CPU usage of qrp_can_route() and
qrt_build_query_target(), which are hot spots when running as ultra node.
Fixed some debugging messages to include leaf/ultra status of nodes.

------------------------------------------------------------------------
r9514 | rmanfredi | 2005-09-14 13:57:42 -0400 (Wed, 14 Sep 2005) | 3 lines

Detect too large UDP messages explicitly to log their dropping in the
proper category.

------------------------------------------------------------------------
r9513 | rmanfredi | 2005-09-14 13:56:21 -0400 (Wed, 14 Sep 2005) | 2 lines

Simplified.

------------------------------------------------------------------------
r9512 | rmanfredi | 2005-09-14 13:55:14 -0400 (Wed, 14 Sep 2005) | 3 lines

Configure will now use "mkdir -p" over "install -d" if possible to create
directories (fixes bug #972777).

------------------------------------------------------------------------
r9511 | rmanfredi | 2005-09-13 12:35:51 -0400 (Tue, 13 Sep 2005) | 2 lines

Regenerated Configure: now include compiler warning flags if they use gcc.

------------------------------------------------------------------------
r9510 | rmanfredi | 2005-09-13 12:34:54 -0400 (Tue, 13 Sep 2005) | 2 lines

Added malloc tracking for g_string_append_len().

------------------------------------------------------------------------
r9509 | rmanfredi | 2005-09-13 12:33:54 -0400 (Tue, 13 Sep 2005) | 2 lines

Fixed file descriptor leak in uploads (bug #1285670).

------------------------------------------------------------------------
r9508 | rmanfredi | 2005-09-13 12:32:54 -0400 (Tue, 13 Sep 2005) | 2 lines

Style fixes in ensure_unicity(): factorize cleanup code.

------------------------------------------------------------------------
r9507 | cbiere | 2005-09-12 20:07:57 -0400 (Mon, 12 Sep 2005) | 4 lines

There's no point in flooding UHCs at 3 pings per 10 minutes. They won't
	reply more than 3x per hour and that's the minimum hardly
	acceptable retry for few-users software anyway.

------------------------------------------------------------------------
r9506 | cbiere | 2005-09-12 17:52:07 -0400 (Mon, 12 Sep 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r9505 | cbiere | 2005-09-12 17:48:52 -0400 (Mon, 12 Sep 2005) | 5 lines

Renamed "button_search_download_selected" to "button_search_download" for
	consistency with GTK1.
Made the button insensitive by default, it's updated when the user clicks
	on a row in the search results treeview.

------------------------------------------------------------------------
r9504 | cbiere | 2005-09-12 17:39:40 -0400 (Mon, 12 Sep 2005) | 3 lines

upload_request():
	Don't cast the return value of g_malloc().

------------------------------------------------------------------------
r9503 | cbiere | 2005-09-12 17:38:38 -0400 (Mon, 12 Sep 2005) | 6 lines

on_popup_search_metadata_activate():
	Make sure the metadata column is actually visible when the user
	requests a Bitzi lookup.
refresh_popup():
	Prepared for beauty contest.

------------------------------------------------------------------------
r9502 | cbiere | 2005-09-12 17:31:55 -0400 (Mon, 12 Sep 2005) | 6 lines

add_column():
	Don't make the columns reorderable because most code expects the
	position to be equivalent to the column ID, so reordering messes
	things slightly up and the order is not saved/restored anyway so
	it's more confusing than helpful.

------------------------------------------------------------------------
r9501 | cbiere | 2005-09-12 17:29:14 -0400 (Mon, 12 Sep 2005) | 7 lines

refresh_popups():
	Check the treeview cursor to decide whether items should be
	sensitive or not.
on_popup_search_metadata_activate():
	Make sure the metadata column is actually visible when the user
	requests a Bitzi lookup.

------------------------------------------------------------------------
r9500 | cbiere | 2005-09-12 17:24:55 -0400 (Mon, 12 Sep 2005) | 2 lines

Added proper names to popup menu items so that their sensitivity can be toggled.

------------------------------------------------------------------------
r9499 | cbiere | 2005-09-12 17:22:58 -0400 (Mon, 12 Sep 2005) | 4 lines

Added proper names to popup menu items so that their sensitivity can be
	toggled.
Expand the XML detail info view vertically.

------------------------------------------------------------------------
r9498 | cbiere | 2005-09-12 17:19:27 -0400 (Mon, 12 Sep 2005) | 3 lines

adns_do_transfer():
	Corrected comment.

------------------------------------------------------------------------
r9497 | cbiere | 2005-09-12 15:49:14 -0400 (Mon, 12 Sep 2005) | 3 lines

search_gui_set_details():
	Corrected truncation of ctime() string.

------------------------------------------------------------------------
r9496 | cbiere | 2005-09-12 15:15:02 -0400 (Mon, 12 Sep 2005) | 7 lines

Removed unnecessary file global variable "tmpstr".
on_clist_search_results_button_press_event():
	Removed unnecessary string copying.
	Reduced nesting for readability.
search_gui_set_details():
	Prepared for beauty contest.

------------------------------------------------------------------------
r9495 | cbiere | 2005-09-12 15:11:50 -0400 (Mon, 12 Sep 2005) | 3 lines

search_gui_new_search_full():
	Corrected type cast.

------------------------------------------------------------------------
r9494 | cbiere | 2005-09-12 15:10:16 -0400 (Mon, 12 Sep 2005) | 2 lines

Added covenience macro EMPTY_STRING().

------------------------------------------------------------------------
r9493 | cbiere | 2005-09-12 15:09:18 -0400 (Mon, 12 Sep 2005) | 4 lines

bitzi_init():
	Hide informational message when not debugging. There are
	already far too many startup messages.

------------------------------------------------------------------------
r9492 | rmanfredi | 2005-09-11 13:34:03 -0400 (Sun, 11 Sep 2005) | 3 lines

Fixed Configure bug not setting _exe properly.
Updated jmake rules to handle $(_EXE) on program installs.

------------------------------------------------------------------------
r9491 | daichik | 2005-09-11 12:13:36 -0400 (Sun, 11 Sep 2005) | 2 lines

Updated with the latest CVS release (2005-09-11).

------------------------------------------------------------------------
r9490 | cbiere | 2005-09-11 10:07:59 -0400 (Sun, 11 Sep 2005) | 3 lines

Added "Make current sorting default" to Searches->Context-Menu to change
	the defaults for sorting the results.

------------------------------------------------------------------------
r9489 | cbiere | 2005-09-11 09:58:09 -0400 (Sun, 11 Sep 2005) | 2 lines

Added search_sort_default_order and search_sort_default_column.

------------------------------------------------------------------------
r9488 | daichik | 2005-09-11 09:45:38 -0400 (Sun, 11 Sep 2005) | 2 lines

Added initial '$Id$'.

------------------------------------------------------------------------
r9487 | daichik | 2005-09-11 09:43:29 -0400 (Sun, 11 Sep 2005) | 2 lines

Added or fixed initial '$Id$'.

------------------------------------------------------------------------
r9486 | rmanfredi | 2005-09-11 09:39:57 -0400 (Sun, 11 Sep 2005) | 3 lines

Tagged some traces as being "bootstraping" traces to help diagnose problems
when GTKG does not seem to connect to the network.

------------------------------------------------------------------------
r9485 | rmanfredi | 2005-09-11 09:38:21 -0400 (Sun, 11 Sep 2005) | 2 lines

Added GUI settting for bootstrap_debug.

------------------------------------------------------------------------
r9484 | rmanfredi | 2005-09-11 09:37:07 -0400 (Sun, 11 Sep 2005) | 2 lines

Added property "bootstrap_debug" to monitor the bootstraping process.

------------------------------------------------------------------------
r9483 | rmanfredi | 2005-09-11 09:33:56 -0400 (Sun, 11 Sep 2005) | 2 lines

Added http_async_log_error_dbg().

------------------------------------------------------------------------
r9482 | daichik | 2005-09-11 09:27:26 -0400 (Sun, 11 Sep 2005) | 4 lines

Removed extra whitespaces.

Modified for Doxygen.

------------------------------------------------------------------------
r9481 | daichik | 2005-09-11 08:51:21 -0400 (Sun, 11 Sep 2005) | 2 lines

Updated Chinese (Simplified) translations by Wu Xiaoguang.

------------------------------------------------------------------------
r9480 | cbiere | 2005-09-11 08:32:24 -0400 (Sun, 11 Sep 2005) | 2 lines

Added possibility to switch columns back to the unsorted state.

------------------------------------------------------------------------
r9479 | cbiere | 2005-09-11 08:29:51 -0400 (Sun, 11 Sep 2005) | 4 lines

Removed unnecessary casts.
Changed gui_search_create_ctree() to static.
Changed gui_search_create_treeview() to static.

------------------------------------------------------------------------
r9478 | cbiere | 2005-09-11 08:17:57 -0400 (Sun, 11 Sep 2005) | 5 lines

adns_cache_lookup():
	Don't use "atom" for an assertion check after releasing the memory
	as the pointer is no longer valid. (Yes, this is not even about
	derefencing the pointer.)

------------------------------------------------------------------------
r9477 | daichik | 2005-09-11 04:25:48 -0400 (Sun, 11 Sep 2005) | 2 lines

Added missing left brackets reported by Wu Xiaoguang.

------------------------------------------------------------------------
r9476 | rmanfredi | 2005-09-11 04:22:54 -0400 (Sun, 11 Sep 2005) | 2 lines

Version of 2005-09-11.

------------------------------------------------------------------------
r9475 | rmanfredi | 2005-09-11 04:22:16 -0400 (Sun, 11 Sep 2005) | 2 lines

The mechanism to add special shared files was made generic.

------------------------------------------------------------------------
r9474 | rmanfredi | 2005-09-11 04:19:56 -0400 (Sun, 11 Sep 2005) | 2 lines

The header is X-Push-Proxies, not X-PushProxies.

------------------------------------------------------------------------
r9473 | rmanfredi | 2005-09-11 04:19:08 -0400 (Sun, 11 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9472 | rmanfredi | 2005-09-11 04:18:50 -0400 (Sun, 11 Sep 2005) | 2 lines

Also install robots.txt.

------------------------------------------------------------------------
r9471 | rmanfredi | 2005-09-11 04:17:44 -0400 (Sun, 11 Sep 2005) | 2 lines

Added robots.txt file.

------------------------------------------------------------------------
r9470 | rmanfredi | 2005-09-11 03:45:39 -0400 (Sun, 11 Sep 2005) | 2 lines

Fixed typos.

------------------------------------------------------------------------
r9469 | rmanfredi | 2005-09-11 03:29:14 -0400 (Sun, 11 Sep 2005) | 5 lines

I like to have no sorting by default.  If users want a different behaviour,
default sorting must be made configurable, by column and order (ascending
or descending).  Also, default sorting when enabled must be shown in the
GUI by having the right array beneath the column name.

------------------------------------------------------------------------
r9468 | daichik | 2005-09-10 23:40:17 -0400 (Sat, 10 Sep 2005) | 6 lines

Removed extra whitespaces.

Modified for Doxygen.

Added missing comment at the #endif directive.

------------------------------------------------------------------------
r9467 | cbiere | 2005-09-10 21:36:11 -0400 (Sat, 10 Sep 2005) | 3 lines

create_pixmap():
	Fixed warning as usual.

------------------------------------------------------------------------
r9466 | cbiere | 2005-09-10 21:23:50 -0400 (Sat, 10 Sep 2005) | 9 lines

search_gui_new_search_full():
	Set the sort column and order as requested so that these are
	restored on startup for all searches individually.
search_gui_compare_size_func():
search_gui_compare_count_func():
	Fixed the order of the arguments to correct the sign of the result.
add_results_columns():
	The default sorting is handled by search_gui_new_search() now.

------------------------------------------------------------------------
r9465 | cbiere | 2005-09-10 21:20:11 -0400 (Sat, 10 Sep 2005) | 3 lines

search_gui_new_search():
	Moved to ../search_common.c.

------------------------------------------------------------------------
r9464 | cbiere | 2005-09-10 21:19:20 -0400 (Sat, 10 Sep 2005) | 2 lines

Removed unnecessary casts.

------------------------------------------------------------------------
r9463 | cbiere | 2005-09-10 21:17:38 -0400 (Sat, 10 Sep 2005) | 4 lines

Moved search_gui_new_search() to here.
search_gui_store_searches():
	[GTK2] Update the search column ID and order before storing the search.

------------------------------------------------------------------------
r9462 | cbiere | 2005-09-10 17:28:12 -0400 (Sat, 10 Sep 2005) | 6 lines

search_gui_new_search():
	Sort the treeview holding search results by number of sources as
	default as requested by Johan Walles.
search_gui_sort_column():
	Swapped arrow_up.xpm and arrow_down.xpm for consistency with Gtk+ 2.x.

------------------------------------------------------------------------
r9461 | cbiere | 2005-09-10 16:19:09 -0400 (Sat, 10 Sep 2005) | 4 lines

Removed unnecessary file global variable "tmpstr".
Sort the treeview holding search results by number of sources as default
	as requested by Johan Walles.

------------------------------------------------------------------------
r9460 | daichik | 2005-09-10 12:18:34 -0400 (Sat, 10 Sep 2005) | 2 lines

Updated with the latest codes (CVS release date 2005-09-02) again.

------------------------------------------------------------------------
r9459 | cbiere | 2005-09-10 11:06:51 -0400 (Sat, 10 Sep 2005) | 4 lines

version_new_found():
	Deobfuscated creation of informational message.
	Tagged strings as translatable.

------------------------------------------------------------------------
r9458 | daichik | 2005-09-10 10:47:25 -0400 (Sat, 10 Sep 2005) | 2 lines

Updated with the latest codes (CVS release date 2005-09-02).

------------------------------------------------------------------------
r9457 | daichik | 2005-09-10 10:44:07 -0400 (Sat, 10 Sep 2005) | 2 lines

Added zh_CN.

------------------------------------------------------------------------
r9456 | daichik | 2005-09-10 10:43:36 -0400 (Sat, 10 Sep 2005) | 2 lines

Initial Chinese (Simplified) translations by Wu Xiaoguang.

------------------------------------------------------------------------
r9454 | daichik | 2005-09-10 08:23:49 -0400 (Sat, 10 Sep 2005) | 2 lines

Modifed for Doxygen.

------------------------------------------------------------------------
r9453 | daichik | 2005-09-10 06:10:36 -0400 (Sat, 10 Sep 2005) | 4 lines

Removed extra whitespaces.

Modified for Doxygen.

------------------------------------------------------------------------
r9452 | daichik | 2005-09-10 04:58:40 -0400 (Sat, 10 Sep 2005) | 2 lines

Added '$Id$' at the initial comment box.

------------------------------------------------------------------------
r9451 | daichik | 2005-09-10 04:33:46 -0400 (Sat, 10 Sep 2005) | 2 lines

Removed extra whitespaces.

------------------------------------------------------------------------
r9450 | daichik | 2005-09-10 04:17:29 -0400 (Sat, 10 Sep 2005) | 6 lines

Removed extra whitespaces.

Added '$Id$' at the initial comment box.

Modified for Doxygen.

------------------------------------------------------------------------
r9449 | daichik | 2005-09-10 01:46:57 -0400 (Sat, 10 Sep 2005) | 5 lines

Removed redundant file.

Added file for future use (my modifying against the src/core/version.c
requires developers' review).

------------------------------------------------------------------------
r9448 | daichik | 2005-09-10 01:41:17 -0400 (Sat, 10 Sep 2005) | 2 lines

Added translatable strings.

------------------------------------------------------------------------
r9447 | daichik | 2005-09-10 01:35:03 -0400 (Sat, 10 Sep 2005) | 2 lines

Corrected typo.

------------------------------------------------------------------------
r9446 | cbiere | 2005-09-09 12:35:00 -0400 (Fri, 09 Sep 2005) | 6 lines

Added more UHCs.
Changed "boot_hosts" to a struct because otherwise a missing comma would
	cause concatenation of the strings.
uhc_init():
	Apply some consistency checks to "boot_hosts".

------------------------------------------------------------------------
r9445 | cbiere | 2005-09-09 12:32:21 -0400 (Fri, 09 Sep 2005) | 3 lines

ensure_unicity():
	Show the PID of the lock owner, if the pidfile is locked.

------------------------------------------------------------------------
r9444 | cbiere | 2005-09-09 12:31:01 -0400 (Fri, 09 Sep 2005) | 2 lines

Added close_fds().

------------------------------------------------------------------------
r9443 | cbiere | 2005-09-09 11:53:17 -0400 (Fri, 09 Sep 2005) | 4 lines

ban_force():
	Use shutdown(fd, SHUT_RD) so that the kernel can discard incoming
	data.

------------------------------------------------------------------------
r9442 | cbiere | 2005-09-08 17:55:35 -0400 (Thu, 08 Sep 2005) | 11 lines

ensure_unicity():
	- Use fcntl(fd, F_SETLK, ...) to lock the pidfile if available to
	reduce the chance for race-conditions. This also prevents
	false-positives if the previous process crashed without removing
	the pidfile and another process has incidently the same PID.
	- Ignore the pidfile if the PID is 0, 1 or unparseable. The file
	is probably corrupt (maybe left-over from a system crash).
save_pid():
	Use a file descriptor instead of a "FILE" and clear the pidfile
	before writing the PID into it.

------------------------------------------------------------------------
r9441 | cbiere | 2005-09-08 17:45:58 -0400 (Thu, 08 Sep 2005) | 3 lines

do_open():
	Always add O_NOCTTY to the flags for open().

------------------------------------------------------------------------
r9440 | rmanfredi | 2005-09-08 14:34:07 -0400 (Thu, 08 Sep 2005) | 2 lines

Manually edited to make some table cells more readable.

------------------------------------------------------------------------
r9439 | rmanfredi | 2005-09-08 14:32:57 -0400 (Thu, 08 Sep 2005) | 2 lines

Bye code 504 is no longer reserved but used...

------------------------------------------------------------------------
r9438 | rmanfredi | 2005-09-08 14:32:07 -0400 (Thu, 08 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9437 | rmanfredi | 2005-09-08 14:29:59 -0400 (Thu, 08 Sep 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9436 | cbiere | 2005-09-08 13:46:31 -0400 (Thu, 08 Sep 2005) | 2 lines

Applied typo fixes by Jens Seidel.

------------------------------------------------------------------------
r9435 | cbiere | 2005-09-08 13:12:46 -0400 (Thu, 08 Sep 2005) | 2 lines

Added another Savvis range.

------------------------------------------------------------------------
r9434 | cbiere | 2005-09-07 13:51:56 -0400 (Wed, 07 Sep 2005) | 2 lines

Disable gzip encapsulation for gnet connections.

------------------------------------------------------------------------
r9433 | cbiere | 2005-09-07 13:35:30 -0400 (Wed, 07 Sep 2005) | 3 lines

Minor stylistic modifications.
This doesn't seem to use the same polynome as zlib's crc32().

------------------------------------------------------------------------
r9432 | cbiere | 2005-09-07 13:30:17 -0400 (Wed, 07 Sep 2005) | 5 lines

download_orphan_new():
	Pass a the unspecified IPv4 address instead of zero_host_addr
	because the latter doesn't qualify as "initialized" which is
	asserted by create_download().

------------------------------------------------------------------------
r9431 | cbiere | 2005-09-07 13:28:02 -0400 (Wed, 07 Sep 2005) | 3 lines

Enable gzip encapsulation for browse host replies if the client supports
	"gzip" but not "deflate".

------------------------------------------------------------------------
r9430 | cbiere | 2005-09-07 13:24:05 -0400 (Wed, 07 Sep 2005) | 3 lines

struct tx_deflate_args:
	Added ``gzip'' to request gzip encapsulation.

------------------------------------------------------------------------
r9429 | cbiere | 2005-09-07 13:22:53 -0400 (Wed, 07 Sep 2005) | 2 lines

Added support for gzip encapsulation.

------------------------------------------------------------------------
r9428 | cbiere | 2005-09-07 12:39:28 -0400 (Wed, 07 Sep 2005) | 4 lines

prop_save_to_file():
	Use tm_time_exact() to prevent that the modification timestamp is
	newer than ps->mtime.

------------------------------------------------------------------------
r9427 | cbiere | 2005-09-06 15:09:26 -0400 (Tue, 06 Sep 2005) | 2 lines

Added another range polling GWebCaches.

------------------------------------------------------------------------
r9426 | cbiere | 2005-09-05 18:50:20 -0400 (Mon, 05 Sep 2005) | 3 lines

canonize_path():
	Removed excessive debug messages.

------------------------------------------------------------------------
r9425 | cbiere | 2005-09-05 18:49:43 -0400 (Mon, 05 Sep 2005) | 10 lines

prepare_browsing():
	Pass ``host'' as parameter because the hostname is not necessarily
		derived from the "Host:" header.
	Renamed local "buf" variable because it shadowed another.
upload_request():
	Forgot to check and skip the optional port in an absolute URI.
	Give a more detailed error message in case of failure.
	Use canonize_path().
	Check earlier for a missing "Host:" header.

------------------------------------------------------------------------
r9424 | cbiere | 2005-09-05 17:14:42 -0400 (Mon, 05 Sep 2005) | 14 lines

url_safe_char():
	Use gchar instead of gint as type for c.
	Use the is_ascii_* functions instead of the ctype variants.
url_normalize():
	Style fixes.
	Check case-insensitively for "http://" and convert it to lowercase.
	Check also for IPv6 addresses.
	Don't reject hostname which have an IP address as prefix.
	Use the is_ascii_* functions instead of the ctype variants.
	Use parse_uint32() instead of strtoul().
	Use canonize_path().
	Make sure both parameters to canonize_path() are identical because
		if they overlap partially, the path might get messed up.

------------------------------------------------------------------------
r9423 | cbiere | 2005-09-05 17:07:39 -0400 (Mon, 05 Sep 2005) | 2 lines

Added canonize_path().

------------------------------------------------------------------------
r9422 | cbiere | 2005-09-05 17:06:39 -0400 (Mon, 05 Sep 2005) | 3 lines

gwc_retrieve():
	Fixed bug: GTK_GNUTELLA_DIR/gwcache was stored but never loaded.

------------------------------------------------------------------------
r9421 | cbiere | 2005-09-05 05:47:31 -0400 (Mon, 05 Sep 2005) | 2 lines

Added length macros for bitprint identifiers.

------------------------------------------------------------------------
r9420 | cbiere | 2005-09-05 05:46:19 -0400 (Mon, 05 Sep 2005) | 2 lines

Make sure the fixed UHCs are not contacted more than thrice a day per session.

------------------------------------------------------------------------
r9419 | cbiere | 2005-09-05 05:38:24 -0400 (Mon, 05 Sep 2005) | 3 lines

Added feed_host_cache_from_headers() which checks all known headers for
	peer addresses to feed the host cache.

------------------------------------------------------------------------
r9418 | cbiere | 2005-09-05 05:34:37 -0400 (Mon, 05 Sep 2005) | 2 lines

Replaced gwc.nonamer.ath.cx with galvatron.dyndns.org.

------------------------------------------------------------------------
r9417 | cbiere | 2005-09-05 05:33:59 -0400 (Mon, 05 Sep 2005) | 3 lines

download_request():
	Feed host cache from download headers.

------------------------------------------------------------------------
r9416 | cbiere | 2005-09-05 05:30:26 -0400 (Mon, 05 Sep 2005) | 2 lines

Added .sid as default shared extension.

------------------------------------------------------------------------
r9415 | cbiere | 2005-09-05 05:29:28 -0400 (Mon, 05 Sep 2005) | 8 lines

get_file_to_upload_from_urn():
	Check for NULL == uri i.e., missing query.
	Allow urn:bitprint: again.
upload_request():
	Feed host cache from headers.
	Handle requests with absolute URIs.
	Fixed return statement.

------------------------------------------------------------------------
r9414 | cbiere | 2005-09-05 05:25:50 -0400 (Mon, 05 Sep 2005) | 2 lines

Minor style fixes.

------------------------------------------------------------------------
r9413 | cbiere | 2005-09-04 19:20:54 -0400 (Sun, 04 Sep 2005) | 4 lines

upload_request():
	Separate the optional search part from the path.
	URL-decode the path (but not the search).

------------------------------------------------------------------------
r9412 | cbiere | 2005-09-04 18:25:31 -0400 (Sun, 04 Sep 2005) | 3 lines

parq_still_sharing():
	Suppress "We no longer share this file" when not debugging PARQ.

------------------------------------------------------------------------
r9411 | cbiere | 2005-09-04 17:34:35 -0400 (Sun, 04 Sep 2005) | 4 lines

dmesh_collect_sha1():
http_extract_version():
	Added const-qualifier to parameter.

------------------------------------------------------------------------
r9410 | cbiere | 2005-09-04 17:32:55 -0400 (Sun, 04 Sep 2005) | 2 lines

cvs ate my log message.

------------------------------------------------------------------------
r9409 | cbiere | 2005-09-04 15:36:59 -0400 (Sun, 04 Sep 2005) | 4 lines

SOCKET_WITH_TLS():
SOCKET_USES_TLS():
	Suppress warnings about unused parameter.

------------------------------------------------------------------------
r9408 | cbiere | 2005-09-04 15:35:57 -0400 (Sun, 04 Sep 2005) | 3 lines

cond_to_string():
	Hide this if GNU TLS support is disabled.

------------------------------------------------------------------------
r9407 | rmanfredi | 2005-09-04 09:34:29 -0400 (Sun, 04 Sep 2005) | 4 lines

Changed logic of bypassing: bypass by size first (the most deterministic
measure), then by estimated time.  Documented that the checks apply in
sequence.  Raised default to 5 secs for time-based bypassing.

------------------------------------------------------------------------
r9406 | rmanfredi | 2005-09-04 08:53:58 -0400 (Sun, 04 Sep 2005) | 2 lines

Fixed English.

------------------------------------------------------------------------
r9405 | nonamer | 2005-09-04 06:46:50 -0400 (Sun, 04 Sep 2005) | 3 lines

* Implemented parq_time_always_continue option.
* Astrisk is shown in status column for uploads which are given a quick upload slot

------------------------------------------------------------------------
r9404 | rmanfredi | 2005-09-02 17:24:40 -0400 (Fri, 02 Sep 2005) | 2 lines

Version of 2005-09-02.

------------------------------------------------------------------------
r9403 | rmanfredi | 2005-09-02 17:19:39 -0400 (Fri, 02 Sep 2005) | 2 lines

Cleaner fix.

------------------------------------------------------------------------
r9402 | cbiere | 2005-09-02 17:15:44 -0400 (Fri, 02 Sep 2005) | 3 lines

parq_upload_collect_stats():
	Ignore uploads that haven't been PARQed.

------------------------------------------------------------------------
r9401 | rmanfredi | 2005-09-02 17:15:38 -0400 (Fri, 02 Sep 2005) | 2 lines

Browse host requests have no PARQ structure associated with them.

------------------------------------------------------------------------
r9400 | cbiere | 2005-09-02 16:35:46 -0400 (Fri, 02 Sep 2005) | 2 lines

Added another UHC.

------------------------------------------------------------------------
r9399 | rmanfredi | 2005-09-02 15:36:12 -0400 (Fri, 02 Sep 2005) | 2 lines

Removed Coral URL.

------------------------------------------------------------------------
r9398 | cbiere | 2005-09-02 15:09:40 -0400 (Fri, 02 Sep 2005) | 2 lines

Updated list of UHCs and GWCs.

------------------------------------------------------------------------
r9397 | cbiere | 2005-09-02 11:09:03 -0400 (Fri, 02 Sep 2005) | 4 lines

socket_tls_setup():
	Removed misplaced "if (tls_debug)". Of course, the socket must be
	destroyed in any case.

------------------------------------------------------------------------
r9396 | daichik | 2005-09-02 04:06:40 -0400 (Fri, 02 Sep 2005) | 2 lines

Updated with the latest codes (2005-08-31).

------------------------------------------------------------------------
r9395 | cbiere | 2005-09-01 14:25:41 -0400 (Thu, 01 Sep 2005) | 4 lines

socket_connect():
	Don't free the socket structure again if socket_connect_finalize()
	failed.

------------------------------------------------------------------------
r9394 | rmanfredi | 2005-09-01 14:11:06 -0400 (Thu, 01 Sep 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9393 | cbiere | 2005-09-01 13:55:26 -0400 (Thu, 01 Sep 2005) | 2 lines

Corrected variable name in check for getaddrinfo().

------------------------------------------------------------------------
r9392 | rmanfredi | 2005-09-01 13:16:06 -0400 (Thu, 01 Sep 2005) | 2 lines

Regenrated Configure and config_h.SH now that HAS_GETADDRINFO is used.

------------------------------------------------------------------------
r9391 | cbiere | 2005-09-01 13:08:50 -0400 (Thu, 01 Sep 2005) | 2 lines

Corrected HAVE_GETADDRINFO to HAS_GETADDRINFO.

------------------------------------------------------------------------
r9390 | rmanfredi | 2005-09-01 12:29:51 -0400 (Thu, 01 Sep 2005) | 6 lines

Made uploaded byte count work.
Now calls parq_upload_request() each time, even for follow-ups, in order
to ensure that a quick slot is not suddenly requesting too much.
Allow a "quick slot" only if requester would not have otherwise obtained
a slot.

------------------------------------------------------------------------
r9389 | rmanfredi | 2005-09-01 12:27:52 -0400 (Thu, 01 Sep 2005) | 2 lines

Tell about cleanup exit when a signal was received and processed.

------------------------------------------------------------------------
r9388 | cbiere | 2005-09-01 02:46:44 -0400 (Thu, 01 Sep 2005) | 2 lines

Mention the required version of gettext for NLS.

------------------------------------------------------------------------
r9387 | rmanfredi | 2005-09-01 02:41:16 -0400 (Thu, 01 Sep 2005) | 3 lines

Forgot to test for parq_ul->quick before checking.  The test does not
seem to work, I'm mislead by the comments probably.

------------------------------------------------------------------------
r9386 | rmanfredi | 2005-09-01 02:34:18 -0400 (Thu, 01 Sep 2005) | 4 lines

My ignorance of PARQ flow shows: restore computation of amount sent in
parq_upload_remove(), but don't reset u->quick if we're allowing a follow-up
request to be made!

------------------------------------------------------------------------
r9385 | rmanfredi | 2005-09-01 02:27:25 -0400 (Thu, 01 Sep 2005) | 2 lines

Fixed chunk size computation: u->end is included in the amount sent.

------------------------------------------------------------------------
r9384 | rmanfredi | 2005-09-01 02:24:42 -0400 (Thu, 01 Sep 2005) | 5 lines

Quick fix to avoid uploads granted a quick slot to continue using the
slot when the next request is larger.  Update the amount sent each time
the uploaded chunk is completed, not just when the upload is removed for
better clarity.  Also disallow quick slots when uploads are stalling.

------------------------------------------------------------------------
r9383 | cbiere | 2005-09-01 01:54:35 -0400 (Thu, 01 Sep 2005) | 13 lines

[GTK2] Made the Maxmind URL in the about dialog selectable too.
[GTK2] Made Settings->Network->Current IP selectable.
[GTK2] Settings->Uploads: Use a Treeview to show the list of shared
	directories, so that character encoding conversion doesn't modify
	the actual path. This should fix bug #1224726.
[GTK2] The "delete-event" of dlg_quite was not linked to
	on_dlg_quit_delete_event() which caused a crash everytime the
	dialog was shown a second time.
[GTK2] Added tooltip descriptions for the purge and abort buttons.
Moved "Use realistic PARQ estimates" button into an own sub-section because
	this has absolutely no relation to the shared paths.
Added GUI controls for PARQ's "always continue" time/size settings.

------------------------------------------------------------------------
r9382 | cbiere | 2005-08-31 19:47:12 -0400 (Wed, 31 Aug 2005) | 4 lines

quit():
	Use gdk_window_raise() so that the dialog window is moved to the
	top if it's currently hidden behind other windows.

------------------------------------------------------------------------
r9381 | rmanfredi | 2005-08-31 17:39:11 -0400 (Wed, 31 Aug 2005) | 2 lines

Version of 2005-08-31.

------------------------------------------------------------------------
r9380 | rmanfredi | 2005-08-31 17:37:34 -0400 (Wed, 31 Aug 2005) | 5 lines

Added caching of current time.  Must no longer use time() or gettimeofday()
directly but tm_time() and tm_now(&tm).  When precise time is required,
use tm_time_exact() and tm_now_exact(&tm), but keep that exceptional.
Only use time() in very exceptional and limited cases.

------------------------------------------------------------------------
r9379 | nonamer | 2005-08-31 17:36:11 -0400 (Wed, 31 Aug 2005) | 2 lines

Property got renamed

------------------------------------------------------------------------
r9378 | nonamer | 2005-08-31 17:33:23 -0400 (Wed, 31 Aug 2005) | 2 lines

Fixed wrong assertion

------------------------------------------------------------------------
r9377 | rmanfredi | 2005-08-31 17:32:14 -0400 (Wed, 31 Aug 2005) | 2 lines

Added missing underscore in property names, for readability.

------------------------------------------------------------------------
r9376 | nonamer | 2005-08-31 16:17:48 -0400 (Wed, 31 Aug 2005) | 2 lines

Added option to allow small sized uploads to always continue

------------------------------------------------------------------------
r9375 | rmanfredi | 2005-08-31 13:46:37 -0400 (Wed, 31 Aug 2005) | 2 lines

Fixed by running metalint and correcting errors.

------------------------------------------------------------------------
r9374 | rmanfredi | 2005-08-31 13:21:03 -0400 (Wed, 31 Aug 2005) | 2 lines

Added another banned GUID, probably from Morpheus again.

------------------------------------------------------------------------
r9373 | cbiere | 2005-08-31 11:25:03 -0400 (Wed, 31 Aug 2005) | 5 lines

socket_connect_finalize():
	Return a numeric success/failure value instead of the socket
	struct as the latter is not freed on failure as could be assumed
	from a NULL return value.

------------------------------------------------------------------------
r9372 | cbiere | 2005-08-31 03:20:48 -0400 (Wed, 31 Aug 2005) | 3 lines

download_retrieve():
	Added support for parsing IPv6 addresses.

------------------------------------------------------------------------
r9371 | cbiere | 2005-08-31 03:18:38 -0400 (Wed, 31 Aug 2005) | 6 lines

Added HTTP URL error code HTTP_URL_BAD_HOST_PART.
http_url_parse():
	Added support for parsing IPv6 addresses as host part.
	Removed support for the "user[:pass]@" part as the code
	was too forgiving and such HTTP URLs are discouraged anyway.

------------------------------------------------------------------------
r9370 | cbiere | 2005-08-31 03:13:25 -0400 (Wed, 31 Aug 2005) | 2 lines

string_to_host_addr_port() has an ``endptr'' parameter now.

------------------------------------------------------------------------
r9369 | cbiere | 2005-08-31 03:10:18 -0400 (Wed, 31 Aug 2005) | 8 lines

socket_connect_prepare():
	Don't allocate the socket structure, so that the function
	can be used for reinitialization.
	Return 0 on success instead of the socket.
socket_connect_by_name_helper():
	If the returned address is part of a different network protocol,
	reinitialize the structure so we have the right socket type.

------------------------------------------------------------------------
r9368 | cbiere | 2005-08-31 03:04:16 -0400 (Wed, 31 Aug 2005) | 4 lines

recurse_scan():
	Show found->name_nfc and found->name_canonic in the warning
	message to make things clearer.

------------------------------------------------------------------------
r9367 | cbiere | 2005-08-31 03:02:37 -0400 (Wed, 31 Aug 2005) | 6 lines

string_to_host_addr_port():
	Added parameter ``endptr''.
	Parse IPv4 as well as IPv6 addresses.
name_to_host_addr():
	Use getaddrinfo() instead of gethostbyname() if available.

------------------------------------------------------------------------
r9366 | cbiere | 2005-08-31 02:59:23 -0400 (Wed, 31 Aug 2005) | 6 lines

utf8_enforce():
	Fixed bug which caused a wrong return value.
locale_to_utf8_full():
	Added consistency check for utf8_enforce() even though it couldn't
	catch the above mentioned bug.

------------------------------------------------------------------------
r9365 | cbiere | 2005-08-31 02:57:12 -0400 (Wed, 31 Aug 2005) | 4 lines

bio_sendfile():
	Use ENOSYS instead of ENOTSUP because the latter is undefined on
	OpenBSD and ENOSYS looks also more appropriate.

------------------------------------------------------------------------
r9364 | cbiere | 2005-08-31 02:55:55 -0400 (Wed, 31 Aug 2005) | 2 lines

chown != strlcpy.

------------------------------------------------------------------------
r9363 | cbiere | 2005-08-31 02:55:26 -0400 (Wed, 31 Aug 2005) | 3 lines

Require also ``struct sockaddr_storage''.
Check both AF_INET6 and PF_INET6.

------------------------------------------------------------------------
r9362 | cbiere | 2005-08-31 02:54:11 -0400 (Wed, 31 Aug 2005) | 2 lines

Added availability check for getaddrinfo().

------------------------------------------------------------------------
r9361 | rmanfredi | 2005-08-30 17:30:08 -0400 (Tue, 30 Aug 2005) | 2 lines

Version of 2005-08-30.

------------------------------------------------------------------------
r9360 | rmanfredi | 2005-08-30 17:29:11 -0400 (Tue, 30 Aug 2005) | 2 lines

More fileinfo_t.

------------------------------------------------------------------------
r9359 | rmanfredi | 2005-08-30 17:28:41 -0400 (Tue, 30 Aug 2005) | 2 lines

Raised min values for search_queries_forward_size and search_queries_kick_size.

------------------------------------------------------------------------
r9358 | rmanfredi | 2005-08-30 17:25:14 -0400 (Tue, 30 Aug 2005) | 4 lines

Validate CHNK info, possibly restoring them from the trailer.
Don't run file_info_check_chunklist() as an assertion if fileinfo_debug
is not set, otherwise it is becoming a CPU hog.

------------------------------------------------------------------------
r9357 | rmanfredi | 2005-08-30 17:00:11 -0400 (Tue, 30 Aug 2005) | 2 lines

Added fileinfo_t.

------------------------------------------------------------------------
r9356 | rmanfredi | 2005-08-30 16:58:29 -0400 (Tue, 30 Aug 2005) | 2 lines

Pass current time to more timer functions.

------------------------------------------------------------------------
r9355 | cbiere | 2005-08-30 16:09:50 -0400 (Tue, 30 Aug 2005) | 12 lines

socket_evt_change():
	Preserve the original value of "errno".
socket_tls_setup():
	Use GUINT_TO_POINTER() instead of casting directly.
socket_tls_setup():
	Hide the warnings if "tls_debug" is zero.
socket_tls_write():
socket_tls_read():
socket_tls_writev():
socket_tls_readv():
	Use the original poll-condition unless the operation was interrupted.

------------------------------------------------------------------------
r9354 | cbiere | 2005-08-30 16:05:46 -0400 (Tue, 30 Aug 2005) | 3 lines

node_add_socket():
	Do the cheaper check first.

------------------------------------------------------------------------
r9353 | cbiere | 2005-08-30 16:04:46 -0400 (Tue, 30 Aug 2005) | 2 lines

Indicate encryption also for uploads.

------------------------------------------------------------------------
r9352 | cbiere | 2005-08-30 16:02:37 -0400 (Tue, 30 Aug 2005) | 3 lines

parq_ul_calc_retry():
	Converted C++ style comment.

------------------------------------------------------------------------
r9351 | rmanfredi | 2005-08-30 15:04:56 -0400 (Tue, 30 Aug 2005) | 3 lines

Added setting of parq_optimistic in Config -> Upload.
[GTK1] Added setting of fileinfo_debug.

------------------------------------------------------------------------
r9350 | rmanfredi | 2005-08-30 15:03:10 -0400 (Tue, 30 Aug 2005) | 3 lines

Rephrased comment for parq_optimistic slightly.
Added fileinfo_debug.

------------------------------------------------------------------------
r9349 | rmanfredi | 2005-08-30 15:01:51 -0400 (Tue, 30 Aug 2005) | 2 lines

In push messages, use index of 0 if we have it set to pseudo URN_INDEX.

------------------------------------------------------------------------
r9348 | rmanfredi | 2005-08-30 15:01:19 -0400 (Tue, 30 Aug 2005) | 2 lines

Fixed too long lines.

------------------------------------------------------------------------
r9347 | nonamer | 2005-08-30 11:59:55 -0400 (Tue, 30 Aug 2005) | 2 lines

There might not be a download mesh available

------------------------------------------------------------------------
r9346 | nonamer | 2005-08-30 11:38:39 -0400 (Tue, 30 Aug 2005) | 3 lines

Added PARQ optimistic setting which uses an better ETA using
chunk size and dmesh information

------------------------------------------------------------------------
r9345 | daichik | 2005-08-30 05:55:53 -0400 (Tue, 30 Aug 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9344 | rmanfredi | 2005-08-30 02:01:23 -0400 (Tue, 30 Aug 2005) | 2 lines

Added fast UTF-8 char decoder to try to reduce overhead of remappings.

------------------------------------------------------------------------
r9343 | rmanfredi | 2005-08-30 01:59:56 -0400 (Tue, 30 Aug 2005) | 2 lines

Added another banned GUID from Morpheus hosts.

------------------------------------------------------------------------
r9342 | rmanfredi | 2005-08-30 01:58:58 -0400 (Tue, 30 Aug 2005) | 3 lines

Revisited download selection logic when a GIV string is received.
Improved tracing of the download selection logic for debugging.

------------------------------------------------------------------------
r9341 | daichik | 2005-08-30 01:32:31 -0400 (Tue, 30 Aug 2005) | 4 lines

Updated Ukrainian translations by Vitaliy Buyar with a little header
changes. From my experiences, I find KBabel or possibly unfilled forms
in KBabel would made a mess of them.

------------------------------------------------------------------------
r9340 | cbiere | 2005-08-29 17:46:55 -0400 (Mon, 29 Aug 2005) | 4 lines

upload_writable():
	GCC says ``uploads.c:3742: warning: the address of "use_sendfile",
	will always evaluate as true''.

------------------------------------------------------------------------
r9339 | rmanfredi | 2005-08-29 12:59:56 -0400 (Mon, 29 Aug 2005) | 4 lines

Fixes TLS assertions.  Added SOCKET_WITH_TLS() to use before connection
is established.  Make sure session is NULL before initing it, and reset
it when it's deinit-ed.

------------------------------------------------------------------------
r9338 | rmanfredi | 2005-08-29 12:58:42 -0400 (Mon, 29 Aug 2005) | 3 lines

Removed conditional code on glib1.x now that glib-missing provides
a drop-in replacement for g_string_append_len().

------------------------------------------------------------------------
r9337 | rmanfredi | 2005-08-28 18:31:59 -0400 (Sun, 28 Aug 2005) | 2 lines

More magic constants "16" replaced by GUID_RAW_SIZE.  Got rid of MUID_SIZE.

------------------------------------------------------------------------
r9336 | rmanfredi | 2005-08-28 18:31:08 -0400 (Sun, 28 Aug 2005) | 4 lines

The OOB-proxying ultrapeer would send back the local hits to the leaf
using the mangled MUID, instead of the original, surely causing the leaf
to discard the replies.

------------------------------------------------------------------------
r9335 | rmanfredi | 2005-08-28 18:27:45 -0400 (Sun, 28 Aug 2005) | 2 lines

Fixed too long lines.

------------------------------------------------------------------------
r9334 | rmanfredi | 2005-08-28 16:37:53 -0400 (Sun, 28 Aug 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9333 | rmanfredi | 2005-08-28 16:35:40 -0400 (Sun, 28 Aug 2005) | 2 lines

Will now serve GTKG's favorite web icon when "/favicon.ico" is requested.

------------------------------------------------------------------------
r9332 | rmanfredi | 2005-08-28 16:32:58 -0400 (Sun, 28 Aug 2005) | 2 lines

Fixed typo in metaconfig symbol: HAVE_SENDFILE -> HAS_SENDFILE.

------------------------------------------------------------------------
r9331 | rmanfredi | 2005-08-28 16:31:17 -0400 (Sun, 28 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9330 | rmanfredi | 2005-08-28 16:30:50 -0400 (Sun, 28 Aug 2005) | 2 lines

Added favorite icon.

------------------------------------------------------------------------
r9329 | rmanfredi | 2005-08-28 16:30:30 -0400 (Sun, 28 Aug 2005) | 2 lines

Added GTKG's favorite web icon.

------------------------------------------------------------------------
r9328 | rmanfredi | 2005-08-28 14:03:19 -0400 (Sun, 28 Aug 2005) | 2 lines

Bumped date since Christian fixed bug #1274895 today.

------------------------------------------------------------------------
r9327 | rmanfredi | 2005-08-28 14:01:38 -0400 (Sun, 28 Aug 2005) | 6 lines

Plugged download_convert_to_urires() back in, fixing the wrong name
superseding that it did.
Adjusted logging messages to lowercase the leading char now that things
are emitted via g_log(), converting some messages to warnings and protecting
with debugging conditions, if necessary.

------------------------------------------------------------------------
r9326 | rmanfredi | 2005-08-28 13:59:15 -0400 (Sun, 28 Aug 2005) | 2 lines

Changed signature of extract_retry_after() to be able to log the culprit.

------------------------------------------------------------------------
r9325 | rmanfredi | 2005-08-28 13:41:57 -0400 (Sun, 28 Aug 2005) | 3 lines

Silence GTKG by removing warnings that can't help the user at all when
the corresponding debug level is 0.

------------------------------------------------------------------------
r9324 | rmanfredi | 2005-08-28 13:13:57 -0400 (Sun, 28 Aug 2005) | 2 lines

Warn in gtk_main_flush() if too much work is needed, aborting flush.

------------------------------------------------------------------------
r9323 | rmanfredi | 2005-08-28 13:12:42 -0400 (Sun, 28 Aug 2005) | 3 lines

Good objection from Christian Biere: always emit chunked encoding to HTTP/1.1
clients, whether they choose to close the connection or not.

------------------------------------------------------------------------
r9322 | cbiere | 2005-08-28 10:53:54 -0400 (Sun, 28 Aug 2005) | 4 lines

prepare_browsing():
	Commented out code that disables Transfer-Encoding "chunked" for
	HTTP/1.1 requests.

------------------------------------------------------------------------
r9321 | daichik | 2005-08-28 10:44:47 -0400 (Sun, 28 Aug 2005) | 2 lines

Updated with the latest codes (2005-08-27).

------------------------------------------------------------------------
r9320 | cbiere | 2005-08-28 10:32:49 -0400 (Sun, 28 Aug 2005) | 2 lines

Added missing parameter "flags" for guc_download_auto_new().

------------------------------------------------------------------------
r9319 | cbiere | 2005-08-28 10:31:25 -0400 (Sun, 28 Aug 2005) | 4 lines

ui2c.c must include if/bridge/ui2c.h because the prototypes get out-of-sync
	with the implementations otherwise.
Fixed several prototypes.

------------------------------------------------------------------------
r9318 | cbiere | 2005-08-28 10:26:16 -0400 (Sun, 28 Aug 2005) | 8 lines

Renamed INPUT_EVENT_* enums.
Don't poll for exceptions on UDP sockets because on Linux exceptions are
	even reported for non-connected sockets which seems to take too
	much I/O time.
input_event_add():
	Don't add INPUT_EVENT_EXCEPTION automagically because in rare
	cases exceptions should be ignored.

------------------------------------------------------------------------
r9317 | rmanfredi | 2005-08-28 04:14:32 -0400 (Sun, 28 Aug 2005) | 3 lines

We don't need to send chunked output for browse host if remote servent
does not wish to keep the connection alive.

------------------------------------------------------------------------
r9316 | rmanfredi | 2005-08-27 20:12:54 -0400 (Sat, 27 Aug 2005) | 2 lines

Prefer a g_error() to g_assert_not_reached() to make problem clearer.

------------------------------------------------------------------------
r9315 | rmanfredi | 2005-08-27 20:11:30 -0400 (Sat, 27 Aug 2005) | 2 lines

Allow more socket_evt*() traces if tls_debug.

------------------------------------------------------------------------
r9314 | rmanfredi | 2005-08-27 20:10:30 -0400 (Sat, 27 Aug 2005) | 3 lines

Make sure we flush upgraded trailer info to disk even if fileinfos are
not currently referenced by any download.

------------------------------------------------------------------------
r9313 | rmanfredi | 2005-08-27 20:09:07 -0400 (Sat, 27 Aug 2005) | 2 lines

Allow signals received during final GUI countdown to terminate us immediately.

------------------------------------------------------------------------
r9312 | rmanfredi | 2005-08-27 17:21:07 -0400 (Sat, 27 Aug 2005) | 2 lines

Guard freeing of GUID in case we're freeing a non-upgraded fileinfo.

------------------------------------------------------------------------
r9311 | rmanfredi | 2005-08-27 17:13:16 -0400 (Sat, 27 Aug 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9310 | rmanfredi | 2005-08-27 17:12:30 -0400 (Sat, 27 Aug 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r9309 | rmanfredi | 2005-08-27 17:07:26 -0400 (Sat, 27 Aug 2005) | 3 lines

Debug level adjustments: try to give higher levels to things that are
more verbose at runtime or less important to know about.

------------------------------------------------------------------------
r9308 | rmanfredi | 2005-08-27 17:04:53 -0400 (Sat, 27 Aug 2005) | 2 lines

[GTK1] Added GUI setting for "parq_debug".

------------------------------------------------------------------------
r9307 | rmanfredi | 2005-08-27 12:53:05 -0400 (Sat, 27 Aug 2005) | 4 lines

Added internal GUID to each fileinfo, to be perused by downloads at
retrieval time, ensuring a download source is uniquely linked to a given
fileinfo.

------------------------------------------------------------------------
r9306 | rmanfredi | 2005-08-27 12:49:31 -0400 (Sat, 27 Aug 2005) | 2 lines

Made sure hex_to_guid() cannot read past the end of `hexguid'.

------------------------------------------------------------------------
r9305 | rmanfredi | 2005-08-27 12:48:41 -0400 (Sat, 27 Aug 2005) | 2 lines

Added GUID_HEX_SIZE.

------------------------------------------------------------------------
r9304 | rmanfredi | 2005-08-27 10:54:28 -0400 (Sat, 27 Aug 2005) | 2 lines

Replaced magical "16" constant with new GUID_RAW_SIZE define.

------------------------------------------------------------------------
r9303 | rmanfredi | 2005-08-27 08:47:16 -0400 (Sat, 27 Aug 2005) | 2 lines

Don't allow dynamic upload slot allocation when uploads are stalling.

------------------------------------------------------------------------
r9302 | rmanfredi | 2005-08-27 08:46:51 -0400 (Sat, 27 Aug 2005) | 2 lines

Show HTML and Gnutella browse host request counts in upload stat pane.

------------------------------------------------------------------------
r9301 | rmanfredi | 2005-08-27 08:44:08 -0400 (Sat, 27 Aug 2005) | 2 lines

Count HTML and Gnutella browse host requests.

------------------------------------------------------------------------
r9300 | rmanfredi | 2005-08-27 08:42:40 -0400 (Sat, 27 Aug 2005) | 2 lines

Fixed too long a line.

------------------------------------------------------------------------
r9299 | rmanfredi | 2005-08-27 07:08:38 -0400 (Sat, 27 Aug 2005) | 3 lines

Adapt stalling threshold to the amount of upload slots configured.
Reduced stalling TX buffer down to 1K.

------------------------------------------------------------------------
r9298 | cbiere | 2005-08-25 16:48:38 -0400 (Thu, 25 Aug 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r9297 | cbiere | 2005-08-25 16:46:44 -0400 (Thu, 25 Aug 2005) | 9 lines

Some style fixes.
Added socket_evt_set() as wrapper around inputevt_add(). It records the
	given parameter so that it's possible to switch the poll condition
	for GNU TLS to prevent stalling connections and busy-waiting.
socket_evt_clear():
	Wrapper around inputevt_remove().
socket_evt_change():
	See above.

------------------------------------------------------------------------
r9296 | cbiere | 2005-08-25 16:38:00 -0400 (Thu, 25 Aug 2005) | 19 lines

struct gnutella_shell:
	Changed outbuf to walloc()ated buffer.
	Removed unnecessary write_tag.
shell_exec_node():
	Use connection flag CONNECT_F_FORCE.
shell_exec():
	Return CMD_NOOP for empty input lines so that they are simply ignored.
shell_write():
	Don't use an extra write_tag but socket_evt_clear() and
	socket_evt_set().
shell_new():
	Use walloc0() instead of g_new0().
	walloc() sh->outbuf for now. Each command should create its own
	walloc()ated buffer instead.
shell_destroy():
	Use socket_evt_clear() instead of "write_tag".
shell_add():
	Use socket_evt_clear() and socket_evt_set() instead of inputevt_add().

------------------------------------------------------------------------
r9295 | cbiere | 2005-08-25 16:30:35 -0400 (Thu, 25 Aug 2005) | 7 lines

Minor style fixes.
bio_enable():
	Don't use INPUT_EVENT_EXCEPTION for inputevt_add().
bws_read():
bws_write():
	Added assertions.

------------------------------------------------------------------------
r9294 | cbiere | 2005-08-25 16:28:21 -0400 (Thu, 25 Aug 2005) | 3 lines

adns_init():
	Use only INPUT_EVENT_READ for inputevt_add().

------------------------------------------------------------------------
r9293 | cbiere | 2005-08-25 16:19:26 -0400 (Thu, 25 Aug 2005) | 2 lines

Use socket_evt_clear() and socket_evt_set().

------------------------------------------------------------------------
r9292 | cbiere | 2005-08-25 16:15:17 -0400 (Thu, 25 Aug 2005) | 9 lines

download_info_change_all():
	Make sure the download is removed from the GUI before calling
	file_info_add_source().
download_clone():
	Initialize cd->visible before calling file_info_add_source()
	because it's used for a consistency check.
download_write_request():
	Use socket_evt_clear() and socket_evt_set().

------------------------------------------------------------------------
r9291 | cbiere | 2005-08-25 16:12:41 -0400 (Thu, 25 Aug 2005) | 2 lines

Comment out Gtk+ 1.2 specific widgets for Gtk 2.x.

------------------------------------------------------------------------
r9290 | cbiere | 2005-08-25 16:11:51 -0400 (Thu, 25 Aug 2005) | 2 lines

Minor cast fixes.

------------------------------------------------------------------------
r9289 | cbiere | 2005-08-25 16:11:01 -0400 (Thu, 25 Aug 2005) | 7 lines

inputevt_cond_t:
	Added INPUT_EVENT_RDWR because manually OR-combining is bad.
inputevt_add():
	Always add EXCEPTION_CONDITION automagically.
	Allow only INPUT_EVENT_READ, INPUT_EVENT_WRITE or INPUT_EVENT_RDWR
		as condition.

------------------------------------------------------------------------
r9288 | cbiere | 2005-08-25 16:08:11 -0400 (Thu, 25 Aug 2005) | 3 lines

bg_task_deliver_signals():
	Use GPOINTER_TO_UINT(), don't cast directly to an integer.

------------------------------------------------------------------------
r9287 | cbiere | 2005-08-25 16:07:11 -0400 (Thu, 25 Aug 2005) | 3 lines

supports_deflate():
	Added missing NULL-pointer check.

------------------------------------------------------------------------
r9286 | cbiere | 2005-08-25 16:06:21 -0400 (Thu, 25 Aug 2005) | 4 lines

Removed dead UHC.
uhc_host_resolved():
	Fixed typo causing a missing NULL-pointer check.

------------------------------------------------------------------------
r9285 | cbiere | 2005-08-25 16:05:03 -0400 (Thu, 25 Aug 2005) | 3 lines

Style fixes.
Added more magic.

------------------------------------------------------------------------
r9284 | cbiere | 2005-08-25 16:02:56 -0400 (Thu, 25 Aug 2005) | 3 lines

hsep_get_connection_table():
	Added const-qualifier.

------------------------------------------------------------------------
r9283 | cbiere | 2005-08-25 16:02:13 -0400 (Thu, 25 Aug 2005) | 5 lines

file_info_add_source():
	Make sure the download isn't referenced by the GUI any longer
	because this function will change dl->file_info which is used
	by the GUI.

------------------------------------------------------------------------
r9282 | cbiere | 2005-08-25 16:00:27 -0400 (Thu, 25 Aug 2005) | 3 lines

Use RCSID() for GCC only as this causes unnecessary warnings with other
	compilers.

------------------------------------------------------------------------
r9281 | cbiere | 2005-08-25 15:58:41 -0400 (Thu, 25 Aug 2005) | 2 lines

Added vidlock spammers.

------------------------------------------------------------------------
r9280 | cbiere | 2005-08-25 15:57:56 -0400 (Thu, 25 Aug 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r9279 | nonamer | 2005-08-24 14:21:31 -0400 (Wed, 24 Aug 2005) | 4 lines

* Added parq_debug property
* Fixed the bug where a new upload request would get queued even
  if all upload slots are available

------------------------------------------------------------------------
r9278 | rmanfredi | 2005-08-21 08:46:21 -0400 (Sun, 21 Aug 2005) | 2 lines

Calls new vendor_init() and vmsg_init().

------------------------------------------------------------------------
r9277 | rmanfredi | 2005-08-21 08:45:57 -0400 (Sun, 21 Aug 2005) | 2 lines

Added BINARY_ARRAY_SORTED() assertion on fi_tag_map[].

------------------------------------------------------------------------
r9276 | rmanfredi | 2005-08-21 08:45:16 -0400 (Sun, 21 Aug 2005) | 2 lines

Added BINARY_ARRAY_SORTED() assertion on parq_tag_map[].

------------------------------------------------------------------------
r9275 | rmanfredi | 2005-08-21 08:44:33 -0400 (Sun, 21 Aug 2005) | 2 lines

Ensure vmsg_map[] is sorted properly.

------------------------------------------------------------------------
r9274 | rmanfredi | 2005-08-21 08:44:01 -0400 (Sun, 21 Aug 2005) | 3 lines

Added BINARY_ARRAY_SORTED() on utf32_nfkd_lut[], utf32_comb_class_lut[]
and utf32_general_category_lut[].

------------------------------------------------------------------------
r9273 | rmanfredi | 2005-08-21 08:42:32 -0400 (Sun, 21 Aug 2005) | 2 lines

Added BINARY_ARRAY_SORTED() assertion on vendor_map[].

------------------------------------------------------------------------
r9272 | rmanfredi | 2005-08-21 08:41:55 -0400 (Sun, 21 Aug 2005) | 3 lines

Added uint32_to_string() and uint32_to_string_buf().
Added BINARY_ARRAY_SORTED() assertion.

------------------------------------------------------------------------
r9271 | daichik | 2005-08-21 03:48:20 -0400 (Sun, 21 Aug 2005) | 2 lines

Updated with the latest codes (2005-08-20).

------------------------------------------------------------------------
r9270 | rmanfredi | 2005-08-20 18:52:20 -0400 (Sat, 20 Aug 2005) | 3 lines

No longer specify QUERY_SPEED_NO_XML in queries: we can now show the XML
from the hits in the GUI.

------------------------------------------------------------------------
r9269 | rmanfredi | 2005-08-20 18:48:12 -0400 (Sat, 20 Aug 2005) | 2 lines

Fixed lines larger than 80 chars.

------------------------------------------------------------------------
r9268 | rmanfredi | 2005-08-20 17:50:47 -0400 (Sat, 20 Aug 2005) | 2 lines

Version of 2005-08-20.

------------------------------------------------------------------------
r9267 | rmanfredi | 2005-08-20 17:49:22 -0400 (Sat, 20 Aug 2005) | 2 lines

Display XML payload, if any.

------------------------------------------------------------------------
r9266 | rmanfredi | 2005-08-20 17:48:46 -0400 (Sat, 20 Aug 2005) | 2 lines

Moved xml_indent() as search_xml_indent() to search_common.c.

------------------------------------------------------------------------
r9265 | rmanfredi | 2005-08-20 17:47:41 -0400 (Sat, 20 Aug 2005) | 2 lines

Glib 1.x lacks g_string_append_len().

------------------------------------------------------------------------
r9264 | rmanfredi | 2005-08-20 17:46:40 -0400 (Sat, 20 Aug 2005) | 2 lines

Added debugging messages to trace browse-host requests.

------------------------------------------------------------------------
r9263 | rmanfredi | 2005-08-20 16:57:22 -0400 (Sat, 20 Aug 2005) | 2 lines

[GTK1] Added 7 new GUI-settable debug levels.

------------------------------------------------------------------------
r9262 | rmanfredi | 2005-08-20 16:56:44 -0400 (Sat, 20 Aug 2005) | 3 lines

Added 7 new GUI-settable debug levels.
Added provision for displaying XML data from search results.

------------------------------------------------------------------------
r9261 | rmanfredi | 2005-08-20 16:54:16 -0400 (Sat, 20 Aug 2005) | 2 lines

Removed unconditionnal g_message.

------------------------------------------------------------------------
r9260 | rmanfredi | 2005-08-20 15:44:39 -0400 (Sat, 20 Aug 2005) | 5 lines

Change key management scheme in dl_by_addr when there is a conflict.
We keep the old key around instead of allocating a new key. Since freing
of the key is conditionned by the entry being for the given server, we thus
garantee that noone but that server can get rid of the key structure.

------------------------------------------------------------------------
r9259 | rmanfredi | 2005-08-19 02:32:27 -0400 (Fri, 19 Aug 2005) | 3 lines

Don't free server if it's still referenced.  This can actually happen,
as the new comment explains.

------------------------------------------------------------------------
r9258 | cbiere | 2005-08-18 18:13:37 -0400 (Thu, 18 Aug 2005) | 4 lines

host_addr_convert():
	Fixed typo.
	Also set *to to zero in case of non-convertability.

------------------------------------------------------------------------
r9257 | cbiere | 2005-08-18 18:09:44 -0400 (Thu, 18 Aug 2005) | 3 lines

host_addr_convert():
	Fixed for IPv4-only. The first parameter isn't a pointer anymore.

------------------------------------------------------------------------
r9256 | rmanfredi | 2005-08-18 16:42:16 -0400 (Thu, 18 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9255 | rmanfredi | 2005-08-18 16:41:46 -0400 (Thu, 18 Aug 2005) | 2 lines

Don't force generation of getdate.c unless they're developpers.

------------------------------------------------------------------------
r9254 | cbiere | 2005-08-18 16:40:38 -0400 (Thu, 18 Aug 2005) | 3 lines

Bogus change to guarantee that getdate.c is older than getdate.y
	even on FAT partitions.

------------------------------------------------------------------------
r9253 | rmanfredi | 2005-08-18 16:22:46 -0400 (Thu, 18 Aug 2005) | 2 lines

Version of 2005-08-18.

------------------------------------------------------------------------
r9252 | rmanfredi | 2005-08-18 16:20:46 -0400 (Thu, 18 Aug 2005) | 2 lines

Fixed get_server(): must not always allocate the server!

------------------------------------------------------------------------
r9251 | cbiere | 2005-08-18 12:38:52 -0400 (Thu, 18 Aug 2005) | 2 lines

Removed dead UHCs.

------------------------------------------------------------------------
r9250 | cbiere | 2005-08-18 12:37:13 -0400 (Thu, 18 Aug 2005) | 2 lines

Removed dead GWebCaches.

------------------------------------------------------------------------
r9249 | rmanfredi | 2005-08-17 16:56:03 -0400 (Wed, 17 Aug 2005) | 2 lines

Added reference counting for server objects.

------------------------------------------------------------------------
r9248 | cbiere | 2005-08-17 14:43:33 -0400 (Wed, 17 Aug 2005) | 2 lines

Use regular expressions for the treeview search function.

------------------------------------------------------------------------
r9247 | cbiere | 2005-08-17 14:37:19 -0400 (Wed, 17 Aug 2005) | 2 lines

Minor clean-up.

------------------------------------------------------------------------
r9246 | cbiere | 2005-08-17 11:27:47 -0400 (Wed, 17 Aug 2005) | 2 lines

Moved all host_addr_t stuff here.

------------------------------------------------------------------------
r9245 | cbiere | 2005-08-17 09:48:41 -0400 (Wed, 17 Aug 2005) | 2 lines

Added lib/host_addr.[ch].

------------------------------------------------------------------------
r9244 | cbiere | 2005-08-17 09:44:05 -0400 (Wed, 17 Aug 2005) | 4 lines

Moved host_addr_t stuff to lib/host_addr.[ch].
Added const-qualifier to "blank_guid" and propagated the const change.
Corrected the mask for IPv6 IPv4-mapped addresses.

------------------------------------------------------------------------
r9243 | rmanfredi | 2005-08-16 18:13:56 -0400 (Tue, 16 Aug 2005) | 2 lines

dmesh_collect_compact_locations(): added skip_ascii_blanks() call.

------------------------------------------------------------------------
r9242 | rmanfredi | 2005-08-16 17:59:13 -0400 (Tue, 16 Aug 2005) | 2 lines

Added two suspect ranges.

------------------------------------------------------------------------
r9241 | rmanfredi | 2005-08-16 17:42:46 -0400 (Tue, 16 Aug 2005) | 2 lines

Updated databases.

------------------------------------------------------------------------
r9240 | rmanfredi | 2005-08-16 17:37:40 -0400 (Tue, 16 Aug 2005) | 2 lines

Version of 2005-08-16.

------------------------------------------------------------------------
r9239 | rmanfredi | 2005-08-16 17:15:47 -0400 (Tue, 16 Aug 2005) | 2 lines

Ooops.  Server can be NULL in get_server().

------------------------------------------------------------------------
r9238 | cbiere | 2005-08-16 17:13:09 -0400 (Tue, 16 Aug 2005) | 4 lines

search_gui_free_alt_locs():
search_gui_create_record():
	Fixed warning "comparison between signed and unsigned".

------------------------------------------------------------------------
r9237 | rmanfredi | 2005-08-16 17:10:49 -0400 (Tue, 16 Aug 2005) | 2 lines

Make sure get_server() never returns a server marked for delayed removal.

------------------------------------------------------------------------
r9236 | rmanfredi | 2005-08-16 16:14:30 -0400 (Tue, 16 Aug 2005) | 2 lines

Fixed possible source of corruption for server addresses.

------------------------------------------------------------------------
r9235 | cbiere | 2005-08-16 15:29:15 -0400 (Tue, 16 Aug 2005) | 3 lines

build_pong_msg():
	Add GGEP "GTKG.IPV6" if appropriate.

------------------------------------------------------------------------
r9234 | cbiere | 2005-08-16 13:46:45 -0400 (Tue, 16 Aug 2005) | 2 lines

Fixed missing ".addr" in assertions.

------------------------------------------------------------------------
r9233 | cbiere | 2005-08-16 13:11:26 -0400 (Tue, 16 Aug 2005) | 2 lines

Added some assertions to check whether the alt-locs are corrupted.

------------------------------------------------------------------------
r9232 | rmanfredi | 2005-08-16 08:44:25 -0400 (Tue, 16 Aug 2005) | 5 lines

Apparently, IPv6 support can cause some IP addresses to be dumped as <none>:0.
Download retrieval choked on that, so made retrieval fault tolerant: bad IP
cause download to be created with PUSH -- it'll be discarded if no route.
Added some server struct magic checking assertion to catch stale usage.

------------------------------------------------------------------------
r9231 | rmanfredi | 2005-08-16 08:42:13 -0400 (Tue, 16 Aug 2005) | 2 lines

Make magic number an enum for debugging purposes.

------------------------------------------------------------------------
r9230 | rmanfredi | 2005-08-16 08:41:32 -0400 (Tue, 16 Aug 2005) | 2 lines

Added magic number for server structs.

------------------------------------------------------------------------
r9229 | cbiere | 2005-08-16 02:46:56 -0400 (Tue, 16 Aug 2005) | 2 lines

Got rid of inet_aton(); use string_to_ip_strict() instead.

------------------------------------------------------------------------
r9228 | cbiere | 2005-08-16 02:34:51 -0400 (Tue, 16 Aug 2005) | 9 lines

inet_aton():
	Got rid of this; use string_to_ip_strict() instead everywhere.
string_to_ip_port():
string_to_ip():
	Use skip_ascii_spaces() and string_to_ip_strict().
is_private_addr():
	Fixed recently added bug which would cause the IPv4 to be in
	host instead of network byte order

------------------------------------------------------------------------
r9227 | cbiere | 2005-08-16 02:32:35 -0400 (Tue, 16 Aug 2005) | 5 lines

node_crawl_fill():
	Fixed recently added bug which would cause the IPv4 to be in
	host instead of network byte order.
	Skip non-IPv4-compatible addresses.

------------------------------------------------------------------------
r9226 | cbiere | 2005-08-16 02:30:52 -0400 (Tue, 16 Aug 2005) | 4 lines

free_server():
	Assign the value of ipkey to a variable of the proper type so that
	we don't need the same cast twice.

------------------------------------------------------------------------
r9225 | cbiere | 2005-08-16 01:39:38 -0400 (Tue, 16 Aug 2005) | 2 lines

Added host_addr_cmp() for sorting addresses.

------------------------------------------------------------------------
r9224 | cbiere | 2005-08-16 01:01:31 -0400 (Tue, 16 Aug 2005) | 3 lines

guc_download_new():
	Pass connection flags to guc_download_new().

------------------------------------------------------------------------
r9223 | cbiere | 2005-08-16 00:54:47 -0400 (Tue, 16 Aug 2005) | 3 lines

host_addr_initialized():
	Added missing return statement.

------------------------------------------------------------------------
r9222 | cbiere | 2005-08-16 00:47:09 -0400 (Tue, 16 Aug 2005) | 3 lines

download_new_uri():
	Added "flags" parameter which is propagated to socket_connect_*().

------------------------------------------------------------------------
r9221 | cbiere | 2005-08-16 00:41:02 -0400 (Tue, 16 Aug 2005) | 6 lines

upload_send_giv():
	Added parameter "flags" which is propagated to socket_connect().
handle_push_request():
	Scan the PUSH packet for GGEP extensions and pick up "GTKG.TLS"
	as well as "GTKG.IPV6".

------------------------------------------------------------------------
r9220 | cbiere | 2005-08-16 00:20:26 -0400 (Tue, 16 Aug 2005) | 7 lines

build_push():
        Generalized so that it can be used by downloads.c too.
        Add GGEP "GTKG.IPV6" if the local address is not IPv4-compatible.
        Add GGEP "GTKG.TLS" if TLS support is enabled.
        Fixed recently added bug which caused the IP address to be in
                host instead of network byte order.

------------------------------------------------------------------------
r9219 | cbiere | 2005-08-16 00:15:22 -0400 (Tue, 16 Aug 2005) | 4 lines

struct ggep_stream:
	Use an enum type for "magic" instead of guint32 because that's
	much more comfortable in a debugger.

------------------------------------------------------------------------
r9218 | cbiere | 2005-08-16 00:13:04 -0400 (Tue, 16 Aug 2005) | 9 lines

Use connection flags when creating downloads so that TLS supported can be
	propagated down to socket_connect_*().
send_push_request():
	Merged this build_push() with the one in pproxy.c which has now
	TLS and IPv6 support.
download_get_hostname():
	Show "(E)" after the host if the download can/does use TLS
	encryption.

------------------------------------------------------------------------
r9217 | cbiere | 2005-08-16 00:07:47 -0400 (Tue, 16 Aug 2005) | 3 lines

Pass special connection flags when creating downloads so that for example
	TLS can be enabled if supported.

------------------------------------------------------------------------
r9216 | cbiere | 2005-08-16 00:02:56 -0400 (Tue, 16 Aug 2005) | 3 lines

uploads_gui_shutdown():
	Removed unnecessary line break.

------------------------------------------------------------------------
r9215 | cbiere | 2005-08-16 00:01:20 -0400 (Tue, 16 Aug 2005) | 5 lines

host_addr_can_convert():
	Use host_addr_matches(); it's easier to grasp.
	Don't convert ::0.x.x.x to an IPv4 address, the upper 8 bit
		must be non-zero in IPv4-compatible addresses.

------------------------------------------------------------------------
r9214 | cbiere | 2005-08-15 23:57:11 -0400 (Mon, 15 Aug 2005) | 3 lines

struct host_addr:
	Changed order so that ipv6 can be properly statically initialized.

------------------------------------------------------------------------
r9213 | rmanfredi | 2005-08-15 18:56:16 -0400 (Mon, 15 Aug 2005) | 3 lines

Maintenance issue: try to be exhaustive in host_addr_initialized() in case
we add more types: we want to be sure we revisit that routine.

------------------------------------------------------------------------
r9212 | rmanfredi | 2005-08-15 18:48:17 -0400 (Mon, 15 Aug 2005) | 3 lines

Figured "browsable" would be a more acceptable forgery than "browseable"
when one considers "writable" exists but "writeable" does not.

------------------------------------------------------------------------
r9211 | rmanfredi | 2005-08-15 18:45:46 -0400 (Mon, 15 Aug 2005) | 2 lines

Fixed some unsigned / signed mixup.

------------------------------------------------------------------------
r9210 | rmanfredi | 2005-08-15 18:34:12 -0400 (Mon, 15 Aug 2005) | 2 lines

Fixed cut-n-paste error: host_addr_initialized() returns a boolean.

------------------------------------------------------------------------
r9209 | rmanfredi | 2005-08-15 17:01:19 -0400 (Mon, 15 Aug 2005) | 3 lines

Replaced some is_host_addr() tests with new host_addr_initialized() since
that is what I originally wanted, but misread the is_host_addr() code.

------------------------------------------------------------------------
r9208 | rmanfredi | 2005-08-15 16:59:23 -0400 (Mon, 15 Aug 2005) | 2 lines

Added host_addr_initialized() predicate.

------------------------------------------------------------------------
r9207 | cbiere | 2005-08-15 16:39:52 -0400 (Mon, 15 Aug 2005) | 3 lines

host_addr_matches():
	Fixed inverted logic.

------------------------------------------------------------------------
r9206 | cbiere | 2005-08-15 16:27:03 -0400 (Mon, 15 Aug 2005) | 2 lines

Added crab2.dyndns.org as bootstrap UHC.

------------------------------------------------------------------------
r9205 | cbiere | 2005-08-15 12:35:15 -0400 (Mon, 15 Aug 2005) | 2 lines

Added missing closing double-quote.

------------------------------------------------------------------------
r9204 | cbiere | 2005-08-15 11:33:12 -0400 (Mon, 15 Aug 2005) | 3 lines

prepare_browsing():
	Even better calculation of the buffer size.

------------------------------------------------------------------------
r9203 | rmanfredi | 2005-08-15 09:09:15 -0400 (Mon, 15 Aug 2005) | 2 lines

Added some assertions.

------------------------------------------------------------------------
r9202 | rmanfredi | 2005-08-15 09:08:51 -0400 (Mon, 15 Aug 2005) | 2 lines

Have uploads and nodes advertise the "browse/1.0" feature.

------------------------------------------------------------------------
r9201 | rmanfredi | 2005-08-15 09:07:51 -0400 (Mon, 15 Aug 2005) | 2 lines

Reworked leading function comment.

------------------------------------------------------------------------
r9200 | rmanfredi | 2005-08-15 06:34:55 -0400 (Mon, 15 Aug 2005) | 3 lines

Allow the TX deflate layer to have its buffer size / flush / nagle params
configurable externally.

------------------------------------------------------------------------
r9199 | rmanfredi | 2005-08-15 06:33:15 -0400 (Mon, 15 Aug 2005) | 2 lines

Allow buffer for the Location: line to be large enough.

------------------------------------------------------------------------
r9198 | rmanfredi | 2005-08-15 05:05:59 -0400 (Mon, 15 Aug 2005) | 3 lines

No need to keep the upload connection open when redirecting a BH request.
Also show redirection in the GUI...

------------------------------------------------------------------------
r9197 | cbiere | 2005-08-15 04:58:36 -0400 (Mon, 15 Aug 2005) | 5 lines

browse_host_read_html():
	Jump to BH_STATE_REBUILDING if the library is suddenly rebuild
	while we generate the HTML document. Add an informational message
	to indicate that the transaction was interrupted.

------------------------------------------------------------------------
r9196 | cbiere | 2005-08-15 04:23:23 -0400 (Mon, 15 Aug 2005) | 6 lines

struct browse_host_ctx:
	Renamed d_buf to w_buf to emphasize that it's walloc()ed.
	Added w_buf_size which holds the current size of w_buf (if non-NULL).
browse_host_read_html():
	Use w_concat_strings() instead of g_strdup_printf() and g_strconcat().

------------------------------------------------------------------------
r9195 | cbiere | 2005-08-15 04:20:31 -0400 (Mon, 15 Aug 2005) | 2 lines

Added w_concat_strings() as alternate for g_strconcat().

------------------------------------------------------------------------
r9194 | rmanfredi | 2005-08-15 04:09:19 -0400 (Mon, 15 Aug 2005) | 4 lines

If they advertise a host name in query hits, redirect an HTML browsing
to the qualified host name if it was directed to the IP address, so that
the links shown there have a longer lifetime.

------------------------------------------------------------------------
r9193 | cbiere | 2005-08-15 03:00:35 -0400 (Mon, 15 Aug 2005) | 4 lines

send_upload_error_v():
	Send the real file index instead of "0" so that duplicate
	filenames don't cause clashes.

------------------------------------------------------------------------
r9192 | rmanfredi | 2005-08-15 02:59:56 -0400 (Mon, 15 Aug 2005) | 2 lines

Renamed "browse host" indication as "browseable".

------------------------------------------------------------------------
r9191 | rmanfredi | 2005-08-14 19:28:31 -0400 (Sun, 14 Aug 2005) | 2 lines

Show GTKG's version, amount of files and total size shared in HTML browsing.

------------------------------------------------------------------------
r9188 | rmanfredi | 2005-08-14 16:33:51 -0400 (Sun, 14 Aug 2005) | 2 lines

Version of 2005-08-14.

------------------------------------------------------------------------
r9187 | rmanfredi | 2005-08-14 16:31:42 -0400 (Sun, 14 Aug 2005) | 3 lines

Make sure we fire the "upload_removed" event with a NULL reason when
`no_reason' is given as the reason for removal.

------------------------------------------------------------------------
r9186 | rmanfredi | 2005-08-14 15:41:50 -0400 (Sun, 14 Aug 2005) | 2 lines

Added size of shared files within brackets in HTML browse-host output.

------------------------------------------------------------------------
r9185 | rmanfredi | 2005-08-14 15:41:30 -0400 (Sun, 14 Aug 2005) | 2 lines

Added short_html_size().

------------------------------------------------------------------------
r9184 | rmanfredi | 2005-08-14 12:41:25 -0400 (Sun, 14 Aug 2005) | 2 lines

Was using _W_ flags instead of _F_ when asserting on gs->flags.

------------------------------------------------------------------------
r9183 | rmanfredi | 2005-08-14 12:20:34 -0400 (Sun, 14 Aug 2005) | 2 lines

Avoid braces with single-statement if().

------------------------------------------------------------------------
r9182 | rmanfredi | 2005-08-14 12:14:33 -0400 (Sun, 14 Aug 2005) | 2 lines

Added some sanity assertions.

------------------------------------------------------------------------
r9181 | rmanfredi | 2005-08-14 12:01:44 -0400 (Sun, 14 Aug 2005) | 2 lines

Added post-condition to cobs_stream_init().

------------------------------------------------------------------------
r9180 | rmanfredi | 2005-08-14 11:56:34 -0400 (Sun, 14 Aug 2005) | 2 lines

Added assertions about the COBS stream being valid.

------------------------------------------------------------------------
r9179 | cbiere | 2005-08-14 11:54:57 -0400 (Sun, 14 Aug 2005) | 2 lines

Changed TLS flag to 'E' for *E*ncrypted.

------------------------------------------------------------------------
r9178 | cbiere | 2005-08-14 09:38:59 -0400 (Sun, 14 Aug 2005) | 2 lines

Added gwc2.908middle.us as bootstrap UHC.

------------------------------------------------------------------------
r9177 | cbiere | 2005-08-14 09:37:09 -0400 (Sun, 14 Aug 2005) | 2 lines

Added gwc.mine.nu and gwc.jooz.net as bootstrap UHCs.

------------------------------------------------------------------------
r9176 | cbiere | 2005-08-14 09:09:40 -0400 (Sun, 14 Aug 2005) | 2 lines

Renamed all ip4 fragments to ipv4 and the analogue for ip6.

------------------------------------------------------------------------
r9175 | rmanfredi | 2005-08-14 08:45:51 -0400 (Sun, 14 Aug 2005) | 2 lines

Regenerated with updated Tr.U.

------------------------------------------------------------------------
r9174 | rmanfredi | 2005-08-14 08:34:36 -0400 (Sun, 14 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9173 | rmanfredi | 2005-08-14 08:33:32 -0400 (Sun, 14 Aug 2005) | 5 lines

Must use Setvar since we're setting a d_xxx variable, to enable warnings
on unexpected changes between runs.
Added support for Debian (libgnutls-config) and lowered version requirement
to 1.0.16 (the version included in Debian unstable, currently).

------------------------------------------------------------------------
r9172 | rmanfredi | 2005-08-14 08:31:49 -0400 (Sun, 14 Aug 2005) | 2 lines

Added comments for flags.

------------------------------------------------------------------------
r9171 | cbiere | 2005-08-14 08:30:34 -0400 (Sun, 14 Aug 2005) | 3 lines

flush_match():
	Fixed for IPv4-only compiling.

------------------------------------------------------------------------
r9170 | cbiere | 2005-08-14 08:26:06 -0400 (Sun, 14 Aug 2005) | 2 lines

Added GNUTLS_CFLAGS.

------------------------------------------------------------------------
r9169 | cbiere | 2005-08-14 08:19:58 -0400 (Sun, 14 Aug 2005) | 3 lines

ggept_gtkg_ipv6_extract():
	Fixed properly now.

------------------------------------------------------------------------
r9168 | cbiere | 2005-08-14 08:15:52 -0400 (Sun, 14 Aug 2005) | 3 lines

Renamed CONNECTION_F_MANUALLY to CONNECT_F_FORCE.
Renamed CONNECTION_F_TLS to CONNECT_F_TLS.

------------------------------------------------------------------------
r9167 | cbiere | 2005-08-14 08:14:13 -0400 (Sun, 14 Aug 2005) | 2 lines

Wrapped overlong lines.

------------------------------------------------------------------------
r9166 | cbiere | 2005-08-14 08:13:48 -0400 (Sun, 14 Aug 2005) | 3 lines

ggept_gtkg_ipv6_extract():
	Fixed IPv4-only compiling.

------------------------------------------------------------------------
r9165 | cbiere | 2005-08-14 08:02:44 -0400 (Sun, 14 Aug 2005) | 2 lines

Pass CONNECT_F_FORCE to guc_node_add().

------------------------------------------------------------------------
r9164 | cbiere | 2005-08-14 08:01:16 -0400 (Sun, 14 Aug 2005) | 2 lines

Include if/core/sockets.h for CONNECT_F_*

------------------------------------------------------------------------
r9163 | rmanfredi | 2005-08-14 07:57:34 -0400 (Sun, 14 Aug 2005) | 2 lines

Renamed CONNECTION_F as CONNECT_F.  Changed MANUALLY to FORCE.

------------------------------------------------------------------------
r9162 | cbiere | 2005-08-14 07:05:54 -0400 (Sun, 14 Aug 2005) | 3 lines

node_add_socket():
	Removed g_message() which was only meant to be used temporarily.

------------------------------------------------------------------------
r9161 | cbiere | 2005-08-14 07:04:39 -0400 (Sun, 14 Aug 2005) | 4 lines

on_popup_downloads_connect_activate():
on_popup_queue_connect_activate():
	Set the connection flag CONNECTION_F_MANUALLY.

------------------------------------------------------------------------
r9160 | cbiere | 2005-08-14 06:59:57 -0400 (Sun, 14 Aug 2005) | 10 lines

add_node_helper():
	The second parameter points to a walloc()ed struct add_node_context
	now.
nodes_gui_common_connect_by_name():
	If the address is prefixed with "tls:" we request TLS
	encryption for the connection.
	Set the flag CONNECTION_F_MANUALLY so that this connection is
	preferred, connection limits don't get in the way and checks
	for hostiles or "bad hosts" are overridden too.

------------------------------------------------------------------------
r9159 | cbiere | 2005-08-14 06:56:27 -0400 (Sun, 14 Aug 2005) | 4 lines

guc_node_add(), node_add(), socket_connect(), socket_connect_by_name(),
	have now an additional parameter flags which can be used to
	request TLS encryption or indicate a manual connect request.

------------------------------------------------------------------------
r9158 | cbiere | 2005-08-14 06:51:00 -0400 (Sun, 14 Aug 2005) | 2 lines

Added connection flags.

------------------------------------------------------------------------
r9157 | rmanfredi | 2005-08-14 06:28:03 -0400 (Sun, 14 Aug 2005) | 2 lines

Forgot parenthesis.

------------------------------------------------------------------------
r9156 | rmanfredi | 2005-08-14 06:21:41 -0400 (Sun, 14 Aug 2005) | 2 lines

Assert that if tx_write() does not return -1, then there's no TX error.

------------------------------------------------------------------------
r9155 | rmanfredi | 2005-08-14 06:17:17 -0400 (Sun, 14 Aug 2005) | 3 lines

Must not create more output during tx_flush() if we're in flow-control,
meaning we no longer have any room to accept more compressed data!

------------------------------------------------------------------------
r9154 | daichik | 2005-08-14 02:38:19 -0400 (Sun, 14 Aug 2005) | 4 lines

Modified initial comment strings.
Added version number at 'Project-Id-Version',
    and fall back address at 'Language-Team'.

------------------------------------------------------------------------
r9152 | cbiere | 2005-08-14 02:11:32 -0400 (Sun, 14 Aug 2005) | 4 lines

get_results_set():
	Pick up a GGEP "GTKG.IPV6" if present and update the address for
	the results set.

------------------------------------------------------------------------
r9151 | cbiere | 2005-08-14 02:08:15 -0400 (Sun, 14 Aug 2005) | 4 lines

update_address_information():
	Don't check whether old and new address are equal. This would
	suppress a change from 192.0.2.1 to ::ffff:192.0.2.1 or vice-versa.

------------------------------------------------------------------------
r9150 | cbiere | 2005-08-14 02:02:56 -0400 (Sun, 14 Aug 2005) | 6 lines

Added ext_ggep_name() so that we don't need to use string literals as
	GGEP IDs.
rw_is_sorted():
	Also check that the enums are in order.
	Check each entry of ``ggeptable'' with ext_ggep_name().

------------------------------------------------------------------------
r9149 | cbiere | 2005-08-14 01:58:12 -0400 (Sun, 14 Aug 2005) | 4 lines

send_push_request():
	Convert the IP to big-endian again.
	Make sure the IP is zero if the IPv6 address is not IPv4 compatible.

------------------------------------------------------------------------
r9148 | cbiere | 2005-08-14 01:53:53 -0400 (Sun, 14 Aug 2005) | 6 lines

Use GGEP_NAME() and GGEP_GTKG_NAME() instead of a string literal to catch
	typos or invalid GGEP IDs at compile-time rather than run-time.
flush_match():
	Add GGEP "GTKG.IPV6" if the listen address is a "true" IPv6
	address.

------------------------------------------------------------------------
r9147 | cbiere | 2005-08-14 01:48:10 -0400 (Sun, 14 Aug 2005) | 5 lines

Added ext_ggep_name() which should be passed to ggep_stream_begin/pack()
	instead of a string literal.
Added GGEP_NAME() and GGEP_GTKG_NAME() which are supposed to be passed
	to ext_ggep_name().

------------------------------------------------------------------------
r9146 | cbiere | 2005-08-14 01:41:09 -0400 (Sun, 14 Aug 2005) | 2 lines

Define NET_TYPE_IP6 rather as 6 than 16.

------------------------------------------------------------------------
r9145 | cbiere | 2005-08-14 01:37:34 -0400 (Sun, 14 Aug 2005) | 5 lines

host_addr_hash():
host_addr_equal():
	Since we consider IPv6 mapped IPv4 addresses equal to IPv4
	addresses, these functions must mirror this logic.

------------------------------------------------------------------------
r9144 | cbiere | 2005-08-13 22:42:02 -0400 (Sat, 13 Aug 2005) | 2 lines

Wrapped overlong line.

------------------------------------------------------------------------
r9143 | cbiere | 2005-08-13 22:39:05 -0400 (Sat, 13 Aug 2005) | 4 lines

listen_addr():
	Parse the property string only when the value changes and return
	the cached result otherwise.

------------------------------------------------------------------------
r9142 | cbiere | 2005-08-13 22:27:04 -0400 (Sat, 13 Aug 2005) | 2 lines

Added host_addr_can_convert().

------------------------------------------------------------------------
r9141 | cbiere | 2005-08-13 22:25:12 -0400 (Sat, 13 Aug 2005) | 2 lines

Fixed comment for "GTKG.IPV6".

------------------------------------------------------------------------
r9140 | cbiere | 2005-08-13 22:22:40 -0400 (Sat, 13 Aug 2005) | 2 lines

Added ggept_gtkg_ipv6_extract().

------------------------------------------------------------------------
r9139 | cbiere | 2005-08-13 22:20:31 -0400 (Sat, 13 Aug 2005) | 5 lines

Added const-qualifiers.
ggep_stream_pack():
	Changed type of ggep_stream_pack() to the more comfortable
	gconstpointer.

------------------------------------------------------------------------
r9138 | cbiere | 2005-08-13 22:16:26 -0400 (Sat, 13 Aug 2005) | 2 lines

Added GGEP "GTKG.IPV6".

------------------------------------------------------------------------
r9137 | cbiere | 2005-08-13 20:29:21 -0400 (Sat, 13 Aug 2005) | 2 lines

Block the whole /24.

------------------------------------------------------------------------
r9136 | cbiere | 2005-08-13 18:39:53 -0400 (Sat, 13 Aug 2005) | 2 lines

Added two spammers.

------------------------------------------------------------------------
r9135 | graaff | 2005-08-13 16:40:51 -0400 (Sat, 13 Aug 2005) | 2 lines

metalint is your friend.

------------------------------------------------------------------------
r9134 | cbiere | 2005-08-13 16:10:51 -0400 (Sat, 13 Aug 2005) | 2 lines

Changed "GTKG_TLS" to the more appropriate "GTKG.TLS".

------------------------------------------------------------------------
r9133 | cbiere | 2005-08-13 15:16:52 -0400 (Sat, 13 Aug 2005) | 3 lines

Use GNUTLS_CFLAGS too.
Fixed typo: XLM2 -> XML2.

------------------------------------------------------------------------
r9132 | cbiere | 2005-08-13 15:13:26 -0400 (Sat, 13 Aug 2005) | 3 lines

DBUS_CFLAGS and GNUTLS_CFLAGS must be used too.
Fixed typo: XLM2_CFLAGS -> XML2_CFLAGS.

------------------------------------------------------------------------
r9131 | cbiere | 2005-08-13 12:12:52 -0400 (Sat, 13 Aug 2005) | 3 lines

Don't use "sa_len" as variable name because on SGI IRIX this is the name
	of a macro.

------------------------------------------------------------------------
r9130 | graaff | 2005-08-13 04:54:05 -0400 (Sat, 13 Aug 2005) | 2 lines

Bump date and update ChangeLog.

------------------------------------------------------------------------
r9129 | graaff | 2005-08-13 04:31:09 -0400 (Sat, 13 Aug 2005) | 2 lines

Update IPv6 check and add GNU TLS check.

------------------------------------------------------------------------
r9128 | graaff | 2005-08-13 04:26:04 -0400 (Sat, 13 Aug 2005) | 2 lines

Add new gnutlsconfig.U file.

------------------------------------------------------------------------
r9127 | graaff | 2005-08-13 04:24:42 -0400 (Sat, 13 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r9126 | graaff | 2005-08-13 04:23:37 -0400 (Sat, 13 Aug 2005) | 2 lines

Add LDFLAGS for gnutls.

------------------------------------------------------------------------
r9125 | graaff | 2005-08-13 04:22:46 -0400 (Sat, 13 Aug 2005) | 2 lines

Use the symbol that is defined by Configure.

------------------------------------------------------------------------
r9124 | cbiere | 2005-08-12 23:14:06 -0400 (Fri, 12 Aug 2005) | 12 lines

proxy_connect_helper():
	Clear ``*in_progress'' in any case.
Renamed send_socks and recv_socks to send_socks4, recv_socks4 respectively.
Use tls_debug.
send_socks4():
	Don't allocate an extra buffer, just use s->buffer.
	Define the struct in a way that prevents padding.
recv_socks4():
	Define the struct in a way that prevents padding.
connect_socksv5():
	Added IPv6 support for SOCKS5.

------------------------------------------------------------------------
r9123 | cbiere | 2005-08-12 23:06:23 -0400 (Fri, 12 Aug 2005) | 2 lines

Removed now unused function is_string_ip().

------------------------------------------------------------------------
r9122 | cbiere | 2005-08-12 22:31:48 -0400 (Fri, 12 Aug 2005) | 3 lines

Check and show whether Browse Host or TLS support was indicated in the
	search result set.

------------------------------------------------------------------------
r9121 | cbiere | 2005-08-12 22:29:01 -0400 (Fri, 12 Aug 2005) | 3 lines

Added flags ST_BH to indicate browse host support and ST_TLS for TLS support.
Define the flags using a shifted 1 because it's harder to get wrong.

------------------------------------------------------------------------
r9120 | cbiere | 2005-08-12 22:24:44 -0400 (Fri, 12 Aug 2005) | 3 lines

flush_match():
	Add GGEP GTKG_TLS if TLS support is enabled.

------------------------------------------------------------------------
r9119 | cbiere | 2005-08-12 22:22:26 -0400 (Fri, 12 Aug 2005) | 2 lines

Added GGEP "GTKG_TLS".

------------------------------------------------------------------------
r9118 | cbiere | 2005-08-12 22:19:09 -0400 (Fri, 12 Aug 2005) | 4 lines

download_store():
	Added const-qualifier.
	Removed unnecessary cast.

------------------------------------------------------------------------
r9117 | cbiere | 2005-08-12 22:15:54 -0400 (Fri, 12 Aug 2005) | 2 lines

Added property "tls_debug".

------------------------------------------------------------------------
r9116 | cbiere | 2005-08-12 22:14:12 -0400 (Fri, 12 Aug 2005) | 3 lines

header_append():
	Use skip_ascii_spaces().

------------------------------------------------------------------------
r9115 | cbiere | 2005-08-12 22:13:07 -0400 (Fri, 12 Aug 2005) | 3 lines

on_entry_config_force_ip_changed():
	Check for IPv4 and IPv6 addresses.

------------------------------------------------------------------------
r9114 | cbiere | 2005-08-12 22:03:33 -0400 (Fri, 12 Aug 2005) | 2 lines

There's no such thing as "dbus+".

------------------------------------------------------------------------
r9113 | cbiere | 2005-08-12 20:07:30 -0400 (Fri, 12 Aug 2005) | 3 lines

dist module to check for availability of GNU TLS and the required
	compile flags.

------------------------------------------------------------------------
r9112 | cbiere | 2005-08-12 19:34:26 -0400 (Fri, 12 Aug 2005) | 2 lines

Better test for IPv6 support.

------------------------------------------------------------------------
r9111 | cbiere | 2005-08-12 17:53:49 -0400 (Fri, 12 Aug 2005) | 3 lines

Pass NULL to the callback function instead of a zero address, if hostname
	resolution failed.

------------------------------------------------------------------------
r9110 | cbiere | 2005-08-12 01:00:12 -0400 (Fri, 12 Aug 2005) | 2 lines

Changed force_local_addr/local_addr back to force_local_ip/local_ip.

------------------------------------------------------------------------
r9109 | cbiere | 2005-08-12 00:57:50 -0400 (Fri, 12 Aug 2005) | 4 lines

Removed PROP_LOCAL_ADDR and PROP_FORCE_LOCAL_ADDR again.
Changed the type of PROP_LOCAL_IP to "string" so that it can hold an IPv6
	address as well.

------------------------------------------------------------------------
r9108 | cbiere | 2005-08-12 00:52:37 -0400 (Fri, 12 Aug 2005) | 2 lines

Use the ``aging'' stuff in an IPv6 compatible way.

------------------------------------------------------------------------
r9107 | cbiere | 2005-08-12 00:49:42 -0400 (Fri, 12 Aug 2005) | 3 lines

Added variable ``no_reason'' to get rid of compiler warnings regarding
	either a NULL or zero-length format string.

------------------------------------------------------------------------
r9106 | cbiere | 2005-08-12 00:47:33 -0400 (Fri, 12 Aug 2005) | 2 lines

Minor style changes.

------------------------------------------------------------------------
r9105 | cbiere | 2005-08-12 00:47:04 -0400 (Fri, 12 Aug 2005) | 2 lines

Use host_addr_hash_func() and host_addr_eq_func().

------------------------------------------------------------------------
r9104 | cbiere | 2005-08-12 00:45:14 -0400 (Fri, 12 Aug 2005) | 2 lines

Added host_addr_hash_func(), host_addr_eq_func(), wfree_host_addr().

------------------------------------------------------------------------
r9103 | cbiere | 2005-08-12 00:43:49 -0400 (Fri, 12 Aug 2005) | 4 lines

Style fixes.
Changed gint to size_t.
Added wcopy().

------------------------------------------------------------------------
r9102 | cbiere | 2005-08-12 00:34:09 -0400 (Fri, 12 Aug 2005) | 2 lines

Added Wu Xiaoguang to list of translators.

------------------------------------------------------------------------
r9101 | cbiere | 2005-08-11 20:58:19 -0400 (Thu, 11 Aug 2005) | 3 lines

addr_is_valid():
	Check IPv6 addresses too.

------------------------------------------------------------------------
r9100 | cbiere | 2005-08-11 20:42:06 -0400 (Thu, 11 Aug 2005) | 3 lines

is_local_addr():
	Corrected IPv6 prefixes.

------------------------------------------------------------------------
r9099 | cbiere | 2005-08-11 20:20:50 -0400 (Thu, 11 Aug 2005) | 3 lines

is_local_addr():
	Better support for IPv6; check for link-local and site-local addresses.

------------------------------------------------------------------------
r9097 | cbiere | 2005-08-11 16:29:25 -0400 (Thu, 11 Aug 2005) | 3 lines

Use string_to_host_or_addr() so that URLs with IPv6 addresses are properly
	parsed.

------------------------------------------------------------------------
r9096 | cbiere | 2005-08-11 03:15:15 -0400 (Thu, 11 Aug 2005) | 12 lines

Added *_BUFLEN macros to determine the necessary string buffer size of
	common items.
Added host_addr_matches() to compare two host addresses using a
	CIDR prefix length.
Added netmask_to_cidr(), string_to_host_or_addr(),
string_to_host_addr():
	Added ``endptr'' parameter so that one can check what follows the
	parsed address.
host_addr_port_to_string_buf():
	Just propagate the result of concat_strings() instead of
	calculating it manually.

------------------------------------------------------------------------
r9095 | cbiere | 2005-08-11 03:08:03 -0400 (Thu, 11 Aug 2005) | 8 lines

add_node_helper():
	Corrected for new callback prototype.
nodes_gui_common_connect_by_name():
	Better parsing of the input line. It's also possible to give
	a list of comma separated hosts to connect to now. IPv6 addresses
	can be entered without surrounding brackets if the default Gnutella
	port should be used.

------------------------------------------------------------------------
r9094 | cbiere | 2005-08-11 03:03:20 -0400 (Thu, 11 Aug 2005) | 4 lines

struct whitelist:
	Changed "guint32 ip" to "host_addr_t addr" for IPv6 support.
	Changed netmask to bits as CIDR to save space especially for IPv6.

------------------------------------------------------------------------
r9093 | cbiere | 2005-08-11 03:00:52 -0400 (Thu, 11 Aug 2005) | 3 lines

ntp_probe():
	Send the probe to localhost rather than "127.0.0.1".

------------------------------------------------------------------------
r9092 | cbiere | 2005-08-11 02:58:41 -0400 (Thu, 11 Aug 2005) | 3 lines

Added ``endptr'' parameter to string_to_host_addr() so that one can check
	what follows the address.

------------------------------------------------------------------------
r9091 | cbiere | 2005-08-11 02:40:35 -0400 (Thu, 11 Aug 2005) | 4 lines

Changed prototype of the ADNS callback function because passing a struct
	to the callback seems to mess with the stack i.e., cause a bogus
	user_data parameter.

------------------------------------------------------------------------
r9090 | cbiere | 2005-08-11 02:36:51 -0400 (Thu, 11 Aug 2005) | 5 lines

Changed listen_addr() from macro to function.
network_protocol_changed():
	If PROP_NETWORK_PROTOCOL changed, change PROP_LISTEN_PORT to 0
	and back to the original value to get a new listening socket.

------------------------------------------------------------------------
r9089 | cbiere | 2005-08-11 02:33:23 -0400 (Thu, 11 Aug 2005) | 2 lines

Use netmask_to_cidr().

------------------------------------------------------------------------
r9088 | cbiere | 2005-08-11 02:32:14 -0400 (Thu, 11 Aug 2005) | 2 lines

Use UINT64_DEC_BUFLEN.

------------------------------------------------------------------------
r9087 | cbiere | 2005-08-10 18:39:18 -0400 (Wed, 10 Aug 2005) | 3 lines

Convert addresses to IPv4 and if that worked, check the resulting IPv4
	address.

------------------------------------------------------------------------
r9086 | cbiere | 2005-08-10 17:58:14 -0400 (Wed, 10 Aug 2005) | 4 lines

hostiles_check():
	Try to convert the IPv6 address to an IPv4 one and check the
	converted address.

------------------------------------------------------------------------
r9085 | cbiere | 2005-08-10 17:44:40 -0400 (Wed, 10 Aug 2005) | 7 lines

Minor style fixes.
Moved "mq_tcp_ops" to the top and added const-qualifier.
mq_tcp_service():
	Check for errors after tx_writev().
mq_tcp_putq():
	Check for errors after tx_write().

------------------------------------------------------------------------
r9084 | cbiere | 2005-08-10 16:12:53 -0400 (Wed, 10 Aug 2005) | 3 lines

host_addr_convert():
	Fixed conversion from IPv6 to IPv4.

------------------------------------------------------------------------
r9083 | cbiere | 2005-08-10 15:36:56 -0400 (Wed, 10 Aug 2005) | 4 lines

host_addr_equal():
	Try to convert one address and check whether they're equal if
	conversion succeeds.

------------------------------------------------------------------------
r9082 | graaff | 2005-08-10 15:29:21 -0400 (Wed, 10 Aug 2005) | 2 lines

Document new ipv6 configuration variable.

------------------------------------------------------------------------
r9081 | graaff | 2005-08-10 15:27:22 -0400 (Wed, 10 Aug 2005) | 2 lines

Ask whether IPv6 should be enabled if it is found to be working.

------------------------------------------------------------------------
r9080 | graaff | 2005-08-10 15:07:32 -0400 (Wed, 10 Aug 2005) | 2 lines

Use the right name for the ipv6 unit.

------------------------------------------------------------------------
r9079 | cbiere | 2005-08-10 14:56:46 -0400 (Wed, 10 Aug 2005) | 2 lines

Added Vitaliy Buyar to list of translators.

------------------------------------------------------------------------
r9078 | graaff | 2005-08-10 14:39:16 -0400 (Wed, 10 Aug 2005) | 2 lines

Include proper headers in IPv6 Configure check.

------------------------------------------------------------------------
r9077 | graaff | 2005-08-10 13:20:33 -0400 (Wed, 10 Aug 2005) | 2 lines

New metaconfig unit to check for IPv6 support.

------------------------------------------------------------------------
r9076 | graaff | 2005-08-10 13:17:18 -0400 (Wed, 10 Aug 2005) | 2 lines

Declare variable before using it.

------------------------------------------------------------------------
r9075 | cbiere | 2005-08-10 13:09:31 -0400 (Wed, 10 Aug 2005) | 3 lines

nodes_gui_common_connect_by_name():
	Make sure ``host'' is initialized.

------------------------------------------------------------------------
r9074 | cbiere | 2005-08-10 13:08:46 -0400 (Wed, 10 Aug 2005) | 2 lines

Fixed compilation for non-IPv6 environments.

------------------------------------------------------------------------
r9073 | graaff | 2005-08-10 13:06:02 -0400 (Wed, 10 Aug 2005) | 2 lines

Update dependencies to ensure proper order of checks in Configure.

------------------------------------------------------------------------
r9069 | cbiere | 2005-08-10 01:06:26 -0400 (Wed, 10 Aug 2005) | 2 lines

Don't use IP TOS on IPv6 sockets.

------------------------------------------------------------------------
r9068 | cbiere | 2005-08-10 00:53:11 -0400 (Wed, 10 Aug 2005) | 3 lines

adns_resolve():
	Replaced bogus call to name_to_host_addr() with string_to_host_addr().

------------------------------------------------------------------------
r9067 | cbiere | 2005-08-10 00:51:51 -0400 (Wed, 10 Aug 2005) | 3 lines

node_slow_timer():
	Corrected type of PROP_NODE_LAST_ULTRA_LEAF_SWITCH.

------------------------------------------------------------------------
r9065 | cbiere | 2005-08-10 00:44:12 -0400 (Wed, 10 Aug 2005) | 10 lines

Renamed all gchar_to_* and *_to_gchar functions to string_to_* respectively
	*_to_string.
Changed the return type of all *_to_string_buf() functions to size_t and
	return the would-be length instead of the destination buffer.
uint64_to_string_buf():
	Changed order of parameters to match the other *to_string_buf()
	functions and the logical order according to the function name.
	Return the would-be length instead of the destination buffer.
Added ip6_to_string_buf(), ip6_to_string(), parse_ip6_addr()

------------------------------------------------------------------------
r9064 | graaff | 2005-08-08 15:36:49 -0400 (Mon, 08 Aug 2005) | 2 lines

Makefile depends on LINGUAS file for inclusion of all languages.

------------------------------------------------------------------------
r9063 | cbiere | 2005-08-08 14:01:28 -0400 (Mon, 08 Aug 2005) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r9062 | cbiere | 2005-08-08 13:57:13 -0400 (Mon, 08 Aug 2005) | 3 lines

Simplified the plural rule to 2 forms because the 3rd case is seldomly used
	and one would have to copy the translation for all plurals.

------------------------------------------------------------------------
r9061 | cbiere | 2005-08-08 13:42:20 -0400 (Mon, 08 Aug 2005) | 3 lines

Copied translations for the 2nd plural form because these strings have
	no 2nd plural form.

------------------------------------------------------------------------
r9060 | cbiere | 2005-08-08 13:23:48 -0400 (Mon, 08 Aug 2005) | 2 lines

Added Ukrainian translation by Vitaliy Buyar.

------------------------------------------------------------------------
r9059 | cbiere | 2005-08-08 12:09:08 -0400 (Mon, 08 Aug 2005) | 2 lines

Added property network_protocol to switch between IPv4, IPv6 or both.

------------------------------------------------------------------------
r9058 | cbiere | 2005-08-07 18:55:26 -0400 (Sun, 07 Aug 2005) | 5 lines

socket_connect_by_name():
	Fixed used of host_addr_set_ip4().
socket_tcp_listen():
	Removed unnecessary debug stuff.

------------------------------------------------------------------------
r9057 | cbiere | 2005-08-07 18:54:28 -0400 (Sun, 07 Aug 2005) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r9056 | cbiere | 2005-08-07 18:53:52 -0400 (Sun, 07 Aug 2005) | 2 lines

Removed unnecessary debug stuff.

------------------------------------------------------------------------
r9055 | cbiere | 2005-08-07 18:53:04 -0400 (Sun, 07 Aug 2005) | 2 lines

Fixed macro host_addr_set_ip4().

------------------------------------------------------------------------
r9054 | cbiere | 2005-08-07 18:38:28 -0400 (Sun, 07 Aug 2005) | 3 lines

Prepared IPv6 support by replacing uses of "guint32" for IP address
	with "host_addr_t".

------------------------------------------------------------------------
r9053 | cbiere | 2005-08-07 18:32:24 -0400 (Sun, 07 Aug 2005) | 3 lines

Prepared IPv6 support by replacing uses of "guint32" for IP address
	with "host_addr_t".

------------------------------------------------------------------------
r9052 | graaff | 2005-08-07 13:43:59 -0400 (Sun, 07 Aug 2005) | 4 lines

Improve D-Bus integration: provide default for Configure and document
it, ask if D-Bus support should be included, and don't depend on glib
so that D-Bus can also be used in a glib 1.x build.

------------------------------------------------------------------------
r9051 | graaff | 2005-08-07 12:19:10 -0400 (Sun, 07 Aug 2005) | 3 lines

Deal with Safari not understanding deflate, and include more headers
in reply to HEAD request.

------------------------------------------------------------------------
r9050 | daichik | 2005-08-07 06:54:57 -0400 (Sun, 07 Aug 2005) | 2 lines

Updated timestamp not to cause unnecessary updating.

------------------------------------------------------------------------
r9049 | daichik | 2005-08-06 23:31:54 -0400 (Sat, 06 Aug 2005) | 2 lines

Fixed initial $Id again.

------------------------------------------------------------------------
r9048 | daichik | 2005-08-06 23:26:18 -0400 (Sat, 06 Aug 2005) | 4 lines

Updated with the latest POT file (2005-08-06).
Added initial $Id again to check not causing unnecessary
    PO file updating.

------------------------------------------------------------------------
r9047 | daichik | 2005-08-06 23:23:19 -0400 (Sat, 06 Aug 2005) | 2 lines

Updated with the latest codes (2005-08-06).

------------------------------------------------------------------------
r9045 | cbiere | 2005-08-06 22:49:10 -0400 (Sat, 06 Aug 2005) | 2 lines

Make sure this compiles with GLib 1.2 until Configure checks this properly.

------------------------------------------------------------------------
r9044 | cbiere | 2005-08-06 16:49:56 -0400 (Sat, 06 Aug 2005) | 3 lines

Added URL for ISO 639 language codes.
Mention ISO 3166 for country codes and modified URL.

------------------------------------------------------------------------
r9039 | rmanfredi | 2005-08-06 06:24:14 -0400 (Sat, 06 Aug 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r9038 | graaff | 2005-08-06 04:19:46 -0400 (Sat, 06 Aug 2005) | 3 lines

Regenerate property files to account for qrp_indexing_duration being a
guint32.

------------------------------------------------------------------------
r9037 | rmanfredi | 2005-08-06 03:44:15 -0400 (Sat, 06 Aug 2005) | 4 lines

Forgot to remove the freeing of n->alive_pings from node_remove_v() when
I added another one in node_real_remove(): it must happen after the removal
of the TX stack in any case.

------------------------------------------------------------------------
r9036 | rmanfredi | 2005-08-06 02:31:30 -0400 (Sat, 06 Aug 2005) | 3 lines

Must check for tx_has_error() after tx_flushq() since on write errors,
the node can be removed by the TX stack.

------------------------------------------------------------------------
r9035 | cbiere | 2005-08-05 09:02:19 -0400 (Fri, 05 Aug 2005) | 3 lines

prop_get_def():
	Added missing break-statement.

------------------------------------------------------------------------
r9034 | cbiere | 2005-08-05 09:00:57 -0400 (Fri, 05 Aug 2005) | 7 lines

Changed all properties that carry timestamps from guint32 to guint64.
Added PROP_LIBRARY_RESCAN_FINISHED.
Renamed PROP_LIBRARY_RESCAN_TIMESTAMP to PROP_LIBRARY_RESCAN_STARTED,
	PROP_LIBRARY_RESCAN_TIME to PROP_LIBRARY_RESCAN_DURATION,
	PROP_QRP_INDEXING_TIMESTAMP to PROP_QRP_INDEXING_STARTED,
	PROP_QRP_INDEXING_TIME to PROP_QRP_INDEXING_DURATION.

------------------------------------------------------------------------
r9033 | rmanfredi | 2005-08-05 08:54:28 -0400 (Fri, 05 Aug 2005) | 2 lines

Recent changes.

------------------------------------------------------------------------
r9032 | rmanfredi | 2005-08-05 08:43:04 -0400 (Fri, 05 Aug 2005) | 2 lines

Right-justify the progress column.

------------------------------------------------------------------------
r9031 | rmanfredi | 2005-08-05 08:21:24 -0400 (Fri, 05 Aug 2005) | 2 lines

Don't update GUI after failed write of browse-host output.

------------------------------------------------------------------------
r9030 | rmanfredi | 2005-08-05 06:46:29 -0400 (Fri, 05 Aug 2005) | 3 lines

Count amount of bytes transmitted during browse host requests.
Update the GUI each time we write something, and at the end of the request.

------------------------------------------------------------------------
r9029 | cbiere | 2005-08-05 05:01:24 -0400 (Fri, 05 Aug 2005) | 8 lines

parse_chunk():
	Delay the calculation of "data_remain" until the chunk-extension
	has been parsed so that a non-zero "data_remain" on entry clearly
	indicates a bug.
dechunk_data():
	Don't copy any chunk-data. Parse the chunk headers and forward
	all chunk-data to the upper layer.

------------------------------------------------------------------------
r9028 | rmanfredi | 2005-08-05 03:40:00 -0400 (Fri, 05 Aug 2005) | 2 lines

Added strategic comment for copy avoidance.

------------------------------------------------------------------------
r9027 | cbiere | 2005-08-05 03:36:31 -0400 (Fri, 05 Aug 2005) | 4 lines

dechunk_data():
	When in state CHUNK_STATE_DATA, forward the data to the next
	layer instead of copying it.

------------------------------------------------------------------------
r9026 | cbiere | 2005-08-05 02:26:20 -0400 (Fri, 05 Aug 2005) | 3 lines

upload_request():
	Put the value of Content-Disposition into quotes.

------------------------------------------------------------------------
r9025 | rmanfredi | 2005-08-05 02:22:59 -0400 (Fri, 05 Aug 2005) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r9024 | cbiere | 2005-08-04 23:18:34 -0400 (Thu, 04 Aug 2005) | 3 lines

upload_request():
	Don't check is_followup for Content-Disposition.

------------------------------------------------------------------------
r9023 | cbiere | 2005-08-04 23:08:44 -0400 (Thu, 04 Aug 2005) | 3 lines

html_escape():
	Use dst_size instead (end - d).

------------------------------------------------------------------------
r9022 | cbiere | 2005-08-04 23:02:38 -0400 (Thu, 04 Aug 2005) | 5 lines

Removed trailing whitespace.
upload_request():
	Send a Content-Disposition header to suggest a filename which is
	especially useful for "Save As..." dialogs.

------------------------------------------------------------------------
r9021 | cbiere | 2005-08-04 21:30:26 -0400 (Thu, 04 Aug 2005) | 5 lines

downloads_gui_init():
	Align the progress column to the right.
gui_update_download():
	Update the progress column in the ``right place''.

------------------------------------------------------------------------
r9020 | cbiere | 2005-08-04 21:21:24 -0400 (Thu, 04 Aug 2005) | 3 lines

browse_host_read_html():
	Use html_escape().

------------------------------------------------------------------------
r9019 | cbiere | 2005-08-04 21:20:13 -0400 (Thu, 04 Aug 2005) | 11 lines

send_upload_error_v():
	Send the HTML body only when the status code is 503.
	Indicate utf-8 charset.
	Send the escaped filename in the Refresh header so that the
	downloader can get a nicer filename (instead of N2R).
	Send proper HTML.
upload_request():
	Moved ``name'' into its own small scope for clarity.
	Handle the "If-Modified-Since" header for browse host requests.
	Send a "Last-Modified" header to allow caching of the response.

------------------------------------------------------------------------
r9018 | cbiere | 2005-08-04 21:02:11 -0400 (Thu, 04 Aug 2005) | 4 lines

html_escape():
	Use "&#39;" instead of "&apos;" because the latter is not defined
	for HTML 4.x.

------------------------------------------------------------------------
r9017 | cbiere | 2005-08-04 20:04:04 -0400 (Thu, 04 Aug 2005) | 2 lines

Added html_escape() for escaping characters reserved by HTML.

------------------------------------------------------------------------
r9016 | cbiere | 2005-08-04 18:40:55 -0400 (Thu, 04 Aug 2005) | 4 lines

Removed (void) as parameter from macros.
Fixed overlong line.
Added (void) for parameters to prevent compiler warnings.

------------------------------------------------------------------------
r9015 | graaff | 2005-08-04 18:27:43 -0400 (Thu, 04 Aug 2005) | 2 lines

Use macros instead of dummy functions.

------------------------------------------------------------------------
r9014 | rmanfredi | 2005-08-04 18:23:58 -0400 (Thu, 04 Aug 2005) | 3 lines

Send back HTML body on PARQ queuing only when the request is likely to
have been made by a web browser.

------------------------------------------------------------------------
r9013 | graaff | 2005-08-04 18:18:00 -0400 (Thu, 04 Aug 2005) | 2 lines

Add PeermodeChange dbus signal.

------------------------------------------------------------------------
r9012 | graaff | 2005-08-04 17:57:28 -0400 (Thu, 04 Aug 2005) | 2 lines

Removal of warnings and style changes.

------------------------------------------------------------------------
r9011 | cbiere | 2005-08-04 17:55:49 -0400 (Thu, 04 Aug 2005) | 5 lines

send_upload_error_v():
	If PARQ queued the download include a small message body in the
	HTTP reply, that allows browsers to get file without having
	to retry manually.

------------------------------------------------------------------------
r9010 | cbiere | 2005-08-04 17:53:31 -0400 (Thu, 04 Aug 2005) | 3 lines

Added HTTP_EXTRA_BODY which can be used to return a (small) message body
	along with a HTTP response using http_send_status().

------------------------------------------------------------------------
r9009 | rmanfredi | 2005-08-04 17:48:30 -0400 (Thu, 04 Aug 2005) | 2 lines

When source is not active, return the file's progression instead.

------------------------------------------------------------------------
r9008 | rmanfredi | 2005-08-04 17:45:34 -0400 (Thu, 04 Aug 2005) | 2 lines

Fixed display of the progress column.

------------------------------------------------------------------------
r9007 | graaff | 2005-08-04 17:16:58 -0400 (Thu, 04 Aug 2005) | 2 lines

New dbus signal DownloadDone.

------------------------------------------------------------------------
r9006 | graaff | 2005-08-04 17:15:20 -0400 (Thu, 04 Aug 2005) | 3 lines

dbus update to allow new code to compile; you must rerun Configure to
avoid linker errors.

------------------------------------------------------------------------
r9005 | graaff | 2005-08-04 17:13:15 -0400 (Thu, 04 Aug 2005) | 2 lines

Change message interface to take two strings: type of event, and payload.

------------------------------------------------------------------------
r9004 | rmanfredi | 2005-08-04 17:05:35 -0400 (Thu, 04 Aug 2005) | 2 lines

Added update of the new "Progress" column.

------------------------------------------------------------------------
r9003 | rmanfredi | 2005-08-04 16:05:33 -0400 (Thu, 04 Aug 2005) | 2 lines

Must check TX_ERROR after deflate_flush_send().

------------------------------------------------------------------------
r9002 | rmanfredi | 2005-08-04 15:50:13 -0400 (Thu, 04 Aug 2005) | 2 lines

Typo fix.

------------------------------------------------------------------------
r9001 | rmanfredi | 2005-08-04 15:49:13 -0400 (Thu, 04 Aug 2005) | 3 lines

Don't be too eager calling deflate_rotate_and_send(): we must make sure
there is actually something to send first!

------------------------------------------------------------------------
r9000 | rmanfredi | 2005-08-04 15:33:48 -0400 (Thu, 04 Aug 2005) | 2 lines

Fixed assertions on length: we forbid -1 and 0 only.

------------------------------------------------------------------------
r8999 | rmanfredi | 2005-08-04 15:31:59 -0400 (Thu, 04 Aug 2005) | 3 lines

Raise TX_ERROR when we encounter a write error, and check for it at
strategic places to abort processing.

------------------------------------------------------------------------
r8998 | rmanfredi | 2005-08-04 14:12:27 -0400 (Thu, 04 Aug 2005) | 2 lines

Forgot that chunk_acceptable() can return -1.

------------------------------------------------------------------------
r8997 | rmanfredi | 2005-08-04 14:02:26 -0400 (Thu, 04 Aug 2005) | 2 lines

Proper fix for the lower layer returning an error: bail out.

------------------------------------------------------------------------
r8996 | cbiere | 2005-08-04 12:31:54 -0400 (Thu, 04 Aug 2005) | 2 lines

Added assertions.

------------------------------------------------------------------------
r8995 | cbiere | 2005-08-04 11:53:03 -0400 (Thu, 04 Aug 2005) | 4 lines

dechunk():
	Make sure there was at least one hex digit before calculating
	the chunk-size.

------------------------------------------------------------------------
r8994 | rmanfredi | 2005-08-04 11:52:49 -0400 (Thu, 04 Aug 2005) | 2 lines

Abort immediately if lower layer reports an error during write.

------------------------------------------------------------------------
r8993 | cbiere | 2005-08-04 11:36:42 -0400 (Thu, 04 Aug 2005) | 2 lines

Use MIME-friendly line termination if any.

------------------------------------------------------------------------
r8992 | rmanfredi | 2005-08-04 11:21:05 -0400 (Thu, 04 Aug 2005) | 2 lines

Added debugging to trace beginning of chunks.

------------------------------------------------------------------------
r8991 | rmanfredi | 2005-08-04 11:19:40 -0400 (Thu, 04 Aug 2005) | 2 lines

Can now reply to browse host requests by sending query hits.

------------------------------------------------------------------------
r8990 | rmanfredi | 2005-08-04 11:18:09 -0400 (Thu, 04 Aug 2005) | 2 lines

Changed interface of qhit_build_results() to make it reusable by browse host.

------------------------------------------------------------------------
r8989 | rmanfredi | 2005-08-04 09:32:07 -0400 (Thu, 04 Aug 2005) | 3 lines

Deflating layer was not always completely flushed on close, resulting in
truncated "browse host" replies.

------------------------------------------------------------------------
r8988 | rmanfredi | 2005-08-04 08:06:15 -0400 (Thu, 04 Aug 2005) | 3 lines

Must free the alive_ping structure after the TX stack since some messages
can refer to it.

------------------------------------------------------------------------
r8987 | rmanfredi | 2005-08-04 07:40:59 -0400 (Thu, 04 Aug 2005) | 3 lines

During TX shutdown, signal we're going down before disabling the service
routine, to avoid potentially unsafe callouts.

------------------------------------------------------------------------
r8986 | rmanfredi | 2005-08-04 06:25:09 -0400 (Thu, 04 Aug 2005) | 4 lines

Make sure we abort the upload immediately if the shared file is no longer
present on the disk, especially when they are being queued for that
no-longer-existing file.

------------------------------------------------------------------------
r8985 | rmanfredi | 2005-08-04 03:20:11 -0400 (Thu, 04 Aug 2005) | 5 lines

Get rid of the special hooks after the upload is completed to get rid
of the TX stack before the next request.
If previous request was a browse host and the next one is not, reset the
name so that the follow-up request correctly displays on the GUI.

------------------------------------------------------------------------
r8984 | rmanfredi | 2005-08-04 03:09:33 -0400 (Thu, 04 Aug 2005) | 5 lines

Removed add_rx_chunk callback: we won't keep chunk decoding stats.
Allow the dechunking driver to tolerate a missing CRLF after data.
Raise an error if we get data after we saw the end of the chunk stream.
Minor comment editing / fixing.

------------------------------------------------------------------------
r8983 | cbiere | 2005-08-03 22:15:31 -0400 (Wed, 03 Aug 2005) | 2 lines

Fixed some bugs after testing this (by replacing deflate with chunked).

------------------------------------------------------------------------
r8982 | cbiere | 2005-08-03 20:42:51 -0400 (Wed, 03 Aug 2005) | 3 lines

dechunk():
	Fixed two off-by-ones.

------------------------------------------------------------------------
r8981 | cbiere | 2005-08-03 20:37:54 -0400 (Wed, 03 Aug 2005) | 5 lines

dechunk():
	Corrected handling of state CHUNK_STATE_TRAILER_START. If there
	isn't sufficient data available, the state must switch to the
	next.

------------------------------------------------------------------------
r8980 | cbiere | 2005-08-03 20:21:54 -0400 (Wed, 03 Aug 2005) | 2 lines

Added untested network driver code for receiving "chunked" encoded data.

------------------------------------------------------------------------
r8979 | rmanfredi | 2005-08-03 15:30:48 -0400 (Wed, 03 Aug 2005) | 2 lines

Also turn on HTML output when we see "text/*" in the Accept: line.

------------------------------------------------------------------------
r8978 | rmanfredi | 2005-08-03 15:29:46 -0400 (Wed, 03 Aug 2005) | 2 lines

Forgot the CRLF after the data.

------------------------------------------------------------------------
r8977 | rmanfredi | 2005-08-03 15:29:19 -0400 (Wed, 03 Aug 2005) | 3 lines

When moving to the next layer for closing, don't forget to disable
servicing of the upper layer, which has been flushed.

------------------------------------------------------------------------
r8976 | rmanfredi | 2005-08-03 14:45:32 -0400 (Wed, 03 Aug 2005) | 2 lines

Get rid of the TX stack when closing.

------------------------------------------------------------------------
r8975 | cbiere | 2005-08-03 14:35:55 -0400 (Wed, 03 Aug 2005) | 3 lines

browse_host_read():
	Handle SHARE_REBUILDING result from shared_file().

------------------------------------------------------------------------
r8974 | rmanfredi | 2005-08-03 14:09:39 -0400 (Wed, 03 Aug 2005) | 3 lines

If we see Accept: */*, assume it's a web browser.  A servent will request
the gnutella packets explicitly since it's non-standard.

------------------------------------------------------------------------
r8973 | rmanfredi | 2005-08-03 14:06:57 -0400 (Wed, 03 Aug 2005) | 2 lines

Fixed invalid assertion, since the lower layer can flow-control us.

------------------------------------------------------------------------
r8972 | rmanfredi | 2005-08-03 13:26:32 -0400 (Wed, 03 Aug 2005) | 2 lines

Fixed typo "writeable" -> "writable".

------------------------------------------------------------------------
r8971 | rmanfredi | 2005-08-03 13:21:31 -0400 (Wed, 03 Aug 2005) | 2 lines

Browse Host now supports deflated output and can emit chunked encoding.

------------------------------------------------------------------------
r8970 | rmanfredi | 2005-08-03 13:20:14 -0400 (Wed, 03 Aug 2005) | 4 lines

Removed leading assertions in service routine.  It gets messy during closing.
Make sure we call deflate_flush() when flushing data, in case there is no
Nagle timer set.

------------------------------------------------------------------------
r8969 | rmanfredi | 2005-08-03 13:18:58 -0400 (Wed, 03 Aug 2005) | 2 lines

Fixed assertion.

------------------------------------------------------------------------
r8968 | rmanfredi | 2005-08-03 13:18:37 -0400 (Wed, 03 Aug 2005) | 4 lines

Changed signature to create TX stack.
Be sure to switch-off eager mode and disable topmost service routine
when closing the stack (flushing out data asynchronously).

------------------------------------------------------------------------
r8967 | rmanfredi | 2005-08-03 13:17:21 -0400 (Wed, 03 Aug 2005) | 2 lines

Changed signature to create the TX stack initially.

------------------------------------------------------------------------
r8966 | rmanfredi | 2005-08-03 13:16:28 -0400 (Wed, 03 Aug 2005) | 2 lines

Converted to use the TX stack for sending data.

------------------------------------------------------------------------
r8965 | cbiere | 2005-08-03 10:26:53 -0400 (Wed, 03 Aug 2005) | 2 lines

Call dbus_* functions unconditionally.

------------------------------------------------------------------------
r8964 | cbiere | 2005-08-03 10:26:10 -0400 (Wed, 03 Aug 2005) | 3 lines

Style fixes.
Removed extra line breaks from g_message() format strings.

------------------------------------------------------------------------
r8963 | graaff | 2005-08-03 09:07:57 -0400 (Wed, 03 Aug 2005) | 2 lines

Initial version of D-Bus support documentation.

------------------------------------------------------------------------
r8962 | graaff | 2005-08-03 08:30:32 -0400 (Wed, 03 Aug 2005) | 2 lines

Documentation love.

------------------------------------------------------------------------
r8961 | graaff | 2005-08-03 08:23:25 -0400 (Wed, 03 Aug 2005) | 3 lines

Documentation and style updates; add stubs so to avoid using ifdefs
all over the place.

------------------------------------------------------------------------
r8960 | graaff | 2005-08-03 08:19:57 -0400 (Wed, 03 Aug 2005) | 3 lines

Define HAS_DBUS so that the documentation is built for the real code,
not the stubs.

------------------------------------------------------------------------
r8959 | rmanfredi | 2005-08-03 04:22:06 -0400 (Wed, 03 Aug 2005) | 2 lines

Added "eager mode" to the TX stack to always have it serviced.

------------------------------------------------------------------------
r8958 | graaff | 2005-08-02 18:34:26 -0400 (Tue, 02 Aug 2005) | 2 lines

Document dbus changes.

------------------------------------------------------------------------
r8957 | graaff | 2005-08-02 18:33:24 -0400 (Tue, 02 Aug 2005) | 2 lines

Add new dbus files.

------------------------------------------------------------------------
r8956 | graaff | 2005-08-02 18:31:54 -0400 (Tue, 02 Aug 2005) | 2 lines

Example script shows how to listen to gtkg events using Python.

------------------------------------------------------------------------
r8955 | graaff | 2005-08-02 18:28:39 -0400 (Tue, 02 Aug 2005) | 2 lines

Regenerated to include dbus support.

------------------------------------------------------------------------
r8954 | graaff | 2005-08-02 18:26:51 -0400 (Tue, 02 Aug 2005) | 3 lines

New dbus configuration unit to check for proper version, and show
result in summary at the end of Configure run.

------------------------------------------------------------------------
r8953 | graaff | 2005-08-02 18:25:24 -0400 (Tue, 02 Aug 2005) | 2 lines

Add dbus support on init and close.

------------------------------------------------------------------------
r8952 | graaff | 2005-08-02 18:24:24 -0400 (Tue, 02 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8951 | graaff | 2005-08-02 18:19:16 -0400 (Tue, 02 Aug 2005) | 2 lines

Include dbus source files and dbus cflags and libs support.

------------------------------------------------------------------------
r8950 | graaff | 2005-08-02 18:17:46 -0400 (Tue, 02 Aug 2005) | 2 lines

Initial DBus support files.

------------------------------------------------------------------------
r8949 | cbiere | 2005-08-02 17:55:24 -0400 (Tue, 02 Aug 2005) | 3 lines

Put the host address (or count) into the correct column; the column ID
	differs for queued and active downloads.

------------------------------------------------------------------------
r8948 | rmanfredi | 2005-08-02 14:28:26 -0400 (Tue, 02 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8947 | rmanfredi | 2005-08-02 14:27:50 -0400 (Tue, 02 Aug 2005) | 2 lines

Added tx_chunk.c.

------------------------------------------------------------------------
r8946 | rmanfredi | 2005-08-02 14:27:09 -0400 (Tue, 02 Aug 2005) | 4 lines

Now uses walloc() for memory allocation.
Added tx_has_error() to check for TX errors.
Added tx_close() with callback to be notified when transmission is closed.

------------------------------------------------------------------------
r8945 | rmanfredi | 2005-08-02 14:24:32 -0400 (Tue, 02 Aug 2005) | 2 lines

Use walloc() for allocation.

------------------------------------------------------------------------
r8944 | rmanfredi | 2005-08-02 14:22:00 -0400 (Tue, 02 Aug 2005) | 2 lines

New TX "chunking" driver to be able to send HTTP chunked data.

------------------------------------------------------------------------
r8943 | graaff | 2005-08-02 12:34:28 -0400 (Tue, 02 Aug 2005) | 2 lines

Template for release announcements.

------------------------------------------------------------------------
r8942 | daichik | 2005-08-02 08:58:18 -0400 (Tue, 02 Aug 2005) | 2 lines

Kept 'User-Agent' as is.

------------------------------------------------------------------------
r8941 | daichik | 2005-08-02 08:12:59 -0400 (Tue, 02 Aug 2005) | 2 lines

Fixed comment again for Doxygen.

------------------------------------------------------------------------
r8940 | daichik | 2005-08-02 08:08:49 -0400 (Tue, 02 Aug 2005) | 2 lines

Bumped Project-Id-Version and minor changes.

------------------------------------------------------------------------
r8939 | rmanfredi | 2005-08-02 06:29:51 -0400 (Tue, 02 Aug 2005) | 5 lines

Mark write errors and disable further output after first error.
The TX stack is now dismantled asynchronously, to allow probing of the
TX errors if needed before freeing it.
Added a "shutdown" procedure to disable any further TX output before freeing.

------------------------------------------------------------------------
r8938 | rmanfredi | 2005-08-02 04:52:00 -0400 (Tue, 02 Aug 2005) | 2 lines

Forgot that the "by_sha1" table did not store filenames but 0x1 as value.

------------------------------------------------------------------------
r8937 | cbiere | 2005-08-02 03:44:57 -0400 (Tue, 02 Aug 2005) | 3 lines

gui_create_dlg_about():
	Forgot to use Q_().

------------------------------------------------------------------------
r8936 | cbiere | 2005-08-02 03:37:19 -0400 (Tue, 02 Aug 2005) | 2 lines

Added "Q_" as keyword for gettext.

------------------------------------------------------------------------
r8935 | cbiere | 2005-08-02 03:25:59 -0400 (Tue, 02 Aug 2005) | 2 lines

Added "label_about_translation" to dlg_about.

------------------------------------------------------------------------
r8934 | cbiere | 2005-08-02 03:22:08 -0400 (Tue, 02 Aug 2005) | 3 lines

Used patch by Paco Arjonilla to show a translation-dependent credit for
	the translator(s) in the "About" dialog box.

------------------------------------------------------------------------
r8933 | cbiere | 2005-08-02 02:56:33 -0400 (Tue, 02 Aug 2005) | 3 lines

Let NLSPATH override the compile-time configured locale directory for
	bindtextdomain().

------------------------------------------------------------------------
r8932 | cbiere | 2005-08-02 01:59:28 -0400 (Tue, 02 Aug 2005) | 2 lines

Back to the future.

------------------------------------------------------------------------
r8931 | cbiere | 2005-08-02 01:54:32 -0400 (Tue, 02 Aug 2005) | 2 lines

Don't show progress percentage in the status column unless it's beyond 100%.

------------------------------------------------------------------------
r8930 | cbiere | 2005-08-02 01:31:54 -0400 (Tue, 02 Aug 2005) | 5 lines

[GTK1] Added a progress column to Downloads->Active and Uploads for
	consistency with GTK2.
[GTK2] Show the progress percentage only in the status column if the chunk
	goes beyond 100%.

------------------------------------------------------------------------
r8929 | cbiere | 2005-08-02 01:27:14 -0400 (Tue, 02 Aug 2005) | 14 lines

Style fixes.
Moved constants to the front for '==' and '!='.
Removed unnecessary casts.
fi_get_chunks():
fi_get_ranges():
	Use g_slist_reverse() instead of custom optimzation.
file_info_scandir():
	Use strcmp() to check for "." and ".." instead of micro optimization.
file_info_new_outname():
	Use utf8_strlcpy() instead of g_strlcpy().
file_info_retrieve():
	Use file_info_merge_adjacent() to re-calculate fi->done for the
	chunk list retrieved from the "fileinfo" file.

------------------------------------------------------------------------
r8928 | cbiere | 2005-08-02 01:18:52 -0400 (Tue, 02 Aug 2005) | 3 lines

Added const-qualifiers.
Style fixes.

------------------------------------------------------------------------
r8927 | cbiere | 2005-08-01 21:58:13 -0400 (Mon, 01 Aug 2005) | 9 lines

Added utf32_block_id() which returns a numeric ID that identifies the
	Unicode block of the given UTF-32 character.
Added utf32_split_blocks() which inserts a space between characters of
	different Unicode blocks.
utf32_canonize():
	Use utf32_split_blocks() as the last step. This is necessary for
	full compatibility with LimeWire's algorithm; it's mostly important
	for non-Latin languages.

------------------------------------------------------------------------
r8926 | cbiere | 2005-08-01 21:52:59 -0400 (Mon, 01 Aug 2005) | 2 lines

Added utf32_block_id_lut[].

------------------------------------------------------------------------
r8925 | cbiere | 2005-08-01 18:52:19 -0400 (Mon, 01 Aug 2005) | 2 lines

Added "Browse Host" button to the search popup menu.

------------------------------------------------------------------------
r8924 | cbiere | 2005-08-01 17:41:13 -0400 (Mon, 01 Aug 2005) | 3 lines

gui_init_menu():
	Use the enum as row data instead of the iterator.

------------------------------------------------------------------------
r8923 | cbiere | 2005-08-01 17:39:39 -0400 (Mon, 01 Aug 2005) | 2 lines

Put the enums in the same order as the notebooks tabs for GTK1.

------------------------------------------------------------------------
r8922 | cbiere | 2005-08-01 17:38:19 -0400 (Mon, 01 Aug 2005) | 2 lines

Removed bogus code.

------------------------------------------------------------------------
r8921 | cbiere | 2005-08-01 17:06:11 -0400 (Mon, 01 Aug 2005) | 3 lines

Removed the detachable handleboxes.
Moved the search box to the top.

------------------------------------------------------------------------
r8920 | cbiere | 2005-08-01 15:39:15 -0400 (Mon, 01 Aug 2005) | 3 lines

Replaced g_iconv() completely with iconv() because g_iconv() uses a bogus
	prototype.

------------------------------------------------------------------------
r8919 | rmanfredi | 2005-08-01 15:31:36 -0400 (Mon, 01 Aug 2005) | 3 lines

Was wrongly reporting "Already downloading that file" when the same host
requested two distinct files via PFS.

------------------------------------------------------------------------
r8918 | rmanfredi | 2005-08-01 15:14:08 -0400 (Mon, 01 Aug 2005) | 2 lines

Complete separation of the dependency between the RX stack and nodes.

------------------------------------------------------------------------
r8917 | rmanfredi | 2005-08-01 15:12:51 -0400 (Mon, 01 Aug 2005) | 2 lines

Removed spurious inclusion of "nodes.h".

------------------------------------------------------------------------
r8916 | cbiere | 2005-08-01 14:47:28 -0400 (Mon, 01 Aug 2005) | 2 lines

Ensure that size_t and ssize_t are equivalent to gsize/gssize.

------------------------------------------------------------------------
r8915 | cbiere | 2005-08-01 13:49:04 -0400 (Mon, 01 Aug 2005) | 2 lines

Renamed nb_main_page_downloads to nb_main_page_dl_active.

------------------------------------------------------------------------
r8914 | cbiere | 2005-08-01 13:40:06 -0400 (Mon, 01 Aug 2005) | 3 lines

Swapped "Downloads" with "Downloads->Files" and renamed the former to
	"Downloads->Active".

------------------------------------------------------------------------
r8913 | rmanfredi | 2005-08-01 13:37:35 -0400 (Mon, 01 Aug 2005) | 2 lines

Complete separation of the dependency between the TX stack and nodes.

------------------------------------------------------------------------
r8912 | cbiere | 2005-08-01 13:37:35 -0400 (Mon, 01 Aug 2005) | 2 lines

Sync'ed the main tree menu with GTK2 with respect to the download panes.

------------------------------------------------------------------------
r8911 | cbiere | 2005-08-01 13:34:27 -0400 (Mon, 01 Aug 2005) | 2 lines

Changed "QUEUE FROZEN" to "Queue frozen". THERE IS NO REASON TO SCREAM!

------------------------------------------------------------------------
r8910 | cbiere | 2005-08-01 13:33:25 -0400 (Mon, 01 Aug 2005) | 2 lines

Removed unused property "downloads_divider_pos".

------------------------------------------------------------------------
r8906 | cbiere | 2005-08-01 09:44:33 -0400 (Mon, 01 Aug 2005) | 4 lines

browse_host_read():
	Fixed two harmless off-by-one bugs that causes two NUL bytes
	in the HTML output.

------------------------------------------------------------------------
r8904 | rmanfredi | 2005-08-01 08:53:14 -0400 (Mon, 01 Aug 2005) | 2 lines

Browse host structures moved to new "bh_upload.h".

------------------------------------------------------------------------
r8903 | rmanfredi | 2005-08-01 08:52:18 -0400 (Mon, 01 Aug 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8902 | rmanfredi | 2005-08-01 08:51:57 -0400 (Mon, 01 Aug 2005) | 2 lines

Added bh_upload.c.

------------------------------------------------------------------------
r8901 | rmanfredi | 2005-08-01 08:49:40 -0400 (Mon, 01 Aug 2005) | 2 lines

Moved uploading of browse-host data to dedicated files.

------------------------------------------------------------------------
r8900 | rmanfredi | 2005-08-01 08:46:25 -0400 (Mon, 01 Aug 2005) | 4 lines

Beginning of refactoring of the TX / RX stacks: they are now made bottom-up.
First attempt at cutting out some of the dependencies with the nodes to
allow the stacks to be used for HTTP traffic as well.

------------------------------------------------------------------------
r8899 | rmanfredi | 2005-08-01 08:42:38 -0400 (Mon, 01 Aug 2005) | 2 lines

Added host_ip().

------------------------------------------------------------------------
r8898 | daichik | 2005-08-01 06:56:52 -0400 (Mon, 01 Aug 2005) | 2 lines

Added file with translatable string.

------------------------------------------------------------------------
r8896 | rmanfredi | 2005-08-01 05:39:32 -0400 (Mon, 01 Aug 2005) | 4 lines

Try to compute a suitable upload filename for the SHA1 digest, especially
when PFS is enabled and we're given the digest of a file we downloaded
but chose not to share once completed.

------------------------------------------------------------------------
r8895 | daichik | 2005-08-01 04:44:46 -0400 (Mon, 01 Aug 2005) | 2 lines

Marked a string translatable.

------------------------------------------------------------------------
r8893 | rmanfredi | 2005-08-01 03:52:14 -0400 (Mon, 01 Aug 2005) | 2 lines

Added assertion to make sure change_server_ip() behaves.

------------------------------------------------------------------------
r8892 | rmanfredi | 2005-08-01 03:45:26 -0400 (Mon, 01 Aug 2005) | 3 lines

Update the server IP when we get a GIV, and recompute the server's country
appropriately, with immediate GUI feedback.

------------------------------------------------------------------------
r8891 | rmanfredi | 2005-08-01 03:43:16 -0400 (Mon, 01 Aug 2005) | 2 lines

Fixed wrong leading comment for bg_task_resume().

------------------------------------------------------------------------
r8887 | graaff | 2005-07-31 14:45:36 -0400 (Sun, 31 Jul 2005) | 2 lines

Update standard file header to include the original location of the code.

------------------------------------------------------------------------
r8886 | graaff | 2005-07-31 14:41:33 -0400 (Sun, 31 Jul 2005) | 2 lines

Include standard file header including the original location of the code.

------------------------------------------------------------------------
r8885 | graaff | 2005-07-31 14:17:15 -0400 (Sun, 31 Jul 2005) | 2 lines

Add new file tiger_sboxes.h

------------------------------------------------------------------------
r8884 | graaff | 2005-07-31 13:42:38 -0400 (Sun, 31 Jul 2005) | 2 lines

Release 0.95.4 stable.

------------------------------------------------------------------------
r8883 | daichik | 2005-07-31 08:06:01 -0400 (Sun, 31 Jul 2005) | 3 lines

Added 'Spanish translation updates.' at the
    '# v 0.95.4  2005.07.31  [stable]'.

------------------------------------------------------------------------
r8882 | daichik | 2005-07-31 07:49:14 -0400 (Sun, 31 Jul 2005) | 6 lines

Updated with the latest POT file.
Removed '$Id: ...' from 'src/ui/gtk/gtk1/interface-glade.c'
    manually, since it causes unnecessary updating on
    compilation.
Removed obsolete translations.

------------------------------------------------------------------------
r8881 | daichik | 2005-07-31 07:46:37 -0400 (Sun, 31 Jul 2005) | 8 lines

Updated with the latest POT file.
Removed initial '$Id: ...' and one from
    'src/ui/gtk/gtk1/interface-glade.c' manually, since it causes
    unnecessary updating on compilation.
Removed obsolete translations, from my experiences, it hardly happens
    that translations had once marked 'obsolete (#~)' come back to
    the available translations again.

------------------------------------------------------------------------
r8880 | daichik | 2005-07-31 07:43:44 -0400 (Sun, 31 Jul 2005) | 10 lines

Updated with the latest POT file.
Changed the version number at 'Project-Id-Version:' for the
    0.95.4 release.
Removed initial '$Id: ...' and one from
    'src/ui/gtk/gtk1/interface-glade.c' manually, since it causes
    unnecessary updating on compilation.
Removed obsolete translations, from my experiences, it hardly happens
    that translations had once marked 'obsolete (#~)' come back to
    the available translations.

------------------------------------------------------------------------
r8879 | daichik | 2005-07-31 07:32:00 -0400 (Sun, 31 Jul 2005) | 4 lines

Updated with the 0.95.4 released source codes,
    removed "$Id: ..." from src/ui/gtk/gtk1/interface-glade.c
    manually, it causes unnecessary updating on compilation.

------------------------------------------------------------------------
r8878 | rmanfredi | 2005-07-31 06:46:44 -0400 (Sun, 31 Jul 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r8877 | rmanfredi | 2005-07-31 06:46:20 -0400 (Sun, 31 Jul 2005) | 3 lines

Mention the "make update" step.
Re-instantiated step #7.

------------------------------------------------------------------------
r8876 | graaff | 2005-07-31 03:32:03 -0400 (Sun, 31 Jul 2005) | 2 lines

Regenerate with new template and remove obsolete .desktop rule.

------------------------------------------------------------------------
r8875 | rmanfredi | 2005-07-31 03:04:49 -0400 (Sun, 31 Jul 2005) | 2 lines

Updated by running "make update".

------------------------------------------------------------------------
r8874 | rmanfredi | 2005-07-31 03:03:16 -0400 (Sun, 31 Jul 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8873 | rmanfredi | 2005-07-31 03:02:55 -0400 (Sun, 31 Jul 2005) | 2 lines

Make sure target is removed before calling wget.

------------------------------------------------------------------------
r8872 | rmanfredi | 2005-07-31 02:59:07 -0400 (Sun, 31 Jul 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8871 | rmanfredi | 2005-07-31 02:58:11 -0400 (Sun, 31 Jul 2005) | 3 lines

Added the "update" target to update the bogons and GeoIP database.
Requires wget and perl to be installed. (meant for developers only)

------------------------------------------------------------------------
r8870 | rmanfredi | 2005-07-31 02:54:13 -0400 (Sun, 31 Jul 2005) | 2 lines

Script used to convert the GeoIP database to a format suitable for GTKG.

------------------------------------------------------------------------
r8869 | cbiere | 2005-07-31 01:44:09 -0400 (Sun, 31 Jul 2005) | 8 lines

upload_error_remove():
	Pass "msg" to gettext() before passing it to upload_remove_v()
	so that the GUI gets a translated message if possible.
upload_request():
	Don't pass the translated message to upload_error_remove()
	because the remote peer would get this translated version.
	Re-worded error message so that ngettext() is not necessary.

------------------------------------------------------------------------
r8868 | cbiere | 2005-07-31 01:00:21 -0400 (Sun, 31 Jul 2005) | 2 lines

Updated translation by Paco Arjonilla.

------------------------------------------------------------------------
r8866 | daichik | 2005-07-30 12:30:25 -0400 (Sat, 30 Jul 2005) | 2 lines

Changed the comment place for Doxygen.

------------------------------------------------------------------------
r8865 | daichik | 2005-07-30 12:27:14 -0400 (Sat, 30 Jul 2005) | 2 lines

Minor translation change.

------------------------------------------------------------------------
r8864 | daichik | 2005-07-30 12:26:24 -0400 (Sat, 30 Jul 2005) | 3 lines

Changed the version number at 'Project-Id-Version'
    for the 0.95.4 release.

------------------------------------------------------------------------
r8863 | daichik | 2005-07-30 12:23:49 -0400 (Sat, 30 Jul 2005) | 2 lines

Updated with the latest source codes.

------------------------------------------------------------------------
r8860 | daichik | 2005-07-30 08:18:31 -0400 (Sat, 30 Jul 2005) | 2 lines

Changed language code.

------------------------------------------------------------------------
r8852 | graaff | 2005-07-30 04:05:26 -0400 (Sat, 30 Jul 2005) | 2 lines

Initial list of changes for upcoming 0.95.4.

------------------------------------------------------------------------
r8851 | graaff | 2005-07-30 03:06:58 -0400 (Sat, 30 Jul 2005) | 2 lines

Change order of arguments in test to enhance portability.

------------------------------------------------------------------------
r8849 | cbiere | 2005-07-29 13:50:36 -0400 (Fri, 29 Jul 2005) | 3 lines

Show file_info->lifecount instead of the bogus number of children
	as host counter.

------------------------------------------------------------------------
r8846 | cbiere | 2005-07-29 11:53:12 -0400 (Fri, 29 Jul 2005) | 2 lines

Convert the three 64-bit result values to little-endian before returning them.

------------------------------------------------------------------------
r8845 | graaff | 2005-07-29 10:45:50 -0400 (Fri, 29 Jul 2005) | 2 lines

#include <stdio.h> because printf is used in the test program.

------------------------------------------------------------------------
r8844 | cbiere | 2005-07-29 10:39:25 -0400 (Fri, 29 Jul 2005) | 2 lines

Fixed use of lazy_utf8_to_locale().

------------------------------------------------------------------------
r8843 | graaff | 2005-07-29 10:18:56 -0400 (Fri, 29 Jul 2005) | 3 lines

Include sanity check during glib detection to see if glib compilation
actually works.

------------------------------------------------------------------------
r8842 | cbiere | 2005-07-29 09:24:11 -0400 (Fri, 29 Jul 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8841 | cbiere | 2005-07-29 09:23:20 -0400 (Fri, 29 Jul 2005) | 3 lines

tiger():
	Added missing ".u8" after "temp".

------------------------------------------------------------------------
r8840 | cbiere | 2005-07-28 23:57:28 -0400 (Thu, 28 Jul 2005) | 2 lines

Manually updated a few ranges.

------------------------------------------------------------------------
r8839 | cbiere | 2005-07-28 21:45:49 -0400 (Thu, 28 Jul 2005) | 2 lines

Removed wrong comment; the filename is obvious anyway.

------------------------------------------------------------------------
r8838 | cbiere | 2005-07-28 21:42:09 -0400 (Thu, 28 Jul 2005) | 2 lines

Added tiger_init() which runs some test cases to check the Tiger algo.

------------------------------------------------------------------------
r8837 | cbiere | 2005-07-28 21:36:59 -0400 (Thu, 28 Jul 2005) | 4 lines

Fixed wrong casts (they must not be signed types).
Style corrections.
Include the necessary S Boxes.

------------------------------------------------------------------------
r8836 | cbiere | 2005-07-28 21:33:16 -0400 (Thu, 28 Jul 2005) | 2 lines

Added the S boxes necessary for Tiger.

------------------------------------------------------------------------
r8835 | cbiere | 2005-07-28 16:35:51 -0400 (Thu, 28 Jul 2005) | 2 lines

Fixed some compiler warnings reported by "jews".

------------------------------------------------------------------------
r8834 | cbiere | 2005-07-28 12:21:18 -0400 (Thu, 28 Jul 2005) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r8833 | cbiere | 2005-07-28 12:11:16 -0400 (Thu, 28 Jul 2005) | 2 lines

Removed bad '@' in continued lines.

------------------------------------------------------------------------
r8832 | graaff | 2005-07-28 11:15:31 -0400 (Thu, 28 Jul 2005) | 2 lines

Don't try to create an install directory based on a non-existing variable.

------------------------------------------------------------------------
r8831 | cbiere | 2005-07-28 10:38:49 -0400 (Thu, 28 Jul 2005) | 2 lines

Added missing line continuations.

------------------------------------------------------------------------
r8830 | cbiere | 2005-07-28 10:12:24 -0400 (Thu, 28 Jul 2005) | 2 lines

Added missing line continuations.

------------------------------------------------------------------------
r8829 | cbiere | 2005-07-28 09:58:43 -0400 (Thu, 28 Jul 2005) | 3 lines

ggep_stream_end():
	Fixed compiler warning.

------------------------------------------------------------------------
r8824 | cbiere | 2005-07-27 05:01:41 -0400 (Wed, 27 Jul 2005) | 3 lines

settings_getphysmemsize():
	Use HW_USERMEM64 if possible for machines with more than 4 GB RAM.

------------------------------------------------------------------------
r8823 | cbiere | 2005-07-27 04:52:26 -0400 (Wed, 27 Jul 2005) | 4 lines

Changed gint to size_t where necessary for new cobs_* interfaces.
ggep_stream_end():
	cobs_stream_close() returns 0 instead of -1 on failure now.

------------------------------------------------------------------------
r8822 | cbiere | 2005-07-27 04:44:54 -0400 (Wed, 27 Jul 2005) | 10 lines

Replaced gint with size_t when used as memory size.
Changed types of code and last_code to guchar to get rid of extra casts.
cobs_stream_t:
	Added member "closed" to get rid of the magic last_code "COBS_CLOSED".
cobs_is_valid():
cobs_decode():
	The code checked only for a zero counter ("code") but not for
	NULs in the data itself.
	Minor optimizations.

------------------------------------------------------------------------
r8816 | cbiere | 2005-07-26 17:20:17 -0400 (Tue, 26 Jul 2005) | 7 lines

Convert vendor strings from ISO-8859-1 instead of the current locale
	because they're given through HTTP or Gnutella headers which
	use ISO-8859-1 but not UTF-8 or any other locale for non-ASCII
	characters.
Removed the deprecated ```len'' parameter for lazy_locale_to_utf8()
	and lazy_utf8_to_locale().

------------------------------------------------------------------------
r8813 | cbiere | 2005-07-26 16:50:58 -0400 (Tue, 26 Jul 2005) | 2 lines

Fixed minor memory leaks.

------------------------------------------------------------------------
r8812 | cbiere | 2005-07-26 16:49:19 -0400 (Tue, 26 Jul 2005) | 6 lines

Replaced iso_8859_1_to_utf8() with lazy_iso8859_1_to_utf8().
lazy_utf8_to_locale():
lazy_locale_to_utf8():
	Removed ``len'' parameter as it's hardly used anywhere and more
	annoying than useful.

------------------------------------------------------------------------
r8811 | cbiere | 2005-07-26 15:56:27 -0400 (Tue, 26 Jul 2005) | 4 lines

utf8_is_valid_char():
	Use utf8_decode_char() which is stricter and doesn't allow
	surrogates or out-of-range code points.

------------------------------------------------------------------------
r8810 | cbiere | 2005-07-26 15:24:29 -0400 (Tue, 26 Jul 2005) | 3 lines

utf8_skip():
	Fixed braino.

------------------------------------------------------------------------
r8716 | daichik | 2005-07-24 17:15:42 -0400 (Sun, 24 Jul 2005) | 4 lines

Fixed fatal mistranslation against the 'Swarming',
    that would remind some Japanese of the 'Bee'.
Modified 'Project-Id-Version' for the 0.95.4 relese.

------------------------------------------------------------------------
r8713 | graaff | 2005-07-24 14:50:10 -0400 (Sun, 24 Jul 2005) | 3 lines

Regenerate Makefile.SH with new Jmake.tmpl so that prefix is known,
and install desktop file and pixmaps in the proper locations based on prefix.

------------------------------------------------------------------------
r8712 | graaff | 2005-07-24 14:49:07 -0400 (Sun, 24 Jul 2005) | 2 lines

Remove complex desktop file installation stuff.

------------------------------------------------------------------------
r8700 | daichik | 2005-07-20 08:05:32 -0400 (Wed, 20 Jul 2005) | 2 lines

Improved translations.

------------------------------------------------------------------------
r8686 | cbiere | 2005-07-19 14:38:44 -0400 (Tue, 19 Jul 2005) | 2 lines

Replaced non-ASCII character.

------------------------------------------------------------------------
r8685 | cbiere | 2005-07-19 14:35:46 -0400 (Tue, 19 Jul 2005) | 2 lines

Removed all non-ASCII characters.

------------------------------------------------------------------------
r8667 | cbiere | 2005-07-18 16:32:17 -0400 (Mon, 18 Jul 2005) | 3 lines

search_stats_gui_enable():
	Suppress warning about unused parameter.

------------------------------------------------------------------------
r8666 | cbiere | 2005-07-18 16:03:00 -0400 (Mon, 18 Jul 2005) | 16 lines

locale_is_utf8():
	Added assertion because ``charset'' must be initialized.
g_iconv_complete():
	Rename to ``complete_iconv'' because the ``g_'' prefix may clash
	with GLib's namespace.
	Reset g_iconv() before converting a string and after an error.
Added utf8_enforce() to eliminate non-UTF-8 characters in case we cannot
	convert from another known character set.
locale_to_utf8():
locale_to_utf8_full():
	Use utf8_enforce() instead of complete_iconv() if the current locale
	is UTF-8.
unicode_decompose_init():
	Added code that should either trigger bug #1211413 or work as
	regression test.

------------------------------------------------------------------------
r8665 | cbiere | 2005-07-18 10:13:16 -0400 (Mon, 18 Jul 2005) | 3 lines

http_content_range_parse():
	Fixed comment.

------------------------------------------------------------------------
r8664 | cbiere | 2005-07-15 17:16:26 -0400 (Fri, 15 Jul 2005) | 2 lines

Added further ranges.

------------------------------------------------------------------------
r8648 | daichik | 2005-07-14 04:49:54 -0400 (Thu, 14 Jul 2005) | 5 lines

Fixed fatal mistranslation for 'jump'.
Modified translations for 'QRP', etc.
	some translations would ignore conventional ones.
Added TODO.

------------------------------------------------------------------------
r8602 | daichik | 2005-07-10 13:17:42 -0400 (Sun, 10 Jul 2005) | 2 lines

Modified translations at search stats pane.

------------------------------------------------------------------------
r8573 | daichik | 2005-07-08 10:39:44 -0400 (Fri, 08 Jul 2005) | 2 lines

Replaced '@todo' tag with '@bug' at the comments.

------------------------------------------------------------------------
r8570 | daichik | 2005-07-08 07:55:47 -0400 (Fri, 08 Jul 2005) | 2 lines

Added 'Plural-Forms:' directive at the header.

------------------------------------------------------------------------
r8569 | cbiere | 2005-07-07 19:44:32 -0400 (Thu, 07 Jul 2005) | 2 lines

Added 72.35.224.0/24 due to GWebCache polling.

------------------------------------------------------------------------
r8568 | cbiere | 2005-07-07 19:42:28 -0400 (Thu, 07 Jul 2005) | 2 lines

Added 63.218.20.0/24 due to GWebCache polling.

------------------------------------------------------------------------
r8560 | daichik | 2005-07-07 10:29:36 -0400 (Thu, 07 Jul 2005) | 2 lines

Updated with the latest codes.

------------------------------------------------------------------------
r8559 | daichik | 2005-07-07 10:14:36 -0400 (Thu, 07 Jul 2005) | 2 lines

Fixed wrong gettext() usage.

------------------------------------------------------------------------
r8558 | daichik | 2005-07-07 10:07:20 -0400 (Thu, 07 Jul 2005) | 2 lines

Added more translatable strings.

------------------------------------------------------------------------
r8557 | daichik | 2005-07-07 10:04:14 -0400 (Thu, 07 Jul 2005) | 2 lines

Added _() at the places strings are actually used.

------------------------------------------------------------------------
r8551 | daichik | 2005-07-07 08:59:23 -0400 (Thu, 07 Jul 2005) | 2 lines

Modified comments for Doxygen.

------------------------------------------------------------------------
r8550 | daichik | 2005-07-07 08:57:31 -0400 (Thu, 07 Jul 2005) | 2 lines

Added translatable strins.

------------------------------------------------------------------------
r8535 | cbiere | 2005-07-06 11:53:04 -0400 (Wed, 06 Jul 2005) | 2 lines

Disabled search stats because they can lock up the GUI.

------------------------------------------------------------------------
r8529 | cbiere | 2005-07-04 11:59:25 -0400 (Mon, 04 Jul 2005) | 2 lines

Restore the column width of the Search Stats pane on restart.

------------------------------------------------------------------------
r8526 | cbiere | 2005-07-04 08:39:02 -0400 (Mon, 04 Jul 2005) | 2 lines

Bumped date due to bugfixes.

------------------------------------------------------------------------
r8513 | cbiere | 2005-07-04 03:40:19 -0400 (Mon, 04 Jul 2005) | 2 lines

Added const-qualifiers as requested by Markus Elfring in RFE #1231780.

------------------------------------------------------------------------
r8512 | cbiere | 2005-07-04 03:38:36 -0400 (Mon, 04 Jul 2005) | 2 lines

Added deconstify_gpointer().

------------------------------------------------------------------------
r8511 | cbiere | 2005-07-04 02:48:17 -0400 (Mon, 04 Jul 2005) | 3 lines

Added const-qualifiers as requested by Markus Elfring in RFE #1231780.
Replaced diverse integer types with size_t.

------------------------------------------------------------------------
r8507 | cbiere | 2005-07-03 10:27:43 -0400 (Sun, 03 Jul 2005) | 6 lines

gm_sanitize_filename():
	Previously, ``ext'' could be longer than ``ext_size''. Thus using
	strncpy() might have caused an unterminated string which caused
	an assertion failure. This isn't the case any longer but memcpy()
	and poking an explicit NUL byte is still safer.

------------------------------------------------------------------------
r8506 | cbiere | 2005-07-03 10:16:50 -0400 (Sun, 03 Jul 2005) | 5 lines

gm_sanitize_filename():
	Fixed bug: If the string after the last '.' in a filename was too
	long, the UTF-8 encoding could be destroyed. To preserve the
	encoding, too long filename extensions are now ignored.

------------------------------------------------------------------------
r8505 | cbiere | 2005-07-03 08:57:14 -0400 (Sun, 03 Jul 2005) | 3 lines

Local copy of
http://mirrors.isc.org/pub/www.watersprings.org/pub/id/draft-nielsen-dime-02.txt

------------------------------------------------------------------------
r8504 | cbiere | 2005-07-03 08:34:37 -0400 (Sun, 03 Jul 2005) | 5 lines

dime_ceil():
	Simplified.
dime_parse_record_header():
	Fixed typo/thinko.

------------------------------------------------------------------------
r8503 | cbiere | 2005-07-03 07:56:31 -0400 (Sun, 03 Jul 2005) | 4 lines

find_message():
	Suppress bogus warning about non-reached break statement of the
	BINARY_SEARCH() macro.

------------------------------------------------------------------------
r8497 | cbiere | 2005-07-03 01:58:40 -0400 (Sun, 03 Jul 2005) | 2 lines

Added properties http_debug, download_debug and upload_debug.

------------------------------------------------------------------------
r8496 | daichik | 2005-07-03 01:54:20 -0400 (Sun, 03 Jul 2005) | 2 lines

Modified translations for 'firewall'.

------------------------------------------------------------------------
r8495 | cbiere | 2005-07-03 01:47:25 -0400 (Sun, 03 Jul 2005) | 2 lines

Added missing parameter '-m'.

------------------------------------------------------------------------
r8494 | cbiere | 2005-07-03 01:34:38 -0400 (Sun, 03 Jul 2005) | 2 lines

Added special AOL case provided by Jamie Jones.

------------------------------------------------------------------------
r8491 | daichik | 2005-07-03 00:33:48 -0400 (Sun, 03 Jul 2005) | 2 lines

Modified translations for 'Partial File Sharing'.

------------------------------------------------------------------------
r8488 | cbiere | 2005-07-02 19:47:51 -0400 (Sat, 02 Jul 2005) | 2 lines

Added ranges of net-sentry due to webcache polling.

------------------------------------------------------------------------
r8487 | cbiere | 2005-07-02 07:09:43 -0400 (Sat, 02 Jul 2005) | 2 lines

Sort "Status" column of Downloads->Files by current state and file percentage.

------------------------------------------------------------------------
r8469 | daichik | 2005-07-01 10:21:11 -0400 (Fri, 01 Jul 2005) | 2 lines

Updated again.

------------------------------------------------------------------------
r8468 | daichik | 2005-07-01 10:17:44 -0400 (Fri, 01 Jul 2005) | 2 lines

Reverted translatable strings, that cause problem on becoming Ultrapeer.

------------------------------------------------------------------------
r8454 | daichik | 2005-07-01 06:24:18 -0400 (Fri, 01 Jul 2005) | 2 lines

Updated with the latest POT file.

------------------------------------------------------------------------
r8453 | daichik | 2005-07-01 06:22:57 -0400 (Fri, 01 Jul 2005) | 5 lines

Updated and modified insufficient initial comment box.

For translators, of course you can re-modify these but don't forget to
provide sufficient information for the other (future) translators.

------------------------------------------------------------------------
r8452 | daichik | 2005-07-01 06:15:57 -0400 (Fri, 01 Jul 2005) | 2 lines

Updated with the latest CVS codes.

------------------------------------------------------------------------
r8450 | daichik | 2005-07-01 05:48:01 -0400 (Fri, 01 Jul 2005) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r8444 | daichik | 2005-07-01 05:35:52 -0400 (Fri, 01 Jul 2005) | 2 lines

Fixed and modified at comments for Doxygen.

------------------------------------------------------------------------
r8443 | daichik | 2005-07-01 05:28:12 -0400 (Fri, 01 Jul 2005) | 15 lines

Modified and added translatable strings.

The spaces in "%d / %d" are now omitted to have correspond with:

    #: src/core/downloads.c:5768
    #, c-format
    msgid "Queued (slot %d/%d) ETA: %s"

    #: src/ui/gtk/settings.c:1180
    #, c-format
    msgid "%u/%u host (%u%%)"
    msgid_plural "%u/%u hosts (%u%%)"

Translated units would be easy to read for Japanese.

------------------------------------------------------------------------
r8424 | cbiere | 2005-06-30 01:10:44 -0400 (Thu, 30 Jun 2005) | 3 lines

Connect ``checkbutton_enable_browse_host'' with property
	``browse_host_enabled''.

------------------------------------------------------------------------
r8423 | cbiere | 2005-06-29 23:03:26 -0400 (Wed, 29 Jun 2005) | 3 lines

Initial limited support for the Browse Host extension (HTML only;
	disabled by default).

------------------------------------------------------------------------
r8422 | cbiere | 2005-06-29 22:59:28 -0400 (Wed, 29 Jun 2005) | 3 lines

flush_match():
	Advertise the Browse Host support if enabled by GGEP BH.

------------------------------------------------------------------------
r8421 | cbiere | 2005-06-29 22:54:57 -0400 (Wed, 29 Jun 2005) | 3 lines

Added checkbutton_enable_browse_host at Preferences->Network->Misc
	which controls the ``browse_host_enabled'' property.

------------------------------------------------------------------------
r8420 | cbiere | 2005-06-29 22:51:15 -0400 (Wed, 29 Jun 2005) | 4 lines

Added locale_is_utf8().
utf8_to_locale():
	Use locale_is_utf8() instead of strcmp() each time.

------------------------------------------------------------------------
r8419 | cbiere | 2005-06-29 22:47:28 -0400 (Wed, 29 Jun 2005) | 2 lines

Added safer cast `cast_to_gchar_ptr().

------------------------------------------------------------------------
r8418 | cbiere | 2005-06-29 22:46:41 -0400 (Wed, 29 Jun 2005) | 2 lines

Added property "browse_host_enabled".

------------------------------------------------------------------------
r8414 | rmanfredi | 2005-06-29 13:04:16 -0400 (Wed, 29 Jun 2005) | 2 lines

Version of 2005-06-29.

------------------------------------------------------------------------
r8413 | rmanfredi | 2005-06-29 13:03:00 -0400 (Wed, 29 Jun 2005) | 4 lines

Was mistakenly thinking it was reading data from the network whereas it
simply had socket connections timeouting.  Therefore, the "offline" status
was never activated after an Internet connection breakdown (fixes #1144460).

------------------------------------------------------------------------
r8412 | rmanfredi | 2005-06-29 12:58:38 -0400 (Wed, 29 Jun 2005) | 2 lines

Made sure lines are stricly smaller than 80 chars.

------------------------------------------------------------------------
r8411 | rmanfredi | 2005-06-29 12:57:58 -0400 (Wed, 29 Jun 2005) | 3 lines

Made sure lines are stricly smaller than 80 chars.
Added the BS_F_DATA_READ flag to know when we actually read data.

------------------------------------------------------------------------
r8394 | daichik | 2005-06-29 10:24:29 -0400 (Wed, 29 Jun 2005) | 2 lines

Fixed and modified at the comment boxes for Doxygen.

------------------------------------------------------------------------
r8385 | cbiere | 2005-06-27 16:05:42 -0400 (Mon, 27 Jun 2005) | 2 lines

Added doxygen comment for is_pow2().

------------------------------------------------------------------------
r8383 | cbiere | 2005-06-27 15:48:24 -0400 (Mon, 27 Jun 2005) | 3 lines

Provide this documented under the Creative Commons Public License (CCPL).
Added list of authors.

------------------------------------------------------------------------
r8382 | cbiere | 2005-06-27 15:37:24 -0400 (Mon, 27 Jun 2005) | 2 lines

Minor corrections.

------------------------------------------------------------------------
r8380 | cbiere | 2005-06-27 09:06:36 -0400 (Mon, 27 Jun 2005) | 2 lines

Edited comments.

------------------------------------------------------------------------
r8379 | cbiere | 2005-06-27 08:39:48 -0400 (Mon, 27 Jun 2005) | 3 lines

Edited description of STATIC_ASSERT() so that the brief description isn't
	truncated by "e.g.".

------------------------------------------------------------------------
r8378 | graaff | 2005-06-25 02:49:42 -0400 (Sat, 25 Jun 2005) | 2 lines

Minor documentation fixes.

------------------------------------------------------------------------
r8377 | daichik | 2005-06-24 23:39:07 -0400 (Fri, 24 Jun 2005) | 2 lines

Modified section 2.1 for detailed commenting, added Doxygen related sub-section at 2.2.1.

------------------------------------------------------------------------
r8376 | daichik | 2005-06-24 21:37:45 -0400 (Fri, 24 Jun 2005) | 2 lines

Modified at comment boxies so that they can be persed properly via Doxygen.

------------------------------------------------------------------------
r8375 | cbiere | 2005-06-24 12:43:01 -0400 (Fri, 24 Jun 2005) | 3 lines

Removed bogus instance of ul_stats. There's a typedef missing but this type
	is not used anyway.

------------------------------------------------------------------------
r8374 | guruz | 2005-06-24 10:27:56 -0400 (Fri, 24 Jun 2005) | 2 lines

commit test / email change

------------------------------------------------------------------------
r8372 | daichik | 2005-06-24 09:46:08 -0400 (Fri, 24 Jun 2005) | 2 lines

Added a space.

------------------------------------------------------------------------
r8371 | daichik | 2005-06-24 09:44:55 -0400 (Fri, 24 Jun 2005) | 2 lines

Changed name gtk-gnutella to Gtk-Gnutella.

------------------------------------------------------------------------
r8370 | daichik | 2005-06-24 09:43:50 -0400 (Fri, 24 Jun 2005) | 2 lines

Updated with Doxygen 1.4.2 and added ignoring directory.

------------------------------------------------------------------------
r8369 | daichik | 2005-06-24 09:42:26 -0400 (Fri, 24 Jun 2005) | 2 lines

Added Thomas Schuerger, Paco Arjonilla to the translator list.

------------------------------------------------------------------------
r8368 | daichik | 2005-06-23 08:37:12 -0400 (Thu, 23 Jun 2005) | 2 lines

Updated and bumped to 0.96u in Project-Id-Version

------------------------------------------------------------------------
r8367 | daichik | 2005-06-23 08:32:21 -0400 (Thu, 23 Jun 2005) | 2 lines

Updated translations

------------------------------------------------------------------------
r8366 | daichik | 2005-06-23 08:31:12 -0400 (Thu, 23 Jun 2005) | 2 lines

Updated using update-po

------------------------------------------------------------------------
r8365 | daichik | 2005-06-22 20:18:01 -0400 (Wed, 22 Jun 2005) | 2 lines

Added translatable strings at info columns.

------------------------------------------------------------------------
r8364 | daichik | 2005-06-22 11:12:25 -0400 (Wed, 22 Jun 2005) | 2 lines

Updated for additional strings.

------------------------------------------------------------------------
r8363 | daichik | 2005-06-22 11:07:09 -0400 (Wed, 22 Jun 2005) | 2 lines

Added new group, short description and corrected typo.

------------------------------------------------------------------------
r8362 | cbiere | 2005-06-11 01:01:37 -0400 (Sat, 11 Jun 2005) | 3 lines

locale_to_utf8_normalized():
	Fixed a possible heap overflow.

------------------------------------------------------------------------
r8361 | trancetip | 2005-06-10 06:22:33 -0400 (Fri, 10 Jun 2005) | 2 lines

Fixed and extended the sanity check for Content-Range headers.

------------------------------------------------------------------------
r8360 | cbiere | 2005-06-09 18:01:30 -0400 (Thu, 09 Jun 2005) | 2 lines

Added a range of Exodus and open proxies.

------------------------------------------------------------------------
r8359 | cbiere | 2005-06-08 22:43:02 -0400 (Wed, 08 Jun 2005) | 2 lines

Back to the future.

------------------------------------------------------------------------
r8358 | trancetip | 2005-06-08 15:11:32 -0400 (Wed, 08 Jun 2005) | 3 lines

Fixed requested range end in "Range mismatch" messages (now decremented
by 1).

------------------------------------------------------------------------
r8357 | trancetip | 2005-06-08 14:30:24 -0400 (Wed, 08 Jun 2005) | 3 lines

Hopefully corrected the off-by-1-byte issue for range intersection checks
(should fix "Range mismatch" warnings and enable proper downloading again).

------------------------------------------------------------------------
r8356 | cbiere | 2005-06-06 04:54:17 -0400 (Mon, 06 Jun 2005) | 4 lines

file_path_changed():
	Do not reset the paths to their defaults, even if the directories do
	not exist and cannot be created.

------------------------------------------------------------------------
r8355 | cbiere | 2005-05-30 18:25:11 -0400 (Mon, 30 May 2005) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r8354 | cbiere | 2005-05-30 18:23:57 -0400 (Mon, 30 May 2005) | 6 lines

filter_rule_condition_to_gchar():
	Catch ``upper == lower'' first so that the wording is correct
	for a zero-size filter.
	Add 1 to the size for "smaller than" so that the wording is correct
	as the actual code uses the smaller-or-equal operator.

------------------------------------------------------------------------
r8353 | cbiere | 2005-05-30 18:20:30 -0400 (Mon, 30 May 2005) | 4 lines

filter_gui_get_size_rule():
	Set the negate-flag and adjust the boundaries if the user
	enters a "minimum size" rule. Addresses bug #1211570.

------------------------------------------------------------------------
r8352 | cbiere | 2005-05-29 13:18:26 -0400 (Sun, 29 May 2005) | 2 lines

Added const-qualifiers to fix compiler warnings.

------------------------------------------------------------------------
r8351 | cbiere | 2005-05-29 13:11:16 -0400 (Sun, 29 May 2005) | 2 lines

Fixed compile error.

------------------------------------------------------------------------
r8350 | graaff | 2005-05-29 04:48:43 -0400 (Sun, 29 May 2005) | 2 lines

Doxygen updates from Daichi Kawahata.

------------------------------------------------------------------------
r8349 | cbiere | 2005-05-26 16:29:35 -0400 (Thu, 26 May 2005) | 2 lines

Added a bunch of open proxies.

------------------------------------------------------------------------
r8348 | cbiere | 2005-05-26 08:49:43 -0400 (Thu, 26 May 2005) | 4 lines

download_request():
	Fixed off-by-one causing a range mismatch when requesting the
	last byte of a file. Addresses bug #1208848 and possibly #1123904.

------------------------------------------------------------------------
r8347 | cbiere | 2005-05-24 16:53:50 -0400 (Tue, 24 May 2005) | 2 lines

Added more open proxies.

------------------------------------------------------------------------
r8346 | graaff | 2005-05-23 10:59:40 -0400 (Mon, 23 May 2005) | 2 lines

Properly install gtk-gnutella.desktop file.

------------------------------------------------------------------------
r8345 | graaff | 2005-05-23 10:13:39 -0400 (Mon, 23 May 2005) | 2 lines

Updates from Daichi Kawahata.

------------------------------------------------------------------------
r8344 | cbiere | 2005-05-23 10:12:48 -0400 (Mon, 23 May 2005) | 2 lines

Added a bunch of open proxies.

------------------------------------------------------------------------
r8343 | cbiere | 2005-05-22 16:01:51 -0400 (Sun, 22 May 2005) | 2 lines

Updated links.

------------------------------------------------------------------------
r8340 | graaff | 2005-05-22 11:33:45 -0400 (Sun, 22 May 2005) | 2 lines

Release 0.95.3 stable.

------------------------------------------------------------------------
r8339 | graaff | 2005-05-22 11:04:41 -0400 (Sun, 22 May 2005) | 2 lines

Minor edits to better reflect actual process.

------------------------------------------------------------------------
r8338 | cbiere | 2005-05-20 09:32:26 -0400 (Fri, 20 May 2005) | 6 lines

upload_request():
	"Requesting Too Much" is triggered too easily when using large
	overlap check sizes. Bumped it too 10%. Replaced floating point
	arithmetic with integer arithmetic because 64-bit values might
	exceed the possible ranges of floating point variables.

------------------------------------------------------------------------
r8337 | cbiere | 2005-05-20 05:40:59 -0400 (Fri, 20 May 2005) | 5 lines

socket_set_linger():
	Use TCP_LINGER2 if defined because SO_LINGER with 0 as timeout
	does not have the desired effect of a hard connection abort on
	Linux.

------------------------------------------------------------------------
r8336 | cbiere | 2005-05-18 14:52:12 -0400 (Wed, 18 May 2005) | 5 lines

Added property browser to Preferences->Debugging which shows all core
	properties, their values and descriptions. It's also possible to
	modify the value. This is much more comfortable than adding a
	widget for each (debug) setting.

------------------------------------------------------------------------
r8335 | cbiere | 2005-05-18 14:48:13 -0400 (Wed, 18 May 2005) | 8 lines

Added prop_description(), prop_get_by_regex().
Recycled load_helper() as prop_set_from_string().
prop_name():
	Added const-qualifier.
prop_to_string():
	Added const-qualifier.
	Make sure we don't pass NULL as src to g_strlcpy().

------------------------------------------------------------------------
r8334 | cbiere | 2005-05-18 14:44:51 -0400 (Wed, 18 May 2005) | 3 lines

Style fixes.
Added some property accessor functions.

------------------------------------------------------------------------
r8333 | cbiere | 2005-05-17 10:48:51 -0400 (Tue, 17 May 2005) | 2 lines

Changed vmsg_send_proxy_ack() to static function.

------------------------------------------------------------------------
r8332 | cbiere | 2005-05-16 01:17:10 -0400 (Mon, 16 May 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8331 | cbiere | 2005-05-16 01:13:05 -0400 (Mon, 16 May 2005) | 5 lines

Changed vmsg_send_proxy_ack() to static function.
vmsg_send_tcp_connect_back():
vmsg_send_udp_connect_back():
	Make sure we never send such message with port zero.

------------------------------------------------------------------------
r8330 | cbiere | 2005-05-16 01:05:39 -0400 (Mon, 16 May 2005) | 3 lines

tx_dgram_write_error():
	Added EADDRNOTAVAIL.

------------------------------------------------------------------------
r8329 | cbiere | 2005-05-16 01:03:53 -0400 (Mon, 16 May 2005) | 3 lines

build_pong_msg():
	Hide debug message for GGEP IP if not debugging.

------------------------------------------------------------------------
r8328 | cbiere | 2005-05-16 01:02:31 -0400 (Mon, 16 May 2005) | 3 lines

struct oob_results:
	Removed unnecessary variable ``expired'' again.

------------------------------------------------------------------------
r8327 | cbiere | 2005-05-16 01:00:41 -0400 (Mon, 16 May 2005) | 4 lines

node_tsync_udp():
	n->tsync_ev must be cleared or re-initialized.
Do not send TCP or UDP connect back requests, if listen_port is zero.

------------------------------------------------------------------------
r8326 | cbiere | 2005-05-15 22:31:26 -0400 (Sun, 15 May 2005) | 2 lines

Added hosts used by Konstantin Goudkov to spam advertisements.

------------------------------------------------------------------------
r8325 | cbiere | 2005-05-15 07:28:13 -0400 (Sun, 15 May 2005) | 3 lines

struct gnutella_node:
	Changed status to enum.

------------------------------------------------------------------------
r8324 | cbiere | 2005-05-15 07:26:25 -0400 (Sun, 15 May 2005) | 3 lines

Made hbox97 visible again which contains the "Remove filter" button and
	the "enable" checkbox for filters.

------------------------------------------------------------------------
r8323 | cbiere | 2005-05-15 06:53:55 -0400 (Sun, 15 May 2005) | 4 lines

Replace READ_*/WRITE_* macros with peek/poke functions.
Fixed reading/writing of struct timeval values for platforms on which time_t
	has more than 32 bits.

------------------------------------------------------------------------
r8322 | cbiere | 2005-05-15 06:50:37 -0400 (Sun, 15 May 2005) | 2 lines

Added alternate peek/poke functions.

------------------------------------------------------------------------
r8321 | cbiere | 2005-05-15 03:22:54 -0400 (Sun, 15 May 2005) | 5 lines

Corrected installation steps for main icon:
	Make sure the directory exists.
	GNU install does not accept a directory as target but wants the
	full target pathname.

------------------------------------------------------------------------
r8320 | cbiere | 2005-05-14 23:48:55 -0400 (Sat, 14 May 2005) | 3 lines

tx_link_write_error():
	Revert to node_shutdown(); cannot call node_remove() from here.

------------------------------------------------------------------------
r8319 | cbiere | 2005-05-14 23:08:28 -0400 (Sat, 14 May 2005) | 4 lines

tx_link_write_error():
	Use node_remove() instead of node_shutdown() if write() failed
	with EPIPE or ECONNRESET because the connection is already dead.

------------------------------------------------------------------------
r8318 | cbiere | 2005-05-14 21:11:06 -0400 (Sat, 14 May 2005) | 3 lines

sock_tx_shutdown():
	Ignore ENOTCONN from shutdown() as well.

------------------------------------------------------------------------
r8317 | cbiere | 2005-05-14 21:08:21 -0400 (Sat, 14 May 2005) | 12 lines

oob_send_reply_ind():
	Increase refcount only here since these are "critical" references.
results_free_remove():
	Keep the results around until r->ev_expire triggers or r->refcount
	reaches zero.
oob_pmsg_free():
	Removed assertion "r->ev_timeout == NULL" because this may legally
	happen if several replies were queued instead of delivered
	immediately. If r->ev_timeout is already set, we remove reference
	instead.
Removed unnecessary casts and parentheses.

------------------------------------------------------------------------
r8316 | cbiere | 2005-05-14 20:54:04 -0400 (Sat, 14 May 2005) | 6 lines

mq_udp_putq():
	Changed type of "size" to size_t.
	Changed type of "written" to ssize_t.
	Disabled extra debugging check as there doesn't seem to be any problem
	here.

------------------------------------------------------------------------
r8315 | cbiere | 2005-05-14 15:39:24 -0400 (Sat, 14 May 2005) | 3 lines

socket_plain_sendto():
	Show errno if sendto() failed and udp_debug is set.

------------------------------------------------------------------------
r8314 | cbiere | 2005-05-14 05:11:04 -0400 (Sat, 14 May 2005) | 2 lines

Removed spurious slash.

------------------------------------------------------------------------
r8313 | cbiere | 2005-05-14 05:09:22 -0400 (Sat, 14 May 2005) | 4 lines

download_send_request():
	Corrected type of "start" from guint32 to filesize_t.
	Changed type of "sent" from gint to ssize_t.

------------------------------------------------------------------------
r8312 | cbiere | 2005-05-14 00:15:11 -0400 (Sat, 14 May 2005) | 4 lines

Style fixes.
print_hsep_table():
	Renamed variables for better readability.

------------------------------------------------------------------------
r8311 | cbiere | 2005-05-14 00:11:04 -0400 (Sat, 14 May 2005) | 3 lines

configured_peermode_changed():
	Do not enforce leaf mode if TCP-firewalled.

------------------------------------------------------------------------
r8310 | cbiere | 2005-05-14 00:08:43 -0400 (Sat, 14 May 2005) | 3 lines

node_slow_timer():
	Accept demotion to leaf mode in auto mode only.

------------------------------------------------------------------------
r8309 | cbiere | 2005-05-14 00:06:16 -0400 (Sat, 14 May 2005) | 5 lines

hsep_send_msg():
	Fixed breach caused by recent changes: The first triple was not
	properly initialized.
Show the node's peer address instead of the internal pointer.

------------------------------------------------------------------------
r8308 | cbiere | 2005-05-12 20:55:27 -0400 (Thu, 12 May 2005) | 2 lines

Back to future. Watch out this is the Friday the 13th version!

------------------------------------------------------------------------
r8307 | cbiere | 2005-05-12 16:37:05 -0400 (Thu, 12 May 2005) | 5 lines

vmsg_send_messages_supported():
	Fill the header after the payload since T_0000 entries will be
	removed from the list of supported messages. Otherwise, the
	last entries will contain random dirt.

------------------------------------------------------------------------
r8306 | cbiere | 2005-05-12 04:46:07 -0400 (Thu, 12 May 2005) | 9 lines

socket_set_linger():
	Set linger delay to 0 so that connections are closed with RST.
sock_tx_shutdown():
	Check whether the socket was shut down before.
	Ignore EINVAL from shutdown(); may happen if connect() failed.
socket_free():
	Call sock_tx_shutdown() before close() so that the remote peer has
	a chance to see the FIN before the RST.

------------------------------------------------------------------------
r8305 | cbiere | 2005-05-12 04:41:06 -0400 (Thu, 12 May 2005) | 2 lines

Moved hsep variables to hsep_ctx_t.

------------------------------------------------------------------------
r8304 | cbiere | 2005-05-12 03:42:33 -0400 (Thu, 12 May 2005) | 5 lines

handle_qstat_req():
	Instead of setting hits to the magic value 0xffff to terminate
	the leaf guided query, it was set to 0xfffe indicating 65534
	available results.

------------------------------------------------------------------------
r8303 | cbiere | 2005-05-12 02:31:13 -0400 (Thu, 12 May 2005) | 3 lines

Moved hsep variables to their own struct.
Changed some functions to static.

------------------------------------------------------------------------
r8302 | cbiere | 2005-05-11 23:21:30 -0400 (Wed, 11 May 2005) | 4 lines

Added const-qualifiers.
Removed unnecessary "sizeof" parentheses.
Replaced casts with safer casts.

------------------------------------------------------------------------
r8301 | cbiere | 2005-05-11 23:19:01 -0400 (Wed, 11 May 2005) | 2 lines

Added core property ``hsep_debug''.

------------------------------------------------------------------------
r8300 | cbiere | 2005-05-11 23:15:14 -0400 (Wed, 11 May 2005) | 6 lines

Style fixes.
Removed unnecessary casts and parentheses.
Replaced most pointer arithmetic with array arithmetic.
Added hsep_random_skew so that time_t is used most portable.
Derive array lengths from real instead of HSEP_N_MAX where possible.

------------------------------------------------------------------------
r8299 | cbiere | 2005-05-11 01:05:34 -0400 (Wed, 11 May 2005) | 2 lines

Added a bad range of Exodus Communications.

------------------------------------------------------------------------
r8298 | cbiere | 2005-05-10 19:26:37 -0400 (Tue, 10 May 2005) | 2 lines

Replaced BearShare's GWebCache.

------------------------------------------------------------------------
r8292 | graaff | 2005-05-10 16:38:17 -0400 (Tue, 10 May 2005) | 2 lines

Release 0.95.2 stable.

------------------------------------------------------------------------
r8291 | graaff | 2005-05-10 16:11:00 -0400 (Tue, 10 May 2005) | 2 lines

Release 0.95.2 stable.

------------------------------------------------------------------------
r8290 | cbiere | 2005-05-10 15:50:46 -0400 (Tue, 10 May 2005) | 4 lines

handle_features_supported():
handle_messages_supported():
	Match exactly the bitwidth as used by READ_GUINT16_LE().

------------------------------------------------------------------------
r8289 | cbiere | 2005-05-10 15:47:14 -0400 (Tue, 10 May 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8288 | cbiere | 2005-05-10 15:38:25 -0400 (Tue, 10 May 2005) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r8287 | cbiere | 2005-05-10 15:37:01 -0400 (Tue, 10 May 2005) | 9 lines

message_dump():
	Fixed #1198823, was using READ_GUINT32_LE() instead of
	READ_GUINT16_LE().
	Removed unused code that should not be reached.
node_read():
	Don't call message_dump() from here, it's too noisy.
node_parse():
	Call message_dump() in debug mode only, it's too noisy.

------------------------------------------------------------------------
r8286 | cbiere | 2005-05-10 15:26:28 -0400 (Tue, 10 May 2005) | 2 lines

Make sure the target variable used by READ_* macros has the proper size.

------------------------------------------------------------------------
r8285 | cbiere | 2005-05-09 16:45:44 -0400 (Mon, 09 May 2005) | 2 lines

Added GWebCache/UHC.

------------------------------------------------------------------------
r8284 | cbiere | 2005-05-08 18:28:33 -0400 (Sun, 08 May 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8283 | cbiere | 2005-05-08 18:09:23 -0400 (Sun, 08 May 2005) | 9 lines

node_crawl_fill():
node_timer():
	Make sure the result of delta_time() is treated as a signed integer.
node_set_current_peermode():
	Initialize ``old_mode'' with ``configured_peermode'' so that we
	don't disconnect from the first nodes with "Becoming a leaf node"
	in leaf mode which harms the whitelist feature.
	Don't disconnect if the previous and current mode is leaf mode.

------------------------------------------------------------------------
r8282 | cbiere | 2005-05-08 01:11:13 -0400 (Sun, 08 May 2005) | 3 lines

Manually edited so that topless mode compiles fine.
gui_props.ag etc. are not used by topless mode at all.

------------------------------------------------------------------------
r8281 | cbiere | 2005-05-08 00:41:14 -0400 (Sun, 08 May 2005) | 2 lines

Dummy definitions and prototypes for topless mode.

------------------------------------------------------------------------
r8280 | cbiere | 2005-05-08 00:37:38 -0400 (Sun, 08 May 2005) | 2 lines

Corrected include path for topless mode.

------------------------------------------------------------------------
r8279 | cbiere | 2005-05-08 00:36:28 -0400 (Sun, 08 May 2005) | 3 lines

Style fixes.
Prepared for topless mode.

------------------------------------------------------------------------
r8278 | cbiere | 2005-05-07 17:26:02 -0400 (Sat, 07 May 2005) | 2 lines

Added ranges of corrupted WMV spammers.

------------------------------------------------------------------------
r8277 | cbiere | 2005-05-07 16:09:33 -0400 (Sat, 07 May 2005) | 7 lines

node_became_firewalled():
	Send a TCP connect back request to 3 connected peers to clear
	the is_firewalled state if possible.
Added node_became_udp_firewalled():
	Send an UDP connect back request to 3 connected peers to clear
	the is_udp_firewalled state if possible.

------------------------------------------------------------------------
r8276 | cbiere | 2005-05-07 16:07:13 -0400 (Sat, 07 May 2005) | 3 lines

inet_udp_firewalled():
	Call node_became_udp_firewalled().

------------------------------------------------------------------------
r8275 | cbiere | 2005-05-07 16:05:33 -0400 (Sat, 07 May 2005) | 5 lines

qrp_hashcode():
	Minor change for better readability.
test_hash():
	Added test cases.

------------------------------------------------------------------------
r8274 | cbiere | 2005-05-07 12:25:39 -0400 (Sat, 07 May 2005) | 4 lines

Removed unnecessary casts and parentheses.
Use delta_time().
Don't use time_t for time differences.

------------------------------------------------------------------------
r8273 | graaff | 2005-05-07 09:19:24 -0400 (Sat, 07 May 2005) | 3 lines

Do not automatically rebuild the interface files using glade, even if
needed. There are to many problems with subtle version differences.

------------------------------------------------------------------------
r8272 | cbiere | 2005-05-06 17:49:25 -0400 (Fri, 06 May 2005) | 2 lines

Back to the future.

------------------------------------------------------------------------
r8271 | rmanfredi | 2005-05-06 14:49:07 -0400 (Fri, 06 May 2005) | 2 lines

Updated Debian's changelog to be able to build a 0.95.1 version.

------------------------------------------------------------------------
r8266 | graaff | 2005-05-06 09:21:35 -0400 (Fri, 06 May 2005) | 2 lines

Add utf8_tables.h.

------------------------------------------------------------------------
r8265 | graaff | 2005-05-06 08:49:27 -0400 (Fri, 06 May 2005) | 2 lines

Release 0.95.1 stable.

------------------------------------------------------------------------
r8264 | cbiere | 2005-05-06 00:16:47 -0400 (Fri, 06 May 2005) | 2 lines

Corrected Project-Id-Version to 0.95.1.

------------------------------------------------------------------------
r8263 | cbiere | 2005-05-05 22:45:56 -0400 (Thu, 05 May 2005) | 4 lines

gui_create_dlg_about():
	Fixed bug that caused to show only the first few contributors
	since the last commit.

------------------------------------------------------------------------
r8262 | cbiere | 2005-05-05 21:42:56 -0400 (Thu, 05 May 2005) | 3 lines

locale_to_utf8():
	Added const-qualifier to return type.

------------------------------------------------------------------------
r8261 | cbiere | 2005-05-05 21:42:09 -0400 (Thu, 05 May 2005) | 24 lines

Fixed weird indentation caused by laying something on the space bar.
Allow also an empty string where utf8_is_valid_string() is used as
	assertion check.
locale_to_utf8():
	Added const-qualifer to return type.
unicode_compose_init():
	Added test cases.
Added unused utf32_is_decomposed_char(), utf32_is_decomposed(),
	utf8_is_decomposed().
utf32_combining_class():
utf8_canonical_sorted():
	Minor optimization for ASCII.
Added utf32_is_non_character().
utf32_filter_char():
	Use utf32_is_non_character() so that non-characters are not
	treated as unassigned characters.
utf32_compose():
	Added assertion checks.
	Corrected according to recent issue:
	http://www.unicode.org/versions/corrigendum5.html
utf32_normalize():
	For UNI_NORM_NFD and UNI_NORM_NFKD the local buffer was returned
	instead of a copy.

------------------------------------------------------------------------
r8260 | cbiere | 2005-05-05 16:36:36 -0400 (Thu, 05 May 2005) | 3 lines

tigertree_step_compute():
	Cast argument to match the format string.

------------------------------------------------------------------------
r8259 | cbiere | 2005-05-05 14:46:58 -0400 (Thu, 05 May 2005) | 9 lines

Added global oob record counter for leak and duplicate free detection.
results_free():
	Free all members as soon as possible but keep the record around
	as long as it's referenced.
free_oob_kv():
	Print a warning if the record was definitely leaked.
oob_shutdown():
	Print a message about possibly leaked records.

------------------------------------------------------------------------
r8258 | cbiere | 2005-05-05 13:15:11 -0400 (Thu, 05 May 2005) | 2 lines

Typo fix: regularily -> regularly (from debian bug report #304585).

------------------------------------------------------------------------
r8257 | cbiere | 2005-05-05 12:56:00 -0400 (Thu, 05 May 2005) | 5 lines

dmesh_retrieve():
	Increased size of ``tmp'' because URL-encoded URLs can really
	be larger than 1023 bytes.
	Also skip over overlong lines.

------------------------------------------------------------------------
r8256 | graaff | 2005-05-05 11:02:30 -0400 (Thu, 05 May 2005) | 2 lines

Regenerated: no longer includes checks for strcasestr and ICU.

------------------------------------------------------------------------
r8255 | graaff | 2005-05-05 11:01:04 -0400 (Thu, 05 May 2005) | 2 lines

Fubar the HAS_ICU token to keep metaconfig from pulling in the ICU tests.

------------------------------------------------------------------------
r8254 | graaff | 2005-05-05 10:59:25 -0400 (Thu, 05 May 2005) | 2 lines

Do not include icuuc library in the list of default libraries.

------------------------------------------------------------------------
r8253 | graaff | 2005-05-05 10:58:46 -0400 (Thu, 05 May 2005) | 3 lines

Do not probe for ICU by default. Don't report on Unicode in the
options summary as this is now always included natively.

------------------------------------------------------------------------
r8252 | graaff | 2005-05-05 10:18:01 -0400 (Thu, 05 May 2005) | 2 lines

Fix compilation problems, from Daichi Kawahata.

------------------------------------------------------------------------
r8251 | graaff | 2005-05-05 06:22:28 -0400 (Thu, 05 May 2005) | 2 lines

Update from Daichi Kawahata.

------------------------------------------------------------------------
r8250 | graaff | 2005-05-05 04:42:44 -0400 (Thu, 05 May 2005) | 2 lines

Initial 0.96 changelog entry.

------------------------------------------------------------------------
r8249 | graaff | 2005-05-05 03:23:53 -0400 (Thu, 05 May 2005) | 2 lines

Removed problematic, bogus Id: strings from .po files.

------------------------------------------------------------------------
r8248 | cbiere | 2005-05-04 16:46:30 -0400 (Wed, 04 May 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8247 | cbiere | 2005-05-04 16:40:16 -0400 (Wed, 04 May 2005) | 8 lines

file_info_shared_sha1():
	Skip locale_to_utf8_full() and use locale_to_utf8_normalized().
	Return NULL if the normalized filenames have zero-length.
file_info_retrieve():
	Use strcmp() to detect whether the filename was not sanitized
	because gm_sanitize_filename() may return a new string for
	unchanged filenames.

------------------------------------------------------------------------
r8246 | cbiere | 2005-05-04 16:33:10 -0400 (Wed, 04 May 2005) | 5 lines

search_gui_new_search_full():
	This created two searches instead of one.
	Convert the query string to the current locale for the GUI and only
	the GUI.

------------------------------------------------------------------------
r8245 | cbiere | 2005-05-04 16:30:45 -0400 (Wed, 04 May 2005) | 4 lines

xml_to_search():
	Keep the query in UTF-8 because converting to the current locale
	might be lossy.

------------------------------------------------------------------------
r8244 | cbiere | 2005-05-04 16:29:21 -0400 (Wed, 04 May 2005) | 6 lines

search_gui_create_record():
	Added variable filename because utf8_to_locale() returns
	now "const gchar *".
search_gui_extract_ext():
	Removed prototype because it's only used internally.

------------------------------------------------------------------------
r8243 | cbiere | 2005-05-04 16:24:30 -0400 (Wed, 04 May 2005) | 7 lines

Added enum type uni_norm_t.
Added utf8_normalize(), locale_to_utf8_normalized().
lazy_utf8_to_locale():
iso_8859_1_to_utf8():
utf8_to_locale():
	Added const-qualifiers.

------------------------------------------------------------------------
r8242 | cbiere | 2005-05-04 16:21:31 -0400 (Wed, 04 May 2005) | 4 lines

gm_sanitize_filename():
	Replaced locale_to_utf8_nfd() with locale_to_utf8_normalized().
	Use UTF-8 NFC except for Darwin.

------------------------------------------------------------------------
r8241 | cbiere | 2005-05-04 16:19:56 -0400 (Wed, 04 May 2005) | 3 lines

recurse_scan():
	Skip locale_to_utf8_full() and use locale_to_utf8_normalized().

------------------------------------------------------------------------
r8240 | cbiere | 2005-05-04 16:12:48 -0400 (Wed, 04 May 2005) | 3 lines

dmesh_retrieve():
	Only check whether the string is long enough for a SHA1.

------------------------------------------------------------------------
r8239 | graaff | 2005-05-04 13:37:24 -0400 (Wed, 04 May 2005) | 3 lines

Doxygen update to split documentation into several subgroups such as
core and interface. Also correctly use 4 spaces for tabs in doxygen.

------------------------------------------------------------------------
r8238 | graaff | 2005-05-04 12:53:26 -0400 (Wed, 04 May 2005) | 2 lines

Update from Daichi Kawahata applied.

------------------------------------------------------------------------
r8237 | cbiere | 2005-05-03 21:50:42 -0400 (Tue, 03 May 2005) | 3 lines

Use g_get_current_time() instead of gettimeofday().
Added const-qualifiers.

------------------------------------------------------------------------
r8236 | cbiere | 2005-05-03 21:29:26 -0400 (Tue, 03 May 2005) | 3 lines

Use "(void *) 0" instead of NULL as termination for functions taking a
	variable number of arguments.

------------------------------------------------------------------------
r8235 | cbiere | 2005-05-03 17:14:55 -0400 (Tue, 03 May 2005) | 13 lines

sha1_read_cache():
	Ignore overlong lines.
dump_cache():
	Emit a warning if the file could not be opened.
dump_cache_one_entry():
	Use cache_entry_print().
add_persistent_cache_entry():
	Emit a warning if the file could not be opened.
	Use cache_entry_print().
	Use fstat() instead of ftell().
add_volatile_cache_entry():
	Style fix.

------------------------------------------------------------------------
r8234 | cbiere | 2005-05-03 17:06:34 -0400 (Tue, 03 May 2005) | 3 lines

xml_to_sha1_rule():
	Fixed so that filtering results without a SHA1 is possible again.

------------------------------------------------------------------------
r8233 | cbiere | 2005-05-03 17:01:07 -0400 (Tue, 03 May 2005) | 2 lines

Changed all definitions of GGEP_F_* from characters to unsigned ints.

------------------------------------------------------------------------
r8232 | cbiere | 2005-05-03 16:59:57 -0400 (Tue, 03 May 2005) | 5 lines

ext_ggep_parse():
	Forgot to replace some references to d_len with len in previous commit,
	causing an assertion failure in cobs_is_valid().
	Changed gint variables to guint.

------------------------------------------------------------------------
r8231 | cbiere | 2005-05-03 15:17:21 -0400 (Tue, 03 May 2005) | 3 lines

node_get_status():
	Fixed signed/unsigned comparison warning.

------------------------------------------------------------------------
r8230 | cbiere | 2005-05-03 15:14:55 -0400 (Tue, 03 May 2005) | 3 lines

Reduced calls to time().
Removed unnecessary casts.

------------------------------------------------------------------------
r8229 | cbiere | 2005-05-03 15:13:44 -0400 (Tue, 03 May 2005) | 3 lines

event_trigger():
	Call time() only if necessary.

------------------------------------------------------------------------
r8228 | cbiere | 2005-05-03 12:01:20 -0400 (Tue, 03 May 2005) | 2 lines

Use socket option SO_LINGER if ``use_so_linger'' is enabled.

------------------------------------------------------------------------
r8227 | cbiere | 2005-05-03 11:58:20 -0400 (Tue, 03 May 2005) | 2 lines

Added property ``use_so_linger''.

------------------------------------------------------------------------
r8226 | cbiere | 2005-05-03 11:56:30 -0400 (Tue, 03 May 2005) | 3 lines

nodes_gui_update_node_info():
	There's no need for ``version'' to be static.

------------------------------------------------------------------------
r8225 | cbiere | 2005-05-03 11:55:31 -0400 (Tue, 03 May 2005) | 3 lines

Removed prototype for non-existing function
	nodes_gui_common_node_info_changed().

------------------------------------------------------------------------
r8224 | cbiere | 2005-05-03 11:54:46 -0400 (Tue, 03 May 2005) | 2 lines

Provide prototype for utf32_to_utf8().

------------------------------------------------------------------------
r8223 | cbiere | 2005-05-03 11:53:40 -0400 (Tue, 03 May 2005) | 2 lines

Minor style fixes.

------------------------------------------------------------------------
r8222 | graaff | 2005-05-02 16:40:02 -0400 (Mon, 02 May 2005) | 2 lines

Updated to be in sync with current .pot file.

------------------------------------------------------------------------
r8221 | graaff | 2005-05-02 16:36:37 -0400 (Mon, 02 May 2005) | 2 lines

Updated using update-po target in preparation for possible release.

------------------------------------------------------------------------
r8220 | cbiere | 2005-05-02 07:09:03 -0400 (Mon, 02 May 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8219 | cbiere | 2005-05-02 07:08:20 -0400 (Mon, 02 May 2005) | 3 lines

test_hash():
	Removed exit().

------------------------------------------------------------------------
r8218 | cbiere | 2005-05-01 21:49:16 -0400 (Sun, 01 May 2005) | 7 lines

qrp_hashcode():
	Modified for compatibility: The character must be converted to
	UTF-16 and *then* be lowercased.
test_hash():
	Added Deseret characters as test case as example for non-BMP
	characters.

------------------------------------------------------------------------
r8217 | cbiere | 2005-05-01 20:39:05 -0400 (Sun, 01 May 2005) | 2 lines

Added non-ASCII testcases; verified with jikes/kaffe and the reference code.

------------------------------------------------------------------------
r8216 | cbiere | 2005-05-01 18:28:36 -0400 (Sun, 01 May 2005) | 3 lines

host_to_ip():
	Use the IPv6-specific code only when USE_IPV6_HACK is defined.

------------------------------------------------------------------------
r8215 | cbiere | 2005-05-01 18:25:58 -0400 (Sun, 01 May 2005) | 4 lines

socket_plain_sendto():
	Removed unnecessary MSG_DONTWAIT flag since the socket is set
	to non-blocking anyway.

------------------------------------------------------------------------
r8214 | cbiere | 2005-05-01 15:00:49 -0400 (Sun, 01 May 2005) | 3 lines

node_process_handshake_header():
	Silence warning.

------------------------------------------------------------------------
r8213 | cbiere | 2005-05-01 14:59:44 -0400 (Sun, 01 May 2005) | 3 lines

delta_time():
	Omit difftime() on systems where it's not needed.

------------------------------------------------------------------------
r8212 | cbiere | 2005-05-01 13:51:45 -0400 (Sun, 01 May 2005) | 3 lines

urn_get_http_sha1():
	Removed unnecessary variable ``p''.

------------------------------------------------------------------------
r8211 | cbiere | 2005-05-01 13:44:45 -0400 (Sun, 01 May 2005) | 3 lines

Removed unnecessary casts.
Use gtk_notebook_popup_enable() to enable the notebook tab popup.

------------------------------------------------------------------------
r8210 | cbiere | 2005-05-01 13:42:39 -0400 (Sun, 01 May 2005) | 2 lines

Use ht_w_tree_iter_free().

------------------------------------------------------------------------
r8209 | cbiere | 2005-05-01 13:41:08 -0400 (Sun, 01 May 2005) | 4 lines

search_gui_hash_func():
search_gui_hash_key_compare():
	Corrected prototypes.

------------------------------------------------------------------------
r8208 | cbiere | 2005-05-01 13:39:18 -0400 (Sun, 01 May 2005) | 3 lines

Minor style fixes.
Added ht_w_tree_iter_free().

------------------------------------------------------------------------
r8207 | cbiere | 2005-05-01 13:37:12 -0400 (Sun, 01 May 2005) | 3 lines

urn_get_http_sha1():
	Allow ``retval'' to be NULL.

------------------------------------------------------------------------
r8206 | cbiere | 2005-05-01 13:35:31 -0400 (Sun, 01 May 2005) | 5 lines

Removed unnecessary casts and parentheses.
search_new():
	urn:sha1 searches must not be canonicalized because it would
	remove the colons.

------------------------------------------------------------------------
r8205 | cbiere | 2005-05-01 07:50:15 -0400 (Sun, 01 May 2005) | 3 lines

upload_free_resources():
	Fixed mmap() leak.

------------------------------------------------------------------------
r8204 | cbiere | 2005-05-01 05:21:27 -0400 (Sun, 01 May 2005) | 4 lines

utf8_compose_nfc():
utf32_compose_nfc():
	Minor optimization for small strings.

------------------------------------------------------------------------
r8203 | cbiere | 2005-05-01 04:54:19 -0400 (Sun, 01 May 2005) | 9 lines

lazy_locale_to_utf8():
	Added const-qualifier to return type.
	Use utf8_compose_nfc() instead of g_utf8_normalize().
utf32_canonize():
	Optimized for likely case of small strings.
	Use utf32_strdup() after composing to possibly reduce the memory usage.
utf8_canonize():
	Optimized for likely case of small strings.

------------------------------------------------------------------------
r8202 | cbiere | 2005-05-01 04:47:19 -0400 (Sun, 01 May 2005) | 2 lines

Added const-qualifiers.

------------------------------------------------------------------------
r8201 | cbiere | 2005-05-01 03:09:40 -0400 (Sun, 01 May 2005) | 3 lines

dmesh_collect_locations():
	Fixed thinko in previous commit.

------------------------------------------------------------------------
r8200 | cbiere | 2005-05-01 01:24:07 -0400 (Sun, 01 May 2005) | 3 lines

Don't use mmap() when compiling for C89 because siglongjmp() and sigsetjmp()
	are ISO C90.

------------------------------------------------------------------------
r8199 | cbiere | 2005-05-01 00:31:57 -0400 (Sun, 01 May 2005) | 4 lines

search_gui_compare_records():
	Use ascii_strcasecmp() instead strcasecmp(); older platforms
	sometimes don't have it.

------------------------------------------------------------------------
r8198 | cbiere | 2005-05-01 00:06:01 -0400 (Sun, 01 May 2005) | 3 lines

WARN_NEED_SENTINEL():
	Fixed __sentinel__ -> sentinel.

------------------------------------------------------------------------
r8197 | cbiere | 2005-04-30 21:15:30 -0400 (Sat, 30 Apr 2005) | 3 lines

recurse_scan():
	Don't share the file if the normalized name is an empty string.

------------------------------------------------------------------------
r8196 | cbiere | 2005-04-30 20:39:11 -0400 (Sat, 30 Apr 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8195 | cbiere | 2005-04-30 20:37:08 -0400 (Sat, 30 Apr 2005) | 5 lines

file_info_readable_filename():
	Added const-qualifiers.
file_info_shared_sha1():
	Initialize ``sf->name_nfc'' and ``sf->name_canonic''.

------------------------------------------------------------------------
r8194 | cbiere | 2005-04-30 20:28:39 -0400 (Sat, 30 Apr 2005) | 3 lines

utf8_canonize():
	Removed g_message() used for debugging.

------------------------------------------------------------------------
r8193 | cbiere | 2005-04-30 20:26:42 -0400 (Sat, 30 Apr 2005) | 3 lines

pattern_qsearch():
	Use only U+0020 as word separator.

------------------------------------------------------------------------
r8192 | cbiere | 2005-04-30 20:14:12 -0400 (Sat, 30 Apr 2005) | 6 lines

Replaced ``file_name'' of ``struct shared_file'' with ``name_nfc''.
get_file_to_upload_from_index():
	Replaced wrong strncmp() with strcmp(). This caused gtk-gnutella
	to offer e.g., the file "blah" when the client requested "blah.*"
	if and only if there was a file index mismatch.

------------------------------------------------------------------------
r8191 | cbiere | 2005-04-30 20:08:49 -0400 (Sat, 30 Apr 2005) | 6 lines

struct shared_file:
	Sorted members by size (more or less).
	Removed ``file_name'' and ``file_name_len''.
	Added ``name_nfc'', ``name_nfc_len'',
	``name_canonic'', ``name_canonic_len''.

------------------------------------------------------------------------
r8190 | cbiere | 2005-04-30 20:04:47 -0400 (Sat, 30 Apr 2005) | 8 lines

shared_file_free():
	Free new members sf->name_nfc and sf->name_canonic as well.
recurse_scan():
	Share only files with UTF-8 encoded filenames (or those that can
	be converted to UTF-8).
	Create an UTF-8 NFC version of the filename used for query hits
	and an UTF-8 canonized version used for matching.

------------------------------------------------------------------------
r8189 | cbiere | 2005-04-30 19:59:10 -0400 (Sat, 30 Apr 2005) | 5 lines

search_new():
	Apply UNICODE_CANONIZE() to the search string.
	Emit a warning if the search string was rejected due to an
	empty string.

------------------------------------------------------------------------
r8188 | cbiere | 2005-04-30 19:45:30 -0400 (Sat, 30 Apr 2005) | 8 lines

qrp_hashcode():
	Solved the CLR riddle.
qrt_create():
qrt_empty_table():
	Added const-qualifier.
qrp_add_file():
	Support only UTF-8 and the canonized version for matching.

------------------------------------------------------------------------
r8187 | cbiere | 2005-04-30 19:39:10 -0400 (Sat, 30 Apr 2005) | 3 lines

add_file():
	Return the filename converted to UTF-8 NFC.

------------------------------------------------------------------------
r8186 | cbiere | 2005-04-30 19:37:30 -0400 (Sat, 30 Apr 2005) | 9 lines

Style fixes.
mask_hash():
	Use ASCII variants only.
st_insert_item():
	``s'' should be valid UTF-8, thus don't use match_map_string().
	Changed the minimum length to one UTF-8 character.
st_search():
	We match against canonic filename instead of the original one now.

------------------------------------------------------------------------
r8185 | cbiere | 2005-04-30 19:30:50 -0400 (Sat, 30 Apr 2005) | 2 lines

Removed unnecessary casts.

------------------------------------------------------------------------
r8184 | cbiere | 2005-04-30 19:15:06 -0400 (Sat, 30 Apr 2005) | 3 lines

word_vec_make():
	Renamed is_alpha to is_separator with inverted meaning.

------------------------------------------------------------------------
r8183 | cbiere | 2005-04-30 19:12:04 -0400 (Sat, 30 Apr 2005) | 18 lines

Style fixes.
utf32_compose_hangul():
	Return the string length.
Added utf32_remap(), utf32_strlower(), utf32_strupper().
utf32_filter_char():
	Used character instead of category for switch-statement.
	Added missing case UNI_GC_MARK_ENCLOSING.
	Added parameter ``last'' in order to prevent adding trailing space.
	``*space'' was not set to TRUE if a space was added.
	``*space'' should be initialized to TRUE (not FALSE) to prevent
	adding leading space.
	Unassigned characters must be copied as-is, not dropped.
utf32_filter():
	Copied the original character instead of using the result of
	utf32_filter_char().
Added utf32_compose_nfc(), utf8_compose_nfc(), utf32_canonize(),
	utf8_canonize().

------------------------------------------------------------------------
r8182 | cbiere | 2005-04-29 21:44:26 -0400 (Fri, 29 Apr 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8181 | cbiere | 2005-04-29 21:41:52 -0400 (Fri, 29 Apr 2005) | 12 lines

Removed unnecessary casts and parentheses.
struct dmesh:
struct dmesh_banned:
	Sorted members by size.
dmesh_url_strerror():
dmesh_fill_info():
dmesh_urlinfo():
dmesh_entry_url_stamp():
	Replaced gm_snprintf() with concat_strings() for simple concatenation.
dmesh_url_parse():
	Use is_strprefix().

------------------------------------------------------------------------
r8180 | cbiere | 2005-04-29 21:35:39 -0400 (Fri, 29 Apr 2005) | 4 lines

search_gui_parse_query():
	Replaced ascii_strncasecmp() with is_strcaseprefix().
	Replaced gm_snprintf() with concat_strings() for simple concatenation.

------------------------------------------------------------------------
r8179 | cbiere | 2005-04-29 21:29:11 -0400 (Fri, 29 Apr 2005) | 3 lines

filter_update_size():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8178 | cbiere | 2005-04-29 21:19:54 -0400 (Fri, 29 Apr 2005) | 3 lines

get_locale_charset():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8177 | cbiere | 2005-04-29 21:18:46 -0400 (Fri, 29 Apr 2005) | 5 lines

Added const-qualifiers.
urn_get_sha1():
urn_get_sha1_no_prefix():
	Use is_strcaseprefix() instead of ascii_strcasestr().

------------------------------------------------------------------------
r8176 | cbiere | 2005-04-29 21:16:02 -0400 (Fri, 29 Apr 2005) | 3 lines

prop_parse_boolean_vector():
	Use skip_ascii_spaces() and CONST_STRLEN().

------------------------------------------------------------------------
r8175 | cbiere | 2005-04-29 21:14:52 -0400 (Fri, 29 Apr 2005) | 2 lines

Added is_strcaseprefix().

------------------------------------------------------------------------
r8174 | cbiere | 2005-04-29 21:09:25 -0400 (Fri, 29 Apr 2005) | 3 lines

get_file_to_upload_from_urn():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8173 | cbiere | 2005-04-29 21:07:30 -0400 (Fri, 29 Apr 2005) | 3 lines

get_results_set():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8172 | cbiere | 2005-04-29 21:05:55 -0400 (Fri, 29 Apr 2005) | 4 lines

unique_substr():
	Replaced ascii_strncasecmp() with is_strcaseprefix().
	Removed unnecessary cast.

------------------------------------------------------------------------
r8171 | cbiere | 2005-04-29 21:04:00 -0400 (Fri, 29 Apr 2005) | 4 lines

http_content_range_parse():
http_url_parse():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8170 | cbiere | 2005-04-29 21:00:11 -0400 (Fri, 29 Apr 2005) | 3 lines

looks_like_urn():
	Replaced ascii_strncasecmp() with is_strcaseprefix().

------------------------------------------------------------------------
r8169 | cbiere | 2005-04-29 20:57:14 -0400 (Fri, 29 Apr 2005) | 4 lines

ext_huge_parse():
	Replaced ascii_strncasecmp() with is_strcaseprefix().
Use is_ascii_alnum(), is_ascii_alpha(), is_ascii_cntrl().

------------------------------------------------------------------------
r8168 | cbiere | 2005-04-29 20:41:23 -0400 (Fri, 29 Apr 2005) | 2 lines

Added macro HAVE_GCC().

------------------------------------------------------------------------
r8167 | cbiere | 2005-04-29 18:26:37 -0400 (Fri, 29 Apr 2005) | 2 lines

Replaced GFunc with func_ptr_t.

------------------------------------------------------------------------
r8166 | cbiere | 2005-04-29 18:25:23 -0400 (Fri, 29 Apr 2005) | 2 lines

Use LISTENER_* macros.

------------------------------------------------------------------------
r8165 | cbiere | 2005-04-29 18:24:23 -0400 (Fri, 29 Apr 2005) | 2 lines

Replaced gm_snprintf() with concat_strings() for simple concatenations.

------------------------------------------------------------------------
r8164 | cbiere | 2005-04-29 18:21:39 -0400 (Fri, 29 Apr 2005) | 3 lines

dmesh_urlinfo_t:
	Sorted members by size.

------------------------------------------------------------------------
r8163 | cbiere | 2005-04-29 18:05:56 -0400 (Fri, 29 Apr 2005) | 2 lines

Replaced gm_snprintf() with concat_strings() for simple string concatenations.

------------------------------------------------------------------------
r8162 | cbiere | 2005-04-29 18:02:30 -0400 (Fri, 29 Apr 2005) | 6 lines

Added concat_strings().
cast_func_to_gpointer():
cast_gpointer_to_func():
	Changed GFunc to func_ptr_t because the former is a rather specific
	function pointer.

------------------------------------------------------------------------
r8161 | cbiere | 2005-04-29 12:48:37 -0400 (Fri, 29 Apr 2005) | 2 lines

Added WARN_NEED_SENTINEL.

------------------------------------------------------------------------
r8160 | cbiere | 2005-04-29 10:58:46 -0400 (Fri, 29 Apr 2005) | 3 lines

build_pong_msg():
	Corrected pong size calculation.

------------------------------------------------------------------------
r8159 | cbiere | 2005-04-28 20:56:22 -0400 (Thu, 28 Apr 2005) | 3 lines

utf8_is_valid_char():
	Fixed minor pedantic warning.

------------------------------------------------------------------------
r8158 | cbiere | 2005-04-28 20:55:27 -0400 (Thu, 28 Apr 2005) | 3 lines

random_init():
	Added a little more entropy to ``sys''.

------------------------------------------------------------------------
r8157 | cbiere | 2005-04-28 20:53:56 -0400 (Thu, 28 Apr 2005) | 6 lines

Declare ``columns'' static so that it's at least zero initialized which
	GTK+ catches.
Ensure that no column gets skipped.
create_queue_model():
	Corrected enums.

------------------------------------------------------------------------
r8156 | cbiere | 2005-04-28 19:18:34 -0400 (Thu, 28 Apr 2005) | 4 lines

Use a loop to initialize ``GType'' arrays because GDK_TYPE_COLOR and possibly
	others are evaluated at runtime. This also ensures that enums are
	mapped to the correct columns.

------------------------------------------------------------------------
r8155 | cbiere | 2005-04-28 19:11:52 -0400 (Thu, 28 Apr 2005) | 4 lines

gnet_stats_gui_shutdown():
	Take the addresses of the variables instead of their runtime values
	for ANSI C compliance.

------------------------------------------------------------------------
r8154 | cbiere | 2005-04-28 19:05:59 -0400 (Thu, 28 Apr 2005) | 3 lines

main():
	Use a standard prototype and ``environ'' which is given by POSIX.

------------------------------------------------------------------------
r8153 | cbiere | 2005-04-28 15:43:17 -0400 (Thu, 28 Apr 2005) | 3 lines

upload_stats_gui_update():
	Renamed ``stat'' to ``s'' because the former shadows ``struct stat''.

------------------------------------------------------------------------
r8152 | cbiere | 2005-04-28 15:41:33 -0400 (Thu, 28 Apr 2005) | 3 lines

bg_sched_timer():
	Declare ``bt'' volatile to prevent clobbering by longjmp.

------------------------------------------------------------------------
r8151 | cbiere | 2005-04-28 15:40:32 -0400 (Thu, 28 Apr 2005) | 2 lines

Added blank line as separator before last element in enum list.

------------------------------------------------------------------------
r8150 | cbiere | 2005-04-28 15:39:28 -0400 (Thu, 28 Apr 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r8149 | cbiere | 2005-04-28 15:38:34 -0400 (Thu, 28 Apr 2005) | 2 lines

Shortened some tooltips because they were too large for ANSI C.

------------------------------------------------------------------------
r8148 | cbiere | 2005-04-28 14:15:28 -0400 (Thu, 28 Apr 2005) | 2 lines

Removed unnecessary use of variadic macros.

------------------------------------------------------------------------
r8147 | cbiere | 2005-04-27 14:10:31 -0400 (Wed, 27 Apr 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8146 | cbiere | 2005-04-27 13:57:11 -0400 (Wed, 27 Apr 2005) | 4 lines

Minor style fixes.
Added assertion checks.
Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8145 | cbiere | 2005-04-27 13:55:32 -0400 (Wed, 27 Apr 2005) | 5 lines

Renamed ``dup'' to ``duplicate'' because the former shadows dup().
Renamed ``d'' to ``dl' because the former shadows anothe variable.
Renamed ``s'' to ``status' because the former shadows anothe variable.
Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8144 | cbiere | 2005-04-27 13:50:33 -0400 (Wed, 27 Apr 2005) | 2 lines

ANSIfied.

------------------------------------------------------------------------
r8143 | cbiere | 2005-04-27 13:38:02 -0400 (Wed, 27 Apr 2005) | 5 lines

Removed inappropriate (gpointer) casts.
Replaced PRIu64 with uint64_to_string().
upload_request():
	``cb_arg'' was possibly overwritten.

------------------------------------------------------------------------
r8142 | cbiere | 2005-04-27 13:35:11 -0400 (Wed, 27 Apr 2005) | 2 lines

Corrected packet size.

------------------------------------------------------------------------
r8141 | cbiere | 2005-04-27 13:28:38 -0400 (Wed, 27 Apr 2005) | 2 lines

ANSIfied.

------------------------------------------------------------------------
r8140 | cbiere | 2005-04-27 13:26:44 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unused macros.

------------------------------------------------------------------------
r8139 | cbiere | 2005-04-27 13:25:44 -0400 (Wed, 27 Apr 2005) | 3 lines

Added safer casts.
Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8138 | cbiere | 2005-04-27 13:24:25 -0400 (Wed, 27 Apr 2005) | 4 lines

prop_assert():
	Use STRINGIFY().
Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8137 | cbiere | 2005-04-27 13:23:08 -0400 (Wed, 27 Apr 2005) | 3 lines

ANSIfied (almost).
Use more portable macro concatenation.

------------------------------------------------------------------------
r8136 | cbiere | 2005-04-27 13:21:22 -0400 (Wed, 27 Apr 2005) | 4 lines

event_trigger():
	Moved local variables to struct vars_ so that the names don't
	clash with identifiers visible in this scope.

------------------------------------------------------------------------
r8135 | cbiere | 2005-04-27 13:17:46 -0400 (Wed, 27 Apr 2005) | 2 lines

Marked bg_task_exit() with G_GNUC_NORETURN.

------------------------------------------------------------------------
r8134 | cbiere | 2005-04-27 13:16:59 -0400 (Wed, 27 Apr 2005) | 3 lines

bg_sched_timer():
	Minor tweak to shut up warnings.

------------------------------------------------------------------------
r8133 | cbiere | 2005-04-27 13:15:47 -0400 (Wed, 27 Apr 2005) | 3 lines

uint64_str():
	Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8132 | cbiere | 2005-04-27 13:15:02 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unnecessary casts.

------------------------------------------------------------------------
r8131 | cbiere | 2005-04-27 13:14:26 -0400 (Wed, 27 Apr 2005) | 3 lines

Replaced PRIu64 with uint64_to_string().
Minor tweaks to shut up pedantic warnings.

------------------------------------------------------------------------
r8130 | cbiere | 2005-04-27 13:12:06 -0400 (Wed, 27 Apr 2005) | 2 lines

Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8129 | cbiere | 2005-04-27 13:11:22 -0400 (Wed, 27 Apr 2005) | 3 lines

uhc_get_host_port():
	Simplified.

------------------------------------------------------------------------
r8128 | cbiere | 2005-04-27 13:10:47 -0400 (Wed, 27 Apr 2005) | 2 lines

Added indentation hint for vim.

------------------------------------------------------------------------
r8127 | cbiere | 2005-04-27 13:09:46 -0400 (Wed, 27 Apr 2005) | 3 lines

Define TLS_DH_BITS only when USE_TLS is defined.
Added comment regarding SHUT_WR.

------------------------------------------------------------------------
r8126 | cbiere | 2005-04-27 13:08:56 -0400 (Wed, 27 Apr 2005) | 3 lines

Replaced PRIu64 with uint64_to_string().
Style fixes.

------------------------------------------------------------------------
r8125 | cbiere | 2005-04-27 13:08:06 -0400 (Wed, 27 Apr 2005) | 2 lines

Added minor comment.

------------------------------------------------------------------------
r8124 | cbiere | 2005-04-27 13:07:36 -0400 (Wed, 27 Apr 2005) | 4 lines

share_add_search_request_listener():
share_remove_search_request_listener():
	Removed inappropriate (gpointer) casts.

------------------------------------------------------------------------
r8123 | cbiere | 2005-04-27 13:06:52 -0400 (Wed, 27 Apr 2005) | 3 lines

settings_ask_for_property():
	Marked with G_GNUC_NORETURN because it exit()s.

------------------------------------------------------------------------
r8122 | cbiere | 2005-04-27 13:06:11 -0400 (Wed, 27 Apr 2005) | 3 lines

settings_init():
	Replaced (gchar *) cast with deconstify_gchar().

------------------------------------------------------------------------
r8121 | cbiere | 2005-04-27 13:05:04 -0400 (Wed, 27 Apr 2005) | 4 lines

ANSIfied.
Updated since ``records'' is no longer a zero-length array.
Updated since ``query'' is no longer a zero-length array.

------------------------------------------------------------------------
r8120 | cbiere | 2005-04-27 13:03:36 -0400 (Wed, 27 Apr 2005) | 2 lines

Renamed property ``guid'' to ``servent_guid'' (internal).

------------------------------------------------------------------------
r8119 | cbiere | 2005-04-27 13:02:28 -0400 (Wed, 27 Apr 2005) | 6 lines

qrp_hashcode():
	Removed unnecessary variable ``c''.
Removed unnecessary casts.
Added safer cast to shut up pedantic warnings.
Removed unnecessary macro "hash".

------------------------------------------------------------------------
r8118 | cbiere | 2005-04-27 12:58:17 -0400 (Wed, 27 Apr 2005) | 2 lines

Renamed property ``guid'' to ``servent_guid'' (internal).

------------------------------------------------------------------------
r8117 | cbiere | 2005-04-27 12:57:32 -0400 (Wed, 27 Apr 2005) | 3 lines

Renamed property ``guid'' to ``servent_guid'' (internal).
Removed unnecessary casts.

------------------------------------------------------------------------
r8116 | cbiere | 2005-04-27 12:51:11 -0400 (Wed, 27 Apr 2005) | 4 lines

Added const-qualifiers where possible.
Renamed ``free_func'' to ``free_cb'' because the former shadows a typedef
	of zlib.

------------------------------------------------------------------------
r8115 | cbiere | 2005-04-27 12:50:04 -0400 (Wed, 27 Apr 2005) | 6 lines

Renamed property ``guid'' to ``servent_guid'' (internal).
build_ping_msg():
build_pong_msg():
	Updated since ``ggep'' is no longer a zero-length array member.
Renamed shadowed variable ``cp''.

------------------------------------------------------------------------
r8114 | cbiere | 2005-04-27 12:46:19 -0400 (Wed, 27 Apr 2005) | 5 lines

Style fixes.
Renamed ``remove'' to ``to_remove'' because the former shadows remove().
Moved parq_store() so that it can be inlined.
Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8113 | cbiere | 2005-04-27 12:44:04 -0400 (Wed, 27 Apr 2005) | 7 lines

Remove inappropriate (gpointer) casts.
Renamed property ``guid'' to ``servent_guid'' (internal).
node_fire_node_added():
	Added safer cast.
node_crawl_fill():
	Renamed ``n'' to ``j'' because it shadows another variable.

------------------------------------------------------------------------
r8112 | cbiere | 2005-04-27 12:41:37 -0400 (Wed, 27 Apr 2005) | 5 lines

More portable definition of GGEP_ID().
ext_ggep_parse():
	Renamed inner ``len'' to ``d_len'' because the former shadows another
	variable.

------------------------------------------------------------------------
r8111 | cbiere | 2005-04-27 12:39:35 -0400 (Wed, 27 Apr 2005) | 5 lines

alive_send_ping():
	Added compile-time assertion check.
alive_trim_upto():
	Replaced g_assert(0) with g_assert_not_reached().

------------------------------------------------------------------------
r8110 | cbiere | 2005-04-27 12:34:31 -0400 (Wed, 27 Apr 2005) | 5 lines

find_upload():
	Moved so that it can be inlined.
uploads_gui_update_display():
	ANSIfied.

------------------------------------------------------------------------
r8109 | cbiere | 2005-04-27 12:33:13 -0400 (Wed, 27 Apr 2005) | 3 lines

nodes_gui_update_nodes_display():
	Initialize ``model'' for dumb compilers.

------------------------------------------------------------------------
r8108 | cbiere | 2005-04-27 12:32:18 -0400 (Wed, 27 Apr 2005) | 3 lines

Replaced PRIu64 with uint64_to_string().
Renamed ``path'' to ``tpath'' because it's shadows by another variable.

------------------------------------------------------------------------
r8107 | cbiere | 2005-04-27 12:31:25 -0400 (Wed, 27 Apr 2005) | 3 lines

dl_action_select():
	ANSIfied.

------------------------------------------------------------------------
r8106 | cbiere | 2005-04-27 12:30:38 -0400 (Wed, 27 Apr 2005) | 4 lines

ANSIfied.
Replaced PRIu64 with uint64_to_string().
Renamed variable ``div'' because it shadows div().

------------------------------------------------------------------------
r8105 | cbiere | 2005-04-27 12:28:40 -0400 (Wed, 27 Apr 2005) | 3 lines

search_gui_compare_records():
	Added safer casts to match the prototype of strncmp().

------------------------------------------------------------------------
r8104 | cbiere | 2005-04-27 12:27:47 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unused extern declarations.

------------------------------------------------------------------------
r8103 | cbiere | 2005-04-27 12:27:06 -0400 (Wed, 27 Apr 2005) | 8 lines

Replaced macros with functions.
Modified ``struct statusbar_timeout'' so that time_t is used in the
	most portable manner.
Removed unused variable scid_search_autoselected.
Changed scid_* variables to static.
Updated prototype indentation.
Style fixes.

------------------------------------------------------------------------
r8102 | cbiere | 2005-04-27 12:24:23 -0400 (Wed, 27 Apr 2005) | 2 lines

Use more portable macro concatenation.

------------------------------------------------------------------------
r8101 | cbiere | 2005-04-27 12:23:10 -0400 (Wed, 27 Apr 2005) | 3 lines

Removed unnecessary parameter name in prototype because it shadows
	``struct stat''.

------------------------------------------------------------------------
r8100 | cbiere | 2005-04-27 12:22:18 -0400 (Wed, 27 Apr 2005) | 2 lines

Changed type of storage from guint8 to gchar.

------------------------------------------------------------------------
r8099 | cbiere | 2005-04-27 12:21:21 -0400 (Wed, 27 Apr 2005) | 3 lines

Renamed property ``guid'' to ``servent_guid'' (internal) because the former
	is too generic and used in several places.

------------------------------------------------------------------------
r8098 | cbiere | 2005-04-27 12:19:11 -0400 (Wed, 27 Apr 2005) | 2 lines

Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8097 | cbiere | 2005-04-27 12:18:20 -0400 (Wed, 27 Apr 2005) | 5 lines

Replaced PRIu64 with uint64_to_string().
try_to_put_sha1_back_into_share_library():
	Renamed ``sf'' to ``sf2'' because the surrounding scope has a
	variable of the same name.

------------------------------------------------------------------------
r8096 | cbiere | 2005-04-27 12:16:01 -0400 (Wed, 27 Apr 2005) | 6 lines

Updated prototype indentation.
ANSIfied.
Replaced PRIu64 with uint64_to_string().
hsep_get_static_str():
	``other'' doesn't need to be dynamically allocated.

------------------------------------------------------------------------
r8095 | cbiere | 2005-04-27 12:12:01 -0400 (Wed, 27 Apr 2005) | 5 lines

hcache_store():
	Use file_path_set().
hcache_get_stats():
	Renamed ``stats'' as it shadowed another variable.

------------------------------------------------------------------------
r8094 | cbiere | 2005-04-27 12:10:42 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed ZERO_LENGTH and zero-length arrays as they're unnecessary.

------------------------------------------------------------------------
r8093 | cbiere | 2005-04-27 12:09:53 -0400 (Wed, 27 Apr 2005) | 2 lines

Added const-qualifier where possible.

------------------------------------------------------------------------
r8092 | cbiere | 2005-04-27 12:08:33 -0400 (Wed, 27 Apr 2005) | 5 lines

gip_load():
	Simplified eating trailing space.
gip_retrieve():
	Changed fp to static so that it's at least initialized, just in case.

------------------------------------------------------------------------
r8091 | cbiere | 2005-04-27 11:52:51 -0400 (Wed, 27 Apr 2005) | 7 lines

Removed unused macro FI_TRAILER_SIZE.
Replaced PRIu64 with uint64_to_string().
ANSIfied.
file_info_retrieve():
	Catch further error case: The first chunk of a list must start
	at offset zero.

------------------------------------------------------------------------
r8090 | cbiere | 2005-04-27 11:49:35 -0400 (Wed, 27 Apr 2005) | 3 lines

header_features_generate():
	Added assertion check.

------------------------------------------------------------------------
r8089 | cbiere | 2005-04-27 11:48:37 -0400 (Wed, 27 Apr 2005) | 5 lines

bio_sendfile():
	Renamed local variable ``len'' to ``map_len'' because it shadowed
	a parameter.
	Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8088 | cbiere | 2005-04-27 11:47:24 -0400 (Wed, 27 Apr 2005) | 2 lines

ANSIfied.

------------------------------------------------------------------------
r8087 | cbiere | 2005-04-27 11:46:45 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unused macros PRIu64 and PRId64.

------------------------------------------------------------------------
r8086 | cbiere | 2005-04-27 11:41:44 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unused macro GM_STRCONCAT_NULL().

------------------------------------------------------------------------
r8085 | cbiere | 2005-04-27 11:41:04 -0400 (Wed, 27 Apr 2005) | 2 lines

ANSIfied.

------------------------------------------------------------------------
r8084 | cbiere | 2005-04-27 11:36:21 -0400 (Wed, 27 Apr 2005) | 2 lines

Replaced PRIu64 with uint64_to_string().

------------------------------------------------------------------------
r8083 | cbiere | 2005-04-27 11:31:56 -0400 (Wed, 27 Apr 2005) | 5 lines

g_iconv_complete():
	Replaced (gpointer) with safer cast.
unicode_compose_add():
	Renamed parameter to idx because index shadows index().

------------------------------------------------------------------------
r8082 | cbiere | 2005-04-27 11:30:21 -0400 (Wed, 27 Apr 2005) | 2 lines

Removed unnecessary variables.

------------------------------------------------------------------------
r8081 | cbiere | 2005-04-27 11:29:52 -0400 (Wed, 27 Apr 2005) | 4 lines

Style fixes.
tt_endian():
	Simplified.

------------------------------------------------------------------------
r8080 | cbiere | 2005-04-27 11:27:19 -0400 (Wed, 27 Apr 2005) | 2 lines

Changed prototype; tiger() can handle misaligned data.

------------------------------------------------------------------------
r8079 | cbiere | 2005-04-27 11:26:20 -0400 (Wed, 27 Apr 2005) | 2 lines

ANSIfied.

------------------------------------------------------------------------
r8078 | cbiere | 2005-04-27 11:25:17 -0400 (Wed, 27 Apr 2005) | 4 lines

Added ``Safer Casts (TM)'':
	cast_to_gconstpointer(), cast_to_gpointer(), cast_func_to_gpointer(),
	cast_gpointer_to_func().

------------------------------------------------------------------------
r8077 | cbiere | 2005-04-27 11:23:46 -0400 (Wed, 27 Apr 2005) | 5 lines

Replaced GM_STRCONCAT_NULL() with g_strconcat().
Added uint64_to_string_buf(), uint64_to_string(), uint64_to_string2():
	This is more portable than using PRIu64 because some platforms
	might have *printf* functions that don't support it.

------------------------------------------------------------------------
r8076 | cbiere | 2005-04-26 11:28:40 -0400 (Tue, 26 Apr 2005) | 2 lines

Regenerated after changes to props.tpl.

------------------------------------------------------------------------
r8075 | cbiere | 2005-04-26 11:27:11 -0400 (Tue, 26 Apr 2005) | 2 lines

Changed type of storage from guint8 to gchar.

------------------------------------------------------------------------
r8074 | cbiere | 2005-04-26 11:25:55 -0400 (Tue, 26 Apr 2005) | 2 lines

Changed types of offset and length to size_t.

------------------------------------------------------------------------
r8073 | cbiere | 2005-04-26 11:23:11 -0400 (Tue, 26 Apr 2005) | 4 lines

vmsg_fill_type():
	Changed return type to "gchar *".
Changed type of payload to "gchar *".

------------------------------------------------------------------------
r8072 | cbiere | 2005-04-26 11:21:20 -0400 (Tue, 26 Apr 2005) | 3 lines

node_process_handshake_header():
	Corrected type of major and minor to guint.

------------------------------------------------------------------------
r8071 | cbiere | 2005-04-26 10:56:32 -0400 (Tue, 26 Apr 2005) | 3 lines

upload_http_version():
	Corrected type of http_major and http_minor to guint.

------------------------------------------------------------------------
r8070 | cbiere | 2005-04-26 09:45:31 -0400 (Tue, 26 Apr 2005) | 3 lines

target_to_string():
	Removed wrong cast.

------------------------------------------------------------------------
r8069 | cbiere | 2005-04-26 09:37:59 -0400 (Tue, 26 Apr 2005) | 2 lines

Removed extern declaration of "common_dbg". This variable doesn't exist.

------------------------------------------------------------------------
r8068 | cbiere | 2005-04-25 17:31:44 -0400 (Mon, 25 Apr 2005) | 3 lines

Added utf32_general_category(), utf32_filter_char(), utf32_filter().
Added consistency checks for the lookup tables.

------------------------------------------------------------------------
r8067 | cbiere | 2005-04-25 17:29:16 -0400 (Mon, 25 Apr 2005) | 3 lines

Updated tables to Unicode 4.1.0.
Added ``utf32_general_category_lut'' and enum uni_gc_t.

------------------------------------------------------------------------
r8066 | cbiere | 2005-04-25 17:25:38 -0400 (Mon, 25 Apr 2005) | 3 lines

search_request():
	Removed unused variable ``is_utf8''.

------------------------------------------------------------------------
r8065 | cbiere | 2005-04-24 20:51:02 -0400 (Sun, 24 Apr 2005) | 4 lines

search_request():
	Fixed bug in previous commit: utf8_len == 0 indicates ASCII, not
	invalid UTF-8. Thus, the search must not be ignored.

------------------------------------------------------------------------
r8064 | cbiere | 2005-04-24 19:03:16 -0400 (Sun, 24 Apr 2005) | 2 lines

Changed type of ``bits'' from guint8 to guint.

------------------------------------------------------------------------
r8063 | cbiere | 2005-04-24 18:54:42 -0400 (Sun, 24 Apr 2005) | 3 lines

search_stats_gui_update():
	Freeze the treeview after clearing it.

------------------------------------------------------------------------
r8062 | cbiere | 2005-04-24 18:52:49 -0400 (Sun, 24 Apr 2005) | 4 lines

Updated prototype indentation.
match_map_string():
	Changed return type to size_t.

------------------------------------------------------------------------
r8061 | cbiere | 2005-04-24 18:39:52 -0400 (Sun, 24 Apr 2005) | 6 lines

gnet_stats_update_types():
gnet_stats_update_flowc():
gnet_stats_update_recv():
	Added ``stat_counters_t'' so that the parameters match the
	prototype exactly.

------------------------------------------------------------------------
r8060 | cbiere | 2005-04-24 18:37:19 -0400 (Sun, 24 Apr 2005) | 5 lines

Use size_t for ``offset'' and ``length'' for every function.
Replaced guint32 and gsize with size_t where appropriate.
prop_set_guint64():
	Removed bogus check for PROP_TYPE_IP.

------------------------------------------------------------------------
r8059 | cbiere | 2005-04-24 18:31:33 -0400 (Sun, 24 Apr 2005) | 3 lines

guc_version_get_version_string():
	Fixed prototype.

------------------------------------------------------------------------
r8058 | cbiere | 2005-04-24 18:27:10 -0400 (Sun, 24 Apr 2005) | 5 lines

Changed shell_shutdown() and print_hsep_table() to static.
Removed unused variable reply_code.
Changed ``nonhsep'' to single element array to make lint happy.
Pass constant as unsigned to random_value() to match its prototype.

------------------------------------------------------------------------
r8057 | cbiere | 2005-04-24 17:12:50 -0400 (Sun, 24 Apr 2005) | 3 lines

hex_escape():
	Use deconstify_gchar() instead of a double-dereference.

------------------------------------------------------------------------
r8056 | cbiere | 2005-04-24 16:59:25 -0400 (Sun, 24 Apr 2005) | 9 lines

parse_extensions():
	Removed unused variable ``e''.
	Minor clean-up of loops.
share_scan():
	The memory allocation was wrong due to dereferencing file_table
	twice (caused no problem though).
search_request():
	Ignore the search if it's not UTF-8 encoded even when not using ICU.

------------------------------------------------------------------------
r8055 | cbiere | 2005-04-24 16:51:29 -0400 (Sun, 24 Apr 2005) | 3 lines

search_new():
	Cast -1 to (gnet_search_t) due to sign change to make lint happy.

------------------------------------------------------------------------
r8054 | cbiere | 2005-04-24 16:50:01 -0400 (Sun, 24 Apr 2005) | 5 lines

Removed illegal trailing comma from enum list.
node_add_socket():
	Updated type ``major'' and ``minor'' to guint.
	Removed unused variable ``connection_type''.

------------------------------------------------------------------------
r8053 | cbiere | 2005-04-24 16:47:29 -0400 (Sun, 24 Apr 2005) | 6 lines

hsep_timer():
	Pass constants as unsigned to hsep_notify_shared() to match its
	prototype.
hsep_send_msg():
	Declare ``other'' as single element array to make lint happy.

------------------------------------------------------------------------
r8052 | cbiere | 2005-04-24 16:44:18 -0400 (Sun, 24 Apr 2005) | 4 lines

hashtree_increase_depth():
	Removed unused variable ``add_node''.
	Don't initialize new_parent to NULL.

------------------------------------------------------------------------
r8051 | cbiere | 2005-04-24 16:42:59 -0400 (Sun, 24 Apr 2005) | 3 lines

guid_flag_modern():
	Use ~0 instead of 0xff because lint doesn't like it.

------------------------------------------------------------------------
r8050 | cbiere | 2005-04-24 16:37:50 -0400 (Sun, 24 Apr 2005) | 2 lines

Changed GGEP_F_LAST from char to unsigned lint doesn't like it.

------------------------------------------------------------------------
r8049 | cbiere | 2005-04-24 16:22:10 -0400 (Sun, 24 Apr 2005) | 2 lines

Removed illegal trailing comma from enum lists.

------------------------------------------------------------------------
r8048 | cbiere | 2005-04-24 15:37:12 -0400 (Sun, 24 Apr 2005) | 8 lines

UNISKIP():
	Changed constants to unsigned.
UNICODE_IS_ILLEGAL():
	Consider 0xnFFFF and characters > 0x10FFFF illegal as well.
utf8_is_valid_char():
	Changed types of len and slen to guint.
Marked code known to be reached for lint.

------------------------------------------------------------------------
r8047 | cbiere | 2005-04-24 15:31:50 -0400 (Sun, 24 Apr 2005) | 3 lines

filter_record():
	Removed unused code.

------------------------------------------------------------------------
r8046 | cbiere | 2005-04-24 15:31:09 -0400 (Sun, 24 Apr 2005) | 4 lines

Removed unused variable ``visible''.
gtk_clist_save_visibility():
	Fixed type of val from guint32 to gboolean.

------------------------------------------------------------------------
r8045 | cbiere | 2005-04-24 15:30:03 -0400 (Sun, 24 Apr 2005) | 3 lines

Updated prototype indentation.
Replaced file global variable ``gui_tmp'' with local variable ``ver_buf''.

------------------------------------------------------------------------
r8044 | cbiere | 2005-04-24 15:27:28 -0400 (Sun, 24 Apr 2005) | 6 lines

Removed bogus ``struct stat'' lines.
Removed illegal trailing comma from enum list.
Changed from_hi and to_hi to guint32 to match the prototype of htonl().
Marked code as known to be unreached for lint.
Pass unsigned int to random_value() to match its prototype.

------------------------------------------------------------------------
r8043 | cbiere | 2005-04-24 15:17:19 -0400 (Sun, 24 Apr 2005) | 2 lines

Use guint instead of gint for feature_version_major/minor.

------------------------------------------------------------------------
r8042 | cbiere | 2005-04-24 15:16:29 -0400 (Sun, 24 Apr 2005) | 5 lines

Updated prototype indentation.
header_get_feature():
	Removed unnecessary casts.
	Use parse_major_minor().

------------------------------------------------------------------------
r8041 | cbiere | 2005-04-24 15:11:32 -0400 (Sun, 24 Apr 2005) | 2 lines

Mark code as unreached for lint.

------------------------------------------------------------------------
r8040 | cbiere | 2005-04-24 15:10:09 -0400 (Sun, 24 Apr 2005) | 8 lines

Removed unused variable ``dl_count_by_sha1''.
Renamed header_size() to HEADER_SIZE() because ``header_size'' is also
	a variable name.
change_server_ip():
	Removed unused variable ``old_ip''.
download_something_to_clear():
	Minor GSList usage style fix.

------------------------------------------------------------------------
r8039 | cbiere | 2005-04-24 15:06:28 -0400 (Sun, 24 Apr 2005) | 3 lines

Uppercased header_size() and header_lines() macros because ``header_lines''
	is also used as variable name.

------------------------------------------------------------------------
r8038 | cbiere | 2005-04-24 15:05:18 -0400 (Sun, 24 Apr 2005) | 2 lines

Fixed definition of MAX_STAMP.

------------------------------------------------------------------------
r8037 | cbiere | 2005-04-24 15:04:05 -0400 (Sun, 24 Apr 2005) | 3 lines

bws_sock_connect():
	Use integer arithmetic instead of float.

------------------------------------------------------------------------
r8036 | cbiere | 2005-04-24 14:59:49 -0400 (Sun, 24 Apr 2005) | 6 lines

Renamed bitzi enums due to possible namespace pollution.
Renamed bitzi_fjtostring() to bitzi_fj_to_string().
Added compile-time consistency check for the judgement tables.
Added gchar_to_xmlChar() and xmlChar_to_gchar() to get rid off pedantic
	warnings.

------------------------------------------------------------------------
r8035 | cbiere | 2005-04-24 14:51:00 -0400 (Sun, 24 Apr 2005) | 2 lines

Removed illegal trailing comma from enum lists.

------------------------------------------------------------------------
r8034 | cbiere | 2005-04-24 14:43:13 -0400 (Sun, 24 Apr 2005) | 2 lines

Override some definitions which would otherwise confuse lint.

------------------------------------------------------------------------
r8033 | rmanfredi | 2005-04-24 10:37:03 -0400 (Sun, 24 Apr 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r8032 | rmanfredi | 2005-04-24 10:31:17 -0400 (Sun, 24 Apr 2005) | 2 lines

Updated Copyright year.

------------------------------------------------------------------------
r8031 | cbiere | 2005-04-23 14:55:41 -0400 (Sat, 23 Apr 2005) | 3 lines

bio_sendfile():
	*offset wasn't updated as required in case of EAGAIN or EINTR.

------------------------------------------------------------------------
r8030 | cbiere | 2005-04-23 14:50:32 -0400 (Sat, 23 Apr 2005) | 7 lines

bio_sendfile():
	Minor clean-up for mmap() case so that ``r'' doesn't need to
	be initialized in advance.
	If using FreeBSD's sendfile(), written must be picked up
	for EINTR as well. Also, make sure it's a positive value
	because zero would imply an EOF.

------------------------------------------------------------------------
r8029 | rmanfredi | 2005-04-23 08:39:40 -0400 (Sat, 23 Apr 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8028 | cbiere | 2005-04-23 01:52:05 -0400 (Sat, 23 Apr 2005) | 18 lines

Renamed strlcpy_utf8() to utf8_strlcpy().
Added utf32_compose(), utf32_next_starter(), utf32_compose_char(),
	utf32_compose_hangul(), utf32_strdup(), utf32_composition_exclude().
Added unicode_NFKC() for testing.
utf32_decompose():
	Use a bool parameter to switch between NFD/NFKD instead of a function.
utf8_decompose():
	Use a bool parameter to switch between NFD/NFKD instead of a function.
	Renamed nfd_len to new_len.
Unified utf32_decompose_nfkd_char() and utf32_decompose_nfd_char()
	into utf32_decompose_char().
Unified utf32_nfkd_lookup() and utf32_nfd_lookup()
	into utf32_decompose_lookup().
utf8_skip():
	Use the table only for values 192-255.
Replaced utf32_nfd_lut_low, utf32_nfd_lut_high, utf32_nfkd_lut
	with utf32_nfd_lut using flags to differ between NFD/NFKD.

------------------------------------------------------------------------
r8027 | cbiere | 2005-04-23 01:43:07 -0400 (Sat, 23 Apr 2005) | 3 lines

Added deconstify_guint32().
Removed unnecessary extra prototype for is_pow2().

------------------------------------------------------------------------
r8026 | cbiere | 2005-04-23 01:41:47 -0400 (Sat, 23 Apr 2005) | 2 lines

Renamed strlcpy_utf8() to utf8_strlcpy().

------------------------------------------------------------------------
r8025 | cbiere | 2005-04-23 01:40:26 -0400 (Sat, 23 Apr 2005) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r8024 | cbiere | 2005-04-21 17:02:19 -0400 (Thu, 21 Apr 2005) | 2 lines

Removed the legacy push-proxy IP address swapping hack.

------------------------------------------------------------------------
r8023 | cbiere | 2005-04-21 12:46:13 -0400 (Thu, 21 Apr 2005) | 3 lines

vmsg_infostr():
	Added const-qualifier to ``data''.

------------------------------------------------------------------------
r8022 | cbiere | 2005-04-21 12:45:20 -0400 (Thu, 21 Apr 2005) | 2 lines

Added ``magic'' to ``struct tsync'', just in case.

------------------------------------------------------------------------
r8021 | cbiere | 2005-04-21 12:43:24 -0400 (Thu, 21 Apr 2005) | 2 lines

Added some support for GGEP "IP".

------------------------------------------------------------------------
r8020 | cbiere | 2005-04-21 12:38:12 -0400 (Thu, 21 Apr 2005) | 2 lines

Added const-qualifiers where appropriate.

------------------------------------------------------------------------
r8019 | cbiere | 2005-04-21 12:23:13 -0400 (Thu, 21 Apr 2005) | 2 lines

Minor style fixes with respect to GSList handling.

------------------------------------------------------------------------
r8018 | cbiere | 2005-04-21 12:22:13 -0400 (Thu, 21 Apr 2005) | 3 lines

nodes_gui_common_connect_by_name():
	parse_uint32() is sufficient here.

------------------------------------------------------------------------
r8017 | cbiere | 2005-04-21 12:21:13 -0400 (Thu, 21 Apr 2005) | 8 lines

Moved unicode lookup tables to utf8_tables.h.
Added routines for NFKD.
Corrected NFD routines: Combining characters were not put into canonical order.
unicode_canonize():
	icu_to_utf8_conv() used the wrong input buffer so that the
	resulting string was not guaranteed to be in NFC.
	The check for a latin locale was removed because it was bogus.

------------------------------------------------------------------------
r8016 | cbiere | 2005-04-21 11:45:53 -0400 (Thu, 21 Apr 2005) | 2 lines

Moved unicode lookup tables from utf8.c.

------------------------------------------------------------------------
r8015 | cbiere | 2005-04-21 11:43:27 -0400 (Thu, 21 Apr 2005) | 2 lines

Removed duplicate ``const''.

------------------------------------------------------------------------
r8014 | cbiere | 2005-04-21 11:38:25 -0400 (Thu, 21 Apr 2005) | 2 lines

Added some ranges of Exodus Communications.

------------------------------------------------------------------------
r8013 | rmanfredi | 2005-04-14 14:54:57 -0400 (Thu, 14 Apr 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r8012 | cbiere | 2005-04-14 13:45:59 -0400 (Thu, 14 Apr 2005) | 3 lines

add_file():
	Readded missing trailing ':' after "urn:sha1".

------------------------------------------------------------------------
r8011 | cbiere | 2005-04-14 13:39:20 -0400 (Thu, 14 Apr 2005) | 3 lines

get_file_to_upload():
	I meant parse_uint32() not parse_uint64().

------------------------------------------------------------------------
r8010 | cbiere | 2005-04-14 12:59:13 -0400 (Thu, 14 Apr 2005) | 2 lines

Readded ban of 0.93 and 0.94 which were wrongly removed in rev. 1.5.

------------------------------------------------------------------------
r8009 | cbiere | 2005-04-14 10:27:23 -0400 (Thu, 14 Apr 2005) | 3 lines

Added function attribute WARN_UNUSED_RESULT; added WARN_UNUSED_RESULT
	and G_GNUC_CONST to some prototypes.

------------------------------------------------------------------------
r8008 | cbiere | 2005-04-14 09:37:07 -0400 (Thu, 14 Apr 2005) | 4 lines

get_file_to_upload():
	Added missing assignment to ``uri'' (caused by previous commit).
	[Spotted by hjort.]

------------------------------------------------------------------------
r8007 | cbiere | 2005-04-13 15:33:44 -0400 (Wed, 13 Apr 2005) | 3 lines

gui_fix_coords():
	Use a quarter of the screen as default size.

------------------------------------------------------------------------
r8006 | cbiere | 2005-04-13 10:49:09 -0400 (Wed, 13 Apr 2005) | 3 lines

parse_major_minor():
	Forgot to advance the pointer.

------------------------------------------------------------------------
r8005 | cbiere | 2005-04-13 10:36:45 -0400 (Wed, 13 Apr 2005) | 2 lines

Use parse_uint32() instead of parse_uint64(), the latter is overkill.

------------------------------------------------------------------------
r8004 | cbiere | 2005-04-13 10:35:39 -0400 (Wed, 13 Apr 2005) | 3 lines

qrp_hashcode():
	Moved ``retlen'' into the scope where it's used.

------------------------------------------------------------------------
r8003 | cbiere | 2005-04-13 10:34:11 -0400 (Wed, 13 Apr 2005) | 7 lines

get_header_version():
	Use parse_major_minor() instead of sscanf().
get_integer():
	Use parse_uint32() instead of parse_uint64().
parq_download_queue_ack():
	Take advantage of the modified is_strprefix().

------------------------------------------------------------------------
r8002 | cbiere | 2005-04-13 10:32:10 -0400 (Wed, 13 Apr 2005) | 4 lines

Use parse_major_minor() instead of sscanf().
Use parse_uint32() where parse_uint64() is overkill.
Removed expired code.

------------------------------------------------------------------------
r8001 | cbiere | 2005-04-13 10:30:11 -0400 (Wed, 13 Apr 2005) | 9 lines

code_message_parse():
	Use parse_uint32 instead of parse_uint64().
http_status_parse():
http_extract_version():
	``major'' and ``minor'' are both set to zero instead of -1 in
	case of a parse failure; changed their type to guint.
	Use parse_major_minor() instead of sscanf().
	Take advantage of the modified is_strprefix().

------------------------------------------------------------------------
r8000 | cbiere | 2005-04-13 10:24:43 -0400 (Wed, 13 Apr 2005) | 2 lines

Use parse_uint32() instead of parse_uint64() where the latter is overkill.

------------------------------------------------------------------------
r7999 | cbiere | 2005-04-13 10:23:43 -0400 (Wed, 13 Apr 2005) | 8 lines

process_rdf_description():
	Take advantage of the modified is_strprefix().
	Don't copy the SHA-1, just check that it's long enough.
process_meta_data():
	Ignore the ticket if it's a duplicate.
bitzi_cache_add():
	Return FALSE if the ticket is a duplicate, TRUE otherwise.

------------------------------------------------------------------------
r7998 | cbiere | 2005-04-13 10:17:38 -0400 (Wed, 13 Apr 2005) | 2 lines

Take advantage of the modified is_strprefix().

------------------------------------------------------------------------
r7997 | cbiere | 2005-04-13 10:12:51 -0400 (Wed, 13 Apr 2005) | 15 lines

is_strprefix():
	Instead of returning TRUE/FALSE, return either NULL or
	the first character after the prefix in ``str''. This
	allows a nicer method to skip prefixes.
short_filename():
	Take advantage of modified is_strprefix().
Added parse_uint32():
	This is equivalent to parse_uint64() except for the width of
	the integer. It should be used where 64-bit values are overkill.
	The advantage/difference to strtoul() et al. is that it's stricter
	and doesn't touch ``errno''.
Added parse_major_minor():
	This is for parsing for (version) strings like "123.45" and it's
	supposed to be stricter than sscanf().

------------------------------------------------------------------------
r7996 | cbiere | 2005-04-13 10:04:17 -0400 (Wed, 13 Apr 2005) | 3 lines

uhc_try_random():
	Added proper prototype.

------------------------------------------------------------------------
r7995 | cbiere | 2005-04-13 10:02:13 -0400 (Wed, 13 Apr 2005) | 3 lines

socket_read():
	Use skip_ascii_blanks().

------------------------------------------------------------------------
r7994 | cbiere | 2005-04-13 09:59:55 -0400 (Wed, 13 Apr 2005) | 3 lines

hostiles_load():
	Show the amount of blocked hosts (IP addresses).

------------------------------------------------------------------------
r7993 | cbiere | 2005-04-13 08:03:44 -0400 (Wed, 13 Apr 2005) | 2 lines

Removed ranges already covered by larger ones.

------------------------------------------------------------------------
r7992 | cbiere | 2005-04-13 07:59:10 -0400 (Wed, 13 Apr 2005) | 2 lines

Added ranges of Exodus used by "spammers deluxe".

------------------------------------------------------------------------
r7991 | cbiere | 2005-04-13 00:44:57 -0400 (Wed, 13 Apr 2005) | 4 lines

search_gui_queue_bitzi_by_sha1():
	Use the same text as the GTK2 GUI.
	Added const-qualifier.

------------------------------------------------------------------------
r7990 | cbiere | 2005-04-13 00:23:17 -0400 (Wed, 13 Apr 2005) | 2 lines

Hide Bitzi related debug messages if ``bitzi_debug'' is zero.

------------------------------------------------------------------------
r7989 | cbiere | 2005-04-13 00:21:02 -0400 (Wed, 13 Apr 2005) | 12 lines

Replaced ``dbg'' with ``bitzi_debug''.
Removed trailing whitespace.
bitzi_create():
	Initialize ``expiry''.
process_rdf_description():
	Warn if ``ticketExpires'' cannot be parsed.
process_bitzi_ticket():
	Check whether the ticket has an urn:sha1 and a valid expiration date.
bitzi_cache_add():
bitzi_cache_remove():
	Added assertion checks.

------------------------------------------------------------------------
r7988 | cbiere | 2005-04-13 00:14:16 -0400 (Wed, 13 Apr 2005) | 2 lines

Added ``bitzi_debug''.

------------------------------------------------------------------------
r7987 | cbiere | 2005-04-12 22:46:18 -0400 (Tue, 12 Apr 2005) | 2 lines

Applied edited bitzi cache patch by Alex Bennee.

------------------------------------------------------------------------
r7986 | cbiere | 2005-04-12 19:56:54 -0400 (Tue, 12 Apr 2005) | 5 lines

qrp_hashcode():
	Added optimized route for ASCII.
	Encode characters as UTF-16 so that we hopefully have the same
	hashcodes as LimeWire for non-ASCII strings.

------------------------------------------------------------------------
r7985 | cbiere | 2005-04-12 19:52:51 -0400 (Tue, 12 Apr 2005) | 2 lines

Added utf16_encode_char() and utf16_encode_char_compact().

------------------------------------------------------------------------
r7984 | cbiere | 2005-04-11 22:35:07 -0400 (Mon, 11 Apr 2005) | 2 lines

Added #include "lib/misc.h" for is_strprefix().

------------------------------------------------------------------------
r7983 | cbiere | 2005-04-11 22:20:42 -0400 (Mon, 11 Apr 2005) | 5 lines

node_process_handshake_header():
	Use is_strprefix() instead of strncmp().
	Send minimum leaf headers for GTKG only since we don't know what's
	based on LimeWire.

------------------------------------------------------------------------
r7982 | cbiere | 2005-04-11 22:04:47 -0400 (Mon, 11 Apr 2005) | 2 lines

Use is_strprefix() instead of strncmp() where appropriate.

------------------------------------------------------------------------
r7981 | cbiere | 2005-04-11 21:58:17 -0400 (Mon, 11 Apr 2005) | 4 lines

Added is_strprefix().
short_filename():
	Use is_strprefix() instead of strncmp().

------------------------------------------------------------------------
r7980 | cbiere | 2005-04-11 18:35:35 -0400 (Mon, 11 Apr 2005) | 3 lines

Export utf32_lowercase().
Moved utf8_decode_lookahead() to utf8.h.

------------------------------------------------------------------------
r7979 | cbiere | 2005-04-11 18:28:03 -0400 (Mon, 11 Apr 2005) | 5 lines

qrp_hashcode():
	Calculate the correct code for non-ASCII strings.
qrp_init():
	Call test_hash().

------------------------------------------------------------------------
r7978 | cbiere | 2005-04-09 14:00:11 -0400 (Sat, 09 Apr 2005) | 2 lines

Updated list of GWebCaches.

------------------------------------------------------------------------
r7977 | cbiere | 2005-04-07 07:08:39 -0400 (Thu, 07 Apr 2005) | 2 lines

Added some ranges and merged others [patch provided by "mes"].

------------------------------------------------------------------------
r7976 | cbiere | 2005-04-07 01:53:57 -0400 (Thu, 07 Apr 2005) | 3 lines

Removed 65.192.0.0/11 (UUnet). We can't just block a whole ISP without
	*any* indication as to why.

------------------------------------------------------------------------
r7975 | cbiere | 2005-04-07 01:19:04 -0400 (Thu, 07 Apr 2005) | 2 lines

Added 204.9.117.0/24 and 204.9.118.0/24.

------------------------------------------------------------------------
r7974 | cbiere | 2005-04-05 20:12:46 -0400 (Tue, 05 Apr 2005) | 3 lines

ping_uhc_type():
	Show the peer address in the debug message.

------------------------------------------------------------------------
r7973 | cbiere | 2005-04-05 19:40:09 -0400 (Tue, 05 Apr 2005) | 6 lines

Added ``magic'' to ``struct gnutella_node''.
node_close():
	Nullify pointers after freeing memory.
node_real_remove():
	Clear ``magic''.

------------------------------------------------------------------------
r7972 | cbiere | 2005-04-05 19:18:45 -0400 (Tue, 05 Apr 2005) | 2 lines

Removed unnecessary NULL checks before G_FREE_NULL().

------------------------------------------------------------------------
r7971 | cbiere | 2005-04-05 19:15:43 -0400 (Tue, 05 Apr 2005) | 10 lines

parq_upload_save_queue():
	Use G_LIST_FOREACH() instead of g_list_foreach().
	Removed trailing whitespace.
parq_upload_load_queue():
	Corrected warning.
	The '>=' check for PARQ_TAG_NAME was misplaced causing truncation
	of the string.
parq_upload_create():
	Minor style fix.

------------------------------------------------------------------------
r7970 | cbiere | 2005-04-05 19:09:46 -0400 (Tue, 05 Apr 2005) | 3 lines

base32_sha1():
	Corrected validity check.

------------------------------------------------------------------------
r7969 | cbiere | 2005-04-05 19:08:38 -0400 (Tue, 05 Apr 2005) | 3 lines

search_gui_new_search_full():
	Removed unused variable ``l''.

------------------------------------------------------------------------
r7968 | cbiere | 2005-04-05 13:53:46 -0400 (Tue, 05 Apr 2005) | 2 lines

Removed unnecessary (and badly placed) #include directives.

------------------------------------------------------------------------
r7967 | cbiere | 2005-04-05 13:12:27 -0400 (Tue, 05 Apr 2005) | 2 lines

Re-enabled noisy debug output.

------------------------------------------------------------------------
r7966 | cbiere | 2005-04-05 13:10:05 -0400 (Tue, 05 Apr 2005) | 3 lines

bio_sendfile():
	Don't use madvise() if MADV_SEQUENTIAL isn't defined.

------------------------------------------------------------------------
r7965 | cbiere | 2005-04-03 13:29:23 -0400 (Sun, 03 Apr 2005) | 5 lines

search_gui_new_search_full():
	search_gui_parse_query() uses a list instead of a single rule now.
	Moved some code to search_gui_filter_new().
	Removed ``glist'' and gpointer cast where unnecessary.

------------------------------------------------------------------------
r7964 | cbiere | 2005-04-03 13:26:18 -0400 (Sun, 03 Apr 2005) | 10 lines

struct query:
search_gui_parse_text_query():
	Put the negative words in a list instead of a string.
search_gui_parse_query():
	Create a list of rules rather than using a single rule.
	The negative words should be OR-combined, so add one rule
	per word.
search_gui_filter_new():
	Moved code from gtk[12]/search.c to here.

------------------------------------------------------------------------
r7963 | cbiere | 2005-04-03 12:34:42 -0400 (Sun, 03 Apr 2005) | 2 lines

Removed duplicate line. [by Daichi Kawahata]

------------------------------------------------------------------------
r7962 | cbiere | 2005-04-03 11:01:16 -0400 (Sun, 03 Apr 2005) | 4 lines

search_gui_parse_text_query():
	Don't use GString because GLib 1.2 doesn't have g_string_append_len().
	Remove trailing whitespace from the complete strings.

------------------------------------------------------------------------
r7961 | cbiere | 2005-04-03 09:57:31 -0400 (Sun, 03 Apr 2005) | 4 lines

search_gui_new_search_full():
	Pass ``rule'' to search_gui_parse_query() to retrieve an implicit
	rule from the query string and add it to the filter - if any.

------------------------------------------------------------------------
r7960 | cbiere | 2005-04-03 09:52:32 -0400 (Sun, 03 Apr 2005) | 4 lines

set_flags():
clear_flags():
	Don't evaluate ``r'' twice, use the |= resp. &= operator.

------------------------------------------------------------------------
r7959 | cbiere | 2005-04-03 09:50:39 -0400 (Sun, 03 Apr 2005) | 2 lines

Updated prototype of search_gui_parse_query().

------------------------------------------------------------------------
r7958 | cbiere | 2005-04-03 09:49:54 -0400 (Sun, 03 Apr 2005) | 7 lines

Added search_gui_parse_text_query():
	Interpret " -" in front of a word specially i.e., use the following
	word as negative word filter and not as part of the search string.
Added free_query().
search_gui_parse_query():
	Use search_gui_parse_text_query().

------------------------------------------------------------------------
r7957 | cbiere | 2005-04-03 09:44:28 -0400 (Sun, 03 Apr 2005) | 6 lines

target_to_string():
	Use (filter_t *) as parameter type instead of gpointer.
builtin_to_xml():
	target_to_string() needs the returned value of the filter target
	function, not a pointer to the function.

------------------------------------------------------------------------
r7956 | cbiere | 2005-04-03 05:53:13 -0400 (Sun, 03 Apr 2005) | 2 lines

Dear Mr Konstantin Goudkov, spam elsewhere. Thanks in advance.

------------------------------------------------------------------------
r7955 | cbiere | 2005-04-02 15:18:26 -0500 (Sat, 02 Apr 2005) | 2 lines

Fixed comment for doxygen. [by Daichi Kawahata]

------------------------------------------------------------------------
r7954 | cbiere | 2005-04-01 21:56:36 -0500 (Fri, 01 Apr 2005) | 3 lines

Load the global hostiles.txt and/or skip its database if the
	setting is changed at runtime.

------------------------------------------------------------------------
r7953 | cbiere | 2005-04-01 21:53:19 -0500 (Fri, 01 Apr 2005) | 3 lines

Added checkbutton for PROP_USE_GLOBAL_HOSTILES_TXT under
	Preferences->Network->Banning.

------------------------------------------------------------------------
r7952 | cbiere | 2005-04-01 17:04:51 -0500 (Fri, 01 Apr 2005) | 5 lines

Maintain two independent databases of hostiles so that you don't have to
	modify the global list to add new items. This should also ensure
	that most users will get an updated hostiles.txt with each
	release.

------------------------------------------------------------------------
r7951 | cbiere | 2005-04-01 17:01:26 -0500 (Fri, 01 Apr 2005) | 2 lines

Added property "use_global_hostiles_txt".

------------------------------------------------------------------------
r7950 | cbiere | 2005-04-01 16:58:50 -0500 (Fri, 01 Apr 2005) | 2 lines

Fixed file (descriptor) leak.

------------------------------------------------------------------------
r7949 | cbiere | 2005-04-01 16:13:59 -0500 (Fri, 01 Apr 2005) | 2 lines

Converted to CIDR notation. [by "mes"]

------------------------------------------------------------------------
r7948 | cbiere | 2005-03-31 15:57:59 -0500 (Thu, 31 Mar 2005) | 2 lines

Allow automagic requeries until a proper solution and consent is found.

------------------------------------------------------------------------
r7947 | cbiere | 2005-03-31 14:25:44 -0500 (Thu, 31 Mar 2005) | 2 lines

Updated Spanish translation by Paco Arjonilla.

------------------------------------------------------------------------
r7946 | cbiere | 2005-03-31 14:06:26 -0500 (Thu, 31 Mar 2005) | 2 lines

The check in GMSGFMT_FLAGS was inverted.

------------------------------------------------------------------------
r7945 | cbiere | 2005-03-30 23:01:56 -0500 (Wed, 30 Mar 2005) | 2 lines

Added ranges provided by "mes".

------------------------------------------------------------------------
r7944 | cbiere | 2005-03-30 17:34:08 -0500 (Wed, 30 Mar 2005) | 6 lines

file_info_store_one():
	Keep entries around as long as the download isn't finished, so that
	they can be picked up by search results.
file_info_store_list():
	GSList style fix.

------------------------------------------------------------------------
r7943 | cbiere | 2005-03-30 12:46:35 -0500 (Wed, 30 Mar 2005) | 3 lines

Forgot to commit changes to qrp.h previously.
Removed prototype for qrp_hashcode().

------------------------------------------------------------------------
r7942 | graaff | 2005-03-30 10:47:25 -0500 (Wed, 30 Mar 2005) | 2 lines

Match up to changes in qrp.c to make picky compilers happy.

------------------------------------------------------------------------
r7941 | cbiere | 2005-03-29 19:37:27 -0500 (Tue, 29 Mar 2005) | 3 lines

udp_is_valid_gnet():
	Show the source address if we received dirt.

------------------------------------------------------------------------
r7940 | cbiere | 2005-03-29 19:36:17 -0500 (Tue, 29 Mar 2005) | 4 lines

search_request():
	Removed ``optimization'' which prevented routing of all queries
	when no are files shared or uploads are disabled.

------------------------------------------------------------------------
r7939 | cbiere | 2005-03-29 19:34:16 -0500 (Tue, 29 Mar 2005) | 7 lines

qhvec_clone():
qhvec_add():
	Added const-qualifier.
qrp_hashcode():
qrp_hash():
	Changed to ``static inline''.

------------------------------------------------------------------------
r7938 | cbiere | 2005-03-29 19:32:12 -0500 (Tue, 29 Mar 2005) | 4 lines

host_timer():
	Corrected debug message.
	Print the message only if there are actually missing peers.

------------------------------------------------------------------------
r7937 | cbiere | 2005-03-29 10:13:09 -0500 (Tue, 29 Mar 2005) | 9 lines

Added gchar_to_xmlChar():
	``safer cast(TM)''.
Added xml_new_empty_child():
	Wrapper to get rid of unnecessary parameters and cast for ``name''.
builtin_to_xml():
	Turned multiple calls into loop.
Replaced xmlNewChild() with xml_new_empty_child().
Removed unnecessary casts.

------------------------------------------------------------------------
r7936 | cbiere | 2005-03-29 10:01:26 -0500 (Tue, 29 Mar 2005) | 3 lines

sock_set_intern():
	len should be of type socklen_t not int.

------------------------------------------------------------------------
r7935 | cbiere | 2005-03-28 16:51:13 -0500 (Mon, 28 Mar 2005) | 2 lines

Set LC_ALL to C for tr.

------------------------------------------------------------------------
r7934 | cbiere | 2005-03-28 10:09:39 -0500 (Mon, 28 Mar 2005) | 2 lines

Don't share files with ASCII control characters in the pathname.

------------------------------------------------------------------------
r7933 | cbiere | 2005-03-28 09:27:58 -0500 (Mon, 28 Mar 2005) | 2 lines

Removed outdated code.

------------------------------------------------------------------------
r7932 | cbiere | 2005-03-28 08:53:44 -0500 (Mon, 28 Mar 2005) | 3 lines

download_close():
	Remove downloads from the GUI before destroying them.

------------------------------------------------------------------------
r7931 | cbiere | 2005-03-27 17:43:37 -0500 (Sun, 27 Mar 2005) | 3 lines

Added refcount to ``struct oob_results'' so that the memory isn't released
	as long as it's referenced.

------------------------------------------------------------------------
r7930 | cbiere | 2005-03-27 01:54:57 -0500 (Sun, 27 Mar 2005) | 6 lines

parq_upload_load_queue():
	Parse the PARQ entries properly.
parq_store():
	Store XIP/XPORT only if necessary.
	Don't store entries that have already expired.

------------------------------------------------------------------------
r7929 | cbiere | 2005-03-27 00:19:54 -0500 (Sun, 27 Mar 2005) | 4 lines

Use deconstify_gchar() instead of a direct cast.
Renamed ``ep'' to ``endptr'' for better readability.
Added const-qualifiers.

------------------------------------------------------------------------
r7928 | cbiere | 2005-03-27 00:09:36 -0500 (Sun, 27 Mar 2005) | 5 lines

parse_uint64():
	Added const-qualifier to ``endptr'' parameter.
Added deconstify_gchar():
	Casts to (gchar *) without suppressing useful compiler warnings.

------------------------------------------------------------------------
r7927 | cbiere | 2005-03-27 00:02:41 -0500 (Sun, 27 Mar 2005) | 5 lines

Added xml_get_string() and xml_prop_set() to get rid of (xmlChar *) casts.
parse_number():
parse_target():
	Renamed ``ep'' to ``endptr'' for better readability.

------------------------------------------------------------------------
r7926 | graaff | 2005-03-26 13:59:23 -0500 (Sat, 26 Mar 2005) | 2 lines

Use proper name for Spain.

------------------------------------------------------------------------
r7925 | graaff | 2005-03-26 13:58:37 -0500 (Sat, 26 Mar 2005) | 2 lines

Add hint for translators.

------------------------------------------------------------------------
r7924 | cbiere | 2005-03-25 14:41:41 -0500 (Fri, 25 Mar 2005) | 2 lines

Minor optimization of ascii_strcasecmp() and ascii_strncasecmp().

------------------------------------------------------------------------
r7923 | cbiere | 2005-03-25 12:47:46 -0500 (Fri, 25 Mar 2005) | 7 lines

Use ascii_strncasecmp() and ascii_strcasecmp() instead of strcasecmp() and
	strncasecmp() where appropriate.
GLib 1.2 has no g_ascii_strcasecmp() or g_ascii_strncasecmp(), so we can't
	use them and they must not be aliases for strcasecmp/strncasecmp().
Renamed strlower() to locale_strlower() as it is important to know that
	the conversion depends on the current locale.

------------------------------------------------------------------------
r7922 | cbiere | 2005-03-25 11:25:44 -0500 (Fri, 25 Mar 2005) | 3 lines

Changed strcasestr() to ascii_strcasestr() as it's only used for protocol
	data which is ASCII-based.

------------------------------------------------------------------------
r7921 | cbiere | 2005-03-25 09:34:08 -0500 (Fri, 25 Mar 2005) | 5 lines

Converted all is_ascii_* macros to inline functions.
Do not use ctype's is* routines as they depend on the current locale
	which might not be ASCII-compatible.
Fixed ascii_tolower/upper: wrong sign/direction.

------------------------------------------------------------------------
r7920 | cbiere | 2005-03-25 08:20:17 -0500 (Fri, 25 Mar 2005) | 2 lines

Lowercase is in the other direction.

------------------------------------------------------------------------
r7919 | cbiere | 2005-03-24 23:45:43 -0500 (Thu, 24 Mar 2005) | 2 lines

Don't use tolower/toupper directly where only ASCII is valid/expected.

------------------------------------------------------------------------
r7918 | cbiere | 2005-03-23 09:19:41 -0500 (Wed, 23 Mar 2005) | 2 lines

Applied update patches by Daichi Kawahata.

------------------------------------------------------------------------
r7917 | cbiere | 2005-03-22 19:05:33 -0500 (Tue, 22 Mar 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7916 | cbiere | 2005-03-22 19:01:21 -0500 (Tue, 22 Mar 2005) | 2 lines

Hide/show the complete hbox instead of each sub-widget.

------------------------------------------------------------------------
r7915 | cbiere | 2005-03-22 18:59:15 -0500 (Tue, 22 Mar 2005) | 2 lines

Let the timeout be zero (disable) but not lower than the minimum otherwise.

------------------------------------------------------------------------
r7914 | rmanfredi | 2005-03-22 17:55:36 -0500 (Tue, 22 Mar 2005) | 2 lines

Manual override.

------------------------------------------------------------------------
r7913 | rmanfredi | 2005-03-22 16:55:42 -0500 (Tue, 22 Mar 2005) | 2 lines

Manual override.

------------------------------------------------------------------------
r7912 | cbiere | 2005-03-22 12:46:54 -0500 (Tue, 22 Mar 2005) | 3 lines

gtk_cell_renderer_progress_render():
	Corrected type of flags.

------------------------------------------------------------------------
r7911 | cbiere | 2005-03-22 12:35:39 -0500 (Tue, 22 Mar 2005) | 3 lines

Use G_STMT_START/END instead of do { } while(0) to silence pedantic warnings
	regarding unreached code due to a return or goto statement.

------------------------------------------------------------------------
r7910 | cbiere | 2005-03-22 12:18:27 -0500 (Tue, 22 Mar 2005) | 4 lines

Emit X-Requeries header.
Ignore reissue timeout.
Do not resume searches at startup.

------------------------------------------------------------------------
r7909 | cbiere | 2005-03-21 17:38:21 -0500 (Mon, 21 Mar 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r7908 | cbiere | 2005-03-21 17:27:55 -0500 (Mon, 21 Mar 2005) | 5 lines

download_info_reget():
	Remove the download from the GUI before file_info_remove_source(),
	because the GUI uses d->file_info.
	This might fix #1161531 and #1094695.

------------------------------------------------------------------------
r7907 | cbiere | 2005-03-21 17:18:00 -0500 (Mon, 21 Mar 2005) | 3 lines

Changed macro definition of "FOUND" so that "while (0)" together
	with "return" doesn't cause pedantic warnings about unreached code.

------------------------------------------------------------------------
r7906 | cbiere | 2005-03-21 17:08:56 -0500 (Mon, 21 Mar 2005) | 3 lines

Changed xml_get_string() from macro to static inline so that ``id'' can
	be casted safely to get rid of pedantic warnings.

------------------------------------------------------------------------
r7905 | cbiere | 2005-03-21 16:56:04 -0500 (Mon, 21 Mar 2005) | 3 lines

build_search_msg():
	Corrected type of "sizep" to guint32 * to silence pedantic warnings.

------------------------------------------------------------------------
r7904 | cbiere | 2005-03-21 16:55:01 -0500 (Mon, 21 Mar 2005) | 3 lines

Removed unnecessary cast for gnet_prop_get_storage() as it takes gchar *
	now instead of guint8 *.

------------------------------------------------------------------------
r7903 | cbiere | 2005-03-21 16:53:44 -0500 (Mon, 21 Mar 2005) | 6 lines

qrt_shrink_arena():
	Use gchar rather than guchar for arena.
qrt_receive_next():
	Removed unnecessary "goto" and "return" to silence pedantic warnings
	about unreached code.

------------------------------------------------------------------------
r7902 | cbiere | 2005-03-21 16:50:17 -0500 (Mon, 21 Mar 2005) | 4 lines

pmsg_new_extend():
pmsg_clone_extend():
	Renamed parameter "free" to "free_func", just in case.

------------------------------------------------------------------------
r7901 | cbiere | 2005-03-21 16:48:08 -0500 (Mon, 21 Mar 2005) | 3 lines

mq_udp_putq():
	Added assertion to ensure the element isn't queued any longer.

------------------------------------------------------------------------
r7900 | cbiere | 2005-03-21 16:46:30 -0500 (Mon, 21 Mar 2005) | 3 lines

host_type_to_gchar():
	Corrected parameter type.

------------------------------------------------------------------------
r7899 | cbiere | 2005-03-21 16:45:09 -0500 (Mon, 21 Mar 2005) | 3 lines

on_popup_downloads_abort_sha1_activate():
	Removed unnecessary line break.

------------------------------------------------------------------------
r7898 | cbiere | 2005-03-21 16:43:53 -0500 (Mon, 21 Mar 2005) | 4 lines

zlib_deflate_step():
	Removed unnecessary "goto" and "g_assert_not_reached()" to
	silence pedantic warnings about unreached code.

------------------------------------------------------------------------
r7897 | cbiere | 2005-03-21 16:16:12 -0500 (Mon, 21 Mar 2005) | 7 lines

Prototype style fixes.
Moved declaration of ``hex_alphabet_lower'' to prop_save_to_file().
Moved declaration of ``prop_tmp'' to prop_load_from_file().
prop_parse_storage():
	Changed ``h'' and ``l'' to gchar to silence pedantic compilers,
	is_ascii_xdigit() does the right thing.

------------------------------------------------------------------------
r7896 | cbiere | 2005-03-21 16:08:31 -0500 (Mon, 21 Mar 2005) | 3 lines

vmsg_build_oob_reply_ind():
	Removed unnecessary lvalue casts.

------------------------------------------------------------------------
r7895 | cbiere | 2005-03-21 16:07:13 -0500 (Mon, 21 Mar 2005) | 2 lines

Style fixes.

------------------------------------------------------------------------
r7894 | cbiere | 2005-03-21 16:04:48 -0500 (Mon, 21 Mar 2005) | 3 lines

Comment out code for sendfile() support so that munmap() isn't implicitely
	defined.

------------------------------------------------------------------------
r7893 | cbiere | 2005-03-21 16:03:19 -0500 (Mon, 21 Mar 2005) | 9 lines

Style fixes.
shell_write_data():
	Fixed broken error handling for write() which could cause to
	keep the connection for the shell connection even after hangup and
	also an assertion failure.
	g_assert() contained call to non-redundant function.
shell_destroy():
	g_assert() contained call to non-redundant function.

------------------------------------------------------------------------
r7892 | cbiere | 2005-03-09 13:29:38 -0500 (Wed, 09 Mar 2005) | 2 lines

Don't use "-c" and "--statistics" with ancient versions of (g)msgfmt.

------------------------------------------------------------------------
r7891 | cbiere | 2005-03-09 02:31:36 -0500 (Wed, 09 Mar 2005) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r7890 | cbiere | 2005-03-08 10:09:46 -0500 (Tue, 08 Mar 2005) | 3 lines

bio_sendfile():
	Suppress bogus "might be clobbered..." warnings emitted by GCC 2.95.x.

------------------------------------------------------------------------
r7889 | cbiere | 2005-03-07 12:52:21 -0500 (Mon, 07 Mar 2005) | 3 lines

unicode_canonize():
	Added missing parameter for utf8_to_icu_conv().

------------------------------------------------------------------------
r7888 | cbiere | 2005-03-06 17:21:50 -0500 (Sun, 06 Mar 2005) | 3 lines

Added utf8_to_icu_conv().
Renamed to_icu_conv() to locale_to_icu_conv().

------------------------------------------------------------------------
r7887 | cbiere | 2005-03-06 17:20:45 -0500 (Sun, 06 Mar 2005) | 7 lines

Corrected some comments: ICU uses UTF-16 not UTF-32.
Added utf8_to_icu_conv().
Renamed to_icu_conv() to locale_to_icu_conv().
icu_to_utf8_conv():
	The input is already UTF-8 encoded.(locale_)to_icu_conv() was
	wrong and probabled caused conversion failures.

------------------------------------------------------------------------
r7886 | cbiere | 2005-03-06 17:17:10 -0500 (Sun, 06 Mar 2005) | 3 lines

search_new():
	Allow qdup to be an empty string after (or before) conversion.

------------------------------------------------------------------------
r7885 | cbiere | 2005-03-06 07:37:40 -0500 (Sun, 06 Mar 2005) | 3 lines

load_helper():
	Fixed potential memory leak in previous optimization.

------------------------------------------------------------------------
r7884 | rmanfredi | 2005-03-03 14:59:43 -0500 (Thu, 03 Mar 2005) | 2 lines

Was missing '@' in local_install targets -- regenerated.

------------------------------------------------------------------------
r7883 | cbiere | 2005-03-03 14:26:20 -0500 (Thu, 03 Mar 2005) | 2 lines

Removed spurious empty lines.

------------------------------------------------------------------------
r7882 | cbiere | 2005-03-03 14:09:27 -0500 (Thu, 03 Mar 2005) | 4 lines

gm_sanitize_filename():
	Fixed off-by-one bug was triggered by long filenames starting with
	a dot.

------------------------------------------------------------------------
r7881 | cbiere | 2005-02-26 20:12:27 -0500 (Sat, 26 Feb 2005) | 4 lines

Handle SIGBUS and SIGSEGV for mmap(). These signals may be raised if the
	mmap()ed file is truncated while accessing the memory area and if
	the implementation of write() doesn't handle this gracefully.

------------------------------------------------------------------------
r7880 | cbiere | 2005-02-26 20:09:39 -0500 (Sat, 26 Feb 2005) | 3 lines

set_signal():
	Use a struct copy instead of memset() to zero-out ``sa''.

------------------------------------------------------------------------
r7879 | cbiere | 2005-02-26 20:08:53 -0500 (Sat, 26 Feb 2005) | 2 lines

Moved inclusion of <setjmp.h> to common.h.

------------------------------------------------------------------------
r7878 | cbiere | 2005-02-26 17:30:43 -0500 (Sat, 26 Feb 2005) | 2 lines

Added sendfile_ctx_t to struct upload.

------------------------------------------------------------------------
r7877 | cbiere | 2005-02-26 17:29:26 -0500 (Sat, 26 Feb 2005) | 7 lines

get_file_to_upload_from_urn():
	Check whether the SHA1 is up to date.
upload_http_status():
	Don't call sha1_hash_is_uptodate() from here, it's too late.
upload_request():
	Add HTTP_EXTRA_CALLBACK for upload_http_sha1_add.

------------------------------------------------------------------------
r7876 | cbiere | 2005-02-26 17:21:31 -0500 (Sat, 26 Feb 2005) | 4 lines

sha1_hash_is_uptodate():
	Check whether the filesize has changed.
	Check whether the file is still shareable or if it's too large.

------------------------------------------------------------------------
r7875 | cbiere | 2005-02-26 15:16:34 -0500 (Sat, 26 Feb 2005) | 3 lines

Use mmap() if sendfile() is not available.
Added errno codes that should not disable sendfile().

------------------------------------------------------------------------
r7874 | cbiere | 2005-02-26 02:32:40 -0500 (Sat, 26 Feb 2005) | 19 lines

strlcpy_utf8():
	Minor optimizations.
Added utf8_encoded_char_len().
utf8_encode_char():
	Moved code to determine character length to utf8_encoded_char_len().
locale_to_utf8_nfd():
	Renamed utf8_len to utf8_size to emphasize that it includes the NUL.
utf32_to_utf8(): /* This is unused so far! */
	Fixed off-by-one bug.
	Minor optimization.
utf8_decompose_nfd():
	Fixed bug in previous commit: Returned character length instead of
	byte length.
	Splitted into two loops again b/c it's easier to read.
	Optimized.
utf8_remap():
	Splitted into two loops b/c it's easier to read.
	Optimized.

------------------------------------------------------------------------
r7873 | cbiere | 2005-02-26 02:22:20 -0500 (Sat, 26 Feb 2005) | 5 lines

Added debug code to list the most seen SHA1s and hosts.
search_new():
	Convert the query to UTF-8.
	If ICU isn't available, use at least utf8_strlower_copy().

------------------------------------------------------------------------
r7872 | cbiere | 2005-02-26 00:22:10 -0500 (Sat, 26 Feb 2005) | 10 lines

Updated tables to Unicode 4.0.0.
Style fixes.
Added utf32_uppercase(), utf8_strupper(), utf8_strlower_copy(),
	utf8_strupper_copy().
utf8_strlower():
	Moved code to utf8_remap() so that the code can be shared
	with utf8_strupper().
utf8_decompose_nfd():
	Use only one big loop instead of two to reduce duplicate code.

------------------------------------------------------------------------
r7871 | cbiere | 2005-02-25 19:32:19 -0500 (Fri, 25 Feb 2005) | 5 lines

merge_table_into_arena():
	Minor simplification.
qrp_add_file():
	Modified assertion to be simpler and stronger.

------------------------------------------------------------------------
r7870 | cbiere | 2005-02-25 19:27:53 -0500 (Fri, 25 Feb 2005) | 2 lines

Minor style fix.

------------------------------------------------------------------------
r7869 | cbiere | 2005-02-25 19:24:31 -0500 (Fri, 25 Feb 2005) | 3 lines

tree_view_save_visibility():
	Fixed type of val to gboolean.

------------------------------------------------------------------------
r7868 | cbiere | 2005-02-25 19:21:21 -0500 (Fri, 25 Feb 2005) | 2 lines

Changed types of variables to guint32 used with gnet_prop_get_guint32_val().

------------------------------------------------------------------------
r7867 | cbiere | 2005-02-25 19:15:10 -0500 (Fri, 25 Feb 2005) | 2 lines

Replaced guchar with gchar to match prototypes.

------------------------------------------------------------------------
r7866 | cbiere | 2005-02-25 19:13:48 -0500 (Fri, 25 Feb 2005) | 2 lines

Added casts to fix pedantic warnings.

------------------------------------------------------------------------
r7865 | cbiere | 2005-02-25 19:12:37 -0500 (Fri, 25 Feb 2005) | 3 lines

nodes_gui_reverse_lookup_selected_helper():
	Added cast to fix pedantic warning.

------------------------------------------------------------------------
r7863 | cbiere | 2005-02-23 16:33:26 -0500 (Wed, 23 Feb 2005) | 2 lines

Added once again.

------------------------------------------------------------------------
r7862 | cbiere | 2005-02-22 19:34:26 -0500 (Tue, 22 Feb 2005) | 5 lines

on_popup_queue_abort_named_activate():
on_popup_downloads_abort_named_activate():
	Check that the file actually has a SHA1 to prevent a NULL-pointer
	dereference.

------------------------------------------------------------------------
r7861 | cbiere | 2005-02-22 08:41:06 -0500 (Tue, 22 Feb 2005) | 2 lines

Added .cvsignore files provided by Daichi Kawahata.

------------------------------------------------------------------------
r7860 | cbiere | 2005-02-21 09:47:36 -0500 (Mon, 21 Feb 2005) | 6 lines

Bumped size of the fixed buffers since filenames might be rather long
	especially when UTF-8 encoded.
filter_new_text_rule():
	Forgot "+ 1" at memcpy() for the case-sensitive part, so the
	string was not NUL-terminated.

------------------------------------------------------------------------
r7859 | cbiere | 2005-02-21 04:44:35 -0500 (Mon, 21 Feb 2005) | 3 lines

rw_screen():
	Use BINARY_SEARCH().

------------------------------------------------------------------------
r7858 | cbiere | 2005-02-21 04:43:39 -0500 (Mon, 21 Feb 2005) | 3 lines

file_info_string_to_tag():
	Use BINARY_SEARCH().

------------------------------------------------------------------------
r7857 | cbiere | 2005-02-21 04:42:41 -0500 (Mon, 21 Feb 2005) | 3 lines

find_message():
	Use BINARY_SEARCH().

------------------------------------------------------------------------
r7856 | cbiere | 2005-02-21 04:39:50 -0500 (Mon, 21 Feb 2005) | 2 lines

Added const-qualifiers where appropriate.

------------------------------------------------------------------------
r7855 | cbiere | 2005-02-21 04:38:59 -0500 (Mon, 21 Feb 2005) | 6 lines

Style fixes.
Added const-qualifiers where appropriate.
filter_new_text_rule():
filter_apply():
	Use utf8_strlower().

------------------------------------------------------------------------
r7854 | cbiere | 2005-02-21 04:37:03 -0500 (Mon, 21 Feb 2005) | 3 lines

find_vendor():
	Use BINARY_SEARCH().

------------------------------------------------------------------------
r7853 | cbiere | 2005-02-21 04:35:59 -0500 (Mon, 21 Feb 2005) | 2 lines

Added utf8_strlower().

------------------------------------------------------------------------
r7852 | cbiere | 2005-02-21 04:35:01 -0500 (Mon, 21 Feb 2005) | 6 lines

Splitted utf32_nfd_lut[] to reduce its size.
utf32_nfd_lookup():
	Use BINARY_SEARCH().
Added utf32_lowercase().
Added utf8_strlower().

------------------------------------------------------------------------
r7851 | cbiere | 2005-02-21 04:28:59 -0500 (Mon, 21 Feb 2005) | 2 lines

Added macro BINARY_SEARCH().

------------------------------------------------------------------------
r7850 | cbiere | 2005-02-21 04:27:34 -0500 (Mon, 21 Feb 2005) | 2 lines

Removed include for if/ui/gtk/search.h.

------------------------------------------------------------------------
r7849 | cbiere | 2005-02-21 04:26:40 -0500 (Mon, 21 Feb 2005) | 2 lines

Include if/ui/gtk/search.h for search_t.

------------------------------------------------------------------------
r7848 | cbiere | 2005-02-20 18:54:28 -0500 (Sun, 20 Feb 2005) | 3 lines

Modified macro COMPARE_FUNC() so that "code" is not included.
Added macro COMPARE_FUNC_END for a symmetric look.

------------------------------------------------------------------------
r7847 | cbiere | 2005-02-20 18:52:12 -0500 (Sun, 20 Feb 2005) | 12 lines

Style fixes.
Removed unnecessary prototypes.
Added checks for struct record to catch dangling pointers and consistency.
Removed inline for non-static functions.
Use ascii_strlower() for UTF-8 strings since strlower() could destroy the
	UTF-8 encoding and/or cause improper conversion.
filter_rule_to_gchar():
	Removed unnecessary g_strdup().
	Removed f_tmp and replaced it with tmp having function local scope.
filter_replace_rule_in_session():
	Removed unnecessary g_strdup() and replaced the other with g_strlcpy().

------------------------------------------------------------------------
r7846 | cbiere | 2005-02-20 18:39:35 -0500 (Sun, 20 Feb 2005) | 3 lines

guc_query_bitzi_by_urn():
	Use gchar * not guchar *.

------------------------------------------------------------------------
r7845 | cbiere | 2005-02-20 18:38:50 -0500 (Sun, 20 Feb 2005) | 5 lines

ip_to_string():
	Use the same conversion routine as ip_to_gchar() et al.
ascii_strlower():
	Modified comment that partial overlapping is not allowed.

------------------------------------------------------------------------
r7844 | cbiere | 2005-02-20 18:36:48 -0500 (Sun, 20 Feb 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7843 | cbiere | 2005-02-20 18:34:31 -0500 (Sun, 20 Feb 2005) | 4 lines

gtk_column_chooser_get_type():
	cct_type must be of type GtkType not guint! This was probably the
	cause of crashes on 64-bit archs.

------------------------------------------------------------------------
r7842 | cbiere | 2005-02-20 18:32:53 -0500 (Sun, 20 Feb 2005) | 4 lines

fi_gui_init():
	Replaced gpointer cast by proper GDestroyNotify cast.
	Fixed flags parameter for gtk_tree_view_enable_model_drag_source().

------------------------------------------------------------------------
r7841 | cbiere | 2005-02-20 18:30:36 -0500 (Sun, 20 Feb 2005) | 2 lines

Minor style fix: removed some whitespace.

------------------------------------------------------------------------
r7840 | cbiere | 2005-02-19 04:53:25 -0500 (Sat, 19 Feb 2005) | 2 lines

Changed retlen to gint to match the prototype of utf8_decode_char().

------------------------------------------------------------------------
r7839 | cbiere | 2005-02-19 04:52:07 -0500 (Sat, 19 Feb 2005) | 5 lines

Use ?: instead of "if" to set "target".
load_helper():
	Use a local buffer instead of a malloc()ed one if the buffer size
	is sufficient.

------------------------------------------------------------------------
r7838 | cbiere | 2005-02-19 04:49:17 -0500 (Sat, 19 Feb 2005) | 2 lines

Changed the type of "storage" from guint8 * to gchar *.

------------------------------------------------------------------------
r7837 | cbiere | 2005-02-19 04:45:33 -0500 (Sat, 19 Feb 2005) | 2 lines

Replaced inline function vendor_code_cmp() with macro VENDOR_CODE_CMP().

------------------------------------------------------------------------
r7836 | cbiere | 2005-02-19 04:42:15 -0500 (Sat, 19 Feb 2005) | 4 lines

shell_read_data():
	Changed type of "parsed" from gint to guint in order to match the
	prototype of getline_read().

------------------------------------------------------------------------
r7835 | cbiere | 2005-02-19 04:39:24 -0500 (Sat, 19 Feb 2005) | 4 lines

get_average_servent_uptime():
	Changed type of val to guint32 to match the prototype of
	gnet_prop_get_guint32_val().

------------------------------------------------------------------------
r7834 | cbiere | 2005-02-19 04:38:22 -0500 (Sat, 19 Feb 2005) | 3 lines

qrt_empty_table():
	Use gchar * instead of guchar *.

------------------------------------------------------------------------
r7833 | cbiere | 2005-02-19 04:37:33 -0500 (Sat, 19 Feb 2005) | 2 lines

Use gchar instead of guint8 or guchar for "typeless" memory.

------------------------------------------------------------------------
r7832 | cbiere | 2005-02-19 04:36:38 -0500 (Sat, 19 Feb 2005) | 3 lines

build_ping_msg():
	Use gchar instead guint8 or guchar for "typeless" memory.

------------------------------------------------------------------------
r7831 | cbiere | 2005-02-19 04:34:53 -0500 (Sat, 19 Feb 2005) | 3 lines

parq_still_sharing():
	Changed code, so that the last return isn't unreached code.

------------------------------------------------------------------------
r7830 | cbiere | 2005-02-19 04:33:18 -0500 (Sat, 19 Feb 2005) | 6 lines

Dynamic Querying:
	The header X-Max-TTL refers to "max_ttl" not "my_ttl".
	n->max_ttl should be set to the parsed value - not "my_ttl".
send_proxy_request():
	Added warning regarding the "hidden" definition of "guid".

------------------------------------------------------------------------
r7829 | cbiere | 2005-02-19 04:27:38 -0500 (Sat, 19 Feb 2005) | 2 lines

Declare hash_func properly instead of using gpointer.

------------------------------------------------------------------------
r7828 | cbiere | 2005-02-19 04:26:27 -0500 (Sat, 19 Feb 2005) | 7 lines

gmsg_install_presend():
	Replaced gpointer with pmsg_check_t since function pointers
	shouldn't be mixed with other pointers.
gmsg_is_oob_query():
gmsg_infostr_full():
	Don't use pointer arithmetic with void pointers.

------------------------------------------------------------------------
r7827 | cbiere | 2005-02-19 04:23:36 -0500 (Sat, 19 Feb 2005) | 4 lines

ggept_lf_encode():
ggept_du_encode():
	Changed type of 2nd parameter from guint8 * to gchar *.

------------------------------------------------------------------------
r7826 | cbiere | 2005-02-19 04:21:39 -0500 (Sat, 19 Feb 2005) | 3 lines

Added ggep_vlint_encode() which encodes the value for ggept_du_encode()
	and ggept_lf_encode().

------------------------------------------------------------------------
r7825 | cbiere | 2005-02-19 04:20:27 -0500 (Sat, 19 Feb 2005) | 6 lines

Changed FILE_INFO_* from enum to macro definitions as it's better to
	handle these values as unsigned whereas enums are (signed) ints.
BAILOUT():
	Added g_assert_not_reached() which should add an appropriate hint
	for the compiler that we know the code below the goto isn't reached.

------------------------------------------------------------------------
r7824 | cbiere | 2005-02-19 04:17:13 -0500 (Sat, 19 Feb 2005) | 7 lines

xml_get_string():
	Added as wrapper for xmlGetProp to get rid of xmlChar *.
Don't use guchar instead of gchar where not it's not useful.
process_rdf_description():
	Changed "xml_string" to "s" because it's local and some lines
	got too long.

------------------------------------------------------------------------
r7823 | cbiere | 2005-02-19 04:03:57 -0500 (Sat, 19 Feb 2005) | 8 lines

search_gui_set_current_search():
	Freeze hidden treeviews for slightly better performance.
unref_record():
	Added assertion to check rc's magic.
	rc must not be accessed after g_hash_table_remove() because
	its memory might now be released; removed the assertion which
	did this.

------------------------------------------------------------------------
r7822 | cbiere | 2005-02-19 03:53:51 -0500 (Sat, 19 Feb 2005) | 3 lines

Added assertions, assertions, assertions.
Added magic to record_t to catch already released records.

------------------------------------------------------------------------
r7821 | cbiere | 2005-02-18 09:37:16 -0500 (Fri, 18 Feb 2005) | 7 lines

hex2dec():
	Don't use "inline" alone, only "static inline".
	Provide inline and non-inline version, FIIW.
	Use hex2dec_invalid() as wrapper as g_assert_not_reached()
		might be defined in a way that makes it possible to use
		here otherwise.

------------------------------------------------------------------------
r7820 | cbiere | 2005-02-18 09:20:48 -0500 (Fri, 18 Feb 2005) | 3 lines

tx_flush():
	Removed leading "return" since tx_flush is declared void.

------------------------------------------------------------------------
r7819 | cbiere | 2005-02-18 09:17:51 -0500 (Fri, 18 Feb 2005) | 4 lines

gwc_retrieve():
	Removed const-qualifier from fpvec since settings_config_dir()
	is used to initialized the first member.

------------------------------------------------------------------------
r7818 | cbiere | 2005-02-14 10:41:47 -0500 (Mon, 14 Feb 2005) | 2 lines

Applied patch #1122222 by Daichi Kawahata updating the japanese translation.

------------------------------------------------------------------------
r7817 | cbiere | 2005-02-13 18:48:16 -0500 (Sun, 13 Feb 2005) | 4 lines

cq_cancel():
	Clear the memory used by "ev" to prevent that it may silently be
	re-used after being freed.

------------------------------------------------------------------------
r7816 | cbiere | 2005-02-10 11:57:45 -0500 (Thu, 10 Feb 2005) | 2 lines

Removed unnecessary sub-ranges which caused warnings at startup.

------------------------------------------------------------------------
r7815 | cbiere | 2005-02-09 14:10:35 -0500 (Wed, 09 Feb 2005) | 3 lines

tree_view_motion_timeout():
	Check whether the widget is realized.

------------------------------------------------------------------------
r7814 | cbiere | 2005-02-08 05:15:51 -0500 (Tue, 08 Feb 2005) | 2 lines

Added files with translatable strings.

------------------------------------------------------------------------
r7813 | cbiere | 2005-02-08 05:14:41 -0500 (Tue, 08 Feb 2005) | 3 lines

has_good_sha1():
	Return FALSE if the downloaded file couldn't be verified.

------------------------------------------------------------------------
r7812 | cbiere | 2005-02-08 04:59:29 -0500 (Tue, 08 Feb 2005) | 2 lines

Gtk-Gnutella does NOT require Glade or libglade to be installed!!1

------------------------------------------------------------------------
r7811 | cbiere | 2005-02-07 07:32:18 -0500 (Mon, 07 Feb 2005) | 2 lines

gwebcache2.limewire.com is no more.

------------------------------------------------------------------------
r7810 | rmanfredi | 2005-02-07 06:33:57 -0500 (Mon, 07 Feb 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7809 | rmanfredi | 2005-02-07 06:08:50 -0500 (Mon, 07 Feb 2005) | 2 lines

Updated Geo IP database and bogons list.

------------------------------------------------------------------------
r7808 | cbiere | 2005-02-06 09:03:19 -0500 (Sun, 06 Feb 2005) | 2 lines

Removed sig_ignore since use sigaction() instead of signal() now.

------------------------------------------------------------------------
r7807 | cbiere | 2005-02-06 09:02:17 -0500 (Sun, 06 Feb 2005) | 4 lines

Removed check regarding the signal() implementation.
Changed order of arguments for the glib link check for the IRIX linker
	[by Daichi Kawahata].

------------------------------------------------------------------------
r7806 | cbiere | 2005-02-06 08:48:34 -0500 (Sun, 06 Feb 2005) | 2 lines

Suppress warnings when not in debug mode.

------------------------------------------------------------------------
r7805 | cbiere | 2005-02-06 08:39:36 -0500 (Sun, 06 Feb 2005) | 3 lines

Applied patch my Daichi Kawahata to make more strings translatable.
Tagged further strings as translatable.

------------------------------------------------------------------------
r7804 | cbiere | 2005-02-06 05:10:04 -0500 (Sun, 06 Feb 2005) | 2 lines

Updated.

------------------------------------------------------------------------
r7803 | cbiere | 2005-02-02 18:43:35 -0500 (Wed, 02 Feb 2005) | 2 lines

Updated instructions to regenerate the source code with Glade.

------------------------------------------------------------------------
r7802 | cbiere | 2005-02-02 00:56:40 -0500 (Wed, 02 Feb 2005) | 2 lines

Splitted 69.9/16 to 69.9.187/24, 69.9.188/24, 69.9.189/24 to reduce causilities.

------------------------------------------------------------------------
r7801 | cbiere | 2005-02-02 00:49:56 -0500 (Wed, 02 Feb 2005) | 2 lines

Increased 69.9.189.0/24 to 69.9.0.0/16.

------------------------------------------------------------------------
r7800 | cbiere | 2005-02-01 22:15:50 -0500 (Tue, 01 Feb 2005) | 3 lines

Added 69.9.189.0/24 a subrange of voxel.net due to massive spamming and
	highly suspicious content upload.

------------------------------------------------------------------------
r7799 | cbiere | 2005-01-31 03:40:55 -0500 (Mon, 31 Jan 2005) | 4 lines

Raise the dialogs so that they reappear on top if the dialog was requested
	while the window was still open but possibly hidden behind other
	windows.

------------------------------------------------------------------------
r7798 | cbiere | 2005-01-31 03:39:34 -0500 (Mon, 31 Jan 2005) | 4 lines

gui_fix_coords():
	Make sure the window coordinates are on the screen and that the
	dimensions are not much larger than the screen's resolution.

------------------------------------------------------------------------
r7797 | cbiere | 2005-01-31 03:31:44 -0500 (Mon, 31 Jan 2005) | 2 lines

Readded code that was eaten by the previous commit.

------------------------------------------------------------------------
r7796 | cbiere | 2005-01-31 02:19:07 -0500 (Mon, 31 Jan 2005) | 2 lines

Fixed a compiler warning regarding "unused result".

------------------------------------------------------------------------
r7795 | cbiere | 2005-01-31 02:14:43 -0500 (Mon, 31 Jan 2005) | 2 lines

Bail out if compiling with the chosen glib doesn't work.

------------------------------------------------------------------------
r7794 | cbiere | 2005-01-30 16:17:45 -0500 (Sun, 30 Jan 2005) | 2 lines

Swapped code with variable declaration.

------------------------------------------------------------------------
r7793 | cbiere | 2005-01-28 21:39:27 -0500 (Fri, 28 Jan 2005) | 3 lines

settings_ask_for_property():
	Use exit() not gtk_gnutella_exit(); the GUI is not up yet.

------------------------------------------------------------------------
r7792 | cbiere | 2005-01-28 18:31:10 -0500 (Fri, 28 Jan 2005) | 2 lines

Fixed doxygen comments. [by Daichi Kawahata]

------------------------------------------------------------------------
r7791 | cbiere | 2005-01-28 18:29:49 -0500 (Fri, 28 Jan 2005) | 2 lines

Added typedef for signal handler prototypes so that doxygen can parse them.

------------------------------------------------------------------------
r7790 | cbiere | 2005-01-28 16:48:35 -0500 (Fri, 28 Jan 2005) | 5 lines

update_byte_size_entry():
	Use gtk_entry_printf() and short_size().
clock_skew_changed():
	Use short_time().

------------------------------------------------------------------------
r7789 | cbiere | 2005-01-28 16:23:51 -0500 (Fri, 28 Jan 2005) | 3 lines

Removed unused variable.
Shut up compiler warning about unused variable.

------------------------------------------------------------------------
r7788 | cbiere | 2005-01-28 16:22:34 -0500 (Fri, 28 Jan 2005) | 2 lines

Replaced C++ style comment.

------------------------------------------------------------------------
r7787 | cbiere | 2005-01-28 03:43:22 -0500 (Fri, 28 Jan 2005) | 4 lines

socket_udp_listen():
	Ignore input exceptions on the UDP socket. We don't do anything useful
	in such an event anyway.

------------------------------------------------------------------------
r7786 | cbiere | 2005-01-27 05:59:48 -0500 (Thu, 27 Jan 2005) | 4 lines

socket_udp_accept():
	In case of an input exception, use getsockopt() with SO_ERROR
	and show the error message in the warning.

------------------------------------------------------------------------
r7785 | rmanfredi | 2005-01-24 14:40:45 -0500 (Mon, 24 Jan 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7784 | rmanfredi | 2005-01-24 14:39:59 -0500 (Mon, 24 Jan 2005) | 2 lines

Removed chmod calls on copied callback files.

------------------------------------------------------------------------
r7783 | cbiere | 2005-01-24 14:17:34 -0500 (Mon, 24 Jan 2005) | 2 lines

Removed space-only label before " with sources" label.

------------------------------------------------------------------------
r7782 | cbiere | 2005-01-24 14:06:31 -0500 (Mon, 24 Jan 2005) | 2 lines

Added two files with translatable strings. [by Daichi Kawahata]

------------------------------------------------------------------------
r7781 | cbiere | 2005-01-24 14:00:55 -0500 (Mon, 24 Jan 2005) | 4 lines

monitor_gui_init():
	Tagged "Query" as translatable. [by Daichi Kawahata]
Style fixes.

------------------------------------------------------------------------
r7780 | cbiere | 2005-01-24 13:55:24 -0500 (Mon, 24 Jan 2005) | 2 lines

Changed type of stat_count from guint32 to guint.

------------------------------------------------------------------------
r7779 | cbiere | 2005-01-24 13:54:01 -0500 (Mon, 24 Jan 2005) | 5 lines

search_stats_gui_update():
	Use ngettext(). [by Daichi Kawahata]
	Use gtk_label_printf().
	Use %u as in the Gtk+ 1.2 version.

------------------------------------------------------------------------
r7778 | cbiere | 2005-01-24 13:44:12 -0500 (Mon, 24 Jan 2005) | 3 lines

gtk_column_chooser_new():
	Tagged the "Done" translatable. [by Daichi Kawahata]

------------------------------------------------------------------------
r7777 | cbiere | 2005-01-24 11:52:08 -0500 (Mon, 24 Jan 2005) | 3 lines

drag_begin():
	Fixed compiler warning regarding unused parameter ``drag_ctx''.

------------------------------------------------------------------------
r7776 | cbiere | 2005-01-24 11:49:55 -0500 (Mon, 24 Jan 2005) | 5 lines

main_gui_shutdown_tick():
	Use ngettext(). [by Daichi Kawahata]
	Use *_label_printf() instead of doing the same manually.
Style fixes.

------------------------------------------------------------------------
r7775 | rmanfredi | 2005-01-24 01:46:20 -0500 (Mon, 24 Jan 2005) | 2 lines

Bumped date.

------------------------------------------------------------------------
r7774 | rmanfredi | 2005-01-24 01:45:06 -0500 (Mon, 24 Jan 2005) | 3 lines

When switching UP -> leaf, it may happen that we try to broadcast a search
to a leaf node without any search queue.  Test that explicitly.

------------------------------------------------------------------------
r7773 | cbiere | 2005-01-23 20:16:04 -0500 (Sun, 23 Jan 2005) | 5 lines

fi_gui_init():
	Removed unnecessary code.
drag_begin():
	Added a hack so that finished files have the (hopefully) correct path.

------------------------------------------------------------------------
r7772 | cbiere | 2005-01-23 18:09:35 -0500 (Sun, 23 Jan 2005) | 4 lines

Reduced code duplication.
Discard duplicate items for popup-initiated actions.
Style fixes.

------------------------------------------------------------------------
r7771 | cbiere | 2005-01-23 18:07:48 -0500 (Sun, 23 Jan 2005) | 3 lines

gui_record_name_eq():
	This function must return 0 for equal parameters, not 1.

------------------------------------------------------------------------
r7770 | cbiere | 2005-01-23 16:54:10 -0500 (Sun, 23 Jan 2005) | 3 lines

uploads_gui_status_str():
	Use short_time() instead of always showing the value in seconds.

------------------------------------------------------------------------
r7769 | rmanfredi | 2005-01-23 12:28:04 -0500 (Sun, 23 Jan 2005) | 2 lines

Adjusted status string for queued entries (missed a whitespace).

------------------------------------------------------------------------
r7768 | rmanfredi | 2005-01-23 08:12:43 -0500 (Sun, 23 Jan 2005) | 3 lines

For consistency with downloads, make sure upload rate is within parenthesis.
This also makes up for better readability of the status line.

------------------------------------------------------------------------
r7767 | cbiere | 2005-01-23 07:06:29 -0500 (Sun, 23 Jan 2005) | 2 lines

Don't use GTK_STOCK_* for compatibility with Gtk+ before 2.6.x.

------------------------------------------------------------------------
r7766 | cbiere | 2005-01-23 03:56:47 -0500 (Sun, 23 Jan 2005) | 4 lines

upload_should_remove():
	This should fix bug #1107296. Failed uploads were not removed due
	to using the wrong properties.

------------------------------------------------------------------------
r7765 | cbiere | 2005-01-23 03:41:03 -0500 (Sun, 23 Jan 2005) | 2 lines

Added drag support to the Downloads->Files pane.

------------------------------------------------------------------------
r7764 | cbiere | 2005-01-23 03:38:58 -0500 (Sun, 23 Jan 2005) | 2 lines

Added ``path'' to struct gnet_fi_info.

------------------------------------------------------------------------
r7763 | cbiere | 2005-01-22 21:09:12 -0500 (Sat, 22 Jan 2005) | 2 lines

Minor fixes.

------------------------------------------------------------------------
r7762 | cbiere | 2005-01-22 21:07:26 -0500 (Sat, 22 Jan 2005) | 2 lines

Minor style changes.

------------------------------------------------------------------------
r7761 | cbiere | 2005-01-22 21:04:46 -0500 (Sat, 22 Jan 2005) | 4 lines

Added xml_indent().
search_update_details():
	Add at least some indentation to the raw XML.

------------------------------------------------------------------------
r7760 | cbiere | 2005-01-22 21:03:27 -0500 (Sat, 22 Jan 2005) | 5 lines

Added shake_vpane_sidebar():
	The Gtk+ 2.x GUI currently requires that vpane_sidebar is moved
	before the lower frame with stats is properly resized. There might
	be a better way (a switch in Glade) but at least this works.

------------------------------------------------------------------------
r7759 | cbiere | 2005-01-22 18:41:00 -0500 (Sat, 22 Jan 2005) | 3 lines

gtk_combo_init_choices():
	Use gettext() for the titles.

------------------------------------------------------------------------
r7758 | cbiere | 2005-01-22 18:38:48 -0500 (Sat, 22 Jan 2005) | 2 lines

Updated German translation.

------------------------------------------------------------------------
r7757 | cbiere | 2005-01-22 15:13:53 -0500 (Sat, 22 Jan 2005) | 3 lines

Replaced "None" with "No proxy" to prevent potential semantic clashes in the
	future.

------------------------------------------------------------------------
r7756 | cbiere | 2005-01-22 15:02:23 -0500 (Sat, 22 Jan 2005) | 2 lines

Removed "translatable" tag from some spaces-only strings.

------------------------------------------------------------------------
r7755 | cbiere | 2005-01-22 14:53:47 -0500 (Sat, 22 Jan 2005) | 4 lines

main():
	Modified the warning regarding inofficial builds so that it's better
	translatable.

------------------------------------------------------------------------
r7754 | cbiere | 2005-01-22 14:34:54 -0500 (Sat, 22 Jan 2005) | 3 lines

Corrected word (added hyphen):
	case sensitive -> case-sensitive

------------------------------------------------------------------------
r7753 | cbiere | 2005-01-22 12:24:28 -0500 (Sat, 22 Jan 2005) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7752 | rmanfredi | 2005-01-22 07:09:05 -0500 (Sat, 22 Jan 2005) | 2 lines

Fixed missing whitespace in upload status string.

------------------------------------------------------------------------
r7751 | cbiere | 2005-01-21 23:42:24 -0500 (Fri, 21 Jan 2005) | 4 lines

search_gui_set_details():
	Don't convert strings to UTF-8 since Gtk+ 1.2 renders strings
	according to the current locale.

------------------------------------------------------------------------
r7750 | cbiere | 2005-01-21 22:57:41 -0500 (Fri, 21 Jan 2005) | 2 lines

Updated the configuration dialog so that units are not shown twice.

------------------------------------------------------------------------
r7749 | cbiere | 2005-01-21 22:55:12 -0500 (Fri, 21 Jan 2005) | 3 lines

Convert all possibly non-UTF-8 strings to UTF-8 using them as property of
	an XML node.

------------------------------------------------------------------------
r7748 | cbiere | 2005-01-21 22:53:14 -0500 (Fri, 21 Jan 2005) | 3 lines

Added locale_to_utf8_full() as alternate for locale_to_utf8() which does not
	truncate the result to a maximum length.

------------------------------------------------------------------------
r7747 | cbiere | 2005-01-21 22:50:35 -0500 (Fri, 21 Jan 2005) | 3 lines

create_download():
	Replace an empty filename as it would cause a corrupt download entry.

------------------------------------------------------------------------
r7746 | cbiere | 2005-01-21 22:25:19 -0500 (Fri, 21 Jan 2005) | 3 lines

gm_setproctitle():
	Commented out informational message. Nobody cares.

------------------------------------------------------------------------
r7745 | cbiere | 2005-01-21 18:19:36 -0500 (Fri, 21 Jan 2005) | 3 lines

Present the "Unmapped stuff" properly.
Replaced diverse place holders by "[place holder]".

------------------------------------------------------------------------
r7744 | cbiere | 2005-01-21 18:10:21 -0500 (Fri, 21 Jan 2005) | 4 lines

Use short_time() resp. short_kb_size() instead of the raw values for some
	properties.
Use an ISO 8601 format for all dates.

------------------------------------------------------------------------
r7743 | cbiere | 2005-01-21 18:06:11 -0500 (Fri, 21 Jan 2005) | 3 lines

Use a GtkListStore instead of a GtkTreeStore for "tree_view_search" to
	get rid of the leading indentation space in the most left column.

------------------------------------------------------------------------
r7742 | cbiere | 2005-01-21 17:59:36 -0500 (Fri, 21 Jan 2005) | 3 lines

Tagged multichoice items as translatable with N_().
Minor modifications to some property descriptions.

------------------------------------------------------------------------
r7741 | cbiere | 2005-01-21 17:52:51 -0500 (Fri, 21 Jan 2005) | 4 lines

on_button_search_clicked():
	Addresses RFE #1105105: Explicitely return the focus to
	``entry_search'' after adding a search.

------------------------------------------------------------------------
r7740 | cbiere | 2005-01-21 03:05:00 -0500 (Fri, 21 Jan 2005) | 3 lines

short_size():
	Use singular for single byte. [by Daichi Kawahata]

------------------------------------------------------------------------
r7739 | cbiere | 2005-01-21 02:58:34 -0500 (Fri, 21 Jan 2005) | 3 lines

tree_view_motion_set_callback():
	Pass only one event per 400 msec.

------------------------------------------------------------------------
r7738 | cbiere | 2005-01-21 02:53:41 -0500 (Fri, 21 Jan 2005) | 3 lines

quit():
	Use gui_prop_get_boolean_val().

------------------------------------------------------------------------
r7737 | cbiere | 2005-01-20 17:12:12 -0500 (Thu, 20 Jan 2005) | 2 lines

Removed unnecessary set_tooltips_keyboard_mode() and widget_force_tooltip().

------------------------------------------------------------------------
r7736 | cbiere | 2005-01-20 17:11:15 -0500 (Thu, 20 Jan 2005) | 2 lines

Show the peermode and incoming/outgoing in the tooltip.

------------------------------------------------------------------------
r7735 | cbiere | 2005-01-20 16:31:01 -0500 (Thu, 20 Jan 2005) | 4 lines

on_tree_view_motion_notify():
	Call the handler with NULL as path if the cursor isn't over a row.
Removed unnecessary set_tooltips_keyboard_mode() and widget_force_tooltip().

------------------------------------------------------------------------
r7734 | cbiere | 2005-01-20 16:28:54 -0500 (Thu, 20 Jan 2005) | 5 lines

Removed unnecessary "keyboard mode hack".
Reset the tooltip if the cursor leaves the widget.
Removed "(Press Control-F1 to toggle view)" since the tooltip shouldn't get in
	the way anymore.

------------------------------------------------------------------------
r7733 | cbiere | 2005-01-20 16:24:51 -0500 (Thu, 20 Jan 2005) | 2 lines

Removed unnecessary gtk_paned_get_position().

------------------------------------------------------------------------
r7732 | cbiere | 2005-01-19 15:56:06 -0500 (Wed, 19 Jan 2005) | 2 lines

Added Dave Rutherford to list of contributors.

------------------------------------------------------------------------
r7731 | cbiere | 2005-01-19 15:54:25 -0500 (Wed, 19 Jan 2005) | 5 lines

vp_draw_arrow():
	Use a triangle polygon instead of multiple lines.
	Draw a black border around the triangles for more contrast as
	in patch #1104607 by Dave Rutherford.

------------------------------------------------------------------------
r7730 | cbiere | 2005-01-17 13:54:58 -0500 (Mon, 17 Jan 2005) | 6 lines

get_home():
	Changed the default fallback from "/tmp" to "/" since a (probably)
	world-writable directory is not acceptable. I assume and accept that
	gtk-gnutella will fail to write to / and terminate.
	Emit a warning if the home directory couldn't be determined.

------------------------------------------------------------------------
r7729 | cbiere | 2005-01-17 13:49:43 -0500 (Mon, 17 Jan 2005) | 3 lines

Removed setting of "sin6_len" again. Some implementations don't have this
	struct member and it's not necessary to initialize it.

------------------------------------------------------------------------
r7728 | cbiere | 2005-01-17 13:48:12 -0500 (Mon, 17 Jan 2005) | 2 lines

Changed #if USE_IPV6_HACK to #ifdef USE_IPV6_HACK.

------------------------------------------------------------------------
r7727 | cbiere | 2005-01-17 13:47:11 -0500 (Mon, 17 Jan 2005) | 7 lines

Addresses bug report #1103603:
	Use eval_subst() to determine the home directory so that $HOME
	can override the account's configured home directory.
settings_ask_for_property():
	Changed the text so that it's not suggested to apply the possible
	hack.

------------------------------------------------------------------------
r7726 | cbiere | 2005-01-15 21:07:00 -0500 (Sat, 15 Jan 2005) | 2 lines

libxml2 is not optional.

------------------------------------------------------------------------
r7725 | cbiere | 2005-01-15 21:06:12 -0500 (Sat, 15 Jan 2005) | 3 lines

Added double-quotes around preprocessor #error messages so that // isn't
	confused with a C++ style comment.

------------------------------------------------------------------------
r7724 | cbiere | 2005-01-15 15:30:13 -0500 (Sat, 15 Jan 2005) | 2 lines

Replaced compact_{size,rate}() with short_{size,rate}() or vice-versa.

------------------------------------------------------------------------
r7723 | cbiere | 2005-01-15 14:37:31 -0500 (Sat, 15 Jan 2005) | 3 lines

Corrected the hostname of the projects server.
Use a single command line to update the website instead of three.

------------------------------------------------------------------------
r7721 | rmanfredi | 2005-01-15 10:43:21 -0500 (Sat, 15 Jan 2005) | 2 lines

Regenerated all Makefile.SH files that have subdirs with new jmake template.

------------------------------------------------------------------------
r7720 | cbiere | 2005-01-14 12:34:56 -0500 (Fri, 14 Jan 2005) | 3 lines

gip_country():
	Fixed braino in previous commit.

------------------------------------------------------------------------
r7719 | cbiere | 2005-01-14 01:14:06 -0500 (Fri, 14 Jan 2005) | 2 lines

Changed "with sources" to " with sources".

------------------------------------------------------------------------
r7718 | cbiere | 2005-01-14 01:11:08 -0500 (Fri, 14 Jan 2005) | 4 lines

Fixed the broken vpane on the left. Disabling shrink and resize for the
	scrolled window have fixed it.
Changed "with sources" to " with sources".

------------------------------------------------------------------------
r7717 | cbiere | 2005-01-13 23:29:28 -0500 (Thu, 13 Jan 2005) | 12 lines

Added xml_prop_printf() to reduce duplicate code and more comfort.
Removed static buffer x_tmp. It's not used any longer.
Fixed parse_number() and parse_target():
	The additional checks weren't effective since the ``error'' was
	compared against 0 instead of the int that it points to.
The target IDs are now created by translating the unique pointers to
	consecutive integer values by using a hashtable and an increasing
	ID counter. This way the created IDs are discrete (i.e., do not
	expose addresses of objects) and fit easily into 32-bit which
	guarantees that sharing search.xml between 32-bit and 64-bit
	architecures won't cause any conflicts.

------------------------------------------------------------------------
r7716 | cbiere | 2005-01-13 23:18:39 -0500 (Thu, 13 Jan 2005) | 4 lines

Let make properly fail if it failed in one sub-directory instead of
	continuing.
I know that this file is generated.

------------------------------------------------------------------------
r7715 | cbiere | 2005-01-13 13:00:01 -0500 (Thu, 13 Jan 2005) | 3 lines

Documented and commented the "official" Configure option.
Changed the "typical" configuration.

------------------------------------------------------------------------
r7714 | cbiere | 2005-01-13 12:42:55 -0500 (Thu, 13 Jan 2005) | 4 lines

If the database wasn't loaded because the files were missing, the iprange
	database pointer will still be NULL and we must expect this.
This fixes the bug reported by r00t on IRC.

------------------------------------------------------------------------
r7713 | cbiere | 2005-01-13 12:39:11 -0500 (Thu, 13 Jan 2005) | 2 lines

Added assertions so that we get more than just a SIGSEGV if db is NULL.

------------------------------------------------------------------------
r7712 | rmanfredi | 2005-01-12 01:54:40 -0500 (Wed, 12 Jan 2005) | 2 lines

Fixed comment style in settings_ip_changed().

------------------------------------------------------------------------
r7711 | cbiere | 2005-01-11 23:14:51 -0500 (Tue, 11 Jan 2005) | 7 lines

upload_request():
	Pick up X-Remote-IP/Remote-IP headers.
upload_write():
	If sendfile() was disabled meanwhile memory for u->buffer must be
	allocated.
	Added EPIPE and ECONNRESET as non-fatal error codes for sendfile().

------------------------------------------------------------------------
r7710 | cbiere | 2005-01-11 22:28:04 -0500 (Tue, 11 Jan 2005) | 5 lines

settings_ip_changed():
	Prevent that non-local peers can submit local addresses and vice-versa.
	Don't accept updates from or to invalid addresses.
	If local peers submit a local IP they must be in the same /16 network.

------------------------------------------------------------------------
r7709 | cbiere | 2005-01-11 22:25:10 -0500 (Tue, 11 Jan 2005) | 3 lines

node_check_remote_ip_header():
	Fixed typo: the same IP address was shown twice.

------------------------------------------------------------------------
r7708 | cbiere | 2005-01-11 21:14:51 -0500 (Tue, 11 Jan 2005) | 3 lines

Removed unused macro definition LINE_LEN.
Removed macro definition PONG_LEN, just comment it inline.

------------------------------------------------------------------------
r7707 | cbiere | 2005-01-11 19:57:19 -0500 (Tue, 11 Jan 2005) | 4 lines

parse_target():
	Made the prefix "0x" optional because the format %p doesn't necessarily
	use such a prefix. This is a preliminary fix for bug #1100464.

------------------------------------------------------------------------
r7706 | cbiere | 2005-01-11 19:12:02 -0500 (Tue, 11 Jan 2005) | 4 lines

Added IPv6 hack which might allow IPv6-only machines to use Gtk-Gnutella
	by using IPv4 addresses mapped to IPv6.
Abstract a little from ``struct sockaddr_in''.

------------------------------------------------------------------------
r7705 | cbiere | 2005-01-11 18:57:11 -0500 (Tue, 11 Jan 2005) | 3 lines

Pick-up X-Remote-IP and Remote-IP headers from download connections too. This
	should allow much faster detection of address changes.

------------------------------------------------------------------------
r7704 | cbiere | 2005-01-10 18:40:42 -0500 (Mon, 10 Jan 2005) | 2 lines

Replaced compact_{rate,size}() with short_{rate,size}() to prevent eye cancer.

------------------------------------------------------------------------
r7703 | cbiere | 2005-01-10 18:36:10 -0500 (Mon, 10 Jan 2005) | 2 lines

Added short_rate() and short_value().

------------------------------------------------------------------------
r7702 | cbiere | 2005-01-10 18:01:02 -0500 (Mon, 10 Jan 2005) | 4 lines

search_update_details():
	Fixed off-by-one with respect to removing the trailing newline
	from the ctime() string.

------------------------------------------------------------------------
r7701 | cbiere | 2005-01-10 16:46:22 -0500 (Mon, 10 Jan 2005) | 3 lines

Replaced some place holders by strings that are already translated to prevent
	extra work in case someone accidently translates them.

------------------------------------------------------------------------
r7700 | cbiere | 2005-01-10 16:04:22 -0500 (Mon, 10 Jan 2005) | 2 lines

Update the treeview tooltips with every motion event.

------------------------------------------------------------------------
r7699 | cbiere | 2005-01-10 12:22:45 -0500 (Mon, 10 Jan 2005) | 4 lines

Applied patch #1099330 by Daichi Kawahata:
	Update POTFILES.in.
	Update japanese translation.

------------------------------------------------------------------------
r7698 | rmanfredi | 2005-01-10 04:20:22 -0500 (Mon, 10 Jan 2005) | 4 lines

When looking for the time at which the current version will expire, also
consider the token expiration date to account for bug-fixing releases for
which the token is not updated.

------------------------------------------------------------------------
r7697 | cbiere | 2005-01-09 17:23:22 -0500 (Sun, 09 Jan 2005) | 2 lines

Removed noise from labels.

------------------------------------------------------------------------
r7696 | cbiere | 2005-01-09 16:41:49 -0500 (Sun, 09 Jan 2005) | 2 lines

Include gtk-missing.h for gtk_label_printf().

------------------------------------------------------------------------
r7695 | cbiere | 2005-01-09 16:40:50 -0500 (Sun, 09 Jan 2005) | 2 lines

Fixed glitch in ngettext conversion.

------------------------------------------------------------------------
r7694 | cbiere | 2005-01-09 15:44:36 -0500 (Sun, 09 Jan 2005) | 2 lines

Fixed an accelerator pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7693 | cbiere | 2005-01-09 15:40:52 -0500 (Sun, 09 Jan 2005) | 2 lines

Fixed two translatable strings pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7692 | cbiere | 2005-01-09 15:21:00 -0500 (Sun, 09 Jan 2005) | 4 lines

search_gui_update_items():
	Use ngettext.
	Use the proper form (singular/plural) for "dupe".

------------------------------------------------------------------------
r7691 | cbiere | 2005-01-09 15:09:16 -0500 (Sun, 09 Jan 2005) | 3 lines

Use ngettext for translatable strings involving conditional plural/singular
	forms.

------------------------------------------------------------------------
r7690 | cbiere | 2005-01-09 15:08:07 -0500 (Sun, 09 Jan 2005) | 2 lines

Provide g_strip_context() for GTK+ < 2.4.0.

------------------------------------------------------------------------
r7689 | cbiere | 2005-01-09 15:07:23 -0500 (Sun, 09 Jan 2005) | 3 lines

bitzi_fjtostring():
	Use Q_() to remove the context.

------------------------------------------------------------------------
r7688 | cbiere | 2005-01-09 15:04:36 -0500 (Sun, 09 Jan 2005) | 3 lines

Use ngettext() for translatable strings involving conditional plural/singular
	forms.

------------------------------------------------------------------------
r7687 | cbiere | 2005-01-09 15:00:34 -0500 (Sun, 09 Jan 2005) | 3 lines

Added NG_ as short-hand for ngettext().
Added Q_ as short-hand for g_strip_context(x, gettext(x)) as used in GTK+ 2.6.

------------------------------------------------------------------------
r7686 | cbiere | 2005-01-09 14:58:44 -0500 (Sun, 09 Jan 2005) | 2 lines

Added NG_ as keyword for ngettext.

------------------------------------------------------------------------
r7685 | cbiere | 2005-01-09 11:48:20 -0500 (Sun, 09 Jan 2005) | 2 lines

Raphael has been ASCII-fied due to problems with glade for GTK+ 1.2.

------------------------------------------------------------------------
r7684 | rmanfredi | 2005-01-09 03:43:43 -0500 (Sun, 09 Jan 2005) | 2 lines

Commented the non-trivial Morpheus user-agent processing hack.

------------------------------------------------------------------------
r7683 | rmanfredi | 2005-01-09 03:42:59 -0500 (Sun, 09 Jan 2005) | 2 lines

Fixed leading comment.

------------------------------------------------------------------------
r7682 | cbiere | 2005-01-08 13:52:28 -0500 (Sat, 08 Jan 2005) | 2 lines

Emit a warning if the build is unofficial and show PACKAGE_SOURCE_DIR.

------------------------------------------------------------------------
r7681 | cbiere | 2005-01-08 12:44:51 -0500 (Sat, 08 Jan 2005) | 4 lines

forget_url():
	Copy the whole array even if count is zero to overwrite the last
	removed URL entry.

------------------------------------------------------------------------
r7680 | cbiere | 2005-01-08 12:40:51 -0500 (Sat, 08 Jan 2005) | 3 lines

upload_request():
	Disable sendfile() if it failed unexpectedly.

------------------------------------------------------------------------
r7679 | cbiere | 2005-01-08 12:38:11 -0500 (Sat, 08 Jan 2005) | 2 lines

Don't add horizontal padding to progressbar columns.

------------------------------------------------------------------------
r7678 | cbiere | 2005-01-08 12:36:36 -0500 (Sat, 08 Jan 2005) | 3 lines

hostiles_load():
	Suppress non-critical warnings at zero debug level.

------------------------------------------------------------------------
r7677 | cbiere | 2005-01-08 12:35:15 -0500 (Sat, 08 Jan 2005) | 3 lines

download_request():
	Don't accept the range if it's not within the requested range.

------------------------------------------------------------------------
r7676 | rmanfredi | 2005-01-08 12:17:53 -0500 (Sat, 08 Jan 2005) | 3 lines

Must copy the whole url_tmp[] array back in forget_url(), not just the
very first entry.

------------------------------------------------------------------------
r7675 | cbiere | 2005-01-08 10:17:14 -0500 (Sat, 08 Jan 2005) | 4 lines

forget_url():
	Fixed bug which caused an assertion failure, if we ran out of
	GWebCache URLs.

------------------------------------------------------------------------
r7674 | cbiere | 2005-01-07 23:14:09 -0500 (Fri, 07 Jan 2005) | 2 lines

Bumped date due to important bugfix.

------------------------------------------------------------------------
r7673 | cbiere | 2005-01-07 23:01:39 -0500 (Fri, 07 Jan 2005) | 9 lines

Added country codes that are not in ISO 3166 but used by the Maxmind
	GeoIP database.
iso3166_decode_cc():
iso3166_encode_cc():
	Reject country codes that are not in table.
iso3166_country_cc():
iso3166_country_name():
	Prevent a NULL pointer dereference, just in case the code is bogus.

------------------------------------------------------------------------
r7672 | cbiere | 2005-01-07 21:05:13 -0500 (Fri, 07 Jan 2005) | 2 lines

Applied further doxygen patch by Daichi Kawahata.

------------------------------------------------------------------------
r7671 | cbiere | 2005-01-07 20:57:22 -0500 (Fri, 07 Jan 2005) | 2 lines

Removed the exec-bits from the mode for the spec file [by Daichi Kawahata].

------------------------------------------------------------------------
r7670 | cbiere | 2005-01-07 20:51:03 -0500 (Fri, 07 Jan 2005) | 2 lines

Fixed/Merged some translatable strings as pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7669 | cbiere | 2005-01-07 20:43:28 -0500 (Fri, 07 Jan 2005) | 3 lines

Don't reject the crawler even if it doesn't support dynamic querying and
	high outdegree.

------------------------------------------------------------------------
r7668 | cbiere | 2005-01-07 20:17:16 -0500 (Fri, 07 Jan 2005) | 2 lines

Added gtkg-apidoc.main contributed by Daichi Kawahata.

------------------------------------------------------------------------
r7667 | cbiere | 2005-01-07 20:04:36 -0500 (Fri, 07 Jan 2005) | 2 lines

Applied patch for the progressbar cell renderer by Russell Francis.

------------------------------------------------------------------------
r7666 | cbiere | 2005-01-07 19:55:33 -0500 (Fri, 07 Jan 2005) | 3 lines

Added viewport at Downloads->Sources to prevent that the upper part of
	the vpane becomes inaccessible.

------------------------------------------------------------------------
r7665 | cbiere | 2005-01-07 19:41:29 -0500 (Fri, 07 Jan 2005) | 3 lines

Use tree_view_restore_widths() and tree_view_restore_visibility() instead
	of doing this manually.

------------------------------------------------------------------------
r7664 | cbiere | 2005-01-07 19:35:03 -0500 (Fri, 07 Jan 2005) | 3 lines

compact_size():
	Append a B for Bytes to the value in any case.

------------------------------------------------------------------------
r7663 | cbiere | 2005-01-07 19:33:46 -0500 (Fri, 07 Jan 2005) | 2 lines

Abort the compilation if libxml2 is missing.

------------------------------------------------------------------------
r7662 | cbiere | 2005-01-07 19:27:52 -0500 (Fri, 07 Jan 2005) | 3 lines

tree_view_restore_widths():
	Use width as a signed integer to clamp it.

------------------------------------------------------------------------
r7661 | cbiere | 2005-01-03 06:05:50 -0500 (Mon, 03 Jan 2005) | 4 lines

nodes_gui_init():
	Use tree_view_restore_widths() and tree_view_restore_visibility()
	instead of doing this manually.

------------------------------------------------------------------------
r7660 | cbiere | 2005-01-03 06:02:07 -0500 (Mon, 03 Jan 2005) | 5 lines

TREE_ITER_NEW():
	Use g_malloc0() instead of g_malloc() in regression mode, just in
	case it might affect gtk_tree_store_iter_is_valid().
Removed a duplicate check.

------------------------------------------------------------------------
r7659 | cbiere | 2005-01-01 22:20:24 -0500 (Sat, 01 Jan 2005) | 5 lines

gui_update_download():
	Check whether the download is queued or not. Otherwise, the queued
	downloads can't be found.
Added some assertions.

------------------------------------------------------------------------
r7658 | cbiere | 2005-01-01 22:13:54 -0500 (Sat, 01 Jan 2005) | 2 lines

Merged and corrected some translatable strings pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7657 | cbiere | 2004-12-31 12:12:36 -0500 (Fri, 31 Dec 2004) | 3 lines

Replaced signal() with set_signal() which should ensure that the handler
	is not reset by using sigaction().

------------------------------------------------------------------------
r7656 | cbiere | 2004-12-31 11:10:20 -0500 (Fri, 31 Dec 2004) | 3 lines

Note to myself:
	grep for XXX before committing a file to CVS. Thank me.

------------------------------------------------------------------------
r7655 | cbiere | 2004-12-31 11:03:53 -0500 (Fri, 31 Dec 2004) | 5 lines

find_download():
	The GLib documentation doesn't claim that the value pointer isn't
	modified, if the key wasn't found. Thus, return explicitely NULL
	if the key wasn't found.

------------------------------------------------------------------------
r7654 | cbiere | 2004-12-31 02:53:44 -0500 (Fri, 31 Dec 2004) | 2 lines

Merged and corrected some translatable strings pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7653 | cbiere | 2004-12-31 01:58:14 -0500 (Fri, 31 Dec 2004) | 2 lines

Reduced strings to translate.

------------------------------------------------------------------------
r7652 | cbiere | 2004-12-31 01:00:44 -0500 (Fri, 31 Dec 2004) | 3 lines

Patch #1089142:
	Replaced japanese translation with newer version by Daichi Kawahata.

------------------------------------------------------------------------
r7651 | cbiere | 2004-12-31 00:57:50 -0500 (Fri, 31 Dec 2004) | 2 lines

Updated list of files. [by Daichi Kawahata]

------------------------------------------------------------------------
r7650 | cbiere | 2004-12-30 23:18:32 -0500 (Thu, 30 Dec 2004) | 7 lines

[GTK2] Re-enabled the vertical slider in the left sidebar at a more
	appriopriate position.
[GTK2] search_results_show_tabs_changed():
	Removed the unnecessary "notebook_sidebar", just hide/show
	the scrollwindow "sw_searches".
Disabled the orphaned toolbar for GTK1 as well.

------------------------------------------------------------------------
r7649 | cbiere | 2004-12-30 23:15:04 -0500 (Thu, 30 Dec 2004) | 5 lines

Changed the left sidebar so that the vertical slider can't get
	behind the stats box and the search entry cannot be hidden.
Disabled the orphaned toolbar.
Modified the filter dialog so that the window doesn't become ridiculous wide.

------------------------------------------------------------------------
r7648 | cbiere | 2004-12-30 23:09:26 -0500 (Thu, 30 Dec 2004) | 3 lines

Changed the left sidebar so that the vertical slider can't get behind
	the stats box.

------------------------------------------------------------------------
r7647 | cbiere | 2004-12-30 14:47:29 -0500 (Thu, 30 Dec 2004) | 5 lines

Replaced the FOUND_* macros by static functions.
Changed the found_data from a heap buffer to a fixed-size static buffer.
Use size_t instead of gint where appropriate.
Added assertions.

------------------------------------------------------------------------
r7646 | cbiere | 2004-12-30 14:40:39 -0500 (Thu, 30 Dec 2004) | 2 lines

Minor simplifications.

------------------------------------------------------------------------
r7645 | cbiere | 2004-12-30 14:39:06 -0500 (Thu, 30 Dec 2004) | 3 lines

tsync_send():
	Fail if n->port is zero.

------------------------------------------------------------------------
r7644 | cbiere | 2004-12-30 14:37:35 -0500 (Thu, 30 Dec 2004) | 4 lines

sock_tx_shutdown():
	Added assertion.
	I've seen shutdown() failing with EINVAL here.

------------------------------------------------------------------------
r7643 | cbiere | 2004-12-30 14:35:07 -0500 (Thu, 30 Dec 2004) | 4 lines

oob_record_hit():
	Use size_t for len instead of gint.
	Added assertion.

------------------------------------------------------------------------
r7642 | cbiere | 2004-12-30 14:34:16 -0500 (Thu, 30 Dec 2004) | 5 lines

node_tsync_udp():
	Fail if the node has port set to zero. This can happen if a remote
	peer sends a UDP handshake ack with port == 0. This will cause
	EADDRNOTAVAIL error when using sendto() and thus a crash.

------------------------------------------------------------------------
r7641 | cbiere | 2004-12-30 14:30:44 -0500 (Thu, 30 Dec 2004) | 4 lines

Use size_t instead of gint where appropriate.
Added assertions.
Compare pointer differences instead of the addresses.

------------------------------------------------------------------------
r7640 | graaff | 2004-12-30 11:18:47 -0500 (Thu, 30 Dec 2004) | 3 lines

Remove old todo comments, and simplify checking of algorithm now that
it is stable.

------------------------------------------------------------------------
r7639 | rmanfredi | 2004-12-30 07:17:37 -0500 (Thu, 30 Dec 2004) | 2 lines

Includes Sendfile64 in the list of dependencies.

------------------------------------------------------------------------
r7638 | rmanfredi | 2004-12-28 10:30:10 -0500 (Tue, 28 Dec 2004) | 2 lines

Regenerated (fixes #1074327).

------------------------------------------------------------------------
r7637 | rmanfredi | 2004-12-28 10:29:06 -0500 (Tue, 28 Dec 2004) | 2 lines

Added U/new/Sendfile64.U.

------------------------------------------------------------------------
r7636 | cbiere | 2004-12-27 21:24:01 -0500 (Mon, 27 Dec 2004) | 5 lines

Just fail don't abort if the parent for a fileinfo handle isn't found
	in the hashtable. The actual bug could be anywhere and this is
	too difficult to reproduce.
Addresses bug #1091828.

------------------------------------------------------------------------
r7635 | cbiere | 2004-12-27 20:58:33 -0500 (Mon, 27 Dec 2004) | 3 lines

Added udp_active() because checking enabled_udp alone is too weak as it
	cannot guarantee that there's a usable UDP socket.

------------------------------------------------------------------------
r7634 | cbiere | 2004-12-27 20:54:05 -0500 (Mon, 27 Dec 2004) | 5 lines

Added udp_active() because checking enabled_udp alone is too weak as it
	cannot guarantee that there's a usable UDP socket.
Don't try to open on a UDP socket with port 0.
These changes should fix bug #1091827.

------------------------------------------------------------------------
r7633 | cbiere | 2004-12-27 19:01:22 -0500 (Mon, 27 Dec 2004) | 4 lines

Adapted the progress bar renderer:
	GTK+ 2.6.x uses gint for the "value" instead of gfloat like the
	"unofficial" version.

------------------------------------------------------------------------
r7632 | cbiere | 2004-12-27 18:58:47 -0500 (Mon, 27 Dec 2004) | 9 lines

Changed some members of found_data from gint to size_t.
FOUND_ENSURE():
	Compare first, then subtract.
	Removed unnecessary cast and "* sizeof(guchar)".
FOUND_GROW():
	Added assertions to catch integer overflows.
found_reset():
	Changed type of max_size from gint to size_t.

------------------------------------------------------------------------
r7631 | cbiere | 2004-12-27 18:54:40 -0500 (Mon, 27 Dec 2004) | 5 lines

bio_sendto():
	Added more assertions so that we get at least an assertion failure
	instead of a segmentation violation in the unfortunate case of
	a NULL pointer.

------------------------------------------------------------------------
r7630 | rmanfredi | 2004-12-23 14:37:31 -0500 (Thu, 23 Dec 2004) | 2 lines

Version of 2004-12-23.

------------------------------------------------------------------------
r7629 | rmanfredi | 2004-12-23 14:32:57 -0500 (Thu, 23 Dec 2004) | 5 lines

Use gm_slist_insert_after() to optimize new chunk insertion in list.
Added file_info_check_chunklist() assertions right after modifying the
chunk list.
Added contract in file_info_update() to require from < to.

------------------------------------------------------------------------
r7628 | rmanfredi | 2004-12-23 14:30:44 -0500 (Thu, 23 Dec 2004) | 4 lines

If server gives us an inconsistent Content-Length compared to the total
file size found in Content-Range, abort the download and mark that source
as being bad.

------------------------------------------------------------------------
r7627 | rmanfredi | 2004-12-23 14:29:09 -0500 (Thu, 23 Dec 2004) | 2 lines

Reject HTTP ranges for which start > end.

------------------------------------------------------------------------
r7626 | cbiere | 2004-12-22 17:00:31 -0500 (Wed, 22 Dec 2004) | 2 lines

Added parse_number so that we don't access memory that has been freed before.

------------------------------------------------------------------------
r7625 | rmanfredi | 2004-12-22 16:11:21 -0500 (Wed, 22 Dec 2004) | 2 lines

Also ignore EHOSTUNREACH errors.

------------------------------------------------------------------------
r7624 | cbiere | 2004-12-22 13:44:40 -0500 (Wed, 22 Dec 2004) | 3 lines

Changed so that gtk_text_view_set_accepts_tab() isn't used which requires
	GTK+ 2.4.x.

------------------------------------------------------------------------
r7623 | cbiere | 2004-12-21 10:07:27 -0500 (Tue, 21 Dec 2004) | 5 lines

Don't crash if search.xml is corrupt.
Use parse_uint64() instead of strtoul().
Save/Load size filters with 64-bit values.
Style fixes.

------------------------------------------------------------------------
r7622 | cbiere | 2004-12-21 02:59:34 -0500 (Tue, 21 Dec 2004) | 3 lines

Merged some translatable strings.
Added translatable strings.

------------------------------------------------------------------------
r7621 | cbiere | 2004-12-20 22:55:34 -0500 (Mon, 20 Dec 2004) | 3 lines

update_stat():
	Use compact_rate().

------------------------------------------------------------------------
r7620 | cbiere | 2004-12-20 22:43:50 -0500 (Mon, 20 Dec 2004) | 2 lines

Use SI prefixes according to IEC 60027-2 (2000-11) Ed. 2.0.

------------------------------------------------------------------------
r7619 | cbiere | 2004-12-20 22:39:08 -0500 (Mon, 20 Dec 2004) | 4 lines

Use 64-bit values in the size filter.
Allow the user to enter suffixes like KB, KiB, MB, MiB etc.
Tagged strings as translatable. (Might need comments/context.)

------------------------------------------------------------------------
r7618 | cbiere | 2004-12-20 21:54:10 -0500 (Mon, 20 Dec 2004) | 3 lines

Added compact_value(), compact_rate().
Use SI prefixes according to IEC 60027-2 (2000-11) Ed. 2.0.

------------------------------------------------------------------------
r7617 | cbiere | 2004-12-20 21:50:18 -0500 (Mon, 20 Dec 2004) | 3 lines

Don't divide the traffic rate by 1024 here. It's Bytes Per Second.
Use guint32 instead of gfloat for tx_bps and rx_bps.

------------------------------------------------------------------------
r7616 | cbiere | 2004-12-20 13:31:24 -0500 (Mon, 20 Dec 2004) | 3 lines

mq_puthere():
	Don't call node_bye() if it's the UDP node.

------------------------------------------------------------------------
r7615 | cbiere | 2004-12-19 06:44:34 -0500 (Sun, 19 Dec 2004) | 2 lines

Expand search bar.

------------------------------------------------------------------------
r7614 | cbiere | 2004-12-19 06:30:25 -0500 (Sun, 19 Dec 2004) | 2 lines

Merged and disambiguated strings as pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7613 | cbiere | 2004-12-19 06:23:53 -0500 (Sun, 19 Dec 2004) | 4 lines

Removed unused TREEMENU_* enums.
Define nb_main_page_dl_files and nb_main_page_dl_queue enums unconditionally
	for property vector initialization.

------------------------------------------------------------------------
r7612 | cbiere | 2004-12-19 04:55:14 -0500 (Sun, 19 Dec 2004) | 2 lines

Fixed typo: lwo -> low (by Daichi Kawahata).

------------------------------------------------------------------------
r7611 | cbiere | 2004-12-19 04:00:36 -0500 (Sun, 19 Dec 2004) | 2 lines

Removed "translatable" flag from place holders.

------------------------------------------------------------------------
r7610 | cbiere | 2004-12-18 20:09:23 -0500 (Sat, 18 Dec 2004) | 2 lines

Bumped date.

------------------------------------------------------------------------
r7609 | cbiere | 2004-12-18 19:28:18 -0500 (Sat, 18 Dec 2004) | 2 lines

Removed unnecessary string "No items found".

------------------------------------------------------------------------
r7608 | cbiere | 2004-12-18 19:23:40 -0500 (Sat, 18 Dec 2004) | 3 lines

Removed unnecessary string "No items found".
Re-added expanding label to the icon bar so that the icons are right-aligned.

------------------------------------------------------------------------
r7607 | cbiere | 2004-12-18 19:21:35 -0500 (Sat, 18 Dec 2004) | 3 lines

search_gui_update_items():
	Changed rule for "items": "0 item" -> "0 items".

------------------------------------------------------------------------
r7606 | cbiere | 2004-12-18 19:12:10 -0500 (Sat, 18 Dec 2004) | 3 lines

bitzi_fjtostring():
	Translate first, then strip the context.

------------------------------------------------------------------------
r7605 | cbiere | 2004-12-18 18:45:58 -0500 (Sat, 18 Dec 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7604 | cbiere | 2004-12-18 18:41:40 -0500 (Sat, 18 Dec 2004) | 3 lines

Prefixed the bitzi file judgement strings with "Bitzi|" in order to prevent
	translation clashes.

------------------------------------------------------------------------
r7603 | cbiere | 2004-12-18 18:27:15 -0500 (Sat, 18 Dec 2004) | 2 lines

Added comments regarding accelerator keys.

------------------------------------------------------------------------
r7602 | cbiere | 2004-12-18 17:53:14 -0500 (Sat, 18 Dec 2004) | 3 lines

Harmonized (almost) duplicate strings and disambiguated others as
	pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7601 | cbiere | 2004-12-18 17:35:42 -0500 (Sat, 18 Dec 2004) | 3 lines

Added comments about strings that should not be translated.
Added explanation of translation contexts.

------------------------------------------------------------------------
r7600 | cbiere | 2004-12-18 12:21:01 -0500 (Sat, 18 Dec 2004) | 2 lines

Minor polishing.

------------------------------------------------------------------------
r7599 | cbiere | 2004-12-18 02:21:15 -0500 (Sat, 18 Dec 2004) | 2 lines

The pages of notebook_downloads are now part of notebook_main.

------------------------------------------------------------------------
r7598 | cbiere | 2004-12-18 02:17:32 -0500 (Sat, 18 Dec 2004) | 2 lines

Harmonized (almost) duplicate strings pointed out by Daichi Kawahata.

------------------------------------------------------------------------
r7597 | cbiere | 2004-12-18 02:13:04 -0500 (Sat, 18 Dec 2004) | 4 lines

gwc_update_ip_url():
	Check the peermode first, so that we don't pick an URL (and thus
	block it for an hour) in leaf mode.

------------------------------------------------------------------------
r7593 | cbiere | 2004-12-17 23:24:10 -0500 (Fri, 17 Dec 2004) | 2 lines

Generalized the comment regarding the supported systems.

------------------------------------------------------------------------
r7592 | cbiere | 2004-12-17 20:31:22 -0500 (Fri, 17 Dec 2004) | 3 lines

[GTK2] Moved Downloads/Files and Downloads/Queue pane into the main tree
	and main notebook.

------------------------------------------------------------------------
r7591 | cbiere | 2004-12-17 20:28:54 -0500 (Fri, 17 Dec 2004) | 2 lines

Include "ui/gtk/notebooks.h" for nb_main_page_num.

------------------------------------------------------------------------
r7590 | cbiere | 2004-12-17 20:27:04 -0500 (Fri, 17 Dec 2004) | 2 lines

Temporarily fixed warnings in generated code.

------------------------------------------------------------------------
r7583 | cbiere | 2004-12-17 02:44:10 -0500 (Fri, 17 Dec 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7582 | cbiere | 2004-12-17 02:31:39 -0500 (Fri, 17 Dec 2004) | 3 lines

on_tree_view_search_results_select_row():
	If available, show the XML data.

------------------------------------------------------------------------
r7581 | cbiere | 2004-12-17 02:30:35 -0500 (Fri, 17 Dec 2004) | 2 lines

Synchronized a couple of strings with the GTK2 front-end.

------------------------------------------------------------------------
r7580 | cbiere | 2004-12-17 02:20:54 -0500 (Fri, 17 Dec 2004) | 4 lines

If a search result contains XML data, show it in the search results
	details pane. We don't parse it but the raw data is still better
	than nothing.

------------------------------------------------------------------------
r7579 | cbiere | 2004-12-17 02:18:19 -0500 (Fri, 17 Dec 2004) | 2 lines

Added a GtkTextView to the search results details to show (raw) XML data.

------------------------------------------------------------------------
r7578 | cbiere | 2004-12-17 02:15:50 -0500 (Fri, 17 Dec 2004) | 2 lines

Finally save the column widths of the searches list.

------------------------------------------------------------------------
r7577 | cbiere | 2004-12-17 01:17:01 -0500 (Fri, 17 Dec 2004) | 2 lines

List Daichi Kawahata as contributor and translator.

------------------------------------------------------------------------
r7576 | cbiere | 2004-12-17 01:16:02 -0500 (Fri, 17 Dec 2004) | 2 lines

Applied punctuation patch by Daichi Kawahata.

------------------------------------------------------------------------
r7575 | cbiere | 2004-12-17 01:01:03 -0500 (Fri, 17 Dec 2004) | 2 lines

Corrected size of source code.

------------------------------------------------------------------------
r7574 | cbiere | 2004-12-16 21:17:18 -0500 (Thu, 16 Dec 2004) | 4 lines

dump_hex():
	Don't insert a space after 8 characters in the ASCII part. This is
	annoying.

------------------------------------------------------------------------
r7573 | cbiere | 2004-12-16 21:03:28 -0500 (Thu, 16 Dec 2004) | 12 lines

Fixed some GWebCache issues:
 - Record the timestamp of the last access during a session. Otherwise,
   the same URL could be retried over and over again.
 - gwc_pick(): May return NULL now, if there's no URL available.
 - gwc_retrieve(): Add the default URLs only if nothing was retrieved from
	the files.
 - forget_url(): Keep failing URLs around during a session to prevent
	that a failing URL is re-added from by urlfile response.
 - gwc_get_hosts(): Fixed mis-gettext-ified string.
 - gwc_update_this(): Adapted so that gwc_pick() may return NULL.
 - gwc_update_ip_url(): Do not send *any* updates in leaf mode.

------------------------------------------------------------------------
r7572 | cbiere | 2004-12-16 18:44:17 -0500 (Thu, 16 Dec 2004) | 2 lines

Removed misplaced trailing slash from GWebCache URL. ($%$#%%!!!)

------------------------------------------------------------------------
r7571 | cbiere | 2004-12-16 17:35:36 -0500 (Thu, 16 Dec 2004) | 3 lines

Capitalized some CList headers so that they're equivalent to the headers
	in the GTK2 front-end.

------------------------------------------------------------------------
r7570 | cbiere | 2004-12-16 17:08:54 -0500 (Thu, 16 Dec 2004) | 2 lines

Use GTK_CHECK_VERSION() instead of GTK_MAJOR_VERSION and GTK_MINOR_VERSION.

------------------------------------------------------------------------
r7569 | cbiere | 2004-12-16 16:50:57 -0500 (Thu, 16 Dec 2004) | 3 lines

gtk_type_cell_renderer_progress is included in GTK+ 2.5.0. Disable the
	custom code then.

------------------------------------------------------------------------
r7568 | cbiere | 2004-12-16 15:46:11 -0500 (Thu, 16 Dec 2004) | 4 lines

Removed ATLEAST_GTK():
	This was identical to GTK_CHECK_VERSION() but its documentation
	is wrong!

------------------------------------------------------------------------
r7567 | cbiere | 2004-12-16 15:38:18 -0500 (Thu, 16 Dec 2004) | 3 lines

Added macro ATLEAST_GTK() to check whether the version of GTK+ used at
	compile-time is equal or newer than the one passed to the macro.

------------------------------------------------------------------------
r7566 | cbiere | 2004-12-16 15:19:59 -0500 (Thu, 16 Dec 2004) | 7 lines

node_tx_enter_flowc():
node_tx_leave_flowc():
	This addresses bug #1083601:
	Don't send hops flow control messages over UDP. This would cause
	gmsg_ctrl_sendto_one() to abort. I don't think "Hops Flow" messages
	over UDP make sense, this should be used for TCP only, or?

------------------------------------------------------------------------
r7565 | cbiere | 2004-12-15 22:46:45 -0500 (Wed, 15 Dec 2004) | 3 lines

socket_tcp_listen():
	Removed wrong assertion. Just return NULL for ports below 1024.

------------------------------------------------------------------------
r7564 | cbiere | 2004-12-15 22:36:39 -0500 (Wed, 15 Dec 2004) | 4 lines

Changed the semantics of the special values for "listen_port":
	0 means "disable"
	1 means "use a random port" (initial default value)

------------------------------------------------------------------------
r7563 | cbiere | 2004-12-15 20:40:25 -0500 (Wed, 15 Dec 2004) | 2 lines

Changed CList column titles "count" to "Count".

------------------------------------------------------------------------
r7562 | cbiere | 2004-12-15 20:35:07 -0500 (Wed, 15 Dec 2004) | 2 lines

Changed CList column titles "count" to "Count".

------------------------------------------------------------------------
r7561 | cbiere | 2004-12-15 20:29:11 -0500 (Wed, 15 Dec 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7560 | cbiere | 2004-12-15 20:26:58 -0500 (Wed, 15 Dec 2004) | 3 lines

Harmonized spelling of "User-Agent".
Removed leading whitespace in " K/s".

------------------------------------------------------------------------
r7559 | cbiere | 2004-12-15 20:05:30 -0500 (Wed, 15 Dec 2004) | 4 lines

host_type_to_gchar():
hcache_type_to_gchar():
	Don't localize the names, the names are only used for debugging.

------------------------------------------------------------------------
r7554 | cbiere | 2004-12-15 00:59:33 -0500 (Wed, 15 Dec 2004) | 2 lines

Removed trailing whitespace.

------------------------------------------------------------------------
r7553 | cbiere | 2004-12-15 00:54:21 -0500 (Wed, 15 Dec 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7552 | cbiere | 2004-12-15 00:52:23 -0500 (Wed, 15 Dec 2004) | 2 lines

Removed trailing whitespace.

------------------------------------------------------------------------
r7551 | cbiere | 2004-12-15 00:51:05 -0500 (Wed, 15 Dec 2004) | 2 lines

Added/changed the gettext strings of the detail tooltips.

------------------------------------------------------------------------
r7550 | cbiere | 2004-12-15 00:46:22 -0500 (Wed, 15 Dec 2004) | 2 lines

Applied patch #1082678 "doxygen clean" by Daichi Kawahata.

------------------------------------------------------------------------
r7549 | cbiere | 2004-12-15 00:35:21 -0500 (Wed, 15 Dec 2004) | 3 lines

Harmonized spelling of Gtk-Gnutella, GnutellaNet, Gnet.
	Patch by Daichi Kawahata plus additional changes.

------------------------------------------------------------------------
r7548 | cbiere | 2004-12-15 00:27:36 -0500 (Wed, 15 Dec 2004) | 2 lines

Added README by Daichi Kawahata.

------------------------------------------------------------------------
r7546 | cbiere | 2004-12-14 14:53:30 -0500 (Tue, 14 Dec 2004) | 7 lines

node_set_vendor():
	Normalize Morpheus' vendor string.
node_avoid_monopoly():
node_reserve_slot():
	Compare vendor strings case-insensitive and use digits as additional
	delimiters.

------------------------------------------------------------------------
r7545 | cbiere | 2004-12-14 14:44:58 -0500 (Tue, 14 Dec 2004) | 2 lines

Added strcasecmp_delimit() as case-insensitive variant of strcmp_delimit().

------------------------------------------------------------------------
r7544 | cbiere | 2004-12-14 14:34:42 -0500 (Tue, 14 Dec 2004) | 3 lines

oob_shutdown():
	Nullify the pointers after destroying the hash tables.

------------------------------------------------------------------------
r7543 | cbiere | 2004-12-13 22:04:39 -0500 (Mon, 13 Dec 2004) | 5 lines

ggept_lf_extract():
	Fixed bug which affects all architectures with char == signed char
	and causes an invalid decoded LF value. The code in the specs is
	correct but I obviously fucked up the glib-izing.

------------------------------------------------------------------------
r7541 | cbiere | 2004-12-13 06:57:16 -0500 (Mon, 13 Dec 2004) | 3 lines

compact_query_utf8():
	Fixed and simplied. The old version ate some UTF-8 characters.

------------------------------------------------------------------------
r7540 | cbiere | 2004-12-13 06:55:05 -0500 (Mon, 13 Dec 2004) | 2 lines

Added skip_ascii_blanks().

------------------------------------------------------------------------
r7539 | cbiere | 2004-12-13 06:53:49 -0500 (Mon, 13 Dec 2004) | 3 lines

search_new():
	Return -1 on failure so that the UI can notice the failure.

------------------------------------------------------------------------
r7538 | cbiere | 2004-12-13 06:34:06 -0500 (Mon, 13 Dec 2004) | 3 lines

strlcpy_utf8():
	Fixed compiler warning regarding signed vs. unsigned comparison.

------------------------------------------------------------------------
r7537 | cbiere | 2004-12-12 07:10:59 -0500 (Sun, 12 Dec 2004) | 2 lines

Partially applied doxygen patch by Daichi Kawahata.

------------------------------------------------------------------------
r7536 | cbiere | 2004-12-12 06:52:42 -0500 (Sun, 12 Dec 2004) | 2 lines

<dic1> @eturn should be @return.

------------------------------------------------------------------------
r7535 | cbiere | 2004-12-12 02:42:27 -0500 (Sun, 12 Dec 2004) | 2 lines

Forgot colon after urn:sha1.

------------------------------------------------------------------------
r7534 | cbiere | 2004-12-12 02:25:07 -0500 (Sun, 12 Dec 2004) | 3 lines

Prefix the SHA1 with urn:sha1 in the search results details so it can be
	be copy&pasted into the search entry to start a search by urn:sha1.

------------------------------------------------------------------------
r7533 | cbiere | 2004-12-12 02:22:34 -0500 (Sun, 12 Dec 2004) | 6 lines

gm_sanitize_filename():
	Added handling of too long filenames. If a filename is too long it
	is truncated whereas the filename extension is preserved if
	possible. The maximum size is currently hardcoded to 256 bytes
	which is a common limit.

------------------------------------------------------------------------
r7532 | cbiere | 2004-12-12 02:19:34 -0500 (Sun, 12 Dec 2004) | 3 lines

Added strlcpy_utf8() which works like {g_,}strlcpy() but preserves a
	valid UTF-8 encoding on truncation.

------------------------------------------------------------------------
r7531 | cbiere | 2004-12-12 02:17:36 -0500 (Sun, 12 Dec 2004) | 3 lines

Show the SHA1 in the fileinfo details so that it's easily possible to start a
	search by urn:sha1 if the download runs out of sources.

------------------------------------------------------------------------
r7530 | cbiere | 2004-12-11 22:19:33 -0500 (Sat, 11 Dec 2004) | 2 lines

Convert search string from locale to UTF-8 encoding; matters for GTK+ 1.2.

------------------------------------------------------------------------
r7529 | cbiere | 2004-12-11 21:17:49 -0500 (Sat, 11 Dec 2004) | 3 lines

Always update the headers to prevent that they hold stale information.
Don't show total rate and remaining time in each sub-node.

------------------------------------------------------------------------
r7528 | cbiere | 2004-12-11 15:44:35 -0500 (Sat, 11 Dec 2004) | 2 lines

Removed the vpanes from the left pane.

------------------------------------------------------------------------
r7527 | cbiere | 2004-12-11 14:58:36 -0500 (Sat, 11 Dec 2004) | 2 lines

Changed magic header to "#!/usr/bin/env expect".

------------------------------------------------------------------------
r7526 | cbiere | 2004-12-11 13:18:01 -0500 (Sat, 11 Dec 2004) | 6 lines

Minor style fixes.
Added file_info_chunklist_free().
file_info_retrieve_binary():
	If the retrieved chunklist is inconsistent, it must be freed
	before fi_free() is called to prevent an assertion failure.

------------------------------------------------------------------------
r7525 | cbiere | 2004-12-11 00:17:52 -0500 (Sat, 11 Dec 2004) | 3 lines

socket_tos():
	Suppress the warning if the remote site closed the connection.

------------------------------------------------------------------------
r7524 | cbiere | 2004-12-11 00:02:34 -0500 (Sat, 11 Dec 2004) | 3 lines

sock_nodelay():
	Suppress the warning if the remote site closed the connection.

------------------------------------------------------------------------
r7523 | cbiere | 2004-12-10 23:18:28 -0500 (Fri, 10 Dec 2004) | 3 lines

PRIu64 cannot be used in gettext-ified strings, thus convert the value to
	a string first.

------------------------------------------------------------------------
r7522 | cbiere | 2004-12-10 22:50:46 -0500 (Fri, 10 Dec 2004) | 2 lines

Disabled download_convert_to_urires(). This shouldn't be necessary at all.

------------------------------------------------------------------------
r7521 | cbiere | 2004-12-10 22:48:28 -0500 (Fri, 10 Dec 2004) | 3 lines

fi_alias():
	Refuse to add URN-like aliases.

------------------------------------------------------------------------
r7520 | cbiere | 2004-12-10 22:46:39 -0500 (Fri, 10 Dec 2004) | 2 lines

Don't add trailing spaces after the vendor in the tooltips.

------------------------------------------------------------------------
r7519 | cbiere | 2004-12-10 19:42:25 -0500 (Fri, 10 Dec 2004) | 2 lines

Fixed bad assertions with respect to file_info_check_chunklist().

------------------------------------------------------------------------
r7518 | cbiere | 2004-12-10 18:53:58 -0500 (Fri, 10 Dec 2004) | 4 lines

Added file_info_check_chunklist().
Check the consistency of the chunks stored to fileinfo at load time.
Added assertions to catch corruption of fileinfo chunklists.

------------------------------------------------------------------------
r7517 | cbiere | 2004-12-10 15:36:08 -0500 (Fri, 10 Dec 2004) | 3 lines

file_info_retrieve():
	Moved the variables fc, from, to, status into the relevant scopes.

------------------------------------------------------------------------
r7516 | cbiere | 2004-12-10 15:12:23 -0500 (Fri, 10 Dec 2004) | 8 lines

file_info_retrieve_binary():
	Added assertions to ensure that neither parameter is NULL.
file_info_retrieve():
	Make sure that fi->path is initialized too.
	Free incomplete fileinfo records to prevent memory leaks.
	Add the aliases directly to fi->alias so that the memory
	is freed by fi_free().

------------------------------------------------------------------------
r7515 | cbiere | 2004-12-10 12:34:02 -0500 (Fri, 10 Dec 2004) | 2 lines

Added rule 1.7 concerning trailing whitespace.

------------------------------------------------------------------------
r7514 | cbiere | 2004-12-09 23:30:47 -0500 (Thu, 09 Dec 2004) | 3 lines

Removed HTML <ram> tag which caused problems with doxygen. This tag is not
yet standardized.

------------------------------------------------------------------------
r7513 | cbiere | 2004-12-09 01:54:54 -0500 (Thu, 09 Dec 2004) | 2 lines

Removed superfluous trailing blanks from all line endings.

------------------------------------------------------------------------
r7512 | cbiere | 2004-12-09 01:34:48 -0500 (Thu, 09 Dec 2004) | 2 lines

Removed superfluous trailing blanks from all line endings.

------------------------------------------------------------------------
r7511 | rmanfredi | 2004-12-09 01:25:20 -0500 (Thu, 09 Dec 2004) | 2 lines

Regenerated Configure and config_h.SH to use the two new units for getinvent().

------------------------------------------------------------------------
r7510 | rmanfredi | 2004-12-09 01:23:59 -0500 (Thu, 09 Dec 2004) | 2 lines

Fixed second MAKE line which must begin with a TAB for make...

------------------------------------------------------------------------
r7509 | rmanfredi | 2004-12-09 01:22:13 -0500 (Thu, 09 Dec 2004) | 2 lines

Added two new unit files to manifests.

------------------------------------------------------------------------
r7508 | rmanfredi | 2004-12-09 01:21:25 -0500 (Thu, 09 Dec 2004) | 2 lines

Added metaconfig units for getinvent() probing on SGI.

------------------------------------------------------------------------
r7507 | cbiere | 2004-12-09 00:55:08 -0500 (Thu, 09 Dec 2004) | 3 lines

This should fix bug #1021602:
	Set ``last_shown_valid'' to FALSE if ``last_shown'' is removed.

------------------------------------------------------------------------
r7506 | cbiere | 2004-12-09 00:38:09 -0500 (Thu, 09 Dec 2004) | 3 lines

create_pixmap():
	Shut up warning about unused parameter widget.

------------------------------------------------------------------------
r7505 | cbiere | 2004-12-08 23:28:08 -0500 (Wed, 08 Dec 2004) | 3 lines

Applied whitespace cleanup patch by Daichi Kawahata:
	Removed superfluous trailing whitespaces from all lines.

------------------------------------------------------------------------
r7504 | cbiere | 2004-12-08 17:37:33 -0500 (Wed, 08 Dec 2004) | 4 lines

on_cursor_changed():
	Changed the format string for the tooltip to remove unnecessary
	trailing spaces.

------------------------------------------------------------------------
r7503 | cbiere | 2004-12-07 21:35:17 -0500 (Tue, 07 Dec 2004) | 2 lines

Tagged as unstable again and bumped date.

------------------------------------------------------------------------
r7502 | cbiere | 2004-12-07 21:23:19 -0500 (Tue, 07 Dec 2004) | 3 lines

is_latin_locale():
	Moved to utf8.[ch].

------------------------------------------------------------------------
r7501 | cbiere | 2004-12-07 21:21:52 -0500 (Tue, 07 Dec 2004) | 3 lines

Applied patch by Daichi Kawahata to determine to amount of physical RAM
	on SGI IRIX.

------------------------------------------------------------------------
r7500 | cbiere | 2004-12-07 19:50:39 -0500 (Tue, 07 Dec 2004) | 3 lines

Applied patch by Daichi Kawahata to determine to amount of physical RAM
	on SGI IRIX.

------------------------------------------------------------------------
r7499 | cbiere | 2004-12-07 19:36:52 -0500 (Tue, 07 Dec 2004) | 2 lines

Applied patch by Daichi Kawahata to fix diverse compiler warnings.

------------------------------------------------------------------------
r7498 | cbiere | 2004-12-07 19:24:17 -0500 (Tue, 07 Dec 2004) | 2 lines

Include <signal.h> from common.h only.

------------------------------------------------------------------------
r7497 | cbiere | 2004-12-07 19:01:51 -0500 (Tue, 07 Dec 2004) | 5 lines

is_ascii_*():
	Cast the parameter to unsigned char even after isascii() because
	the compiler might not be able to recognize the reduced input
	range.

------------------------------------------------------------------------
r7496 | cbiere | 2004-12-07 18:55:35 -0500 (Tue, 07 Dec 2004) | 4 lines

download_read():
	Removed G_BREAKPOINT() statement which had been used to debug
	a certain problem.

------------------------------------------------------------------------
r7495 | cbiere | 2004-12-06 20:25:11 -0500 (Mon, 06 Dec 2004) | 2 lines

Don't use use_map_on_query() if the query is UTF-8 encoded.

------------------------------------------------------------------------
r7494 | cbiere | 2004-12-06 19:51:10 -0500 (Mon, 06 Dec 2004) | 3 lines

[GTK2] Added popup menu to the searches list. Moved items from the search
	results popup menu to this one.

------------------------------------------------------------------------
r7493 | cbiere | 2004-12-06 19:44:51 -0500 (Mon, 06 Dec 2004) | 3 lines

Hide the popup for the search results, if there's no search. Clicking on
	"Search Metadata" would even cause crash otherwise.

------------------------------------------------------------------------
r7492 | cbiere | 2004-12-06 18:17:26 -0500 (Mon, 06 Dec 2004) | 2 lines

Include lib/utf8.h for prototype of icu_enabled().

------------------------------------------------------------------------
r7491 | cbiere | 2004-12-06 17:51:15 -0500 (Mon, 06 Dec 2004) | 2 lines

Handle UTF-8 encoded search strings only. Don't handle ISO-8859-1 specially.

------------------------------------------------------------------------
r7490 | cbiere | 2004-12-06 17:49:20 -0500 (Mon, 06 Dec 2004) | 2 lines

If ICU cannot be initialized fall back to non-ICU behaviour.

------------------------------------------------------------------------
r7489 | cbiere | 2004-12-04 07:54:25 -0500 (Sat, 04 Dec 2004) | 2 lines

Exterminated last occurence of uncalled-for gtk_alignment_set_padding().

------------------------------------------------------------------------
r7488 | rmanfredi | 2004-12-04 07:30:19 -0500 (Sat, 04 Dec 2004) | 4 lines

Provide empty bitzi_init() and bitzi_query_byurnsha1() when they don't
have libxml2-dev installed.
The GUI should disable the menu entry for Bitzi searches as well.

------------------------------------------------------------------------
r7487 | cbiere | 2004-12-03 13:42:15 -0500 (Fri, 03 Dec 2004) | 2 lines

Added const-qualifier to ``mq_udp_ops''.

------------------------------------------------------------------------
r7486 | cbiere | 2004-12-03 13:34:35 -0500 (Fri, 03 Dec 2004) | 3 lines

tx_dgram_sendto():
	Added EPERM to list of known errno codes.

------------------------------------------------------------------------
r7485 | cbiere | 2004-12-03 13:29:26 -0500 (Fri, 03 Dec 2004) | 2 lines

Do not indent preprocessor code.

------------------------------------------------------------------------
r7479 | rmanfredi | 2004-11-27 11:35:38 -0500 (Sat, 27 Nov 2004) | 2 lines

Release 0.95 stable.

------------------------------------------------------------------------
r7478 | rmanfredi | 2004-11-27 11:33:03 -0500 (Sat, 27 Nov 2004) | 2 lines

Fixed compilation warning.

------------------------------------------------------------------------
r7477 | rmanfredi | 2004-11-27 11:25:54 -0500 (Sat, 27 Nov 2004) | 2 lines

Added comment.

------------------------------------------------------------------------
r7476 | rmanfredi | 2004-11-27 11:25:12 -0500 (Sat, 27 Nov 2004) | 2 lines

Updated for 0.95.

------------------------------------------------------------------------
r7475 | rmanfredi | 2004-11-27 11:23:04 -0500 (Sat, 27 Nov 2004) | 2 lines

Added tokens for 0.95.

------------------------------------------------------------------------
r7474 | rmanfredi | 2004-11-27 11:20:03 -0500 (Sat, 27 Nov 2004) | 2 lines

Ban older 0.93 and 0.94 in 2005.  Everyone must upgrade to 0.95.

------------------------------------------------------------------------
r7473 | rmanfredi | 2004-11-27 07:43:35 -0500 (Sat, 27 Nov 2004) | 3 lines

Expanded on the changes made since 0.94.  Made prominent note that 0.94 is
an obsolete servent.

------------------------------------------------------------------------
r7472 | graaff | 2004-11-27 07:15:19 -0500 (Sat, 27 Nov 2004) | 2 lines

Summary of changes for the 0.95 release.

------------------------------------------------------------------------
r7471 | rmanfredi | 2004-11-27 03:54:27 -0500 (Sat, 27 Nov 2004) | 3 lines

Don't drop queries that have travelled more than our max TTL if they
are requesting OOB hit delivery and we are configured to honour that flag.

------------------------------------------------------------------------
r7470 | rmanfredi | 2004-11-27 03:52:44 -0500 (Sat, 27 Nov 2004) | 2 lines

Split too long a line.

------------------------------------------------------------------------
r7469 | rmanfredi | 2004-11-26 18:17:18 -0500 (Fri, 26 Nov 2004) | 2 lines

Pedantic style fix.

------------------------------------------------------------------------
r7468 | rmanfredi | 2004-11-26 18:16:40 -0500 (Fri, 26 Nov 2004) | 2 lines

Raised minimum leaf count to 50 and default to 100 leaves.

------------------------------------------------------------------------
r7467 | rmanfredi | 2004-11-26 18:15:49 -0500 (Fri, 26 Nov 2004) | 2 lines

Typo fix in comment.

------------------------------------------------------------------------
r7466 | rmanfredi | 2004-11-26 18:14:27 -0500 (Fri, 26 Nov 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7465 | rmanfredi | 2004-11-26 18:13:55 -0500 (Fri, 26 Nov 2004) | 2 lines

Latest changes.

------------------------------------------------------------------------
r7464 | rmanfredi | 2004-11-26 15:16:07 -0500 (Fri, 26 Nov 2004) | 2 lines

Updated GeoIP database.

------------------------------------------------------------------------
r7463 | rmanfredi | 2004-11-26 13:50:36 -0500 (Fri, 26 Nov 2004) | 2 lines

Renamed configure as configure.gnu for case-insensitive filesystems.

------------------------------------------------------------------------
r7462 | rmanfredi | 2004-11-26 13:49:38 -0500 (Fri, 26 Nov 2004) | 2 lines

Moved from configure

------------------------------------------------------------------------
r7461 | rmanfredi | 2004-11-26 13:49:24 -0500 (Fri, 26 Nov 2004) | 2 lines

Moved to configure.gnu

------------------------------------------------------------------------
r7460 | rmanfredi | 2004-11-26 10:03:41 -0500 (Fri, 26 Nov 2004) | 3 lines

Must account for the fact that, on some 64-bit paltforms, the size of
the tm_t structure can be greater than 2 times 32-bits.

------------------------------------------------------------------------
r7459 | rmanfredi | 2004-11-26 09:52:42 -0500 (Fri, 26 Nov 2004) | 2 lines

Added missing trailing "," in array initializer.

------------------------------------------------------------------------
r7458 | rmanfredi | 2004-11-26 03:32:53 -0500 (Fri, 26 Nov 2004) | 4 lines

Fixed static assert in READ_INT32 for alphas, where time_t is larger
than 32 bits: we just need to know that we're reading into a variable
holding at least 32 bits.

------------------------------------------------------------------------
r7457 | rmanfredi | 2004-11-25 17:12:37 -0500 (Thu, 25 Nov 2004) | 2 lines

Added more vendor code translations.

------------------------------------------------------------------------
r7456 | rmanfredi | 2004-11-25 14:18:35 -0500 (Thu, 25 Nov 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7455 | rmanfredi | 2004-11-25 14:04:24 -0500 (Thu, 25 Nov 2004) | 2 lines

Update from Daichi Kawahata.

------------------------------------------------------------------------
r7454 | graaff | 2004-11-23 14:47:50 -0500 (Tue, 23 Nov 2004) | 2 lines

Do not include email address in release version of code.

------------------------------------------------------------------------
r7453 | graaff | 2004-11-23 14:45:17 -0500 (Tue, 23 Nov 2004) | 3 lines

Tidy up check for invalid chunks list, and only update visual progress
information when a valid chunks list is presented.

------------------------------------------------------------------------
r7452 | graaff | 2004-11-22 11:10:24 -0500 (Mon, 22 Nov 2004) | 2 lines

Small introduction on getting gtk-gnutella, and fixed up tables.

------------------------------------------------------------------------
r7451 | rmanfredi | 2004-11-22 09:32:29 -0500 (Mon, 22 Nov 2004) | 3 lines

Added more information to the description of what "ancient_version" means,
so that they get a meaningful tooltip when they mouse over the clock.

------------------------------------------------------------------------
r7450 | rmanfredi | 2004-11-22 09:28:12 -0500 (Mon, 22 Nov 2004) | 2 lines

Fixed argument of version_maybe_refuse() to be signed.

------------------------------------------------------------------------
r7449 | rmanfredi | 2004-11-22 08:43:32 -0500 (Mon, 22 Nov 2004) | 2 lines

Added pre-release steps that must not be forgotten.

------------------------------------------------------------------------
r7448 | rmanfredi | 2004-11-22 08:28:15 -0500 (Mon, 22 Nov 2004) | 2 lines

Fixed English in one property comment.

------------------------------------------------------------------------
r7447 | rmanfredi | 2004-11-22 08:23:45 -0500 (Mon, 22 Nov 2004) | 4 lines

When sending non "alive" pings, include the "SCP" mark to get packed pongs.
When replying to pings from Gnutella, give them "IPP" packed addresses if
they mentionned support for "SCP", even though the request comes via TCP.

------------------------------------------------------------------------
r7446 | cbiere | 2004-11-22 05:11:57 -0500 (Mon, 22 Nov 2004) | 2 lines

[GTK2] Enabled purging of multiple files at a time.

------------------------------------------------------------------------
r7445 | rmanfredi | 2004-11-22 04:18:33 -0500 (Mon, 22 Nov 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7444 | rmanfredi | 2004-11-22 04:16:36 -0500 (Mon, 22 Nov 2004) | 2 lines

Added plankton.

------------------------------------------------------------------------
r7443 | rmanfredi | 2004-11-22 03:35:21 -0500 (Mon, 22 Nov 2004) | 3 lines

Make sure pruning is shared evenly between fresh/valid lists for
ANY and ULTRA caches.

------------------------------------------------------------------------
r7442 | cbiere | 2004-11-22 03:25:26 -0500 (Mon, 22 Nov 2004) | 3 lines

Fixed assertion failure on exit which was caused by indirectly re-filling
a previously cleared cache.

------------------------------------------------------------------------
r7441 | cbiere | 2004-11-21 19:07:19 -0500 (Sun, 21 Nov 2004) | 2 lines

Replaced an UHC.

------------------------------------------------------------------------
r7440 | wyldfire | 2004-11-21 16:17:10 -0500 (Sun, 21 Nov 2004) | 2 lines

no comment

------------------------------------------------------------------------
r7439 | wyldfire | 2004-11-21 16:14:33 -0500 (Sun, 21 Nov 2004) | 2 lines

Added viewport around result details.

------------------------------------------------------------------------
r7438 | wyldfire | 2004-11-21 16:12:42 -0500 (Sun, 21 Nov 2004) | 3 lines

Added settings_gui_init_late() to restore split_pane positions after
  main window is resized and visible.

------------------------------------------------------------------------
r7437 | wyldfire | 2004-11-21 16:05:19 -0500 (Sun, 21 Nov 2004) | 2 lines

Merge most of hache_remove into hcache_unlink_host and made the first use the latter.

------------------------------------------------------------------------
r7436 | cbiere | 2004-11-21 00:14:13 -0500 (Sun, 21 Nov 2004) | 2 lines

Removed an unnecessary debug message.

------------------------------------------------------------------------
r7435 | cbiere | 2004-11-21 00:11:43 -0500 (Sun, 21 Nov 2004) | 2 lines

Replaced UHC.

------------------------------------------------------------------------
r7434 | rmanfredi | 2004-11-20 15:17:19 -0500 (Sat, 20 Nov 2004) | 2 lines

Give priority to UDP host caches.

------------------------------------------------------------------------
r7433 | rmanfredi | 2004-11-20 15:16:38 -0500 (Sat, 20 Nov 2004) | 2 lines

Skip pseudo host cache HCACHE_NONE.

------------------------------------------------------------------------
r7432 | rmanfredi | 2004-11-20 15:02:51 -0500 (Sat, 20 Nov 2004) | 2 lines

Added extra assertions.

------------------------------------------------------------------------
r7431 | rmanfredi | 2004-11-20 15:02:05 -0500 (Sat, 20 Nov 2004) | 3 lines

Got rid of broken file_config_open_append(), which was appending to a ".new"
file, and therefore not doing the expected!

------------------------------------------------------------------------
r7430 | rmanfredi | 2004-11-20 15:01:10 -0500 (Sat, 20 Nov 2004) | 2 lines

Was only storing the freshest hosts from the cache, not the whole cache.

------------------------------------------------------------------------
r7429 | cbiere | 2004-11-20 06:45:46 -0500 (Sat, 20 Nov 2004) | 2 lines

Added UTF-8 conversion hint for Vim users.

------------------------------------------------------------------------
r7428 | graaff | 2004-11-19 02:14:37 -0500 (Fri, 19 Nov 2004) | 2 lines

Updated Japanese translation.

------------------------------------------------------------------------
r7427 | cbiere | 2004-11-17 18:48:06 -0500 (Wed, 17 Nov 2004) | 4 lines

Fixed filenames:
	gtk-gnutella16.png -> gtk-gnutella.16.png
	gtk-gnutella32.png -> gtk-gnutella.32.png

------------------------------------------------------------------------
r7426 | cbiere | 2004-11-17 18:21:01 -0500 (Wed, 17 Nov 2004) | 2 lines

Further fixes.

------------------------------------------------------------------------
r7425 | cbiere | 2004-11-17 15:43:11 -0500 (Wed, 17 Nov 2004) | 2 lines

Corrected and re-activated a couple of translations.

------------------------------------------------------------------------
r7424 | cbiere | 2004-11-15 21:30:07 -0500 (Mon, 15 Nov 2004) | 3 lines

Remove lines from the search monitor if there are more lines than the current
	limit. That's the case after the limit was decreased.

------------------------------------------------------------------------
r7423 | cbiere | 2004-11-15 17:40:05 -0500 (Mon, 15 Nov 2004) | 2 lines

Regenerated after changes.

------------------------------------------------------------------------
r7422 | graaff | 2004-11-15 16:41:22 -0500 (Mon, 15 Nov 2004) | 2 lines

Slightly change tooltip to facilitate translation.

------------------------------------------------------------------------
r7421 | graaff | 2004-11-15 16:23:41 -0500 (Mon, 15 Nov 2004) | 2 lines

Change email address on translator's request.

------------------------------------------------------------------------
r7420 | cbiere | 2004-11-14 17:08:02 -0500 (Sun, 14 Nov 2004) | 2 lines

Clear the tooltips if there's no treeview cursor on pointer entry.

------------------------------------------------------------------------
r7419 | rmanfredi | 2004-11-14 17:01:15 -0500 (Sun, 14 Nov 2004) | 2 lines

Beta version of 2004-11-14.

------------------------------------------------------------------------
r7418 | rmanfredi | 2004-11-14 16:59:51 -0500 (Sun, 14 Nov 2004) | 2 lines

Added I18N marks on strings displayed on the GUI.

------------------------------------------------------------------------
r7417 | rmanfredi | 2004-11-14 16:59:32 -0500 (Sun, 14 Nov 2004) | 2 lines

Updated after addition of two new core source files.

------------------------------------------------------------------------
r7416 | rmanfredi | 2004-11-14 16:36:28 -0500 (Sun, 14 Nov 2004) | 2 lines

Added hash_list_clear().

------------------------------------------------------------------------
r7415 | rmanfredi | 2004-11-14 16:36:06 -0500 (Sun, 14 Nov 2004) | 2 lines

Renamed udp_send_reply() as udp_send_msg().

------------------------------------------------------------------------
r7414 | rmanfredi | 2004-11-14 16:35:27 -0500 (Sun, 14 Nov 2004) | 3 lines

Changed signature of build_pong_msg().
Renamed udp_send_reply() as udp_send_msg().

------------------------------------------------------------------------
r7413 | rmanfredi | 2004-11-14 16:34:44 -0500 (Sun, 14 Nov 2004) | 2 lines

Changed signature of build_ping_msg().

------------------------------------------------------------------------
r7412 | rmanfredi | 2004-11-14 16:34:20 -0500 (Sun, 14 Nov 2004) | 3 lines

Build "SCP" pings for UDP host caches.
Handle UDP pongs and extract IPP information when present.

------------------------------------------------------------------------
r7411 | rmanfredi | 2004-11-14 16:33:07 -0500 (Sun, 14 Nov 2004) | 2 lines

Alternate between UDP host caches and TCP web caches when missing hosts.

------------------------------------------------------------------------
r7410 | rmanfredi | 2004-11-14 16:32:22 -0500 (Sun, 14 Nov 2004) | 2 lines

Added assertion.

------------------------------------------------------------------------
r7409 | rmanfredi | 2004-11-14 16:31:56 -0500 (Sun, 14 Nov 2004) | 2 lines

Added gwc_is_waiting().

------------------------------------------------------------------------
r7408 | rmanfredi | 2004-11-14 16:31:38 -0500 (Sun, 14 Nov 2004) | 4 lines

Use hcache_add_caught(HOST_ULTRA), not host_add() to record hosts retrieved
from Gnutella web caches!
Added gwc_is_waiting().

------------------------------------------------------------------------
r7407 | rmanfredi | 2004-11-14 16:30:45 -0500 (Sun, 14 Nov 2004) | 2 lines

Signature of build_ping_msg() changed.

------------------------------------------------------------------------
r7406 | rmanfredi | 2004-11-14 16:30:24 -0500 (Sun, 14 Nov 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7405 | rmanfredi | 2004-11-14 16:30:01 -0500 (Sun, 14 Nov 2004) | 2 lines

Added uhc.c.

------------------------------------------------------------------------
r7404 | rmanfredi | 2004-11-14 16:29:37 -0500 (Sun, 14 Nov 2004) | 2 lines

Plugged UDP host cache support.

------------------------------------------------------------------------
r7403 | rmanfredi | 2004-11-14 16:29:06 -0500 (Sun, 14 Nov 2004) | 2 lines

Added src/core/uhc.[ch].

------------------------------------------------------------------------
r7402 | rmanfredi | 2004-11-14 16:26:51 -0500 (Sun, 14 Nov 2004) | 2 lines

Added two new core files.

------------------------------------------------------------------------
r7401 | rmanfredi | 2004-11-14 12:18:47 -0500 (Sun, 14 Nov 2004) | 2 lines

Added GUI feedback in the statusbar about the web cache operations.

------------------------------------------------------------------------
r7400 | cbiere | 2004-11-14 12:03:53 -0500 (Sun, 14 Nov 2004) | 2 lines

Added Daichi Kawahata to translators.

------------------------------------------------------------------------
r7399 | cbiere | 2004-11-14 12:01:43 -0500 (Sun, 14 Nov 2004) | 2 lines

Added Daichi Kawahata to contributors.

------------------------------------------------------------------------
r7398 | graaff | 2004-11-14 11:02:13 -0500 (Sun, 14 Nov 2004) | 3 lines

Update POTFILES.in to new directory structure and include more files
with translatable strings; update .po files accordingly.

------------------------------------------------------------------------
r7397 | graaff | 2004-11-14 10:50:29 -0500 (Sun, 14 Nov 2004) | 2 lines

Update tooltips to explain the new triangles in the visual progress display.

------------------------------------------------------------------------
r7396 | graaff | 2004-11-14 09:44:30 -0500 (Sun, 14 Nov 2004) | 2 lines

Add Japanese translation file.

------------------------------------------------------------------------
r7395 | rmanfredi | 2004-11-14 09:25:37 -0500 (Sun, 14 Nov 2004) | 3 lines

Added extensive sanity checks on extensions marked as COBS and/or deflate,
to avoid parsing garbage as GGEP.

------------------------------------------------------------------------
r7394 | rmanfredi | 2004-11-14 09:21:10 -0500 (Sun, 14 Nov 2004) | 3 lines

Renamed zlib_valid_header() as zlib_is_valid_header().
Check the validity of the compression method field as well.

------------------------------------------------------------------------
r7393 | rmanfredi | 2004-11-14 09:19:07 -0500 (Sun, 14 Nov 2004) | 3 lines

Added back accidentally removed sanity check during COBS decoding.
New routing cobs_is_valid() to check for the validity of COBS without decoding.

------------------------------------------------------------------------
r7392 | rmanfredi | 2004-11-14 09:17:53 -0500 (Sun, 14 Nov 2004) | 2 lines

Removed spurious trailing "\n" in g_warning() call.

------------------------------------------------------------------------
r7391 | rmanfredi | 2004-11-14 09:16:59 -0500 (Sun, 14 Nov 2004) | 2 lines

Consistently log all extensions via g_message() if search_debug > 2.

------------------------------------------------------------------------
r7390 | rmanfredi | 2004-11-14 09:16:04 -0500 (Sun, 14 Nov 2004) | 2 lines

Raised the max amount of alt-locs sent in GGEP "ALT" in query hits to 10.

------------------------------------------------------------------------
r7389 | rmanfredi | 2004-11-14 09:15:25 -0500 (Sun, 14 Nov 2004) | 2 lines

Forgot to call hash_list_free() when destroying caches.

------------------------------------------------------------------------
r7388 | cbiere | 2004-11-14 08:58:44 -0500 (Sun, 14 Nov 2004) | 5 lines

bitzi_querycache_byurnsha1():
bitzi_query_byurnsha1():
	These should never be called with NULL as parameter. Complain
	but don't abort if ``urnsha1'' is NULL.

------------------------------------------------------------------------
r7387 | cbiere | 2004-11-14 08:56:00 -0500 (Sun, 14 Nov 2004) | 2 lines

Don't request bitzi data when there's no SHA1.

------------------------------------------------------------------------
r7386 | rmanfredi | 2004-11-14 08:46:56 -0500 (Sun, 14 Nov 2004) | 3 lines

Removed spurious g_assert() when no parent for SHA1-less results.
[Patch from Alex Bennee]

------------------------------------------------------------------------
r7385 | rmanfredi | 2004-11-14 07:57:19 -0500 (Sun, 14 Nov 2004) | 2 lines

Forgot to include "core/oob.h" for oob_shutdown() declaration.

------------------------------------------------------------------------
r7384 | cbiere | 2004-11-14 07:45:36 -0500 (Sun, 14 Nov 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7383 | rmanfredi | 2004-11-14 07:23:57 -0500 (Sun, 14 Nov 2004) | 2 lines

Ooops.  1 crab was already there.

------------------------------------------------------------------------
r7382 | rmanfredi | 2004-11-14 07:23:10 -0500 (Sun, 14 Nov 2004) | 2 lines

Added 3 crabs.

------------------------------------------------------------------------
r7381 | rmanfredi | 2004-11-14 07:03:10 -0500 (Sun, 14 Nov 2004) | 2 lines

Added zlib_valid_header() to check for valid "deflated" buffer.

------------------------------------------------------------------------
r7380 | rmanfredi | 2004-11-14 06:51:50 -0500 (Sun, 14 Nov 2004) | 2 lines

Removed unused "vendor" argument in huge_collect_locations().

------------------------------------------------------------------------
r7379 | rmanfredi | 2004-11-14 06:50:32 -0500 (Sun, 14 Nov 2004) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r7378 | rmanfredi | 2004-11-14 06:49:21 -0500 (Sun, 14 Nov 2004) | 3 lines

Must shutdown OOB query hit delivery or we'll crash at shutdown time after
having freed the UDP socket.

------------------------------------------------------------------------
r7377 | rmanfredi | 2004-11-14 04:47:27 -0500 (Sun, 14 Nov 2004) | 5 lines

Adopted the same variable reply lengh on errors as in HTTP when bandwidth is
saturated.  Added new error code 409 for "conflicts" and don't send out
connection "pongs" in the headers on all 403, 406 and 550 errors.
Also don't send them GTKG-specific headers if we determined they were not GTKG.

------------------------------------------------------------------------
r7376 | rmanfredi | 2004-11-14 04:42:54 -0500 (Sun, 14 Nov 2004) | 2 lines

Only emit warnings about unknown / too numerous extensions when debugging.

------------------------------------------------------------------------
r7375 | rmanfredi | 2004-11-14 04:41:25 -0500 (Sun, 14 Nov 2004) | 2 lines

Limited number of "normal" (legacy) nodes to which we can connect to 1 max.

------------------------------------------------------------------------
r7374 | rmanfredi | 2004-11-14 04:36:09 -0500 (Sun, 14 Nov 2004) | 3 lines

Don't send out GGEP "LOC" indication in pongs until they can configure
that from the GUI.

------------------------------------------------------------------------
r7373 | rmanfredi | 2004-11-13 19:10:37 -0500 (Sat, 13 Nov 2004) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r7372 | rmanfredi | 2004-11-13 18:17:43 -0500 (Sat, 13 Nov 2004) | 2 lines

Generation of X-Features appended a trailing space after feature name.

------------------------------------------------------------------------
r7371 | rmanfredi | 2004-11-13 18:08:25 -0500 (Sat, 13 Nov 2004) | 2 lines

Don't remove a host from the cache whilst iterating over it.

------------------------------------------------------------------------
r7369 | rmanfredi | 2004-11-13 09:38:25 -0500 (Sat, 13 Nov 2004) | 2 lines

Added missing files to the MANIFESTs.

------------------------------------------------------------------------
r7368 | rmanfredi | 2004-11-13 09:22:37 -0500 (Sat, 13 Nov 2004) | 2 lines

Version of 2004-11-13 (0.95 beta).

------------------------------------------------------------------------
r7367 | rmanfredi | 2004-11-13 09:17:12 -0500 (Sat, 13 Nov 2004) | 2 lines

The "�" of my first name must be in ISO-8859-1 or it will not display here.

------------------------------------------------------------------------
r7366 | rmanfredi | 2004-11-13 09:09:03 -0500 (Sat, 13 Nov 2004) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r7365 | rmanfredi | 2004-11-13 09:08:39 -0500 (Sat, 13 Nov 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7364 | rmanfredi | 2004-11-13 09:07:24 -0500 (Sat, 13 Nov 2004) | 2 lines

Limit frequency of UDP ping replies.

------------------------------------------------------------------------
r7363 | rmanfredi | 2004-11-13 09:07:05 -0500 (Sat, 13 Nov 2004) | 2 lines

Limit frequency of TCP/UDP crawler replies.

------------------------------------------------------------------------
r7362 | cbiere | 2004-11-13 07:28:26 -0500 (Sat, 13 Nov 2004) | 2 lines

Changed ``gettext'' back to underscore macro.

------------------------------------------------------------------------
r7361 | cbiere | 2004-11-13 07:27:29 -0500 (Sat, 13 Nov 2004) | 2 lines

Suppress compiler warning for unused ``codeset'' w/o NLS support.

------------------------------------------------------------------------
r7360 | cbiere | 2004-11-13 07:26:09 -0500 (Sat, 13 Nov 2004) | 2 lines

Suppress compiler warning "computed value not used".

------------------------------------------------------------------------
r7359 | cbiere | 2004-11-13 07:25:27 -0500 (Sat, 13 Nov 2004) | 2 lines

Fixed compiler warnings regarding printing of ``double'' values.

------------------------------------------------------------------------
r7358 | cbiere | 2004-11-13 07:24:25 -0500 (Sat, 13 Nov 2004) | 3 lines

Marked unused function parameters.
Style fixes.

------------------------------------------------------------------------
r7357 | rmanfredi | 2004-11-13 06:23:22 -0500 (Sat, 13 Nov 2004) | 2 lines

Goodbye gcache.shacknet.nu.  Welcome to krill.shacknet.nu.

------------------------------------------------------------------------
r7356 | rmanfredi | 2004-11-13 05:58:29 -0500 (Sat, 13 Nov 2004) | 2 lines

When debugging, dump unknown GGEP extensions in the query hit trailer.

------------------------------------------------------------------------
r7355 | rmanfredi | 2004-11-13 05:56:52 -0500 (Sat, 13 Nov 2004) | 3 lines

Added knowledge about GGEP "PATH" (unhandled for now).
Make sure reserved word tables are lexically sorted, for binary search.

------------------------------------------------------------------------
r7354 | rmanfredi | 2004-11-13 05:50:47 -0500 (Sat, 13 Nov 2004) | 2 lines

The dynamic query layer expects much less results out of a SHA1 query.

------------------------------------------------------------------------
r7353 | rmanfredi | 2004-11-13 05:18:58 -0500 (Sat, 13 Nov 2004) | 2 lines

Most vendors now send small ~4K max query hits: lower max hit size to 16K.

------------------------------------------------------------------------
r7352 | rmanfredi | 2004-11-13 04:58:47 -0500 (Sat, 13 Nov 2004) | 2 lines

As a leaf node, refuse to connect to "ancient" ultra nodes.

------------------------------------------------------------------------
r7351 | cbiere | 2004-11-13 04:45:24 -0500 (Sat, 13 Nov 2004) | 3 lines

Marked unused parameters.
Style fixes.

------------------------------------------------------------------------
r7350 | cbiere | 2004-11-13 04:38:51 -0500 (Sat, 13 Nov 2004) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r7349 | rmanfredi | 2004-11-13 03:29:39 -0500 (Sat, 13 Nov 2004) | 2 lines

Some live code had been accidentally placed into #if 0 / #endif.

------------------------------------------------------------------------
r7348 | cbiere | 2004-11-13 00:30:42 -0500 (Sat, 13 Nov 2004) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r7347 | cbiere | 2004-11-13 00:29:27 -0500 (Sat, 13 Nov 2004) | 3 lines

Don't use 32-bit integers for filesizes.
Style fixes.

------------------------------------------------------------------------
r7346 | cbiere | 2004-11-12 23:00:25 -0500 (Fri, 12 Nov 2004) | 2 lines

gnet_fi_chunks_t.size_atom is not a pointer to an int.

------------------------------------------------------------------------
r7345 | rmanfredi | 2004-11-12 19:22:23 -0500 (Fri, 12 Nov 2004) | 3 lines

Handle older LIME/21v1 and LIME/22v1 messages (older specifications of
the push-proxy requests, still used by outdated servents like GnucDNA).

------------------------------------------------------------------------
r7344 | rmanfredi | 2004-11-12 18:52:13 -0500 (Fri, 12 Nov 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7343 | rmanfredi | 2004-11-12 18:51:30 -0500 (Fri, 12 Nov 2004) | 2 lines

More UDP crawling pong generation cleanup.

------------------------------------------------------------------------
r7342 | rmanfredi | 2004-11-12 18:51:00 -0500 (Fri, 12 Nov 2004) | 3 lines

Search results now ignore unknown GGEP extensions in tags, thereby avoiding
display of "funny" characters in tag.

------------------------------------------------------------------------
r7341 | rmanfredi | 2004-11-12 18:49:58 -0500 (Fri, 12 Nov 2004) | 2 lines

Renamed ext_ggep_idname() into ext_ggep_id_str().

------------------------------------------------------------------------
r7340 | rmanfredi | 2004-11-12 18:49:09 -0500 (Fri, 12 Nov 2004) | 3 lines

Added knowledge about GGEP "BH" and "CT" (unhandled for now).
New EXT_T_UNKNOWN_GGEP token to represent GGEP extensions we don't know about.

------------------------------------------------------------------------
r7339 | rmanfredi | 2004-11-12 18:20:04 -0500 (Fri, 12 Nov 2004) | 2 lines

Version of 2004-11-12.

------------------------------------------------------------------------
r7338 | rmanfredi | 2004-11-12 18:15:09 -0500 (Fri, 12 Nov 2004) | 2 lines

Set default for max_ttl to 4.  Cannot set a my_ttl greater than 4.

------------------------------------------------------------------------
r7337 | rmanfredi | 2004-11-12 18:12:16 -0500 (Fri, 12 Nov 2004) | 2 lines

Forgot to cleanup extension vector on early returns, causing memory leak.

------------------------------------------------------------------------
r7336 | rmanfredi | 2004-11-12 18:09:26 -0500 (Fri, 12 Nov 2004) | 2 lines

Reworked error logging for invalid extensions.

------------------------------------------------------------------------
r7335 | rmanfredi | 2004-11-12 18:06:10 -0500 (Fri, 12 Nov 2004) | 3 lines

Trim down TTL of queries coming from "older" hosts not performing dynamic
querying if the hops+TTL is larger than the TTL at which we're broadcasting.

------------------------------------------------------------------------
r7334 | rmanfredi | 2004-11-12 18:04:00 -0500 (Fri, 12 Nov 2004) | 3 lines

Forgot to emit the X-Dynamic-Querying header to signal we're issuing
dynamic queries.

------------------------------------------------------------------------
r7333 | rmanfredi | 2004-11-12 17:58:26 -0500 (Fri, 12 Nov 2004) | 3 lines

Made GGEP parsing more robust, in case we parse garbage: avoid creating
needless extensions.  Limit GGEP IDs to ASCII strings.

------------------------------------------------------------------------
r7332 | rmanfredi | 2004-11-12 11:52:06 -0500 (Fri, 12 Nov 2004) | 3 lines

LimeWire added the user-agent of the node replying at the tail of the
user-agent vector in the UDP crawler pong.

------------------------------------------------------------------------
r7331 | rmanfredi | 2004-11-12 11:39:38 -0500 (Fri, 12 Nov 2004) | 2 lines

More fixes in the crawler data generation.

------------------------------------------------------------------------
r7330 | rmanfredi | 2004-11-12 11:38:06 -0500 (Fri, 12 Nov 2004) | 2 lines

Forgot to propagate the UDP crawler ping's MUID in the pong reply.

------------------------------------------------------------------------
r7329 | rmanfredi | 2004-11-12 01:44:49 -0500 (Fri, 12 Nov 2004) | 2 lines

Iteration to generate crawler pong was accidentally broken by last version.

------------------------------------------------------------------------
r7328 | rmanfredi | 2004-11-11 17:04:56 -0500 (Thu, 11 Nov 2004) | 2 lines

Version of 2004-11-11.

------------------------------------------------------------------------
r7327 | rmanfredi | 2004-11-11 16:11:10 -0500 (Thu, 11 Nov 2004) | 2 lines

Got rid of false plural forms "source(s)", "upload(s)", etc...

------------------------------------------------------------------------
r7326 | rmanfredi | 2004-11-11 15:57:42 -0500 (Thu, 11 Nov 2004) | 3 lines

Made the code for dealing with the TCP crawler more in line with the one
used for the UDP crawler.

------------------------------------------------------------------------
r7325 | rmanfredi | 2004-11-11 14:17:02 -0500 (Thu, 11 Nov 2004) | 4 lines

Refactored decoding of GGEP extensions: this is now done transparently
for compressed / COBS encoded extensions.  All accesses to payload length
and the actual (decoded) payload must now be done via routines.

------------------------------------------------------------------------
r7324 | rmanfredi | 2004-11-10 17:55:17 -0500 (Wed, 10 Nov 2004) | 2 lines

Added test code for sending an UDP crawler ping.

------------------------------------------------------------------------
r7323 | rmanfredi | 2004-11-10 17:46:09 -0500 (Wed, 10 Nov 2004) | 2 lines

When we don't have leaves, the UDP crawler pong builder would fail.

------------------------------------------------------------------------
r7322 | rmanfredi | 2004-11-10 17:41:24 -0500 (Wed, 10 Nov 2004) | 2 lines

Fixed "completion test" in incremental deflater.

------------------------------------------------------------------------
r7321 | cbiere | 2004-11-10 13:31:27 -0500 (Wed, 10 Nov 2004) | 2 lines

Removed declaration after code block which broke compilation.

------------------------------------------------------------------------
r7320 | cbiere | 2004-11-09 18:24:37 -0500 (Tue, 09 Nov 2004) | 3 lines

Fixed detection of urn:sha1 and missing URL path.
Disabled initiating downloads because it simply doesn't work.

------------------------------------------------------------------------
r7319 | rmanfredi | 2004-11-09 16:34:53 -0500 (Tue, 09 Nov 2004) | 2 lines

Version of 2004-11-09.

------------------------------------------------------------------------
r7318 | rmanfredi | 2004-11-09 16:06:55 -0500 (Tue, 09 Nov 2004) | 2 lines

New properties "pcache_debug" and "udp_crawler_visit_count".

------------------------------------------------------------------------
r7317 | rmanfredi | 2004-11-09 15:59:16 -0500 (Tue, 09 Nov 2004) | 2 lines

Added support for LimeWire's UDP crawling.

------------------------------------------------------------------------
r7316 | rmanfredi | 2004-11-09 15:58:54 -0500 (Tue, 09 Nov 2004) | 2 lines

Use new "pcache_debug" variable.

------------------------------------------------------------------------
r7315 | rmanfredi | 2004-11-09 15:56:22 -0500 (Tue, 09 Nov 2004) | 2 lines

Make sure they call us with an UDP queue.

------------------------------------------------------------------------
r7314 | rmanfredi | 2004-11-09 15:55:35 -0500 (Tue, 09 Nov 2004) | 2 lines

Forgot to alter host_count when moving hosts between caches.

------------------------------------------------------------------------
r7313 | rmanfredi | 2004-11-09 15:54:46 -0500 (Tue, 09 Nov 2004) | 2 lines

Added some debugging messages.

------------------------------------------------------------------------
r7312 | cbiere | 2004-11-09 14:28:20 -0500 (Tue, 09 Nov 2004) | 4 lines

gtk_progress_bar_set_text():
	Added as function instead of macro, to escape '%' when used as
	"percent". This shouldn't be handled manually at every occurence.

------------------------------------------------------------------------
r7311 | cbiere | 2004-11-09 14:05:59 -0500 (Tue, 09 Nov 2004) | 4 lines

Don't slap a plural-s onto translated strings.
set_host_progress():
	Don't handle subtle differences between GTK1 and GTK2 here.

------------------------------------------------------------------------
r7310 | cbiere | 2004-11-09 14:01:38 -0500 (Tue, 09 Nov 2004) | 2 lines

popup_nodes_remove is part of popup_nodes not popup_search.

------------------------------------------------------------------------
r7309 | cbiere | 2004-11-08 14:27:27 -0500 (Mon, 08 Nov 2004) | 2 lines

Queue fileinfo updates and drain them periodically.

------------------------------------------------------------------------
r7308 | graaff | 2004-11-08 14:23:36 -0500 (Mon, 08 Nov 2004) | 2 lines

Properly use filesize_t for file sizes.

------------------------------------------------------------------------
r7307 | rmanfredi | 2004-11-08 13:22:17 -0500 (Mon, 08 Nov 2004) | 2 lines

Fixed for() loop, again.

------------------------------------------------------------------------
r7306 | rmanfredi | 2004-11-08 13:13:22 -0500 (Mon, 08 Nov 2004) | 2 lines

Added spinbutton to configure GGEP debug.

------------------------------------------------------------------------
r7305 | rmanfredi | 2004-11-08 13:13:19 -0500 (Mon, 08 Nov 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7304 | rmanfredi | 2004-11-08 13:11:09 -0500 (Mon, 08 Nov 2004) | 2 lines

Fixed swapped statements in for().

------------------------------------------------------------------------
r7303 | rmanfredi | 2004-11-08 13:02:46 -0500 (Mon, 08 Nov 2004) | 2 lines

Plugged in spinbutton for GGEP debug config.

------------------------------------------------------------------------
r7302 | rmanfredi | 2004-11-08 13:02:28 -0500 (Mon, 08 Nov 2004) | 2 lines

Added spinbutton to configure GGEP debug.

------------------------------------------------------------------------
r7301 | rmanfredi | 2004-11-08 12:50:19 -0500 (Mon, 08 Nov 2004) | 2 lines

Replies to UDP host cache pings ("SCP") with "IPP" extension in pongs.

------------------------------------------------------------------------
r7300 | rmanfredi | 2004-11-08 12:01:42 -0500 (Mon, 08 Nov 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7299 | cbiere | 2004-11-08 11:50:03 -0500 (Mon, 08 Nov 2004) | 2 lines

Replaced % with percentage.

------------------------------------------------------------------------
r7298 | cbiere | 2004-11-08 11:44:30 -0500 (Mon, 08 Nov 2004) | 2 lines

Replaced % with percent.

------------------------------------------------------------------------
r7297 | rmanfredi | 2004-11-08 11:27:09 -0500 (Mon, 08 Nov 2004) | 2 lines

Signature of build_ping_msg() changed.

------------------------------------------------------------------------
r7296 | rmanfredi | 2004-11-08 10:56:16 -0500 (Mon, 08 Nov 2004) | 2 lines

Added some spacing in code to make it more readable.

------------------------------------------------------------------------
r7295 | rmanfredi | 2004-11-08 10:54:46 -0500 (Mon, 08 Nov 2004) | 2 lines

Added computation of "version code" for GGEP "VC".

------------------------------------------------------------------------
r7294 | rmanfredi | 2004-11-08 10:52:52 -0500 (Mon, 08 Nov 2004) | 2 lines

Signature of build_ping_msg() changed.

------------------------------------------------------------------------
r7293 | rmanfredi | 2004-11-08 10:52:35 -0500 (Mon, 08 Nov 2004) | 2 lines

Added debugging dumps for trailer GGEP extensions in query hits.

------------------------------------------------------------------------
r7292 | rmanfredi | 2004-11-08 10:51:50 -0500 (Mon, 08 Nov 2004) | 2 lines

ggep_lf_encode() was renamed ggept_lf_encode().

------------------------------------------------------------------------
r7291 | rmanfredi | 2004-11-08 10:51:01 -0500 (Mon, 08 Nov 2004) | 3 lines

Now parses GGEP extensions in "fat" pongs and saves them in the pong cache.
Emit "fat" pongs for ourselves unless we're replying to an "alive" ping.

------------------------------------------------------------------------
r7290 | rmanfredi | 2004-11-08 10:35:54 -0500 (Mon, 08 Nov 2004) | 3 lines

Now parses GGEP extensions in "fat" pings, pongs and pushes and save them
into the node.

------------------------------------------------------------------------
r7289 | rmanfredi | 2004-11-08 10:31:58 -0500 (Mon, 08 Nov 2004) | 2 lines

Added ggep[] markers to ease generation of "fat" pings, pongs and pushes.

------------------------------------------------------------------------
r7288 | rmanfredi | 2004-11-08 10:30:40 -0500 (Mon, 08 Nov 2004) | 4 lines

Added gmsg_ctrl_sendto_one_ggep(), gmsg_sendto_all_ggep() and
gmsg_sendto_one_ggep().
Moved gmsg_check_ggep() to nodes.c.

------------------------------------------------------------------------
r7287 | rmanfredi | 2004-11-08 10:26:46 -0500 (Mon, 08 Nov 2004) | 3 lines

Renamed ggep_lf_encode() as ggept_lf_encode().
Added ggept_du_*() routines.

------------------------------------------------------------------------
r7286 | rmanfredi | 2004-11-08 10:25:35 -0500 (Mon, 08 Nov 2004) | 2 lines

Updated Copyright date.

------------------------------------------------------------------------
r7285 | rmanfredi | 2004-11-08 10:24:39 -0500 (Mon, 08 Nov 2004) | 2 lines

Added missing GGEP extension "GUE".

------------------------------------------------------------------------
r7284 | rmanfredi | 2004-11-08 09:30:11 -0500 (Mon, 08 Nov 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7283 | rmanfredi | 2004-11-08 09:29:23 -0500 (Mon, 08 Nov 2004) | 3 lines

Now that getdate.c is in CVS, we no longer depend on yacc to build.
We therefore must not remove getdate.c during "realclean".

------------------------------------------------------------------------
r7282 | rmanfredi | 2004-11-08 06:32:39 -0500 (Mon, 08 Nov 2004) | 2 lines

No longer need to compute INTSIZE.

------------------------------------------------------------------------
r7281 | rmanfredi | 2004-11-08 06:31:33 -0500 (Mon, 08 Nov 2004) | 2 lines

Use an union to ensure `arena' is properly aligned.

------------------------------------------------------------------------
r7280 | rmanfredi | 2004-11-08 05:22:42 -0500 (Mon, 08 Nov 2004) | 2 lines

Replaced a g_assert() with a STATIC_ASSERT().

------------------------------------------------------------------------
r7279 | rmanfredi | 2004-11-08 05:22:12 -0500 (Mon, 08 Nov 2004) | 2 lines

Let Configure determine memory alignment requirements.

------------------------------------------------------------------------
r7278 | rmanfredi | 2004-11-08 05:20:58 -0500 (Mon, 08 Nov 2004) | 2 lines

Make sure atom's arena is properly aligned.

------------------------------------------------------------------------
r7277 | rmanfredi | 2004-11-08 05:19:59 -0500 (Mon, 08 Nov 2004) | 2 lines

Moved STATIC_ASSERT() to "common.h".

------------------------------------------------------------------------
r7276 | rmanfredi | 2004-11-08 05:18:24 -0500 (Mon, 08 Nov 2004) | 2 lines

Use MEM_ALIGNBYTES to let Configure compute the proper memory alignment.

------------------------------------------------------------------------
r7275 | rmanfredi | 2004-11-08 01:30:21 -0500 (Mon, 08 Nov 2004) | 3 lines

According to the "LF" specs, size must be escaped to ~0 when the file size
is greater than 2^31-1.

------------------------------------------------------------------------
r7274 | rmanfredi | 2004-11-07 16:32:32 -0500 (Sun, 07 Nov 2004) | 2 lines

Converted GGEP extension generation to the new streaming interface.

------------------------------------------------------------------------
r7273 | rmanfredi | 2004-11-07 16:31:32 -0500 (Sun, 07 Nov 2004) | 2 lines

New streaming interface to generate GGEP extensions replaces older one.

------------------------------------------------------------------------
r7272 | rmanfredi | 2004-11-07 16:29:43 -0500 (Sun, 07 Nov 2004) | 2 lines

Added the "ggep_debug" property.

------------------------------------------------------------------------
r7271 | rmanfredi | 2004-11-07 16:07:35 -0500 (Sun, 07 Nov 2004) | 2 lines

Allow COBS to perform streaming operations.

------------------------------------------------------------------------
r7270 | rmanfredi | 2004-11-07 16:07:14 -0500 (Sun, 07 Nov 2004) | 2 lines

Added separation in hex dump each 8 bytes.

------------------------------------------------------------------------
r7269 | rmanfredi | 2004-11-07 16:06:02 -0500 (Sun, 07 Nov 2004) | 3 lines

Allow zlib_deflater to perform deflation into a supplied buffer.
Keep track of the amount of input we see for incremental deflation.

------------------------------------------------------------------------
r7268 | graaff | 2004-11-07 09:52:08 -0500 (Sun, 07 Nov 2004) | 2 lines

Show arrows in visual progress where downloads are active.

------------------------------------------------------------------------
r7267 | rmanfredi | 2004-11-07 04:26:51 -0500 (Sun, 07 Nov 2004) | 2 lines

Added extra assertions.

------------------------------------------------------------------------
r7266 | rmanfredi | 2004-11-06 15:58:45 -0500 (Sat, 06 Nov 2004) | 2 lines

Implemented deflation of GGEP payloads on write (GGEP_W_DEFLATE).

------------------------------------------------------------------------
r7265 | rmanfredi | 2004-11-06 15:52:12 -0500 (Sat, 06 Nov 2004) | 4 lines

Added zlib_deflate_data() and zlib_deflate_close() for incremental
compression when the input is not made of contiguous data, or when the
whole data is not available yet.

------------------------------------------------------------------------
r7264 | rmanfredi | 2004-11-06 13:07:00 -0500 (Sat, 06 Nov 2004) | 2 lines

Update average IP uptime at exit time as well.

------------------------------------------------------------------------
r7263 | rmanfredi | 2004-11-06 13:06:30 -0500 (Sat, 06 Nov 2004) | 2 lines

Added leading comments to ggept_lf_extract() and ggep_lf_encode().

------------------------------------------------------------------------
r7262 | rmanfredi | 2004-11-06 13:05:54 -0500 (Sat, 06 Nov 2004) | 2 lines

Added comments for each listed GGEP ID.

------------------------------------------------------------------------
r7261 | cbiere | 2004-11-06 09:30:09 -0500 (Sat, 06 Nov 2004) | 2 lines

Emphasize how the variable-length encoding works i.e., discarding NUL bytes.

------------------------------------------------------------------------
r7260 | cbiere | 2004-11-06 08:32:29 -0500 (Sat, 06 Nov 2004) | 2 lines

Print the filesize as a 64-bit integer in the details pane.

------------------------------------------------------------------------
r7259 | cbiere | 2004-11-06 08:23:34 -0500 (Sat, 06 Nov 2004) | 3 lines

Commented out two ranges already included in 38.112.0.0/19. I think the code
is wrong to complain about this.

------------------------------------------------------------------------
r7258 | cbiere | 2004-11-06 07:51:22 -0500 (Sat, 06 Nov 2004) | 2 lines

The vendor string wasn't guaranteed to be UTF-8 encoded.

------------------------------------------------------------------------
r7257 | cbiere | 2004-11-06 07:50:05 -0500 (Sat, 06 Nov 2004) | 2 lines

Updated code due to change of the GGEP LF specs.

------------------------------------------------------------------------
r7256 | cbiere | 2004-11-06 07:45:51 -0500 (Sat, 06 Nov 2004) | 3 lines

Use COBS instead of custom 7-bit encoding.
Fixed typos.

------------------------------------------------------------------------
r7255 | cbiere | 2004-11-05 13:20:19 -0500 (Fri, 05 Nov 2004) | 2 lines

Minimal rewording.

------------------------------------------------------------------------
r7254 | cbiere | 2004-11-05 13:14:36 -0500 (Fri, 05 Nov 2004) | 3 lines

too_big_for_gnutella():
	Bumped the upper limit to (2^63) - 1 due to GGEP LF support.

------------------------------------------------------------------------
r7253 | cbiere | 2004-11-05 13:12:52 -0500 (Fri, 05 Nov 2004) | 2 lines

Added support for GGEP LF.

------------------------------------------------------------------------
r7252 | cbiere | 2004-11-05 13:12:01 -0500 (Fri, 05 Nov 2004) | 3 lines

Added support for GGEP LF.
Fixed marking of first/last GGEP extension.

------------------------------------------------------------------------
r7251 | cbiere | 2004-11-05 13:10:51 -0500 (Fri, 05 Nov 2004) | 2 lines

Added ggept_lf_extract() and ggep_lf_encode().

------------------------------------------------------------------------
r7250 | cbiere | 2004-11-05 13:09:59 -0500 (Fri, 05 Nov 2004) | 3 lines

Style fixes.
Added ggept_lf_extract() and ggep_lf_encode().

------------------------------------------------------------------------
r7249 | cbiere | 2004-11-05 13:09:02 -0500 (Fri, 05 Nov 2004) | 2 lines

Added known-but-not-yet-handled GGEP IDs.

------------------------------------------------------------------------
r7248 | cbiere | 2004-11-05 13:08:08 -0500 (Fri, 05 Nov 2004) | 3 lines

Added const-qualifier to rwtable.rw_name.
Simplified ``ggeptable''.

------------------------------------------------------------------------
r7247 | cbiere | 2004-11-05 08:36:21 -0500 (Fri, 05 Nov 2004) | 2 lines

Added 38.112.0.0/12 due to GWebCache polling and spamming.

------------------------------------------------------------------------
r7246 | cbiere | 2004-11-04 23:49:08 -0500 (Thu, 04 Nov 2004) | 2 lines

Changed the byte order to little-endian and simplied the example code.

------------------------------------------------------------------------
r7245 | cbiere | 2004-11-04 15:34:17 -0500 (Thu, 04 Nov 2004) | 2 lines

Removed deprecated draft.

------------------------------------------------------------------------
r7244 | cbiere | 2004-11-04 15:32:48 -0500 (Thu, 04 Nov 2004) | 2 lines

Added GGEP extension LF.

------------------------------------------------------------------------
r7243 | rmanfredi | 2004-11-03 02:25:41 -0500 (Wed, 03 Nov 2004) | 2 lines

Removed spurious trailing ';' in large file test.

------------------------------------------------------------------------
r7242 | rmanfredi | 2004-11-01 10:57:46 -0500 (Mon, 01 Nov 2004) | 2 lines

Don't kick out nodes for relaying high TTL routed messages.

------------------------------------------------------------------------
r7241 | rmanfredi | 2004-11-01 10:46:33 -0500 (Mon, 01 Nov 2004) | 2 lines

Integrated GTK1 patch from Alex to display feedback on Bitzi query queuing.

------------------------------------------------------------------------
r7240 | rmanfredi | 2004-11-01 08:25:45 -0500 (Mon, 01 Nov 2004) | 2 lines

Added magic number for the iterator, and check magic systematically.

------------------------------------------------------------------------
r7239 | rmanfredi | 2004-10-31 15:23:49 -0500 (Sun, 31 Oct 2004) | 2 lines

Version of 2004-10-31.

------------------------------------------------------------------------
r7238 | rmanfredi | 2004-10-31 15:17:16 -0500 (Sun, 31 Oct 2004) | 3 lines

Re-ordered NODE_P_XXX constants to ensure proper transition now that the
NODE_P_NORMAL mode cannot be chosen from the GUI, nor used in the configs.

------------------------------------------------------------------------
r7237 | rmanfredi | 2004-10-31 15:16:20 -0500 (Sun, 31 Oct 2004) | 4 lines

Disallowed the choice of "legacy mode".
Now use constants from "if/core/nodes.h" for defining the configured_peermode
property.

------------------------------------------------------------------------
r7236 | rmanfredi | 2004-10-31 15:14:33 -0500 (Sun, 31 Oct 2004) | 2 lines

Typo fix.

------------------------------------------------------------------------
r7235 | rmanfredi | 2004-10-31 15:13:03 -0500 (Sun, 31 Oct 2004) | 5 lines

Converted host cache to the use of hash lists, and added save routine.
When inserting a host in the busy/unstable/timeout caches, remove it from
the other host/ultra caches.
Don't add bogons/hostiles to the cache.

------------------------------------------------------------------------
r7234 | rmanfredi | 2004-10-31 15:10:22 -0500 (Sun, 31 Oct 2004) | 3 lines

Move bogons and hostiles closing after host_close() since the cache can be
updated during the closing, and the cache now uses bogons and hostiles.

------------------------------------------------------------------------
r7233 | rmanfredi | 2004-10-31 15:09:14 -0500 (Sun, 31 Oct 2004) | 2 lines

Added some "else if" to mark mutually exclusive code.

------------------------------------------------------------------------
r7232 | rmanfredi | 2004-10-31 15:08:37 -0500 (Sun, 31 Oct 2004) | 2 lines

Changed the interface for hashlist iterators.

------------------------------------------------------------------------
r7231 | cbiere | 2004-10-31 06:05:51 -0500 (Sun, 31 Oct 2004) | 2 lines

Applied Alex Bennee's patch to show that a bitzi lookup is in progress.

------------------------------------------------------------------------
r7230 | cbiere | 2004-10-31 06:00:49 -0500 (Sun, 31 Oct 2004) | 2 lines

Centered title "page".

------------------------------------------------------------------------
r7229 | cbiere | 2004-10-30 19:39:19 -0400 (Sat, 30 Oct 2004) | 2 lines

Refreshed.

------------------------------------------------------------------------
r7228 | rmanfredi | 2004-10-29 13:49:52 -0400 (Fri, 29 Oct 2004) | 2 lines

Added new cache at gcache.shacknet.nu:8088/gwc.

------------------------------------------------------------------------
r7227 | cbiere | 2004-10-28 23:31:24 -0400 (Thu, 28 Oct 2004) | 2 lines

Rodage is dead, long live Kisama.

------------------------------------------------------------------------
r7226 | cbiere | 2004-10-28 23:29:06 -0400 (Thu, 28 Oct 2004) | 2 lines

Updated list of bootstrap GWebCaches.

------------------------------------------------------------------------
r7225 | rmanfredi | 2004-10-28 18:26:46 -0400 (Thu, 28 Oct 2004) | 2 lines

Added minimal comments.

------------------------------------------------------------------------
r7224 | rmanfredi | 2004-10-27 17:00:31 -0400 (Wed, 27 Oct 2004) | 3 lines

When they say they're running NTP, trust them as far as the clock skew
goes, but don't advertise NTP unless we detect it.

------------------------------------------------------------------------
r7223 | rmanfredi | 2004-10-27 16:59:16 -0400 (Wed, 27 Oct 2004) | 3 lines

New property "ntp_detected" to track whether we detected NTP or not.
Raised default TCP RX buffers for downloads and gnet to 64K and 16K.

------------------------------------------------------------------------
r7222 | rmanfredi | 2004-10-26 18:34:55 -0400 (Tue, 26 Oct 2004) | 2 lines

Version of 2004-10-26.

------------------------------------------------------------------------
r7221 | rmanfredi | 2004-10-26 18:20:37 -0400 (Tue, 26 Oct 2004) | 2 lines

Forgot type declaration for saved_errno.

------------------------------------------------------------------------
r7220 | cbiere | 2004-10-26 16:15:28 -0400 (Tue, 26 Oct 2004) | 2 lines

pos must be initialized before passing it to bio_sendfile().

------------------------------------------------------------------------
r7219 | cbiere | 2004-10-26 15:55:43 -0400 (Tue, 26 Oct 2004) | 4 lines

log_handler():
	Preserve ``errno'' in case someone depends on errno not being
	changed by g_warning/g_message.

------------------------------------------------------------------------
r7218 | rmanfredi | 2004-10-26 15:33:50 -0400 (Tue, 26 Oct 2004) | 2 lines

Unrolled the four rotation loops, yielding another 10 to 15% gain.

------------------------------------------------------------------------
r7217 | rmanfredi | 2004-10-26 13:02:18 -0400 (Tue, 26 Oct 2004) | 2 lines

Optimized SHA1 computation (~10% gains with -O2, 20% with -O0 on a P3).

------------------------------------------------------------------------
r7216 | cbiere | 2004-10-26 12:45:24 -0400 (Tue, 26 Oct 2004) | 2 lines

Added missing semi-colon after break statement.

------------------------------------------------------------------------
r7215 | cbiere | 2004-10-25 19:06:26 -0400 (Mon, 25 Oct 2004) | 2 lines

Added missing casts to fulfill format string expectations.

------------------------------------------------------------------------
r7214 | cbiere | 2004-10-25 18:04:07 -0400 (Mon, 25 Oct 2004) | 4 lines

download_selected_file():
	Instead of adding each child iter, the parent was added multiple times.
	(Fixed)

------------------------------------------------------------------------
r7213 | rmanfredi | 2004-10-25 17:51:28 -0400 (Mon, 25 Oct 2004) | 2 lines

Added declaration of binary_hash().

------------------------------------------------------------------------
r7212 | rmanfredi | 2004-10-25 17:46:13 -0400 (Mon, 25 Oct 2004) | 3 lines

Fixed node_tsync_udp() to never call node_udp_get_ip_port() to setup an
UDP node if UDP is not otherwise enabled.

------------------------------------------------------------------------
r7211 | cbiere | 2004-10-25 17:43:06 -0400 (Mon, 25 Oct 2004) | 2 lines

Include atoms.h for prototype of binary_hash().

------------------------------------------------------------------------
r7210 | cbiere | 2004-10-25 17:40:11 -0400 (Mon, 25 Oct 2004) | 2 lines

Fixed parameters of bio_sendfile(): Must pass off_t as 3rd parameter.

------------------------------------------------------------------------
r7209 | cbiere | 2004-10-25 17:18:26 -0400 (Mon, 25 Oct 2004) | 3 lines

nodes_gui_common_status_str():
	Removed unused parameter ``now''.

------------------------------------------------------------------------
r7208 | cbiere | 2004-10-25 16:59:46 -0400 (Mon, 25 Oct 2004) | 3 lines

Moved parsing of entered query strings to search_gui_parse_query().
Emit a statusbar warning if there was no valid SHA1.

------------------------------------------------------------------------
r7207 | rmanfredi | 2004-10-25 15:30:49 -0400 (Mon, 25 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7206 | cbiere | 2004-10-25 15:26:52 -0400 (Mon, 25 Oct 2004) | 2 lines

Changed the check for largefile support so that it works with cross-compiling.

------------------------------------------------------------------------
r7205 | rmanfredi | 2004-10-25 12:25:39 -0400 (Mon, 25 Oct 2004) | 2 lines

Removed Philippe Verdy's cache from the bootstrap list.

------------------------------------------------------------------------
r7204 | cbiere | 2004-10-25 12:20:59 -0400 (Mon, 25 Oct 2004) | 3 lines

Marked unused function parameters.
Style fixes.

------------------------------------------------------------------------
r7203 | cbiere | 2004-10-25 12:10:35 -0400 (Mon, 25 Oct 2004) | 3 lines

Marked unused function parameters.
Style fixes.

------------------------------------------------------------------------
r7202 | cbiere | 2004-10-25 12:05:00 -0400 (Mon, 25 Oct 2004) | 2 lines

Marked unused function parameters.

------------------------------------------------------------------------
r7201 | cbiere | 2004-10-25 11:36:02 -0400 (Mon, 25 Oct 2004) | 2 lines

Marked unused function parameters.

------------------------------------------------------------------------
r7200 | cbiere | 2004-10-25 11:29:49 -0400 (Mon, 25 Oct 2004) | 2 lines

Marked unused function parameters.

------------------------------------------------------------------------
r7199 | cbiere | 2004-10-25 11:26:49 -0400 (Mon, 25 Oct 2004) | 5 lines

Parse and write filesizes as 64-bit values.
Respect the exact number of spaces used as filenames might have leading
	spaces which must not be skipped.
Style fixes.

------------------------------------------------------------------------
r7198 | rmanfredi | 2004-10-25 10:42:49 -0400 (Mon, 25 Oct 2004) | 2 lines

Regenerated Configure for largefile support.

------------------------------------------------------------------------
r7197 | cbiere | 2004-10-25 10:36:16 -0400 (Mon, 25 Oct 2004) | 2 lines

Marked unused function parameters.

------------------------------------------------------------------------
r7196 | rmanfredi | 2004-10-25 10:36:06 -0400 (Mon, 25 Oct 2004) | 2 lines

Created.

------------------------------------------------------------------------
r7195 | cbiere | 2004-10-25 10:33:40 -0400 (Mon, 25 Oct 2004) | 2 lines

Marked unused functions parameters.

------------------------------------------------------------------------
r7194 | cbiere | 2004-10-25 09:41:59 -0400 (Mon, 25 Oct 2004) | 4 lines

Addresses bug #735902:
	Fall back to write() if sendfile() fails with EOPNOTSUPP in case
	the underlying filesystem or device doesn't support it.

------------------------------------------------------------------------
r7193 | cbiere | 2004-10-25 09:39:47 -0400 (Mon, 25 Oct 2004) | 2 lines

Added some casts and assertions as clean-up.

------------------------------------------------------------------------
r7192 | cbiere | 2004-10-25 09:03:47 -0400 (Mon, 25 Oct 2004) | 3 lines

Added const where appropriate.
Style fixes.

------------------------------------------------------------------------
r7191 | cbiere | 2004-10-25 08:54:29 -0400 (Mon, 25 Oct 2004) | 2 lines

seenonnetwork -> seen_on_network.

------------------------------------------------------------------------
r7190 | cbiere | 2004-10-25 08:53:01 -0400 (Mon, 25 Oct 2004) | 4 lines

seenonnetwork -> seen_on_network.
Bumped FILE_INFO_VERSION to 6 and created new magic for full
	support of 64-bit filesizes.

------------------------------------------------------------------------
r7189 | cbiere | 2004-10-25 03:30:15 -0400 (Mon, 25 Oct 2004) | 3 lines

Marked unused function parameters.
Style fixes

------------------------------------------------------------------------
r7188 | cbiere | 2004-10-25 03:25:50 -0400 (Mon, 25 Oct 2004) | 6 lines

nodes_gui_reverse_lookup_selected_helper():
	Use ``ht_pending_lookups'' to check whether there's a pending lookup.
	Allow further lookups.
host_lookup_callback():
	Don't emit warnings for normal events.

------------------------------------------------------------------------
r7187 | cbiere | 2004-10-25 03:02:20 -0400 (Mon, 25 Oct 2004) | 3 lines

parse_and_append_cache_entry():
	Forgot to skip the tab after the sha1.

------------------------------------------------------------------------
r7186 | cbiere | 2004-10-25 02:51:50 -0400 (Mon, 25 Oct 2004) | 2 lines

Use filesize_t for filesizes and ranges.

------------------------------------------------------------------------
r7185 | cbiere | 2004-10-25 02:49:37 -0400 (Mon, 25 Oct 2004) | 3 lines

Read the filesize from sha1_cache as 64-bit value.
Use size_t for chunk/array sizes.

------------------------------------------------------------------------
r7184 | cbiere | 2004-10-25 02:17:45 -0400 (Mon, 25 Oct 2004) | 2 lines

Share regular files only.

------------------------------------------------------------------------
r7183 | cbiere | 2004-10-25 02:10:54 -0400 (Mon, 25 Oct 2004) | 3 lines

Fixed typo in comment.
Added suggestion regarding translating the country names.

------------------------------------------------------------------------
r7182 | cbiere | 2004-10-25 00:43:30 -0400 (Mon, 25 Oct 2004) | 2 lines

Use ssize_t and size_t instead of gint.

------------------------------------------------------------------------
r7181 | cbiere | 2004-10-25 00:41:43 -0400 (Mon, 25 Oct 2004) | 2 lines

short_kb_size64() is now short_kb_size().

------------------------------------------------------------------------
r7180 | cbiere | 2004-10-25 00:29:16 -0400 (Mon, 25 Oct 2004) | 3 lines

Replaced short_size(), short_kb_size(), compact_size() with their respective
	64-bit equivalents.

------------------------------------------------------------------------
r7179 | cbiere | 2004-10-25 00:24:55 -0400 (Mon, 25 Oct 2004) | 5 lines

Use ssize_t and size_t where applicable.
The fileindex should be sent as an unsigned value.
upload_write():
	Fixed upload of large files (guint32 -> filesize_t).

------------------------------------------------------------------------
r7178 | cbiere | 2004-10-25 00:21:53 -0400 (Mon, 25 Oct 2004) | 2 lines

Use delta_time().

------------------------------------------------------------------------
r7177 | cbiere | 2004-10-25 00:19:49 -0400 (Mon, 25 Oct 2004) | 5 lines

Use delta_time().
Use ssize_t and size_t instead of gint where applicable.
Fixed and moved the parsing of Content-Range headers to core/http.c.
Fixed download of large files (gint32 -> filesize_t).

------------------------------------------------------------------------
r7176 | cbiere | 2004-10-24 23:47:50 -0400 (Sun, 24 Oct 2004) | 3 lines

Style fixes.
Reenabled custom sort functions.

------------------------------------------------------------------------
r7175 | cbiere | 2004-10-24 23:45:38 -0400 (Sun, 24 Oct 2004) | 2 lines

[GTK2] Fixed sort order of the columns at Downloads->Files.

------------------------------------------------------------------------
r7174 | cbiere | 2004-10-24 23:41:13 -0400 (Sun, 24 Oct 2004) | 3 lines

socket_read():
	Use ssize_t and size_t instead of gint.

------------------------------------------------------------------------
r7173 | cbiere | 2004-10-24 23:39:26 -0400 (Sun, 24 Oct 2004) | 3 lines

io_read_data():
	Use ssize_t and size_t instead of gint.

------------------------------------------------------------------------
r7172 | cbiere | 2004-10-24 23:36:01 -0400 (Sun, 24 Oct 2004) | 2 lines

Added ``http_content_range_parse'' to parse the Content-Range header.

------------------------------------------------------------------------
r7171 | cbiere | 2004-10-24 20:52:09 -0400 (Sun, 24 Oct 2004) | 3 lines

Removed the now unused ``update_toggle_search_autoselect''.
[GTK1] Removed dead reference to ``frame_expert_search_autoselect''.

------------------------------------------------------------------------
r7170 | cbiere | 2004-10-24 20:29:23 -0400 (Sun, 24 Oct 2004) | 2 lines

Added src/lib/getdate.c to repository to reduce potential build problems.

------------------------------------------------------------------------
r7169 | cbiere | 2004-10-24 20:19:56 -0400 (Sun, 24 Oct 2004) | 3 lines

Replaced sent_node_data with gnet_host_t.
Minor style fixes.

------------------------------------------------------------------------
r7168 | cbiere | 2004-10-24 19:16:59 -0400 (Sun, 24 Oct 2004) | 4 lines

node_udp_get_ip_port():
	Added g_return_val_if_fail() as bug workaround. Not sure whether the
	bug shouldn't be fixed elsewhere.

------------------------------------------------------------------------
r7167 | cbiere | 2004-10-24 19:11:40 -0400 (Sun, 24 Oct 2004) | 2 lines

Look for ASCII digits and spaces only.

------------------------------------------------------------------------
r7166 | cbiere | 2004-10-24 18:56:38 -0400 (Sun, 24 Oct 2004) | 2 lines

Use CMP().

------------------------------------------------------------------------
r7165 | cbiere | 2004-10-23 22:18:09 -0400 (Sat, 23 Oct 2004) | 4 lines

compare_size_func():
	Use g_return_val_if_fail() because there seems to be something broken
	but I can't see what.

------------------------------------------------------------------------
r7164 | cbiere | 2004-10-23 21:48:11 -0400 (Sat, 23 Oct 2004) | 3 lines

Converted filesizes to filesize_t (64-bit).
FIXME: The trailer does still use 32-bit values at the moment.

------------------------------------------------------------------------
r7163 | cbiere | 2004-10-23 21:46:19 -0400 (Sat, 23 Oct 2004) | 2 lines

Converted filesizes to filesize_t (64-bit).

------------------------------------------------------------------------
r7162 | cbiere | 2004-10-23 21:44:52 -0400 (Sat, 23 Oct 2004) | 2 lines

Changed definition of QUERY_FW2FW_FILE_INDEX to hex representation.

------------------------------------------------------------------------
r7161 | cbiere | 2004-10-23 21:43:53 -0400 (Sat, 23 Oct 2004) | 2 lines

Use size_t instead of gint.

------------------------------------------------------------------------
r7160 | cbiere | 2004-10-23 21:34:24 -0400 (Sat, 23 Oct 2004) | 2 lines

Converted filesizes to filesize_t (64-bit).

------------------------------------------------------------------------
r7159 | cbiere | 2004-10-23 21:25:29 -0400 (Sat, 23 Oct 2004) | 2 lines

Converted filesizes to filesize_t (64-bit).

------------------------------------------------------------------------
r7158 | cbiere | 2004-10-23 21:18:29 -0400 (Sat, 23 Oct 2004) | 3 lines

Moved CONST_STRLEN() to misc.h.
Converted filesizes to filesize_t (64-bit).

------------------------------------------------------------------------
r7157 | cbiere | 2004-10-23 21:11:13 -0400 (Sat, 23 Oct 2004) | 4 lines

atoms.[ch] does now export hash/equality functions.
Converted filesizes to filesize_t (64-bit).
Style fixes.

------------------------------------------------------------------------
r7156 | cbiere | 2004-10-23 21:03:04 -0400 (Sat, 23 Oct 2004) | 3 lines

ATOM_INT is dead, long live ATOM_UINT64!
Export all hash functions and equality tests, there's no sense in hiding them.

------------------------------------------------------------------------
r7155 | cbiere | 2004-10-23 20:14:45 -0400 (Sat, 23 Oct 2004) | 4 lines

Use filesize_t instead of guint32.
Restrict character checks to the ASCII set.
Cleanups.

------------------------------------------------------------------------
r7154 | cbiere | 2004-10-23 20:08:03 -0400 (Sat, 23 Oct 2004) | 2 lines

Use ssize_t/size_t instead of gint where appropriate.

------------------------------------------------------------------------
r7153 | cbiere | 2004-10-23 20:06:38 -0400 (Sat, 23 Oct 2004) | 2 lines

Minor cleanup.

------------------------------------------------------------------------
r7152 | cbiere | 2004-10-23 20:05:55 -0400 (Sat, 23 Oct 2004) | 4 lines

Use walloc() instead of g_malloc().
Use CMP().
A fixed size buffer is completely sufficient for ``bitzi_url''.

------------------------------------------------------------------------
r7151 | cbiere | 2004-10-23 20:02:35 -0400 (Sat, 23 Oct 2004) | 2 lines

Use filesize_t instead of guint32.

------------------------------------------------------------------------
r7150 | cbiere | 2004-10-23 20:00:09 -0400 (Sat, 23 Oct 2004) | 2 lines

Show the filesize as 64-bit value.

------------------------------------------------------------------------
r7149 | cbiere | 2004-10-23 19:54:30 -0400 (Sat, 23 Oct 2004) | 2 lines

Removed unused variable ``toplevel''.

------------------------------------------------------------------------
r7148 | cbiere | 2004-10-23 15:25:58 -0400 (Sat, 23 Oct 2004) | 3 lines

Added draft of the GGEP extension "FS64" to add support for files larger than
2 respectively 4 GiB.

------------------------------------------------------------------------
r7147 | wyldfire | 2004-10-23 11:19:15 -0400 (Sat, 23 Oct 2004) | 2 lines

no comment

------------------------------------------------------------------------
r7146 | wyldfire | 2004-10-23 11:16:14 -0400 (Sat, 23 Oct 2004) | 2 lines

Press "del" to discard search results, in GTK1 too now.

------------------------------------------------------------------------
r7145 | cbiere | 2004-10-23 11:07:19 -0400 (Sat, 23 Oct 2004) | 2 lines

Added vi indent tags.

------------------------------------------------------------------------
r7144 | cbiere | 2004-10-23 11:05:50 -0400 (Sat, 23 Oct 2004) | 3 lines

Added filesize_t so we can clearly differ between filesizes and other
	(general-purpose) integers.

------------------------------------------------------------------------
r7143 | cbiere | 2004-10-23 11:04:10 -0400 (Sat, 23 Oct 2004) | 2 lines

Moved guint64_to_LE() to endian.h and added further 64-bit macros.

------------------------------------------------------------------------
r7142 | cbiere | 2004-10-23 11:01:38 -0400 (Sat, 23 Oct 2004) | 2 lines

Added skip_ascii_spaces() to get rid of ugly explicit loops.

------------------------------------------------------------------------
r7141 | wyldfire | 2004-10-23 10:03:10 -0400 (Sat, 23 Oct 2004) | 2 lines

no comment

------------------------------------------------------------------------
r7140 | wyldfire | 2004-10-23 09:58:06 -0400 (Sat, 23 Oct 2004) | 2 lines

Removed search_gui_autoselect_cmp, which is no longer used.

------------------------------------------------------------------------
r7139 | wyldfire | 2004-10-23 09:57:04 -0400 (Sat, 23 Oct 2004) | 2 lines

Removed autoselection properties.

------------------------------------------------------------------------
r7138 | wyldfire | 2004-10-23 09:51:47 -0400 (Sat, 23 Oct 2004) | 3 lines

Removed autoselection settings from the search pane. Autoselection now only happens for
  whole branches and can not be configured.

------------------------------------------------------------------------
r7137 | wyldfire | 2004-10-23 09:48:36 -0400 (Sat, 23 Oct 2004) | 2 lines

Removed autoselection properties.

------------------------------------------------------------------------
r7136 | cbiere | 2004-10-23 00:12:08 -0400 (Sat, 23 Oct 2004) | 2 lines

Use size_t instead of int for buffer lengths.

------------------------------------------------------------------------
r7135 | cbiere | 2004-10-23 00:10:46 -0400 (Sat, 23 Oct 2004) | 7 lines

Style fixes.
get_average_ip_lifetime():
get_average_servent_uptime():
	The difference of two time_t values has NOT type time_t. Use time_t
	for time*stamps* only.
Marked unused parameters or used them for assertions.

------------------------------------------------------------------------
r7134 | cbiere | 2004-10-23 00:04:05 -0400 (Sat, 23 Oct 2004) | 4 lines

[GTK2] Made the search stats sortable (again).
Style fixes.
Use a string atom instead of hashtable containing strings.

------------------------------------------------------------------------
r7133 | cbiere | 2004-10-23 00:01:02 -0400 (Sat, 23 Oct 2004) | 3 lines

Style fixes.
Marked unused function parameters.

------------------------------------------------------------------------
r7132 | cbiere | 2004-10-22 23:57:38 -0400 (Fri, 22 Oct 2004) | 13 lines

Style fixes.
Use const where possible.
Don't use g_int_hash/g_int_equal, just use GPOINTER_TO_UINT/GUINT_TO_POINTER.
Renamed ``parq_banned_source'' to ``ht_banned_source'' because there's also
	parq_banned_sources. (Note the trailing s).
get_integer():
	Use the supreme parse_uint64() instead of strtoul().
Use g_message() instead of printf().
parq_upload_find_id():
	Removed unused parameter ``u''.
get_header_value():
	Changed type of ``length'' to size_t.

------------------------------------------------------------------------
r7131 | cbiere | 2004-10-22 23:48:58 -0400 (Fri, 22 Oct 2004) | 10 lines

node_keep_missing():
node_missing():
	Changed return type as these return only non-negative values.
node_timer():
	The difference of two time_t values has NOT type time_t. Use time_t
	for *timestamps* only.
In switch statements using an enum as condition, do not use a ``default''
	case, so that all switch statements can be fixed if the enum space
	changes and no case gets forgotten.

------------------------------------------------------------------------
r7130 | cbiere | 2004-10-22 23:43:23 -0400 (Fri, 22 Oct 2004) | 3 lines

Changed definition of ``http_op_request_t'':
	Use const and size_t.

------------------------------------------------------------------------
r7129 | cbiere | 2004-10-22 23:41:41 -0400 (Fri, 22 Oct 2004) | 3 lines

download_store():
	Use const.

------------------------------------------------------------------------
r7128 | cbiere | 2004-10-22 23:20:03 -0400 (Fri, 22 Oct 2004) | 3 lines

Don't send the optional "file" parameter in push proxy requests. Some
LimeWires return "Malformed Request" if used.

------------------------------------------------------------------------
r7127 | cbiere | 2004-10-22 18:31:35 -0400 (Fri, 22 Oct 2004) | 3 lines

Fixed blunt oversights of the dq->queried conversion key conversion
	to use straight ints instead of atoms.

------------------------------------------------------------------------
r7126 | cbiere | 2004-10-21 21:12:01 -0400 (Thu, 21 Oct 2004) | 2 lines

[GTK2] Added prototype for search_gui_discard_files().

------------------------------------------------------------------------
r7125 | cbiere | 2004-10-21 20:59:44 -0400 (Thu, 21 Oct 2004) | 2 lines

Remove selected search results if the user hits the ``delete key''.

------------------------------------------------------------------------
r7124 | cbiere | 2004-10-21 20:58:29 -0400 (Thu, 21 Oct 2004) | 7 lines

Record pending lookups in ``ht_pending_lookups'' to handle the case in
	which the callback goes off after the GUI has shutdown or the
	concerned row has been removed and the node ID already been
	recycled.
Style fixes.
Use guc_node_fill_info() instead of guc_node_get_info().

------------------------------------------------------------------------
r7123 | cbiere | 2004-10-21 20:54:20 -0400 (Thu, 21 Oct 2004) | 4 lines

Use GPOINTER_TO_UINT/GUINT_TO_POINTER instead of ``int'' atoms.
node_get_info():
	Use walloc() instead of g_new().

------------------------------------------------------------------------
r7122 | cbiere | 2004-10-21 14:16:31 -0400 (Thu, 21 Oct 2004) | 2 lines

The half-automagic tooltips should work perfectly now.

------------------------------------------------------------------------
r7121 | cbiere | 2004-10-21 14:14:43 -0400 (Thu, 21 Oct 2004) | 2 lines

Added widget_force_tooltip().

------------------------------------------------------------------------
r7120 | cbiere | 2004-10-21 12:44:17 -0400 (Thu, 21 Oct 2004) | 2 lines

Moved declaration of nodes_gui_reverse_lookup_selected() to nodes_cb.h.

------------------------------------------------------------------------
r7119 | rmanfredi | 2004-10-21 12:32:44 -0400 (Thu, 21 Oct 2004) | 3 lines

Workaround non-critical bug: I saw an OOB-proxied query whose MUID was not
listed as having been sent by our node.  Handle it gracefully.

------------------------------------------------------------------------
r7118 | cbiere | 2004-10-21 12:16:58 -0400 (Thu, 21 Oct 2004) | 4 lines

host_lookup_callback():
	Restore the default view (ip:port) if the lookup failed and print
	a error message on the statusbar.

------------------------------------------------------------------------
r7117 | cbiere | 2004-10-21 11:14:59 -0400 (Thu, 21 Oct 2004) | 2 lines

Set internal ``common_dbg'' back to zero.

------------------------------------------------------------------------
r7116 | cbiere | 2004-10-21 11:02:53 -0400 (Thu, 21 Oct 2004) | 4 lines

[GTK2] Removed legacy feature "autoselect" for search results.
[GTK2] Added popup menu item at the GnutellaNet pane to perform a DNS
	reverse lookup for all selected nodes.

------------------------------------------------------------------------
r7115 | cbiere | 2004-10-21 10:57:20 -0400 (Thu, 21 Oct 2004) | 3 lines

Added popup menu item to perform a DNS reverse lookup for the IP addresses
	of all selected nodes.

------------------------------------------------------------------------
r7114 | cbiere | 2004-10-21 10:54:09 -0400 (Thu, 21 Oct 2004) | 4 lines

[GTK2] Removed legacy feature "autoselect". Instead, if a collapsed row is
	selected the acquired action is now performed on the row itself and
	all (collapsed) children.

------------------------------------------------------------------------
r7113 | cbiere | 2004-10-21 10:49:50 -0400 (Thu, 21 Oct 2004) | 4 lines

Don't access ``filter_dialog'' to save ``filter_main_divider_pos'', this
	is already done in filter_close_dialog() and ``filter_dialog'' is
	potentially NULL (-> crash).

------------------------------------------------------------------------
r7112 | cbiere | 2004-10-21 10:47:05 -0400 (Thu, 21 Oct 2004) | 2 lines

Don't use external core variable, use the properties instead.

------------------------------------------------------------------------
r7111 | cbiere | 2004-10-21 10:44:48 -0400 (Thu, 21 Oct 2004) | 9 lines

Style fixes.
[GTK2] tree_selection_collect_data():
	Extended so that the data of collapsed children is returned too for
	intuitive selection. (Note: GTK+ 2.x doesn't include collapsed nodes
	in selections.) This is non-recursive and descends one level only.
gtk_ctree_count_node_children():
	Removed ``inline'' directive. Only "static inline" should be used
	to prevent C99 vs. GNUC incompatibilities.

------------------------------------------------------------------------
r7110 | cbiere | 2004-10-21 10:40:24 -0400 (Thu, 21 Oct 2004) | 4 lines

Added ip_to_string() which is the equivalent of ip_to_gchar() but requeries
	providing buffer instead of using a static buffer.
Added ip_to_host() for DNS reverse lookups.

------------------------------------------------------------------------
r7109 | cbiere | 2004-10-21 10:36:14 -0400 (Thu, 21 Oct 2004) | 2 lines

Inclusion of <stdio.h> is guaranteed by common.h.

------------------------------------------------------------------------
r7108 | cbiere | 2004-10-21 10:35:28 -0400 (Thu, 21 Oct 2004) | 2 lines

Added ``adns_reverse_lookup'' to perform DNS reverse lookups.

------------------------------------------------------------------------
r7107 | cbiere | 2004-10-21 10:34:07 -0400 (Thu, 21 Oct 2004) | 5 lines

Use GUINT_TO_POINTER/GPOINTER_TO_UINT instead of ``int'' atoms.
Don't export ``running_uploads'', ``registered_uploads'', ``count_uploads'',
	these values are accessible as properties.
Style fixes.

------------------------------------------------------------------------
r7106 | cbiere | 2004-10-21 10:30:44 -0400 (Thu, 21 Oct 2004) | 3 lines

Marked unused function parameters.
Removed bogus binding of proxy socket.

------------------------------------------------------------------------
r7105 | cbiere | 2004-10-21 10:29:31 -0400 (Thu, 21 Oct 2004) | 3 lines

Use property variable ``total_uploads'' instead of exported variable
	``count_uploads''.

------------------------------------------------------------------------
r7104 | cbiere | 2004-10-21 10:28:26 -0400 (Thu, 21 Oct 2004) | 4 lines

Use GUINT_TO_POINTER/GPOINTER_TO_UINT instead of ``int'' atoms.
gnet_stats_count_general():
	Removed unused first parameter ``n''.

------------------------------------------------------------------------
r7103 | cbiere | 2004-10-21 10:23:18 -0400 (Thu, 21 Oct 2004) | 3 lines

gnet_stats_count_general():
	Removed unused first parameter ``n''.

------------------------------------------------------------------------
r7102 | cbiere | 2004-10-21 10:17:42 -0400 (Thu, 21 Oct 2004) | 3 lines

Style fixes.
Marked unused function parameters.

------------------------------------------------------------------------
r7101 | rmanfredi | 2004-10-20 17:57:00 -0400 (Wed, 20 Oct 2004) | 2 lines

Save position of the "hpaned_filter_main" horizontal pane when exiting.

------------------------------------------------------------------------
r7100 | rmanfredi | 2004-10-20 17:51:41 -0400 (Wed, 20 Oct 2004) | 2 lines

Save position of the "vpaned_results" vertical pane when exiting.

------------------------------------------------------------------------
r7099 | rmanfredi | 2004-10-20 17:41:14 -0400 (Wed, 20 Oct 2004) | 2 lines

As an experiment, display an UTF-8 string as filename in search details.

------------------------------------------------------------------------
r7098 | rmanfredi | 2004-10-20 17:39:58 -0400 (Wed, 20 Oct 2004) | 2 lines

Fixed minor memory leak at exit time.

------------------------------------------------------------------------
r7097 | rmanfredi | 2004-10-20 17:38:46 -0400 (Wed, 20 Oct 2004) | 2 lines

Fix BYE message length as well when triggering GnucDNA bug workaround.

------------------------------------------------------------------------
r7096 | rmanfredi | 2004-10-20 17:36:20 -0400 (Wed, 20 Oct 2004) | 2 lines

Record incoming activity to avoid marking a node "offline" too aggressively.

------------------------------------------------------------------------
r7095 | cbiere | 2004-10-20 13:10:21 -0400 (Wed, 20 Oct 2004) | 2 lines

Style fixes.

------------------------------------------------------------------------
r7094 | cbiere | 2004-10-20 13:03:54 -0400 (Wed, 20 Oct 2004) | 2 lines

Minor fixes.

------------------------------------------------------------------------
r7093 | cbiere | 2004-10-20 13:01:39 -0400 (Wed, 20 Oct 2004) | 3 lines

guc_search_new():
	Removed unused parameter ``minimum_speed''.

------------------------------------------------------------------------
r7092 | cbiere | 2004-10-20 12:56:11 -0400 (Wed, 20 Oct 2004) | 3 lines

Corrected number of elements for search_list_col_widths,
	search_results_col_visible and search_results_col_widths.

------------------------------------------------------------------------
r7091 | cbiere | 2004-10-20 12:21:14 -0400 (Wed, 20 Oct 2004) | 2 lines

Marked unused parameters.

------------------------------------------------------------------------
r7090 | cbiere | 2004-10-20 11:50:18 -0400 (Wed, 20 Oct 2004) | 2 lines

Fixed wrong casts.

------------------------------------------------------------------------
r7089 | cbiere | 2004-10-20 11:47:17 -0400 (Wed, 20 Oct 2004) | 2 lines

Use GUINT_TO_POINTER/GPOINTER_TO_UINT instead of ``int'' atoms.

------------------------------------------------------------------------
r7088 | cbiere | 2004-10-20 11:38:58 -0400 (Wed, 20 Oct 2004) | 3 lines

Marked unused parameters.
Style fixes.

------------------------------------------------------------------------
r7087 | rmanfredi | 2004-10-19 17:44:57 -0400 (Tue, 19 Oct 2004) | 2 lines

Removed 3 columns in search results.

------------------------------------------------------------------------
r7086 | rmanfredi | 2004-10-19 17:42:12 -0400 (Tue, 19 Oct 2004) | 2 lines

Version of 2004-10-19.

------------------------------------------------------------------------
r7085 | rmanfredi | 2004-10-19 17:37:34 -0400 (Tue, 19 Oct 2004) | 2 lines

Removed Host, SHA1 and Speed columns for search results.

------------------------------------------------------------------------
r7084 | rmanfredi | 2004-10-19 17:37:07 -0400 (Tue, 19 Oct 2004) | 2 lines

Removed the speed, host and SHA1 columns in search results.

------------------------------------------------------------------------
r7083 | rmanfredi | 2004-10-19 17:34:27 -0400 (Tue, 19 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7082 | rmanfredi | 2004-10-19 17:33:34 -0400 (Tue, 19 Oct 2004) | 2 lines

Display hostname if available.

------------------------------------------------------------------------
r7081 | rmanfredi | 2004-10-19 17:32:52 -0400 (Tue, 19 Oct 2004) | 2 lines

Changed label "ServentID" into "Servent ID".

------------------------------------------------------------------------
r7080 | rmanfredi | 2004-10-19 17:31:29 -0400 (Tue, 19 Oct 2004) | 2 lines

Added bottom information for selected hits.

------------------------------------------------------------------------
r7079 | rmanfredi | 2004-10-19 17:30:53 -0400 (Tue, 19 Oct 2004) | 3 lines

Added bottom information for selected hits.
Removed Host, SHA1 and Speed columns for search results.

------------------------------------------------------------------------
r7078 | rmanfredi | 2004-10-19 17:29:08 -0400 (Tue, 19 Oct 2004) | 2 lines

Added vpaned_results for GTK1 as well.

------------------------------------------------------------------------
r7077 | rmanfredi | 2004-10-19 17:28:29 -0400 (Tue, 19 Oct 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r7076 | rmanfredi | 2004-10-19 17:28:10 -0400 (Tue, 19 Oct 2004) | 2 lines

Added definition of GEqualFunc for GTK1.

------------------------------------------------------------------------
r7075 | rmanfredi | 2004-10-19 17:27:40 -0400 (Tue, 19 Oct 2004) | 2 lines

Now use GEqualFunc, even for GTK1.

------------------------------------------------------------------------
r7074 | rmanfredi | 2004-10-19 17:26:58 -0400 (Tue, 19 Oct 2004) | 2 lines

Added workaround for GnucDNA bug in BYE messages.

------------------------------------------------------------------------
r7073 | cbiere | 2004-10-19 17:08:18 -0400 (Tue, 19 Oct 2004) | 2 lines

Added fsh2.xcite.net (216.169.118.82) as well.

------------------------------------------------------------------------
r7072 | cbiere | 2004-10-19 16:36:31 -0400 (Tue, 19 Oct 2004) | 3 lines

Added fsh1.xcite.net (216.169.118.81) which uploads .exe files with names
created from the search text.

------------------------------------------------------------------------
r7071 | cbiere | 2004-10-19 03:55:16 -0400 (Tue, 19 Oct 2004) | 5 lines

[GTK2] Added tooltips that show more details about the data in the treeview
	row under the cursor (nodes and search results pane). The tooltip
	can be toggled with Control-F1 (standard GTK+ key-combination). The
	contents change on mouse-click or keyboard cursor movement.

------------------------------------------------------------------------
r7070 | cbiere | 2004-10-19 03:51:24 -0400 (Tue, 19 Oct 2004) | 2 lines

Some clean-ups.

------------------------------------------------------------------------
r7069 | cbiere | 2004-10-19 03:49:50 -0400 (Tue, 19 Oct 2004) | 2 lines

Added settings_gui_tooltips() to access the global tooltip state.

------------------------------------------------------------------------
r7068 | cbiere | 2004-10-19 03:48:50 -0400 (Tue, 19 Oct 2004) | 4 lines

Style fixes.
Moved nodes_cb_connect_by_name() to nodes_common.[ch] as
	nodes_gui_common_connect_by_name().

------------------------------------------------------------------------
r7067 | cbiere | 2004-10-19 03:45:59 -0400 (Tue, 19 Oct 2004) | 3 lines

[GTK2] Added set_tooltips_keyboard_mode() to explicitely enable or disable
	keyboard mode. Can be toggled manually with Control-F1 as well.

------------------------------------------------------------------------
r7066 | cbiere | 2004-10-18 21:03:35 -0400 (Mon, 18 Oct 2004) | 3 lines

Fixed signed vs. unsigned warning.
Wrapped overlong line.

------------------------------------------------------------------------
r7065 | wyldfire | 2004-10-18 20:46:50 -0400 (Mon, 18 Oct 2004) | 2 lines

no comment

------------------------------------------------------------------------
r7064 | wyldfire | 2004-10-18 20:45:48 -0400 (Mon, 18 Oct 2004) | 3 lines

Removed two properties which controlled the visibility of two cols in the
  nodes pane.

------------------------------------------------------------------------
r7063 | wyldfire | 2004-10-18 20:41:58 -0400 (Mon, 18 Oct 2004) | 3 lines

Removed nodes column config checkboxes from ui preferences.
Moved col configuration callback from nodes.c to nodes_cb.c.

------------------------------------------------------------------------
r7062 | wyldfire | 2004-10-18 20:36:15 -0400 (Mon, 18 Oct 2004) | 2 lines

Added "Configure columns" option to nodes pane.

------------------------------------------------------------------------
r7061 | wyldfire | 2004-10-18 20:34:25 -0400 (Mon, 18 Oct 2004) | 2 lines

Use the save/restory functions for persisting the column visibility.

------------------------------------------------------------------------
r7060 | wyldfire | 2004-10-18 20:33:48 -0400 (Mon, 18 Oct 2004) | 2 lines

Made the column chooser popup activation callback look nicer.

------------------------------------------------------------------------
r7059 | wyldfire | 2004-10-18 20:29:58 -0400 (Mon, 18 Oct 2004) | 3 lines


Added gtk_clist_save_visibility() and gtk_clist_restore_visibility().

------------------------------------------------------------------------
r7058 | cbiere | 2004-10-18 18:19:41 -0400 (Mon, 18 Oct 2004) | 2 lines

Added 69.44.155.54 another server of isaveclub aka esaveclub.

------------------------------------------------------------------------
r7057 | cbiere | 2004-10-18 17:52:06 -0400 (Mon, 18 Oct 2004) | 2 lines

Refreshed.

------------------------------------------------------------------------
r7056 | cbiere | 2004-10-18 16:23:51 -0400 (Mon, 18 Oct 2004) | 8 lines

Corrected some types e.g., gint -> socklen_t.
Declared proxy functions as static and moved closer to the top.
Zero out sockaddr_in variables before using them.
Clean-up of the proxy code e.g., style and type fixes, catch partial transfers.
Mark unused function parameters.
proxy_connect():
	Initiate a ADNS lookup for proxy_hostname if the proxy_ip is zero.

------------------------------------------------------------------------
r7055 | cbiere | 2004-10-18 16:14:19 -0400 (Mon, 18 Oct 2004) | 2 lines

Don't store the property "proxy_ip". Only store "proxy_hostname".

------------------------------------------------------------------------
r7054 | cbiere | 2004-10-18 16:12:20 -0400 (Mon, 18 Oct 2004) | 3 lines

load_helper():
	Don't load properties that are not marked as saveable.

------------------------------------------------------------------------
r7053 | rmanfredi | 2004-10-18 15:49:04 -0400 (Mon, 18 Oct 2004) | 2 lines

Version of 2004-10-18.

------------------------------------------------------------------------
r7052 | rmanfredi | 2004-10-18 15:47:05 -0400 (Mon, 18 Oct 2004) | 2 lines

"a1" is "Anonymizing proxies" and "a2" is "Satellite providers".

------------------------------------------------------------------------
r7051 | rmanfredi | 2004-10-18 15:46:24 -0400 (Mon, 18 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7050 | rmanfredi | 2004-10-18 15:46:00 -0400 (Mon, 18 Oct 2004) | 2 lines

Added aging.c.

------------------------------------------------------------------------
r7049 | rmanfredi | 2004-10-18 15:43:32 -0400 (Mon, 18 Oct 2004) | 5 lines

Fixed small memory leak.
Remember IP of stalling uploads for a while, via the new "aging" table,
so that we don't increase our stalling counter too rapidly when uploads
to the same host keep stalling.

------------------------------------------------------------------------
r7048 | rmanfredi | 2004-10-18 15:38:35 -0400 (Mon, 18 Oct 2004) | 2 lines

Added src/lib/aging.[ch].

------------------------------------------------------------------------
r7047 | rmanfredi | 2004-10-18 15:37:35 -0400 (Mon, 18 Oct 2004) | 2 lines

When debugging, systematically log sending of a BYE via g_message().

------------------------------------------------------------------------
r7046 | cbiere | 2004-10-18 12:04:24 -0400 (Mon, 18 Oct 2004) | 4 lines

Use gtk_tree_store_newv() instead of gtk_tree_store_new() so that it's
possible to check the number of arguments/columns at compile-time.
Fixed memory leaks caused by the new "Loc" column.

------------------------------------------------------------------------
r7045 | cbiere | 2004-10-18 12:02:28 -0400 (Mon, 18 Oct 2004) | 3 lines

Use gtk_tree_store_newv() instead of gtk_tree_store_new() so that it's
possible to check the number of arguments/columns at compile-time.

------------------------------------------------------------------------
r7044 | cbiere | 2004-10-18 12:00:46 -0400 (Mon, 18 Oct 2004) | 4 lines

Use gtk_tree_store_newv() instead of gtk_tree_store_new() so that it's
possible to check the number of arguments/columns at compile-time.
Do not cast property variables to modify them, use gui_prop_set_*().

------------------------------------------------------------------------
r7043 | cbiere | 2004-10-17 20:15:02 -0400 (Sun, 17 Oct 2004) | 3 lines

Fixed definition of column count.
Fixed compiler warnings regarding const-qualifiers.

------------------------------------------------------------------------
r7042 | cbiere | 2004-10-17 17:11:02 -0400 (Sun, 17 Oct 2004) | 4 lines

Pass the country code associated with an IP address encoded in an integer
instead of a string. Use iso3166_country_cc() get the 2-letter country code
or iso3166_country_name() for the full name.

------------------------------------------------------------------------
r7041 | cbiere | 2004-10-17 17:06:51 -0400 (Sun, 17 Oct 2004) | 2 lines

Encode and decode ISO 3166 country codes and country names.

------------------------------------------------------------------------
r7040 | cbiere | 2004-10-17 16:55:34 -0400 (Sun, 17 Oct 2004) | 2 lines

Marked unused function parameters.

------------------------------------------------------------------------
r7039 | cbiere | 2004-10-17 15:17:41 -0400 (Sun, 17 Oct 2004) | 2 lines

Added rule 9.4 concerning unused function parameters.

------------------------------------------------------------------------
r7038 | rmanfredi | 2004-10-17 12:37:56 -0400 (Sun, 17 Oct 2004) | 3 lines

When running out of leaf slots, kick non-sharing leaves or leaves preventing
querying via hops-flow.

------------------------------------------------------------------------
r7037 | cbiere | 2004-10-17 11:18:30 -0400 (Sun, 17 Oct 2004) | 2 lines

Shrunk overlong line.

------------------------------------------------------------------------
r7036 | cbiere | 2004-10-17 11:17:15 -0400 (Sun, 17 Oct 2004) | 2 lines

Use a numeric encoded country code instead of a string.

------------------------------------------------------------------------
r7035 | rmanfredi | 2004-10-17 10:18:56 -0400 (Sun, 17 Oct 2004) | 2 lines

Removed dead code within "#if 0 / #endif" sections.

------------------------------------------------------------------------
r7034 | rmanfredi | 2004-10-17 10:16:14 -0400 (Sun, 17 Oct 2004) | 2 lines

Added 4 new general counters.

------------------------------------------------------------------------
r7033 | rmanfredi | 2004-10-17 10:15:06 -0400 (Sun, 17 Oct 2004) | 3 lines

Count unprocessed Gnutella messages coming from UDP, non-Gnutella messages
we get, and messages coming from a bogus source IP address.

------------------------------------------------------------------------
r7032 | rmanfredi | 2004-10-17 10:14:01 -0400 (Sun, 17 Oct 2004) | 2 lines

Count the amount of queries where we strip the OOB flag.

------------------------------------------------------------------------
r7031 | rmanfredi | 2004-10-17 10:10:55 -0400 (Sun, 17 Oct 2004) | 4 lines

Replaced isspace() by is_ascii_space().
Removed unused THERE constant.
Replaced "C code for children" with "C code for seasonned programmers".

------------------------------------------------------------------------
r7030 | cbiere | 2004-10-17 09:37:43 -0400 (Sun, 17 Oct 2004) | 3 lines

Use pointer arithmetic instead of converting pointers to gulong and back to mark/unmark them
with IPRANGE_MARK.

------------------------------------------------------------------------
r7029 | rmanfredi | 2004-10-17 05:25:47 -0400 (Sun, 17 Oct 2004) | 2 lines

Version of 2004-10-16.

------------------------------------------------------------------------
r7028 | rmanfredi | 2004-10-17 05:00:01 -0400 (Sun, 17 Oct 2004) | 3 lines

Forgot to reset u->country after cloning upload, resulting in too many
frees on the country atom, leading to memory corruption.

------------------------------------------------------------------------
r7027 | rmanfredi | 2004-10-17 04:59:15 -0400 (Sun, 17 Oct 2004) | 3 lines

Since node_clear_info() can be called from the GUI, reset freed entries
to NULL in case they call us twice on the same object.

------------------------------------------------------------------------
r7026 | cbiere | 2004-10-16 18:58:45 -0400 (Sat, 16 Oct 2004) | 2 lines

Commented out columns which are not used in the GTK+ 2.x frontend.

------------------------------------------------------------------------
r7025 | cbiere | 2004-10-16 18:57:28 -0400 (Sat, 16 Oct 2004) | 6 lines

Added missing code to make the new "Loc" column work.
create_model():
	Should be foolproof now.
add_results_columns():
	Commented out columns which are not used in the GTK+ 2.x frontend.

------------------------------------------------------------------------
r7024 | rmanfredi | 2004-10-16 17:23:40 -0400 (Sat, 16 Oct 2004) | 2 lines

Fixed compiler warnings.

------------------------------------------------------------------------
r7023 | rmanfredi | 2004-10-16 17:07:39 -0400 (Sat, 16 Oct 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r7022 | rmanfredi | 2004-10-16 17:02:16 -0400 (Sat, 16 Oct 2004) | 2 lines

Added the "Loc" column to display country code of downloaders.

------------------------------------------------------------------------
r7021 | rmanfredi | 2004-10-16 17:01:33 -0400 (Sat, 16 Oct 2004) | 2 lines

Tried to add the "Speed", "Host", "SHA1" and "Loc" columns.

------------------------------------------------------------------------
r7020 | rmanfredi | 2004-10-16 17:00:42 -0400 (Sat, 16 Oct 2004) | 2 lines

Added the "Loc" column to show the country codes of nodes.

------------------------------------------------------------------------
r7019 | rmanfredi | 2004-10-16 17:00:25 -0400 (Sat, 16 Oct 2004) | 2 lines

Added mention that we use MaxMind's GeoIP database, per their license.

------------------------------------------------------------------------
r7018 | rmanfredi | 2004-10-16 16:59:51 -0400 (Sat, 16 Oct 2004) | 2 lines

Added the "Loc" column to show the country codes of servers.

------------------------------------------------------------------------
r7017 | rmanfredi | 2004-10-16 16:59:15 -0400 (Sat, 16 Oct 2004) | 2 lines

Show the country code of the uploading hosts.

------------------------------------------------------------------------
r7016 | rmanfredi | 2004-10-16 16:58:49 -0400 (Sat, 16 Oct 2004) | 4 lines

Added sorting for country code, and disabled sorting of Bitzi metadatas.
Show them the country code, and rely on the fact that the core will set
the "firewalled" bit if the IP is bogus.

------------------------------------------------------------------------
r7015 | rmanfredi | 2004-10-16 16:57:25 -0400 (Sat, 16 Oct 2004) | 2 lines

Added display of country codes.

------------------------------------------------------------------------
r7014 | rmanfredi | 2004-10-16 16:56:36 -0400 (Sat, 16 Oct 2004) | 3 lines

Added columns showing the country codes of the hosts (labeled "Loc")
Added mention that we use MaxMind's GeoIP database, per their license.

------------------------------------------------------------------------
r7013 | rmanfredi | 2004-10-16 16:55:15 -0400 (Sat, 16 Oct 2004) | 2 lines

Show country codes in dowloads.

------------------------------------------------------------------------
r7012 | rmanfredi | 2004-10-16 16:54:41 -0400 (Sat, 16 Oct 2004) | 2 lines

Added country code field.

------------------------------------------------------------------------
r7011 | rmanfredi | 2004-10-16 16:54:11 -0400 (Sat, 16 Oct 2004) | 2 lines

Handle country codes and the ST_BOGUS flag.

------------------------------------------------------------------------
r7010 | rmanfredi | 2004-10-16 16:53:32 -0400 (Sat, 16 Oct 2004) | 2 lines

Added columns for the country code, called "Loc".

------------------------------------------------------------------------
r7009 | rmanfredi | 2004-10-16 16:53:02 -0400 (Sat, 16 Oct 2004) | 3 lines

Declare ip_range_split().
We now have a routine for host_is_valid().

------------------------------------------------------------------------
r7008 | rmanfredi | 2004-10-16 16:52:20 -0400 (Sat, 16 Oct 2004) | 3 lines

Made ip_is_valid() test of 0/7 instead of 0/8.
Allow parsing of 0.0.0.0 as a valid IP for bogons.

------------------------------------------------------------------------
r7007 | rmanfredi | 2004-10-16 16:50:54 -0400 (Sat, 16 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r7006 | rmanfredi | 2004-10-16 16:50:36 -0400 (Sat, 16 Oct 2004) | 2 lines

Added iprange.c.

------------------------------------------------------------------------
r7005 | rmanfredi | 2004-10-16 16:50:06 -0400 (Sat, 16 Oct 2004) | 2 lines

Added country information.

------------------------------------------------------------------------
r7004 | rmanfredi | 2004-10-16 16:49:22 -0400 (Sat, 16 Oct 2004) | 2 lines

Added guc_download_get_country().

------------------------------------------------------------------------
r7003 | rmanfredi | 2004-10-16 16:49:01 -0400 (Sat, 16 Oct 2004) | 3 lines

GUI properties capturing column positionning no longer rely on hardwired
constants but use the definitions from ui/gtk/columns.h.

------------------------------------------------------------------------
r7002 | rmanfredi | 2004-10-16 16:47:41 -0400 (Sat, 16 Oct 2004) | 2 lines

Now includes "hosts.h".

------------------------------------------------------------------------
r7001 | rmanfredi | 2004-10-16 16:47:05 -0400 (Sat, 16 Oct 2004) | 2 lines

Uploads now carry country code.

------------------------------------------------------------------------
r7000 | rmanfredi | 2004-10-16 16:46:37 -0400 (Sat, 16 Oct 2004) | 2 lines

Warn when getting UDP traffic from a bogus IP (should never happen).

------------------------------------------------------------------------
r6999 | rmanfredi | 2004-10-16 16:45:46 -0400 (Sat, 16 Oct 2004) | 2 lines

Results now carry country code, and bogus IPs are flagged.

------------------------------------------------------------------------
r6998 | rmanfredi | 2004-10-16 16:44:28 -0400 (Sat, 16 Oct 2004) | 2 lines

Fixed warning.

------------------------------------------------------------------------
r6997 | rmanfredi | 2004-10-16 16:43:36 -0400 (Sat, 16 Oct 2004) | 2 lines

Nodes now carry the country information.

------------------------------------------------------------------------
r6996 | rmanfredi | 2004-10-16 16:43:02 -0400 (Sat, 16 Oct 2004) | 2 lines

Fixed indent.

------------------------------------------------------------------------
r6995 | rmanfredi | 2004-10-16 16:42:41 -0400 (Sat, 16 Oct 2004) | 2 lines

Added host_is_valid(), using the bogons database.

------------------------------------------------------------------------
r6994 | rmanfredi | 2004-10-16 16:42:02 -0400 (Sat, 16 Oct 2004) | 2 lines

Code now relies on new IP-range database.

------------------------------------------------------------------------
r6993 | rmanfredi | 2004-10-16 16:41:24 -0400 (Sat, 16 Oct 2004) | 2 lines

Minor style fixing.

------------------------------------------------------------------------
r6992 | rmanfredi | 2004-10-16 16:40:51 -0400 (Sat, 16 Oct 2004) | 3 lines

Fixed inverted logic test, causing spurious "got metainfo in filecache"
warnings and not doing the proper things.

------------------------------------------------------------------------
r6991 | rmanfredi | 2004-10-16 16:39:43 -0400 (Sat, 16 Oct 2004) | 2 lines

Server now holds the country of origin.

------------------------------------------------------------------------
r6990 | rmanfredi | 2004-10-16 16:38:57 -0400 (Sat, 16 Oct 2004) | 2 lines

Added inclusion of "hosts.h" for new host_is_valid()..

------------------------------------------------------------------------
r6989 | rmanfredi | 2004-10-16 16:38:08 -0400 (Sat, 16 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6988 | rmanfredi | 2004-10-16 16:37:50 -0400 (Sat, 16 Oct 2004) | 2 lines

Added bogons.c and geo_ip.c.

------------------------------------------------------------------------
r6987 | rmanfredi | 2004-10-16 16:37:07 -0400 (Sat, 16 Oct 2004) | 2 lines

Initialize bogons and geo_ip modules.

------------------------------------------------------------------------
r6986 | rmanfredi | 2004-10-16 16:36:23 -0400 (Sat, 16 Oct 2004) | 2 lines

Added installation of bogons.txt and geo-ip.txt.

------------------------------------------------------------------------
r6985 | rmanfredi | 2004-10-16 16:35:25 -0400 (Sat, 16 Oct 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6984 | rmanfredi | 2004-10-11 03:44:34 -0400 (Mon, 11 Oct 2004) | 2 lines

Don't sanitize filenames at startup if not directed to do so.

------------------------------------------------------------------------
r6983 | rmanfredi | 2004-10-11 03:44:05 -0400 (Mon, 11 Oct 2004) | 2 lines

Allow them to force sanitizing of filenames upon startup.

------------------------------------------------------------------------
r6982 | rmanfredi | 2004-10-11 03:42:13 -0400 (Mon, 11 Oct 2004) | 3 lines

Added "convert_old_filenames" property, FALSE by default, governing the
sanitization of existing files in the download directory.

------------------------------------------------------------------------
r6981 | cbiere | 2004-10-10 19:44:19 -0400 (Sun, 10 Oct 2004) | 2 lines

[GTK2] Added GUI interface to configure "convert_evil_chars".

------------------------------------------------------------------------
r6980 | cbiere | 2004-10-10 19:33:20 -0400 (Sun, 10 Oct 2004) | 2 lines

Added necessary third parameter to gm_sanitize_filename().

------------------------------------------------------------------------
r6979 | cbiere | 2004-10-10 19:02:11 -0400 (Sun, 10 Oct 2004) | 9 lines

Added core property "convert_evil_chars" which is true by default.
gm_sanitize_filename():
	Added parameter "no_evil" to replace "evil" characters by
	underscores if desired.
file_info_retrieve():
	When sanitizing the filenames, do not convert evil characters. The
	sanitizing here is merely a protection against G_DIR_SEPARATOR
	appearing in the filename after a crash or due to a bug etc.

------------------------------------------------------------------------
r6978 | cbiere | 2004-10-10 16:53:14 -0400 (Sun, 10 Oct 2004) | 3 lines

tx_dgram_write_error():
	Added handling of further errno codes.

------------------------------------------------------------------------
r6977 | rmanfredi | 2004-10-10 15:19:17 -0400 (Sun, 10 Oct 2004) | 3 lines

Added notice that the file may be safely updated whilst GTKG is running.
Added ban for 79.79.55/24.

------------------------------------------------------------------------
r6976 | rmanfredi | 2004-10-10 15:05:06 -0400 (Sun, 10 Oct 2004) | 2 lines

Version of 2004-10-10.

------------------------------------------------------------------------
r6975 | rmanfredi | 2004-10-10 15:03:06 -0400 (Sun, 10 Oct 2004) | 3 lines

When fileinfo's file name is sanitized and changed, the corresponding
disk file needs to be renamed as well.

------------------------------------------------------------------------
r6974 | rmanfredi | 2004-10-10 15:02:05 -0400 (Sun, 10 Oct 2004) | 3 lines

Added filepath_exists().
Fixed indentation of parse_uint64().

------------------------------------------------------------------------
r6973 | cbiere | 2004-10-10 07:54:16 -0400 (Sun, 10 Oct 2004) | 3 lines

file_info_retrieve():
	Fixed another SHA1/CHA1 bug; the logic was inverted.

------------------------------------------------------------------------
r6972 | cbiere | 2004-10-10 05:14:27 -0400 (Sun, 10 Oct 2004) | 3 lines

Added another server of isaveclub:
	69.44.157.56 (server1.isaveclub.com)

------------------------------------------------------------------------
r6971 | rmanfredi | 2004-10-10 04:50:48 -0400 (Sun, 10 Oct 2004) | 3 lines

Added parenthesis and quotes (simple and double) to the list of "evil"
characters in filenames.

------------------------------------------------------------------------
r6970 | rmanfredi | 2004-10-09 13:48:40 -0400 (Sat, 09 Oct 2004) | 3 lines

Fixed buglet that caused SHA1 and CHA1 entries to be ignored.
Added dichotomic mapping for tag strings to speed-up parsing a bit.

------------------------------------------------------------------------
r6969 | rmanfredi | 2004-10-09 13:43:04 -0400 (Sat, 09 Oct 2004) | 3 lines

Forgot to cleanup wait_ev in the timeout callback which fires when
they are not running NTP locally.

------------------------------------------------------------------------
r6968 | rmanfredi | 2004-10-09 09:23:24 -0400 (Sat, 09 Oct 2004) | 3 lines

Don't spend more than 17 hours in auto mode without checking whether we
can become an ultra node.

------------------------------------------------------------------------
r6967 | cbiere | 2004-10-08 15:44:06 -0400 (Fri, 08 Oct 2004) | 11 lines

extract_sha1():
	Don't make assumptions about the origin of the argument, use it as-is.
file_info_retrieve():
	Check the entries when retrieving the fileinfo database as protection
	against data corruption.
	Discard aliases that looks like URNs.
file_info_store_one():
	Don't store a SHA1 tag with an empty value, if the SHA1 is unknown.
	Discard aliases that looks like URNs.
	Use 64-bit integers for timestamps and filesizes/offsets.

------------------------------------------------------------------------
r6966 | cbiere | 2004-10-08 15:31:57 -0400 (Fri, 08 Oct 2004) | 3 lines

unicode_decompose_init():
	Disabled Unicode test. The conversion is supposed to be correct.

------------------------------------------------------------------------
r6965 | cbiere | 2004-10-08 11:28:04 -0400 (Fri, 08 Oct 2004) | 3 lines

Added parse_uint64().
Changed the STATIC_ASSERT() macro, the former version didn't work with TenDRA.

------------------------------------------------------------------------
r6964 | cbiere | 2004-10-08 10:55:30 -0400 (Fri, 08 Oct 2004) | 4 lines

Reduced minimum for ``max_ultrapeers'' to zero so that you can run in leaf
	mode without GTKG trying to initiate connections. This is useful if
	you want to (manually) connect to certain peers only.

------------------------------------------------------------------------
r6963 | cbiere | 2004-10-08 10:16:50 -0400 (Fri, 08 Oct 2004) | 2 lines

Fixed the "duplicate const" warning.

------------------------------------------------------------------------
r6962 | cbiere | 2004-10-08 10:14:48 -0400 (Fri, 08 Oct 2004) | 3 lines

Changed the default download directory paths from ~ to
	~/gtk-gnutella-downloads/{incomplete,complete,corrupt}.

------------------------------------------------------------------------
r6961 | cbiere | 2004-10-08 10:13:02 -0400 (Fri, 08 Oct 2004) | 4 lines

file_path_changed():
	If the directory doesn't exist, try to create it.
	Fall back to the default directory setting, not $HOME.

------------------------------------------------------------------------
r6960 | cbiere | 2004-10-08 10:10:36 -0400 (Fri, 08 Oct 2004) | 2 lines

Allow access by absolute pathname only.

------------------------------------------------------------------------
r6959 | cbiere | 2004-10-08 10:09:21 -0400 (Fri, 08 Oct 2004) | 2 lines

Added is_absolute_path() and create_directory().

------------------------------------------------------------------------
r6958 | graaff | 2004-10-07 15:13:33 -0400 (Thu, 07 Oct 2004) | 2 lines

Change assert to print debug information and continue instead.

------------------------------------------------------------------------
r6957 | rmanfredi | 2004-10-06 15:02:07 -0400 (Wed, 06 Oct 2004) | 2 lines

If they disabled uploads, don't compare leaf node outgoing b/w with HTTP.

------------------------------------------------------------------------
r6956 | rmanfredi | 2004-10-06 15:00:55 -0400 (Wed, 06 Oct 2004) | 2 lines

Limit dispersion to 60 seconds for clock skew updating.

------------------------------------------------------------------------
r6955 | cbiere | 2004-10-06 01:45:22 -0400 (Wed, 06 Oct 2004) | 3 lines

Converted C99 comment to proper C89 comment.
Use & instead of shifting to detect even/odd values.

------------------------------------------------------------------------
r6954 | cbiere | 2004-10-06 01:42:57 -0400 (Wed, 06 Oct 2004) | 4 lines

search_gui_metadata_update():
	Build the string in bitzi_gui_get_metadata().
	Minor style-related changes.

------------------------------------------------------------------------
r6953 | cbiere | 2004-10-06 01:39:54 -0400 (Wed, 06 Oct 2004) | 5 lines

bitzi_fjtostring():
	Added const to return type.
bitzi_gui_get_metadata():
	Moved here, so that it can be shared between frontends.

------------------------------------------------------------------------
r6952 | cbiere | 2004-10-06 01:38:44 -0400 (Wed, 06 Oct 2004) | 9 lines

bitzi_fjtostring():
	Added const to return type.
	Extended assertion to catch out-of-range values.
bitzi_gui_update():
	Don't pass pointers that are possibly NULL as string to functions
	using format strings.
bitzi_gui_get_metadata():
	Moved here, so that this code can be shared between frontends.

------------------------------------------------------------------------
r6951 | cbiere | 2004-10-06 01:35:46 -0400 (Wed, 06 Oct 2004) | 3 lines

data_hex_str():
	Changed type of ``len'' to size_t.

------------------------------------------------------------------------
r6950 | cbiere | 2004-10-06 01:34:49 -0400 (Wed, 06 Oct 2004) | 3 lines

Use gpointer instead of void *.
Added const-qualifiers.

------------------------------------------------------------------------
r6949 | cbiere | 2004-10-06 01:33:20 -0400 (Wed, 06 Oct 2004) | 18 lines

Added const-qualifiers to ``enum_fj_table''.
Use g_strtod() instead of atof().
Use gint instead of int.
Fixed typo in comment.
Minor style fixes.
Don't cast function pointers if possible.
bitzi_cache_clean():
	Simplified the loop.
	Use delta_time() insead of direct time_t comparisons.
	Prepend items to the list since the order doesn't matter.
	Fixed memory leak; the list of removable items was never freed.
bitzi_heartbeat():
	It's simpler without ``done''.
bitzi_querycache_byurnsha1():
	Added const-qualifier to the argument.
bitzi_query_byurnsha1():
	Added const-qualifier to the argument.

------------------------------------------------------------------------
r6948 | cbiere | 2004-10-06 01:25:53 -0400 (Wed, 06 Oct 2004) | 2 lines

Fixed signed vs. unsigned comparison warnings.

------------------------------------------------------------------------
r6947 | cbiere | 2004-10-06 01:19:37 -0400 (Wed, 06 Oct 2004) | 2 lines

Fixed incomplete prototypes.

------------------------------------------------------------------------
r6946 | cbiere | 2004-10-06 01:12:19 -0400 (Wed, 06 Oct 2004) | 2 lines

Converted C99 comments to proper C89 comments.

------------------------------------------------------------------------
r6945 | rmanfredi | 2004-10-05 13:05:03 -0400 (Tue, 05 Oct 2004) | 2 lines

Ensure we always start on the Gnet pane, where connections are shown.

------------------------------------------------------------------------
r6944 | rmanfredi | 2004-10-04 18:18:51 -0400 (Mon, 04 Oct 2004) | 2 lines

Print amount of file descriptors available at startup.

------------------------------------------------------------------------
r6943 | rmanfredi | 2004-10-04 18:17:08 -0400 (Mon, 04 Oct 2004) | 2 lines

Print message saying we detected NTP, and show the stratum value.

------------------------------------------------------------------------
r6942 | rmanfredi | 2004-10-04 16:12:21 -0400 (Mon, 04 Oct 2004) | 2 lines

Factorized error reporting for URL in url_normalize().

------------------------------------------------------------------------
r6941 | cbiere | 2004-10-04 15:53:07 -0400 (Mon, 04 Oct 2004) | 4 lines

url_normalize():
	Reject URLs with a port value that is preceded by spaces, zeroes
	or +/- which is allowed by strtoul().

------------------------------------------------------------------------
r6940 | rmanfredi | 2004-10-04 15:46:22 -0400 (Mon, 04 Oct 2004) | 2 lines

Version of 2004-10-04.

------------------------------------------------------------------------
r6939 | rmanfredi | 2004-10-04 15:21:26 -0400 (Mon, 04 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6938 | rmanfredi | 2004-10-04 15:19:02 -0400 (Mon, 04 Oct 2004) | 2 lines

Tie version of glib to that of GTK.

------------------------------------------------------------------------
r6937 | rmanfredi | 2004-10-04 13:03:04 -0400 (Mon, 04 Oct 2004) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r6936 | rmanfredi | 2004-10-04 13:02:39 -0400 (Mon, 04 Oct 2004) | 3 lines

Use the time at which we got the message to update the clock (already
corrected by the computed skew).

------------------------------------------------------------------------
r6935 | rmanfredi | 2004-10-04 10:58:40 -0400 (Mon, 04 Oct 2004) | 2 lines

Control dispersion during clock skew updates.

------------------------------------------------------------------------
r6934 | rmanfredi | 2004-10-04 10:56:17 -0400 (Mon, 04 Oct 2004) | 2 lines

Dump SHA1 in hexadecimal when the binary value is deemed improbable.

------------------------------------------------------------------------
r6933 | rmanfredi | 2004-10-04 10:54:49 -0400 (Mon, 04 Oct 2004) | 2 lines

Added data_hex_str().

------------------------------------------------------------------------
r6932 | rmanfredi | 2004-10-04 07:25:03 -0400 (Mon, 04 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6931 | rmanfredi | 2004-10-04 07:22:42 -0400 (Mon, 04 Oct 2004) | 3 lines

Include user-supplied headers in the private file as well, in case they
refer to constants in the vectorized properties.

------------------------------------------------------------------------
r6930 | rmanfredi | 2004-10-04 07:00:09 -0400 (Mon, 04 Oct 2004) | 2 lines

Integrated bitzi patch #1037927 [From Alex Bennee].

------------------------------------------------------------------------
r6929 | rmanfredi | 2004-10-04 03:54:55 -0400 (Mon, 04 Oct 2004) | 2 lines

Debug level cleanup.

------------------------------------------------------------------------
r6928 | rmanfredi | 2004-10-04 03:37:50 -0400 (Mon, 04 Oct 2004) | 2 lines

The Date HTTP header was not using clock skew to correct time.

------------------------------------------------------------------------
r6927 | rmanfredi | 2004-10-03 18:29:25 -0400 (Sun, 03 Oct 2004) | 2 lines

Forgot to free the value array, and called statx_free() from the wrong place.

------------------------------------------------------------------------
r6926 | rmanfredi | 2004-10-03 18:25:07 -0400 (Sun, 03 Oct 2004) | 2 lines

Better clock skew computation and update algorithm, based on statistics.

------------------------------------------------------------------------
r6925 | rmanfredi | 2004-10-03 18:22:47 -0400 (Sun, 03 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6924 | rmanfredi | 2004-10-03 18:21:55 -0400 (Sun, 03 Oct 2004) | 2 lines

Added stats.c.

------------------------------------------------------------------------
r6923 | rmanfredi | 2004-10-03 18:16:41 -0400 (Sun, 03 Oct 2004) | 2 lines

Added src/lib/stats.[ch].

------------------------------------------------------------------------
r6922 | graaff | 2004-10-03 16:43:06 -0400 (Sun, 03 Oct 2004) | 3 lines

Add markup for the filtering chapter and fix other small markup
problems so that the document is valid.

------------------------------------------------------------------------
r6921 | graaff | 2004-10-03 15:51:32 -0400 (Sun, 03 Oct 2004) | 2 lines

Add a target for .dvi files.

------------------------------------------------------------------------
r6920 | graaff | 2004-10-03 14:47:57 -0400 (Sun, 03 Oct 2004) | 4 lines

Change assertion checks into normal checks and output debugging
info so that more people can stress-test the code without failing
assertions.

------------------------------------------------------------------------
r6919 | rmanfredi | 2004-10-03 12:49:18 -0400 (Sun, 03 Oct 2004) | 2 lines

Version of 2004-10-03.

------------------------------------------------------------------------
r6918 | rmanfredi | 2004-10-03 12:40:47 -0400 (Sun, 03 Oct 2004) | 2 lines

Compute a better clock update precision.

------------------------------------------------------------------------
r6917 | rmanfredi | 2004-10-03 12:31:28 -0400 (Sun, 03 Oct 2004) | 3 lines

Correct remote clock seen in the Date HTTP header by the amount of time
necessary for the headers to travel back (estimated from HTTP roundtrip).

------------------------------------------------------------------------
r6916 | rmanfredi | 2004-10-03 12:29:51 -0400 (Sun, 03 Oct 2004) | 2 lines

Removed tracking of the finest precision: we don't use it.

------------------------------------------------------------------------
r6915 | rmanfredi | 2004-10-03 12:28:42 -0400 (Sun, 03 Oct 2004) | 2 lines

Tooltip for "Host runs NTP" now mentions GTKG will auto-detect NTP.

------------------------------------------------------------------------
r6914 | rmanfredi | 2004-10-03 12:27:42 -0400 (Sun, 03 Oct 2004) | 2 lines

Added auto-detection of NTP running on local host.

------------------------------------------------------------------------
r6913 | rmanfredi | 2004-10-03 12:26:10 -0400 (Sun, 03 Oct 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6912 | rmanfredi | 2004-10-03 12:25:26 -0400 (Sun, 03 Oct 2004) | 2 lines

Added ntp.c.

------------------------------------------------------------------------
r6911 | rmanfredi | 2004-10-03 12:24:28 -0400 (Sun, 03 Oct 2004) | 2 lines

Added src/core/ntp.[ch].

------------------------------------------------------------------------
r6910 | rmanfredi | 2004-10-03 07:05:44 -0400 (Sun, 03 Oct 2004) | 2 lines

Switch to TCP if they don't answer our "Time Sync" requests via UDP.

------------------------------------------------------------------------
r6909 | rmanfredi | 2004-10-03 06:10:34 -0400 (Sun, 03 Oct 2004) | 4 lines

Alive pings now use the pre-send checking hook to ensure that only the
pings recorded last are sent on a given connection.
Fixed memory leak.

------------------------------------------------------------------------
r6908 | rmanfredi | 2004-10-03 06:08:48 -0400 (Sun, 03 Oct 2004) | 2 lines

Call new gmsg_install_presend() on allocated query message.

------------------------------------------------------------------------
r6907 | rmanfredi | 2004-10-03 06:05:52 -0400 (Sun, 03 Oct 2004) | 2 lines

Added gmsg_to_ctrl_pmsg_extend() and gmsg_install_presend().

------------------------------------------------------------------------
r6906 | rmanfredi | 2004-10-03 06:04:12 -0400 (Sun, 03 Oct 2004) | 4 lines

When writing a control message, make sure TX buffers are flushed, if needed.
Message queue now rely on the pmsg_check() pre-send hook to determine
whether a message can be sent or not.

------------------------------------------------------------------------
r6905 | rmanfredi | 2004-10-03 06:02:14 -0400 (Sun, 03 Oct 2004) | 2 lines

Added node_unflushq().

------------------------------------------------------------------------
r6904 | rmanfredi | 2004-10-03 06:01:50 -0400 (Sun, 03 Oct 2004) | 2 lines

Removed node_can_send(), as this is now handled using genering pre-send hooks.

------------------------------------------------------------------------
r6903 | rmanfredi | 2004-10-03 06:01:21 -0400 (Sun, 03 Oct 2004) | 2 lines

Added build_ping_msg().

------------------------------------------------------------------------
r6902 | rmanfredi | 2004-10-03 06:00:44 -0400 (Sun, 03 Oct 2004) | 2 lines

Added tsync_send_timestamp() to update the T1 sending time.

------------------------------------------------------------------------
r6901 | rmanfredi | 2004-10-03 05:59:38 -0400 (Sun, 03 Oct 2004) | 2 lines

Build ping messages using new build_ping_msg().

------------------------------------------------------------------------
r6900 | rmanfredi | 2004-10-03 05:59:00 -0400 (Sun, 03 Oct 2004) | 3 lines

The "Time Sync" messages now use the pre-sending checking hook to write
an accurate clock timestamp.

------------------------------------------------------------------------
r6899 | rmanfredi | 2004-10-03 05:57:47 -0400 (Sun, 03 Oct 2004) | 2 lines

Added the tx_flush() operation to force buffer flushing, if any.

------------------------------------------------------------------------
r6898 | rmanfredi | 2004-10-03 05:56:25 -0400 (Sun, 03 Oct 2004) | 2 lines

Added pre-send checking hook to the PDU message descriptor.

------------------------------------------------------------------------
r6897 | rmanfredi | 2004-10-03 05:55:08 -0400 (Sun, 03 Oct 2004) | 2 lines

Added mq_node().

------------------------------------------------------------------------
r6896 | rmanfredi | 2004-10-03 05:54:24 -0400 (Sun, 03 Oct 2004) | 2 lines

Exported cq_expire().

------------------------------------------------------------------------
r6895 | rmanfredi | 2004-09-29 17:54:07 -0400 (Wed, 29 Sep 2004) | 2 lines

Protected verbose dumping of file ranges with "dbg > 5".

------------------------------------------------------------------------
r6894 | rmanfredi | 2004-09-29 17:38:17 -0400 (Wed, 29 Sep 2004) | 2 lines

Version of 2004-09-29.

------------------------------------------------------------------------
r6893 | rmanfredi | 2004-09-29 17:37:05 -0400 (Wed, 29 Sep 2004) | 2 lines

Added tm_hash() and tm_equal().

------------------------------------------------------------------------
r6892 | rmanfredi | 2004-09-29 17:36:40 -0400 (Wed, 29 Sep 2004) | 2 lines

Show TCP/UDP round-trip times as determined from "Time Sync" messages.

------------------------------------------------------------------------
r6891 | rmanfredi | 2004-09-29 17:35:43 -0400 (Wed, 29 Sep 2004) | 2 lines

Count unclaimed and partially claimed OOB locally-generated hits.

------------------------------------------------------------------------
r6890 | rmanfredi | 2004-09-29 17:34:29 -0400 (Wed, 29 Sep 2004) | 2 lines

Added "Time Sync" vendor messages.

------------------------------------------------------------------------
r6889 | rmanfredi | 2004-09-29 17:33:46 -0400 (Wed, 29 Sep 2004) | 2 lines

Exported gmsg_to_ctrl_pmsg().

------------------------------------------------------------------------
r6888 | rmanfredi | 2004-09-29 17:33:17 -0400 (Wed, 29 Sep 2004) | 2 lines

Precision for clock updates from remote Date header set to 10 secs.

------------------------------------------------------------------------
r6887 | rmanfredi | 2004-09-29 17:32:27 -0400 (Wed, 29 Sep 2004) | 2 lines

Accept clock synchronization from same IP if the precision is better.

------------------------------------------------------------------------
r6886 | rmanfredi | 2004-09-29 17:30:02 -0400 (Wed, 29 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6885 | rmanfredi | 2004-09-29 17:29:37 -0400 (Wed, 29 Sep 2004) | 2 lines

Added tsync.c.

------------------------------------------------------------------------
r6884 | rmanfredi | 2004-09-29 17:29:00 -0400 (Wed, 29 Sep 2004) | 2 lines

Forgot to remove XXX comments.

------------------------------------------------------------------------
r6883 | rmanfredi | 2004-09-29 17:28:17 -0400 (Wed, 29 Sep 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6882 | rmanfredi | 2004-09-29 17:27:48 -0400 (Wed, 29 Sep 2004) | 2 lines

Added src/core/tsync.[ch].

------------------------------------------------------------------------
r6881 | rmanfredi | 2004-09-29 17:27:12 -0400 (Wed, 29 Sep 2004) | 2 lines

Plugged in tsync.

------------------------------------------------------------------------
r6880 | rmanfredi | 2004-09-29 17:26:20 -0400 (Wed, 29 Sep 2004) | 2 lines

Added Time Sync vendor messages.

------------------------------------------------------------------------
r6879 | rmanfredi | 2004-09-28 14:43:01 -0400 (Tue, 28 Sep 2004) | 2 lines

The header to emit is X-Push-Proxy now, not X-Push-Proxies.

------------------------------------------------------------------------
r6878 | rmanfredi | 2004-09-28 10:54:46 -0400 (Tue, 28 Sep 2004) | 2 lines

Forgot to add parameter to search_gui_reset_search() call.

------------------------------------------------------------------------
r6877 | rmanfredi | 2004-09-28 01:20:59 -0400 (Tue, 28 Sep 2004) | 2 lines

Made gui_search_clear_results() call search_gui_reset_search().

------------------------------------------------------------------------
r6876 | rmanfredi | 2004-09-27 16:04:46 -0400 (Mon, 27 Sep 2004) | 2 lines

Check GGEP "H" and "u" in query hits for improbable SHA1.

------------------------------------------------------------------------
r6875 | rmanfredi | 2004-09-27 16:02:33 -0400 (Mon, 27 Sep 2004) | 2 lines

The "improbable SHA1" detection now recognizes trivial sequences.

------------------------------------------------------------------------
r6874 | rmanfredi | 2004-09-27 15:50:56 -0400 (Mon, 27 Sep 2004) | 3 lines

Ensure UDP socket gets a large RX buffer size, to avoid dropping datagrams
if we're busy and we can't process them yet.

------------------------------------------------------------------------
r6873 | rmanfredi | 2004-09-27 15:50:22 -0400 (Mon, 27 Sep 2004) | 2 lines

Count QUEUE and GIV callback requests.

------------------------------------------------------------------------
r6872 | rmanfredi | 2004-09-27 15:49:22 -0400 (Mon, 27 Sep 2004) | 2 lines

Count QUEUE callback requests we get.

------------------------------------------------------------------------
r6871 | rmanfredi | 2004-09-27 15:48:09 -0400 (Mon, 27 Sep 2004) | 2 lines

Leaf node's TX buffer size was too small for decent output.

------------------------------------------------------------------------
r6870 | rmanfredi | 2004-09-27 15:46:54 -0400 (Mon, 27 Sep 2004) | 2 lines

Noted that parameter to gnet_stats_count_general() can be NULL.

------------------------------------------------------------------------
r6869 | rmanfredi | 2004-09-27 15:45:56 -0400 (Mon, 27 Sep 2004) | 3 lines

Assume the majority of servents will now understand bounded Range requests.
Count GIV callback requests we get.

------------------------------------------------------------------------
r6868 | graaff | 2004-09-27 13:11:08 -0400 (Mon, 27 Sep 2004) | 2 lines

Use right type for 'last' variable.

------------------------------------------------------------------------
r6867 | rmanfredi | 2004-09-26 18:14:03 -0400 (Sun, 26 Sep 2004) | 2 lines

Version of 2004-09-26.

------------------------------------------------------------------------
r6866 | rmanfredi | 2004-09-26 16:10:52 -0400 (Sun, 26 Sep 2004) | 3 lines

Raised max # of downloads to 5000, default auto-retry timeout to 300 secs,
and default connecting timeout to 60 seconds.

------------------------------------------------------------------------
r6865 | rmanfredi | 2004-09-26 16:08:12 -0400 (Sun, 26 Sep 2004) | 3 lines

Always send a PONG with personal information, even when the local IP
address is unknown.

------------------------------------------------------------------------
r6864 | rmanfredi | 2004-09-26 06:50:50 -0400 (Sun, 26 Sep 2004) | 2 lines

Don't decrement TTL during routing if it was 0.

------------------------------------------------------------------------
r6863 | rmanfredi | 2004-09-26 06:01:20 -0400 (Sun, 26 Sep 2004) | 4 lines

When bandwidth is not capped, adjust the maximum used to show the
used bandwidth so that sudden bursts don't cause subsequent display
to show negligeable percentage.

------------------------------------------------------------------------
r6862 | rmanfredi | 2004-09-26 06:00:51 -0400 (Sun, 26 Sep 2004) | 3 lines

Ensure we see either the yellow or the red bomb icons, but never the two
at the same time.

------------------------------------------------------------------------
r6861 | rmanfredi | 2004-09-26 05:57:06 -0400 (Sun, 26 Sep 2004) | 2 lines

Added is_printable().

------------------------------------------------------------------------
r6860 | rmanfredi | 2004-09-26 05:56:37 -0400 (Sun, 26 Sep 2004) | 2 lines

Force "auto mode" when they run as ultra mode and get firewalled.

------------------------------------------------------------------------
r6859 | rmanfredi | 2004-09-26 05:55:53 -0400 (Sun, 26 Sep 2004) | 2 lines

When debugging, always show bad SHA1 and old-style SHA1 in the logs.

------------------------------------------------------------------------
r6858 | rmanfredi | 2004-09-25 16:21:05 -0400 (Sat, 25 Sep 2004) | 2 lines

Don't emit our X-Features to banning servents.

------------------------------------------------------------------------
r6857 | rmanfredi | 2004-09-25 13:38:51 -0400 (Sat, 25 Sep 2004) | 2 lines

Version of 2004-09-25.

------------------------------------------------------------------------
r6856 | rmanfredi | 2004-09-25 13:37:58 -0400 (Sat, 25 Sep 2004) | 5 lines

Account for "uploads_stalling" when determining whether we have enough
b/w to stay an ultranode.
Double time spent as a leaf node in auto-mode each time we switch back
to leaf mode.

------------------------------------------------------------------------
r6855 | rmanfredi | 2004-09-25 13:36:00 -0400 (Sat, 25 Sep 2004) | 2 lines

Hold back all downloads from server when banning suspected.

------------------------------------------------------------------------
r6854 | rmanfredi | 2004-09-25 13:35:07 -0400 (Sat, 25 Sep 2004) | 4 lines

Revisited the computation performed to determine whether we can be an
ultra node: only use the EMA of the outgoing b/w if they have running
uploads.  Lowered b/w requirements to only 128 B/s per connection.

------------------------------------------------------------------------
r6853 | rmanfredi | 2004-09-25 13:33:28 -0400 (Sat, 25 Sep 2004) | 2 lines

Tell them every 5 attempts that they're banned instead of 10.

------------------------------------------------------------------------
r6852 | rmanfredi | 2004-09-25 12:18:03 -0400 (Sat, 25 Sep 2004) | 2 lines

Fixed typo (+== instead of +=).

------------------------------------------------------------------------
r6851 | rmanfredi | 2004-09-25 07:58:39 -0400 (Sat, 25 Sep 2004) | 3 lines

Count the GTKG queries and requeries we see, as well as queries for which
we can reply using GGEP "H" for SHA1.

------------------------------------------------------------------------
r6850 | rmanfredi | 2004-09-25 07:56:44 -0400 (Sat, 25 Sep 2004) | 3 lines

Ignore improbable SHA1 made of identical bytes, either in their base32
encoding or in their binary form.

------------------------------------------------------------------------
r6849 | rmanfredi | 2004-09-25 07:55:23 -0400 (Sat, 25 Sep 2004) | 3 lines

Now assumes that all servers support the /uri-res/N2R? file requesting.
We don't really want to download anything from older servents anyway.

------------------------------------------------------------------------
r6848 | cbiere | 2004-09-25 06:40:30 -0400 (Sat, 25 Sep 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r6847 | rmanfredi | 2004-09-24 17:35:59 -0400 (Fri, 24 Sep 2004) | 2 lines

Append "alt" to query hits bearing alt-locs.

------------------------------------------------------------------------
r6846 | rmanfredi | 2004-09-24 17:33:54 -0400 (Fri, 24 Sep 2004) | 3 lines

Don't show the origin IP address of UDP-delivered hits if it matches the
one held in the query hit.

------------------------------------------------------------------------
r6845 | rmanfredi | 2004-09-24 16:35:19 -0400 (Fri, 24 Sep 2004) | 2 lines

Tell them in the search statusbar when the search was stopped.

------------------------------------------------------------------------
r6844 | rmanfredi | 2004-09-24 14:56:26 -0400 (Fri, 24 Sep 2004) | 2 lines

Replaced my dead cache in the hardwired list with the new Crab @ LW.

------------------------------------------------------------------------
r6843 | rmanfredi | 2004-09-24 14:34:28 -0400 (Fri, 24 Sep 2004) | 4 lines

New "H=xxx" statistics for nodes, enabled when dups/bad etc... are
configured for display, showing the amount of messages bearing an
hostile IP address which we get from the node.

------------------------------------------------------------------------
r6842 | rmanfredi | 2004-09-24 14:30:15 -0400 (Fri, 24 Sep 2004) | 3 lines

Fixed warning about badly configured proxy, which must be emitted only
when a proxy is chosen.

------------------------------------------------------------------------
r6841 | rmanfredi | 2004-09-23 18:27:32 -0400 (Thu, 23 Sep 2004) | 3 lines

Fixed build_url_from_download() in case d->sha1 is NULL but we have
the SHA1 in the associated fileinfo.

------------------------------------------------------------------------
r6840 | rmanfredi | 2004-09-23 17:56:52 -0400 (Thu, 23 Sep 2004) | 2 lines

Use SHA1 from fileinfo to drive the use of N2R requests.

------------------------------------------------------------------------
r6839 | rmanfredi | 2004-09-23 17:42:45 -0400 (Thu, 23 Sep 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r6838 | rmanfredi | 2004-09-23 17:42:03 -0400 (Thu, 23 Sep 2004) | 2 lines

Show IP address of UDP-delivered hits.

------------------------------------------------------------------------
r6837 | rmanfredi | 2004-09-23 17:36:32 -0400 (Thu, 23 Sep 2004) | 2 lines

Forgot to include "routing.h".

------------------------------------------------------------------------
r6836 | rmanfredi | 2004-09-23 17:23:43 -0400 (Thu, 23 Sep 2004) | 3 lines

Don't count the IP as alien if the hit's address is that of a private
network, in case the servent is firewalled.

------------------------------------------------------------------------
r6835 | rmanfredi | 2004-09-23 17:11:38 -0400 (Thu, 23 Sep 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r6834 | rmanfredi | 2004-09-23 17:11:00 -0400 (Thu, 23 Sep 2004) | 3 lines

Don't send PUSHes too often.  Just because we don't get a reply immediately
does not mean the PUSH is not travelling its way.

------------------------------------------------------------------------
r6833 | rmanfredi | 2004-09-23 17:09:50 -0400 (Thu, 23 Sep 2004) | 2 lines

Have shell announce the program's version.

------------------------------------------------------------------------
r6832 | rmanfredi | 2004-09-23 17:09:04 -0400 (Thu, 23 Sep 2004) | 2 lines

Setting of OOB queries is now an "expert" frame.

------------------------------------------------------------------------
r6831 | rmanfredi | 2004-09-23 17:07:08 -0400 (Thu, 23 Sep 2004) | 3 lines

Named frame where icons are displayed to be able to shrink it.
Setting of OOB queries is now an "expert" frame.

------------------------------------------------------------------------
r6830 | rmanfredi | 2004-09-23 17:05:20 -0400 (Thu, 23 Sep 2004) | 3 lines

Frame where icons are displayed will now properly shrink when an icon
is hidden.

------------------------------------------------------------------------
r6829 | rmanfredi | 2004-09-23 17:03:53 -0400 (Thu, 23 Sep 2004) | 3 lines

Was improperly lighting up the warning for stalling uploads at the first
stall, instead of waiting for many to occur in a row.

------------------------------------------------------------------------
r6828 | rmanfredi | 2004-09-23 17:02:37 -0400 (Thu, 23 Sep 2004) | 2 lines

Count UDP hits bearing a different IP address from where they're sent from.

------------------------------------------------------------------------
r6827 | rmanfredi | 2004-09-23 13:25:55 -0400 (Thu, 23 Sep 2004) | 2 lines

Version of 2004-09-23.

------------------------------------------------------------------------
r6826 | rmanfredi | 2004-09-23 13:24:59 -0400 (Thu, 23 Sep 2004) | 3 lines

Will now show a warning if uploads are stalling abnormally, and a firewall
with a green hole if we can perform UDP hole punching.

------------------------------------------------------------------------
r6825 | rmanfredi | 2004-09-23 13:24:39 -0400 (Thu, 23 Sep 2004) | 2 lines

Added new icons.

------------------------------------------------------------------------
r6824 | rmanfredi | 2004-09-23 13:21:54 -0400 (Thu, 23 Sep 2004) | 4 lines

New property "uploads_stalling" to track abnormal upload stalling.
New property "recv_solicited_udp" to determine whether we can perform
UDP hole punching.

------------------------------------------------------------------------
r6823 | rmanfredi | 2004-09-23 13:20:33 -0400 (Thu, 23 Sep 2004) | 2 lines

Update new property "uploads_stalling".

------------------------------------------------------------------------
r6822 | rmanfredi | 2004-09-23 13:19:29 -0400 (Thu, 23 Sep 2004) | 2 lines

Added udp_send_ping().

------------------------------------------------------------------------
r6821 | rmanfredi | 2004-09-23 13:19:04 -0400 (Thu, 23 Sep 2004) | 2 lines

Ensure we can receive solicited UDP traffic before advertising OOB hits.

------------------------------------------------------------------------
r6820 | rmanfredi | 2004-09-23 13:17:41 -0400 (Thu, 23 Sep 2004) | 2 lines

Don't call dh_got_results() if we don't have to forward the hit.

------------------------------------------------------------------------
r6819 | rmanfredi | 2004-09-23 13:16:50 -0400 (Thu, 23 Sep 2004) | 3 lines

Send an UDP ping to our peers when we connect and we're not sure whether
we can get UDP solicited traffic.

------------------------------------------------------------------------
r6818 | rmanfredi | 2004-09-23 13:15:39 -0400 (Thu, 23 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6817 | rmanfredi | 2004-09-23 13:15:32 -0400 (Thu, 23 Sep 2004) | 2 lines

Keep track of whether we receive solicited UDP traffic.

------------------------------------------------------------------------
r6816 | rmanfredi | 2004-09-23 13:14:25 -0400 (Thu, 23 Sep 2004) | 2 lines

Added 3 new icons.

------------------------------------------------------------------------
r6815 | cbiere | 2004-09-21 22:22:53 -0400 (Tue, 21 Sep 2004) | 4 lines

socket_connect_finalize():
	Added check for hostile IP address to make sure we do not connect
	to those in *any* case.

------------------------------------------------------------------------
r6814 | cbiere | 2004-09-21 22:20:14 -0400 (Tue, 21 Sep 2004) | 5 lines

node_add_socket():
	Allow manual override of min/max connection settings. Otherwise, it's
	close to impossible to manually initiate a Gnutella connection at
	all.

------------------------------------------------------------------------
r6813 | cbiere | 2004-09-21 21:50:52 -0400 (Tue, 21 Sep 2004) | 2 lines

Added IP address of weasel.net which is attacking GWebCaches.

------------------------------------------------------------------------
r6812 | cbiere | 2004-09-21 21:37:17 -0400 (Tue, 21 Sep 2004) | 4 lines

upload_request():
	Fixed my inverted logic bug introduced in rev. 1.217 which made
	uploading impossible on system without sendfile().

------------------------------------------------------------------------
r6811 | rmanfredi | 2004-09-21 17:08:23 -0400 (Tue, 21 Sep 2004) | 2 lines

Version of 2004-09-21.

------------------------------------------------------------------------
r6810 | rmanfredi | 2004-09-21 17:03:35 -0400 (Tue, 21 Sep 2004) | 2 lines

Send "Query Status Request" as a control prioritary message.

------------------------------------------------------------------------
r6809 | rmanfredi | 2004-09-21 17:02:09 -0400 (Tue, 21 Sep 2004) | 4 lines

Dont call oob_proxy_got_results() if we already determined that the
dynamic query was expired, meaning we won't forward the claimed hits
to the leaf node.

------------------------------------------------------------------------
r6808 | rmanfredi | 2004-09-21 16:58:01 -0400 (Tue, 21 Sep 2004) | 3 lines

Let dynamic query know about unclaimed OOB-proxied hits.
Call dh_would_route() before claiming the hits.

------------------------------------------------------------------------
r6807 | rmanfredi | 2004-09-21 16:55:43 -0400 (Tue, 21 Sep 2004) | 5 lines

Let dynamic query know about unclaimed OOB hits.
Raised timeout for "Query Status Response" to 30 seconds.
Don't send dynamic query to another node if we already queued but not
sent 3 queries to other nodes.

------------------------------------------------------------------------
r6806 | rmanfredi | 2004-09-21 16:52:38 -0400 (Tue, 21 Sep 2004) | 4 lines

Deleted obsolete code in download_push_insert() and download_push_remove():
select_push_download() has already all the logic to grab the proper
download when a GIV is received.

------------------------------------------------------------------------
r6805 | rmanfredi | 2004-09-21 16:43:57 -0400 (Tue, 21 Sep 2004) | 4 lines

Added dh_would_route() for the OOB-proxying layer to be able to determine
whether the hits it would claim would be delivered to the leaf or
thrown away by the dynamic hit layer.

------------------------------------------------------------------------
r6804 | cbiere | 2004-09-20 21:49:20 -0400 (Mon, 20 Sep 2004) | 3 lines

Use only the GUID not the record_index (fileindex) to map incoming GIV
requests to push downloads.

------------------------------------------------------------------------
r6803 | rmanfredi | 2004-09-20 16:59:17 -0400 (Mon, 20 Sep 2004) | 3 lines

Can start querying as a UP when the missing nodes are less than 2/3 of the
target amount of nodes.

------------------------------------------------------------------------
r6802 | cbiere | 2004-09-20 16:56:08 -0400 (Mon, 20 Sep 2004) | 4 lines

Make sure CFLAGS and JCFLAGS are identical. This fixes a compile on FreeBSD
when using its native make (instead of GNU make) and CFLAGS are not initialized
when compiling y.tab.c.

------------------------------------------------------------------------
r6801 | rmanfredi | 2004-09-20 16:51:38 -0400 (Mon, 20 Sep 2004) | 2 lines

Forgot to run the compilation phase after reloading the file.

------------------------------------------------------------------------
r6800 | cbiere | 2004-09-20 16:39:43 -0400 (Mon, 20 Sep 2004) | 4 lines

Changed the quit dialog:
	Ask for Cancel/Quit instead of Cancel/OK to be consistent with other
	GTK+/GNOME apps. Requested by Hein-Jan Leliveld.

------------------------------------------------------------------------
r6799 | rmanfredi | 2004-09-20 16:37:23 -0400 (Mon, 20 Sep 2004) | 2 lines

Version of 2004-09-20.

------------------------------------------------------------------------
r6798 | rmanfredi | 2004-09-20 16:30:22 -0400 (Mon, 20 Sep 2004) | 3 lines

Don't compress QRP patches using Z_BEST_COMPRESSION.  The gains we can have
over Z_DEFAULT_COMPRESSION are not worth the increased CPU usage.

------------------------------------------------------------------------
r6797 | rmanfredi | 2004-09-20 16:28:12 -0400 (Mon, 20 Sep 2004) | 2 lines

Added file_config_open_read_norename_chosen().

------------------------------------------------------------------------
r6796 | rmanfredi | 2004-09-20 16:27:35 -0400 (Mon, 20 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6795 | rmanfredi | 2004-09-20 16:25:52 -0400 (Mon, 20 Sep 2004) | 2 lines

Added watcher.c.

------------------------------------------------------------------------
r6794 | rmanfredi | 2004-09-20 16:25:45 -0400 (Mon, 20 Sep 2004) | 2 lines

Added gcu_statusbar_message().

------------------------------------------------------------------------
r6793 | rmanfredi | 2004-09-20 16:24:08 -0400 (Mon, 20 Sep 2004) | 3 lines

Monitor the hostiles.txt file and reload it automatically if it changes
(closes RFE #1003129).

------------------------------------------------------------------------
r6792 | rmanfredi | 2004-09-20 16:23:36 -0400 (Mon, 20 Sep 2004) | 2 lines

Plugged watcher in.

------------------------------------------------------------------------
r6791 | rmanfredi | 2004-09-20 16:19:58 -0400 (Mon, 20 Sep 2004) | 3 lines

Raised the timeouts for dynamic querying slightly, to see if we can get
less traffic overall and less results during lingering period.

------------------------------------------------------------------------
r6790 | rmanfredi | 2004-09-20 16:18:26 -0400 (Mon, 20 Sep 2004) | 2 lines

Added src/lib/watcher.[ch].

------------------------------------------------------------------------
r6789 | rmanfredi | 2004-09-20 16:18:24 -0400 (Mon, 20 Sep 2004) | 3 lines

Converted more printf() into g_message() as this seems a trend.
Protected a few g_message() with "if (dbg)".

------------------------------------------------------------------------
r6788 | cbiere | 2004-09-20 16:17:12 -0400 (Mon, 20 Sep 2004) | 3 lines

gcu_statusbar_warning():
	Fixed format string vulnerability.

------------------------------------------------------------------------
r6787 | cbiere | 2004-09-20 15:52:19 -0400 (Mon, 20 Sep 2004) | 7 lines

download_send_request():
	Requests the file by urn:sha1 if the sha1 is available instead of
	by filename. This is necessary because we don't keep the original
	filename if it wasn't validly UTF-8 encoded and the remote servent
	wouldn't know the file due to the different encoding.
	URL-encode the filename if the file is requested by filename.

------------------------------------------------------------------------
r6786 | rmanfredi | 2004-09-20 12:31:58 -0400 (Mon, 20 Sep 2004) | 2 lines

Updated to include GTKG/7v2 specs.

------------------------------------------------------------------------
r6785 | rmanfredi | 2004-09-20 09:20:32 -0400 (Mon, 20 Sep 2004) | 3 lines

Moved OOB query counting to the routing layer, since it is also where we
detect duplicates: we must count the duplicates as OOB queries too.

------------------------------------------------------------------------
r6784 | rmanfredi | 2004-09-20 08:57:46 -0400 (Mon, 20 Sep 2004) | 2 lines

Count the amount of queries we see with the OOB flag set.

------------------------------------------------------------------------
r6783 | rmanfredi | 2004-09-20 08:42:46 -0400 (Mon, 20 Sep 2004) | 3 lines

zlib_deflater_make() no longer uses level 0 as an alias for the default
compression level.  Use Z_DEFAULT_COMPRESSION if you want the default.

------------------------------------------------------------------------
r6782 | rmanfredi | 2004-09-20 08:40:55 -0400 (Mon, 20 Sep 2004) | 2 lines

Count the amount of OOB hits received for OOB-proxied queries.

------------------------------------------------------------------------
r6781 | rmanfredi | 2004-09-20 08:38:58 -0400 (Mon, 20 Sep 2004) | 3 lines

Must probe for GTKG queries before we mangle the OOB bit in queries, since
the GUID format varies.

------------------------------------------------------------------------
r6780 | rmanfredi | 2004-09-20 08:37:14 -0400 (Mon, 20 Sep 2004) | 3 lines

Improved delivery of query hits to searches by making it faster to locate
a search given a MUID.

------------------------------------------------------------------------
r6779 | rmanfredi | 2004-09-20 08:34:53 -0400 (Mon, 20 Sep 2004) | 2 lines

Removed magic manifest constant.

------------------------------------------------------------------------
r6778 | rmanfredi | 2004-09-20 08:20:01 -0400 (Mon, 20 Sep 2004) | 3 lines

Was mistakenly requesting too many hits from remote parties.
Count the amount of OOB hits received for OOB-proxied queries.

------------------------------------------------------------------------
r6777 | rmanfredi | 2004-09-20 08:17:56 -0400 (Mon, 20 Sep 2004) | 2 lines

Was not displaying any instantaneous RX traffic rate for the pseudo UDP node.

------------------------------------------------------------------------
r6776 | rmanfredi | 2004-09-20 08:09:54 -0400 (Mon, 20 Sep 2004) | 2 lines

Allocate bio objects using walloc.

------------------------------------------------------------------------
r6775 | rmanfredi | 2004-09-20 03:55:23 -0400 (Mon, 20 Sep 2004) | 3 lines

Can only check the IP of neighbours setting the OOB flag on queries, since
the UDP port can be different from the TCP port.

------------------------------------------------------------------------
r6774 | rmanfredi | 2004-09-20 03:53:55 -0400 (Mon, 20 Sep 2004) | 2 lines

Don't check for TTL=0 on hits for OOB-proxied queries.

------------------------------------------------------------------------
r6773 | rmanfredi | 2004-09-20 03:38:00 -0400 (Mon, 20 Sep 2004) | 2 lines

Added 32.105.110.0/24 and 114.46.32.0/24.

------------------------------------------------------------------------
r6772 | rmanfredi | 2004-09-20 02:04:48 -0400 (Mon, 20 Sep 2004) | 2 lines

Increase TTL before routing to leaf if it was TTL=0.

------------------------------------------------------------------------
r6771 | rmanfredi | 2004-09-20 01:36:51 -0400 (Mon, 20 Sep 2004) | 5 lines

Fixed OOB-proxy routing logic to no longer use the routing table: we keep
the ID of the leaf node originating the query around.
Don't claim UDP results fro OOB-proxied query when the leaf node is
in TX flow-control.

------------------------------------------------------------------------
r6770 | rmanfredi | 2004-09-20 01:32:31 -0400 (Mon, 20 Sep 2004) | 2 lines

Force dq_get_results_wanted() to return 0 if the query was cancelled.

------------------------------------------------------------------------
r6769 | rmanfredi | 2004-09-19 18:29:35 -0400 (Sun, 19 Sep 2004) | 2 lines

Version of 2004-09-19.

------------------------------------------------------------------------
r6768 | rmanfredi | 2004-09-19 18:28:41 -0400 (Sun, 19 Sep 2004) | 2 lines

Forgot to call wfree().

------------------------------------------------------------------------
r6767 | rmanfredi | 2004-09-19 18:20:00 -0400 (Sun, 19 Sep 2004) | 2 lines

Added GUI mapping for new "proxy_oob_queries" property.

------------------------------------------------------------------------
r6766 | rmanfredi | 2004-09-19 18:14:51 -0400 (Sun, 19 Sep 2004) | 2 lines

Enclosed debugging routines in #ifdef VP_DEBUG sections.

------------------------------------------------------------------------
r6765 | rmanfredi | 2004-09-19 18:14:31 -0400 (Sun, 19 Sep 2004) | 2 lines

Plugged management of property "proxy_oob_queries".

------------------------------------------------------------------------
r6764 | rmanfredi | 2004-09-19 18:11:15 -0400 (Sun, 19 Sep 2004) | 3 lines

New general statistics: GNR_OOB_PROXIED_QUERY_HITS,
GNR_QUERY_OOB_PROXIED_DUPS and GNR_OOB_PROXIED_QUERIES.

------------------------------------------------------------------------
r6763 | rmanfredi | 2004-09-19 18:10:38 -0400 (Sun, 19 Sep 2004) | 2 lines

New property "proxy_oob_queries" to control OOB-proxying by the ultranode.

------------------------------------------------------------------------
r6762 | rmanfredi | 2004-09-19 18:08:44 -0400 (Sun, 19 Sep 2004) | 3 lines

All OOB-query flag sanitizing is now done here.
Implemented OOB-proxying of queries, when running as ultranode.

------------------------------------------------------------------------
r6761 | rmanfredi | 2004-09-19 18:07:07 -0400 (Sun, 19 Sep 2004) | 3 lines

Pass all valid query hits to the OOB-proxying layer in case the MUID is
that of an OOB-proxied query.

------------------------------------------------------------------------
r6760 | rmanfredi | 2004-09-19 18:05:32 -0400 (Sun, 19 Sep 2004) | 2 lines

Asserted that one cannot BYE the UDP node.

------------------------------------------------------------------------
r6759 | rmanfredi | 2004-09-19 18:04:59 -0400 (Sun, 19 Sep 2004) | 3 lines

Ammended the routing policy of queries to account for duplicate OOB-proxied
queries that would differ only in the IP:port of their MUID.

------------------------------------------------------------------------
r6758 | rmanfredi | 2004-09-19 18:02:54 -0400 (Sun, 19 Sep 2004) | 4 lines

Added dq_got_results() and dq_get_results_wanted() for the OOB-proxying layer.
Moved OOB flag sanitizing code to share.c, since we have to sanitize before
deciding whether we'll OOB-proxy the query.

------------------------------------------------------------------------
r6757 | rmanfredi | 2004-09-19 18:01:02 -0400 (Sun, 19 Sep 2004) | 2 lines

Small signature change in dh_got_results().

------------------------------------------------------------------------
r6756 | rmanfredi | 2004-09-19 18:00:33 -0400 (Sun, 19 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6755 | rmanfredi | 2004-09-19 17:59:28 -0400 (Sun, 19 Sep 2004) | 2 lines

Added oob_proxy.c.

------------------------------------------------------------------------
r6754 | rmanfredi | 2004-09-19 17:58:58 -0400 (Sun, 19 Sep 2004) | 2 lines

Added src/core/oob_proxy.[ch].

------------------------------------------------------------------------
r6753 | rmanfredi | 2004-09-19 05:55:22 -0400 (Sun, 19 Sep 2004) | 3 lines

Let the core update the statusbar if they are firewalled and want to run
as something else than a leaf node.

------------------------------------------------------------------------
r6752 | rmanfredi | 2004-09-19 05:36:32 -0400 (Sun, 19 Sep 2004) | 2 lines

Added GUI mapping for new "routing_debug" property.

------------------------------------------------------------------------
r6751 | rmanfredi | 2004-09-19 05:34:07 -0400 (Sun, 19 Sep 2004) | 3 lines

Warn them in the statusbar if they attempt to choose a non-leaf mode
and they are firewalled.

------------------------------------------------------------------------
r6750 | rmanfredi | 2004-09-19 05:27:51 -0400 (Sun, 19 Sep 2004) | 2 lines

New property "routing_debug" to control debugging for message routing.

------------------------------------------------------------------------
r6749 | rmanfredi | 2004-09-19 05:26:06 -0400 (Sun, 19 Sep 2004) | 2 lines

Added core -> UI bridge routine guc_statusbar_warning().

------------------------------------------------------------------------
r6748 | rmanfredi | 2004-09-19 05:24:39 -0400 (Sun, 19 Sep 2004) | 2 lines

Fixed routing debugging logs.

------------------------------------------------------------------------
r6747 | rmanfredi | 2004-09-19 05:23:32 -0400 (Sun, 19 Sep 2004) | 2 lines

Automatically demote an Ultrapeer that appears to be TCP-firewalled.

------------------------------------------------------------------------
r6746 | cbiere | 2004-09-18 20:02:21 -0400 (Sat, 18 Sep 2004) | 3 lines

Do always include <locale.h>. Otherwise, the charset cannot be detected which
might be necessary for filename conversions.

------------------------------------------------------------------------
r6745 | cbiere | 2004-09-18 19:56:58 -0400 (Sat, 18 Sep 2004) | 2 lines

Added missing #includes to make prototypes visible.

------------------------------------------------------------------------
r6744 | cbiere | 2004-09-18 19:54:15 -0400 (Sat, 18 Sep 2004) | 2 lines

Added missing casts to match format strings.

------------------------------------------------------------------------
r6743 | cbiere | 2004-09-18 19:53:01 -0400 (Sat, 18 Sep 2004) | 3 lines

parq_download_add_header():
	Changed prototype due to size_t vs. int mismatch.

------------------------------------------------------------------------
r6742 | cbiere | 2004-09-18 18:53:04 -0400 (Sat, 18 Sep 2004) | 2 lines

Added secondary server of isaveclub.com.

------------------------------------------------------------------------
r6741 | cbiere | 2004-09-18 17:11:21 -0400 (Sat, 18 Sep 2004) | 2 lines

Game Over for isaveclub.com.

------------------------------------------------------------------------
r6740 | rmanfredi | 2004-09-18 17:10:39 -0400 (Sat, 18 Sep 2004) | 5 lines

Drop OOB queries with a bad "return address" i.e. queries coming from a
neighbouring node and whose IP:port for return does not point back to the
issuing node.
Strip OOB flag on queries whose return adddress is a private IP.

------------------------------------------------------------------------
r6739 | rmanfredi | 2004-09-18 17:08:44 -0400 (Sat, 18 Sep 2004) | 2 lines

New drop reason: "bad return address".

------------------------------------------------------------------------
r6738 | rmanfredi | 2004-09-18 17:07:50 -0400 (Sat, 18 Sep 2004) | 2 lines

Removed duplicate check already done whilst processing query.

------------------------------------------------------------------------
r6737 | rmanfredi | 2004-09-18 16:48:12 -0400 (Sat, 18 Sep 2004) | 2 lines

Added more search statistics at the bottom of each search window.

------------------------------------------------------------------------
r6736 | rmanfredi | 2004-09-18 13:52:45 -0400 (Sat, 18 Sep 2004) | 2 lines

Version of 2004-09-18.

------------------------------------------------------------------------
r6735 | rmanfredi | 2004-09-18 13:51:43 -0400 (Sat, 18 Sep 2004) | 5 lines

Fixed binary search for vendor messages: was assuming there would not
be duplicates with only the version number changing in the table, but
this was forgotten and the table lists messages with different versions
as different entries.  Caused it to not process UDP connect back correctly.

------------------------------------------------------------------------
r6734 | rmanfredi | 2004-09-18 13:49:34 -0400 (Sat, 18 Sep 2004) | 4 lines

Must not reset n->socket after processing data from UDP node, since we
can issue an UDP message at any time, therefore the n->socket must stay
set at all times.  Removed node_udp_release().

------------------------------------------------------------------------
r6733 | trancetip | 2004-09-18 13:10:28 -0400 (Sat, 18 Sep 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r6732 | graaff | 2004-09-17 15:10:09 -0400 (Fri, 17 Sep 2004) | 2 lines

Should copy the new chunk, not construct a new, merged, chunk.

------------------------------------------------------------------------
r6731 | cbiere | 2004-09-17 01:17:37 -0400 (Fri, 17 Sep 2004) | 3 lines

vp_get_chunks_initial():
	Added missing prototype.

------------------------------------------------------------------------
r6730 | cbiere | 2004-09-16 23:06:29 -0400 (Thu, 16 Sep 2004) | 2 lines

Bugfix for #1029350: <langinfo.h> must be included even if NLS is disabled.

------------------------------------------------------------------------
r6729 | rmanfredi | 2004-09-15 18:14:40 -0400 (Wed, 15 Sep 2004) | 2 lines

Version of 2004-09-15.

------------------------------------------------------------------------
r6728 | rmanfredi | 2004-09-15 17:47:45 -0400 (Wed, 15 Sep 2004) | 2 lines

Commented out a known-to-be-failing assertion, pending fix.

------------------------------------------------------------------------
r6727 | rmanfredi | 2004-09-15 17:43:14 -0400 (Wed, 15 Sep 2004) | 3 lines

Handle GTKG/7v2, where GUID of the ping is taken from the MUID instead
of from the payload.

------------------------------------------------------------------------
r6726 | rmanfredi | 2004-09-15 17:38:52 -0400 (Wed, 15 Sep 2004) | 2 lines

Added debugging output of the unknown trailer part in query hits.

------------------------------------------------------------------------
r6725 | rmanfredi | 2004-09-15 16:11:44 -0400 (Wed, 15 Sep 2004) | 2 lines

If they remove the pseudo UDP node, it will disable UDP.

------------------------------------------------------------------------
r6724 | rmanfredi | 2004-09-15 15:58:37 -0400 (Wed, 15 Sep 2004) | 2 lines

Don't let them remove the pseudo UDP node.

------------------------------------------------------------------------
r6723 | rmanfredi | 2004-09-14 18:12:30 -0400 (Tue, 14 Sep 2004) | 2 lines

Was not accounting received queries and query hits for the UDP node.

------------------------------------------------------------------------
r6722 | graaff | 2004-09-13 16:16:47 -0400 (Mon, 13 Sep 2004) | 2 lines

More chunky fun: corrected starting position of a chunk.

------------------------------------------------------------------------
r6721 | rmanfredi | 2004-09-13 15:03:51 -0400 (Mon, 13 Sep 2004) | 3 lines

During the merging process, some chunks were created but not inserted
into the chunk list.

------------------------------------------------------------------------
r6720 | rmanfredi | 2004-09-13 14:17:10 -0400 (Mon, 13 Sep 2004) | 2 lines

RX dropped packets are now accounted for in gnet_stats_count_dropped().

------------------------------------------------------------------------
r6719 | rmanfredi | 2004-09-13 08:45:43 -0400 (Mon, 13 Sep 2004) | 3 lines

Removed left-over code from mq_tcp.c: do not call node_flushq() when
the service routine was unable to purge the whole queue.

------------------------------------------------------------------------
r6718 | graaff | 2004-09-12 17:14:48 -0400 (Sun, 12 Sep 2004) | 4 lines

Fix case where resume mismatch causes DONE chunk to become undone, and
comment out debugging print and assert statements to avoid
crashes.

------------------------------------------------------------------------
r6717 | graaff | 2004-09-12 14:25:28 -0400 (Sun, 12 Sep 2004) | 2 lines

Fix memory leak.

------------------------------------------------------------------------
r6716 | rmanfredi | 2004-09-12 14:17:54 -0400 (Sun, 12 Sep 2004) | 2 lines

Debugging in progress.

------------------------------------------------------------------------
r6715 | graaff | 2004-09-12 12:07:47 -0400 (Sun, 12 Sep 2004) | 3 lines

Fix minor bug, add additional assert to track down problems, clean up
code a bit and add doxygen comments.

------------------------------------------------------------------------
r6714 | rmanfredi | 2004-09-12 10:11:09 -0400 (Sun, 12 Sep 2004) | 2 lines

Version of 2004-09-11.

------------------------------------------------------------------------
r6713 | rmanfredi | 2004-09-12 10:05:01 -0400 (Sun, 12 Sep 2004) | 2 lines

Can now ask to display bytes sent/read from the wire for each node connection.

------------------------------------------------------------------------
r6712 | rmanfredi | 2004-09-12 10:02:13 -0400 (Sun, 12 Sep 2004) | 3 lines

Mapped "show_gnet_info_tx_wire" and "show_gnet_info_rx_wire" to their
corresponding toggle buttons.

------------------------------------------------------------------------
r6711 | rmanfredi | 2004-09-12 10:01:01 -0400 (Sun, 12 Sep 2004) | 2 lines

Display TX and RX wire bytes for each node, if configured to do so.

------------------------------------------------------------------------
r6710 | rmanfredi | 2004-09-12 10:00:01 -0400 (Sun, 12 Sep 2004) | 3 lines

New properties "show_gnet_info_tx_wire" and "show_gnet_info_rx_wire"
to govern display of TX and RX bytes, as sent/read from the wire.

------------------------------------------------------------------------
r6709 | rmanfredi | 2004-09-12 09:58:32 -0400 (Sun, 12 Sep 2004) | 2 lines

Fixed statistics bookkeeping for dropped UDP messages.

------------------------------------------------------------------------
r6708 | rmanfredi | 2004-09-12 09:55:07 -0400 (Sun, 12 Sep 2004) | 2 lines

Update RX traffic size for the pseudo UDP node.

------------------------------------------------------------------------
r6707 | rmanfredi | 2004-09-12 09:04:21 -0400 (Sun, 12 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6706 | rmanfredi | 2004-09-12 09:03:26 -0400 (Sun, 12 Sep 2004) | 3 lines

No longer needed to specify ">PRIVLIB" as jmake has been made smart
enough to figure it out by itself.

------------------------------------------------------------------------
r6705 | rmanfredi | 2004-09-12 09:01:44 -0400 (Sun, 12 Sep 2004) | 2 lines

Forgot to add the TCP and UDP firewall icons.

------------------------------------------------------------------------
r6704 | graaff | 2004-09-12 07:02:45 -0400 (Sun, 12 Sep 2004) | 2 lines

Update to work with new code structure.

------------------------------------------------------------------------
r6703 | graaff | 2004-09-12 06:25:52 -0400 (Sun, 12 Sep 2004) | 2 lines

Create event for available ranges updates and use it.

------------------------------------------------------------------------
r6702 | rmanfredi | 2004-09-12 06:05:02 -0400 (Sun, 12 Sep 2004) | 2 lines

Forgot to add SOCK_TYPE_UDP to bs_socket().

------------------------------------------------------------------------
r6701 | rmanfredi | 2004-09-12 06:00:07 -0400 (Sun, 12 Sep 2004) | 2 lines

Tag hits received from UDP in search results with the string "udp".

------------------------------------------------------------------------
r6700 | rmanfredi | 2004-09-12 05:59:16 -0400 (Sun, 12 Sep 2004) | 3 lines

Out-of-band hit delivery is now enabled by default.
Changed tooltip comment for property to explain the user benefits.

------------------------------------------------------------------------
r6699 | rmanfredi | 2004-09-12 05:57:00 -0400 (Sun, 12 Sep 2004) | 3 lines

Renamed vmsg_build_oob_reply_number() into vmsg_build_oob_reply_ind().
Fill payload for LIME/11v2 with the amount of hits we want.

------------------------------------------------------------------------
r6698 | rmanfredi | 2004-09-12 05:55:41 -0400 (Sun, 12 Sep 2004) | 3 lines

Renamed vmsg_build_oob_reply_number() into vmsg_build_oob_reply_ind().
Added MUID argument to vmsg_send_oob_reply_ack().

------------------------------------------------------------------------
r6697 | rmanfredi | 2004-09-12 05:54:43 -0400 (Sun, 12 Sep 2004) | 2 lines

Will now send queries marked for out-of-band hit delivery.

------------------------------------------------------------------------
r6696 | rmanfredi | 2004-09-12 05:52:46 -0400 (Sun, 12 Sep 2004) | 3 lines

Renamed oob_send_reply_number() into oob_send_reply_ind().
Renamed vmsg_build_oob_reply_number() into vmsg_build_oob_reply_ind().

------------------------------------------------------------------------
r6695 | rmanfredi | 2004-09-12 05:51:24 -0400 (Sun, 12 Sep 2004) | 2 lines

Forgot to arm the timer for monitoring absence of unsolicited UDP traffic.

------------------------------------------------------------------------
r6694 | rmanfredi | 2004-09-12 05:50:11 -0400 (Sun, 12 Sep 2004) | 2 lines

Added GUID generation for OOB queries.

------------------------------------------------------------------------
r6693 | rmanfredi | 2004-09-12 05:47:14 -0400 (Sun, 12 Sep 2004) | 4 lines

Strip OOB flag for leaf queries that also advertise they're firewalled.
Chances are that if they are TCP-firewalled, then they're UDP-firewalled
as well.

------------------------------------------------------------------------
r6692 | graaff | 2004-09-12 05:06:36 -0400 (Sun, 12 Sep 2004) | 2 lines

Initial version of the manual and associated Makefile.

------------------------------------------------------------------------
r6691 | graaff | 2004-09-12 05:03:15 -0400 (Sun, 12 Sep 2004) | 3 lines

New logic to determine available ranges; should be more accurate
already but needs more fine-tuning to better reflect reality.

------------------------------------------------------------------------
r6690 | graaff | 2004-09-12 04:57:36 -0400 (Sun, 12 Sep 2004) | 2 lines

Free the struct, not the pointer.

------------------------------------------------------------------------
r6689 | graaff | 2004-09-12 04:34:54 -0400 (Sun, 12 Sep 2004) | 3 lines

Properly implement accurate visual progress of downloaded chunks
instead of drawing old information on top of new.

------------------------------------------------------------------------
r6688 | rmanfredi | 2004-09-11 09:07:14 -0400 (Sat, 11 Sep 2004) | 2 lines

Version of 2004-09-10.

------------------------------------------------------------------------
r6687 | rmanfredi | 2004-09-11 09:05:55 -0400 (Sat, 11 Sep 2004) | 3 lines

Allow EINVAL as a legitimate error cause for sendto(), since apparently
linux returns this for weird IP addresses, like "0.76.207.219".

------------------------------------------------------------------------
r6686 | rmanfredi | 2004-09-11 09:04:15 -0400 (Sat, 11 Sep 2004) | 3 lines

Skip messages that cause an error during UDP write, but continue processing
remaining messages.

------------------------------------------------------------------------
r6685 | rmanfredi | 2004-09-11 08:44:02 -0400 (Sat, 11 Sep 2004) | 2 lines

Added spinbutton for "query_debug" setting.

------------------------------------------------------------------------
r6684 | rmanfredi | 2004-09-11 08:41:46 -0400 (Sat, 11 Sep 2004) | 3 lines

Forgot to map PROP_IS_UDP_FIREWALLED.
Added mapping for PROP_QUERY_DEBUG.

------------------------------------------------------------------------
r6683 | rmanfredi | 2004-09-11 08:37:55 -0400 (Sat, 11 Sep 2004) | 3 lines

GUI was not reporting Gnet b/w properly: it needs to sum the TCP and UDP
traffic shapers since allocated b/w is halved between those two.

------------------------------------------------------------------------
r6682 | rmanfredi | 2004-09-11 08:37:03 -0400 (Sat, 11 Sep 2004) | 2 lines

Forgot to include "if/core/upload_stats.h".

------------------------------------------------------------------------
r6681 | rmanfredi | 2004-09-11 08:36:20 -0400 (Sat, 11 Sep 2004) | 2 lines

Converted to doxygen style.

------------------------------------------------------------------------
r6680 | rmanfredi | 2004-09-11 08:35:00 -0400 (Sat, 11 Sep 2004) | 2 lines

Added BW_GNET_UDP_IN and BW_GNET_UDP_OUT constants.

------------------------------------------------------------------------
r6679 | rmanfredi | 2004-09-11 08:33:29 -0400 (Sat, 11 Sep 2004) | 3 lines

UDP listening is now enabled by default.
New property "query_debug" for debugging queries.

------------------------------------------------------------------------
r6678 | rmanfredi | 2004-09-11 08:30:49 -0400 (Sat, 11 Sep 2004) | 3 lines

Added support for vendor messages LIME/12v2 and LIME/11v2, delivered via
UDP to negotiate delivery of OOB query hits.

------------------------------------------------------------------------
r6677 | rmanfredi | 2004-09-11 08:29:57 -0400 (Sat, 11 Sep 2004) | 2 lines

Added comment.

------------------------------------------------------------------------
r6676 | rmanfredi | 2004-09-11 08:26:23 -0400 (Sat, 11 Sep 2004) | 3 lines

Record the IP address of all the nodes to which we send an UDP datagram
for accurate UDP-firewalling detection.

------------------------------------------------------------------------
r6675 | rmanfredi | 2004-09-11 08:25:22 -0400 (Sat, 11 Sep 2004) | 3 lines

Added query_strip_oob_flag().
Can now honour the OOB flag in queries and deliver hits out-of-band.

------------------------------------------------------------------------
r6674 | rmanfredi | 2004-09-11 08:23:53 -0400 (Sat, 11 Sep 2004) | 2 lines

Forgot to add bandwidth stats reclaiming for Gnet UDP in/out schedulers.

------------------------------------------------------------------------
r6673 | rmanfredi | 2004-09-11 08:22:11 -0400 (Sat, 11 Sep 2004) | 3 lines

Adapted the query hit generation process to OOB hits, since we must not
deliver those immediately but need to buffer them instead.

------------------------------------------------------------------------
r6672 | rmanfredi | 2004-09-11 08:20:38 -0400 (Sat, 11 Sep 2004) | 2 lines

No longer needs to call inet_udp_got_unsolicited_incoming().

------------------------------------------------------------------------
r6671 | rmanfredi | 2004-09-11 08:19:46 -0400 (Sat, 11 Sep 2004) | 5 lines

Added node_gnet_ip() and node_udp_get_outq().
Will now drop UDP messages coming from hostile IP addresses.
Added an "alive_ping" object to the pseudo UDP node for proper display
of round-trip stats for that node.

------------------------------------------------------------------------
r6670 | rmanfredi | 2004-09-11 08:16:22 -0400 (Sat, 11 Sep 2004) | 2 lines

Fixed unfortunate typo in assertion that could cause a crash.

------------------------------------------------------------------------
r6669 | rmanfredi | 2004-09-11 08:14:31 -0400 (Sat, 11 Sep 2004) | 4 lines

Smarter UDP-firewall (unsolicited traffic) detection: now keeps track of
the IP to which we sent datagrams for 2 minutes to avoid falsely marking
the node as not-firewalled when we receive data from those IPs.

------------------------------------------------------------------------
r6668 | rmanfredi | 2004-09-11 08:12:17 -0400 (Sat, 11 Sep 2004) | 2 lines

Dropped stats did not update the TCP-only and UDP-only stats.

------------------------------------------------------------------------
r6667 | rmanfredi | 2004-09-11 08:11:17 -0400 (Sat, 11 Sep 2004) | 3 lines

Strip OOB flag of OOB queries from leaves where the IP:port encoded in
the GUID of the message does not match the leave's ones.

------------------------------------------------------------------------
r6666 | rmanfredi | 2004-09-11 08:08:42 -0400 (Sat, 11 Sep 2004) | 3 lines

Forgot to free bws_gsteal_list at shutdown time.
Added various assertions to ensure there is never any NULL bio in the sources.

------------------------------------------------------------------------
r6665 | rmanfredi | 2004-09-11 08:06:36 -0400 (Sat, 11 Sep 2004) | 2 lines

Replaced == test by >= just in case.

------------------------------------------------------------------------
r6664 | rmanfredi | 2004-09-11 08:05:38 -0400 (Sat, 11 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6663 | rmanfredi | 2004-09-11 08:04:57 -0400 (Sat, 11 Sep 2004) | 2 lines

Added fifo.c.

------------------------------------------------------------------------
r6662 | rmanfredi | 2004-09-11 08:04:22 -0400 (Sat, 11 Sep 2004) | 2 lines

Added oob.c.

------------------------------------------------------------------------
r6661 | rmanfredi | 2004-09-11 08:03:45 -0400 (Sat, 11 Sep 2004) | 2 lines

Added call to new inet_close() on shutdown.

------------------------------------------------------------------------
r6660 | rmanfredi | 2004-09-11 08:03:03 -0400 (Sat, 11 Sep 2004) | 2 lines

Created src/lib/fifo.[ch] and src/core/oob.[ch].

------------------------------------------------------------------------
r6659 | nonamer | 2004-09-11 07:07:22 -0400 (Sat, 11 Sep 2004) | 2 lines

Initial commit. There are still some remaining FIXME's. Will fix these later

------------------------------------------------------------------------
r6658 | rmanfredi | 2004-09-11 06:03:59 -0400 (Sat, 11 Sep 2004) | 2 lines

Fixed prototype of nodes_gui_node_added().

------------------------------------------------------------------------
r6657 | rmanfredi | 2004-09-09 15:24:26 -0400 (Thu, 09 Sep 2004) | 2 lines

Version of 2004-09-08.

------------------------------------------------------------------------
r6656 | rmanfredi | 2004-09-09 15:21:49 -0400 (Thu, 09 Sep 2004) | 3 lines

Changed frequency of inter-UP QRP exchanges: now performs one update every
5 minutes instead of one every 90 secs.

------------------------------------------------------------------------
r6655 | rmanfredi | 2004-09-09 15:20:45 -0400 (Thu, 09 Sep 2004) | 2 lines

Forgot to cleanup the outq of the pseudo UDP node at shutdown time.

------------------------------------------------------------------------
r6654 | rmanfredi | 2004-09-09 15:19:33 -0400 (Thu, 09 Sep 2004) | 2 lines

Added qhit.c.

------------------------------------------------------------------------
r6653 | rmanfredi | 2004-09-09 15:10:28 -0400 (Thu, 09 Sep 2004) | 2 lines

Shared files are now ref-counted.

------------------------------------------------------------------------
r6652 | rmanfredi | 2004-09-09 15:09:24 -0400 (Thu, 09 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6651 | rmanfredi | 2004-09-09 15:08:35 -0400 (Thu, 09 Sep 2004) | 4 lines

Changed process for generating query hits: the matching code now generates
a list of hits, and that list is then traversed to generate the necessary
query hit messages.

------------------------------------------------------------------------
r6650 | rmanfredi | 2004-09-09 15:07:25 -0400 (Thu, 09 Sep 2004) | 2 lines

Changed format for logging received vendor messages: use compact form.

------------------------------------------------------------------------
r6649 | rmanfredi | 2004-09-09 15:06:46 -0400 (Thu, 09 Sep 2004) | 2 lines

Fixed typos.

------------------------------------------------------------------------
r6648 | cbiere | 2004-09-09 15:06:21 -0400 (Thu, 09 Sep 2004) | 2 lines

Fixed warning "Implicit declaration of upload_stats_clear_all()."

------------------------------------------------------------------------
r6647 | rmanfredi | 2004-09-09 15:05:51 -0400 (Thu, 09 Sep 2004) | 2 lines

Moved query hit generation from share.c to new qhit.c.

------------------------------------------------------------------------
r6646 | rmanfredi | 2004-09-07 01:26:38 -0400 (Tue, 07 Sep 2004) | 2 lines

Moved declaration of upload_stats_clear_all() to the core interface.

------------------------------------------------------------------------
r6645 | rmanfredi | 2004-09-07 01:20:07 -0400 (Tue, 07 Sep 2004) | 2 lines

Version of 2004-09-06.

------------------------------------------------------------------------
r6644 | rmanfredi | 2004-09-07 01:19:35 -0400 (Tue, 07 Sep 2004) | 3 lines

Get rid of the UDP message queue for the pseudo UDP node when UDP is
disabled, and recreate it when it is enabled again.

------------------------------------------------------------------------
r6643 | rmanfredi | 2004-09-06 17:39:00 -0400 (Mon, 06 Sep 2004) | 3 lines

The nodes_gui_node_added() callback and nodes_gui_add_node() routine no
longer have a trailing parameter.

------------------------------------------------------------------------
r6642 | rmanfredi | 2004-09-06 17:36:35 -0400 (Mon, 06 Sep 2004) | 2 lines

Show pseudo UDP node in GUI as being of type 'P'.

------------------------------------------------------------------------
r6641 | rmanfredi | 2004-09-06 17:36:12 -0400 (Mon, 06 Sep 2004) | 2 lines

Make sure we hide/show the pseudo UDP node when they disable/enable UDP.

------------------------------------------------------------------------
r6640 | rmanfredi | 2004-09-06 17:31:11 -0400 (Mon, 06 Sep 2004) | 2 lines

Removed trailing argument from nodes_gui_add_node().

------------------------------------------------------------------------
r6639 | rmanfredi | 2004-09-06 17:30:45 -0400 (Mon, 06 Sep 2004) | 2 lines

Added guc_node_udp_gui_show() and guc_node_udp_gui_remove().

------------------------------------------------------------------------
r6638 | rmanfredi | 2004-09-06 17:29:24 -0400 (Mon, 06 Sep 2004) | 2 lines

Added a sendto() operation.

------------------------------------------------------------------------
r6637 | rmanfredi | 2004-09-06 17:27:26 -0400 (Mon, 06 Sep 2004) | 3 lines

Declare node_udp_gui_show() and node_udp_gui_remove().
Removed useless trailing argument to node_added_listener_t callback routine.

------------------------------------------------------------------------
r6636 | rmanfredi | 2004-09-06 17:24:53 -0400 (Mon, 06 Sep 2004) | 3 lines

Removed udp_sendto() as the function is now done via the UDP message queue,
as well as statistics bookkeeping.

------------------------------------------------------------------------
r6635 | rmanfredi | 2004-09-06 17:23:27 -0400 (Mon, 06 Sep 2004) | 2 lines

Added a sendto() operation to the TX drivers.

------------------------------------------------------------------------
r6634 | rmanfredi | 2004-09-06 17:22:01 -0400 (Mon, 06 Sep 2004) | 2 lines

Extended the wrapped I/O with sendto().

------------------------------------------------------------------------
r6633 | rmanfredi | 2004-09-06 17:21:13 -0400 (Mon, 06 Sep 2004) | 4 lines

Split Gnet bandwidth evenly between TCP and UDP schedulers.  Ensure both
auto-steal the unused parts even if they don't allow stealing between HTTP
and Gnet.

------------------------------------------------------------------------
r6632 | rmanfredi | 2004-09-06 17:19:02 -0400 (Mon, 06 Sep 2004) | 2 lines

The pseudo UDP node is now advertised and shown in the GUI.

------------------------------------------------------------------------
r6631 | rmanfredi | 2004-09-06 17:18:59 -0400 (Mon, 06 Sep 2004) | 2 lines

Added pmsg_replace_ext() and pmsg_get_metadata().

------------------------------------------------------------------------
r6630 | rmanfredi | 2004-09-06 17:16:56 -0400 (Mon, 06 Sep 2004) | 2 lines

Now only holds common code for both the TCP and UDP message queues.

------------------------------------------------------------------------
r6629 | rmanfredi | 2004-09-06 17:15:26 -0400 (Mon, 06 Sep 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6628 | rmanfredi | 2004-09-06 17:14:57 -0400 (Mon, 06 Sep 2004) | 4 lines

Added UDP bandwidth schedulers for Gnet traffic, taking half the bandwidth.
The other half being given to the TCP Gnet traffic.  Both auto-steal their
unused bandwidth, if necessary.

------------------------------------------------------------------------
r6627 | rmanfredi | 2004-09-06 17:10:09 -0400 (Mon, 06 Sep 2004) | 2 lines

Added 6 new files.

------------------------------------------------------------------------
r6626 | rmanfredi | 2004-09-06 17:09:05 -0400 (Mon, 06 Sep 2004) | 2 lines

Call node_post_init() after GUI initialization.

------------------------------------------------------------------------
r6625 | rmanfredi | 2004-09-06 17:07:32 -0400 (Mon, 06 Sep 2004) | 2 lines

Added src/core/mq_tcp.[ch], src/core/mq_udp.[ch], src/core/tx_dgram.[ch].

------------------------------------------------------------------------
r6624 | rmanfredi | 2004-09-06 17:07:03 -0400 (Mon, 06 Sep 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6623 | cbiere | 2004-09-06 16:47:35 -0400 (Mon, 06 Sep 2004) | 2 lines

Use UTF-8 as default charset on Mac OS X instead of ISO-8859-1.

------------------------------------------------------------------------
r6622 | cbiere | 2004-09-06 05:15:59 -0400 (Mon, 06 Sep 2004) | 4 lines

Added guc_upload_stats_clear_all() which is called when the user requests
clearing of the upload stats. The core was never informed of the request so
that the GUI and core got out-of-sync.

------------------------------------------------------------------------
r6621 | rmanfredi | 2004-09-06 01:46:24 -0400 (Mon, 06 Sep 2004) | 4 lines

Added 116.108.101.0/255.255.255.0.
Now bans the whole 165.193.220.0/24 anyway, so removed the sub-networks
for this range (/25 and /27).

------------------------------------------------------------------------
r6620 | cbiere | 2004-09-06 00:21:27 -0400 (Mon, 06 Sep 2004) | 3 lines

Moved a copy hex_alphabet_lower[] from misc.h to prop.c and misc.c b/c
those are the only places where it's used.

------------------------------------------------------------------------
r6619 | cbiere | 2004-09-05 16:05:05 -0400 (Sun, 05 Sep 2004) | 2 lines

Fixed signed vs. unsigned comparison warning.

------------------------------------------------------------------------
r6618 | cbiere | 2004-09-05 16:04:22 -0400 (Sun, 05 Sep 2004) | 2 lines

Fixed diverse compiler warnings reported by Martijn Dekker.

------------------------------------------------------------------------
r6617 | cbiere | 2004-09-05 15:58:42 -0400 (Sun, 05 Sep 2004) | 3 lines

header_features_generate():
	Use size_t instead of int.

------------------------------------------------------------------------
r6616 | cbiere | 2004-09-04 17:59:59 -0400 (Sat, 04 Sep 2004) | 3 lines

Include <glib.h> before the PRIu64/PRId64 checks so that G_MAXLONG is defined
and can be used for the workaround.

------------------------------------------------------------------------
r6615 | rmanfredi | 2004-09-04 06:44:56 -0400 (Sat, 04 Sep 2004) | 3 lines

Found the origin of the "race condition" that caused assertions to fail
in dh_pmsg_free().  We just can't assert at that point.

------------------------------------------------------------------------
r6614 | graaff | 2004-09-04 05:00:21 -0400 (Sat, 04 Sep 2004) | 2 lines

Commit belated ChangeLog entries (move ranges to fileinfo and initial fix for correct visual progress)

------------------------------------------------------------------------
r6613 | rmanfredi | 2004-09-04 04:46:47 -0400 (Sat, 04 Sep 2004) | 2 lines

Version of 2004-09-04.

------------------------------------------------------------------------
r6612 | rmanfredi | 2004-09-04 04:36:47 -0400 (Sat, 04 Sep 2004) | 3 lines

Keep statistics about UDP traffic.
Added udp_send_reply().

------------------------------------------------------------------------
r6611 | rmanfredi | 2004-09-04 04:35:51 -0400 (Sat, 04 Sep 2004) | 2 lines

Fixed the "crash when closing search" bug.

------------------------------------------------------------------------
r6610 | rmanfredi | 2004-09-04 04:35:09 -0400 (Sat, 04 Sep 2004) | 2 lines

Reply to an UDP ping with an UDP pong.

------------------------------------------------------------------------
r6609 | rmanfredi | 2004-09-04 04:33:44 -0400 (Sat, 04 Sep 2004) | 2 lines

Added an HSEP message category entry for gnet traffic stats.

------------------------------------------------------------------------
r6608 | rmanfredi | 2004-09-04 04:33:11 -0400 (Sat, 04 Sep 2004) | 4 lines

Was accounting stats for HSEP message exchanges as "unknown"!
Fixed typo causing aggregated TCP+UDP stats to be returned when TCP stats
were requested.

------------------------------------------------------------------------
r6607 | rmanfredi | 2004-09-04 02:23:24 -0400 (Sat, 04 Sep 2004) | 2 lines

Fixed spelling mistake "sollicited" -> "solicited".

------------------------------------------------------------------------
r6606 | rmanfredi | 2004-09-03 16:42:41 -0400 (Fri, 03 Sep 2004) | 2 lines

Message stats can show TCP-only traffic, UDP-only, or both.

------------------------------------------------------------------------
r6605 | rmanfredi | 2004-09-03 16:41:42 -0400 (Fri, 03 Sep 2004) | 5 lines

Firewall status can now have 4 states: fully firewalled, TCP-only,
UDP-only and not firewalled.  The UDP firewall is shown only if UDP is
enabled.
Plugged callback for "gnet_stats_source".

------------------------------------------------------------------------
r6604 | rmanfredi | 2004-09-03 16:36:38 -0400 (Fri, 03 Sep 2004) | 2 lines

Allow message stats to show TCP-only traffic, UDP-only, or both.

------------------------------------------------------------------------
r6603 | rmanfredi | 2004-09-03 16:35:06 -0400 (Fri, 03 Sep 2004) | 2 lines

Added gnet_stats_tcp_get().

------------------------------------------------------------------------
r6602 | rmanfredi | 2004-09-03 16:34:43 -0400 (Fri, 03 Sep 2004) | 2 lines

Added src/if/ui/gtk/gnet_stats.h.

------------------------------------------------------------------------
r6601 | rmanfredi | 2004-09-03 16:34:15 -0400 (Fri, 03 Sep 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6600 | rmanfredi | 2004-09-03 16:32:02 -0400 (Fri, 03 Sep 2004) | 2 lines

Added guc_gnet_stats_tcp_get() and guc_gnet_stats_udp_get().

------------------------------------------------------------------------
r6599 | rmanfredi | 2004-09-03 16:30:59 -0400 (Fri, 03 Sep 2004) | 2 lines

New property "gnet_stats_source" to select the TCP/UDP source for stats.

------------------------------------------------------------------------
r6598 | rmanfredi | 2004-09-03 16:29:30 -0400 (Fri, 03 Sep 2004) | 3 lines

Keep and allow retrieval of TCP and UDP stats, separately or in
aggregated form.

------------------------------------------------------------------------
r6597 | cbiere | 2004-09-03 11:05:07 -0400 (Fri, 03 Sep 2004) | 4 lines

Make the tx/rx op struct static and const. Use accessors instead of exporting
the structs directly. [Verbose: This should cause the linker to place the
structs in read-only memory where they are protected against modifications.]

------------------------------------------------------------------------
r6596 | rmanfredi | 2004-09-02 17:17:35 -0400 (Thu, 02 Sep 2004) | 2 lines

File was missing $Id marker.

------------------------------------------------------------------------
r6595 | rmanfredi | 2004-09-02 17:13:55 -0400 (Thu, 02 Sep 2004) | 2 lines

Version of 2004-09-02.

------------------------------------------------------------------------
r6594 | rmanfredi | 2004-09-02 16:45:47 -0400 (Thu, 02 Sep 2004) | 4 lines

Now we can enable a search only if it's not disabled, i.e. get rid of the
sub-optimal hack of starting it and immediately stopping it if it was
disabled.

------------------------------------------------------------------------
r6593 | rmanfredi | 2004-09-02 16:40:32 -0400 (Thu, 02 Sep 2004) | 4 lines

For dynamic querying purposes, count result as kept even if it's not
displayed because the search reached its maximum amount of entries.
its

------------------------------------------------------------------------
r6592 | rmanfredi | 2004-09-02 16:37:20 -0400 (Thu, 02 Sep 2004) | 3 lines

Implemented dynamic querying for local queries, when running as an
ultra node.

------------------------------------------------------------------------
r6591 | rmanfredi | 2004-09-02 16:35:51 -0400 (Thu, 02 Sep 2004) | 2 lines

Lowered normal TTL to 4 now that we support high outdegree.

------------------------------------------------------------------------
r6590 | rmanfredi | 2004-09-02 16:33:51 -0400 (Thu, 02 Sep 2004) | 3 lines

Renamed old compact_query() to compact_query_utf8().
Made new compact_query() visible.

------------------------------------------------------------------------
r6589 | rmanfredi | 2004-09-02 16:30:38 -0400 (Thu, 02 Sep 2004) | 2 lines

Added an assertion.

------------------------------------------------------------------------
r6588 | rmanfredi | 2004-09-02 16:30:23 -0400 (Thu, 02 Sep 2004) | 2 lines

Added initialization/cleanup of the SQ module.

------------------------------------------------------------------------
r6587 | graaff | 2004-09-02 15:35:31 -0400 (Thu, 02 Sep 2004) | 2 lines

Fix visual progress to correctly show old and new downloaded ranges.

------------------------------------------------------------------------
r6586 | graaff | 2004-09-02 15:12:15 -0400 (Thu, 02 Sep 2004) | 2 lines

Spelling fixes in comments.

------------------------------------------------------------------------
r6585 | cbiere | 2004-09-01 17:24:30 -0400 (Wed, 01 Sep 2004) | 2 lines

Adjusted 165.193.220.96/26.

------------------------------------------------------------------------
r6584 | cbiere | 2004-09-01 16:25:51 -0400 (Wed, 01 Sep 2004) | 2 lines

Added 165.193.220.96/26. It's full of hostile User-Agent faking nodes.

------------------------------------------------------------------------
r6583 | rmanfredi | 2004-09-01 13:50:12 -0400 (Wed, 01 Sep 2004) | 4 lines

Lowered the default maximum amount of results shown from 5000 to 1000 to
both save on memory and incite users to setup filters or emit more specific
queries.

------------------------------------------------------------------------
r6582 | rmanfredi | 2004-09-01 13:43:35 -0400 (Wed, 01 Sep 2004) | 3 lines

Made sure we keep the route on GTKG/21v1 reception, and that we simply
remove the new NODE_F_PROXIED flag on the node.

------------------------------------------------------------------------
r6581 | cbiere | 2004-09-01 11:37:58 -0400 (Wed, 01 Sep 2004) | 3 lines

Replaced CIDR notation of the recently added entry with BS notation because
gtk-gnutella up to 0.94 had a byteorder bug with respect to CIDR notation.

------------------------------------------------------------------------
r6580 | rmanfredi | 2004-08-30 17:56:43 -0400 (Mon, 30 Aug 2004) | 2 lines

Version 2004-08-30.

------------------------------------------------------------------------
r6579 | rmanfredi | 2004-08-30 15:47:23 -0400 (Mon, 30 Aug 2004) | 2 lines

Show used charset at startup time.

------------------------------------------------------------------------
r6578 | rmanfredi | 2004-08-30 15:46:43 -0400 (Mon, 30 Aug 2004) | 2 lines

Added support for GTKG/21v1 "Push-Proxy Cancel" vendor message.

------------------------------------------------------------------------
r6577 | rmanfredi | 2004-08-30 15:44:35 -0400 (Mon, 30 Aug 2004) | 4 lines

Message queue now maintains whether queue is within the warn-zone range
(between hiwat and lowat) to update node's flag as soon as the condition
changes.

------------------------------------------------------------------------
r6576 | rmanfredi | 2004-08-30 15:31:09 -0400 (Mon, 30 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6575 | rmanfredi | 2004-08-29 18:38:19 -0400 (Sun, 29 Aug 2004) | 2 lines

Count number of query hits received for local searches.

------------------------------------------------------------------------
r6574 | rmanfredi | 2004-08-29 17:33:54 -0400 (Sun, 29 Aug 2004) | 3 lines

If we can't send a hit back because the destination is not writable, account
it under the MSG_DROP_SHUTDOWN reason.

------------------------------------------------------------------------
r6573 | rmanfredi | 2004-08-29 17:04:36 -0400 (Sun, 29 Aug 2004) | 2 lines

Version of 2004-08-29.

------------------------------------------------------------------------
r6572 | rmanfredi | 2004-08-29 17:02:32 -0400 (Sun, 29 Aug 2004) | 3 lines

Leaf nodes will now send unsollicited BEAR/12v1 to their ultranodes
reporting kept results each time they get new query hits from the network.

------------------------------------------------------------------------
r6571 | rmanfredi | 2004-08-29 16:55:43 -0400 (Sun, 29 Aug 2004) | 4 lines

Vendor message table was accidentally not sorted, messing the binary
search logic and causing valid messages to be ignored.
Now sends BEAR/12v1 "query status response" as a prioritary message.

------------------------------------------------------------------------
r6570 | cbiere | 2004-08-29 16:14:19 -0400 (Sun, 29 Aug 2004) | 2 lines

Expanded 66.186.39.0/27 to 66.186.39.0/26.

------------------------------------------------------------------------
r6569 | cbiere | 2004-08-29 15:35:07 -0400 (Sun, 29 Aug 2004) | 2 lines

Added 66.186.39.0/27 (Uberdork err Overpeer Inc.)

------------------------------------------------------------------------
r6568 | cbiere | 2004-08-29 15:14:08 -0400 (Sun, 29 Aug 2004) | 4 lines

gnet_stats_update_messages():
gnet_stats_gui_messages_init():
	Accidently used num_c_gs instead of msg_type_str_size().

------------------------------------------------------------------------
r6567 | cbiere | 2004-08-29 14:41:18 -0400 (Sun, 29 Aug 2004) | 3 lines

version_init():
	Dump the version string at start-up.

------------------------------------------------------------------------
r6566 | rmanfredi | 2004-08-29 12:35:46 -0400 (Sun, 29 Aug 2004) | 3 lines

When we get unsollicited guidance info for a dynamic query, there is no
need to query the leaf before proceeding with the next ultra node.

------------------------------------------------------------------------
r6565 | rmanfredi | 2004-08-29 10:40:38 -0400 (Sun, 29 Aug 2004) | 2 lines

Split huge route_message() routine in smaller parts.

------------------------------------------------------------------------
r6564 | rmanfredi | 2004-08-29 10:38:36 -0400 (Sun, 29 Aug 2004) | 3 lines

Check for OOB queries in node_can_send(), since we need to forward them
regardless of whether there exists a route for replies.

------------------------------------------------------------------------
r6563 | rmanfredi | 2004-08-29 10:36:35 -0400 (Sun, 29 Aug 2004) | 2 lines

Added gmsg_is_oob_query() and gmsg_split_is_oob_query().

------------------------------------------------------------------------
r6562 | rmanfredi | 2004-08-29 10:06:45 -0400 (Sun, 29 Aug 2004) | 2 lines

Forgot to update the hint value when limiting the size of the allocated arena.

------------------------------------------------------------------------
r6561 | cbiere | 2004-08-29 07:22:32 -0400 (Sun, 29 Aug 2004) | 4 lines

Added missing includes.
gnet_stats_gui_messages_init():
	Fixed call to gtk_list_store_new().

------------------------------------------------------------------------
r6560 | cbiere | 2004-08-29 06:50:29 -0400 (Sun, 29 Aug 2004) | 4 lines

search_gui_create_record():
	[GTK1] Convert the search result from UTF-8 to locale if it's
	not ASCII but UTF-8.

------------------------------------------------------------------------
r6559 | rmanfredi | 2004-08-29 06:29:29 -0400 (Sun, 29 Aug 2004) | 3 lines

Forbid too large sizes, and limit the zones to 16K, regardless of the amount
of objects requested.

------------------------------------------------------------------------
r6558 | rmanfredi | 2004-08-29 05:46:23 -0400 (Sun, 29 Aug 2004) | 5 lines

Added count of bytes/packets queued to be able to monitor the amount of
bytes/packets dropped whilst in the TX queues.  New columns "queued" and
"gen. queued" will show the queued bytes/packets from received and locally
generated packets respectively.  Column "generated" renamed "gen. sent".

------------------------------------------------------------------------
r6557 | rmanfredi | 2004-08-29 05:40:08 -0400 (Sun, 29 Aug 2004) | 2 lines

Regenerated to lookup for yacc explicitly.

------------------------------------------------------------------------
r6556 | rmanfredi | 2004-08-29 05:38:30 -0400 (Sun, 29 Aug 2004) | 2 lines

Fixed errors spotted by "metalint".

------------------------------------------------------------------------
r6555 | rmanfredi | 2004-08-28 17:28:08 -0400 (Sat, 28 Aug 2004) | 3 lines

Forgot to tie the GUI button for "convert_spaces" to the property, hence
setting in the GUI had no effect.

------------------------------------------------------------------------
r6554 | rmanfredi | 2004-08-28 17:22:53 -0400 (Sat, 28 Aug 2004) | 3 lines

Raised max for "reserve_gtkg_nodes" to 90 and lowered min for
"unique_nodes" to 10.

------------------------------------------------------------------------
r6553 | rmanfredi | 2004-08-28 17:20:02 -0400 (Sat, 28 Aug 2004) | 3 lines

Allow forwarding of queries and pushes that were already seen with a
lower TTL, but don't process them again.

------------------------------------------------------------------------
r6552 | rmanfredi | 2004-08-28 11:47:21 -0400 (Sat, 28 Aug 2004) | 3 lines

Regenerated for missing local_install targets when nothing to install but
there are subdirs defined.

------------------------------------------------------------------------
r6551 | nonamer | 2004-08-28 10:25:26 -0400 (Sat, 28 Aug 2004) | 2 lines

Removed a conflicting host_t type on OSX 10.3.5

------------------------------------------------------------------------
r6550 | graaff | 2004-08-28 09:11:30 -0400 (Sat, 28 Aug 2004) | 2 lines

Removed row from struct which was a left-over from test code.

------------------------------------------------------------------------
r6549 | graaff | 2004-08-28 09:04:21 -0400 (Sat, 28 Aug 2004) | 2 lines

Move available ranges code from visual_progress (GUI) to fileinfo (Core).

------------------------------------------------------------------------
r6548 | rmanfredi | 2004-08-28 08:40:33 -0400 (Sat, 28 Aug 2004) | 2 lines

Use new urn_get_sha1() routine instead of going through the UI2C interface.

------------------------------------------------------------------------
r6547 | rmanfredi | 2004-08-28 08:36:14 -0400 (Sat, 28 Aug 2004) | 2 lines

Removed doc/devguide/UICORE_SPLIT.

------------------------------------------------------------------------
r6546 | rmanfredi | 2004-08-28 07:39:48 -0400 (Sat, 28 Aug 2004) | 4 lines

Be more rigourous when displaying memory stats.  Use "after" when we show
an incremental time since last reset, use "at" when we use an absolute
running time.

------------------------------------------------------------------------
r6545 | rmanfredi | 2004-08-28 04:41:26 -0400 (Sat, 28 Aug 2004) | 4 lines

Fixed glitch in free amount computation.
Added timestamping of the dumps made.
Fake free of reused block for which we missed the free().

------------------------------------------------------------------------
r6544 | rmanfredi | 2004-08-28 04:40:04 -0400 (Sat, 28 Aug 2004) | 2 lines

Must use raw malloc() and free() with REMAP_ZALLOC and TRACK_MALLOC.

------------------------------------------------------------------------
r6543 | rmanfredi | 2004-08-28 02:48:19 -0400 (Sat, 28 Aug 2004) | 2 lines

Added short_filename().

------------------------------------------------------------------------
r6542 | rmanfredi | 2004-08-28 02:47:20 -0400 (Sat, 28 Aug 2004) | 4 lines

Use short_filename() on file names to strip common source prefix.
Added private m_strconcatv() implementation.
Fixed realloc_record() / realloc_track() to behave like their cousins.

------------------------------------------------------------------------
r6541 | rmanfredi | 2004-08-28 02:45:37 -0400 (Sat, 28 Aug 2004) | 2 lines

Use short_filename() on file names to strip common source prefix.

------------------------------------------------------------------------
r6540 | rmanfredi | 2004-08-28 02:44:42 -0400 (Sat, 28 Aug 2004) | 2 lines

Removed gm_strconcatv().  This should be a private implementation in malloc.c.

------------------------------------------------------------------------
r6539 | rmanfredi | 2004-08-28 02:43:43 -0400 (Sat, 28 Aug 2004) | 2 lines

Tracking macros now use _WHERE_ instead of __FILE__.

------------------------------------------------------------------------
r6538 | rmanfredi | 2004-08-28 02:42:38 -0400 (Sat, 28 Aug 2004) | 2 lines

Added the _WHERE_ macro, which should be used instead of __FILE__.

------------------------------------------------------------------------
r6537 | rmanfredi | 2004-08-28 02:39:16 -0400 (Sat, 28 Aug 2004) | 2 lines

Added SRC_PREFIX, the common prefix to all source filenames.

------------------------------------------------------------------------
r6536 | rmanfredi | 2004-08-28 02:37:37 -0400 (Sat, 28 Aug 2004) | 2 lines

Regenerated all Makefile.SH files.

------------------------------------------------------------------------
r6535 | rmanfredi | 2004-08-28 02:36:27 -0400 (Sat, 28 Aug 2004) | 4 lines

All Jmakefiles now add -DCURDIR=$(CURRENT) to the CFLAGS so that we can
generate proper filenames for source files, since separation introduces
duplicate basenames.

------------------------------------------------------------------------
r6534 | rmanfredi | 2004-08-27 11:54:29 -0400 (Fri, 27 Aug 2004) | 2 lines

Use urn_get_sha1() instead of guc_huge_extract_sha1().

------------------------------------------------------------------------
r6533 | rmanfredi | 2004-08-27 11:53:57 -0400 (Fri, 27 Aug 2004) | 2 lines

Moved declaration to the interface.

------------------------------------------------------------------------
r6532 | rmanfredi | 2004-08-27 11:53:18 -0400 (Fri, 27 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6531 | rmanfredi | 2004-08-27 11:52:45 -0400 (Fri, 27 Aug 2004) | 2 lines

Moved more external declarations.

------------------------------------------------------------------------
r6530 | rmanfredi | 2004-08-27 11:51:36 -0400 (Fri, 27 Aug 2004) | 2 lines

Extraction of SHA1 URN values are now performed by routines from lib/urn.c.

------------------------------------------------------------------------
r6529 | rmanfredi | 2004-08-27 11:50:49 -0400 (Fri, 27 Aug 2004) | 3 lines

Remove huge routines, since the relevant ones are now publicly visible
via "lib/urn.h".  Added inclusion of "if/core/parq.h".

------------------------------------------------------------------------
r6528 | rmanfredi | 2004-08-27 11:49:35 -0400 (Fri, 27 Aug 2004) | 2 lines

Signals that upload_stats_prune_nonexistent() does nothing useful.

------------------------------------------------------------------------
r6527 | rmanfredi | 2004-08-27 11:49:02 -0400 (Fri, 27 Aug 2004) | 2 lines

Moved several declarations to if/core/share.h.

------------------------------------------------------------------------
r6526 | rmanfredi | 2004-08-27 11:48:33 -0400 (Fri, 27 Aug 2004) | 2 lines

Moved one declaration to if/core/search.h.

------------------------------------------------------------------------
r6525 | rmanfredi | 2004-08-27 11:47:45 -0400 (Fri, 27 Aug 2004) | 2 lines

Now includes "if/core/parq.h" as well.

------------------------------------------------------------------------
r6524 | rmanfredi | 2004-08-27 11:44:51 -0400 (Fri, 27 Aug 2004) | 2 lines

Use routines from urn.c now.

------------------------------------------------------------------------
r6523 | rmanfredi | 2004-08-27 11:43:38 -0400 (Fri, 27 Aug 2004) | 4 lines

Regenerated all Makefile.SH scripts with newer jmake, to fix a bug in
the dependency sanitizing sed script that caused the last dependency to
be dropped.

------------------------------------------------------------------------
r6522 | rmanfredi | 2004-08-27 11:39:57 -0400 (Fri, 27 Aug 2004) | 3 lines

Fixed specs for out-of-band query hits to mention the LIME/12v2 and LIME/11v2
vendor messages.

------------------------------------------------------------------------
r6521 | rmanfredi | 2004-08-27 11:36:13 -0400 (Fri, 27 Aug 2004) | 2 lines

Don't make binary_hash() static, needed by debugging malloc routines.

------------------------------------------------------------------------
r6520 | rmanfredi | 2004-08-27 11:35:38 -0400 (Fri, 27 Aug 2004) | 2 lines

Added urn.c to the list of sources.

------------------------------------------------------------------------
r6519 | rmanfredi | 2004-08-27 11:34:50 -0400 (Fri, 27 Aug 2004) | 2 lines

Use new NormalObjectTarget() instead of AllTarget() to declare .o files.

------------------------------------------------------------------------
r6518 | rmanfredi | 2004-08-27 11:34:04 -0400 (Fri, 27 Aug 2004) | 3 lines

Removed call to vp_gui_shutdown() for now, since it causes core dumps at
exit time.

------------------------------------------------------------------------
r6517 | rmanfredi | 2004-08-27 11:32:07 -0400 (Fri, 27 Aug 2004) | 3 lines

Use new NormalObjectTarget() rule instead of AllTarget() to declare the
object files that need to be constructed.

------------------------------------------------------------------------
r6516 | rmanfredi | 2004-08-27 11:30:40 -0400 (Fri, 27 Aug 2004) | 3 lines

Moved huge_http_sha1_extract32(), huge_extract_sha1() and
huge_extract_sha1_no_urn() to new ../lib/urn.c with appropriate renaming.

------------------------------------------------------------------------
r6515 | rmanfredi | 2004-08-27 11:29:11 -0400 (Fri, 27 Aug 2004) | 2 lines

Documented new -DMALLOC_STATS and -DMALLOC_FRAMES switches.

------------------------------------------------------------------------
r6514 | rmanfredi | 2004-08-27 11:28:25 -0400 (Fri, 27 Aug 2004) | 2 lines

Added support for -DMALLOC_STATS and -DMALLOC_FRAMES.

------------------------------------------------------------------------
r6513 | rmanfredi | 2004-08-27 11:27:06 -0400 (Fri, 27 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6512 | rmanfredi | 2004-08-27 11:21:23 -0400 (Fri, 27 Aug 2004) | 2 lines

Obsolete information.

------------------------------------------------------------------------
r6511 | rmanfredi | 2004-08-26 04:40:00 -0400 (Thu, 26 Aug 2004) | 2 lines

Regenerated Makefile.SH files.

------------------------------------------------------------------------
r6510 | rmanfredi | 2004-08-26 02:14:29 -0400 (Thu, 26 Aug 2004) | 2 lines

Fixed for compilation of BSD [Patch from Russell Franci].

------------------------------------------------------------------------
r6509 | cbiere | 2004-08-25 22:27:22 -0400 (Wed, 25 Aug 2004) | 3 lines

Include <sys/time.h> before <sys/resource.h>. It might be necessary to
make the definition of ``struct timeval'' visible.

------------------------------------------------------------------------
r6508 | graaff | 2004-08-25 13:55:32 -0400 (Wed, 25 Aug 2004) | 2 lines

Fix the case in http_range_merge where a large range in one file contains several ranges in the other file.

------------------------------------------------------------------------
r6507 | rmanfredi | 2004-08-25 03:03:36 -0400 (Wed, 25 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6506 | rmanfredi | 2004-08-25 03:02:32 -0400 (Wed, 25 Aug 2004) | 2 lines

Removed spurious doc/gnutella/features.

------------------------------------------------------------------------
r6505 | rmanfredi | 2004-08-25 03:01:14 -0400 (Wed, 25 Aug 2004) | 2 lines

Removed spurious gtkgbw.sh.

------------------------------------------------------------------------
r6504 | rmanfredi | 2004-08-25 01:58:38 -0400 (Wed, 25 Aug 2004) | 2 lines

Adapted after CVS restructuring.

------------------------------------------------------------------------
r6503 | rmanfredi | 2004-08-25 01:58:11 -0400 (Wed, 25 Aug 2004) | 2 lines

Version 2008-08-25, after CVS restructuring.

------------------------------------------------------------------------
r6502 | rmanfredi | 2004-08-25 01:57:17 -0400 (Wed, 25 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6501 | rmanfredi | 2004-08-25 01:56:35 -0400 (Wed, 25 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6500 | rmanfredi | 2004-08-25 01:55:33 -0400 (Wed, 25 Aug 2004) | 2 lines

Added default for GTK2.

------------------------------------------------------------------------
r6499 | rmanfredi | 2004-08-25 01:54:46 -0400 (Wed, 25 Aug 2004) | 2 lines

Simplified, now that GTK1 and GTK2 sources are in seperate directories.

------------------------------------------------------------------------
r6498 | rmanfredi | 2004-08-25 01:54:08 -0400 (Wed, 25 Aug 2004) | 2 lines

Report the glib version used.

------------------------------------------------------------------------
r6497 | rmanfredi | 2004-08-25 01:53:03 -0400 (Wed, 25 Aug 2004) | 2 lines

Added new hosts.

------------------------------------------------------------------------
r6496 | rmanfredi | 2004-08-25 01:47:13 -0400 (Wed, 25 Aug 2004) | 2 lines

Moved to core/clock.h.

------------------------------------------------------------------------
r6495 | rmanfredi | 2004-08-25 01:45:04 -0400 (Wed, 25 Aug 2004) | 2 lines

Moved from ../clock.h.

------------------------------------------------------------------------
r6494 | rmanfredi | 2004-08-25 01:40:41 -0400 (Wed, 25 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r6493 | rmanfredi | 2004-08-24 19:34:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../zlib_util.h

------------------------------------------------------------------------
r6492 | rmanfredi | 2004-08-24 19:34:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/zlib_util.h

------------------------------------------------------------------------
r6491 | rmanfredi | 2004-08-24 19:34:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../zlib_util.c

------------------------------------------------------------------------
r6490 | rmanfredi | 2004-08-24 19:34:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/zlib_util.c

------------------------------------------------------------------------
r6489 | rmanfredi | 2004-08-24 19:33:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../zalloc.h

------------------------------------------------------------------------
r6488 | rmanfredi | 2004-08-24 19:33:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/zalloc.h

------------------------------------------------------------------------
r6487 | rmanfredi | 2004-08-24 19:33:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../zalloc.c

------------------------------------------------------------------------
r6486 | rmanfredi | 2004-08-24 19:33:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/zalloc.c

------------------------------------------------------------------------
r6485 | rmanfredi | 2004-08-24 19:32:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../whitelist.h

------------------------------------------------------------------------
r6484 | rmanfredi | 2004-08-24 19:32:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/whitelist.h

------------------------------------------------------------------------
r6483 | rmanfredi | 2004-08-24 19:32:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../whitelist.c

------------------------------------------------------------------------
r6482 | rmanfredi | 2004-08-24 19:32:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/whitelist.c

------------------------------------------------------------------------
r6481 | rmanfredi | 2004-08-24 19:32:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../walloc.h

------------------------------------------------------------------------
r6480 | rmanfredi | 2004-08-24 19:31:39 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/walloc.h

------------------------------------------------------------------------
r6479 | rmanfredi | 2004-08-24 19:31:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../walloc.c

------------------------------------------------------------------------
r6478 | rmanfredi | 2004-08-24 19:30:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/walloc.c

------------------------------------------------------------------------
r6477 | rmanfredi | 2004-08-24 19:30:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../vmsg.h

------------------------------------------------------------------------
r6476 | rmanfredi | 2004-08-24 19:30:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/vmsg.h

------------------------------------------------------------------------
r6475 | rmanfredi | 2004-08-24 19:30:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../vmsg.c

------------------------------------------------------------------------
r6474 | rmanfredi | 2004-08-24 19:29:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/vmsg.c

------------------------------------------------------------------------
r6473 | rmanfredi | 2004-08-24 19:29:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../visual_progress_gui.h

------------------------------------------------------------------------
r6472 | rmanfredi | 2004-08-24 19:29:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/visual_progress.h

------------------------------------------------------------------------
r6471 | rmanfredi | 2004-08-24 19:29:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../visual_progress_gui.c

------------------------------------------------------------------------
r6470 | rmanfredi | 2004-08-24 19:28:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/visual_progress.c

------------------------------------------------------------------------
r6469 | rmanfredi | 2004-08-24 19:28:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../version.h

------------------------------------------------------------------------
r6468 | rmanfredi | 2004-08-24 19:28:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/version.h

------------------------------------------------------------------------
r6467 | rmanfredi | 2004-08-24 19:27:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../version.c

------------------------------------------------------------------------
r6466 | rmanfredi | 2004-08-24 19:27:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/version.c

------------------------------------------------------------------------
r6465 | rmanfredi | 2004-08-24 19:27:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../verify.h

------------------------------------------------------------------------
r6464 | rmanfredi | 2004-08-24 19:27:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/verify.h

------------------------------------------------------------------------
r6463 | rmanfredi | 2004-08-24 19:27:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../verify.c

------------------------------------------------------------------------
r6462 | rmanfredi | 2004-08-24 19:26:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/verify.c

------------------------------------------------------------------------
r6461 | rmanfredi | 2004-08-24 19:26:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../verify-tigertree.h

------------------------------------------------------------------------
r6460 | rmanfredi | 2004-08-24 19:26:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/verify_tth.h

------------------------------------------------------------------------
r6459 | rmanfredi | 2004-08-24 19:26:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../verify-tigertree.c

------------------------------------------------------------------------
r6458 | rmanfredi | 2004-08-24 19:25:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/verify_tth.c

------------------------------------------------------------------------
r6457 | rmanfredi | 2004-08-24 19:25:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../vendors.h

------------------------------------------------------------------------
r6456 | rmanfredi | 2004-08-24 19:25:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/vendors.h

------------------------------------------------------------------------
r6455 | rmanfredi | 2004-08-24 19:25:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../vendors.c

------------------------------------------------------------------------
r6454 | rmanfredi | 2004-08-24 19:25:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/vendors.c

------------------------------------------------------------------------
r6453 | rmanfredi | 2004-08-24 19:24:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../utf8.h

------------------------------------------------------------------------
r6452 | rmanfredi | 2004-08-24 19:24:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/utf8.h

------------------------------------------------------------------------
r6451 | rmanfredi | 2004-08-24 19:24:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../utf8.c

------------------------------------------------------------------------
r6450 | rmanfredi | 2004-08-24 19:24:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/utf8.c

------------------------------------------------------------------------
r6449 | rmanfredi | 2004-08-24 19:23:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../url.h

------------------------------------------------------------------------
r6448 | rmanfredi | 2004-08-24 19:23:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/url.h

------------------------------------------------------------------------
r6447 | rmanfredi | 2004-08-24 19:23:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../url.c

------------------------------------------------------------------------
r6446 | rmanfredi | 2004-08-24 19:23:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/url.c

------------------------------------------------------------------------
r6445 | rmanfredi | 2004-08-24 19:22:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../uploads_gui_common.h

------------------------------------------------------------------------
r6444 | rmanfredi | 2004-08-24 19:22:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/uploads_common.h

------------------------------------------------------------------------
r6443 | rmanfredi | 2004-08-24 19:22:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../uploads_gui_common.c

------------------------------------------------------------------------
r6442 | rmanfredi | 2004-08-24 19:22:11 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/uploads_common.c

------------------------------------------------------------------------
r6441 | rmanfredi | 2004-08-24 19:21:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../uploads_gui2.c

------------------------------------------------------------------------
r6440 | rmanfredi | 2004-08-24 19:21:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/uploads.c

------------------------------------------------------------------------
r6439 | rmanfredi | 2004-08-24 19:21:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../uploads_gui.h

------------------------------------------------------------------------
r6438 | rmanfredi | 2004-08-24 19:21:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/uploads.h

------------------------------------------------------------------------
r6437 | rmanfredi | 2004-08-24 19:21:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../uploads_gui.c

------------------------------------------------------------------------
r6436 | rmanfredi | 2004-08-24 19:20:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/uploads.c

------------------------------------------------------------------------
r6435 | rmanfredi | 2004-08-24 19:20:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../uploads_cb.h

------------------------------------------------------------------------
r6434 | rmanfredi | 2004-08-24 19:20:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/uploads_cb.h

------------------------------------------------------------------------
r6433 | rmanfredi | 2004-08-24 19:20:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../uploads_cb.c

------------------------------------------------------------------------
r6432 | rmanfredi | 2004-08-24 19:20:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/uploads_cb.c

------------------------------------------------------------------------
r6431 | rmanfredi | 2004-08-24 19:19:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../uploads.h

------------------------------------------------------------------------
r6430 | rmanfredi | 2004-08-24 19:19:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/uploads.h

------------------------------------------------------------------------
r6429 | rmanfredi | 2004-08-24 19:19:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../uploads.c

------------------------------------------------------------------------
r6428 | rmanfredi | 2004-08-24 19:19:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/uploads.c

------------------------------------------------------------------------
r6427 | rmanfredi | 2004-08-24 19:18:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../upload_stats_gui2.c

------------------------------------------------------------------------
r6426 | rmanfredi | 2004-08-24 19:18:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/upload_stats.c

------------------------------------------------------------------------
r6425 | rmanfredi | 2004-08-24 19:18:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../upload_stats_gui.h

------------------------------------------------------------------------
r6424 | rmanfredi | 2004-08-24 19:18:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/upload_stats.h

------------------------------------------------------------------------
r6423 | rmanfredi | 2004-08-24 19:18:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../upload_stats_gui.c

------------------------------------------------------------------------
r6422 | rmanfredi | 2004-08-24 19:17:54 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/upload_stats.c

------------------------------------------------------------------------
r6421 | rmanfredi | 2004-08-24 19:17:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../upload_stats_cb.h

------------------------------------------------------------------------
r6420 | rmanfredi | 2004-08-24 19:17:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/upload_stats_cb.h

------------------------------------------------------------------------
r6419 | rmanfredi | 2004-08-24 19:17:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../upload_stats_cb.c

------------------------------------------------------------------------
r6418 | rmanfredi | 2004-08-24 19:17:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/upload_stats_cb.c

------------------------------------------------------------------------
r6417 | rmanfredi | 2004-08-24 19:16:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../upload_stats.h

------------------------------------------------------------------------
r6416 | rmanfredi | 2004-08-24 19:16:39 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/upload_stats.h

------------------------------------------------------------------------
r6415 | rmanfredi | 2004-08-24 19:16:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../upload_stats.c

------------------------------------------------------------------------
r6414 | rmanfredi | 2004-08-24 19:16:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/upload_stats.c

------------------------------------------------------------------------
r6413 | rmanfredi | 2004-08-24 19:15:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../udp.h

------------------------------------------------------------------------
r6412 | rmanfredi | 2004-08-24 19:15:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/udp.h

------------------------------------------------------------------------
r6411 | rmanfredi | 2004-08-24 19:15:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../udp.c

------------------------------------------------------------------------
r6410 | rmanfredi | 2004-08-24 19:15:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/udp.c

------------------------------------------------------------------------
r6409 | rmanfredi | 2004-08-24 19:15:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx_link.h

------------------------------------------------------------------------
r6408 | rmanfredi | 2004-08-24 19:14:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx_link.h

------------------------------------------------------------------------
r6407 | rmanfredi | 2004-08-24 19:14:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx_link.c

------------------------------------------------------------------------
r6406 | rmanfredi | 2004-08-24 19:14:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx_link.c

------------------------------------------------------------------------
r6405 | rmanfredi | 2004-08-24 19:14:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx_deflate.h

------------------------------------------------------------------------
r6404 | rmanfredi | 2004-08-24 19:14:01 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx_deflate.h

------------------------------------------------------------------------
r6403 | rmanfredi | 2004-08-24 19:13:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx_deflate.c

------------------------------------------------------------------------
r6402 | rmanfredi | 2004-08-24 19:13:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx_deflate.c

------------------------------------------------------------------------
r6401 | rmanfredi | 2004-08-24 19:13:26 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx.h

------------------------------------------------------------------------
r6400 | rmanfredi | 2004-08-24 19:13:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx.h

------------------------------------------------------------------------
r6399 | rmanfredi | 2004-08-24 19:13:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tx.c

------------------------------------------------------------------------
r6398 | rmanfredi | 2004-08-24 19:12:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/tx.c

------------------------------------------------------------------------
r6397 | rmanfredi | 2004-08-24 19:12:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../token.h

------------------------------------------------------------------------
r6396 | rmanfredi | 2004-08-24 19:12:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/token.h

------------------------------------------------------------------------
r6395 | rmanfredi | 2004-08-24 19:12:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../token.c

------------------------------------------------------------------------
r6394 | rmanfredi | 2004-08-24 19:12:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/token.c

------------------------------------------------------------------------
r6393 | rmanfredi | 2004-08-24 19:11:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tm.h

------------------------------------------------------------------------
r6392 | rmanfredi | 2004-08-24 19:11:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tm.h

------------------------------------------------------------------------
r6391 | rmanfredi | 2004-08-24 19:11:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tm.c

------------------------------------------------------------------------
r6390 | rmanfredi | 2004-08-24 19:11:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tm.c

------------------------------------------------------------------------
r6389 | rmanfredi | 2004-08-24 19:10:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tigertree.h

------------------------------------------------------------------------
r6388 | rmanfredi | 2004-08-24 19:10:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tigertree.h

------------------------------------------------------------------------
r6387 | rmanfredi | 2004-08-24 19:10:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tigertree.c

------------------------------------------------------------------------
r6386 | rmanfredi | 2004-08-24 19:10:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tigertree.c

------------------------------------------------------------------------
r6385 | rmanfredi | 2004-08-24 19:09:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tiger.h

------------------------------------------------------------------------
r6384 | rmanfredi | 2004-08-24 19:09:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tiger.h

------------------------------------------------------------------------
r6383 | rmanfredi | 2004-08-24 19:09:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../tiger.c

------------------------------------------------------------------------
r6382 | rmanfredi | 2004-08-24 19:09:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/tiger.c

------------------------------------------------------------------------
r6381 | rmanfredi | 2004-08-24 19:09:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../statusbar_gui.h

------------------------------------------------------------------------
r6380 | rmanfredi | 2004-08-24 19:08:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/statusbar.h

------------------------------------------------------------------------
r6379 | rmanfredi | 2004-08-24 19:08:39 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../statusbar_gui.c

------------------------------------------------------------------------
r6378 | rmanfredi | 2004-08-24 19:08:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/statusbar.c

------------------------------------------------------------------------
r6377 | rmanfredi | 2004-08-24 19:08:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sq.h

------------------------------------------------------------------------
r6376 | rmanfredi | 2004-08-24 19:08:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/sq.h

------------------------------------------------------------------------
r6375 | rmanfredi | 2004-08-24 19:07:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sq.c

------------------------------------------------------------------------
r6374 | rmanfredi | 2004-08-24 19:07:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/sq.c

------------------------------------------------------------------------
r6373 | rmanfredi | 2004-08-24 19:07:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sockets.h

------------------------------------------------------------------------
r6372 | rmanfredi | 2004-08-24 19:06:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/sockets.h

------------------------------------------------------------------------
r6371 | rmanfredi | 2004-08-24 19:06:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sockets.c

------------------------------------------------------------------------
r6370 | rmanfredi | 2004-08-24 19:06:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/sockets.c

------------------------------------------------------------------------
r6369 | rmanfredi | 2004-08-24 19:06:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../shell.h

------------------------------------------------------------------------
r6368 | rmanfredi | 2004-08-24 19:05:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/shell.h

------------------------------------------------------------------------
r6367 | rmanfredi | 2004-08-24 19:05:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../shell.c

------------------------------------------------------------------------
r6366 | rmanfredi | 2004-08-24 19:05:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/shell.c

------------------------------------------------------------------------
r6365 | rmanfredi | 2004-08-24 19:05:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../share.h

------------------------------------------------------------------------
r6364 | rmanfredi | 2004-08-24 19:05:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/share.h

------------------------------------------------------------------------
r6363 | rmanfredi | 2004-08-24 19:04:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../share.c

------------------------------------------------------------------------
r6362 | rmanfredi | 2004-08-24 19:04:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/share.c

------------------------------------------------------------------------
r6361 | rmanfredi | 2004-08-24 19:04:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sha1.h

------------------------------------------------------------------------
r6360 | rmanfredi | 2004-08-24 19:04:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/sha1.h

------------------------------------------------------------------------
r6359 | rmanfredi | 2004-08-24 19:03:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../sha1.c

------------------------------------------------------------------------
r6358 | rmanfredi | 2004-08-24 19:03:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/sha1.c

------------------------------------------------------------------------
r6357 | rmanfredi | 2004-08-24 19:03:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../settings_gui.h

------------------------------------------------------------------------
r6356 | rmanfredi | 2004-08-24 19:03:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/settings.h

------------------------------------------------------------------------
r6355 | rmanfredi | 2004-08-24 19:03:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../settings_gui.c

------------------------------------------------------------------------
r6354 | rmanfredi | 2004-08-24 19:02:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/settings.c

------------------------------------------------------------------------
r6353 | rmanfredi | 2004-08-24 19:02:26 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../settings_cb.h

------------------------------------------------------------------------
r6352 | rmanfredi | 2004-08-24 19:02:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/settings_cb.h

------------------------------------------------------------------------
r6351 | rmanfredi | 2004-08-24 19:02:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../settings_cb.c

------------------------------------------------------------------------
r6350 | rmanfredi | 2004-08-24 19:01:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/settings_cb.c

------------------------------------------------------------------------
r6349 | rmanfredi | 2004-08-24 19:01:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../settings.h

------------------------------------------------------------------------
r6348 | rmanfredi | 2004-08-24 19:01:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/settings.h

------------------------------------------------------------------------
r6347 | rmanfredi | 2004-08-24 19:01:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../settings.c

------------------------------------------------------------------------
r6346 | rmanfredi | 2004-08-24 19:00:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/settings.c

------------------------------------------------------------------------
r6345 | rmanfredi | 2004-08-24 19:00:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_xml.h

------------------------------------------------------------------------
r6344 | rmanfredi | 2004-08-24 19:00:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search_xml.h

------------------------------------------------------------------------
r6343 | rmanfredi | 2004-08-24 19:00:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_xml.c

------------------------------------------------------------------------
r6342 | rmanfredi | 2004-08-24 18:59:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search_xml.c

------------------------------------------------------------------------
r6341 | rmanfredi | 2004-08-24 18:59:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_stats_gui2.c

------------------------------------------------------------------------
r6340 | rmanfredi | 2004-08-24 18:59:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/search_stats.c

------------------------------------------------------------------------
r6339 | rmanfredi | 2004-08-24 18:59:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_stats_gui.h

------------------------------------------------------------------------
r6338 | rmanfredi | 2004-08-24 18:59:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search_stats.h

------------------------------------------------------------------------
r6337 | rmanfredi | 2004-08-24 18:58:54 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_stats_gui.c

------------------------------------------------------------------------
r6336 | rmanfredi | 2004-08-24 18:58:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/search_stats.c

------------------------------------------------------------------------
r6335 | rmanfredi | 2004-08-24 18:58:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_gui_common.h

------------------------------------------------------------------------
r6334 | rmanfredi | 2004-08-24 18:58:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search_common.h

------------------------------------------------------------------------
r6333 | rmanfredi | 2004-08-24 18:57:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_gui_common.c

------------------------------------------------------------------------
r6332 | rmanfredi | 2004-08-24 18:57:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search_common.c

------------------------------------------------------------------------
r6331 | rmanfredi | 2004-08-24 18:57:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_gui2.c

------------------------------------------------------------------------
r6330 | rmanfredi | 2004-08-24 18:57:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/search.c

------------------------------------------------------------------------
r6329 | rmanfredi | 2004-08-24 18:57:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../search_gui.h

------------------------------------------------------------------------
r6328 | rmanfredi | 2004-08-24 18:56:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/search.h

------------------------------------------------------------------------
r6327 | rmanfredi | 2004-08-24 18:56:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_gui.c

------------------------------------------------------------------------
r6326 | rmanfredi | 2004-08-24 18:56:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/search.c

------------------------------------------------------------------------
r6325 | rmanfredi | 2004-08-24 18:56:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_cb2.h

------------------------------------------------------------------------
r6324 | rmanfredi | 2004-08-24 18:55:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/search_cb.h

------------------------------------------------------------------------
r6323 | rmanfredi | 2004-08-24 18:55:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_cb2.c

------------------------------------------------------------------------
r6322 | rmanfredi | 2004-08-24 18:55:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/search_cb.c

------------------------------------------------------------------------
r6321 | rmanfredi | 2004-08-24 18:55:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_cb.h

------------------------------------------------------------------------
r6320 | rmanfredi | 2004-08-24 18:54:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/search_cb.h

------------------------------------------------------------------------
r6319 | rmanfredi | 2004-08-24 18:54:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../search_cb.c

------------------------------------------------------------------------
r6318 | rmanfredi | 2004-08-24 18:54:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/search_cb.c

------------------------------------------------------------------------
r6317 | rmanfredi | 2004-08-24 18:54:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../search.h

------------------------------------------------------------------------
r6316 | rmanfredi | 2004-08-24 18:53:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/search.h

------------------------------------------------------------------------
r6315 | rmanfredi | 2004-08-24 18:53:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../search.c

------------------------------------------------------------------------
r6314 | rmanfredi | 2004-08-24 18:53:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/search.c

------------------------------------------------------------------------
r6313 | rmanfredi | 2004-08-24 18:53:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rxbuf.h

------------------------------------------------------------------------
r6312 | rmanfredi | 2004-08-24 18:53:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rxbuf.h

------------------------------------------------------------------------
r6311 | rmanfredi | 2004-08-24 18:52:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rxbuf.c

------------------------------------------------------------------------
r6310 | rmanfredi | 2004-08-24 18:52:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rxbuf.c

------------------------------------------------------------------------
r6309 | rmanfredi | 2004-08-24 18:52:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx_link.h

------------------------------------------------------------------------
r6308 | rmanfredi | 2004-08-24 18:52:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx_link.h

------------------------------------------------------------------------
r6307 | rmanfredi | 2004-08-24 18:52:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx_link.c

------------------------------------------------------------------------
r6306 | rmanfredi | 2004-08-24 18:51:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx_link.c

------------------------------------------------------------------------
r6305 | rmanfredi | 2004-08-24 18:51:42 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx_inflate.h

------------------------------------------------------------------------
r6304 | rmanfredi | 2004-08-24 18:51:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx_inflate.h

------------------------------------------------------------------------
r6303 | rmanfredi | 2004-08-24 18:51:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx_inflate.c

------------------------------------------------------------------------
r6302 | rmanfredi | 2004-08-24 18:51:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx_inflate.c

------------------------------------------------------------------------
r6301 | rmanfredi | 2004-08-24 18:50:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx.h

------------------------------------------------------------------------
r6300 | rmanfredi | 2004-08-24 18:50:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx.h

------------------------------------------------------------------------
r6299 | rmanfredi | 2004-08-24 18:50:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../rx.c

------------------------------------------------------------------------
r6298 | rmanfredi | 2004-08-24 18:50:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/rx.c

------------------------------------------------------------------------
r6297 | rmanfredi | 2004-08-24 18:50:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../routing.h

------------------------------------------------------------------------
r6296 | rmanfredi | 2004-08-24 18:49:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/routing.h

------------------------------------------------------------------------
r6295 | rmanfredi | 2004-08-24 18:49:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../routing.c

------------------------------------------------------------------------
r6294 | rmanfredi | 2004-08-24 18:49:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/routing.c

------------------------------------------------------------------------
r6293 | rmanfredi | 2004-08-24 18:49:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../qrp.h

------------------------------------------------------------------------
r6292 | rmanfredi | 2004-08-24 18:49:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/qrp.h

------------------------------------------------------------------------
r6291 | rmanfredi | 2004-08-24 18:48:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../qrp.c

------------------------------------------------------------------------
r6290 | rmanfredi | 2004-08-24 18:48:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/qrp.c

------------------------------------------------------------------------
r6289 | rmanfredi | 2004-08-24 18:48:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../props.tpl

------------------------------------------------------------------------
r6288 | rmanfredi | 2004-08-24 18:48:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to if/props.tpl

------------------------------------------------------------------------
r6287 | rmanfredi | 2004-08-24 18:48:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../prop.h

------------------------------------------------------------------------
r6286 | rmanfredi | 2004-08-24 18:48:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/prop.h

------------------------------------------------------------------------
r6285 | rmanfredi | 2004-08-24 18:47:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../prop.c

------------------------------------------------------------------------
r6284 | rmanfredi | 2004-08-24 18:47:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/prop.c

------------------------------------------------------------------------
r6283 | rmanfredi | 2004-08-24 18:47:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pproxy.h

------------------------------------------------------------------------
r6282 | rmanfredi | 2004-08-24 18:47:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pproxy.h

------------------------------------------------------------------------
r6281 | rmanfredi | 2004-08-24 18:47:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pproxy.c

------------------------------------------------------------------------
r6280 | rmanfredi | 2004-08-24 18:46:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pproxy.c

------------------------------------------------------------------------
r6279 | rmanfredi | 2004-08-24 18:46:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pmsg.h

------------------------------------------------------------------------
r6278 | rmanfredi | 2004-08-24 18:46:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pmsg.h

------------------------------------------------------------------------
r6277 | rmanfredi | 2004-08-24 18:46:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pmsg.c

------------------------------------------------------------------------
r6276 | rmanfredi | 2004-08-24 18:45:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pmsg.c

------------------------------------------------------------------------
r6275 | rmanfredi | 2004-08-24 18:45:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pcache.h

------------------------------------------------------------------------
r6274 | rmanfredi | 2004-08-24 18:45:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pcache.h

------------------------------------------------------------------------
r6273 | rmanfredi | 2004-08-24 18:45:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../pcache.c

------------------------------------------------------------------------
r6272 | rmanfredi | 2004-08-24 18:45:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/pcache.c

------------------------------------------------------------------------
r6271 | rmanfredi | 2004-08-24 18:44:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../pbarcellrenderer_gui2.h

------------------------------------------------------------------------
r6270 | rmanfredi | 2004-08-24 18:44:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/pbarcellrenderer.h

------------------------------------------------------------------------
r6269 | rmanfredi | 2004-08-24 18:44:26 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../pbarcellrenderer_gui2.c

------------------------------------------------------------------------
r6268 | rmanfredi | 2004-08-24 18:44:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/pbarcellrenderer.c

------------------------------------------------------------------------
r6267 | rmanfredi | 2004-08-24 18:44:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../parq.h

------------------------------------------------------------------------
r6266 | rmanfredi | 2004-08-24 18:43:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/parq.h

------------------------------------------------------------------------
r6265 | rmanfredi | 2004-08-24 18:43:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../parq.c

------------------------------------------------------------------------
r6264 | rmanfredi | 2004-08-24 18:43:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/parq.c

------------------------------------------------------------------------
r6263 | rmanfredi | 2004-08-24 18:43:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../override.h

------------------------------------------------------------------------
r6262 | rmanfredi | 2004-08-24 18:42:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/override.h

------------------------------------------------------------------------
r6261 | rmanfredi | 2004-08-24 18:42:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../nodes_gui_common.h

------------------------------------------------------------------------
r6260 | rmanfredi | 2004-08-24 18:42:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/nodes_common.h

------------------------------------------------------------------------
r6259 | rmanfredi | 2004-08-24 18:42:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../nodes_gui_common.c

------------------------------------------------------------------------
r6258 | rmanfredi | 2004-08-24 18:42:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/nodes_common.c

------------------------------------------------------------------------
r6257 | rmanfredi | 2004-08-24 18:41:54 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_gui2.c

------------------------------------------------------------------------
r6256 | rmanfredi | 2004-08-24 18:41:42 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/nodes.c

------------------------------------------------------------------------
r6255 | rmanfredi | 2004-08-24 18:41:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../nodes_gui.h

------------------------------------------------------------------------
r6254 | rmanfredi | 2004-08-24 18:41:11 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/nodes.h

------------------------------------------------------------------------
r6253 | rmanfredi | 2004-08-24 18:40:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_gui.c

------------------------------------------------------------------------
r6252 | rmanfredi | 2004-08-24 18:40:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/nodes.c

------------------------------------------------------------------------
r6251 | rmanfredi | 2004-08-24 18:40:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_cb2.h

------------------------------------------------------------------------
r6250 | rmanfredi | 2004-08-24 18:40:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/nodes_cb.h

------------------------------------------------------------------------
r6249 | rmanfredi | 2004-08-24 18:40:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_cb2.c

------------------------------------------------------------------------
r6248 | rmanfredi | 2004-08-24 18:39:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/nodes_cb.c

------------------------------------------------------------------------
r6247 | rmanfredi | 2004-08-24 18:39:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_cb.h

------------------------------------------------------------------------
r6246 | rmanfredi | 2004-08-24 18:39:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/nodes_cb.h

------------------------------------------------------------------------
r6245 | rmanfredi | 2004-08-24 18:38:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../nodes_cb.c

------------------------------------------------------------------------
r6244 | rmanfredi | 2004-08-24 18:38:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/nodes_cb.c

------------------------------------------------------------------------
r6243 | rmanfredi | 2004-08-24 18:38:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../nodes.h

------------------------------------------------------------------------
r6242 | rmanfredi | 2004-08-24 18:38:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/nodes.h

------------------------------------------------------------------------
r6241 | rmanfredi | 2004-08-24 18:38:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../nodes.c

------------------------------------------------------------------------
r6240 | rmanfredi | 2004-08-24 18:37:42 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/nodes.c

------------------------------------------------------------------------
r6239 | rmanfredi | 2004-08-24 18:37:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../namesize.h

------------------------------------------------------------------------
r6238 | rmanfredi | 2004-08-24 18:37:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/namesize.h

------------------------------------------------------------------------
r6237 | rmanfredi | 2004-08-24 18:36:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../namesize.c

------------------------------------------------------------------------
r6236 | rmanfredi | 2004-08-24 18:36:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/namesize.c

------------------------------------------------------------------------
r6235 | rmanfredi | 2004-08-24 18:36:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../mq.h

------------------------------------------------------------------------
r6234 | rmanfredi | 2004-08-24 18:36:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/mq.h

------------------------------------------------------------------------
r6233 | rmanfredi | 2004-08-24 18:36:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../mq.c

------------------------------------------------------------------------
r6232 | rmanfredi | 2004-08-24 18:35:54 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/mq.c

------------------------------------------------------------------------
r6231 | rmanfredi | 2004-08-24 18:35:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../move.h

------------------------------------------------------------------------
r6230 | rmanfredi | 2004-08-24 18:35:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/move.h

------------------------------------------------------------------------
r6229 | rmanfredi | 2004-08-24 18:35:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../move.c

------------------------------------------------------------------------
r6228 | rmanfredi | 2004-08-24 18:34:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/move.c

------------------------------------------------------------------------
r6227 | rmanfredi | 2004-08-24 18:34:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../monitor_gui2.c

------------------------------------------------------------------------
r6226 | rmanfredi | 2004-08-24 18:34:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/monitor.c

------------------------------------------------------------------------
r6225 | rmanfredi | 2004-08-24 18:34:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../monitor_gui.h

------------------------------------------------------------------------
r6224 | rmanfredi | 2004-08-24 18:34:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/monitor.h

------------------------------------------------------------------------
r6223 | rmanfredi | 2004-08-24 18:33:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../monitor_gui.c

------------------------------------------------------------------------
r6222 | rmanfredi | 2004-08-24 18:33:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/monitor.c

------------------------------------------------------------------------
r6221 | rmanfredi | 2004-08-24 18:33:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../monitor_cb2.c

------------------------------------------------------------------------
r6220 | rmanfredi | 2004-08-24 18:33:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/monitor_cb.c

------------------------------------------------------------------------
r6219 | rmanfredi | 2004-08-24 18:32:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../monitor_cb.h

------------------------------------------------------------------------
r6218 | rmanfredi | 2004-08-24 18:32:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/monitor_cb.h

------------------------------------------------------------------------
r6217 | rmanfredi | 2004-08-24 18:32:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../monitor_cb.c

------------------------------------------------------------------------
r6216 | rmanfredi | 2004-08-24 18:32:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/monitor_cb.c

------------------------------------------------------------------------
r6215 | rmanfredi | 2004-08-24 18:31:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../misc.h

------------------------------------------------------------------------
r6214 | rmanfredi | 2004-08-24 18:31:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/misc.h

------------------------------------------------------------------------
r6213 | rmanfredi | 2004-08-24 18:31:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../misc.c

------------------------------------------------------------------------
r6212 | rmanfredi | 2004-08-24 18:31:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/misc.c

------------------------------------------------------------------------
r6211 | rmanfredi | 2004-08-24 18:30:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../matching.h

------------------------------------------------------------------------
r6210 | rmanfredi | 2004-08-24 18:30:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/matching.h

------------------------------------------------------------------------
r6209 | rmanfredi | 2004-08-24 18:30:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../matching.c

------------------------------------------------------------------------
r6208 | rmanfredi | 2004-08-24 18:30:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/matching.c

------------------------------------------------------------------------
r6207 | rmanfredi | 2004-08-24 18:30:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../malloc.h

------------------------------------------------------------------------
r6206 | rmanfredi | 2004-08-24 18:29:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/malloc.h

------------------------------------------------------------------------
r6205 | rmanfredi | 2004-08-24 18:29:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../malloc.c

------------------------------------------------------------------------
r6204 | rmanfredi | 2004-08-24 18:29:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/malloc.c

------------------------------------------------------------------------
r6203 | rmanfredi | 2004-08-24 18:29:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../main_gui.h

------------------------------------------------------------------------
r6202 | rmanfredi | 2004-08-24 18:29:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/main.h

------------------------------------------------------------------------
r6201 | rmanfredi | 2004-08-24 18:29:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../main_gui.c

------------------------------------------------------------------------
r6200 | rmanfredi | 2004-08-24 18:28:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/main.c

------------------------------------------------------------------------
r6199 | rmanfredi | 2004-08-24 18:28:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../main_cb.h

------------------------------------------------------------------------
r6198 | rmanfredi | 2004-08-24 18:28:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/main_cb.h

------------------------------------------------------------------------
r6197 | rmanfredi | 2004-08-24 18:28:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../main_cb.c

------------------------------------------------------------------------
r6196 | rmanfredi | 2004-08-24 18:27:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/main_cb.c

------------------------------------------------------------------------
r6195 | rmanfredi | 2004-08-24 18:27:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../listener.h

------------------------------------------------------------------------
r6194 | rmanfredi | 2004-08-24 18:27:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/listener.h

------------------------------------------------------------------------
r6193 | rmanfredi | 2004-08-24 18:27:11 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ioheader.h

------------------------------------------------------------------------
r6192 | rmanfredi | 2004-08-24 18:26:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ioheader.h

------------------------------------------------------------------------
r6191 | rmanfredi | 2004-08-24 18:26:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ioheader.c

------------------------------------------------------------------------
r6190 | rmanfredi | 2004-08-24 18:26:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ioheader.c

------------------------------------------------------------------------
r6189 | rmanfredi | 2004-08-24 18:26:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../inputevt.h

------------------------------------------------------------------------
r6188 | rmanfredi | 2004-08-24 18:26:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/inputevt.h

------------------------------------------------------------------------
r6187 | rmanfredi | 2004-08-24 18:25:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../inputevt.c

------------------------------------------------------------------------
r6186 | rmanfredi | 2004-08-24 18:25:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/inputevt.c

------------------------------------------------------------------------
r6185 | rmanfredi | 2004-08-24 18:25:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../inet.h

------------------------------------------------------------------------
r6184 | rmanfredi | 2004-08-24 18:25:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/inet.h

------------------------------------------------------------------------
r6183 | rmanfredi | 2004-08-24 18:25:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../inet.c

------------------------------------------------------------------------
r6182 | rmanfredi | 2004-08-24 18:24:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/inet.c

------------------------------------------------------------------------
r6181 | rmanfredi | 2004-08-24 18:24:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ignore.h

------------------------------------------------------------------------
r6180 | rmanfredi | 2004-08-24 18:24:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ignore.h

------------------------------------------------------------------------
r6179 | rmanfredi | 2004-08-24 18:24:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ignore.c

------------------------------------------------------------------------
r6178 | rmanfredi | 2004-08-24 18:24:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ignore.c

------------------------------------------------------------------------
r6177 | rmanfredi | 2004-08-24 18:23:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../idtable.h

------------------------------------------------------------------------
r6176 | rmanfredi | 2004-08-24 18:23:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/idtable.h

------------------------------------------------------------------------
r6175 | rmanfredi | 2004-08-24 18:23:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../idtable.c

------------------------------------------------------------------------
r6174 | rmanfredi | 2004-08-24 18:23:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/idtable.c

------------------------------------------------------------------------
r6173 | rmanfredi | 2004-08-24 18:22:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../icon.h

------------------------------------------------------------------------
r6172 | rmanfredi | 2004-08-24 18:22:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/icon.h

------------------------------------------------------------------------
r6171 | rmanfredi | 2004-08-24 18:22:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../icon.c

------------------------------------------------------------------------
r6170 | rmanfredi | 2004-08-24 18:22:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/icon.c

------------------------------------------------------------------------
r6169 | rmanfredi | 2004-08-24 18:22:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../huge.h

------------------------------------------------------------------------
r6168 | rmanfredi | 2004-08-24 18:21:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/huge.h

------------------------------------------------------------------------
r6167 | rmanfredi | 2004-08-24 18:21:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../huge.c

------------------------------------------------------------------------
r6166 | rmanfredi | 2004-08-24 18:21:26 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/huge.c

------------------------------------------------------------------------
r6165 | rmanfredi | 2004-08-24 18:21:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../http.h

------------------------------------------------------------------------
r6164 | rmanfredi | 2004-08-24 18:20:42 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/http.h

------------------------------------------------------------------------
r6163 | rmanfredi | 2004-08-24 18:20:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../http.c

------------------------------------------------------------------------
r6162 | rmanfredi | 2004-08-24 18:20:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/http.c

------------------------------------------------------------------------
r6161 | rmanfredi | 2004-08-24 18:20:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hsep.h

------------------------------------------------------------------------
r6160 | rmanfredi | 2004-08-24 18:19:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hsep.h

------------------------------------------------------------------------
r6159 | rmanfredi | 2004-08-24 18:19:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hsep.c

------------------------------------------------------------------------
r6158 | rmanfredi | 2004-08-24 18:19:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hsep.c

------------------------------------------------------------------------
r6157 | rmanfredi | 2004-08-24 18:19:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hosts.h

------------------------------------------------------------------------
r6156 | rmanfredi | 2004-08-24 18:18:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hosts.h

------------------------------------------------------------------------
r6155 | rmanfredi | 2004-08-24 18:18:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hosts.c

------------------------------------------------------------------------
r6154 | rmanfredi | 2004-08-24 18:18:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hosts.c

------------------------------------------------------------------------
r6153 | rmanfredi | 2004-08-24 18:18:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hostiles.h

------------------------------------------------------------------------
r6152 | rmanfredi | 2004-08-24 18:17:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hostiles.h

------------------------------------------------------------------------
r6151 | rmanfredi | 2004-08-24 18:17:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hostiles.c

------------------------------------------------------------------------
r6150 | rmanfredi | 2004-08-24 18:17:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hostiles.c

------------------------------------------------------------------------
r6149 | rmanfredi | 2004-08-24 18:17:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../header.h

------------------------------------------------------------------------
r6148 | rmanfredi | 2004-08-24 18:16:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/header.h

------------------------------------------------------------------------
r6147 | rmanfredi | 2004-08-24 18:16:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../header.c

------------------------------------------------------------------------
r6146 | rmanfredi | 2004-08-24 18:16:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/header.c

------------------------------------------------------------------------
r6145 | rmanfredi | 2004-08-24 18:16:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../hcache_gui_common.h

------------------------------------------------------------------------
r6144 | rmanfredi | 2004-08-24 18:15:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/hcache_common.h

------------------------------------------------------------------------
r6143 | rmanfredi | 2004-08-24 18:15:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../hcache_gui_common.c

------------------------------------------------------------------------
r6142 | rmanfredi | 2004-08-24 18:15:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/hcache_common.c

------------------------------------------------------------------------
r6141 | rmanfredi | 2004-08-24 18:15:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../hcache_gui2.c

------------------------------------------------------------------------
r6140 | rmanfredi | 2004-08-24 18:14:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/hcache.c

------------------------------------------------------------------------
r6139 | rmanfredi | 2004-08-24 18:14:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../hcache_gui.h

------------------------------------------------------------------------
r6138 | rmanfredi | 2004-08-24 18:14:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/hcache.h

------------------------------------------------------------------------
r6137 | rmanfredi | 2004-08-24 18:14:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../hcache_gui.c

------------------------------------------------------------------------
r6136 | rmanfredi | 2004-08-24 18:14:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/hcache.c

------------------------------------------------------------------------
r6135 | rmanfredi | 2004-08-24 18:13:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hcache.h

------------------------------------------------------------------------
r6134 | rmanfredi | 2004-08-24 18:13:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hcache.h

------------------------------------------------------------------------
r6133 | rmanfredi | 2004-08-24 18:13:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hcache.c

------------------------------------------------------------------------
r6132 | rmanfredi | 2004-08-24 18:13:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hcache.c

------------------------------------------------------------------------
r6131 | rmanfredi | 2004-08-24 18:12:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hashtree.h

------------------------------------------------------------------------
r6130 | rmanfredi | 2004-08-24 18:12:23 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hashtree.h

------------------------------------------------------------------------
r6129 | rmanfredi | 2004-08-24 18:12:11 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hashtree.c

------------------------------------------------------------------------
r6128 | rmanfredi | 2004-08-24 18:11:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/hashtree.c

------------------------------------------------------------------------
r6127 | rmanfredi | 2004-08-24 18:11:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hashlist.h

------------------------------------------------------------------------
r6126 | rmanfredi | 2004-08-24 18:11:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/hashlist.h

------------------------------------------------------------------------
r6125 | rmanfredi | 2004-08-24 18:11:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../hashlist.c

------------------------------------------------------------------------
r6124 | rmanfredi | 2004-08-24 18:11:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/hashlist.c

------------------------------------------------------------------------
r6123 | rmanfredi | 2004-08-24 18:10:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gwcache.h

------------------------------------------------------------------------
r6122 | rmanfredi | 2004-08-24 18:10:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gwcache.h

------------------------------------------------------------------------
r6121 | rmanfredi | 2004-08-24 18:10:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gwcache.c

------------------------------------------------------------------------
r6120 | rmanfredi | 2004-08-24 18:10:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gwcache.c

------------------------------------------------------------------------
r6119 | rmanfredi | 2004-08-24 18:10:01 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../guid.h

------------------------------------------------------------------------
r6118 | rmanfredi | 2004-08-24 18:09:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/guid.h

------------------------------------------------------------------------
r6117 | rmanfredi | 2004-08-24 18:09:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../guid.c

------------------------------------------------------------------------
r6116 | rmanfredi | 2004-08-24 18:08:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/guid.c

------------------------------------------------------------------------
r6115 | rmanfredi | 2004-08-24 18:08:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gui_props.ag

------------------------------------------------------------------------
r6114 | rmanfredi | 2004-08-24 18:08:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to if/gui_props.ag

------------------------------------------------------------------------
r6113 | rmanfredi | 2004-08-24 18:08:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gui.h

------------------------------------------------------------------------
r6112 | rmanfredi | 2004-08-24 18:07:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/columns.h

------------------------------------------------------------------------
r6111 | rmanfredi | 2004-08-24 18:07:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gui.c

------------------------------------------------------------------------
r6110 | rmanfredi | 2004-08-24 18:07:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/misc.c

------------------------------------------------------------------------
r6109 | rmanfredi | 2004-08-24 18:07:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gtkcolumnchooser.h

------------------------------------------------------------------------
r6108 | rmanfredi | 2004-08-24 18:06:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtkcolumnchooser.h

------------------------------------------------------------------------
r6107 | rmanfredi | 2004-08-24 18:06:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gtkcolumnchooser.c

------------------------------------------------------------------------
r6106 | rmanfredi | 2004-08-24 18:06:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtkcolumnchooser.c

------------------------------------------------------------------------
r6105 | rmanfredi | 2004-08-24 18:06:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gtk-missing.h

------------------------------------------------------------------------
r6104 | rmanfredi | 2004-08-24 18:06:08 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk-missing.h

------------------------------------------------------------------------
r6103 | rmanfredi | 2004-08-24 18:05:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gtk-missing.c

------------------------------------------------------------------------
r6102 | rmanfredi | 2004-08-24 18:05:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk-missing.c

------------------------------------------------------------------------
r6101 | rmanfredi | 2004-08-24 18:05:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gnutella.h

------------------------------------------------------------------------
r6100 | rmanfredi | 2004-08-24 18:05:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gnutella.h

------------------------------------------------------------------------
r6099 | rmanfredi | 2004-08-24 18:04:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gnet_stats_gui_common.h

------------------------------------------------------------------------
r6098 | rmanfredi | 2004-08-24 18:04:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gnet_stats_common.h

------------------------------------------------------------------------
r6097 | rmanfredi | 2004-08-24 18:04:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gnet_stats_gui_common.c

------------------------------------------------------------------------
r6096 | rmanfredi | 2004-08-24 18:04:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gnet_stats_common.c

------------------------------------------------------------------------
r6095 | rmanfredi | 2004-08-24 18:04:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../gnet_stats_gui2.c

------------------------------------------------------------------------
r6094 | rmanfredi | 2004-08-24 18:03:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/gnet_stats.c

------------------------------------------------------------------------
r6093 | rmanfredi | 2004-08-24 18:03:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../gnet_stats_gui.h

------------------------------------------------------------------------
r6092 | rmanfredi | 2004-08-24 18:03:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gnet_stats.h

------------------------------------------------------------------------
r6091 | rmanfredi | 2004-08-24 18:03:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../gnet_stats_gui.c

------------------------------------------------------------------------
r6090 | rmanfredi | 2004-08-24 18:02:53 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/gnet_stats.c

------------------------------------------------------------------------
r6089 | rmanfredi | 2004-08-24 18:02:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gnet_stats.h

------------------------------------------------------------------------
r6088 | rmanfredi | 2004-08-24 18:02:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gnet_stats.h

------------------------------------------------------------------------
r6087 | rmanfredi | 2004-08-24 18:02:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gnet_stats.c

------------------------------------------------------------------------
r6086 | rmanfredi | 2004-08-24 18:02:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gnet_stats.c

------------------------------------------------------------------------
r6085 | rmanfredi | 2004-08-24 18:01:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gnet_props.ag

------------------------------------------------------------------------
r6084 | rmanfredi | 2004-08-24 18:01:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to if/gnet_props.ag

------------------------------------------------------------------------
r6083 | rmanfredi | 2004-08-24 18:01:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gmsg.h

------------------------------------------------------------------------
r6082 | rmanfredi | 2004-08-24 18:01:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gmsg.h

------------------------------------------------------------------------
r6081 | rmanfredi | 2004-08-24 18:00:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../gmsg.c

------------------------------------------------------------------------
r6080 | rmanfredi | 2004-08-24 18:00:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/gmsg.c

------------------------------------------------------------------------
r6079 | rmanfredi | 2004-08-24 17:59:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../glib-missing.h

------------------------------------------------------------------------
r6078 | rmanfredi | 2004-08-24 17:59:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/glib-missing.h

------------------------------------------------------------------------
r6077 | rmanfredi | 2004-08-24 17:59:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../glib-missing.c

------------------------------------------------------------------------
r6076 | rmanfredi | 2004-08-24 17:59:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/glib-missing.c

------------------------------------------------------------------------
r6075 | rmanfredi | 2004-08-24 17:59:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ggep_type.h

------------------------------------------------------------------------
r6074 | rmanfredi | 2004-08-24 17:58:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ggep_type.h

------------------------------------------------------------------------
r6073 | rmanfredi | 2004-08-24 17:58:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ggep_type.c

------------------------------------------------------------------------
r6072 | rmanfredi | 2004-08-24 17:58:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ggep_type.c

------------------------------------------------------------------------
r6071 | rmanfredi | 2004-08-24 17:58:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ggep.h

------------------------------------------------------------------------
r6070 | rmanfredi | 2004-08-24 17:58:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ggep.h

------------------------------------------------------------------------
r6069 | rmanfredi | 2004-08-24 17:57:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ggep.c

------------------------------------------------------------------------
r6068 | rmanfredi | 2004-08-24 17:57:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ggep.c

------------------------------------------------------------------------
r6067 | rmanfredi | 2004-08-24 17:57:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../getline.h

------------------------------------------------------------------------
r6066 | rmanfredi | 2004-08-24 17:57:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/getline.h

------------------------------------------------------------------------
r6065 | rmanfredi | 2004-08-24 17:57:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../getline.c

------------------------------------------------------------------------
r6064 | rmanfredi | 2004-08-24 17:57:01 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/getline.c

------------------------------------------------------------------------
r6063 | rmanfredi | 2004-08-24 17:56:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../getdate.y

------------------------------------------------------------------------
r6062 | rmanfredi | 2004-08-24 17:56:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/getdate.y

------------------------------------------------------------------------
r6061 | rmanfredi | 2004-08-24 17:56:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../getdate.h

------------------------------------------------------------------------
r6060 | rmanfredi | 2004-08-24 17:56:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/getdate.h

------------------------------------------------------------------------
r6059 | rmanfredi | 2004-08-24 17:55:59 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../g2nodes.h

------------------------------------------------------------------------
r6058 | rmanfredi | 2004-08-24 17:55:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to g2/g2nodes.h

------------------------------------------------------------------------
r6057 | rmanfredi | 2004-08-24 17:55:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../g2node.h

------------------------------------------------------------------------
r6056 | rmanfredi | 2004-08-24 17:55:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to g2/g2node.h

------------------------------------------------------------------------
r6055 | rmanfredi | 2004-08-24 17:54:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../g2node.c

------------------------------------------------------------------------
r6054 | rmanfredi | 2004-08-24 17:54:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to g2/g2node.c

------------------------------------------------------------------------
r6053 | rmanfredi | 2004-08-24 17:54:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../fuzzy.h

------------------------------------------------------------------------
r6052 | rmanfredi | 2004-08-24 17:54:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/fuzzy.h

------------------------------------------------------------------------
r6051 | rmanfredi | 2004-08-24 17:54:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../../gtk2-gnutella.gladep

------------------------------------------------------------------------
r6050 | rmanfredi | 2004-08-24 17:53:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../fuzzy.c

------------------------------------------------------------------------
r6049 | rmanfredi | 2004-08-24 17:53:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to src/ui/gtk/gtk2/gtk-gnutella.gladep

------------------------------------------------------------------------
r6048 | rmanfredi | 2004-08-24 17:53:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/fuzzy.c

------------------------------------------------------------------------
r6047 | rmanfredi | 2004-08-24 17:53:33 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter_gui.h

------------------------------------------------------------------------
r6046 | rmanfredi | 2004-08-24 17:53:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../../gtk2-gnutella.glade

------------------------------------------------------------------------
r6045 | rmanfredi | 2004-08-24 17:53:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter.h

------------------------------------------------------------------------
r6044 | rmanfredi | 2004-08-24 17:53:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to src/ui/gtk/gtk2/gtk-gnutella.glade

------------------------------------------------------------------------
r6043 | rmanfredi | 2004-08-24 17:53:10 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter_gui.c

------------------------------------------------------------------------
r6042 | rmanfredi | 2004-08-24 17:52:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter.c

------------------------------------------------------------------------
r6041 | rmanfredi | 2004-08-24 17:52:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../../gtk-gnutella.glade

------------------------------------------------------------------------
r6040 | rmanfredi | 2004-08-24 17:52:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter_cb.h

------------------------------------------------------------------------
r6039 | rmanfredi | 2004-08-24 17:52:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to src/ui/gtk/gtk1/gtk-gnutella.glade

------------------------------------------------------------------------
r6038 | rmanfredi | 2004-08-24 17:52:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter_cb.h

------------------------------------------------------------------------
r6037 | rmanfredi | 2004-08-24 17:52:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter_cb.c

------------------------------------------------------------------------
r6036 | rmanfredi | 2004-08-24 17:52:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter_cb.c

------------------------------------------------------------------------
r6035 | rmanfredi | 2004-08-24 17:51:54 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter.h

------------------------------------------------------------------------
r6034 | rmanfredi | 2004-08-24 17:51:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter_core.h

------------------------------------------------------------------------
r6033 | rmanfredi | 2004-08-24 17:51:31 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../filter.c

------------------------------------------------------------------------
r6032 | rmanfredi | 2004-08-24 17:51:20 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/filter_core.c

------------------------------------------------------------------------
r6031 | rmanfredi | 2004-08-24 17:51:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../fileinfo_gui2.c

------------------------------------------------------------------------
r6030 | rmanfredi | 2004-08-24 17:50:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/fileinfo.c

------------------------------------------------------------------------
r6029 | rmanfredi | 2004-08-24 17:50:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../fileinfo_gui.h

------------------------------------------------------------------------
r6028 | rmanfredi | 2004-08-24 17:50:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/fileinfo.h

------------------------------------------------------------------------
r6027 | rmanfredi | 2004-08-24 17:50:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../fileinfo_gui.c

------------------------------------------------------------------------
r6026 | rmanfredi | 2004-08-24 17:50:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/fileinfo.c

------------------------------------------------------------------------
r6025 | rmanfredi | 2004-08-24 17:49:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../fileinfo.h

------------------------------------------------------------------------
r6024 | rmanfredi | 2004-08-24 17:49:45 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/fileinfo.h

------------------------------------------------------------------------
r6023 | rmanfredi | 2004-08-24 17:49:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../fileinfo.c

------------------------------------------------------------------------
r6022 | rmanfredi | 2004-08-24 17:49:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/fileinfo.c

------------------------------------------------------------------------
r6021 | rmanfredi | 2004-08-24 17:49:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../file.h

------------------------------------------------------------------------
r6020 | rmanfredi | 2004-08-24 17:48:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/file.h

------------------------------------------------------------------------
r6019 | rmanfredi | 2004-08-24 17:48:36 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../file.c

------------------------------------------------------------------------
r6018 | rmanfredi | 2004-08-24 17:48:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/file.c

------------------------------------------------------------------------
r6017 | rmanfredi | 2004-08-24 17:48:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../extensions.h

------------------------------------------------------------------------
r6016 | rmanfredi | 2004-08-24 17:48:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/extensions.h

------------------------------------------------------------------------
r6015 | rmanfredi | 2004-08-24 17:47:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../extensions.c

------------------------------------------------------------------------
r6014 | rmanfredi | 2004-08-24 17:47:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/extensions.c

------------------------------------------------------------------------
r6013 | rmanfredi | 2004-08-24 17:47:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../event.h

------------------------------------------------------------------------
r6012 | rmanfredi | 2004-08-24 17:47:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/event.h

------------------------------------------------------------------------
r6011 | rmanfredi | 2004-08-24 17:46:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../event.c

------------------------------------------------------------------------
r6010 | rmanfredi | 2004-08-24 17:46:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/event.c

------------------------------------------------------------------------
r6009 | rmanfredi | 2004-08-24 17:46:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../eval.h

------------------------------------------------------------------------
r6008 | rmanfredi | 2004-08-24 17:46:07 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/eval.h

------------------------------------------------------------------------
r6007 | rmanfredi | 2004-08-24 17:45:55 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../eval.c

------------------------------------------------------------------------
r6006 | rmanfredi | 2004-08-24 17:45:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/eval.c

------------------------------------------------------------------------
r6005 | rmanfredi | 2004-08-24 17:45:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../drop.h

------------------------------------------------------------------------
r6004 | rmanfredi | 2004-08-24 17:45:18 -0400 (Tue, 24 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r6003 | rmanfredi | 2004-08-24 17:45:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/drop.h

------------------------------------------------------------------------
r6002 | rmanfredi | 2004-08-24 17:45:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../drop.c

------------------------------------------------------------------------
r6001 | rmanfredi | 2004-08-24 17:44:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/drop.c

------------------------------------------------------------------------
r6000 | rmanfredi | 2004-08-24 17:44:35 -0400 (Tue, 24 Aug 2004) | 2 lines

Updated after CVS restructuring.

------------------------------------------------------------------------
r5999 | rmanfredi | 2004-08-24 17:44:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dq.h

------------------------------------------------------------------------
r5998 | rmanfredi | 2004-08-24 17:44:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dq.h

------------------------------------------------------------------------
r5997 | rmanfredi | 2004-08-24 17:44:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dq.c

------------------------------------------------------------------------
r5996 | rmanfredi | 2004-08-24 17:43:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dq.c

------------------------------------------------------------------------
r5995 | rmanfredi | 2004-08-24 17:43:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../downloads_gui_common.h

------------------------------------------------------------------------
r5994 | rmanfredi | 2004-08-24 17:43:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/downloads_common.h

------------------------------------------------------------------------
r5993 | rmanfredi | 2004-08-24 17:43:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../downloads_gui_common.c

------------------------------------------------------------------------
r5992 | rmanfredi | 2004-08-24 17:43:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/downloads_common.c

------------------------------------------------------------------------
r5991 | rmanfredi | 2004-08-24 17:42:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_gui2.c

------------------------------------------------------------------------
r5990 | rmanfredi | 2004-08-24 17:42:37 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/downloads.c

------------------------------------------------------------------------
r5989 | rmanfredi | 2004-08-24 17:42:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../downloads_gui.h

------------------------------------------------------------------------
r5988 | rmanfredi | 2004-08-24 17:42:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/downloads.h

------------------------------------------------------------------------
r5987 | rmanfredi | 2004-08-24 17:41:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_gui.c

------------------------------------------------------------------------
r5986 | rmanfredi | 2004-08-24 17:41:39 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/downloads.c

------------------------------------------------------------------------
r5985 | rmanfredi | 2004-08-24 17:41:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_cb2.h

------------------------------------------------------------------------
r5984 | rmanfredi | 2004-08-24 17:41:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/downloads_cb.h

------------------------------------------------------------------------
r5983 | rmanfredi | 2004-08-24 17:41:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_cb2.c

------------------------------------------------------------------------
r5982 | rmanfredi | 2004-08-24 17:40:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk2/downloads_cb.c

------------------------------------------------------------------------
r5981 | rmanfredi | 2004-08-24 17:40:39 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_cb.h

------------------------------------------------------------------------
r5980 | rmanfredi | 2004-08-24 17:40:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/downloads_cb.h

------------------------------------------------------------------------
r5979 | rmanfredi | 2004-08-24 17:40:16 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../downloads_cb.c

------------------------------------------------------------------------
r5978 | rmanfredi | 2004-08-24 17:40:04 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk1/downloads_cb.c

------------------------------------------------------------------------
r5977 | rmanfredi | 2004-08-24 17:39:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../downloads.h

------------------------------------------------------------------------
r5976 | rmanfredi | 2004-08-24 17:39:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/downloads.h

------------------------------------------------------------------------
r5975 | rmanfredi | 2004-08-24 17:39:29 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../downloads.c

------------------------------------------------------------------------
r5974 | rmanfredi | 2004-08-24 17:39:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/downloads.c

------------------------------------------------------------------------
r5973 | rmanfredi | 2004-08-24 17:39:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dmesh.h

------------------------------------------------------------------------
r5972 | rmanfredi | 2004-08-24 17:38:51 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dmesh.h

------------------------------------------------------------------------
r5971 | rmanfredi | 2004-08-24 17:38:38 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dmesh.c

------------------------------------------------------------------------
r5970 | rmanfredi | 2004-08-24 17:38:21 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dmesh.c

------------------------------------------------------------------------
r5969 | rmanfredi | 2004-08-24 17:38:09 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dh.h

------------------------------------------------------------------------
r5968 | rmanfredi | 2004-08-24 17:37:57 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dh.h

------------------------------------------------------------------------
r5967 | rmanfredi | 2004-08-24 17:37:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../dh.c

------------------------------------------------------------------------
r5966 | rmanfredi | 2004-08-24 17:37:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/dh.c

------------------------------------------------------------------------
r5965 | rmanfredi | 2004-08-24 17:37:15 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../crc.h

------------------------------------------------------------------------
r5964 | rmanfredi | 2004-08-24 17:37:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/crc.h

------------------------------------------------------------------------
r5963 | rmanfredi | 2004-08-24 17:36:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../crc.c

------------------------------------------------------------------------
r5962 | rmanfredi | 2004-08-24 17:36:40 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/crc.c

------------------------------------------------------------------------
r5961 | rmanfredi | 2004-08-24 17:36:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../cq.h

------------------------------------------------------------------------
r5960 | rmanfredi | 2004-08-24 17:36:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/cq.h

------------------------------------------------------------------------
r5959 | rmanfredi | 2004-08-24 17:35:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../cq.c

------------------------------------------------------------------------
r5958 | rmanfredi | 2004-08-24 17:35:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/cq.c

------------------------------------------------------------------------
r5957 | rmanfredi | 2004-08-24 17:35:34 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../cobs.h

------------------------------------------------------------------------
r5956 | rmanfredi | 2004-08-24 17:35:22 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/cobs.h

------------------------------------------------------------------------
r5955 | rmanfredi | 2004-08-24 17:34:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../cobs.c

------------------------------------------------------------------------
r5954 | rmanfredi | 2004-08-24 17:34:44 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/cobs.c

------------------------------------------------------------------------
r5953 | rmanfredi | 2004-08-24 17:29:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../clock.c

------------------------------------------------------------------------
r5952 | rmanfredi | 2004-08-24 17:20:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/clock.c

------------------------------------------------------------------------
r5951 | rmanfredi | 2004-08-24 17:18:26 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../callbacks.h

------------------------------------------------------------------------
r5950 | rmanfredi | 2004-08-24 17:16:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk-shared/callbacks.h

------------------------------------------------------------------------
r5949 | rmanfredi | 2004-08-24 17:15:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../../../callbacks.c

------------------------------------------------------------------------
r5948 | rmanfredi | 2004-08-24 17:14:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to ui/gtk/gtk-shared/callbacks.c

------------------------------------------------------------------------
r5947 | rmanfredi | 2004-08-24 17:13:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bsched.h

------------------------------------------------------------------------
r5946 | rmanfredi | 2004-08-24 17:12:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/bsched.h

------------------------------------------------------------------------
r5945 | rmanfredi | 2004-08-24 17:10:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bsched.c

------------------------------------------------------------------------
r5944 | rmanfredi | 2004-08-24 17:10:02 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/bsched.c

------------------------------------------------------------------------
r5943 | rmanfredi | 2004-08-24 17:09:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bitzi.h

------------------------------------------------------------------------
r5942 | rmanfredi | 2004-08-24 17:08:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/bitzi.h

------------------------------------------------------------------------
r5941 | rmanfredi | 2004-08-24 17:07:01 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bitzi.c

------------------------------------------------------------------------
r5940 | rmanfredi | 2004-08-24 17:05:48 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/bitzi.c

------------------------------------------------------------------------
r5939 | rmanfredi | 2004-08-24 17:04:17 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bg.h

------------------------------------------------------------------------
r5938 | rmanfredi | 2004-08-24 17:03:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/bg.h

------------------------------------------------------------------------
r5937 | rmanfredi | 2004-08-24 17:01:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../bg.c

------------------------------------------------------------------------
r5936 | rmanfredi | 2004-08-24 17:00:05 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/bg.c

------------------------------------------------------------------------
r5935 | rmanfredi | 2004-08-24 16:56:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../base64.h

------------------------------------------------------------------------
r5934 | rmanfredi | 2004-08-24 16:54:46 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/base64.h

------------------------------------------------------------------------
r5933 | rmanfredi | 2004-08-24 16:53:06 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../base64.c

------------------------------------------------------------------------
r5932 | rmanfredi | 2004-08-24 16:51:56 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/base64.c

------------------------------------------------------------------------
r5931 | rmanfredi | 2004-08-24 16:50:27 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../base32.h

------------------------------------------------------------------------
r5930 | rmanfredi | 2004-08-24 16:48:58 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/base32.h

------------------------------------------------------------------------
r5929 | rmanfredi | 2004-08-24 16:47:41 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../base32.c

------------------------------------------------------------------------
r5928 | rmanfredi | 2004-08-24 16:46:47 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/base32.c

------------------------------------------------------------------------
r5927 | rmanfredi | 2004-08-24 16:46:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ban.h

------------------------------------------------------------------------
r5926 | rmanfredi | 2004-08-24 16:45:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ban.h

------------------------------------------------------------------------
r5925 | rmanfredi | 2004-08-24 16:44:00 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../ban.c

------------------------------------------------------------------------
r5924 | rmanfredi | 2004-08-24 16:42:43 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/ban.c

------------------------------------------------------------------------
r5923 | rmanfredi | 2004-08-24 16:40:49 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../atoms.h

------------------------------------------------------------------------
r5922 | rmanfredi | 2004-08-24 16:38:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/atoms.h

------------------------------------------------------------------------
r5921 | rmanfredi | 2004-08-24 16:36:14 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../atoms.c

------------------------------------------------------------------------
r5920 | rmanfredi | 2004-08-24 16:34:30 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/atoms.c

------------------------------------------------------------------------
r5919 | rmanfredi | 2004-08-24 16:33:28 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../alive.h

------------------------------------------------------------------------
r5918 | rmanfredi | 2004-08-24 16:32:25 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/alive.h

------------------------------------------------------------------------
r5917 | rmanfredi | 2004-08-24 16:31:03 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../alive.c

------------------------------------------------------------------------
r5916 | rmanfredi | 2004-08-24 16:29:52 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to core/alive.c

------------------------------------------------------------------------
r5915 | rmanfredi | 2004-08-24 16:29:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../adns.h

------------------------------------------------------------------------
r5914 | rmanfredi | 2004-08-24 16:28:12 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/adns.h

------------------------------------------------------------------------
r5913 | rmanfredi | 2004-08-24 16:27:13 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved from ../adns.c

------------------------------------------------------------------------
r5912 | rmanfredi | 2004-08-24 16:26:19 -0400 (Tue, 24 Aug 2004) | 2 lines

Moved to lib/adns.c

------------------------------------------------------------------------
r5911 | rmanfredi | 2004-08-24 16:25:32 -0400 (Tue, 24 Aug 2004) | 2 lines

Deleted without replacement

------------------------------------------------------------------------
r5910 | rmanfredi | 2004-08-24 15:37:24 -0400 (Tue, 24 Aug 2004) | 2 lines

Deleted without replacement

------------------------------------------------------------------------
r5909 | rmanfredi | 2004-08-24 15:26:50 -0400 (Tue, 24 Aug 2004) | 2 lines

Deleted without replacement

------------------------------------------------------------------------
r5907 | rmanfredi | 2004-08-21 02:41:04 -0400 (Sat, 21 Aug 2004) | 3 lines

Fixed wrongly generated Makefile.SH, claiming to be in src/g2 and bearing
several "^ " escape sequences due to invalid jmake configuration.

------------------------------------------------------------------------
r5905 | rmanfredi | 2004-08-19 17:15:25 -0400 (Thu, 19 Aug 2004) | 2 lines

Version of 2004-08-19 before CVS freeze.

------------------------------------------------------------------------
r5904 | rmanfredi | 2004-08-19 16:53:45 -0400 (Thu, 19 Aug 2004) | 2 lines

Removed all "save = TRUE" lines since by default properties are persisted.

------------------------------------------------------------------------
r5903 | rmanfredi | 2004-08-19 16:22:57 -0400 (Thu, 19 Aug 2004) | 2 lines

Support for g2 was mistakenly set to TRUE by default!

------------------------------------------------------------------------
r5902 | graaff | 2004-08-19 15:42:44 -0400 (Thu, 19 Aug 2004) | 2 lines

Add call to vp_gui_shutdown() so that visual progress stuff will be cleaned up before quitting.

------------------------------------------------------------------------
r5901 | cbiere | 2004-08-19 03:06:37 -0400 (Thu, 19 Aug 2004) | 5 lines

node_process_handshake_ack():
	Use node_bye() instead of node_remove() to inform the peer about
	its error.
	Added missing ``return'' after node_bye().

------------------------------------------------------------------------
r5900 | cbiere | 2004-08-19 02:47:04 -0400 (Thu, 19 Aug 2004) | 5 lines

node_process_handshake_ack():
	If the remote peer claims using Content-Encoding "deflate"
	although support for deflate is disabled, emit a warning and
	disconnect the peer.

------------------------------------------------------------------------
r5899 | rmanfredi | 2004-08-19 02:34:43 -0400 (Thu, 19 Aug 2004) | 2 lines

Fixed too long lines.

------------------------------------------------------------------------
r5898 | cbiere | 2004-08-19 02:17:25 -0400 (Thu, 19 Aug 2004) | 2 lines

Forgot a curly brace.

------------------------------------------------------------------------
r5897 | cbiere | 2004-08-19 02:10:31 -0400 (Thu, 19 Aug 2004) | 3 lines

Fix compile problem when HAS_SENDFILE is defined.
Note sendfile() must not be used when using a TLS socket.

------------------------------------------------------------------------
r5896 | cbiere | 2004-08-19 01:46:05 -0400 (Thu, 19 Aug 2004) | 3 lines

Use utf8_decompose_nfd() instead of g_utf8_normalize() so that the code
doesn't depend on GLib 2.x. This needs more testing for Mac OS X, though.

------------------------------------------------------------------------
r5895 | cbiere | 2004-08-18 21:06:49 -0400 (Wed, 18 Aug 2004) | 5 lines

Added support for TLS encrypted TCP connections using GNU TLS.
connect_socksv5():
	Fixed bad casting bug causing a potential unaligned access.
Added socket_init().

------------------------------------------------------------------------
r5894 | cbiere | 2004-08-18 21:01:44 -0400 (Wed, 18 Aug 2004) | 3 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.

------------------------------------------------------------------------
r5893 | cbiere | 2004-08-18 20:59:24 -0400 (Wed, 18 Aug 2004) | 9 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.
print_hsep_table():
	Fixed some signed vs. unsigned comparison warnings.
shell_unescape():
	Use a single line instead of three.
shell_read_data():
	Quit the shell session if READ_OVERFLOW occurs. We can't handle it.

------------------------------------------------------------------------
r5892 | cbiere | 2004-08-18 20:53:50 -0400 (Wed, 18 Aug 2004) | 3 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.

------------------------------------------------------------------------
r5891 | cbiere | 2004-08-18 20:51:39 -0400 (Wed, 18 Aug 2004) | 2 lines

Added a node flag for TLS.

------------------------------------------------------------------------
r5890 | cbiere | 2004-08-18 20:47:45 -0400 (Wed, 18 Aug 2004) | 8 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.
Use a spill buffer when sending the Gnutella hello string so that it we
can handle a partial write during the handshahke.
Added node flag for TLS.
Support running with disabled deflate traffic compression for debugging
purposes.

------------------------------------------------------------------------
r5889 | cbiere | 2004-08-18 20:44:21 -0400 (Wed, 18 Aug 2004) | 2 lines

Call socket_init().

------------------------------------------------------------------------
r5888 | cbiere | 2004-08-18 20:43:11 -0400 (Wed, 18 Aug 2004) | 3 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.

------------------------------------------------------------------------
r5887 | cbiere | 2004-08-18 20:31:41 -0400 (Wed, 18 Aug 2004) | 3 lines

Don't access the file descriptor of socket directly but use the wrap_io_t
object of it.

------------------------------------------------------------------------
r5886 | cbiere | 2004-08-18 20:17:40 -0400 (Wed, 18 Aug 2004) | 3 lines

Don't include system header files. Include common.h instead.
pmsg_prio() returns an unsigned integer. Thus use guint.

------------------------------------------------------------------------
r5885 | cbiere | 2004-08-18 20:12:31 -0400 (Wed, 18 Aug 2004) | 2 lines

Don't include system header files. Include common.h instead.

------------------------------------------------------------------------
r5884 | cbiere | 2004-08-18 20:09:52 -0400 (Wed, 18 Aug 2004) | 2 lines

Added missing prototype for download_new_uri().

------------------------------------------------------------------------
r5883 | cbiere | 2004-08-18 20:08:56 -0400 (Wed, 18 Aug 2004) | 3 lines

date2time():
	Changed the 2nd parameter from a pointer argument to a value argument.

------------------------------------------------------------------------
r5882 | cbiere | 2004-08-18 20:02:58 -0400 (Wed, 18 Aug 2004) | 2 lines

Include <sys/uio.h>, <zlib.h> and conditionally <sys/sendfile.h>.

------------------------------------------------------------------------
r5881 | cbiere | 2004-08-18 20:01:05 -0400 (Wed, 18 Aug 2004) | 2 lines

Include common.h instead of system header files.

------------------------------------------------------------------------
r5880 | cbiere | 2004-08-18 19:59:41 -0400 (Wed, 18 Aug 2004) | 3 lines

date2time():
	Changed the 2nd parameter from a pointer argument to a value argument.

------------------------------------------------------------------------
r5879 | rmanfredi | 2004-08-18 16:17:52 -0400 (Wed, 18 Aug 2004) | 2 lines

Added assertion, changed a debug message to display the size of DH tables.

------------------------------------------------------------------------
r5878 | rmanfredi | 2004-08-18 16:16:05 -0400 (Wed, 18 Aug 2004) | 2 lines

Removed dependency between file.c / sockets.c and ban_reclaim_fd().

------------------------------------------------------------------------
r5877 | cbiere | 2004-08-18 16:09:15 -0400 (Wed, 18 Aug 2004) | 2 lines

Added properties gnet_deflate_enabled and tls_enforce.

------------------------------------------------------------------------
r5876 | cbiere | 2004-08-18 15:49:10 -0400 (Wed, 18 Aug 2004) | 2 lines

Don't include system header files. Include common.h instead.

------------------------------------------------------------------------
r5875 | cbiere | 2004-08-18 15:05:20 -0400 (Wed, 18 Aug 2004) | 2 lines

Don't include system header files. Include common.h instead.

------------------------------------------------------------------------
r5874 | cbiere | 2004-08-18 14:59:51 -0400 (Wed, 18 Aug 2004) | 3 lines

Added inclusion of diverse system headers. These shouldn't be included by
anything else, include common.h instead.

------------------------------------------------------------------------
r5873 | rmanfredi | 2004-08-18 14:51:22 -0400 (Wed, 18 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r5872 | rmanfredi | 2004-08-18 14:49:45 -0400 (Wed, 18 Aug 2004) | 2 lines

Don't list g2 as a subdir yet.

------------------------------------------------------------------------
r5871 | nonamer | 2004-08-18 14:39:22 -0400 (Wed, 18 Aug 2004) | 2 lines

Temp commit so things won't conflict after the restructure

------------------------------------------------------------------------
r5870 | cbiere | 2004-08-18 14:32:01 -0400 (Wed, 18 Aug 2004) | 2 lines

Don't include <regex.h>, common.h handles this.

------------------------------------------------------------------------
r5869 | cbiere | 2004-08-18 13:11:47 -0400 (Wed, 18 Aug 2004) | 4 lines

Added missing CVS Id tag.
Added copyright information: All code here derives from misc.h.
Include "config.h" and <string.h> for strlcpy().

------------------------------------------------------------------------
r5868 | cbiere | 2004-08-18 13:06:56 -0400 (Wed, 18 Aug 2004) | 2 lines

This is mine.

------------------------------------------------------------------------
r5867 | rmanfredi | 2004-08-18 07:32:43 -0400 (Wed, 18 Aug 2004) | 3 lines

Fixed to have it compile with -DTRACK_MALLOC now that the UI/core separation
is in place.

------------------------------------------------------------------------
r5866 | emilelevivre | 2004-08-18 05:35:14 -0400 (Wed, 18 Aug 2004) | 4 lines

Thoughts on/explanations of what I did with the ui/core separation patch
have now been added to devguide in the doc dir (instead of only on my
website).  Filename: UICORE_SPLIT

------------------------------------------------------------------------
r5865 | emilelevivre | 2004-08-18 05:11:43 -0400 (Wed, 18 Aug 2004) | 4 lines

Initial steps for ui/core seperation.  Clean-up of dependencies.  Creation
of ui/core interface files.  Full description at
http://www.struggle.ca/gtkg-guicore-description.txt

------------------------------------------------------------------------
r5864 | rmanfredi | 2004-08-18 02:29:10 -0400 (Wed, 18 Aug 2004) | 2 lines

Fixed stupid floating point exception on a debug message when elapsed == 0.

------------------------------------------------------------------------
r5863 | rmanfredi | 2004-08-17 01:52:19 -0400 (Tue, 17 Aug 2004) | 2 lines

Forgot to test for UDP enabled before sending "UDP connect back".

------------------------------------------------------------------------
r5862 | cbiere | 2004-08-16 23:52:52 -0400 (Mon, 16 Aug 2004) | 4 lines

Updated GUI to be able to configure UDP, OOB querying, and debug levels.
Polished configuration dialog somewhat.
Moved download queue to a third tab.

------------------------------------------------------------------------
r5861 | cbiere | 2004-08-16 23:46:29 -0400 (Mon, 16 Aug 2004) | 3 lines

Fixed variable declaration of ``cur_hash''.
Fixed printf format string: int != int64_t.

------------------------------------------------------------------------
r5860 | cbiere | 2004-08-16 18:27:52 -0400 (Mon, 16 Aug 2004) | 2 lines

Hide QRT related debug messages for qrp_debug < 1.

------------------------------------------------------------------------
r5859 | rmanfredi | 2004-08-16 18:09:22 -0400 (Mon, 16 Aug 2004) | 3 lines

Shuffled to move the propery table near the end to avoid pre-declaration
of most callbacks.  Added UDP configuration and debug level settings.

------------------------------------------------------------------------
r5858 | rmanfredi | 2004-08-16 18:07:42 -0400 (Mon, 16 Aug 2004) | 2 lines

Added callback to react when "enable_udp" changes.

------------------------------------------------------------------------
r5857 | rmanfredi | 2004-08-16 18:05:54 -0400 (Mon, 16 Aug 2004) | 2 lines

Updated GUI to be able to configure UDP, OOB querying, and debug levels.

------------------------------------------------------------------------
r5856 | cbiere | 2004-08-16 14:29:40 -0400 (Mon, 16 Aug 2004) | 4 lines

Bourne shell script to connect to a local GTKG remote shell using telnet.
The authentication cookie from $GTK_GNUTELLA_DIR/auth_cookie is automagically
sent.

------------------------------------------------------------------------
r5855 | rmanfredi | 2004-08-16 12:20:56 -0400 (Mon, 16 Aug 2004) | 2 lines

Added firewall_tcp.xpm and firewall_udp.xpm to the manifests.

------------------------------------------------------------------------
r5854 | rmanfredi | 2004-08-16 12:20:06 -0400 (Mon, 16 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5853 | rmanfredi | 2004-08-16 11:53:16 -0400 (Mon, 16 Aug 2004) | 2 lines

Added declaration for the UDP socket variable.

------------------------------------------------------------------------
r5852 | rmanfredi | 2004-08-16 11:53:16 -0400 (Mon, 16 Aug 2004) | 2 lines

New "qrp_debug" property for QRP debugging.

------------------------------------------------------------------------
r5851 | rmanfredi | 2004-08-16 11:46:16 -0400 (Mon, 16 Aug 2004) | 2 lines

Added support for GTKG/7v1 "UDP Connect Back" vendor message.

------------------------------------------------------------------------
r5850 | rmanfredi | 2004-08-16 11:45:33 -0400 (Mon, 16 Aug 2004) | 2 lines

Special-case display of vendor code with all zeroes as "null".

------------------------------------------------------------------------
r5849 | rmanfredi | 2004-08-16 11:44:56 -0400 (Mon, 16 Aug 2004) | 2 lines

Added support for UDP sockets.

------------------------------------------------------------------------
r5848 | rmanfredi | 2004-08-16 11:43:34 -0400 (Mon, 16 Aug 2004) | 2 lines

Also recreate the UDP socket when the UDP port changes.

------------------------------------------------------------------------
r5847 | rmanfredi | 2004-08-16 11:42:55 -0400 (Mon, 16 Aug 2004) | 2 lines

Make sure we never route queries and query hits received from UDP.

------------------------------------------------------------------------
r5846 | rmanfredi | 2004-08-16 11:41:53 -0400 (Mon, 16 Aug 2004) | 4 lines

pcache_pong_fake() now takes only ultranode addresses.
Will now recognize incoming UDP ping bearing our GUID as a sign that
we can receive unsollicited UDP traffic.

------------------------------------------------------------------------
r5845 | rmanfredi | 2004-08-16 11:40:08 -0400 (Mon, 16 Aug 2004) | 3 lines

Can now process incoming UDP Gnutella messages as if originating from
a "fake" UDP node.

------------------------------------------------------------------------
r5844 | rmanfredi | 2004-08-16 11:39:01 -0400 (Mon, 16 Aug 2004) | 2 lines

Added UDP socket.

------------------------------------------------------------------------
r5843 | rmanfredi | 2004-08-16 11:38:09 -0400 (Mon, 16 Aug 2004) | 2 lines

Added support for UDP firewalling detection.

------------------------------------------------------------------------
r5842 | rmanfredi | 2004-08-16 11:37:29 -0400 (Mon, 16 Aug 2004) | 2 lines

Count UDP stats in separate array.

------------------------------------------------------------------------
r5841 | rmanfredi | 2004-08-16 11:35:18 -0400 (Mon, 16 Aug 2004) | 2 lines

Added NODE_P_UDP.

------------------------------------------------------------------------
r5840 | rmanfredi | 2004-08-16 11:34:55 -0400 (Mon, 16 Aug 2004) | 2 lines

Added gnet_stats_udp_get().

------------------------------------------------------------------------
r5839 | rmanfredi | 2004-08-16 11:34:28 -0400 (Mon, 16 Aug 2004) | 2 lines

Added bws_udp_count_written() and bws_udp_count_read().

------------------------------------------------------------------------
r5838 | rmanfredi | 2004-08-16 11:32:14 -0400 (Mon, 16 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r5837 | rmanfredi | 2004-08-16 11:31:39 -0400 (Mon, 16 Aug 2004) | 3 lines

Added new properties for UDP support: "udp_debug", "enable_udp",
"is_udp_firewalled", "process_oob_queries", "send_oob_queries".

------------------------------------------------------------------------
r5836 | rmanfredi | 2004-08-16 11:27:07 -0400 (Mon, 16 Aug 2004) | 2 lines

Added udp.[ch] to the manifests.

------------------------------------------------------------------------
r5835 | rmanfredi | 2004-08-16 11:25:29 -0400 (Mon, 16 Aug 2004) | 2 lines

Added udp.[ch].

------------------------------------------------------------------------
r5834 | rmanfredi | 2004-08-16 11:24:04 -0400 (Mon, 16 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5833 | cbiere | 2004-08-15 10:10:43 -0400 (Sun, 15 Aug 2004) | 2 lines

Added information about indent hinting for popular editors [by Alex Bennee].

------------------------------------------------------------------------
r5832 | cbiere | 2004-08-15 10:02:31 -0400 (Sun, 15 Aug 2004) | 2 lines

Added information about ldflags and also CFLAGS/LDFLAGS.

------------------------------------------------------------------------
r5831 | rmanfredi | 2004-08-14 18:21:10 -0400 (Sat, 14 Aug 2004) | 2 lines

Stripped all ^M from text.

------------------------------------------------------------------------
r5830 | rmanfredi | 2004-08-14 18:20:30 -0400 (Sat, 14 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5829 | rmanfredi | 2004-08-14 18:12:26 -0400 (Sat, 14 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5828 | rmanfredi | 2004-08-14 18:00:28 -0400 (Sat, 14 Aug 2004) | 2 lines

Definitive version, after LimeWire review.

------------------------------------------------------------------------
r5827 | rmanfredi | 2004-08-14 13:20:37 -0400 (Sat, 14 Aug 2004) | 3 lines

If leaf queries us with OOB hits delivery and does not support guidance,
strip the OOB flag from the query to be able to monitor how many hits we get.

------------------------------------------------------------------------
r5826 | rmanfredi | 2004-08-14 12:54:23 -0400 (Sat, 14 Aug 2004) | 3 lines

Added debugging (if dbg > 10) messages to track the "no longer connecting"
problem that happens from time to time.

------------------------------------------------------------------------
r5825 | rmanfredi | 2004-08-14 11:48:57 -0400 (Sat, 14 Aug 2004) | 4 lines

Parse (but ignore for now) the "features supported" NULL/10v0 message
which supplies extra capabilities without negotiating them via handshake
headers.

------------------------------------------------------------------------
r5824 | rmanfredi | 2004-08-14 11:02:40 -0400 (Sat, 14 Aug 2004) | 2 lines

Renamed http_range_copy() into http_range_clone() for consistency.

------------------------------------------------------------------------
r5823 | eqom14 | 2004-08-14 09:26:49 -0400 (Sat, 14 Aug 2004) | 2 lines

Try and make a universal spec for fedora or mdk.

------------------------------------------------------------------------
r5822 | rmanfredi | 2004-08-14 09:02:16 -0400 (Sat, 14 Aug 2004) | 3 lines

Don't revitalize route entries for leaf nodes but for the PUSH routes we use
when we're sending PUSH messages.

------------------------------------------------------------------------
r5821 | rmanfredi | 2004-08-14 09:01:24 -0400 (Sat, 14 Aug 2004) | 2 lines

Always reply to handshaking ping (first ping we accept) with personal info.

------------------------------------------------------------------------
r5820 | rmanfredi | 2004-08-14 07:02:35 -0400 (Sat, 14 Aug 2004) | 2 lines

Use "vmsg_debug" instead of "dbg".

------------------------------------------------------------------------
r5819 | rmanfredi | 2004-08-14 07:02:21 -0400 (Sat, 14 Aug 2004) | 2 lines

Use "search_debug" instead of "dbg".

------------------------------------------------------------------------
r5818 | rmanfredi | 2004-08-14 07:01:56 -0400 (Sat, 14 Aug 2004) | 2 lines

New properties "vmsg_debug" and "search_debug".

------------------------------------------------------------------------
r5817 | rmanfredi | 2004-08-14 06:24:54 -0400 (Sat, 14 Aug 2004) | 3 lines

Use gmsg_infostr_full() instead of gmsg_infostr(), and replaced check for
"dbg" with a check for "dq_debug".

------------------------------------------------------------------------
r5816 | rmanfredi | 2004-08-14 06:16:30 -0400 (Sat, 14 Aug 2004) | 2 lines

Accept BYE, HSEP and vendor messages with TTL=0 or TTL=1.

------------------------------------------------------------------------
r5815 | rmanfredi | 2004-08-14 06:15:22 -0400 (Sat, 14 Aug 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r5814 | rmanfredi | 2004-08-14 06:14:37 -0400 (Sat, 14 Aug 2004) | 2 lines

New vmsg_infostr() to extract vendor message information for logging.

------------------------------------------------------------------------
r5813 | rmanfredi | 2004-08-14 06:13:40 -0400 (Sat, 14 Aug 2004) | 3 lines

Added gmsg_infostr_full_split() and gmsg_infostr_full() that can
add extra information when logging vendor messages.

------------------------------------------------------------------------
r5812 | rmanfredi | 2004-08-13 18:23:50 -0400 (Fri, 13 Aug 2004) | 2 lines

Version of 2004-08-13.

------------------------------------------------------------------------
r5811 | rmanfredi | 2004-08-13 18:22:46 -0400 (Fri, 13 Aug 2004) | 3 lines

Changed the way the routing table is organized to be able to remember
active routes (for query hits or pushes) longer than unused ones.

------------------------------------------------------------------------
r5810 | rmanfredi | 2004-08-13 18:21:07 -0400 (Fri, 13 Aug 2004) | 3 lines

Removed the "unrequest reply" drop reason, replaced by "no route".  It was
used only by query hits, whilst "no route" was used only by "pushes".

------------------------------------------------------------------------
r5809 | rmanfredi | 2004-08-13 18:17:43 -0400 (Fri, 13 Aug 2004) | 2 lines

Fixed line longer than 80 chars.

------------------------------------------------------------------------
r5808 | rmanfredi | 2004-08-13 16:42:51 -0400 (Fri, 13 Aug 2004) | 2 lines

Assert we're only queueing "unread" messages.

------------------------------------------------------------------------
r5807 | rmanfredi | 2004-08-12 16:53:40 -0400 (Thu, 12 Aug 2004) | 3 lines

If query hit is dropped for flow-control reasons, account it as such.
For debugging an assertion failure, added counter for messages queued.

------------------------------------------------------------------------
r5806 | rmanfredi | 2004-08-12 16:43:45 -0400 (Thu, 12 Aug 2004) | 4 lines

Increased routing table size to keep at least 30 minutes of traffic.
Handle query hits we don't route, in case they have alt-sources we
could peruse.

------------------------------------------------------------------------
r5805 | rmanfredi | 2004-08-12 16:38:38 -0400 (Thu, 12 Aug 2004) | 5 lines

Undo change made at last revision.
Just because route_message() returns FALSE does not mean we have to drop
the message, just that we don't have to handle it.  It will be dropped if
the computed route is ROUTE_NONE though and route_message() returns FALSE.

------------------------------------------------------------------------
r5804 | nonamer | 2004-08-12 14:46:51 -0400 (Thu, 12 Aug 2004) | 2 lines

As requested by cbiere

------------------------------------------------------------------------
r5803 | rmanfredi | 2004-08-11 17:24:21 -0400 (Wed, 11 Aug 2004) | 2 lines

Added code for TFLS: TrustyFiles.

------------------------------------------------------------------------
r5802 | rmanfredi | 2004-08-11 16:36:36 -0400 (Wed, 11 Aug 2004) | 2 lines

Simply drop PONGs whose file count is too large, swapped or not.

------------------------------------------------------------------------
r5801 | rmanfredi | 2004-08-11 15:51:56 -0400 (Wed, 11 Aug 2004) | 3 lines

If query is marked for OOB, we have the IP of the querier and can check
for an hostile IP address.

------------------------------------------------------------------------
r5800 | rmanfredi | 2004-08-11 15:51:23 -0400 (Wed, 11 Aug 2004) | 2 lines

Added parsing of GUID for queries with OOB query hit delivery.

------------------------------------------------------------------------
r5799 | rmanfredi | 2004-08-11 15:45:11 -0400 (Wed, 11 Aug 2004) | 2 lines

Avoid compiler warning about unused local vars in GTK1.

------------------------------------------------------------------------
r5798 | rmanfredi | 2004-08-11 15:40:14 -0400 (Wed, 11 Aug 2004) | 2 lines

Don't remove entries from the dqueries table at final cleanup during exit.

------------------------------------------------------------------------
r5797 | rmanfredi | 2004-08-11 14:57:37 -0400 (Wed, 11 Aug 2004) | 2 lines

Ensure "size != 0 => file_size_known" in fileinfos and create_download().

------------------------------------------------------------------------
r5796 | nonamer | 2004-08-11 14:22:50 -0400 (Wed, 11 Aug 2004) | 4 lines

Don't include ../common.h.
Public functions are now in header file.
Packet stream parser added

------------------------------------------------------------------------
r5795 | nonamer | 2004-08-11 13:34:58 -0400 (Wed, 11 Aug 2004) | 3 lines

This is a partial commit of my tigertree fix. This should fix problems with unknown sized downloads.
Download by URI is now supported as well

------------------------------------------------------------------------
r5794 | cbiere | 2004-08-11 11:10:22 -0400 (Wed, 11 Aug 2004) | 4 lines

unicode_decompose_init():
	Skip the breakpoint for GLib < 2.4.0 as it's already known that
	older versions don't properly normalize.

------------------------------------------------------------------------
r5793 | cbiere | 2004-08-11 10:17:59 -0400 (Wed, 11 Aug 2004) | 4 lines

settings_gui_init():
	``checkbutton_enable_shell'' has moved from ``main_window'' to
	``dlg_prefs''.

------------------------------------------------------------------------
r5792 | cbiere | 2004-08-11 09:51:09 -0400 (Wed, 11 Aug 2004) | 2 lines

Include downloads.h.

------------------------------------------------------------------------
r5791 | cbiere | 2004-08-10 16:12:27 -0400 (Tue, 10 Aug 2004) | 2 lines

Fixed a commented out (dbg > 10) which slipped through in my last commit.

------------------------------------------------------------------------
r5790 | cbiere | 2004-08-10 14:05:20 -0400 (Tue, 10 Aug 2004) | 4 lines

Wait until the host caches (ultras, hosts) have been completey loaded
before to contact a GWebCache. Otherwise, a GWebCache is (potentially)
contacted on every start-up.

------------------------------------------------------------------------
r5789 | cbiere | 2004-08-10 11:56:45 -0400 (Tue, 10 Aug 2004) | 4 lines

listen_port_changed():
	The random port was properly not forced to values greater than
	1023.

------------------------------------------------------------------------
r5788 | rmanfredi | 2004-08-09 17:41:22 -0400 (Mon, 09 Aug 2004) | 2 lines

Version of 2004-08-09.

------------------------------------------------------------------------
r5787 | rmanfredi | 2004-08-09 17:37:08 -0400 (Mon, 09 Aug 2004) | 3 lines

Use ping-pong roundtrip times to guess a relevant timeout for the
"Query Status Request" message sent for leaf-guided dynamic queries.

------------------------------------------------------------------------
r5786 | rmanfredi | 2004-08-09 17:35:48 -0400 (Mon, 09 Aug 2004) | 3 lines

Send PUSH requests at the highest TTL we can, i.e. hard_ttl_limit and
not max_ttl which is only for broadcasted messages.

------------------------------------------------------------------------
r5785 | rmanfredi | 2004-08-09 17:33:27 -0400 (Mon, 09 Aug 2004) | 2 lines

Make sure we always log something in debug mode when seeing a bad packet.

------------------------------------------------------------------------
r5784 | rmanfredi | 2004-08-09 17:29:34 -0400 (Mon, 09 Aug 2004) | 3 lines

Now try to support BearShare and its great (not!) idea of acking an
alive ping with a TTL=0 ping!

------------------------------------------------------------------------
r5783 | rmanfredi | 2004-08-09 16:37:48 -0400 (Mon, 09 Aug 2004) | 3 lines

No longer drop node for sending/relaying messages with TTL=0: simply
ignore the bad message and go on.

------------------------------------------------------------------------
r5782 | rmanfredi | 2004-08-09 15:34:08 -0400 (Mon, 09 Aug 2004) | 5 lines

Fixed assertion that forgot to account for kept results.
Whith leaf-guided dynamic queries, adjust the number of kept results when
comparing to the maximum allowed, since leaves return the total amount
of results, not the ones received from just our connection.

------------------------------------------------------------------------
r5781 | cbiere | 2004-08-09 09:54:21 -0400 (Mon, 09 Aug 2004) | 3 lines

utf32_decompose_nfd_char():
	Fixed compile problem with GCC 2.95.4 reported by Clayton Rollins.

------------------------------------------------------------------------
r5780 | emilelevivre | 2004-08-09 04:47:55 -0400 (Mon, 09 Aug 2004) | 5 lines

[GTK1/GTK2] Moved configuration settings into standard "preferences" dialog, accessible via the
menubar.  Removed "Config" from the navigation pane.
[GTK2] Removed "Upload Settings" button from the uploads tab and "More Settings" from the
downloads tab.  They no longer make sense.

------------------------------------------------------------------------
r5779 | rmanfredi | 2004-08-09 02:31:32 -0400 (Mon, 09 Aug 2004) | 2 lines

Forgot to clear DQ_F_WAITING in dq_terminate().

------------------------------------------------------------------------
r5778 | rmanfredi | 2004-08-08 17:26:04 -0400 (Sun, 08 Aug 2004) | 3 lines

Be more conservative with leaf-guided queries: always ask the leaf before
querying the next ultranode.

------------------------------------------------------------------------
r5777 | rmanfredi | 2004-08-08 17:12:21 -0400 (Sun, 08 Aug 2004) | 3 lines

Forgot to clear the results_ev callback before calling dq_terminate() when
the remote end wishes to put an end to querying.

------------------------------------------------------------------------
r5776 | rmanfredi | 2004-08-08 16:39:57 -0400 (Sun, 08 Aug 2004) | 2 lines

Version of 2004-08-08.

------------------------------------------------------------------------
r5775 | rmanfredi | 2004-08-08 16:36:34 -0400 (Sun, 08 Aug 2004) | 2 lines

Added support for leaf-guided dynamic queries (client and server sides).

------------------------------------------------------------------------
r5774 | rmanfredi | 2004-08-08 12:51:50 -0400 (Sun, 08 Aug 2004) | 3 lines

Don't increase QRP stats for queries when routing to an UP which has not
sent its query table yet.

------------------------------------------------------------------------
r5773 | rmanfredi | 2004-08-08 12:49:49 -0400 (Sun, 08 Aug 2004) | 3 lines

Fixed assert failure on reception of query hits that is handled
locally but not routed.

------------------------------------------------------------------------
r5772 | rmanfredi | 2004-08-08 07:24:43 -0400 (Sun, 08 Aug 2004) | 4 lines

Fixed unfortunate bug in token.c that prevents an older version from
validating the token from a more recent version if the recent version
has more keys to compute the level with than the older can check for.

------------------------------------------------------------------------
r5771 | rmanfredi | 2004-08-08 04:07:51 -0400 (Sun, 08 Aug 2004) | 4 lines

Refactored the single monolithic message_array[] routing table into
a dynamic set of smaller chunks, to ensure we will keep routes at least
20 minutes.

------------------------------------------------------------------------
r5770 | rmanfredi | 2004-08-08 04:07:43 -0400 (Sun, 08 Aug 2004) | 2 lines

Added an assertion.

------------------------------------------------------------------------
r5769 | rmanfredi | 2004-08-08 04:01:46 -0400 (Sun, 08 Aug 2004) | 4 lines

To allow safe data access to the free routine invoked for extended messages,
we must not unref the data before calling the free routine in case we were
holding the last reference to those data.

------------------------------------------------------------------------
r5768 | rmanfredi | 2004-08-08 04:00:36 -0400 (Sun, 08 Aug 2004) | 2 lines

Made m_prio an unsigned quantity now that its leading bits are used for flags.

------------------------------------------------------------------------
r5767 | cbiere | 2004-08-07 18:16:01 -0400 (Sat, 07 Aug 2004) | 3 lines

utf32_nfd_lookup():
	Replaced bsearch() to eliminate any function call overhead.

------------------------------------------------------------------------
r5766 | cbiere | 2004-08-07 16:25:57 -0400 (Sat, 07 Aug 2004) | 3 lines

Added utf8_decode_lookahead(). By using this function it's not necessary
to determine the complete length of a string to decode a UTF-8 string.

------------------------------------------------------------------------
r5765 | cbiere | 2004-08-07 15:30:16 -0400 (Sat, 07 Aug 2004) | 7 lines

utf32_nfd_lut:
	Changed the semantics of the lookup table. The strings are not
	zero-terminated if they have a maximum of length of
	UTF32_NFD_REPLACE_MAXLEN (currently 4) characters to reduce the
	memory footprint of the table by 20%.
	Adjusted all dependant functions as necessary.

------------------------------------------------------------------------
r5764 | cbiere | 2004-08-07 12:47:14 -0400 (Sat, 07 Aug 2004) | 5 lines

Fixed bug that caused PROP_SERVER_HOSTNAME not being saved if the user
doesn't hit enter explicitely after editing the value. The property is
now updated if the edit field gets a focus-out even in accordance with
other edit fields.

------------------------------------------------------------------------
r5763 | cbiere | 2004-08-07 11:37:23 -0400 (Sat, 07 Aug 2004) | 2 lines

Fixed typo in last commit: == (equal) -> >= (greater than or equal).

------------------------------------------------------------------------
r5762 | cbiere | 2004-08-07 11:28:14 -0400 (Sat, 07 Aug 2004) | 3 lines

Don't try to set fixed_height_mode for GTK+ < 2.4.0 because older versions
don't know this attribute.

------------------------------------------------------------------------
r5761 | cbiere | 2004-08-07 11:05:29 -0400 (Sat, 07 Aug 2004) | 3 lines

locale_to_utf8_nfd():
	Added missing de-const cast.

------------------------------------------------------------------------
r5760 | rmanfredi | 2004-08-07 04:37:47 -0400 (Sat, 07 Aug 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r5759 | rmanfredi | 2004-08-07 04:33:41 -0400 (Sat, 07 Aug 2004) | 5 lines

Added "n->last_tx" and use that when detecting activity timeouts, making
sure that there is something in the queue (or it would not be updated).
Reverted changes made to node_reserve_slot() and node_avoid_monopoly()
which tried to make a distinction for UPs between incoming and outgoing.

------------------------------------------------------------------------
r5758 | rmanfredi | 2004-08-07 04:28:59 -0400 (Sat, 07 Aug 2004) | 2 lines

Forgot to call node_inc_sent() when sending a queued message.

------------------------------------------------------------------------
r5757 | cbiere | 2004-08-07 01:40:58 -0400 (Sat, 07 Aug 2004) | 2 lines

Added support for stand-alone Unicode NFD normalization.

------------------------------------------------------------------------
r5756 | cbiere | 2004-08-07 01:35:45 -0400 (Sat, 07 Aug 2004) | 2 lines

Fixed the classic = vs. == bug in three places.

------------------------------------------------------------------------
r5755 | rmanfredi | 2004-08-06 19:03:13 -0400 (Fri, 06 Aug 2004) | 2 lines

Version of 2004-08-06.

------------------------------------------------------------------------
r5754 | rmanfredi | 2004-08-06 19:02:00 -0400 (Fri, 06 Aug 2004) | 3 lines

Adjusted the dropping algorithm to be less aggressive in flow-control mode,
and more progressive in throttling mode.

------------------------------------------------------------------------
r5753 | rmanfredi | 2004-08-06 17:21:03 -0400 (Fri, 06 Aug 2004) | 2 lines

Leave early from qrt_route_query() if there is no selected node!

------------------------------------------------------------------------
r5752 | rmanfredi | 2004-08-06 17:11:43 -0400 (Fri, 06 Aug 2004) | 3 lines

After reorganizing code for last-hop QRP support, I forgot to move some
TTL adjustment code into qrt_route_query().

------------------------------------------------------------------------
r5751 | rmanfredi | 2004-08-06 15:46:04 -0400 (Fri, 06 Aug 2004) | 3 lines

Reduce the list of things to do for 0.96, since they're now mostly
in CVS: dynamic querying, inter-UP QRP, high outdegree.

------------------------------------------------------------------------
r5750 | rmanfredi | 2004-08-06 15:30:30 -0400 (Fri, 06 Aug 2004) | 4 lines

The flow-control flag can now show 'D' if we're not in flow-control
yet but the queue is more full and bears a greater delay for sent
messages (queue size above the low watermark).

------------------------------------------------------------------------
r5749 | rmanfredi | 2004-08-06 15:10:13 -0400 (Fri, 06 Aug 2004) | 3 lines

Skip nodes in flow-control or which remotely flow-control us.
Forgot to return after calling dq_terminate() which could lead to havoc.

------------------------------------------------------------------------
r5748 | rmanfredi | 2004-08-06 15:09:14 -0400 (Fri, 06 Aug 2004) | 3 lines

Don't be too strict: allow at most DH_THRESH_HITS to avoid dropping hits
for rare content.

------------------------------------------------------------------------
r5747 | rmanfredi | 2004-08-06 13:22:57 -0400 (Fri, 06 Aug 2004) | 5 lines

Drop query hits with 0 results.
Have search_results() indicate to caller the amount of hits held in the
query hit it parsed.
Inform the "dynamic query hit" layer about the valid hits we're relaying.

------------------------------------------------------------------------
r5746 | rmanfredi | 2004-08-06 13:21:11 -0400 (Fri, 06 Aug 2004) | 2 lines

Added pmsg_new_extend().

------------------------------------------------------------------------
r5745 | rmanfredi | 2004-08-06 13:20:29 -0400 (Fri, 06 Aug 2004) | 4 lines

Introduced the "dynamic query hit" algorithm: this actively monitors
hits we relay, keeps track of how many hits we sent and can decide
to drop hits if we're in flow control or relayed too many hits already.

------------------------------------------------------------------------
r5744 | rmanfredi | 2004-08-06 13:19:55 -0400 (Fri, 06 Aug 2004) | 2 lines

Added accessors for lowat and hiwat.

------------------------------------------------------------------------
r5743 | rmanfredi | 2004-08-06 13:19:27 -0400 (Fri, 06 Aug 2004) | 2 lines

Plugged in the "dynamic query hit" routing algorithm.

------------------------------------------------------------------------
r5742 | rmanfredi | 2004-08-06 13:18:41 -0400 (Fri, 06 Aug 2004) | 2 lines

New "dh_debug" property.

------------------------------------------------------------------------
r5741 | rmanfredi | 2004-08-06 13:17:36 -0400 (Fri, 06 Aug 2004) | 2 lines

Added gmsg_split_to_pmsg_extend().

------------------------------------------------------------------------
r5740 | rmanfredi | 2004-08-06 13:17:05 -0400 (Fri, 06 Aug 2004) | 2 lines

Forgot to break out of loop after query is sent.

------------------------------------------------------------------------
r5739 | rmanfredi | 2004-08-06 13:10:10 -0400 (Fri, 06 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r5738 | rmanfredi | 2004-08-06 13:09:23 -0400 (Fri, 06 Aug 2004) | 2 lines

Added dh.c to the sources.

------------------------------------------------------------------------
r5737 | rmanfredi | 2004-08-06 13:08:48 -0400 (Fri, 06 Aug 2004) | 2 lines

Added src/dh.c and src/dh.h.

------------------------------------------------------------------------
r5736 | rmanfredi | 2004-08-06 13:08:44 -0400 (Fri, 06 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5735 | rmanfredi | 2004-08-06 12:14:21 -0400 (Fri, 06 Aug 2004) | 2 lines

Must check for writable status immediately in qrp_node_can_route().

------------------------------------------------------------------------
r5734 | rmanfredi | 2004-08-06 09:05:25 -0400 (Fri, 06 Aug 2004) | 2 lines

If a QRP-capable UP did not send its table yet, forward it everything.

------------------------------------------------------------------------
r5733 | rmanfredi | 2004-08-06 09:04:42 -0400 (Fri, 06 Aug 2004) | 3 lines

Don't send a TTL=1 dynamic query to a host whose QRP says it won't be
able to match.

------------------------------------------------------------------------
r5732 | rmanfredi | 2004-08-06 06:31:38 -0400 (Fri, 06 Aug 2004) | 4 lines

Make dynamic queries that stopped linger for a while to see how many
extra results we get due to node latencies. New statistics track the
amount of extra results we get that way.

------------------------------------------------------------------------
r5731 | rmanfredi | 2004-08-06 06:29:55 -0400 (Fri, 06 Aug 2004) | 3 lines

Fixed improper routing of TTL=1 queries, which could be sent twice to
QRP-capable nodes: once if the QRP matched, and once via regular broadcast!

------------------------------------------------------------------------
r5730 | rmanfredi | 2004-08-06 06:29:29 -0400 (Fri, 06 Aug 2004) | 2 lines

Fixed qrp_route_query() to send query to all non-QRP aware UPs if TTL=1.

------------------------------------------------------------------------
r5729 | rmanfredi | 2004-08-06 04:34:04 -0400 (Fri, 06 Aug 2004) | 2 lines

Removed unused variables from gm_sanitize_filename().

------------------------------------------------------------------------
r5728 | rmanfredi | 2004-08-06 04:33:47 -0400 (Fri, 06 Aug 2004) | 2 lines

Added "#undef strdup" to avoid conflict with definition from <bits/string2.h>.

------------------------------------------------------------------------
r5727 | rmanfredi | 2004-08-06 04:32:48 -0400 (Fri, 06 Aug 2004) | 2 lines

Fixed #ifdef/#endif protection which was not encompassing the whole file.

------------------------------------------------------------------------
r5726 | rmanfredi | 2004-08-06 04:32:09 -0400 (Fri, 06 Aug 2004) | 2 lines

Fixed copyright date.

------------------------------------------------------------------------
r5725 | rmanfredi | 2004-08-06 04:31:04 -0400 (Fri, 06 Aug 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r5724 | rmanfredi | 2004-08-06 04:29:49 -0400 (Fri, 06 Aug 2004) | 2 lines

File "bitzi.c" was misordered alphabetically.

------------------------------------------------------------------------
r5723 | rmanfredi | 2004-08-06 04:26:29 -0400 (Fri, 06 Aug 2004) | 2 lines

Regenerated from Jmakefile.

------------------------------------------------------------------------
r5722 | rmanfredi | 2004-08-06 04:24:47 -0400 (Fri, 06 Aug 2004) | 3 lines

Do not propagate d->file_size_known in download_info_reget() but keep the
status known in the old fi->file_size_known.

------------------------------------------------------------------------
r5721 | rmanfredi | 2004-08-06 04:23:40 -0400 (Fri, 06 Aug 2004) | 2 lines

Show "no size" when the size is unknown, shorter than "unknown size".

------------------------------------------------------------------------
r5720 | rmanfredi | 2004-08-06 04:22:17 -0400 (Fri, 06 Aug 2004) | 4 lines

Whether the file size is known or not is now persisted in the fileinfo,
as the "FSKN" attribute in the ASCII file, and as part of the version 5
binary format in the file.

------------------------------------------------------------------------
r5719 | rmanfredi | 2004-08-06 04:21:24 -0400 (Fri, 06 Aug 2004) | 2 lines

Fixed some of the "file_size_known" madness.

------------------------------------------------------------------------
r5718 | rmanfredi | 2004-08-05 15:47:54 -0400 (Thu, 05 Aug 2004) | 2 lines

Added "dq_debug".

------------------------------------------------------------------------
r5717 | rmanfredi | 2004-08-05 15:46:46 -0400 (Thu, 05 Aug 2004) | 2 lines

Version of 2004-08-05.

------------------------------------------------------------------------
r5716 | rmanfredi | 2004-08-05 15:44:28 -0400 (Thu, 05 Aug 2004) | 2 lines

Signal results we receive to the dynamic query layer.

------------------------------------------------------------------------
r5715 | rmanfredi | 2004-08-05 15:43:48 -0400 (Thu, 05 Aug 2004) | 3 lines

Made it easier for the outside to check whether a node can route
a given query based on its hash vector.

------------------------------------------------------------------------
r5714 | rmanfredi | 2004-08-05 15:42:45 -0400 (Thu, 05 Aug 2004) | 4 lines

Enhanced pmsg to have support for free routine callbacks.
It is now possible to mark messages as being sent, for checking in the
free routine afterwards.

------------------------------------------------------------------------
r5713 | rmanfredi | 2004-08-05 15:41:05 -0400 (Thu, 05 Aug 2004) | 5 lines

Emit and parse headers for dynamic querying.
Added hack for LimeWire, emitting the garbage it wants from leaves to
consider them good.
It is a bug from LW to require those meaningless headers from leaves.

------------------------------------------------------------------------
r5712 | rmanfredi | 2004-08-05 15:38:55 -0400 (Thu, 05 Aug 2004) | 2 lines

Now marks sent messages.

------------------------------------------------------------------------
r5711 | rmanfredi | 2004-08-05 15:38:29 -0400 (Thu, 05 Aug 2004) | 2 lines

Plugged dynamic querying init/close.

------------------------------------------------------------------------
r5710 | rmanfredi | 2004-08-05 15:37:51 -0400 (Thu, 05 Aug 2004) | 2 lines

Added new "dq_debug" property for debugging dynamic querying.

------------------------------------------------------------------------
r5709 | rmanfredi | 2004-08-05 15:36:45 -0400 (Thu, 05 Aug 2004) | 2 lines

Added 5 general statistics about dynamic queries and their status.

------------------------------------------------------------------------
r5708 | rmanfredi | 2004-08-05 15:35:04 -0400 (Thu, 05 Aug 2004) | 3 lines

Added gmsg_mb_sendto_all() and gmsg_mb_sendto_one().
Renamed gmsg_split_sendto_leaves() into gmsg_split_sendto_all().

------------------------------------------------------------------------
r5707 | rmanfredi | 2004-08-05 15:34:07 -0400 (Thu, 05 Aug 2004) | 2 lines

Use walloc0() instead of g_new0() for filter results.

------------------------------------------------------------------------
r5706 | rmanfredi | 2004-08-05 15:33:35 -0400 (Thu, 05 Aug 2004) | 3 lines

Fixed re-entrance problem when an event was rescheduled before the current
trigger time by another event that fired.

------------------------------------------------------------------------
r5705 | rmanfredi | 2004-08-05 15:31:49 -0400 (Thu, 05 Aug 2004) | 2 lines

Added dq.c to the source list.

------------------------------------------------------------------------
r5704 | rmanfredi | 2004-08-05 15:31:33 -0400 (Thu, 05 Aug 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5703 | rmanfredi | 2004-08-05 15:29:45 -0400 (Thu, 05 Aug 2004) | 2 lines

Added src/dq.[ch] to the MANIFESTs.

------------------------------------------------------------------------
r5702 | cbiere | 2004-08-05 14:58:59 -0400 (Thu, 05 Aug 2004) | 4 lines

gm_sanitize_filename():
	This function doesn't use a len parameter any longer, so len wasn't
	defined for Mac OS. Replaced len with zero.

------------------------------------------------------------------------
r5701 | cbiere | 2004-08-05 14:57:56 -0400 (Thu, 05 Aug 2004) | 3 lines

locale_to_utf8_nfd():
	Fixed invalid assertion (the aim is catching integer overflows).

------------------------------------------------------------------------
r5700 | nonamer | 2004-08-05 14:51:18 -0400 (Thu, 05 Aug 2004) | 5 lines

Avoid vendor monopoly makes a difference between outgoing and incomming
ultrapeer connections when running in ultrapeer mode. This should help
finding other gtkg ultrapeers better when making outgoing connections but
still have a large number left for incoming connections.

------------------------------------------------------------------------
r5699 | nonamer | 2004-08-05 14:46:16 -0400 (Thu, 05 Aug 2004) | 2 lines

Make it compile under OSX.

------------------------------------------------------------------------
r5698 | cbiere | 2004-08-05 13:20:29 -0400 (Thu, 05 Aug 2004) | 2 lines

Fixed typo: g_locale_to_utf8_nfd -> locale_to_utf8_nfd.

------------------------------------------------------------------------
r5697 | cbiere | 2004-08-05 10:53:49 -0400 (Thu, 05 Aug 2004) | 2 lines

Use domain-specific debug level variables.

------------------------------------------------------------------------
r5696 | cbiere | 2004-08-05 10:51:52 -0400 (Thu, 05 Aug 2004) | 2 lines

Removed unnecessary inclusion of glib.h.

------------------------------------------------------------------------
r5695 | cbiere | 2004-08-05 10:48:35 -0400 (Thu, 05 Aug 2004) | 2 lines

Added properties ``url_debug'' and ``gwc_debug''.

------------------------------------------------------------------------
r5694 | cbiere | 2004-08-05 10:13:53 -0400 (Thu, 05 Aug 2004) | 2 lines

Hide the code for GTK+ 1.2 because it depends on GTK+ 2.x.

------------------------------------------------------------------------
r5693 | cbiere | 2004-08-04 16:54:42 -0400 (Wed, 04 Aug 2004) | 3 lines

[GTK2] Fixed "Add as search" (from search monitor) feature which was
	disabled and broken.

------------------------------------------------------------------------
r5692 | cbiere | 2004-08-04 10:46:26 -0400 (Wed, 04 Aug 2004) | 4 lines

Do not decouple the treestore from the treeview during a massive update
for the current search because it messes with the selection and the
cursor when new results arrive.

------------------------------------------------------------------------
r5691 | cbiere | 2004-08-04 10:43:16 -0400 (Wed, 04 Aug 2004) | 2 lines

Removed the OS release information from the User-Agent/Server string.

------------------------------------------------------------------------
r5690 | cbiere | 2004-08-03 23:38:42 -0400 (Tue, 03 Aug 2004) | 2 lines

Added preliminary support for Bitzi by Alex Bennee.

------------------------------------------------------------------------
r5689 | cbiere | 2004-08-03 19:44:52 -0400 (Tue, 03 Aug 2004) | 2 lines

And another one bites the dust: 207.234.131.148.

------------------------------------------------------------------------
r5688 | cbiere | 2004-08-03 18:29:26 -0400 (Tue, 03 Aug 2004) | 6 lines

Added const-qualifier to the input parameter wherever the input is not
	modified.
lazy_locale_to_utf8():
	[GTK2] Enforce NFC because GTK+ 2.x resp. Pango doesn't render strings
		in NFD properly.

------------------------------------------------------------------------
r5687 | cbiere | 2004-08-03 18:25:21 -0400 (Tue, 03 Aug 2004) | 3 lines

download_selection_of_ctree():
	Use gm_sanitize_filename().

------------------------------------------------------------------------
r5686 | cbiere | 2004-08-03 17:12:14 -0400 (Tue, 03 Aug 2004) | 5 lines

Removed escape_filename():
	Superseded by gm_sanitize_filename().
file_info_new_outname():
	Use gm_sanitize_filename().

------------------------------------------------------------------------
r5685 | cbiere | 2004-08-03 17:09:42 -0400 (Tue, 03 Aug 2004) | 3 lines

handle_magnet():
	Use gm_sanitize_filename().

------------------------------------------------------------------------
r5684 | cbiere | 2004-08-03 17:08:21 -0400 (Tue, 03 Aug 2004) | 4 lines

g_iconv_complete():
locale_to_utf8_nfd():
	Added const qualifier since the input is never modified.

------------------------------------------------------------------------
r5683 | cbiere | 2004-08-03 17:06:59 -0400 (Tue, 03 Aug 2004) | 3 lines

download_selected_file():
	Use gm_sanitize_filename().

------------------------------------------------------------------------
r5682 | cbiere | 2004-08-03 17:04:45 -0400 (Tue, 03 Aug 2004) | 3 lines

Added gm_sanitize_filename() which must be used by everything which might
	create arbitrary filenames.

------------------------------------------------------------------------
r5681 | cbiere | 2004-08-03 16:56:54 -0400 (Tue, 03 Aug 2004) | 3 lines

Make the "Add" button sensitive if *anything* was entered since GTKG
accepts not only IP addresses but hostnames too.

------------------------------------------------------------------------
r5680 | cbiere | 2004-08-03 16:47:19 -0400 (Tue, 03 Aug 2004) | 4 lines

Added property ``PROP_CONVERT_SPACES'' which - if enabled - causes
	spaces to be replaced with underscores in filenames for newly
	created files.

------------------------------------------------------------------------
r5679 | nonamer | 2004-08-03 15:22:59 -0400 (Tue, 03 Aug 2004) | 2 lines

This should be more up to date with the STYLE guide

------------------------------------------------------------------------
r5678 | rmanfredi | 2004-08-03 15:01:37 -0400 (Tue, 03 Aug 2004) | 2 lines

Removed all tabs from that file.

------------------------------------------------------------------------
r5677 | rmanfredi | 2004-08-03 14:45:46 -0400 (Tue, 03 Aug 2004) | 2 lines

Version of 2004-08-03.

------------------------------------------------------------------------
r5676 | rmanfredi | 2004-08-03 14:44:27 -0400 (Tue, 03 Aug 2004) | 3 lines

Forgot to remove dead QRP compression task from the list after having
cancelled it.

------------------------------------------------------------------------
r5675 | nonamer | 2004-08-03 14:42:07 -0400 (Tue, 03 Aug 2004) | 2 lines

Initial compileable sources

------------------------------------------------------------------------
r5674 | rmanfredi | 2004-08-03 12:16:37 -0400 (Tue, 03 Aug 2004) | 2 lines

Updated from BearShare's list.

------------------------------------------------------------------------
r5673 | cbiere | 2004-08-03 11:27:42 -0400 (Tue, 03 Aug 2004) | 3 lines

Added locale_to_utf8_nfd() which is necessary for Mac OS X because it
requires filenames to be UTF-8 encoded with all characters decomposed (NFD).

------------------------------------------------------------------------
r5672 | rmanfredi | 2004-08-03 10:49:57 -0400 (Tue, 03 Aug 2004) | 3 lines

Constrain inter-UP QRP table to 128 Kslots to avoid having to exchange
too much data with so many peers.

------------------------------------------------------------------------
r5671 | rmanfredi | 2004-08-03 10:47:34 -0400 (Tue, 03 Aug 2004) | 4 lines

Added NODE_F_QRP_SENT to mark whether we sent a QRP table once successfully
to be able to display 'x' or 'p' accurately depending on whether we're sending
the table for the first time or patching it.

------------------------------------------------------------------------
r5670 | rmanfredi | 2004-08-03 09:22:42 -0400 (Tue, 03 Aug 2004) | 3 lines

Removed spurious and wrongly placed call to header_features_generate()
from http_async_build_request().

------------------------------------------------------------------------
r5669 | rmanfredi | 2004-08-03 09:12:29 -0400 (Tue, 03 Aug 2004) | 3 lines

Can't access the routing tables too early when switching peermodes in the
"QRT merging" task.

------------------------------------------------------------------------
r5668 | rmanfredi | 2004-08-03 09:05:36 -0400 (Tue, 03 Aug 2004) | 2 lines

Recompute proper routing table when the peermode changes.

------------------------------------------------------------------------
r5667 | rmanfredi | 2004-08-03 08:08:36 -0400 (Tue, 03 Aug 2004) | 4 lines

Cancel previous default routing patch computation if task is already
active and we request a new computation because there is an updated table
available.

------------------------------------------------------------------------
r5666 | rmanfredi | 2004-08-03 07:21:36 -0400 (Tue, 03 Aug 2004) | 2 lines

Version of 2004-08-02.

------------------------------------------------------------------------
r5665 | rmanfredi | 2004-08-03 07:20:42 -0400 (Tue, 03 Aug 2004) | 3 lines

Only call node_inc_qrp_xxx() when running as leaf node since now ultra nodes
can exchange QRP tables as well.

------------------------------------------------------------------------
r5664 | rmanfredi | 2004-08-03 07:19:53 -0400 (Tue, 03 Aug 2004) | 2 lines

Show whether they configured "Enough min # of connections".

------------------------------------------------------------------------
r5663 | rmanfredi | 2004-08-03 07:19:31 -0400 (Tue, 03 Aug 2004) | 2 lines

Pass our TTL to qrt_build_query_target().

------------------------------------------------------------------------
r5662 | rmanfredi | 2004-08-03 07:19:06 -0400 (Tue, 03 Aug 2004) | 4 lines

Routine qrt_build_query_target() now takes the query's TTL as parameter
to know whether it should route to peer UPs or not based on the QRP tables
supplied by those UPs.

------------------------------------------------------------------------
r5661 | rmanfredi | 2004-08-03 07:18:02 -0400 (Tue, 03 Aug 2004) | 2 lines

New "up_req_enough_conn" property.

------------------------------------------------------------------------
r5660 | rmanfredi | 2004-08-03 07:17:14 -0400 (Tue, 03 Aug 2004) | 2 lines

Added support for high outdegree and last-hop QRP between ultra nodes.

------------------------------------------------------------------------
r5659 | rmanfredi | 2004-08-03 07:16:20 -0400 (Tue, 03 Aug 2004) | 3 lines

Show whether they configured "Enough min # of connections" to be
auto-promoted an ultra node.

------------------------------------------------------------------------
r5658 | rmanfredi | 2004-08-03 07:15:03 -0400 (Tue, 03 Aug 2004) | 2 lines

Fixed hint.

------------------------------------------------------------------------
r5657 | rmanfredi | 2004-08-03 07:14:06 -0400 (Tue, 03 Aug 2004) | 3 lines

New "up_req_enough_conn" property to track whether they configured enough
peer connections to maintain to become an ultra node.

------------------------------------------------------------------------
r5656 | rmanfredi | 2004-08-03 07:12:49 -0400 (Tue, 03 Aug 2004) | 4 lines

New flag "Z" for connections that compress both TX and RX.
New flag "X" indicating whether we sent our last-hop QRP table to the
remote ultra node.

------------------------------------------------------------------------
r5655 | rmanfredi | 2004-08-03 07:11:52 -0400 (Tue, 03 Aug 2004) | 3 lines

Query messages with TTL=1 are no longer blindly broadcasted to ultra nodes
when running in UP mode.

------------------------------------------------------------------------
r5654 | cbiere | 2004-08-02 12:32:50 -0400 (Mon, 02 Aug 2004) | 3 lines

Raider is Twixx.
url_strtoaddr_strict() is gchar_to_ip_strict().

------------------------------------------------------------------------
r5653 | rmanfredi | 2004-08-02 06:03:08 -0400 (Mon, 02 Aug 2004) | 3 lines

Added specifications for inter-UP QRP, dynamic queries and leaf-guided
queries.

------------------------------------------------------------------------
r5652 | rmanfredi | 2004-08-02 04:48:23 -0400 (Mon, 02 Aug 2004) | 2 lines

Forward queries with TTL=0 to leaves, as QRP tables permit.

------------------------------------------------------------------------
r5651 | rmanfredi | 2004-08-02 04:46:41 -0400 (Mon, 02 Aug 2004) | 3 lines

New IO_SAVE_HEADER flag to instruct the ioheader parsing layer to
save a copy of the header text, as it was received.

------------------------------------------------------------------------
r5650 | rmanfredi | 2004-08-02 04:45:22 -0400 (Mon, 02 Aug 2004) | 2 lines

Converted to doxygen-style comments.

------------------------------------------------------------------------
r5649 | graaff | 2004-08-02 03:18:48 -0400 (Mon, 02 Aug 2004) | 2 lines

Show gray progress indicator when file size is not known.

------------------------------------------------------------------------
r5648 | cbiere | 2004-08-01 17:01:46 -0400 (Sun, 01 Aug 2004) | 3 lines

Moved swap_ip() as swap_guint32() to misc.h.
Replaced swap_ip() with swap_guint32().

------------------------------------------------------------------------
r5647 | cbiere | 2004-08-01 17:00:06 -0400 (Sun, 01 Aug 2004) | 3 lines

pcache_pong_received():
	Replaced the ugly GUINT32_SWAP_LE_BE() with swap_guint32().

------------------------------------------------------------------------
r5646 | cbiere | 2004-08-01 16:58:32 -0400 (Sun, 01 Aug 2004) | 3 lines

Moved ``swap_ip'' from pproxy.c as ``swap_guint32'' to misc.h.
Added missing prototype for gchar_to_ip_strict().

------------------------------------------------------------------------
r5645 | cbiere | 2004-08-01 16:56:55 -0400 (Sun, 01 Aug 2004) | 3 lines

gchar_to_ip_strict():
	Simplified code since it doesn't use network byte order any longer.

------------------------------------------------------------------------
r5644 | cbiere | 2004-08-01 15:02:38 -0400 (Sun, 01 Aug 2004) | 5 lines

settings_ip_changed():
	Added parameter ``peer_ip''.
	Require that the ``new_ip'' is reported by peers from different
	/16 networks before accepting it.

------------------------------------------------------------------------
r5643 | cbiere | 2004-08-01 14:58:35 -0400 (Sun, 01 Aug 2004) | 4 lines

node_process_handshake_header():
	Print a log message if a peer reports a different IP address in the
	``Remote-IP'' header.

------------------------------------------------------------------------
r5642 | rmanfredi | 2004-08-01 12:31:44 -0400 (Sun, 01 Aug 2004) | 3 lines

Added new fields in fileinfo trailer: CTIM the creation time and NTIM
the last time when we got a new source.

------------------------------------------------------------------------
r5641 | graaff | 2004-08-01 12:20:49 -0400 (Sun, 01 Aug 2004) | 2 lines

Adhere to doxygen style advice on function names.

------------------------------------------------------------------------
r5640 | rmanfredi | 2004-08-01 11:59:45 -0400 (Sun, 01 Aug 2004) | 3 lines

In files using doxygen comments, the function name must now be put at
the very beginning of the line to have it stand out.

------------------------------------------------------------------------
r5639 | rmanfredi | 2004-08-01 11:34:05 -0400 (Sun, 01 Aug 2004) | 3 lines

Made gchar_to_ip_strict() return host byteorder IP addresses, to be
consistent with gchar_to_ip().

------------------------------------------------------------------------
r5638 | rmanfredi | 2004-08-01 04:46:39 -0400 (Sun, 01 Aug 2004) | 2 lines

Merged my changes from 2004-07-13.

------------------------------------------------------------------------
r5637 | cbiere | 2004-07-31 08:46:23 -0400 (Sat, 31 Jul 2004) | 4 lines

Moved ``url_strtoaddr_strict'' as ``gchar_to_ip_strict'' to misc.[ch].
gchar_to_ip_and_netmask():
	CIDR notation wasn't working properly.

------------------------------------------------------------------------
r5636 | graaff | 2004-07-24 10:20:31 -0400 (Sat, 24 Jul 2004) | 2 lines

Make Purge button inactive when file has been downloaded.

------------------------------------------------------------------------
r5635 | trancetip | 2004-07-23 07:46:52 -0400 (Fri, 23 Jul 2004) | 3 lines

The "HORIZON ALL" command now outputs the peer mode of each peer and
only shows the horizon values for 1 hop for leaf peers.

------------------------------------------------------------------------
r5634 | cbiere | 2004-07-21 17:14:34 -0400 (Wed, 21 Jul 2004) | 4 lines

Added a host and a network which are obviously owned by an anti-P2P company:
	207.234.131.147
	38.118.155.0/24

------------------------------------------------------------------------
r5633 | trancetip | 2004-07-19 17:37:00 -0400 (Mon, 19 Jul 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r5632 | trancetip | 2004-07-19 17:32:42 -0400 (Mon, 19 Jul 2004) | 2 lines

Added 'ALL' option to the remote shell command 'HORIZON'.

------------------------------------------------------------------------
r5631 | nonamer | 2004-07-19 13:15:31 -0400 (Mon, 19 Jul 2004) | 2 lines

Updated todo

------------------------------------------------------------------------
r5630 | rmanfredi | 2004-07-15 17:57:42 -0400 (Thu, 15 Jul 2004) | 2 lines

Forgot the "u" to mark version as unstable.

------------------------------------------------------------------------
r5629 | nonamer | 2004-07-15 14:29:51 -0400 (Thu, 15 Jul 2004) | 2 lines

Enabled drop on the GTk2 interface (added drop_init to main.c)

------------------------------------------------------------------------
r5628 | nonamer | 2004-07-15 07:03:18 -0400 (Thu, 15 Jul 2004) | 2 lines

true is not a known 'keyword'. TRUE is.

------------------------------------------------------------------------
r5627 | nonamer | 2004-07-14 15:42:10 -0400 (Wed, 14 Jul 2004) | 5 lines

Implements the patch from Emile for downloads with unknown file size.
As he noted this patch isn't complete yet. However, this shouldn't break anything. 
Committing so I can continue to work on this.
Fixme's are marked with FIXME: DOWNLOAD_SIZE:

------------------------------------------------------------------------
r5626 | graaff | 2004-07-14 15:19:13 -0400 (Wed, 14 Jul 2004) | 3 lines

Initial version of debugging guide for GTKG, especially describing the
memory allocation tracking options.

------------------------------------------------------------------------
r5625 | rmanfredi | 2004-07-14 04:46:44 -0400 (Wed, 14 Jul 2004) | 2 lines

Opening 0.95u.

------------------------------------------------------------------------
r5624 | nonamer | 2004-07-13 16:33:01 -0400 (Tue, 13 Jul 2004) | 2 lines

Eclipse CVS intergration test

------------------------------------------------------------------------
r5623 | rmanfredi | 2004-07-13 15:29:04 -0400 (Tue, 13 Jul 2004) | 4 lines

Make sure PONG messages hold a reasonable number of files, i.e. detect
servents that did not encode the value correctly by advertising an
absurdly large number of files.  Then try to fix the total size shared.

------------------------------------------------------------------------
r5619 | rmanfredi | 2004-07-12 18:13:18 -0400 (Mon, 12 Jul 2004) | 2 lines

Added GNU configure-like front end to Configure.

------------------------------------------------------------------------
r5618 | trancetip | 2004-07-12 16:34:23 -0400 (Mon, 12 Jul 2004) | 2 lines

Fixed some typos. Added @param to function template.

------------------------------------------------------------------------
r5617 | trancetip | 2004-07-11 15:48:29 -0400 (Sun, 11 Jul 2004) | 2 lines

Minor optimization for leaf nodes.

------------------------------------------------------------------------
r5616 | rmanfredi | 2004-07-11 15:36:53 -0400 (Sun, 11 Jul 2004) | 4 lines

Removed trailing '$' on line 59 to prevent accidental expansion by CVS.
Added a blank line between "purpose in life" and "@returns" in function
comment template.

------------------------------------------------------------------------
r5615 | wyldfire | 2004-07-11 15:10:27 -0400 (Sun, 11 Jul 2004) | 2 lines

Added doxygen related information.

------------------------------------------------------------------------
r5614 | wyldfire | 2004-07-11 14:36:25 -0400 (Sun, 11 Jul 2004) | 3 lines

Converted g_warnings to g_messages and cleant up a little.
Added doxygen support.

------------------------------------------------------------------------
r5613 | wyldfire | 2004-07-10 13:35:23 -0400 (Sat, 10 Jul 2004) | 2 lines

Updated Changelog

------------------------------------------------------------------------
r5612 | wyldfire | 2004-07-10 13:34:01 -0400 (Sat, 10 Jul 2004) | 4 lines

Added doxygen support to search_gui_common.c
Moved gui_add_targetted_search() as search_gui_add_targetted_search()
  to search_gui_common.[ch].

------------------------------------------------------------------------
r5611 | wyldfire | 2004-07-10 13:33:23 -0400 (Sat, 10 Jul 2004) | 3 lines

Moved gui_add_targetted_search() as search_gui_add_targetted_search()
  to search_gui_common.[ch].

------------------------------------------------------------------------
r5610 | wyldfire | 2004-07-10 13:32:43 -0400 (Sat, 10 Jul 2004) | 4 lines

Removed gui_update_all()
Renamed gui_update_global() to gui_general_timer()
Moved gui timer calls from gui_update_global() to main_gui_timer()

------------------------------------------------------------------------
r5609 | wyldfire | 2004-07-10 13:30:50 -0400 (Sat, 10 Jul 2004) | 7 lines

Removed gui_update_all()
Renamed gui_update_global() to gui_general_timer()
Moved gui timer calls from gui_update_global() to main_gui_timer()
Added doxygen support
Moved gui_add_targetted_search() as search_gui_add_targetted_search()
  to search_gui_common.[ch].

------------------------------------------------------------------------
r5608 | wyldfire | 2004-07-10 13:27:37 -0400 (Sat, 10 Jul 2004) | 3 lines

Replaces GtkFrame around progress indicator in fileinfo pane
  with a GtkViewport

------------------------------------------------------------------------
r5607 | cbiere | 2004-07-10 11:19:19 -0400 (Sat, 10 Jul 2004) | 5 lines

Re-added comment lines.
Manually removed bad GWC and added another instead.
Sorted the list of URLs.
Please, keep this sorted for the sake of diff-readability.

------------------------------------------------------------------------
r5605 | nonamer | 2004-07-10 06:22:52 -0400 (Sat, 10 Jul 2004) | 2 lines

de.po missing

------------------------------------------------------------------------
r5604 | nonamer | 2004-07-10 06:13:14 -0400 (Sat, 10 Jul 2004) | 2 lines

My error

------------------------------------------------------------------------
r5603 | nonamer | 2004-07-10 06:10:25 -0400 (Sat, 10 Jul 2004) | 2 lines

Even more missing files

------------------------------------------------------------------------
r5602 | nonamer | 2004-07-10 05:59:54 -0400 (Sat, 10 Jul 2004) | 2 lines

Include new hcache* files

------------------------------------------------------------------------
r5600 | nonamer | 2004-07-10 05:49:42 -0400 (Sat, 10 Jul 2004) | 2 lines

Updated gwcache boot file

------------------------------------------------------------------------
r5599 | nonamer | 2004-07-10 05:44:06 -0400 (Sat, 10 Jul 2004) | 2 lines

Release 0.94 stable

------------------------------------------------------------------------
r5598 | nonamer | 2004-07-09 13:49:38 -0400 (Fri, 09 Jul 2004) | 2 lines

One small update

------------------------------------------------------------------------
r5597 | nonamer | 2004-07-09 13:47:19 -0400 (Fri, 09 Jul 2004) | 2 lines

Some more updates

------------------------------------------------------------------------
r5596 | trancetip | 2004-07-09 13:44:51 -0400 (Fri, 09 Jul 2004) | 2 lines

Fixed a typo. Translated some more messages.

------------------------------------------------------------------------
r5595 | cbiere | 2004-07-06 18:09:14 -0400 (Tue, 06 Jul 2004) | 12 lines

gnutella_shell_t:
	Removed "+ 1" after OUTPUT_BUFFER_SIZE, this was misleading and
	useless. Also, undefine OUTPUT_BUFFER_SIZE after this
	because it shouldn't be used anywhere.
shell_read_data():
	Replaced misleading warning message.
shell_write():
	Replaced misleading warning message.
	The buffer doesn't contain NUL-terminated strings, don't put a
	trailing NUL after the string. The calculation suffered from an
	off-by-one bug anyway.

------------------------------------------------------------------------
r5594 | trancetip | 2004-07-06 17:11:41 -0400 (Tue, 06 Jul 2004) | 2 lines

Added German translations.

------------------------------------------------------------------------
r5593 | trancetip | 2004-07-06 16:51:33 -0400 (Tue, 06 Jul 2004) | 2 lines

Added missing file.

------------------------------------------------------------------------
r5592 | trancetip | 2004-07-06 16:43:42 -0400 (Tue, 06 Jul 2004) | 2 lines

Bumped reported version to 0.94.

------------------------------------------------------------------------
r5591 | trancetip | 2004-07-06 16:41:32 -0400 (Tue, 06 Jul 2004) | 2 lines

Added file.

------------------------------------------------------------------------
r5590 | trancetip | 2004-07-06 16:26:11 -0400 (Tue, 06 Jul 2004) | 2 lines

Updated HSEP specs.

------------------------------------------------------------------------
r5589 | wyldfire | 2004-07-05 11:52:31 -0400 (Mon, 05 Jul 2004) | 2 lines

Fixed bug which could make the cache hashtable and the lists out of sync.

------------------------------------------------------------------------
r5588 | graaff | 2004-07-04 15:24:10 -0400 (Sun, 04 Jul 2004) | 2 lines

Fix several small memory leaks.

------------------------------------------------------------------------
r5587 | cbiere | 2004-07-04 15:00:10 -0400 (Sun, 04 Jul 2004) | 3 lines

[GTK2] Remove callback for PROP_SEARCH_RESULTS_COL_VISIBLE, it's unnecessary
	and messes with saving/restoring the column states.

------------------------------------------------------------------------
r5586 | cbiere | 2004-07-04 14:50:17 -0400 (Sun, 04 Jul 2004) | 2 lines

Simplified saving and restoring the states of the columns in the treeview.

------------------------------------------------------------------------
r5585 | cbiere | 2004-07-04 14:47:44 -0400 (Sun, 04 Jul 2004) | 4 lines

prop_set_boolean():
	Corrected the debug code because it showed only the value of the
	first vector element.

------------------------------------------------------------------------
r5584 | cbiere | 2004-07-04 14:45:25 -0400 (Sun, 04 Jul 2004) | 3 lines

Added tree_view_restore_widths().
Added tree_view_restore_visibility().

------------------------------------------------------------------------
r5583 | cbiere | 2004-07-04 14:44:11 -0400 (Sun, 04 Jul 2004) | 6 lines

Added tree_view_restore_widths().
Added tree_view_restore_visibility().
gtk_widget_fix_width():
	Cast argument for PANGO_PIXELS to gint to enable the internal
	assertion used by it.

------------------------------------------------------------------------
r5582 | graaff | 2004-07-04 14:21:50 -0400 (Sun, 04 Jul 2004) | 2 lines

Make sure new code adhers to style guide.

------------------------------------------------------------------------
r5581 | trancetip | 2004-07-04 04:49:55 -0400 (Sun, 04 Jul 2004) | 2 lines

Added German translations.

------------------------------------------------------------------------
r5580 | graaff | 2004-07-04 03:38:01 -0400 (Sun, 04 Jul 2004) | 2 lines

Updated French translations (sent by T'aZ).

------------------------------------------------------------------------
r5579 | nonamer | 2004-07-03 09:53:54 -0400 (Sat, 03 Jul 2004) | 3 lines

Update gtk-gnutella.pot file,
Quick grammer fixes in nl.po

------------------------------------------------------------------------
r5578 | nonamer | 2004-07-03 08:40:51 -0400 (Sat, 03 Jul 2004) | 3 lines

Valgrind suppression file. This excludes any gtk / X11 valgrind errors
from the output

------------------------------------------------------------------------
r5577 | rmanfredi | 2004-07-03 03:13:19 -0400 (Sat, 03 Jul 2004) | 2 lines

Removed unused variable in hcache_timer().

------------------------------------------------------------------------
r5576 | wyldfire | 2004-07-02 17:02:04 -0400 (Fri, 02 Jul 2004) | 3 lines

Made the g_warning about dropped queries from hostile hosts to
  dbg as a g_message.

------------------------------------------------------------------------
r5575 | wyldfire | 2004-07-02 16:09:39 -0400 (Fri, 02 Jul 2004) | 2 lines

Include override.h

------------------------------------------------------------------------
r5574 | wyldfire | 2004-07-02 15:58:44 -0400 (Fri, 02 Jul 2004) | 3 lines

Use the maximum of quick-connect-pool-siez and max-connections to determine
  the maximum number of allowed connections.

------------------------------------------------------------------------
r5573 | wyldfire | 2004-07-02 15:49:02 -0400 (Fri, 02 Jul 2004) | 3 lines

Removed some assertions, now that everything seems to work.
Changed some guint32 to guint

------------------------------------------------------------------------
r5572 | wyldfire | 2004-07-02 15:36:34 -0400 (Fri, 02 Jul 2004) | 3 lines

[Gtk1] Made table headers in download panes insensitive. We can't sort here
  anyway.

------------------------------------------------------------------------
r5571 | wyldfire | 2004-07-02 15:31:45 -0400 (Fri, 02 Jul 2004) | 5 lines

[Gtk1] Marked strings translatable
[Gtk1] [Gtk2] Removed lifecount from sources column in fileinfo pane.
  This information would only be relevant for a developer working on
  removing old fileinfo records in the core.

------------------------------------------------------------------------
r5570 | wyldfire | 2004-07-02 14:37:22 -0400 (Fri, 02 Jul 2004) | 2 lines

Include override.h

------------------------------------------------------------------------
r5569 | trancetip | 2004-07-02 05:49:50 -0400 (Fri, 02 Jul 2004) | 3 lines

Changed translatable message '%d hosts' to '%u hosts', because the latter
is used elsewhere already.

------------------------------------------------------------------------
r5568 | trancetip | 2004-07-01 17:34:35 -0400 (Thu, 01 Jul 2004) | 2 lines

Added translations.

------------------------------------------------------------------------
r5567 | trancetip | 2004-07-01 17:29:23 -0400 (Thu, 01 Jul 2004) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r5566 | trancetip | 2004-07-01 16:40:18 -0400 (Thu, 01 Jul 2004) | 2 lines

Corrected g[nN]et to Gnet.

------------------------------------------------------------------------
r5565 | trancetip | 2004-07-01 16:09:18 -0400 (Thu, 01 Jul 2004) | 3 lines

Horizon stats now consider non-HSEP nodes. Now the horizon stats are
properly translatable.

------------------------------------------------------------------------
r5564 | cbiere | 2004-07-01 14:49:47 -0400 (Thu, 01 Jul 2004) | 5 lines

Suppress warnings about unused parameters when they're really unused
	but necessary to match a certain prototype.
Use a darker green for ``done_old''.
Replaced hexadecimal color definitions with color names.

------------------------------------------------------------------------
r5563 | trancetip | 2004-07-01 11:06:14 -0400 (Thu, 01 Jul 2004) | 2 lines

Removed unnecessary spaces from messages.

------------------------------------------------------------------------
r5562 | trancetip | 2004-07-01 11:05:09 -0400 (Thu, 01 Jul 2004) | 2 lines

Fixed message.

------------------------------------------------------------------------
r5561 | trancetip | 2004-07-01 10:25:14 -0400 (Thu, 01 Jul 2004) | 2 lines

Added some more information.

------------------------------------------------------------------------
r5560 | trancetip | 2004-07-01 09:06:30 -0400 (Thu, 01 Jul 2004) | 2 lines

Added information about how to update a .po file.

------------------------------------------------------------------------
r5559 | trancetip | 2004-07-01 08:23:12 -0400 (Thu, 01 Jul 2004) | 2 lines

Corrected file selection messages.

------------------------------------------------------------------------
r5558 | trancetip | 2004-07-01 07:46:39 -0400 (Thu, 01 Jul 2004) | 2 lines

Added all .c-files currently containing translatable strings.

------------------------------------------------------------------------
r5557 | cbiere | 2004-06-30 23:42:28 -0400 (Wed, 30 Jun 2004) | 6 lines

Suppress warnings about unused parameters when they're really unused
	but necessary to match a certain prototype.
gtk_gnutella_exit():
	Use sleep() instead of usleep(); usleep() isn't available on BeOS
	and hidden by default OSF1 too.

------------------------------------------------------------------------
r5556 | cbiere | 2004-06-30 23:00:11 -0400 (Wed, 30 Jun 2004) | 5 lines

[GTK2] Disabled searches are now grayed-out in the searches list.
	[Requested by Clayton Rollins.]
Suppress warnings about unused parameters when they're really unused
	but necessary to match a certain prototype.

------------------------------------------------------------------------
r5555 | trancetip | 2004-06-30 17:34:55 -0400 (Wed, 30 Jun 2004) | 2 lines

Updated Hungarian translation (sent by Sulyok Peti).

------------------------------------------------------------------------
r5554 | trancetip | 2004-06-30 17:20:03 -0400 (Wed, 30 Jun 2004) | 2 lines

Updated Spanish translation (sent by Paco Arjonilla).

------------------------------------------------------------------------
r5553 | wyldfire | 2004-06-30 15:44:41 -0400 (Wed, 30 Jun 2004) | 5 lines

[Gtk1] Prevented segfault when trying to connect to a host or copy the url
  in the downloads pane. The glitch that this is possible even when a
  header node is selected because it became a header while the popup is
  open still remains.

------------------------------------------------------------------------
r5552 | cbiere | 2004-06-29 16:55:16 -0400 (Tue, 29 Jun 2004) | 5 lines

Migrated PROP_PROXY_IP to PROP_PROXY_HOSTNAME i.e., the hostname of the
proxy is saved instead of its IP address. PROP_PROXY_IP is still saved
so that it's loaded on startup and old configurations can be migrated
automagically.

------------------------------------------------------------------------
r5551 | trancetip | 2004-06-29 14:27:34 -0400 (Tue, 29 Jun 2004) | 2 lines

Update German translations.

------------------------------------------------------------------------
r5550 | cbiere | 2004-06-29 12:13:46 -0400 (Tue, 29 Jun 2004) | 3 lines

Fixed a typo in the Downloads->Files pane: Altenate -> Alternate.
``entry_server_hostname'' was wired to the wrong signals.

------------------------------------------------------------------------
r5549 | cbiere | 2004-06-29 12:06:10 -0400 (Tue, 29 Jun 2004) | 3 lines

gui_update_global():
	Use delta_time() rather than difftime().

------------------------------------------------------------------------
r5548 | cbiere | 2004-06-29 12:04:49 -0400 (Tue, 29 Jun 2004) | 2 lines

Declare find_download() static inline.

------------------------------------------------------------------------
r5547 | cbiere | 2004-06-29 12:02:45 -0400 (Tue, 29 Jun 2004) | 3 lines

Replaced unnecessary "special" callbacks with update_entry for
	PROP_SOCKS_USER and PROP_SOCKS_PASS.

------------------------------------------------------------------------
r5546 | cbiere | 2004-06-29 11:54:17 -0400 (Tue, 29 Jun 2004) | 3 lines

on_entry_server_hostname_changed():
	Corrected minimum length for a valid non-local hostname.

------------------------------------------------------------------------
r5545 | cbiere | 2004-06-29 11:52:50 -0400 (Tue, 29 Jun 2004) | 3 lines

get_average_servent_uptime():
	time_t is not a guint32.

------------------------------------------------------------------------
r5544 | cbiere | 2004-06-26 04:40:05 -0400 (Sat, 26 Jun 2004) | 3 lines

Check in not-yet-implemented callbacks for the wizard dialog. It would be
sisyphus work to re-add them later.

------------------------------------------------------------------------
r5543 | cbiere | 2004-06-26 04:23:04 -0400 (Sat, 26 Jun 2004) | 3 lines

Don't localize messages sent to the remote peer.
Added const-qualifiers.

------------------------------------------------------------------------
r5542 | cbiere | 2004-06-26 01:28:38 -0400 (Sat, 26 Jun 2004) | 2 lines

Completed column selection support for the Uploads and Upload stats pane.

------------------------------------------------------------------------
r5541 | cbiere | 2004-06-25 23:56:48 -0400 (Fri, 25 Jun 2004) | 2 lines

Added "dlg_wizard" a configuration wizard for the basic settings.

------------------------------------------------------------------------
r5540 | wyldfire | 2004-06-25 13:47:21 -0400 (Fri, 25 Jun 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r5539 | wyldfire | 2004-06-25 13:45:36 -0400 (Fri, 25 Jun 2004) | 7 lines

No longer call hcache_remove_all() from hcache_free().
Made hcache_free() fail if hostcache is not empty.
Fail if for some obscure reason hosts are added during hcache_close. This
  can normally only happen if we are multi-threaded, which we are afaik not.
Check that hostlist and host_count are in sync when hcache_remove_all() is
  done.

------------------------------------------------------------------------
r5538 | cbiere | 2004-06-25 10:32:39 -0400 (Fri, 25 Jun 2004) | 4 lines

str_len():
	Using strlen() is at least as fast as manually looping to the
	NUL-character.

------------------------------------------------------------------------
r5537 | trancetip | 2004-06-25 08:37:38 -0400 (Fri, 25 Jun 2004) | 2 lines

Removed unnecessary condition.

------------------------------------------------------------------------
r5536 | nonamer | 2004-06-25 08:32:09 -0400 (Fri, 25 Jun 2004) | 2 lines

Updated dutch translations

------------------------------------------------------------------------
r5535 | trancetip | 2004-06-25 04:19:35 -0400 (Fri, 25 Jun 2004) | 2 lines

Reduced HSEP_N_MAX from 10 to 7.

------------------------------------------------------------------------
r5534 | wyldfire | 2004-06-24 18:37:08 -0400 (Thu, 24 Jun 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r5533 | rmanfredi | 2004-06-24 18:13:37 -0400 (Thu, 24 Jun 2004) | 3 lines

Fixed test in libc.U so that a missing "bld" does not make it believe that
the extraction of .o files was successful.

------------------------------------------------------------------------
r5532 | wyldfire | 2004-06-24 16:46:44 -0400 (Thu, 24 Jun 2004) | 4 lines

Fixed segfault in hcache.c on shutdown due to accessing hostcaches
  which had already been freed at that point.
  (Thanks to Clayton Rollins for the backtrace)

------------------------------------------------------------------------
r5531 | cbiere | 2004-06-24 03:30:09 -0400 (Thu, 24 Jun 2004) | 4 lines

Added const-qualifiers.
gwc_retrieve():
	There's no need to decrease the size parameter for fgets() by one.

------------------------------------------------------------------------
r5530 | cbiere | 2004-06-24 03:28:13 -0400 (Thu, 24 Jun 2004) | 4 lines

[GTK2] Use pango to get a (hopefully) fixed-width font for the uptime label
	instead of using a fixed-width label since the latter is sub-optimal
	when using a proportional font.

------------------------------------------------------------------------
r5529 | cbiere | 2004-06-24 03:18:49 -0400 (Thu, 24 Jun 2004) | 2 lines

Tagged more strings as translatable.

------------------------------------------------------------------------
r5528 | cbiere | 2004-06-24 02:52:49 -0400 (Thu, 24 Jun 2004) | 5 lines

Initial support for dropping (not dragging). To check this out, add drop_init()
in main.c::main(), adjust the Makefile and *drop* (not copy&paste) an URL on
the main window. MAGNET URLs for searches work, everything else must wait until
downloads can be initiated without having to know the filesize in advance.

------------------------------------------------------------------------
r5527 | cbiere | 2004-06-24 02:41:30 -0400 (Thu, 24 Jun 2004) | 2 lines

Changed url_strtoaddr_strict() from static to extern: I need this.

------------------------------------------------------------------------
r5526 | nonamer | 2004-06-24 02:09:18 -0400 (Thu, 24 Jun 2004) | 2 lines

Updated to new release plan for 0.94

------------------------------------------------------------------------
r5525 | cbiere | 2004-06-22 18:35:11 -0400 (Tue, 22 Jun 2004) | 3 lines

main_gui_run():
	The motion compensation (for FVMW2) should finally work with GTK+ 2.x.

------------------------------------------------------------------------
r5524 | wyldfire | 2004-06-22 18:26:35 -0400 (Tue, 22 Jun 2004) | 2 lines

Ported "extension" column in search results from Gtk2.

------------------------------------------------------------------------
r5523 | cbiere | 2004-06-22 16:54:31 -0400 (Tue, 22 Jun 2004) | 4 lines

main_gui_run():
	Readjust window position relative to the requested coordinates, not
	the current.

------------------------------------------------------------------------
r5522 | cbiere | 2004-06-22 16:38:38 -0400 (Tue, 22 Jun 2004) | 3 lines

add_results_columns():
	Make sure the number of columns is corrects.

------------------------------------------------------------------------
r5521 | cbiere | 2004-06-22 16:35:11 -0400 (Tue, 22 Jun 2004) | 4 lines

main_gui_run():
	Correct the window position if the window manager didn't move the
	window exactly where it should be.

------------------------------------------------------------------------
r5520 | cbiere | 2004-06-22 15:52:18 -0400 (Tue, 22 Jun 2004) | 2 lines

Removed accidental reference to show_time_count().

------------------------------------------------------------------------
r5519 | cbiere | 2004-06-22 15:44:41 -0400 (Tue, 22 Jun 2004) | 2 lines

No C++ style comments, please.

------------------------------------------------------------------------
r5518 | wyldfire | 2004-06-22 15:24:27 -0400 (Tue, 22 Jun 2004) | 2 lines

Converted g_warnings to g_messages and moved them to dbg >= 0.

------------------------------------------------------------------------
r5517 | wyldfire | 2004-06-22 15:23:39 -0400 (Tue, 22 Jun 2004) | 3 lines


Converted g_warnings to g_messages and moved them to dbg >= 0.

------------------------------------------------------------------------
r5516 | wyldfire | 2004-06-22 15:21:38 -0400 (Tue, 22 Jun 2004) | 2 lines

Removed forgotten debugging message.

------------------------------------------------------------------------
r5514 | cbiere | 2004-06-21 19:55:35 -0400 (Mon, 21 Jun 2004) | 2 lines

Removed unnecessary ``list_uploads''; use only ``upload_handles''.

------------------------------------------------------------------------
r5513 | cbiere | 2004-06-21 19:21:41 -0400 (Mon, 21 Jun 2004) | 9 lines

Removed unnecessary ``list_nodes'':
	Removing an element from this when a node is removed is a relevative
	big performance penalty. g_hash_table_foreach() is a little bit
	slower than G_LIST_FOREACH() but update_row() doesn't have to
	lookup up the GtkTreeIter because it's already passed to this
	function now. A little (de-)allocation overhead is saved anyway.
nodes_gui_create_treeview_nodes():
	Removed inappropriate comment.

------------------------------------------------------------------------
r5512 | rmanfredi | 2004-06-21 17:16:46 -0400 (Mon, 21 Jun 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r5511 | rmanfredi | 2004-06-21 17:14:53 -0400 (Mon, 21 Jun 2004) | 2 lines

Remind them they're banned every BAN_REMIND attempt.

------------------------------------------------------------------------
r5510 | rmanfredi | 2004-06-21 17:04:32 -0400 (Mon, 21 Jun 2004) | 2 lines

Version of 2004-06-21.

------------------------------------------------------------------------
r5509 | rmanfredi | 2004-06-21 17:00:44 -0400 (Mon, 21 Jun 2004) | 2 lines

Don't loose a source if we can't connect due to a lack of file descriptors.

------------------------------------------------------------------------
r5508 | cbiere | 2004-06-20 18:27:42 -0400 (Sun, 20 Jun 2004) | 4 lines

parq_download_queue_ack():
	Don't call download_gui_add(), download_send_request() takes care
	of this.

------------------------------------------------------------------------
r5507 | cbiere | 2004-06-20 18:15:08 -0400 (Sun, 20 Jun 2004) | 5 lines

Don't use ``pretty_node_vendor'', the string "..." is already valid UTF-8.
In order to save a few CPU cycles and g_strdup()s, pass NULL instead of "..."
	as value for "Unknown vendor". This is especially nice during the
	intial connect phase.

------------------------------------------------------------------------
r5506 | cbiere | 2004-06-20 18:11:37 -0400 (Sun, 20 Jun 2004) | 4 lines

Don't use switch() to map enums to strings, use a string array.
Tagged strings as translatable.
Use PRIu64 to print unsigned 64-bit integers.

------------------------------------------------------------------------
r5505 | cbiere | 2004-06-20 18:08:13 -0400 (Sun, 20 Jun 2004) | 3 lines

Made sure the field width for a format string is passed as an int, not long
	or anything else.

------------------------------------------------------------------------
r5504 | cbiere | 2004-06-20 18:05:56 -0400 (Sun, 20 Jun 2004) | 2 lines

Don't break strict aliasing.

------------------------------------------------------------------------
r5503 | cbiere | 2004-06-20 18:05:21 -0400 (Sun, 20 Jun 2004) | 3 lines

update_label_date():
	Don't access a time_t variable as if it's a guint32, copy by value.

------------------------------------------------------------------------
r5502 | cbiere | 2004-06-20 18:03:09 -0400 (Sun, 20 Jun 2004) | 8 lines

Use PRIu64 to print unsigned 64-bit integers.
prop_parse_guint64_vector():
	Don't overwrite the value if parsing failed.
	TODO: Don't use gm_atoul() or strtoul() because long != uint64_t.
prop_parse_guint32_vector():
	Don't overwrite the value if parsing failed.
	Catch out-of-range values.

------------------------------------------------------------------------
r5501 | cbiere | 2004-06-20 17:59:10 -0400 (Sun, 20 Jun 2004) | 2 lines

Use PRIu64 to print unsigned 64-bit integers.

------------------------------------------------------------------------
r5500 | cbiere | 2004-06-20 17:55:26 -0400 (Sun, 20 Jun 2004) | 3 lines

Added const-qualifier to ``msg_drop_reason'', tagged strings as translatable
	and added missing comma between two strings.

------------------------------------------------------------------------
r5499 | cbiere | 2004-06-20 17:53:39 -0400 (Sun, 20 Jun 2004) | 2 lines

Don't break strict aliasing.

------------------------------------------------------------------------
r5498 | rmanfredi | 2004-06-20 16:47:04 -0400 (Sun, 20 Jun 2004) | 2 lines

Avoid compiler warning in too_big_for_gnutella().

------------------------------------------------------------------------
r5497 | cbiere | 2004-06-20 16:34:37 -0400 (Sun, 20 Jun 2004) | 2 lines

Use PRIu64 to print unsigned 64-bit integers.

------------------------------------------------------------------------
r5496 | rmanfredi | 2004-06-20 16:33:30 -0400 (Sun, 20 Jun 2004) | 2 lines

Added metaconfig check for <inttypes.h>.

------------------------------------------------------------------------
r5495 | cbiere | 2004-06-20 16:31:20 -0400 (Sun, 20 Jun 2004) | 2 lines

Added a complete prototype for ``msg_type_str_size''.

------------------------------------------------------------------------
r5494 | cbiere | 2004-06-20 16:25:03 -0400 (Sun, 20 Jun 2004) | 4 lines

Define the ISO C99 macros PRId64 and PRIu64 if they're not defined already.
Use these instead of G_GINT64_FORMAT and G_GUINT64_FORMAT because the latter
are only defined in GLib >= 2.0 and their names are annoying long.

------------------------------------------------------------------------
r5493 | cbiere | 2004-06-20 14:51:04 -0400 (Sun, 20 Jun 2004) | 5 lines

too_big_for_gnutella():
	Corrected statement to >= 0 to catch negative values only.
recurse_scan():
	Don't share zero-sized files either.

------------------------------------------------------------------------
r5492 | cbiere | 2004-06-20 12:57:42 -0400 (Sun, 20 Jun 2004) | 3 lines

STATIC_ASSERT():
	Added "do { ... } while(0)" around definition.

------------------------------------------------------------------------
r5491 | cbiere | 2004-06-20 11:20:39 -0400 (Sun, 20 Jun 2004) | 5 lines

recurse_scan():
	Use int64_t because off_t is a signed integer i.e., if off_t is a
	32-bit integer 2GB-1 byte is the limit, otherwise it's 4GB-1 byte
	because that's the biggest filesize (currently) supported by Gnutella.

------------------------------------------------------------------------
r5490 | cbiere | 2004-06-20 10:16:09 -0400 (Sun, 20 Jun 2004) | 3 lines

recurse_scan():
	Replaced guint64 with off_t.

------------------------------------------------------------------------
r5489 | rmanfredi | 2004-06-19 09:58:22 -0400 (Sat, 19 Jun 2004) | 2 lines

Added space within description for "quick_connect_pool_size".

------------------------------------------------------------------------
r5488 | cbiere | 2004-06-19 09:41:04 -0400 (Sat, 19 Jun 2004) | 2 lines

There's a file gtk-gnutella.svg indeed.

------------------------------------------------------------------------
r5487 | cbiere | 2004-06-19 09:36:11 -0400 (Sat, 19 Jun 2004) | 5 lines

Removed unnecessary variable ``index_of_found_files_count''.
Corrected comments: tree -> hash table.
recurse_scan():
	Don't try share files which are bigger than 4GB.

------------------------------------------------------------------------
r5486 | nonamer | 2004-06-19 08:28:09 -0400 (Sat, 19 Jun 2004) | 2 lines

Have CVS compile is a good thing don't you think?

------------------------------------------------------------------------
r5485 | cbiere | 2004-06-19 06:46:13 -0400 (Sat, 19 Jun 2004) | 2 lines

There is no file gtk-gnutella.svg.

------------------------------------------------------------------------
r5484 | graaff | 2004-06-19 04:28:20 -0400 (Sat, 19 Jun 2004) | 2 lines

Only show range merging debug messages when using dbg.

------------------------------------------------------------------------
r5483 | trancetip | 2004-06-19 03:21:30 -0400 (Sat, 19 Jun 2004) | 2 lines

The current time is now passed to hsep_timer().

------------------------------------------------------------------------
r5482 | trancetip | 2004-06-19 03:20:36 -0400 (Sat, 19 Jun 2004) | 2 lines

Adapted node_parse() to pass current time to hsep_process_msg().

------------------------------------------------------------------------
r5481 | trancetip | 2004-06-19 03:19:34 -0400 (Sat, 19 Jun 2004) | 2 lines

Reduced usage of time(NULL) calls.

------------------------------------------------------------------------
r5480 | trancetip | 2004-06-19 03:18:49 -0400 (Sat, 19 Jun 2004) | 3 lines

Statusbar horizon stats are now updated at least once in every 3 seconds.
Reduced number of time(NULL) calls.

------------------------------------------------------------------------
r5479 | trancetip | 2004-06-18 13:58:46 -0400 (Fri, 18 Jun 2004) | 2 lines

Optimized vendor_code_cmp().

------------------------------------------------------------------------
r5478 | trancetip | 2004-06-18 08:42:55 -0400 (Fri, 18 Jun 2004) | 2 lines

Fixed two typos. Removed unnecessary tree key comparison function.

------------------------------------------------------------------------
r5477 | trancetip | 2004-06-18 08:39:31 -0400 (Fri, 18 Jun 2004) | 4 lines

Replaced usage of a GTree by usage of a GHashTable for checking if a file
has already been included in a queryhit reply we generate. As no tree
properties are ever used, a hashtable is a better choice here.

------------------------------------------------------------------------
r5476 | trancetip | 2004-06-18 06:57:57 -0400 (Fri, 18 Jun 2004) | 2 lines

Optimized queue # determination. Made minor doc improvements.

------------------------------------------------------------------------
r5475 | cbiere | 2004-06-18 01:08:43 -0400 (Fri, 18 Jun 2004) | 2 lines

Save the status of the columns.

------------------------------------------------------------------------
r5474 | cbiere | 2004-06-18 01:03:10 -0400 (Fri, 18 Jun 2004) | 5 lines

Added "Configure columns" menuitem to ``popup_dl_active'', ``popup_dl_queued''
	and ``popup_uploads''.
Added ``popup_upload_stats''.
TODO: ``popup_upload_stats'' and `popup_uploads'' are not yet wired.

------------------------------------------------------------------------
r5473 | cbiere | 2004-06-18 00:59:57 -0400 (Fri, 18 Jun 2004) | 2 lines

Added upload_stats_gui_shutdown() for saving the status of the columns.

------------------------------------------------------------------------
r5472 | cbiere | 2004-06-18 00:58:04 -0400 (Fri, 18 Jun 2004) | 3 lines

Save the visibility status and the width of the columns on exit.
Minor clean-ups.

------------------------------------------------------------------------
r5471 | cbiere | 2004-06-18 00:54:52 -0400 (Fri, 18 Jun 2004) | 2 lines

Commented out toolbar-related code for GTK+ 2.x for the moment.

------------------------------------------------------------------------
r5470 | cbiere | 2004-06-18 00:53:05 -0400 (Fri, 18 Jun 2004) | 2 lines

Minor clean-ups.

------------------------------------------------------------------------
r5469 | cbiere | 2004-06-18 00:51:21 -0400 (Fri, 18 Jun 2004) | 3 lines

Added STATIC_ASSERT() for static compile-time checks e.g., sufficient
	array length, size of types etc.

------------------------------------------------------------------------
r5468 | cbiere | 2004-06-18 00:50:01 -0400 (Fri, 18 Jun 2004) | 3 lines

Don't detach the TreeModel from TreeView for updates, it's probably not
	worth it.

------------------------------------------------------------------------
r5467 | cbiere | 2004-06-18 00:48:23 -0400 (Fri, 18 Jun 2004) | 3 lines

Added properties to save the visibility status and widths of columns:
	Downloads, Downloads queue, Uploads, Upload stats.

------------------------------------------------------------------------
r5466 | cbiere | 2004-06-18 00:46:46 -0400 (Fri, 18 Jun 2004) | 4 lines

Added GUI_CELL_RENDERER_XPAD to be used for the "xpad" property of
	GtkCellRenderers.
Added several column counters.

------------------------------------------------------------------------
r5465 | cbiere | 2004-06-18 00:45:22 -0400 (Fri, 18 Jun 2004) | 4 lines

Tagged a couple of strings as translatable.
fi_gui_init():
	Clean up.

------------------------------------------------------------------------
r5464 | cbiere | 2004-06-18 00:43:17 -0400 (Fri, 18 Jun 2004) | 5 lines

Removed unused variable ``downloads_gui2_initialized''.
Save the visibility status of the columns for the downloads and downloads
	queue.
Re-added lost ``Server'' column.

------------------------------------------------------------------------
r5463 | cbiere | 2004-06-17 18:24:37 -0400 (Thu, 17 Jun 2004) | 4 lines

hash_list_remove():
	Simplified the case in which the removed element is the last element.
	[By Thomas Schuerger.]

------------------------------------------------------------------------
r5462 | cbiere | 2004-06-17 18:17:54 -0400 (Thu, 17 Jun 2004) | 4 lines

hash_list_last():
	Fixed; the function should return the data of the element not the
	element itself like hash_list_first(). Spotted by Thomas Schuerger.

------------------------------------------------------------------------
r5461 | cbiere | 2004-06-17 18:14:47 -0400 (Thu, 17 Jun 2004) | 4 lines

header_fmt_make():
	Added assertion that len_hint must be non-negative.
	Use the return value of g_strlcpy() instead of using an extra strlen().

------------------------------------------------------------------------
r5460 | cbiere | 2004-06-17 17:43:30 -0400 (Thu, 17 Jun 2004) | 4 lines

load_helper():
	Initialize the property vector with the default values before
	parsing it, so that non-parseable elements get the default value.

------------------------------------------------------------------------
r5459 | trancetip | 2004-06-17 15:23:24 -0400 (Thu, 17 Jun 2004) | 2 lines

Optimized next_pow() and str_chomp().

------------------------------------------------------------------------
r5458 | cbiere | 2004-06-17 08:28:10 -0400 (Thu, 17 Jun 2004) | 3 lines

prop_parse_boolean_vector():
	Allow 0 and 1 as aliases for TRUE and FALSE.

------------------------------------------------------------------------
r5457 | trancetip | 2004-06-17 03:23:25 -0400 (Thu, 17 Jun 2004) | 3 lines

Made short_size(), short_size64() and short_kb_size64() use 2 decimal
digits instead of 1, just like short_kb_size() uses 2 decimal digits.

------------------------------------------------------------------------
r5456 | cbiere | 2004-06-17 00:00:41 -0400 (Thu, 17 Jun 2004) | 5 lines

sha1_is_cached():
	Added. This is used to verify whether the SHA1 is already
	known for the shared_file. Otherwise, it must be checked whether
	the file is a partial download i.e., has a fileinfo trailer.

------------------------------------------------------------------------
r5455 | cbiere | 2004-06-16 23:58:03 -0400 (Wed, 16 Jun 2004) | 6 lines

Changed type of ``release_date'' back to time_t.
Replaced several g_(s)list_append() with g_(s)list_prepend().
Fixed problem reported by Chris Winne:
	Shared files were checked for a fileinfo trailer even if they had
	been added to sha1_cache already.

------------------------------------------------------------------------
r5454 | cbiere | 2004-06-16 23:53:43 -0400 (Wed, 16 Jun 2004) | 3 lines

Changed files_scanned, bytes_scanned, kbytes_scanned to static and guint64.
Added shared_files_scanned() and shared_kbytes_scanned().

------------------------------------------------------------------------
r5453 | cbiere | 2004-06-16 22:04:13 -0400 (Wed, 16 Jun 2004) | 6 lines

Don't open the main window at the mouse cursor.
Make the window invisible at startup to avoid flashing.
Catch the signal when a the GtkHandleBox for the searches is detached to
	preserve its current dimensions.
Removed the border from the statusbar.

------------------------------------------------------------------------
r5452 | cbiere | 2004-06-16 20:39:35 -0400 (Wed, 16 Jun 2004) | 3 lines

Define G_DISABLE_DEPRECATED and GDK_DISABLE_DEPRECATED when compiling for
	GTK+ 2.x to prevent using deprecated functions.

------------------------------------------------------------------------
r5451 | cbiere | 2004-06-16 20:37:56 -0400 (Wed, 16 Jun 2004) | 5 lines

Use GTK+ functions instead of GDK functions for GTK+ 2.x; might fix the
problem with shifted window coordinates when using Fvwm2.
gui_init_menu():
	Declare ``title'' const and override const for gtk_ctree_insert_node().

------------------------------------------------------------------------
r5450 | cbiere | 2004-06-16 20:34:06 -0400 (Wed, 16 Jun 2004) | 4 lines

Replaced inclusion of config.h with inclusion of common.h.
Use gdk_draw_pixbuf() and add a backward-compatibility wrapper for
	gdk_pixbuf_render_to_drawable() for GTK+ before 2.2.

------------------------------------------------------------------------
r5449 | cbiere | 2004-06-16 19:38:34 -0400 (Wed, 16 Jun 2004) | 5 lines

on_treeview_downloads_queue_select_row():
	Use gtk_tree_selection_selected_foreach() instead of
	gtk_tree_selection_get_selected_rows().
	Disable "Copy URL" and "Connect to host" for header rows.

------------------------------------------------------------------------
r5448 | trancetip | 2004-06-16 18:04:53 -0400 (Wed, 16 Jun 2004) | 2 lines

Optimized is_pow2(), made it inline and moved it to misc.h.

------------------------------------------------------------------------
r5447 | rmanfredi | 2004-06-16 15:10:37 -0400 (Wed, 16 Jun 2004) | 3 lines

Regenerated with newer Csym.U to circumvent gcc 3.4 bug that prevents
the detection of missing functions in compile tests.

------------------------------------------------------------------------
r5446 | rmanfredi | 2004-06-16 13:54:03 -0400 (Wed, 16 Jun 2004) | 2 lines

When faking G2 support, pretend we don't support PARQ.

------------------------------------------------------------------------
r5445 | rmanfredi | 2004-06-16 13:50:57 -0400 (Wed, 16 Jun 2004) | 3 lines

Changed comment for max_connections that said value should not be above 20
when the default is 35...

------------------------------------------------------------------------
r5444 | nonamer | 2004-06-16 11:19:46 -0400 (Wed, 16 Jun 2004) | 2 lines

Don't expect any commits yet for today

------------------------------------------------------------------------
r5443 | nonamer | 2004-06-16 11:06:30 -0400 (Wed, 16 Jun 2004) | 3 lines

Will this make the phantom download visible (sometimes a download was
only 'visible' in the fileinfo pane, but not in the download pane)

------------------------------------------------------------------------
r5442 | cbiere | 2004-06-15 23:13:49 -0400 (Tue, 15 Jun 2004) | 4 lines

Removed (GFunc) casts when using G_.*LIST_FOREACH.* because this becomes
invalid code when the macros are expanded and the casts shouldn't be
necessary any longer anyway. Takes care of bug #970401.

------------------------------------------------------------------------
r5441 | cbiere | 2004-06-15 23:09:20 -0400 (Tue, 15 Jun 2004) | 7 lines

Added static to ``sl_shells''.
Added const-qualifiers to struct ``commands''.
Tagged several strings as translatable.
Minor code style fixes.
shell_handle_data():
	Corrected prototype.

------------------------------------------------------------------------
r5440 | cbiere | 2004-06-15 22:46:36 -0400 (Tue, 15 Jun 2004) | 4 lines

Removed (GFunc) casts when using G_.*LIST_FOREACH.* because this becomes
invalid code when the macros are expanded and the casts shouldn't be
necessary any longer anyway. Takes care of bug #970401.

------------------------------------------------------------------------
r5439 | cbiere | 2004-06-15 22:41:32 -0400 (Tue, 15 Jun 2004) | 3 lines

Removed duplicate but wrong prototype for hcache_clear().
Removed unnecessary space between ')' and ';'.

------------------------------------------------------------------------
r5438 | cbiere | 2004-06-15 22:40:04 -0400 (Tue, 15 Jun 2004) | 4 lines

Changed the G_.*LIST_FOREACH.* macros so that func isn't dereferenced
and replaced the leading underscores in the local variable names with
trailing underscores because the former are evil. Added comment.

------------------------------------------------------------------------
r5437 | cbiere | 2004-06-15 22:36:38 -0400 (Tue, 15 Jun 2004) | 6 lines

The const-qualifier cannot be casted away in G_FREE_NULL() because this
would cause a lvalue cast. The G_FREE_NULL() macro shouldn't be changed
because then it wouldn't be possible to catch free()ing a const pointer -
which is often a bug. Instead use g_free() and set the pointer manually
to NULL.

------------------------------------------------------------------------
r5436 | cbiere | 2004-06-15 22:30:22 -0400 (Tue, 15 Jun 2004) | 4 lines

Cast the ``src'' for iconv() to (void *) so that the compiler won't spit
it out a warning no matter whether iconv() implementation uses (const char **)
or (char **).

------------------------------------------------------------------------
r5435 | trancetip | 2004-06-15 15:21:54 -0400 (Tue, 15 Jun 2004) | 2 lines

Made ban reasons translatable.

------------------------------------------------------------------------
r5434 | trancetip | 2004-06-15 02:04:54 -0400 (Tue, 15 Jun 2004) | 2 lines

Bumped release date due to HSEP changes.

------------------------------------------------------------------------
r5433 | nonamer | 2004-06-14 16:58:07 -0400 (Mon, 14 Jun 2004) | 3 lines

Increased default Ultrapeer connections to minium 20, and maximum to 35 when in leave mode.
Decrease 30 to 25?

------------------------------------------------------------------------
r5432 | graaff | 2004-06-14 16:28:17 -0400 (Mon, 14 Jun 2004) | 2 lines

Add SVG version of GTK-Gnutella icon to distribution.

------------------------------------------------------------------------
r5431 | rmanfredi | 2004-06-14 16:08:37 -0400 (Mon, 14 Jun 2004) | 3 lines

Added tracing to allow debugging of possible unwanted SHA1 recomputation
at startup time, if dbg > 4.

------------------------------------------------------------------------
r5430 | trancetip | 2004-06-14 14:17:13 -0400 (Mon, 14 Jun 2004) | 3 lines

Improved HSEP implementation to also consider non-HSEP nodes. Added
info from non-HSEP nodes to horizon stats (statusbar and gnet stats panel).

------------------------------------------------------------------------
r5429 | trancetip | 2004-06-14 14:12:27 -0400 (Mon, 14 Jun 2004) | 5 lines

Changed the horizon stats on the gNet stats panel to also include
horizon information about our current non-HSEP connections. The
horizon table is now updated every 2 seconds (only when the table is
visible).

------------------------------------------------------------------------
r5428 | trancetip | 2004-06-14 13:54:00 -0400 (Mon, 14 Jun 2004) | 4 lines

Changed the horizon stats table contents to also include the available
non-HSEP horizon information. Moved gnet_stats_gui_get_non_hsep_triple()
to hsep.c and renamed it to hsep_get_non_hsep_triple().

------------------------------------------------------------------------
r5427 | trancetip | 2004-06-14 13:43:11 -0400 (Mon, 14 Jun 2004) | 3 lines

The HSEP implementation now also sends available horizon information about
directly-connected non-HSEP nodes.

------------------------------------------------------------------------
r5426 | cbiere | 2004-06-14 12:11:10 -0400 (Mon, 14 Jun 2004) | 6 lines

Replaced C++ style comments with proper C89 comments.
Tagged strings as translatable.
on_tree_view_search_results_select_row():
	Even though tmpstr is more than large enough, use MIN(x, sizeof tmpstr)
	as size limit for g_strlcpy(). Just in case...

------------------------------------------------------------------------
r5425 | cbiere | 2004-06-14 11:50:07 -0400 (Mon, 14 Jun 2004) | 6 lines

search_store_xml():
	Fixed bug I introduced in rev. 1.31: Since x_tmp was no longer
	used to hold the "new filename", x_tmp contained random data
	from a previous usage and was then printed at debug levels above 2
	instead of ``filename_new''.

------------------------------------------------------------------------
r5424 | cbiere | 2004-06-14 11:27:36 -0400 (Mon, 14 Jun 2004) | 5 lines

parse_and_append_cache_entry():
	A very long line (more than 4095 characters) in sha1_cache caused
	a buffer overrun due to not checking for '\0' <NUL> but only for
	'\t' <tab> or '\n' <newline>.

------------------------------------------------------------------------
r5423 | cbiere | 2004-06-14 09:02:39 -0400 (Mon, 14 Jun 2004) | 2 lines

Fixed warnings caused by missing const-qualifiers.

------------------------------------------------------------------------
r5422 | cbiere | 2004-06-14 08:36:58 -0400 (Mon, 14 Jun 2004) | 2 lines

Minor clean-ups.

------------------------------------------------------------------------
r5421 | cbiere | 2004-06-14 08:34:29 -0400 (Mon, 14 Jun 2004) | 2 lines

PROP_SEARCH_RESULTS_COL_VISIBLE is of type boolean now.

------------------------------------------------------------------------
r5420 | cbiere | 2004-06-14 08:25:36 -0400 (Mon, 14 Jun 2004) | 4 lines

The column widths *and* visibility states are saved now.
nodes_gui_create_treeview_nodes():
	Beautified.

------------------------------------------------------------------------
r5419 | cbiere | 2004-06-14 08:23:02 -0400 (Mon, 14 Jun 2004) | 4 lines

PROP_SEARCH_RESULTS_COL_VISIBLE:
	Changed type from guint32 to boolean now that boolean vectors work.
Added PROP_NODES_COL_VISIBLE.

------------------------------------------------------------------------
r5418 | cbiere | 2004-06-14 08:21:32 -0400 (Mon, 14 Jun 2004) | 2 lines

Added tree_view_save_visibility().

------------------------------------------------------------------------
r5417 | cbiere | 2004-06-14 08:20:18 -0400 (Mon, 14 Jun 2004) | 19 lines

search_gui_add_record():
	Don't use dynamically allocated memory. The strings here should
	be reasonable short, we don't show novels.
	Use ascii_strlower().
sync_column_widths():
	Use a fixed buffer, we know the length of the property vector.
search_gui_search_results_col_visible_changed():
	PROP_SEARCH_RESULTS_COL_VISIBLE is now a boolean vector.
	Use a fixed size buffer, we know the length.
search_gui_column_resized():
	Removed, unnecessary.
add_list_columns():
add_results_columns():
	Beautified.
search_gui_shutdown():
	Use tree_view_save_visibility().
gui_search_update_items():
	Tagged strings as translatable.

------------------------------------------------------------------------
r5416 | cbiere | 2004-06-14 08:12:29 -0400 (Mon, 14 Jun 2004) | 2 lines

Use ascii_strlower().

------------------------------------------------------------------------
r5415 | cbiere | 2004-06-14 08:10:41 -0400 (Mon, 14 Jun 2004) | 4 lines

Tagged strings as tranlatable.
Replaced default target in switch-block with actual values. This way the
compiler will warn us whenever a case is added which isn't handled.

------------------------------------------------------------------------
r5414 | cbiere | 2004-06-14 08:09:03 -0400 (Mon, 14 Jun 2004) | 5 lines

Removed unused code.
Removed all property entries which referred to update_treeview_col_widths
	since they're plain unnecessary. Load the widths properties in
	the relevant *_init() and save them in *_shutdown().

------------------------------------------------------------------------
r5413 | cbiere | 2004-06-14 08:06:17 -0400 (Mon, 14 Jun 2004) | 2 lines

Tagged strings as translatable.

------------------------------------------------------------------------
r5412 | cbiere | 2004-06-14 08:05:21 -0400 (Mon, 14 Jun 2004) | 2 lines

Added ascii_strlower().

------------------------------------------------------------------------
r5411 | cbiere | 2004-06-14 08:04:32 -0400 (Mon, 14 Jun 2004) | 3 lines

Renamed SEARCH_GUI2_VISIBLE_COLUMNS to SEARCH_RESULTS_VISIBLE_COLUMNS,
	added further counters.

------------------------------------------------------------------------
r5410 | cbiere | 2004-06-14 08:03:08 -0400 (Mon, 14 Jun 2004) | 4 lines

gtk_column_chooser_new():
	Don't artificially prohibit changing the first column, GTK+ can
	handle that.

------------------------------------------------------------------------
r5409 | cbiere | 2004-06-14 08:01:07 -0400 (Mon, 14 Jun 2004) | 3 lines

settings_init():
	Report the amount of physical RAM as message not as warning.

------------------------------------------------------------------------
r5408 | cbiere | 2004-06-14 08:00:10 -0400 (Mon, 14 Jun 2004) | 3 lines

search_gui_autoselect_cmp():
	Take advantage of the facts that rc->name and rc->sha1 are atoms.

------------------------------------------------------------------------
r5407 | cbiere | 2004-06-14 07:57:40 -0400 (Mon, 14 Jun 2004) | 6 lines

popup_names:
	Added const-qualifier. Terminate by array length instead of NULL.
on_tree_view_search_results_select_row():
	Re-UTF-8ize the filename from rc->name instead of reading it from
	the TreeModel which would return a g_strdup()'ed string.

------------------------------------------------------------------------
r5406 | cbiere | 2004-06-14 07:54:13 -0400 (Mon, 14 Jun 2004) | 4 lines

prop_parse_boolean_vector():
	Fixed. This didn't work at all for vectors larger than one.
	Allow whitespaces and don't use dynamically allocated memory here.

------------------------------------------------------------------------
r5405 | trancetip | 2004-06-14 07:10:09 -0400 (Mon, 14 Jun 2004) | 2 lines

Rebuilt file.

------------------------------------------------------------------------
r5404 | trancetip | 2004-06-14 07:08:55 -0400 (Mon, 14 Jun 2004) | 2 lines

Added all .c-files currently containing translatable strings.

------------------------------------------------------------------------
r5403 | trancetip | 2004-06-14 05:20:56 -0400 (Mon, 14 Jun 2004) | 2 lines

Made all contained GUI strings translatable.

------------------------------------------------------------------------
r5402 | trancetip | 2004-06-14 05:06:14 -0400 (Mon, 14 Jun 2004) | 4 lines

Changed the displayed horizon stats in the statusbar to also take into
account all established non-HSEP connections and the PONG-based library
size we have available for these.

------------------------------------------------------------------------
r5401 | graaff | 2004-06-13 17:37:28 -0400 (Sun, 13 Jun 2004) | 3 lines

Make sure tooltip for visual progress indicator is shown by enabling
the right events.

------------------------------------------------------------------------
r5400 | wyldfire | 2004-06-13 08:17:03 -0400 (Sun, 13 Jun 2004) | 4 lines


Removed glade as a build-time dependency. It's only needed by developers.
Updated changelog version to 0.94.0

------------------------------------------------------------------------
r5399 | wyldfire | 2004-06-13 07:06:52 -0400 (Sun, 13 Jun 2004) | 5 lines


Changed "downloads" into "sources" and "fileinfo" into "files" in the
  downloads pane.
Added mini-statusbar with a resize-grip right of the uptime label.

------------------------------------------------------------------------
r5398 | wyldfire | 2004-06-13 06:29:55 -0400 (Sun, 13 Jun 2004) | 4 lines


Changes "downloads" into "sources" and "fileinfo" into "files" in the
  downloads pane.

------------------------------------------------------------------------
r5397 | rmanfredi | 2004-06-12 17:34:27 -0400 (Sat, 12 Jun 2004) | 2 lines

Make unsigned comparison in guid_is_gtkg() for the HEC byte.

------------------------------------------------------------------------
r5396 | rmanfredi | 2004-06-12 16:39:51 -0400 (Sat, 12 Jun 2004) | 2 lines

Updated timestamp after horrible bug in hex2dec() fixed.

------------------------------------------------------------------------
r5395 | cbiere | 2004-06-12 16:14:49 -0400 (Sat, 12 Jun 2004) | 4 lines

Added const-qualifier to ``banned_push''.
Minor code style fix.
Added assertion to catch internal havoc.

------------------------------------------------------------------------
r5394 | cbiere | 2004-06-12 16:11:42 -0400 (Sat, 12 Jun 2004) | 3 lines

Fixed a horrible bug I introduced in rev. 1.112:
	The parentheses were missing so that hex2dec() returned *always* -1.

------------------------------------------------------------------------
r5393 | wyldfire | 2004-06-12 07:08:26 -0400 (Sat, 12 Jun 2004) | 5 lines


Replaced a couple of g_warnings with g_messages
Display a few messages only when dbg is not zero.
Remove beep when old version is detected.

------------------------------------------------------------------------
r5392 | cbiere | 2004-06-12 05:24:51 -0400 (Sat, 12 Jun 2004) | 3 lines

Use a hash table to map downloads to GtkTreeIters.
Tagged many strings as translatable.

------------------------------------------------------------------------
r5391 | cbiere | 2004-06-12 05:04:14 -0400 (Sat, 12 Jun 2004) | 2 lines

Restrict the ctype is* functions to ASCII characters.

------------------------------------------------------------------------
r5390 | cbiere | 2004-06-12 05:03:03 -0400 (Sat, 12 Jun 2004) | 3 lines

w_tree_iter_copy():
	Use a struct copy instead of memcpy.

------------------------------------------------------------------------
r5389 | cbiere | 2004-06-12 05:00:58 -0400 (Sat, 12 Jun 2004) | 2 lines

Don't use ``int'' atoms as keys for hash tables, use the int value itself.

------------------------------------------------------------------------
r5388 | cbiere | 2004-06-12 02:17:14 -0400 (Sat, 12 Jun 2004) | 2 lines

Removed g_message() which was only used for temporary debugging purposes.

------------------------------------------------------------------------
r5387 | cbiere | 2004-06-11 16:41:06 -0400 (Fri, 11 Jun 2004) | 6 lines

unique_filename():
	Forgot the parentheses, so that the filename was truncated by 2
	characters at the end.
	Added assertions.
	Don't insert a directory separator if path already ends with one.

------------------------------------------------------------------------
r5386 | cbiere | 2004-06-11 14:13:34 -0400 (Fri, 11 Jun 2004) | 2 lines

Ignore Gtk and Glib messages per default.

------------------------------------------------------------------------
r5385 | cbiere | 2004-06-10 22:58:52 -0400 (Thu, 10 Jun 2004) | 3 lines

http_send_status():
	Print ``status_msg'' instead of the format string ``reason''.

------------------------------------------------------------------------
r5384 | cbiere | 2004-06-10 19:52:33 -0400 (Thu, 10 Jun 2004) | 7 lines

get_file_to_upload_from_index():
	Fixed bug introduced in rev. 1.209: Increasing ``buf'' by one isn't a
	micro-optimization at all. The slash '/' must to skipped so that
	``basename'' points really to the basename of the shared file. Since
	``buf'' wasn't increased, a '/' was prepended. Therefore requests by
	name (luckily fairly seldom nowadays) failed everytime.

------------------------------------------------------------------------
r5383 | cbiere | 2004-06-10 19:48:04 -0400 (Thu, 10 Jun 2004) | 3 lines

Fixed bug in previous commit. ``name'' isn't persistent. found->file_name
must point relative to the string atom found->path_name to be persistent.

------------------------------------------------------------------------
r5382 | cbiere | 2004-06-10 19:03:33 -0400 (Thu, 10 Jun 2004) | 6 lines

gtk_widget_fix_width():
	Initialize ``max_width'' to 0 because, in theory, it might not get
	initialized in the loop below.
	isdigit() must not be passed an argument which is not in the
	range of unsigned char (or equal to EOF).

------------------------------------------------------------------------
r5381 | cbiere | 2004-06-10 18:48:11 -0400 (Thu, 10 Jun 2004) | 3 lines

Replaced explicit slashes by G_DIR_SEPARATOR resp. G_DIR_SEPARATOR_S where
used for filesystem pathnames.

------------------------------------------------------------------------
r5380 | cbiere | 2004-06-10 17:53:36 -0400 (Thu, 10 Jun 2004) | 8 lines

shared_dirs_free():
	Use a for-loop like everywhere else.
Use G_DIR_SEPARATOR_S instead of a harcoded "/".
Replaced some g_free() with G_FREE_NULL().
Check only files for trailers which would actually be shared not every file
	in the directory.
Use ``sl'' instead of ``l'' for single-linked list.

------------------------------------------------------------------------
r5379 | cbiere | 2004-06-10 17:42:03 -0400 (Thu, 10 Jun 2004) | 3 lines

Use unsigned for SHA1_MAGIC.
Use delta_time().

------------------------------------------------------------------------
r5378 | cbiere | 2004-06-10 17:41:16 -0400 (Thu, 10 Jun 2004) | 5 lines

hcache_col_labels:
	Added const-qualifier and tagged strings as translatable.
	Added parentheses around terminating -1 for gtk_list_store_set()
	to prevent havoc from due to a potentially missing comma.

------------------------------------------------------------------------
r5377 | cbiere | 2004-06-10 17:38:46 -0400 (Thu, 10 Jun 2004) | 6 lines

Added const-qualifier to ``msg_stats_label''.
gnet_stats_update_horizon():
	Corrected format of date in comment.
	Use early return instead of conditional sub-block.
	Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5376 | cbiere | 2004-06-10 17:32:33 -0400 (Thu, 10 Jun 2004) | 17 lines

Use delta_time().
Several type changes WRT signed vs. unsigned et similar.
download_push_ack():
	Call gui_update_download_host(d) so that the "private" or invalid
	address is replaced with the actual values of the incoming connection.
download_get_hostname():
	Added in favour of download_gui_get_hostname(), this version does
	also try to get the IP address and TCP port from the underlying
	socket (if created) to provide more useful information.
void download_move_done():
void download_verify_done():
	Use time_t for time stamps not for time differences!
extract_retry_after():
	Replaced sscanf() with gm_atoul().
download_total_progress():
	Simplified to use less float operations.

------------------------------------------------------------------------
r5375 | cbiere | 2004-06-10 17:25:38 -0400 (Thu, 10 Jun 2004) | 2 lines

Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5374 | cbiere | 2004-06-10 17:23:51 -0400 (Thu, 10 Jun 2004) | 4 lines

Use delta_time().
Use unsigned for CPROXY_MAGIC.
Use is_ascii_blank() instead of explicitely checking for <space> and <tab>.

------------------------------------------------------------------------
r5373 | cbiere | 2004-06-10 17:21:45 -0400 (Thu, 10 Jun 2004) | 3 lines

Fixed warnings regarding signed vs. unsigned comparisons.
Use delta_time().

------------------------------------------------------------------------
r5372 | cbiere | 2004-06-10 17:19:57 -0400 (Thu, 10 Jun 2004) | 5 lines

Fixed warnings regarding signed vs. unsigned comparisons.
Use delta_time().
Don't check if a difference > 0, check whether one is greater than the other.
Changed type of (struct gnutella_node).id from gint32 to guint32.

------------------------------------------------------------------------
r5371 | cbiere | 2004-06-10 17:17:03 -0400 (Thu, 10 Jun 2004) | 2 lines

Fixed a warning regarding signed vs. unsigned comparison.

------------------------------------------------------------------------
r5370 | cbiere | 2004-06-10 17:15:22 -0400 (Thu, 10 Jun 2004) | 3 lines

Use delta_time().
Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5369 | cbiere | 2004-06-10 17:14:10 -0400 (Thu, 10 Jun 2004) | 10 lines

short_time():
short_uptime():
	Changed type of parameter from time_t to gint. Use time_t for
	time stamps not for time differences!
strcasestr():
	Use proper types.
unique_filename():
	Use GM_STRCONCAT_NULL() instead of g_strconcat().
	Simplified the extra_bytes preparation a little.

------------------------------------------------------------------------
r5368 | cbiere | 2004-06-10 17:09:16 -0400 (Thu, 10 Jun 2004) | 6 lines

Fixed warnings regarding signed vs. unsigned comparisons.
st_search():
	``len'' was possibly not guaranteed to be > 1 so that the integer
	underrun could have caused a pretty long loop.
	Replaced isspace() with is_ascii_space().

------------------------------------------------------------------------
r5367 | cbiere | 2004-06-10 17:04:58 -0400 (Thu, 10 Jun 2004) | 3 lines

Use delta_time().
log_init() catch Gtk and GLib stuff, too.

------------------------------------------------------------------------
r5366 | cbiere | 2004-06-10 17:03:37 -0400 (Thu, 10 Jun 2004) | 5 lines

Replaced const string pointers by const string literals.
There's no need to decrease the buffer size by one for fgets().
Check errno as well when using strtoul().
Replaced isspace() with is_ascii_space().

------------------------------------------------------------------------
r5365 | cbiere | 2004-06-10 17:02:31 -0400 (Thu, 10 Jun 2004) | 5 lines

Replaced const string pointers by const string literals.
There's no need to decrease the buffer size by one for fgets().
Check errno as well when using strtoul.
Replaced isspace() with is_ascii_space().

------------------------------------------------------------------------
r5364 | cbiere | 2004-06-10 17:00:22 -0400 (Thu, 10 Jun 2004) | 6 lines

Fixed warnings regarding signed vs. unsigned comparisons.
Use ``sl'' instead of ``l'' for single-linked lists.
Added const-qualifiers to static string arrays.
Use unsigned for http_async->magic.
Use delta_time().

------------------------------------------------------------------------
r5363 | cbiere | 2004-06-10 16:57:40 -0400 (Thu, 10 Jun 2004) | 2 lines

Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5362 | cbiere | 2004-06-10 16:56:21 -0400 (Thu, 10 Jun 2004) | 3 lines

header_features_generate():
	Check parameters ``len'' and ``rw'' more strictly.

------------------------------------------------------------------------
r5361 | cbiere | 2004-06-10 16:55:03 -0400 (Thu, 10 Jun 2004) | 6 lines

download_gui_get_hostname():
	Removed. Use download_get_hostname() instead.
on_popup_downloads_selection_get():
on_popup_downloads_selection_clear_event():
	Moved to GTK1 specific code since the GTK2 code uses GtkClipboard now.

------------------------------------------------------------------------
r5360 | cbiere | 2004-06-10 16:53:26 -0400 (Thu, 10 Jun 2004) | 4 lines

on_popup_downloads_selection_get():
on_popup_downloads_selection_clear_event():
	Moved to GTK1 specific code since the GTK2 code uses GtkClipboard now.

------------------------------------------------------------------------
r5359 | cbiere | 2004-06-10 16:51:13 -0400 (Thu, 10 Jun 2004) | 3 lines

Use download_get_hostname() instead of download_gui_get_hostname().
Use delta_time().

------------------------------------------------------------------------
r5358 | cbiere | 2004-06-10 16:49:23 -0400 (Thu, 10 Jun 2004) | 4 lines

dl_action():
	Forgot the not operator in a place so that the variable ``d'' wasn't
	checked against NULL.

------------------------------------------------------------------------
r5357 | cbiere | 2004-06-10 16:39:15 -0400 (Thu, 10 Jun 2004) | 10 lines

Use delta_time().
fgets():
	There's no need to decrease the buffer size by one to make room for
	a NUL-byte.
dmesh_ban_retrieve();
	Check errno as well when using strtoul.
dmesh_alternate_location():
dmesh_add():
	Use time_t for time stamps.

------------------------------------------------------------------------
r5356 | graaff | 2004-06-10 16:08:09 -0400 (Thu, 10 Jun 2004) | 3 lines

Also take complete files into account when displaying the blue line in
the visual progress indicator, not just partial files.

------------------------------------------------------------------------
r5355 | wyldfire | 2004-06-10 14:19:13 -0400 (Thu, 10 Jun 2004) | 3 lines


Removed unconditional debugging messages.

------------------------------------------------------------------------
r5354 | wyldfire | 2004-06-10 14:17:38 -0400 (Thu, 10 Jun 2004) | 3 lines


Minor adjustments to the make-uptime-width-fixed code.

------------------------------------------------------------------------
r5353 | wyldfire | 2004-06-10 13:52:42 -0400 (Thu, 10 Jun 2004) | 3 lines


[Gtk1] [Gtk2] Hopefully fixed jumping labels for Cyclonus.

------------------------------------------------------------------------
r5352 | cbiere | 2004-06-10 04:03:10 -0400 (Thu, 10 Jun 2004) | 4 lines

getline_read():
	Fixed warning regarding signed vs. unsigned comparison.
	Added assertion to catch integer overflows.

------------------------------------------------------------------------
r5351 | cbiere | 2004-06-10 04:01:11 -0400 (Thu, 10 Jun 2004) | 4 lines

struct dl_file_info:
	Changed types of ``cha1_elapsed'' and ``copy_elapsed'' from
	time_t to guint. Use time_t for timestamps not time differences!

------------------------------------------------------------------------
r5350 | cbiere | 2004-06-10 03:57:50 -0400 (Thu, 10 Jun 2004) | 3 lines

struct search_queue: Changed type of ``count'' from gint to guint.
Added assertions before decreasing sq->count to ensure it's > 0.

------------------------------------------------------------------------
r5349 | cbiere | 2004-06-10 03:55:18 -0400 (Thu, 10 Jun 2004) | 2 lines

Fixed warning regarding signed vs. unsigned comparison.

------------------------------------------------------------------------
r5348 | cbiere | 2004-06-10 03:54:29 -0400 (Thu, 10 Jun 2004) | 3 lines

Fixed warnings regarding signed vs. unsigned comparisons.
Use delta_time().

------------------------------------------------------------------------
r5347 | cbiere | 2004-06-10 03:41:30 -0400 (Thu, 10 Jun 2004) | 3 lines

whitelist_connect():
	Changed return type from gint to guint.

------------------------------------------------------------------------
r5346 | cbiere | 2004-06-10 03:39:29 -0400 (Thu, 10 Jun 2004) | 3 lines

Use delta_time().
Use time_t for timestamps not for time differences!

------------------------------------------------------------------------
r5345 | cbiere | 2004-06-09 17:02:28 -0400 (Wed, 09 Jun 2004) | 3 lines

Updated to use ISO 8601 dates.
Added step for updating gwcache.boot.

------------------------------------------------------------------------
r5344 | graaff | 2004-06-09 15:33:41 -0400 (Wed, 09 Jun 2004) | 4 lines

Get width and height for visual progress indicator directly from
widget instead of relying on configure signal.
Remove unused offset variables and unused defines.

------------------------------------------------------------------------
r5343 | cbiere | 2004-06-09 14:12:59 -0400 (Wed, 09 Jun 2004) | 3 lines

GM_STRCONCAT_NULL():
Removed trailing semi-colon from macro definition.

------------------------------------------------------------------------
r5342 | cbiere | 2004-06-09 14:05:31 -0400 (Wed, 09 Jun 2004) | 6 lines

GTK_LIST_STORE_SET():
GTK_TREE_STORE_SET():
GTK_TREE_MODEL_GET():
	Added wrapper macros for the respective lower-case GTK+ functions
	to automagically append a terminating (-1) to the list of parameters.

------------------------------------------------------------------------
r5341 | cbiere | 2004-06-09 14:02:22 -0400 (Wed, 09 Jun 2004) | 3 lines

Added macro GM_STRCONCAT_NULL() which is a wrapper for g_strconcat() and
	appends a terminating NULL automagically.

------------------------------------------------------------------------
r5340 | cbiere | 2004-06-09 14:00:50 -0400 (Wed, 09 Jun 2004) | 4 lines

hsep_fire_global_table_changed():
	Use event_subscriber_active() instead of event_subscriber_counter(),
	we don't care about the exact number here and the latter is O(n).

------------------------------------------------------------------------
r5339 | cbiere | 2004-06-09 13:58:34 -0400 (Wed, 09 Jun 2004) | 5 lines

event_subscriber_count():
	Changed return type from guint32 to guint.
event_subscriber_active():
	Added. Returns whether there are any subscribers.

------------------------------------------------------------------------
r5334 | trancetip | 2004-06-09 04:27:11 -0400 (Wed, 09 Jun 2004) | 3 lines

Changed code so that the horizon stats table is only updated if the values
have changed.

------------------------------------------------------------------------
r5333 | trancetip | 2004-06-09 03:43:48 -0400 (Wed, 09 Jun 2004) | 3 lines

Added hsep_has_global_table_changed(since). Optimized event triggering
code.

------------------------------------------------------------------------
r5332 | trancetip | 2004-06-09 03:24:44 -0400 (Wed, 09 Jun 2004) | 4 lines

Added event_subscriber_count(evt). This can be used to check if any
subscribers are present for events that need preparation before being
fired.

------------------------------------------------------------------------
r5331 | cbiere | 2004-06-08 18:48:59 -0400 (Tue, 08 Jun 2004) | 3 lines

Re-implemented the "Copy URL to clipboard" feature of the downloads pane;
	the old code seemed to be broken.

------------------------------------------------------------------------
r5330 | cbiere | 2004-06-08 18:45:46 -0400 (Tue, 08 Jun 2004) | 5 lines

prop_parse_.*():
	Declare static, these are not used anywhere else.
	Added parameter ``name'' so one can see which property causes a
	problem.

------------------------------------------------------------------------
r5329 | trancetip | 2004-06-08 17:48:34 -0400 (Tue, 08 Jun 2004) | 2 lines

Removed manual padding from horizon stats labels.

------------------------------------------------------------------------
r5328 | trancetip | 2004-06-08 17:24:39 -0400 (Tue, 08 Jun 2004) | 2 lines

Translatable strings are now translated when used.

------------------------------------------------------------------------
r5327 | cbiere | 2004-06-08 17:07:50 -0400 (Tue, 08 Jun 2004) | 2 lines

Removed superfluous alignments which don't work with GTK 2.4.x anyway.

------------------------------------------------------------------------
r5326 | graaff | 2004-06-08 15:03:55 -0400 (Tue, 08 Jun 2004) | 2 lines

Update comments to doxygen style.

------------------------------------------------------------------------
r5325 | cbiere | 2004-06-08 14:57:43 -0400 (Tue, 08 Jun 2004) | 5 lines

fi_add_listener():
fi_remove_listener():
	Changed type of callback from GCallback to fi_listener_t to take
	advantage of compile-time type checking.

------------------------------------------------------------------------
r5324 | cbiere | 2004-06-08 14:56:04 -0400 (Tue, 08 Jun 2004) | 3 lines

Fixed warnings regarding signed vs. unsigned comparisons (for
stricter assertion checks.

------------------------------------------------------------------------
r5323 | cbiere | 2004-06-08 14:54:48 -0400 (Tue, 08 Jun 2004) | 3 lines

Added const-qualifiers where appropriate.
Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5322 | cbiere | 2004-06-08 14:53:12 -0400 (Tue, 08 Jun 2004) | 5 lines

gm_snprintf():
gm_vsnprintf():
	Fixed warnings regarding signed vs. unsigned comparisons for
	stricter assertion checks.

------------------------------------------------------------------------
r5321 | cbiere | 2004-06-08 14:51:20 -0400 (Tue, 08 Jun 2004) | 8 lines

fi_gui_init():
	Removed bad GCallback casts.
	Set header title strings to translatable.
fi_gui_shutdown():
	Removed bad GCallback casts.
	Update the properties for the columns widths at shutdown time only.
	There's no need to catch every single change.

------------------------------------------------------------------------
r5320 | cbiere | 2004-06-08 14:47:42 -0400 (Tue, 08 Jun 2004) | 3 lines

tok_generate():
	Replaced g_strdup_printf() with the simpler g_strconcat().

------------------------------------------------------------------------
r5319 | cbiere | 2004-06-08 14:46:16 -0400 (Tue, 08 Jun 2004) | 6 lines

vp_gui_init():
vp_gui_shutdown():
	Removed (bad) GCallback casts to take advantage of compile-time type
	checking.
	Removed superfluous src_listener_t cast for vp_update_ranges.

------------------------------------------------------------------------
r5318 | cbiere | 2004-06-08 14:43:18 -0400 (Tue, 08 Jun 2004) | 4 lines

Removed bad GCallback casts.
Update the properties for the columns widths at shutdown time only. There's
no need to catch every single change.

------------------------------------------------------------------------
r5317 | cbiere | 2004-06-08 14:41:22 -0400 (Tue, 08 Jun 2004) | 6 lines

fi_add_listener():
fi_remove_listener():
	Changed type of callback ``cb'' to ``fi_listener_t'' to allow
	compile-time type checking.
	Added a few casts due to signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5316 | cbiere | 2004-06-08 14:38:46 -0400 (Tue, 08 Jun 2004) | 2 lines

struct bgtask: Changed ``magic'' from gint to guint.

------------------------------------------------------------------------
r5315 | cbiere | 2004-06-08 14:35:03 -0400 (Tue, 08 Jun 2004) | 13 lines

Hostcache pane:
	Removed superfluous and bad alignment from treeview.
	Set shadow to "in" for treeview.
Downloads pane:
	Set shadow to "in" for treeviews.
	Added viewport around "Detail information" because the contents
	were drawn out of bounds if the vpane was too small.
	Replaced "in" shadows around labels with "edged in" shadows.
Search results pane:
	Added viewport around "Information" because the contents
	were drawn out of bounds if the vpane was too small.
	Replaced "in" shadows around labels with "edged in" shadows.

------------------------------------------------------------------------
r5314 | trancetip | 2004-06-08 09:10:19 -0400 (Tue, 08 Jun 2004) | 2 lines

Created.

------------------------------------------------------------------------
r5313 | trancetip | 2004-06-08 08:35:55 -0400 (Tue, 08 Jun 2004) | 2 lines

Added horizontal padding to horizon stats labels.

------------------------------------------------------------------------
r5312 | cbiere | 2004-06-08 08:09:07 -0400 (Tue, 08 Jun 2004) | 3 lines

file_config_open():
	Forgot to prepend ``new_ext'' with a dot (".").

------------------------------------------------------------------------
r5311 | cbiere | 2004-06-08 08:00:24 -0400 (Tue, 08 Jun 2004) | 2 lines

Use delta_time().

------------------------------------------------------------------------
r5310 | cbiere | 2004-06-08 07:54:17 -0400 (Tue, 08 Jun 2004) | 4 lines

gnet_stats_gui_horizon_update():
	Fixed warnings regarding signed vs. unsigned comparison.
	Added assertion.

------------------------------------------------------------------------
r5309 | cbiere | 2004-06-08 07:42:59 -0400 (Tue, 08 Jun 2004) | 11 lines

Added const-qualifiers to ``names'' and made strings translatable.
Dito ``host_type_names''.
Minor code style fixes.
Restructered switch-blocks to catch more potential errors at compile-time
	and run-time.
Cast hcache_type_t to guint for assertions for stronger checks.
hcache_get_metadata():
	Don't cast return values unless really necessary.
hcache_find_nearby():
	Added missing break-statements.

------------------------------------------------------------------------
r5308 | nonamer | 2004-06-08 07:25:22 -0400 (Tue, 08 Jun 2004) | 2 lines

Adjusted 'roadmap' a little bit with one extra release

------------------------------------------------------------------------
r5307 | cbiere | 2004-06-08 07:02:54 -0400 (Tue, 08 Jun 2004) | 2 lines

Some platforms seem to be missing isblank() or require special quirks for it.

------------------------------------------------------------------------
r5306 | cbiere | 2004-06-08 06:54:45 -0400 (Tue, 08 Jun 2004) | 5 lines

search_stats_notify_whole():
	Fixed severe bug: Parameter list for g_strconcat wasn't terminated
	by NULL.
	Use gm_snprintf() instead, a fixed buffer should be sufficient here.

------------------------------------------------------------------------
r5305 | cbiere | 2004-06-08 06:46:11 -0400 (Tue, 08 Jun 2004) | 3 lines

unique_filename():
	Use g_strconcat() instead of g_strdup_printf().

------------------------------------------------------------------------
r5304 | wyldfire | 2004-06-08 06:41:00 -0400 (Tue, 08 Jun 2004) | 3 lines


Moved hostcache stuff to gnet_hcache.h.

------------------------------------------------------------------------
r5303 | wyldfire | 2004-06-08 06:38:19 -0400 (Tue, 08 Jun 2004) | 3 lines


Started with doxygen support.

------------------------------------------------------------------------
r5302 | wyldfire | 2004-06-08 06:37:26 -0400 (Tue, 08 Jun 2004) | 2 lines

no comment

------------------------------------------------------------------------
r5301 | wyldfire | 2004-06-08 06:36:44 -0400 (Tue, 08 Jun 2004) | 3 lines


Moved hostcache stuff to gnet_hcache.h

------------------------------------------------------------------------
r5300 | cbiere | 2004-06-08 06:36:01 -0400 (Tue, 08 Jun 2004) | 2 lines

Use make_pathname().

------------------------------------------------------------------------
r5299 | wyldfire | 2004-06-08 06:35:11 -0400 (Tue, 08 Jun 2004) | 4 lines


Manually added new files. Somebody who can regenerate the build files and
  known about the package files has to double-check this.

------------------------------------------------------------------------
r5298 | wyldfire | 2004-06-08 06:32:56 -0400 (Tue, 08 Jun 2004) | 6 lines


Changed large parts of the host cache code. We now have seven host caches
  and we can get stats for them.
Removed "unstable ip" code from nodes.c. This is now handled in hcache.c.
Started with doxygen support.

------------------------------------------------------------------------
r5297 | wyldfire | 2004-06-08 06:31:36 -0400 (Tue, 08 Jun 2004) | 3 lines


Changes init, shutdown and close hooks to work with new hostcache code.

------------------------------------------------------------------------
r5296 | wyldfire | 2004-06-08 06:30:57 -0400 (Tue, 08 Jun 2004) | 3 lines


Adjusted for modifications made to nodes.c

------------------------------------------------------------------------
r5295 | wyldfire | 2004-06-08 06:30:04 -0400 (Tue, 08 Jun 2004) | 4 lines


[Gtk1] [Gtk2] Made quick-connection pool size configurable.
[Gtk1] [Gtk2] Added hostcache panel.

------------------------------------------------------------------------
r5294 | wyldfire | 2004-06-08 06:28:04 -0400 (Tue, 08 Jun 2004) | 3 lines


Hostcaches are now saved in hcache_shutdown().

------------------------------------------------------------------------
r5293 | wyldfire | 2004-06-08 06:27:20 -0400 (Tue, 08 Jun 2004) | 5 lines


Pongs from hosts that are marked bad in the host cache are no longer added
  to the recent pong cache.
Adjusted to work with new hostcache code.

------------------------------------------------------------------------
r5292 | wyldfire | 2004-06-08 06:26:48 -0400 (Tue, 08 Jun 2004) | 4 lines


Removed "unstable ip" code from nodes.c. This is now handled in hcache.c.
Adjusted to work with new hostcache code.

------------------------------------------------------------------------
r5291 | wyldfire | 2004-06-08 06:25:33 -0400 (Tue, 08 Jun 2004) | 3 lines


[Gtk1] [Gtk2] Added hostcache panel.

------------------------------------------------------------------------
r5290 | wyldfire | 2004-06-08 06:25:04 -0400 (Tue, 08 Jun 2004) | 5 lines


Adjusted default hostcache capacities.
Made quick-connection pool size configurable.
Changed large parts of the host cache code.

------------------------------------------------------------------------
r5289 | wyldfire | 2004-06-08 06:23:08 -0400 (Tue, 08 Jun 2004) | 3 lines


Moved host cache stuff to gnet_hcache.h.

------------------------------------------------------------------------
r5288 | wyldfire | 2004-06-08 06:20:26 -0400 (Tue, 08 Jun 2004) | 6 lines


Moved host_hash, host_eq and host_cmp as public functions to hosts.c.
Changed algorithm for quick-connecting to utilize only up to
  PROP_QUICK_CONNECT_POOL_SIZE connections instead of using
  them additionally to the maximum number of connections.

------------------------------------------------------------------------
r5287 | wyldfire | 2004-06-08 06:19:10 -0400 (Tue, 08 Jun 2004) | 3 lines


[Gtk1] [Gtk2] Added hostcache panel.

------------------------------------------------------------------------
r5286 | wyldfire | 2004-06-08 06:17:41 -0400 (Tue, 08 Jun 2004) | 3 lines


Added file_config_open_append to file.c. Needed by new hostcache code.

------------------------------------------------------------------------
r5285 | wyldfire | 2004-06-08 06:13:38 -0400 (Tue, 08 Jun 2004) | 3 lines


[Gtk1] [Gtk2] Added hostcache panel.

------------------------------------------------------------------------
r5284 | wyldfire | 2004-06-08 06:07:34 -0400 (Tue, 08 Jun 2004) | 3 lines


[Gtk1] [Gtk2] Minor layout fixes which were not in the last commit.

------------------------------------------------------------------------
r5283 | wyldfire | 2004-06-08 06:03:06 -0400 (Tue, 08 Jun 2004) | 3 lines


Made host_is_valid(ip,port) a define. The function is now ip_is_valid(ip).

------------------------------------------------------------------------
r5282 | trancetip | 2004-06-08 06:00:32 -0400 (Tue, 08 Jun 2004) | 2 lines

Translatable strings now really *are* translated.

------------------------------------------------------------------------
r5281 | wyldfire | 2004-06-08 05:59:12 -0400 (Tue, 08 Jun 2004) | 3 lines


Removed superflous "extern" qualifiers.

------------------------------------------------------------------------
r5280 | trancetip | 2004-06-08 05:54:03 -0400 (Tue, 08 Jun 2004) | 2 lines

Translatable strings now really *are* translated.

------------------------------------------------------------------------
r5279 | cbiere | 2004-06-08 05:03:23 -0400 (Tue, 08 Jun 2004) | 3 lines

Header titles were only *marked* to be translatable. Now, they're are
really translated (if translations are provided).

------------------------------------------------------------------------
r5278 | trancetip | 2004-06-08 04:16:59 -0400 (Tue, 08 Jun 2004) | 3 lines

[Gtk1] [Gtk2] Added code that updates the horizon stats labels in the
statusbar.

------------------------------------------------------------------------
r5277 | cbiere | 2004-06-08 04:01:20 -0400 (Tue, 08 Jun 2004) | 9 lines

Use make_pathname().
ensure_unicity():
	Don't use ``fd'' for FILE streams, use it for file descriptors only.
	Catch errors from fgets.
	Replaced scanf() with gm_atoul().
save_pid():
	Don't use ``fd'' for FILE streams, use it for file descriptors only.
	Use gulong instead of gint for the PID.

------------------------------------------------------------------------
r5276 | cbiere | 2004-06-08 03:57:14 -0400 (Tue, 08 Jun 2004) | 2 lines

Added make_pathname().

------------------------------------------------------------------------
r5275 | cbiere | 2004-06-07 23:20:15 -0400 (Mon, 07 Jun 2004) | 2 lines

Added const-qualifier to return type of file_info_readable_filename().

------------------------------------------------------------------------
r5274 | cbiere | 2004-06-07 23:18:26 -0400 (Mon, 07 Jun 2004) | 3 lines

ignore_add_filesize():
	Added const-qualifier to parameter ``file''.

------------------------------------------------------------------------
r5273 | cbiere | 2004-06-07 23:15:43 -0400 (Mon, 07 Jun 2004) | 3 lines

d_start():
	Added const-qualifier to variable ``name''.

------------------------------------------------------------------------
r5272 | cbiere | 2004-06-07 23:13:48 -0400 (Mon, 07 Jun 2004) | 2 lines

struct shared_file:	Added const-qualifier to member ``file_name''.

------------------------------------------------------------------------
r5271 | cbiere | 2004-06-07 23:12:15 -0400 (Mon, 07 Jun 2004) | 3 lines

Roll-back to previous version due to badly optimized GUINT32_SWAP_LE_BE()
in GLib 1.2.x.

------------------------------------------------------------------------
r5270 | cbiere | 2004-06-07 22:46:55 -0400 (Mon, 07 Jun 2004) | 5 lines

url_escape_mask():
url_escape():
url_escape_query():
	Added const-qualifier to the ``url'' parameter.

------------------------------------------------------------------------
r5269 | cbiere | 2004-06-07 22:43:37 -0400 (Mon, 07 Jun 2004) | 3 lines

[GTK2] gui_init_menu(): Condensed the code.
Joined the ``menu'' struct for GTK1 and GTK2.

------------------------------------------------------------------------
r5268 | cbiere | 2004-06-07 22:41:06 -0400 (Mon, 07 Jun 2004) | 5 lines

escape_filename():
	Added const-qualifier to the ``file'' parameter.
file_info_new_outname():
	Try to preserve the original filename extension.

------------------------------------------------------------------------
r5267 | cbiere | 2004-06-07 20:03:53 -0400 (Mon, 07 Jun 2004) | 9 lines

Removed now unncessary inclusion of <ctype.h>.
Added const-qualifier to return type of file_info_readable_filename().
looks_like_urn():
	Replaced isalnum() with is_ascii_alnum().
	Removed superfluous check for isspace() and underscore.
escape_filename():
	Replaced iscntrl() with is_ascii_cntrl() because the former would
	break the possible UTF-8 encoding depending on the used locale.

------------------------------------------------------------------------
r5266 | cbiere | 2004-06-07 19:55:14 -0400 (Mon, 07 Jun 2004) | 3 lines

Added const-qualifier to ``d_file_name''. Override const for
lazy_locale_to_utf8() which won't touch the string.

------------------------------------------------------------------------
r5265 | cbiere | 2004-06-07 19:52:50 -0400 (Mon, 07 Jun 2004) | 4 lines

download_gui_add():
	Added const-qualifier to ``titles''. Override const for
	gtk_ctree_insert_node which won't touch the strings.

------------------------------------------------------------------------
r5264 | cbiere | 2004-06-07 19:48:15 -0400 (Mon, 07 Jun 2004) | 10 lines

Added some const-qualifiers.
create_download():
	Corrected comment: 0 -> URN_INDEX.
check_push_proxies():
	Don't accept private IP addresses as push proxy.
download_send_request():
	Check whether the download is visible in the GUI and add it if not.
build_url_from_download():
	Use the urn:sha1 in any case if available.

------------------------------------------------------------------------
r5263 | cbiere | 2004-06-07 19:40:47 -0400 (Mon, 07 Jun 2004) | 4 lines

on_button_hostcache_clear_bad_clicked():
on_clist_hcache_resize_column():
	[GTK1] Added shallow implementations to make the code compile.

------------------------------------------------------------------------
r5262 | cbiere | 2004-06-07 19:38:18 -0400 (Mon, 07 Jun 2004) | 3 lines

Added some const-qualifiers.
[GTK1] gui_init_menu(): Condensed the code to set up the tree menu.

------------------------------------------------------------------------
r5261 | cbiere | 2004-06-07 19:34:40 -0400 (Mon, 07 Jun 2004) | 3 lines

Added filename extension to default set:
	m4a - MPEG-4 Audio container

------------------------------------------------------------------------
r5260 | trancetip | 2004-06-07 18:11:33 -0400 (Mon, 07 Jun 2004) | 2 lines

Added missing call to hsep_close().

------------------------------------------------------------------------
r5259 | trancetip | 2004-06-07 17:55:42 -0400 (Mon, 07 Jun 2004) | 2 lines

Made some strings translatable.

------------------------------------------------------------------------
r5258 | trancetip | 2004-06-07 17:39:15 -0400 (Mon, 07 Jun 2004) | 3 lines

Added support for using event listeners to be informed when the global
HSEP table changes.

------------------------------------------------------------------------
r5256 | wyldfire | 2004-06-07 16:36:24 -0400 (Mon, 07 Jun 2004) | 5 lines


 * [Gtk1] [Gtk2] Added hostcache panel.
 * [Gtk1] [Gtk2] Added horizon stats labels to the statusbar.
 * [Gtk1] [Gtk2] Made quick-connection pool size configurable.

------------------------------------------------------------------------
r5255 | cbiere | 2004-06-07 16:25:01 -0400 (Mon, 07 Jun 2004) | 2 lines

Added const-qualifier to ``prop_type_str''.

------------------------------------------------------------------------
r5254 | cbiere | 2004-06-07 16:14:20 -0400 (Mon, 07 Jun 2004) | 3 lines

upload_send_giv():
	Added const-qualifier to ``file_name'' parameter.

------------------------------------------------------------------------
r5253 | cbiere | 2004-06-07 16:13:25 -0400 (Mon, 07 Jun 2004) | 4 lines

version_init():
	Catch errors from uname().
	Removed superfluous '- 1' for gm_snprintf().

------------------------------------------------------------------------
r5252 | cbiere | 2004-06-07 16:11:23 -0400 (Mon, 07 Jun 2004) | 2 lines

utf8_is_valid_string(): Added assertion to catch integer underruns.

------------------------------------------------------------------------
r5251 | cbiere | 2004-06-07 16:03:41 -0400 (Mon, 07 Jun 2004) | 3 lines

search_gui_add_record():
	Removed unused variable ``name''.

------------------------------------------------------------------------
r5250 | cbiere | 2004-06-07 16:01:26 -0400 (Mon, 07 Jun 2004) | 20 lines

Renamed ``uploads'' to ``list_uploads'' for easier searching.
upload_stop_all():
	Use ``sl'' instead of ``l'' for single-linked lists.
upload_send_giv():
	Added const qualifier to ``file_name'' parameter.
upload_error_not_found():
	Changed warning because "bad request" is too fuzzy.
get_file_to_upload_from_index():
	Added const qualifier to ``escaped''.
get_file_to_upload_from_urn():
	Refer to string literals instead of using explicit values.
	Use g_strlcpy() instead of sscanf(). It's not indentical but the
	used semantics are retained.
upload_request():
	Use ``sl'' instead of ``l'' for single-linked lists.
	Added const-qualifier to ``fpath''.
upload_kill_ip():
upload_close():
	Copy ``list_uploads'' because it must not be modified during traversal.

------------------------------------------------------------------------
r5249 | nonamer | 2004-06-07 15:47:47 -0400 (Mon, 07 Jun 2004) | 2 lines

Modified the string "has allready .. of our slots" => "would exceed"

------------------------------------------------------------------------
r5248 | cbiere | 2004-06-07 15:39:10 -0400 (Mon, 07 Jun 2004) | 7 lines

Added prop_assert() which shows the property in question along with an
	assertion failure.
Replaced g_assert() with prop_assert() where appropriate.
prop_save_to_file():
	Replaced ``_filename'' with ``filename'' and ``pathname'' with
	filename. Leading underscores shouldn't be used if not necessary.

------------------------------------------------------------------------
r5247 | cbiere | 2004-06-07 15:34:49 -0400 (Mon, 07 Jun 2004) | 4 lines

Minor code style fixes: Removed superfluous spaces.
gtk_cell_renderer_progress_render():
	Use ``int'' instead of ``float'', since the fraction is not used.

------------------------------------------------------------------------
r5246 | cbiere | 2004-06-07 15:30:44 -0400 (Mon, 07 Jun 2004) | 3 lines

parq_download_queue_ack():
	Replaced isspace() with is_ascii_space().

------------------------------------------------------------------------
r5245 | cbiere | 2004-06-07 15:28:10 -0400 (Mon, 07 Jun 2004) | 3 lines

st_insert_item():
	Added const to the string parameter.

------------------------------------------------------------------------
r5244 | cbiere | 2004-06-07 15:26:52 -0400 (Mon, 07 Jun 2004) | 3 lines

guid_random_fill():
	Slice random value down the Right Way(TM) for better quality of random.

------------------------------------------------------------------------
r5243 | nonamer | 2004-06-07 15:06:00 -0400 (Mon, 07 Jun 2004) | 6 lines

------------------------------------------------------------------------
r6 | jeroen | 2004-06-07 20:53:33 +0200 (Mon, 07 Jun 2004) | 1 line

TODO item
------------------------------------------------------------------------

------------------------------------------------------------------------
r5241 | nonamer | 2004-06-07 10:40:58 -0400 (Mon, 07 Jun 2004) | 2 lines

Updated copyright field (actually this is just a test)

------------------------------------------------------------------------
r5240 | cbiere | 2004-06-07 10:38:38 -0400 (Mon, 07 Jun 2004) | 2 lines

Replaced swap_ip() by SWAP_IP() and use GUINT32_SWAP_LE_BE(x).

------------------------------------------------------------------------
r5239 | cbiere | 2004-06-07 10:37:09 -0400 (Mon, 07 Jun 2004) | 2 lines

Fixed grammar mistakes:	can not -> cannot.

------------------------------------------------------------------------
r5238 | trancetip | 2004-06-07 10:37:08 -0400 (Mon, 07 Jun 2004) | 2 lines

Made Gtk1 navigator strings translatable.

------------------------------------------------------------------------
r5237 | trancetip | 2004-06-07 10:10:56 -0400 (Mon, 07 Jun 2004) | 2 lines

Cleaned up to-do list.

------------------------------------------------------------------------
r5236 | trancetip | 2004-06-06 16:07:14 -0400 (Sun, 06 Jun 2004) | 2 lines

Added German translation (still needs a little fine-tuning).

------------------------------------------------------------------------
r5235 | cbiere | 2004-06-05 12:28:32 -0400 (Sat, 05 Jun 2004) | 3 lines

Toolbar currently removed because Glade 2.6.0 creates source code
for it which depends on GTK+ 2.4.0.

------------------------------------------------------------------------
r5234 | cbiere | 2004-06-05 00:10:45 -0400 (Sat, 05 Jun 2004) | 3 lines

shell_exec_horizon():
	Refer to the size of the array instead of a defined value.

------------------------------------------------------------------------
r5233 | cbiere | 2004-06-05 00:09:09 -0400 (Sat, 05 Jun 2004) | 2 lines

sq_process(): Use delta_time().

------------------------------------------------------------------------
r5232 | cbiere | 2004-06-05 00:07:29 -0400 (Sat, 05 Jun 2004) | 4 lines

Declared the header titles translatable.
Use a different font style for the flags (should be fixed size).
Use delta_time().

------------------------------------------------------------------------
r5231 | cbiere | 2004-06-05 00:03:38 -0400 (Sat, 05 Jun 2004) | 6 lines

Declared a couple of strings translatable.
Replaced inclusion of "config.h" with "common.h".
Deskewed gnet_stats_gui_init().
Replaced a couple of explicit values by enums or similar.
gnet_stats_update_horizon(): Update all columns at once.

------------------------------------------------------------------------
r5230 | cbiere | 2004-06-04 23:57:51 -0400 (Fri, 04 Jun 2004) | 3 lines

[GTK2] Added column "Extension" to show the file extension for the
	returned results (especially nice for sorting by).

------------------------------------------------------------------------
r5229 | cbiere | 2004-06-04 23:56:46 -0400 (Fri, 04 Jun 2004) | 3 lines

[GTK2] Added column "Extension" to show the file extension for the returned
	results (especially nice for sorting by).

------------------------------------------------------------------------
r5228 | cbiere | 2004-06-04 23:53:33 -0400 (Fri, 04 Jun 2004) | 5 lines

Use the value of enums to discover certain values instead of explicit values.
Added enum types ``c_horizon_t'' and ``c_gs_t'' for the respective column
	counters.
[GTK2] Added "Extension" column for the search results.

------------------------------------------------------------------------
r5227 | cbiere | 2004-06-04 23:50:15 -0400 (Fri, 04 Jun 2004) | 4 lines

Include "gui.h" for diverse enums.
horizon_stat_str(): Use a dedicated enum type for the column parameter
	instead of a plain gint.

------------------------------------------------------------------------
r5226 | cbiere | 2004-06-04 23:48:12 -0400 (Fri, 04 Jun 2004) | 6 lines

horizon_stat_str():
	Use enums instead of explicit values.
	Use one dedicated static buffer per column so it's possible to update
	all columns of a TreeModel at once without having to copy each
	value into an intermediate buffer.

------------------------------------------------------------------------
r5225 | cbiere | 2004-06-04 23:44:29 -0400 (Fri, 04 Jun 2004) | 2 lines

search_gui_compare_records(): Declare static, it's not used elsewhere.

------------------------------------------------------------------------
r5224 | cbiere | 2004-06-04 23:43:37 -0400 (Fri, 04 Jun 2004) | 2 lines

get_results_set(): Added casts to suppress warnings.

------------------------------------------------------------------------
r5223 | cbiere | 2004-06-04 23:42:15 -0400 (Fri, 04 Jun 2004) | 3 lines

Use delta_time().
node_process_handshake_header(): Corrected grammar mistake.

------------------------------------------------------------------------
r5222 | cbiere | 2004-06-04 23:39:35 -0400 (Fri, 04 Jun 2004) | 3 lines

get_width():
	Added casts to suppress warnings.

------------------------------------------------------------------------
r5221 | cbiere | 2004-06-04 21:00:15 -0400 (Fri, 04 Jun 2004) | 4 lines

Added rules:
	Don't use C++ style comments.
	Align `case' with `switch'.

------------------------------------------------------------------------
r5220 | cbiere | 2004-06-04 20:44:31 -0400 (Fri, 04 Jun 2004) | 4 lines

Modified the toolbar so that the created source code shouldn't depend on
GTK+ 2.4.0 i.e., GTK+ 2.2.x should be sufficient. This means that the
toolbar style is fixed and cannot be changed.

------------------------------------------------------------------------
r5219 | trancetip | 2004-06-04 17:45:10 -0400 (Fri, 04 Jun 2004) | 2 lines

Added horizon stats table to Gtk2 GUI.

------------------------------------------------------------------------
r5218 | trancetip | 2004-06-04 17:39:06 -0400 (Fri, 04 Jun 2004) | 2 lines

Added update code for horizon stats table.

------------------------------------------------------------------------
r5217 | trancetip | 2004-06-04 17:36:49 -0400 (Fri, 04 Jun 2004) | 2 lines

Added horizon stats table to gNet stats panel. Rearranged/fixed panel layout.

------------------------------------------------------------------------
r5216 | trancetip | 2004-06-04 17:24:19 -0400 (Fri, 04 Jun 2004) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r5215 | trancetip | 2004-06-04 17:09:30 -0400 (Fri, 04 Jun 2004) | 2 lines

Moved horizon_stat_str() from gnet_stats_gui.c to gnet_stats_gui_common.c.

------------------------------------------------------------------------
r5214 | trancetip | 2004-06-04 17:03:54 -0400 (Fri, 04 Jun 2004) | 2 lines

Added/fixed comments. Sanity check is now called upon node init.

------------------------------------------------------------------------
r5213 | cbiere | 2004-06-04 15:29:36 -0400 (Fri, 04 Jun 2004) | 3 lines

Removed deprecated property ``PROP_PROXY_CONNECTIONS''.
guid_changed(): Use different font style for the GUID.

------------------------------------------------------------------------
r5212 | nonamer | 2004-06-04 11:42:36 -0400 (Fri, 04 Jun 2004) | 2 lines

Lets compile again (due to removed property)

------------------------------------------------------------------------
r5211 | cbiere | 2004-06-03 21:31:12 -0400 (Thu, 03 Jun 2004) | 2 lines

Removed deprecated property ``PROP_PROXY_CONNECTIONS''.

------------------------------------------------------------------------
r5210 | cbiere | 2004-06-03 21:24:27 -0400 (Thu, 03 Jun 2004) | 3 lines

Use delta_time().
Added casts to suppress warnings regarding signed vs. unsigned comparisions.

------------------------------------------------------------------------
r5209 | cbiere | 2004-06-03 21:22:28 -0400 (Thu, 03 Jun 2004) | 3 lines

whitelist_retrieve():
	Added comment to explain why trailing spaces are removed.

------------------------------------------------------------------------
r5208 | cbiere | 2004-06-03 21:19:57 -0400 (Thu, 03 Jun 2004) | 4 lines

search_stats_gui_update():
	Corrected type of ``last_update''.
	Use delta_time().

------------------------------------------------------------------------
r5207 | cbiere | 2004-06-03 21:16:54 -0400 (Thu, 03 Jun 2004) | 2 lines

Removed unused prototype search_gui_compare_records() since not exported.

------------------------------------------------------------------------
r5206 | cbiere | 2004-06-03 21:08:27 -0400 (Thu, 03 Jun 2004) | 2 lines

Added missing prototype of on_clist_gnet_stats_horizon_resize_column().

------------------------------------------------------------------------
r5205 | nonamer | 2004-06-03 17:19:36 -0400 (Thu, 03 Jun 2004) | 3 lines

Applied HSEP patch 8 from Thomas Schuerger, this adds HSEP info to the
gnutella net stats pane for GTK1

------------------------------------------------------------------------
r5203 | cbiere | 2004-06-01 21:39:41 -0400 (Tue, 01 Jun 2004) | 3 lines

search_stats_gui_update(): Corrected comparision which was wrong since my
	previous commit.

------------------------------------------------------------------------
r5202 | cbiere | 2004-06-01 18:21:37 -0400 (Tue, 01 Jun 2004) | 4 lines

node_remove_worst():
	Prepend items to list and reverse it afterwards instead of constantly
	appending them to the list.

------------------------------------------------------------------------
r5201 | cbiere | 2004-06-01 18:17:38 -0400 (Tue, 01 Jun 2004) | 7 lines

Use ``sl'' instead of ``l'' for single-linked lists.
Use delta_time().
upload_create():
upload_clone():
	Prepend items to the ``uploads'' list instead of appending them since
	their order doesn't matter.

------------------------------------------------------------------------
r5200 | cbiere | 2004-06-01 18:14:09 -0400 (Tue, 01 Jun 2004) | 3 lines

empty_hash_table(): Added proper prototype.
search_stats_gui_update(): Use delta_time().

------------------------------------------------------------------------
r5199 | cbiere | 2004-06-01 18:09:46 -0400 (Tue, 01 Jun 2004) | 4 lines

nodes_gui_remove_selected_helper():
	Prepend items to the list instead of appending them since
	their order doesn't matter.

------------------------------------------------------------------------
r5198 | cbiere | 2004-06-01 18:07:59 -0400 (Tue, 01 Jun 2004) | 6 lines

hostiles_retrieve():
	Changed code to remove trailing spaces; added comment.
	Prepend items to list and reverse it afterwards instead of constantly
	appending them to the list.
	Nullify ``hostiles_wild'' after free'ing the list.

------------------------------------------------------------------------
r5197 | cbiere | 2004-06-01 18:02:05 -0400 (Tue, 01 Jun 2004) | 12 lines

Define ``sl_whitelist'' as static.
Use ``sl'' instead of ``l'' for single-linked lists.
whitelist_retrieve():
	Define ``fp'' as array of length one and use G_N_ELEMENTS().
	Check return value of fstat().
	Changed code to remove trailing spaces.
	Prepend items to list and reverse it afterwards instead of constantly
	appending them to the list.
whitelist_connect():
whitelist_check():
	Use delta_time().

------------------------------------------------------------------------
r5196 | cbiere | 2004-06-01 17:37:26 -0400 (Tue, 01 Jun 2004) | 4 lines

search_cb_collect_ctree_data():
	Prepend items to list and reverse afterwards instead of constantly
	appending items to the list (-> complexity reduction).

------------------------------------------------------------------------
r5195 | cbiere | 2004-06-01 16:46:41 -0400 (Tue, 01 Jun 2004) | 4 lines

Added some assertions to protect against integer underruns.
ext_dump_one(): Replace variable name ``fd'' with ``f'' because ``fd'' is
	usually used for file descriptors not FILE streams.

------------------------------------------------------------------------
r5194 | cbiere | 2004-06-01 16:29:06 -0400 (Tue, 01 Jun 2004) | 3 lines

Added macro delta_time() which should be used instead of directly
substracting two time_t variables.

------------------------------------------------------------------------
r5193 | rmanfredi | 2004-06-01 15:37:05 -0400 (Tue, 01 Jun 2004) | 3 lines

Only try to resolve our hostname ONCE to determine our IP.  If that fails,
use the listening IP, or 127.0.0.1.

------------------------------------------------------------------------
r5192 | cbiere | 2004-05-31 14:24:58 -0400 (Mon, 31 May 2004) | 6 lines

Added default filename extensions:
	flac - FLAC (Audio; Lossless compressed)
	mka, mkv - Matroska Audio/Video container format
	shn - Shorten (Audio; Lossless compressed)
Corrected sort order of several extensions.

------------------------------------------------------------------------
r5191 | cbiere | 2004-05-31 12:13:45 -0400 (Mon, 31 May 2004) | 9 lines

downloads_gui_all_aborted():
	Restructured for better readability.
	Compare download record against DL_GUI_IS_HEADER instead of (-1).
	Added proper support for sorting the active downloads by size.
download_gui_remove():
	Replaced a g_warning() with g_error() and added return-statement
	after all g_error()s.
Further minor code style related changes.

------------------------------------------------------------------------
r5190 | cbiere | 2004-05-31 12:07:37 -0400 (Mon, 31 May 2004) | 4 lines

downloads_gui_any_status():
	Restructured for better readability.
	Compare ``drecord'' against DL_GUI_IS_HEADER instead of (-1).

------------------------------------------------------------------------
r5189 | cbiere | 2004-05-30 22:36:31 -0400 (Sun, 30 May 2004) | 2 lines

Inverted sort order for the size column.

------------------------------------------------------------------------
r5188 | cbiere | 2004-05-30 22:35:31 -0400 (Sun, 30 May 2004) | 7 lines

Indentation corrections.
gui_update_queue_frozen():
	Replaced printf() by g_message().
	Added cast for printing ``msg_displayed'' because gint isn't gboolean.
on_popup_downloads_selection_clear_event():
	Replaced manual nullify by G_FREE_NULL().

------------------------------------------------------------------------
r5187 | cbiere | 2004-05-30 22:31:55 -0400 (Sun, 30 May 2004) | 7 lines

Fix for bug #943496: Sort download queue by size column.
Replaced ``struct download'' by ``download_t''.
download_gui_remove():
	Changed for better readability.
	Fixed bugs introduced by me in Revision 1.21.
	Replaced g_warning() by g_error() where appropriate.

------------------------------------------------------------------------
r5186 | cbiere | 2004-05-30 22:24:23 -0400 (Sun, 30 May 2004) | 2 lines

Simplified popup callback functions for less duplicate and better performance.

------------------------------------------------------------------------
r5185 | cbiere | 2004-05-30 22:22:14 -0400 (Sun, 30 May 2004) | 2 lines

Added download_t as alias for ``struct download''.

------------------------------------------------------------------------
r5184 | cbiere | 2004-05-30 22:20:51 -0400 (Sun, 30 May 2004) | 2 lines

Refresh.

------------------------------------------------------------------------
r5183 | cbiere | 2004-05-30 19:42:47 -0400 (Sun, 30 May 2004) | 12 lines

download_unavailable():
download_queue_delay():
download_queue_hold():
	Make use of GCC's format string checking feature.
download_stop_v():
download_queue_v():
	Removed redundant string termination after gm_vsnprintf(),
download_overlap_check():
	Added cast to match format string.
build_url_from_download():
	The returned URL was wrong if the source was known by SHA1 only.

------------------------------------------------------------------------
r5182 | cbiere | 2004-05-30 18:09:49 -0400 (Sun, 30 May 2004) | 4 lines

get_file_to_upload_from_index():
	Don't increase ``buf'' after strchr(buf, '/'), it's unnecessary
	and might be confusing.

------------------------------------------------------------------------
r5181 | cbiere | 2004-05-30 11:32:32 -0400 (Sun, 30 May 2004) | 3 lines

url_params_parse(): Forgot to free() ``name'' when aborting
	(since previous commit).

------------------------------------------------------------------------
r5180 | cbiere | 2004-05-29 23:56:05 -0400 (Sat, 29 May 2004) | 2 lines

Bump date due to hex2dec() related bugfixes.

------------------------------------------------------------------------
r5179 | cbiere | 2004-05-29 23:52:57 -0400 (Sat, 29 May 2004) | 6 lines

url_unescape():
	Check the URL encoding whilst pre-scanning the URL.
	Return NULL if the encoding is invalid (or contains %00).
url_params_parse():
	Return NULL if url_unescape() fails.

------------------------------------------------------------------------
r5178 | cbiere | 2004-05-29 23:48:13 -0400 (Sat, 29 May 2004) | 5 lines

get_file_to_upload_from_index():
	Make sure the URI is valid URL encoded.
	Use strchr() instead of manually searching for the slash.
	Fixed typo in comment.

------------------------------------------------------------------------
r5177 | cbiere | 2004-05-29 23:45:44 -0400 (Sat, 29 May 2004) | 4 lines

upload_stats_load_history(): Removed support for parsing deprecated
	line format of the stats.
	Make sure the filename is valid URL encoded.

------------------------------------------------------------------------
r5176 | cbiere | 2004-05-29 23:43:11 -0400 (Sat, 29 May 2004) | 2 lines

get_params(): Make sure the URI is valid URL encoded.

------------------------------------------------------------------------
r5175 | cbiere | 2004-05-29 23:40:59 -0400 (Sat, 29 May 2004) | 2 lines

hex_to_guid(): Check characters *before* passing them to hex2dec().

------------------------------------------------------------------------
r5174 | cbiere | 2004-05-29 23:39:26 -0400 (Sat, 29 May 2004) | 2 lines

download_retrieve(): Make sure the filename is really URL escaped.

------------------------------------------------------------------------
r5173 | cbiere | 2004-05-29 23:37:59 -0400 (Sat, 29 May 2004) | 2 lines

Added dmesh error case DMESH_URL_BAD_ENCODING i.e., url_unescape() failed.

------------------------------------------------------------------------
r5172 | cbiere | 2004-05-29 23:37:00 -0400 (Sat, 29 May 2004) | 3 lines

Changed dmesh_ban_file to const literal string.
Added dmesh error case DMESH_URL_BAD_ENCODING i.e., url_unescape() failed.

------------------------------------------------------------------------
r5170 | cbiere | 2004-05-28 05:04:15 -0400 (Fri, 28 May 2004) | 2 lines

Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5169 | cbiere | 2004-05-28 05:01:23 -0400 (Fri, 28 May 2004) | 5 lines

shell_exec_horizon(): Applied HSEP patch #7 by Thomas Schuerger.
	Fixed a couple of code style issues.
shell_init(): Slice down the random values the Right Way(TM) for better
	quality of random.

------------------------------------------------------------------------
r5168 | cbiere | 2004-05-28 04:57:50 -0400 (Fri, 28 May 2004) | 7 lines

prop.c::prop_save_to_file(): Rearranged code for saving PROP_STORAGE a little.
prop.c::prop_parse_storage(): Added checks to make sure the storage isn't
	corrupted.
misc.c:	Fixed some casts.
	Added short_kb_size64() by Thomas Schuerger.
misc.c::hex2dec():	Added assertion() for invalid values!

------------------------------------------------------------------------
r5167 | cbiere | 2004-05-28 04:45:58 -0400 (Fri, 28 May 2004) | 4 lines

Fixed warnings regarding signed vs. unsigned comparisons.
qrp_send_patch(): [Bugfix] Attempted to g_free() static buffer ``qrp_tmp''
	instead of the malloc()ated buffer ``m''.

------------------------------------------------------------------------
r5166 | cbiere | 2004-05-28 04:40:26 -0400 (Fri, 28 May 2004) | 2 lines

Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5165 | cbiere | 2004-05-28 03:34:26 -0400 (Fri, 28 May 2004) | 3 lines

If downloads are sorted by source count, use size as secondary sort key.
[Suggested by Thomas Schuerger.]

------------------------------------------------------------------------
r5164 | cbiere | 2004-05-28 03:24:07 -0400 (Fri, 28 May 2004) | 2 lines

Fixed warnings regarding signed vs. unsigned comparisons.

------------------------------------------------------------------------
r5161 | rmanfredi | 2004-05-28 02:42:50 -0400 (Fri, 28 May 2004) | 2 lines

Bumped date, since a grave bug in download source counting was fixed.

------------------------------------------------------------------------
r5160 | rmanfredi | 2004-05-28 02:41:54 -0400 (Fri, 28 May 2004) | 3 lines

Fixed wrong download source counting, and asserted that a download issuing
a request must be in the running list already.

------------------------------------------------------------------------
r5159 | cbiere | 2004-05-24 22:32:53 -0400 (Mon, 24 May 2004) | 4 lines

prop_load_from_file(): Added several comments and made the code a little
	more readable. Also added a formal description of the configuration
	format.

------------------------------------------------------------------------
r5158 | cbiere | 2004-05-24 22:30:19 -0400 (Mon, 24 May 2004) | 3 lines

Added is_ascii_*() macros which wrap the equivalent ctype functions but
	allow ASCII characters only.

------------------------------------------------------------------------
r5157 | cbiere | 2004-05-24 20:32:32 -0400 (Mon, 24 May 2004) | 3 lines

Set ``temp_iter_global'' to NULL after releasing the allocated memory for it.
A few indentation changes.

------------------------------------------------------------------------
r5156 | cbiere | 2004-05-24 20:28:49 -0400 (Mon, 24 May 2004) | 3 lines

nodes_gui_update_nodes_display(): Require gui_debug > 0 for the debug
	message.

------------------------------------------------------------------------
r5154 | cbiere | 2004-05-24 17:16:57 -0400 (Mon, 24 May 2004) | 3 lines

Removed unnecessary '\n' from format strings for routing_log(). Spotted by
	Bill Pringlemeier.

------------------------------------------------------------------------
r5153 | cbiere | 2004-05-24 17:15:43 -0400 (Mon, 24 May 2004) | 3 lines

prop_load_from_file(): Removed unnecessary '\n' from format strings. Spotted
	by Bill Pringlemeier.

------------------------------------------------------------------------
r5152 | cbiere | 2004-05-24 17:14:08 -0400 (Mon, 24 May 2004) | 3 lines

Added necessary casts according to format strings.
Replaced string pointers by string literals to allow format string checking.

------------------------------------------------------------------------
r5151 | cbiere | 2004-05-24 16:02:52 -0400 (Mon, 24 May 2004) | 6 lines

Define ``MAX_STAMP'' as unsigned.
dmesh_check_deferred_against_existing(): Remove "0x" from string which was
	accidently left when changing "%lx" to "%p". Spotted by Bill			Pringlemeier.
dmesh_retrieve(): Define ``fp'' as array of length one so that length
	parameter for file_config_open_read() is determined automagically.

------------------------------------------------------------------------
r5149 | cbiere | 2004-05-24 15:25:51 -0400 (Mon, 24 May 2004) | 2 lines

Removed extra semi-colon after prototype. Spotted by Bill Pringlemeier.

------------------------------------------------------------------------
r5148 | graaff | 2004-05-24 15:09:23 -0400 (Mon, 24 May 2004) | 2 lines

Removed spurious newlines that are no longer needed when using g_warning.

------------------------------------------------------------------------
r5147 | cbiere | 2004-05-24 04:43:55 -0400 (Mon, 24 May 2004) | 2 lines

Bump release date.

------------------------------------------------------------------------
r5146 | cbiere | 2004-05-24 04:40:54 -0400 (Mon, 24 May 2004) | 5 lines

Replace the statusbar string with the URL of the website if it's NULL.
Fixed push logic so that no pushes are sent in firewalled mode or if
	"never send pushes" is ticked. Also disable the popup menu entry
	"Force push mode" in this case.

------------------------------------------------------------------------
r5144 | cbiere | 2004-05-24 04:35:04 -0400 (Mon, 24 May 2004) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r5143 | cbiere | 2004-05-24 04:29:08 -0400 (Mon, 24 May 2004) | 5 lines

Fixed indentation and style at several places.
Removed unnecessary trailing newline from g_warning() strings.
In several places ``l->data'' was possibly accessed after the memory for
	``l'' had been deallocated.

------------------------------------------------------------------------
r5142 | cbiere | 2004-05-24 04:27:28 -0400 (Mon, 24 May 2004) | 3 lines

Make use of GCC's format string checking feature. Fixed dependent code
	as necessary.

------------------------------------------------------------------------
r5140 | cbiere | 2004-05-24 02:26:00 -0400 (Mon, 24 May 2004) | 4 lines

Replaced show_error() with g_warning().
Make use of GCC's format string checking feature. Fixed dependent code
	as necessary.

------------------------------------------------------------------------
r5139 | cbiere | 2004-05-24 02:18:39 -0400 (Mon, 24 May 2004) | 3 lines

Make use of GCC's format string checking feature. Fixed dependent code
	as necessary.

------------------------------------------------------------------------
r5138 | cbiere | 2004-05-24 02:15:44 -0400 (Mon, 24 May 2004) | 4 lines

download_request(): Add the download to "running list" so that the assertion
	(dl_establishing > 0) in download_move_to_list() is true if the
	download is later moved to the "waiting list".

------------------------------------------------------------------------
r5137 | cbiere | 2004-05-24 02:09:48 -0400 (Mon, 24 May 2004) | 3 lines

Make use of GCC's format string checking feature. Fixed dependent code as
necessary.

------------------------------------------------------------------------
r5136 | cbiere | 2004-05-24 01:45:54 -0400 (Mon, 24 May 2004) | 2 lines

Updated Copyright date.

------------------------------------------------------------------------
r5135 | cbiere | 2004-05-24 01:44:05 -0400 (Mon, 24 May 2004) | 3 lines

Declared some variables static.
Replaced fprintf(stderr, ...) with g_message().

------------------------------------------------------------------------
r5134 | cbiere | 2004-05-24 01:42:16 -0400 (Mon, 24 May 2004) | 2 lines

version_new_found(): Use a static buffer instead of a malloc()ed one.

------------------------------------------------------------------------
r5133 | cbiere | 2004-05-24 01:41:17 -0400 (Mon, 24 May 2004) | 3 lines

url_normalize(): sizeof was misused so that more memory than necessary
	was allocated.

------------------------------------------------------------------------
r5132 | cbiere | 2004-05-24 01:39:22 -0400 (Mon, 24 May 2004) | 2 lines

upload_request(): Use a local buffer for ``name'' instead of a malloc()ed one.

------------------------------------------------------------------------
r5131 | cbiere | 2004-05-24 01:37:50 -0400 (Mon, 24 May 2004) | 2 lines

tok_strerror(): Fixed too weak assertion.

------------------------------------------------------------------------
r5130 | cbiere | 2004-05-24 01:36:56 -0400 (Mon, 24 May 2004) | 3 lines

Use macro ``PROP_ENTRY'' for intializing ``property_map'' to shut up
	warnings about missing initializers.

------------------------------------------------------------------------
r5129 | cbiere | 2004-05-24 01:34:46 -0400 (Mon, 24 May 2004) | 2 lines

search_stats_notify_whole(): Use a local buffer instead of a malloc()ed one.

------------------------------------------------------------------------
r5128 | cbiere | 2004-05-24 01:33:22 -0400 (Mon, 24 May 2004) | 2 lines

Removed unused label ``out''.

------------------------------------------------------------------------
r5127 | cbiere | 2004-05-24 01:31:30 -0400 (Mon, 24 May 2004) | 3 lines

qrp_add_file():	Use a local buffer for ``key'' and do a g_strdup() only
	if necessary.

------------------------------------------------------------------------
r5126 | cbiere | 2004-05-24 01:29:07 -0400 (Mon, 24 May 2004) | 4 lines

prop_load_from_file(): Replaced ERR_FMT with constant string literal.
	Condensed parsing somewhat.
	Replaced fprintf(stderr, ...) with g_warning().

------------------------------------------------------------------------
r5125 | cbiere | 2004-05-24 01:23:12 -0400 (Mon, 24 May 2004) | 2 lines

validate_vendor(): Use a local buffer for ``name'' instead of a malloc()ed one.

------------------------------------------------------------------------
r5124 | cbiere | 2004-05-24 01:22:06 -0400 (Mon, 24 May 2004) | 2 lines

Fixed too weak assertions.

------------------------------------------------------------------------
r5123 | cbiere | 2004-05-24 01:21:26 -0400 (Mon, 24 May 2004) | 3 lines

gtk_cell_renderer_progress_get_type(): Fixed warning regarding missing
	initializer for ``cell_progress_info''.

------------------------------------------------------------------------
r5122 | cbiere | 2004-05-24 01:19:46 -0400 (Mon, 24 May 2004) | 4 lines

Replaced some printf()s with g_message(): No externally supplied strings
	should be written to std{err,in} unescaped (at least dbg > 0
	should be required).

------------------------------------------------------------------------
r5121 | cbiere | 2004-05-24 01:17:33 -0400 (Mon, 24 May 2004) | 3 lines

nodes_gui_update_nodes_display():
	Fixed indentation and a warning due to possibly unused ``model''.

------------------------------------------------------------------------
r5120 | cbiere | 2004-05-24 01:16:09 -0400 (Mon, 24 May 2004) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r5119 | cbiere | 2004-05-24 01:14:33 -0400 (Mon, 24 May 2004) | 8 lines

Added a couple of const qualifiers.
Fixed too weak assertions.
node_timer(): Use a local buffer for ``reason'' instead of a malloc()ed one.
node_recursive_shutdown_v(): It's not obvious whether n->error_str can
	contain a format string or not, overwrite any '%' if it does.
node_set_vendor(): Use a local buffer for ``name'' instead of a malloc()ed one.
node_host_is_connected(): Moved unused variable ``sl'' to unused code.

------------------------------------------------------------------------
r5118 | cbiere | 2004-05-24 01:12:09 -0400 (Mon, 24 May 2004) | 2 lines

Removed unnecessary inclusion of <glib.h>.

------------------------------------------------------------------------
r5117 | cbiere | 2004-05-24 01:10:10 -0400 (Mon, 24 May 2004) | 2 lines

Added ``#ifndef _whitelist_h_'' to prevent multiple inclusion.

------------------------------------------------------------------------
r5116 | cbiere | 2004-05-24 01:06:38 -0400 (Mon, 24 May 2004) | 2 lines

Unused file; we don't use Autoconf any longer.

------------------------------------------------------------------------
r5115 | cbiere | 2004-05-24 00:45:37 -0400 (Mon, 24 May 2004) | 5 lines

Added static qualifier to ``blocks''.
malloc_record(): Swapped calloc() arguments.
leak_add(): Use a static buffer for ``key'' and use g_strdup() only
	if necessary.

------------------------------------------------------------------------
r5114 | cbiere | 2004-05-24 00:42:58 -0400 (Mon, 24 May 2004) | 2 lines

Fixed too weak assertions regards ``errnum'' and ``s->pos''.

------------------------------------------------------------------------
r5113 | cbiere | 2004-05-24 00:42:06 -0400 (Mon, 24 May 2004) | 2 lines

Added const qualifiers where appropriate.

------------------------------------------------------------------------
r5112 | cbiere | 2004-05-24 00:41:36 -0400 (Mon, 24 May 2004) | 9 lines

Replaced ``sep'' in ``header_fmt'' with a fixed size buffer so that
	all functions can use const for their parameters and no malloc()
	or walloc() is necessary. The buffer is large enough to hold all
	possible ``unsigned char'' values.
Added a couple of const qualifiers possible due the above change.
header_fmt_free(): Removed comment because special caution isn't necessary
	any longer.
header_get_feature(): Replaced sscanf() with other code using gm_atoul().

------------------------------------------------------------------------
r5111 | cbiere | 2004-05-24 00:31:11 -0400 (Mon, 24 May 2004) | 3 lines

Fixed too weak assertions.
Added some const qualifiers where appropriate.

------------------------------------------------------------------------
r5110 | cbiere | 2004-05-24 00:29:33 -0400 (Mon, 24 May 2004) | 2 lines

Fixed a few things WRT indentation and style.

------------------------------------------------------------------------
r5109 | cbiere | 2004-05-24 00:28:13 -0400 (Mon, 24 May 2004) | 2 lines

Fixed too weak assertions.

------------------------------------------------------------------------
r5108 | cbiere | 2004-05-24 00:27:25 -0400 (Mon, 24 May 2004) | 3 lines

gm_vsnprintf(),gm_snprintf():
	Made ``retval'' signed to allow stricter assertion checking.

------------------------------------------------------------------------
r5107 | cbiere | 2004-05-24 00:25:46 -0400 (Mon, 24 May 2004) | 3 lines

Fixed too weak assertions regarding ``fi_all_count'' and
	``fi_with_source_count''.

------------------------------------------------------------------------
r5106 | cbiere | 2004-05-24 00:24:34 -0400 (Mon, 24 May 2004) | 5 lines

Replaced static string pointers with string literals.
Moved the dots in ``orig_ext'' and ``new_ext'' to the format string so it's
	easy to see what's happening without any context.
Added const qualifiers where appropriate.

------------------------------------------------------------------------
r5105 | cbiere | 2004-05-24 00:21:47 -0400 (Mon, 24 May 2004) | 2 lines

Fixed a couple things WRT indentation and style.

------------------------------------------------------------------------
r5104 | cbiere | 2004-05-24 00:18:15 -0400 (Mon, 24 May 2004) | 4 lines

Fixed too weak assertions regarding ``dl_qalive_count'' and ``s->pos''.
download_get_server_name(): Use a local buffer for ``name''
	instead of a malloc()ed one.

------------------------------------------------------------------------
r5103 | cbiere | 2004-05-24 00:15:11 -0400 (Mon, 24 May 2004) | 4 lines

FUZZY_DROP and FUZZY_MATCH were accidently defined as zero.
dmesh_url_strerror(): Fixed too weak assertion.
	Replaced "%lx" by proper "%p".

------------------------------------------------------------------------
r5102 | cbiere | 2004-05-24 00:11:07 -0400 (Mon, 24 May 2004) | 3 lines

Added const qualifier to static array ``values''.
encode_pad_length(): Fixed too weak assertion.

------------------------------------------------------------------------
r5101 | cbiere | 2004-05-24 00:06:08 -0400 (Mon, 24 May 2004) | 4 lines

Modified two warnings to remove the "...".
Replaced COUNT() macro with G_N_ELEMENTS() for consistency.
dump_tracking_entry(): Added const qualifier to ``what''.

------------------------------------------------------------------------
r5100 | cbiere | 2004-05-23 17:20:16 -0400 (Sun, 23 May 2004) | 4 lines

gtk_cell_renderer_progress_render(): Use a local buffer for ``text'' instead
	of a malloc()ed one.
gtk_cell_renderer_progress_finalize(): Use G_FREE_NULL() instead of g_free().

------------------------------------------------------------------------
r5099 | cbiere | 2004-05-23 15:14:56 -0400 (Sun, 23 May 2004) | 3 lines

upload_stats_cell_render_norm_func(): Use a local buffer instead of a
	malloc()ed buffer.

------------------------------------------------------------------------
r5098 | wyldfire | 2004-05-23 05:37:24 -0400 (Sun, 23 May 2004) | 2 lines

[Gtk1] Fixed 'Nagivator' typo

------------------------------------------------------------------------
r5089 | cbiere | 2004-05-19 14:29:13 -0400 (Wed, 19 May 2004) | 3 lines

adns_resolve(): Replaced memcpy() with strncpy() to shut up bogus warnings
about uninitialized memory when using valgrind.

------------------------------------------------------------------------
r5086 | cbiere | 2004-05-03 19:38:21 -0400 (Mon, 03 May 2004) | 5 lines

url_normalize(): Bugfix: Chars in the hostname could be skipped so
	that the normalized hostname wasn't completely lowercase.
	Also, allow "http://" with all characters lowercase, only.
	Added ".txt" to static types.

------------------------------------------------------------------------
r5084 | rmanfredi | 2004-05-02 04:47:33 -0400 (Sun, 02 May 2004) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r5083 | rmanfredi | 2004-05-02 04:44:31 -0400 (Sun, 02 May 2004) | 4 lines

Removed unused variable.
Fixed style: no line greater than 80 chars, no space before '(' in functions,
no space after '(' in function/macro args.

------------------------------------------------------------------------
r5082 | rmanfredi | 2004-05-02 04:43:08 -0400 (Sun, 02 May 2004) | 2 lines

Removed unused variables.

------------------------------------------------------------------------
r5081 | graaff | 2004-05-01 16:39:56 -0400 (Sat, 01 May 2004) | 3 lines

Rewrite bits to pixels calculation to avoid underflow errors with
small file sizes.

------------------------------------------------------------------------
r5080 | wyldfire | 2004-04-29 16:30:58 -0400 (Thu, 29 Apr 2004) | 4 lines


Use hash table instead of list for faster lookup in node_is_connected()
  and node_host_is_connected().

------------------------------------------------------------------------
r5079 | wyldfire | 2004-04-29 16:24:54 -0400 (Thu, 29 Apr 2004) | 4 lines


Split up gnet.h into several files for better readability.
  All are included from gnet.h.

------------------------------------------------------------------------
r5078 | graaff | 2004-04-26 17:05:21 -0400 (Mon, 26 Apr 2004) | 2 lines

Remove more unused legacy code.

------------------------------------------------------------------------
r5077 | graaff | 2004-04-26 14:24:51 -0400 (Mon, 26 Apr 2004) | 2 lines

Remove unused legacy code.

------------------------------------------------------------------------
r5076 | graaff | 2004-04-25 16:19:19 -0400 (Sun, 25 Apr 2004) | 3 lines

Use previous checkins to draw availability of files on the network
based on provided ranges in the visual progress indicator.

------------------------------------------------------------------------
r5075 | graaff | 2004-04-25 16:17:14 -0400 (Sun, 25 Apr 2004) | 2 lines

Provide event for update ranges information.

------------------------------------------------------------------------
r5074 | graaff | 2004-04-25 16:14:34 -0400 (Sun, 25 Apr 2004) | 3 lines

Provide http_range_merge to merge two ranges, and http_range_copy to
copy a range object.

------------------------------------------------------------------------
r5073 | wyldfire | 2004-04-25 13:51:59 -0400 (Sun, 25 Apr 2004) | 2 lines

Change define DO_FREEZE in nodes_gui2.c to define wether to freeze during update or to force a redraw.

------------------------------------------------------------------------
r5072 | wyldfire | 2004-04-25 13:24:29 -0400 (Sun, 25 Apr 2004) | 4 lines


[Gtk2] Reduced updates in nodes panel to reduce CPU usage.
[Gtk2] Try uncoupling model from view in nodes panel during update.

------------------------------------------------------------------------
r5071 | wyldfire | 2004-04-25 12:09:29 -0400 (Sun, 25 Apr 2004) | 2 lines

[Gtk1] Update info and flags only once per global update now.

------------------------------------------------------------------------
r5070 | wyldfire | 2004-04-25 11:22:33 -0400 (Sun, 25 Apr 2004) | 3 lines


[Gtk1] Reduced updates in nodes panel while it is not visible.

------------------------------------------------------------------------
r5066 | cbiere | 2004-04-20 17:34:12 -0400 (Tue, 20 Apr 2004) | 3 lines

upload_http_status(): The Date: header is now added by http_send_status().
	Retry-After: uses the RFC1123 date format as required by HTTP/1.1.

------------------------------------------------------------------------
r5065 | cbiere | 2004-04-20 17:27:13 -0400 (Tue, 20 Apr 2004) | 3 lines

http_send_status(): Always emit a date header in RFC1123 format as
	required by HTTP/1.1.

------------------------------------------------------------------------
r5064 | cbiere | 2004-04-20 17:23:44 -0400 (Tue, 20 Apr 2004) | 2 lines

Added date_to_rfc1123_gchar(); date format as in RFC1123 is used by HTTP/1.1.

------------------------------------------------------------------------
r5062 | cbiere | 2004-04-18 21:30:56 -0400 (Sun, 18 Apr 2004) | 3 lines

Adapted my gwc_url_normalize() from Crab to GTKG as url_normalize() for
better URL handling especially for GWC URLs.

------------------------------------------------------------------------
r5061 | wyldfire | 2004-04-18 11:08:13 -0400 (Sun, 18 Apr 2004) | 2 lines

no comment

------------------------------------------------------------------------
r5060 | wyldfire | 2004-04-18 11:06:59 -0400 (Sun, 18 Apr 2004) | 4 lines


Reducted number of times results are resorted in
  download_selection_of_ctree().

------------------------------------------------------------------------
r5059 | wyldfire | 2004-04-18 11:02:33 -0400 (Sun, 18 Apr 2004) | 4 lines


Changed autoselection policy and moved relevant code
  to search_gui_common.c

------------------------------------------------------------------------
r5058 | wyldfire | 2004-04-18 11:01:33 -0400 (Sun, 18 Apr 2004) | 6 lines


Changed autoselection policy and moved relevant code
  to search_gui_common.c.
Hopefully reduced gui GtkCTree flickering while still redrawing often
  enough to keep display correct.

------------------------------------------------------------------------
r5057 | wyldfire | 2004-04-18 10:56:29 -0400 (Sun, 18 Apr 2004) | 4 lines


Renamed some of the autoselection properties to assure they are
  reset an a new start.

------------------------------------------------------------------------
r5056 | wyldfire | 2004-04-18 10:54:39 -0400 (Sun, 18 Apr 2004) | 4 lines


[Gtk1] [Gtk2] Changed autoselection policy and moved relevant code
  to search_gui_common.c

------------------------------------------------------------------------
r5055 | wyldfire | 2004-04-18 10:53:29 -0400 (Sun, 18 Apr 2004) | 6 lines


[Gtk1] [Gtk2] Made the search retry timeout an expert setting.
[Gtk1] [Gtk2] Made the autoselection feature an expert setting.
Renamed some of the autoselection properties to assure they are
  reset an a new start.

------------------------------------------------------------------------
r5054 | wyldfire | 2004-04-18 10:47:20 -0400 (Sun, 18 Apr 2004) | 4 lines


[Gtk1] [Gtk2] Made the search retry timeout an expert setting.
[Gtk1] [Gtk2] Made the autoselection feature an expert setting.

------------------------------------------------------------------------
r5053 | wyldfire | 2004-04-18 09:55:13 -0400 (Sun, 18 Apr 2004) | 2 lines

Regenreated gnet properties

------------------------------------------------------------------------
r5052 | graaff | 2004-04-18 09:54:44 -0400 (Sun, 18 Apr 2004) | 4 lines

Clear progress indicator when no file is selected, properly signal
invalid fileinfo handles, free old chunks in one go, and keep color
allocation outside of asserts.

------------------------------------------------------------------------
r5051 | wyldfire | 2004-04-18 09:19:34 -0400 (Sun, 18 Apr 2004) | 2 lines

Activated 'fixed_height_mode' for the nodes TreeView.

------------------------------------------------------------------------
r5050 | wyldfire | 2004-04-18 09:06:48 -0400 (Sun, 18 Apr 2004) | 2 lines

Added GTK_CTREE_NODE_PARENT(n) convenience macro

------------------------------------------------------------------------
r5043 | cbiere | 2004-04-17 17:08:02 -0400 (Sat, 17 Apr 2004) | 2 lines

gm_strconcatv(): Tuned it a little.

------------------------------------------------------------------------
r5042 | cbiere | 2004-04-16 22:56:12 -0400 (Fri, 16 Apr 2004) | 3 lines

search_gui_add_record():
	Use g_string_append_len() instead of twiddling with a NUL byte.

------------------------------------------------------------------------
r5041 | cbiere | 2004-04-16 22:42:07 -0400 (Fri, 16 Apr 2004) | 2 lines

search_gui_add_record(): Removed unused variable.

------------------------------------------------------------------------
r5040 | cbiere | 2004-04-16 22:40:44 -0400 (Fri, 16 Apr 2004) | 2 lines

Replaced "port" with "TCP port" where appriopriate.

------------------------------------------------------------------------
r5039 | cbiere | 2004-04-16 22:25:35 -0400 (Fri, 16 Apr 2004) | 2 lines

Replaced "port" with "TCP port" where appriopriate.

------------------------------------------------------------------------
r5038 | cbiere | 2004-04-16 21:44:18 -0400 (Fri, 16 Apr 2004) | 2 lines

[HSEP] Fixed an alignment problem which caused a SIGBUS.

------------------------------------------------------------------------
r5037 | cbiere | 2004-04-16 19:55:23 -0400 (Fri, 16 Apr 2004) | 2 lines

general_stat_str(): Fixed format string.

------------------------------------------------------------------------
r5036 | wyldfire | 2004-04-16 19:21:33 -0400 (Fri, 16 Apr 2004) | 2 lines

no comment

------------------------------------------------------------------------
r5035 | wyldfire | 2004-04-16 19:09:52 -0400 (Fri, 16 Apr 2004) | 5 lines


[Gtk2] Added toolbar buttons back.
[Gtk2] Minor adjustments to the layout of the network config pane.
[Gtk2] Removed searches combo from search pane put a label there instead.

------------------------------------------------------------------------
r5034 | cbiere | 2004-04-16 19:02:55 -0400 (Fri, 16 Apr 2004) | 2 lines

Changed protoype of use_map_on_query(): use gchar, type-cast later.

------------------------------------------------------------------------
r5033 | cbiere | 2004-04-16 18:37:22 -0400 (Fri, 16 Apr 2004) | 2 lines

remove_parent_with_fi_handle(): Corrected type of 2nd argument.

------------------------------------------------------------------------
r5032 | cbiere | 2004-04-16 18:09:14 -0400 (Fri, 16 Apr 2004) | 2 lines

Removed trailing semi-colon after function body.

------------------------------------------------------------------------
r5031 | cbiere | 2004-04-16 15:47:39 -0400 (Fri, 16 Apr 2004) | 2 lines

[GTK2] Replaced the searches combo with a simple label.

------------------------------------------------------------------------
r5029 | wyldfire | 2004-04-15 18:08:07 -0400 (Thu, 15 Apr 2004) | 3 lines


[Gtk2] Changed layout of fileinfo pane to integrate progress indicator.

------------------------------------------------------------------------
r5028 | wyldfire | 2004-04-15 17:41:58 -0400 (Thu, 15 Apr 2004) | 4 lines


[Gtk1] Changed layout of fileinfo pane to integrate progress indicator
Made progess indicator use the complete drawing area.

------------------------------------------------------------------------
r5027 | rmanfredi | 2004-04-15 16:23:53 -0400 (Thu, 15 Apr 2004) | 2 lines

Merged back past changes.

------------------------------------------------------------------------
r5026 | graaff | 2004-04-15 16:01:38 -0400 (Thu, 15 Apr 2004) | 4 lines

Make sure fi_get_chunks and fi_free_chunks use the same allocation
method, and optimize fi_get_chunks while maintaining chunks in
increasing order.

------------------------------------------------------------------------
r5024 | nonamer | 2004-04-15 14:41:02 -0400 (Thu, 15 Apr 2004) | 2 lines

I even mananaged to do another thing today! :-)

------------------------------------------------------------------------
r5023 | nonamer | 2004-04-15 14:39:00 -0400 (Thu, 15 Apr 2004) | 4 lines

From B-0-93.
CVS versions now only look for a newer release of the current version and
will of course still look for newer stable versions.

------------------------------------------------------------------------
r5020 | rmanfredi | 2004-04-15 08:21:53 -0400 (Thu, 15 Apr 2004) | 2 lines

Regenerated from Jmakefile.

------------------------------------------------------------------------
r5019 | rmanfredi | 2004-04-15 08:20:35 -0400 (Thu, 15 Apr 2004) | 2 lines

Added clanbomber_yellow.xpm and clanbomber_red.xpm.

------------------------------------------------------------------------
r5018 | nonamer | 2004-04-15 08:19:16 -0400 (Thu, 15 Apr 2004) | 2 lines

Added cache.kicks-ass.net:8000/ to the fallback webcaches

------------------------------------------------------------------------
r5017 | rmanfredi | 2004-04-15 08:18:30 -0400 (Thu, 15 Apr 2004) | 2 lines

Added pixmaps/clanbomber_*.xpm and src/visual_progress_gui.[xh].

------------------------------------------------------------------------
r5015 | wyldfire | 2004-04-15 07:51:15 -0400 (Thu, 15 Apr 2004) | 6 lines


[Gtk1] [Gtk2] Tried to fix memory lead in visual progress indicator. Small leak
  is still reported but probably due to the gui never being actually
  destroyed
[Gtk1] [Gtk2] Adjusted colors in progress indicator.

------------------------------------------------------------------------
r5014 | cbiere | 2004-04-15 01:18:15 -0400 (Thu, 15 Apr 2004) | 2 lines

Append a slash to a host (like a browser) if the URL contains no URI part.

------------------------------------------------------------------------
r5013 | wyldfire | 2004-04-14 20:59:51 -0400 (Wed, 14 Apr 2004) | 2 lines

Added T'aZ as author of leap.xpm

------------------------------------------------------------------------
r5012 | wyldfire | 2004-04-14 20:58:27 -0400 (Wed, 14 Apr 2004) | 2 lines

Unfuckup format

------------------------------------------------------------------------
r5011 | wyldfire | 2004-04-14 20:54:24 -0400 (Wed, 14 Apr 2004) | 2 lines

Updated image sources

------------------------------------------------------------------------
r5010 | wyldfire | 2004-04-14 20:54:13 -0400 (Wed, 14 Apr 2004) | 2 lines

no comment

------------------------------------------------------------------------
r5009 | wyldfire | 2004-04-14 20:51:23 -0400 (Wed, 14 Apr 2004) | 3 lines


Updated filter.xpm

------------------------------------------------------------------------
r5008 | wyldfire | 2004-04-14 20:50:59 -0400 (Wed, 14 Apr 2004) | 4 lines


[Gtk1] [Gtk2] Added icons for PROP_FILE_DESCRITOR_SHORTAGE and
  PROP_FILE_DESCRIPTOR_RUNOUT

------------------------------------------------------------------------
r5007 | wyldfire | 2004-04-14 20:50:16 -0400 (Wed, 14 Apr 2004) | 5 lines


[Gtk1] Added toolbar style selection combo to gui config pane
[Gtk1] [Gtk2] Added icons for PROP_FILE_DESCRITOR_SHORTAGE and
  PROP_FILE_DESCRIPTOR_RUNOUT

------------------------------------------------------------------------
r5006 | nonamer | 2004-04-14 15:51:35 -0400 (Wed, 14 Apr 2004) | 3 lines

Backport from 0.93.4u
Don't write in a socket structure which was just freed.

------------------------------------------------------------------------
r5001 | cbiere | 2004-04-13 15:36:56 -0400 (Tue, 13 Apr 2004) | 2 lines

Fixed typo: Flled -> Filled.

------------------------------------------------------------------------
r5000 | cbiere | 2004-04-13 15:27:49 -0400 (Tue, 13 Apr 2004) | 2 lines

Fixed a bug in my previous commit; was operating on the wrong TreeView.

------------------------------------------------------------------------
r4999 | cbiere | 2004-04-13 11:48:29 -0400 (Tue, 13 Apr 2004) | 3 lines

Forgot to unref the TreeModel after re-attaching the TreeModel to the
TreeView; fixed.

------------------------------------------------------------------------
r4997 | rmanfredi | 2004-04-13 09:50:31 -0400 (Tue, 13 Apr 2004) | 2 lines

Removed connection to GWC at startup.  Wait 8 hours to do that!

------------------------------------------------------------------------
r4995 | rmanfredi | 2004-04-13 09:32:48 -0400 (Tue, 13 Apr 2004) | 2 lines

Don't publish our IP to web caches if we're a normal (legacy) node.

------------------------------------------------------------------------
r4994 | cbiere | 2004-04-13 08:44:24 -0400 (Tue, 13 Apr 2004) | 3 lines

Added search_gui_{start,end}_massive_updates() for detaching the TreeModel
from the TreeView resp. freezing the CTree when doing a lot of updates.

------------------------------------------------------------------------
r4993 | graaff | 2004-04-12 16:39:29 -0400 (Mon, 12 Apr 2004) | 2 lines

Use proper casts to avoid compiler warnings.

------------------------------------------------------------------------
r4992 | cbiere | 2004-04-12 13:56:52 -0400 (Mon, 12 Apr 2004) | 2 lines

Corrected assertions with side-effects.

------------------------------------------------------------------------
r4991 | graaff | 2004-04-12 10:03:04 -0400 (Mon, 12 Apr 2004) | 2 lines

Also handle purged files.

------------------------------------------------------------------------
r4990 | graaff | 2004-04-12 09:34:53 -0400 (Mon, 12 Apr 2004) | 2 lines

Use out-of-bounds value to signal lack of valid fileinfo handle.

------------------------------------------------------------------------
r4989 | graaff | 2004-04-12 07:34:05 -0400 (Mon, 12 Apr 2004) | 2 lines

Handle case where no downloads are present.

------------------------------------------------------------------------
r4987 | rmanfredi | 2004-04-12 03:17:39 -0400 (Mon, 12 Apr 2004) | 2 lines

Re-initialized from GhostWhiteCrab's verified peer list.

------------------------------------------------------------------------
r4985 | rmanfredi | 2004-04-11 18:02:12 -0400 (Sun, 11 Apr 2004) | 3 lines

Must use download_queue_hold() for special-cased 403, since the remote
server will ban the IP of the requestor...

------------------------------------------------------------------------
r4984 | rmanfredi | 2004-04-11 17:57:46 -0400 (Sun, 11 Apr 2004) | 2 lines

Version of 2004-04-11.

------------------------------------------------------------------------
r4983 | rmanfredi | 2004-04-11 17:56:36 -0400 (Sun, 11 Apr 2004) | 3 lines

When downloading, treat GTKG's "403 ... removed from PARQ" specially,
looking for a possible Retry-After to know when retrying will be possible.

------------------------------------------------------------------------
r4982 | rmanfredi | 2004-04-11 17:54:37 -0400 (Sun, 11 Apr 2004) | 4 lines

When GTKG rejects an upload with "403 ... removed from PARQ", it will
include a Retry-After header to indicate the banning limit, since
further requests from the host will be back-holed.

------------------------------------------------------------------------
r4981 | rmanfredi | 2004-04-11 17:53:11 -0400 (Sun, 11 Apr 2004) | 3 lines

Renamed parq_is_banned_source() into parq_banned_source_expire() and
have it return the expiration date of the banning.

------------------------------------------------------------------------
r4980 | cbiere | 2004-04-11 17:36:50 -0400 (Sun, 11 Apr 2004) | 2 lines

Update of Thomas Schuerger's mail address (sync with AUTHORS).

------------------------------------------------------------------------
r4979 | graaff | 2004-04-11 17:25:33 -0400 (Sun, 11 Apr 2004) | 3 lines

Visual progress initial patch: show progress bar in fileinfo pane for
selected file.

------------------------------------------------------------------------
r4978 | graaff | 2004-04-11 16:23:36 -0400 (Sun, 11 Apr 2004) | 2 lines

Typo in comment fixed.

------------------------------------------------------------------------
r4977 | cbiere | 2004-04-11 15:37:06 -0400 (Sun, 11 Apr 2004) | 2 lines

Fixed two typos: ';' directly after the if-condition.

------------------------------------------------------------------------
r4976 | cbiere | 2004-04-11 14:27:32 -0400 (Sun, 11 Apr 2004) | 4 lines

Concerns bug #928094: I've now added the shortcuts, so that the
node_avoid_monopoly() and node_reserve_slot() return immediately if these
settings are disabled (raised to 100% resp. 0%).

------------------------------------------------------------------------
r4974 | cbiere | 2004-04-11 13:50:20 -0400 (Sun, 11 Apr 2004) | 2 lines

Fixed two warning/debug messages.

------------------------------------------------------------------------
r4973 | cbiere | 2004-04-11 13:33:12 -0400 (Sun, 11 Apr 2004) | 3 lines

Fixed #930406: GTKG does now add the port value to the hostname in the
"Host:" header if the port is not HTTP_PORT (80).

------------------------------------------------------------------------
r4972 | cbiere | 2004-04-11 12:45:27 -0400 (Sun, 11 Apr 2004) | 4 lines

Handles bug #930083: Require debug level 5 for dump_hex() when receiving
a weird HTTP acknowledgment to prevent log flooding due to a bug in
giFT-Gnutella/0.0.9 which triggers this warning quite often.

------------------------------------------------------------------------
r4971 | cbiere | 2004-04-11 12:31:34 -0400 (Sun, 11 Apr 2004) | 3 lines

Fixed bug #929108. Prevent looping forever and don't bind() to ports < 1024
in random mode. Port 0 shouldn't be used to indicate random mode though.

------------------------------------------------------------------------
r4970 | cbiere | 2004-04-11 11:13:49 -0400 (Sun, 11 Apr 2004) | 2 lines

Fixed typo: "uploads from single host" -> "uploads to a single host".

------------------------------------------------------------------------
r4969 | cbiere | 2004-04-11 10:57:21 -0400 (Sun, 11 Apr 2004) | 4 lines

Fixed fuzzy_strlower(): tolower() might evaluates its parameter more than
once. The ``dst'' buffer could be smaller than the ``src'' string. Make
sure the string in ``dst'' gets NUL-terminated.

------------------------------------------------------------------------
r4968 | cbiere | 2004-04-11 10:32:29 -0400 (Sun, 11 Apr 2004) | 2 lines

Fixed typo "packages" -> "packets".

------------------------------------------------------------------------
r4966 | rmanfredi | 2004-04-10 18:42:57 -0400 (Sat, 10 Apr 2004) | 4 lines

Change webcache everytime we want to perform an action, in case we
hit a bad cache that ignores our updates silently or replies with
bad (static!) data.

------------------------------------------------------------------------
r4965 | rmanfredi | 2004-04-10 13:14:24 -0400 (Sat, 10 Apr 2004) | 2 lines

Rolled-back avoidance of bootstrapping URLs.

------------------------------------------------------------------------
r4964 | rmanfredi | 2004-04-10 13:14:24 -0400 (Sat, 10 Apr 2004) | 2 lines

Rolled-back avoidance of bootstrapping URLs.

------------------------------------------------------------------------
r4961 | rmanfredi | 2004-04-10 08:32:06 -0400 (Sat, 10 Apr 2004) | 2 lines

Don't try too hard to avoid using bootstrapping URLs...

------------------------------------------------------------------------
r4960 | rmanfredi | 2004-04-10 07:33:59 -0400 (Sat, 10 Apr 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r4957 | rmanfredi | 2004-04-10 07:24:36 -0400 (Sat, 10 Apr 2004) | 2 lines

Try to not use a bootstrapping cache URL if we can avoid it.

------------------------------------------------------------------------
r4956 | rmanfredi | 2004-04-10 07:09:36 -0400 (Sat, 10 Apr 2004) | 2 lines

Will now parse up to 150 hosts in hostfile replies.

------------------------------------------------------------------------
r4954 | rmanfredi | 2004-04-09 16:30:17 -0400 (Fri, 09 Apr 2004) | 2 lines

Fixed typo "packages" -> "packets".

------------------------------------------------------------------------
r4952 | rmanfredi | 2004-04-08 13:00:13 -0400 (Thu, 08 Apr 2004) | 2 lines

Updated my web cache URL, now run from home.

------------------------------------------------------------------------
r4949 | rmanfredi | 2004-04-07 17:09:34 -0400 (Wed, 07 Apr 2004) | 2 lines

Only write readable filenames in done.sha1.

------------------------------------------------------------------------
r4947 | rmanfredi | 2004-04-07 15:12:18 -0400 (Wed, 07 Apr 2004) | 2 lines

Added my own hostcache.

------------------------------------------------------------------------
r4945 | rmanfredi | 2004-04-03 06:33:22 -0500 (Sat, 03 Apr 2004) | 2 lines

Removed default cache on raphael.manfredi.free.fr, which was erased.

------------------------------------------------------------------------
r4944 | rmanfredi | 2004-04-02 13:21:15 -0500 (Fri, 02 Apr 2004) | 2 lines

Avoid side effect when calling isspace().

------------------------------------------------------------------------
r4943 | rmanfredi | 2004-03-28 06:15:41 -0500 (Sun, 28 Mar 2004) | 3 lines

Compile glade-generated files last, to save time when there is an error
elsewhere.

------------------------------------------------------------------------
r4942 | rmanfredi | 2004-03-28 06:05:26 -0500 (Sun, 28 Mar 2004) | 2 lines

[GTK1] Fileinfo filtering now also applies the regexp to fileinfo aliases.

------------------------------------------------------------------------
r4941 | wyldfire | 2004-03-26 13:13:40 -0500 (Fri, 26 Mar 2004) | 4 lines


Show queued status in fileinfo pane. (Closes #916976)
Comment out GTK_GNUTELLA_DIR export in run script.

------------------------------------------------------------------------
r4939 | wyldfire | 2004-03-17 14:54:02 -0500 (Wed, 17 Mar 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4938 | wyldfire | 2004-03-17 14:51:30 -0500 (Wed, 17 Mar 2004) | 4 lines


Slight layout change in the fileinfo pane.
Purging of multiple files is now possible.

------------------------------------------------------------------------
r4937 | wyldfire | 2004-03-17 05:20:10 -0500 (Wed, 17 Mar 2004) | 3 lines


A local change which shouldn't have slipped in was removed again. (multi-purge)

------------------------------------------------------------------------
r4936 | rmanfredi | 2004-03-16 14:26:09 -0500 (Tue, 16 Mar 2004) | 4 lines

Removed assertion with side effect.
Changed error message to prefix it with "*** ERROR" for better standout
in the status bar, removing the function name which is useless for users.

------------------------------------------------------------------------
r4935 | rmanfredi | 2004-03-16 13:25:54 -0500 (Tue, 16 Mar 2004) | 2 lines

More bandaid to avoid crash due to memory corruption.

------------------------------------------------------------------------
r4934 | rmanfredi | 2004-03-16 13:23:49 -0500 (Tue, 16 Mar 2004) | 2 lines

Compiler warning cleanups.

------------------------------------------------------------------------
r4933 | rmanfredi | 2004-03-16 13:23:07 -0500 (Tue, 16 Mar 2004) | 2 lines

Added missing fi_purge_by_handle_list().

------------------------------------------------------------------------
r4932 | rmanfredi | 2004-03-15 18:33:40 -0500 (Mon, 15 Mar 2004) | 2 lines

Version of 2004-03-15.

------------------------------------------------------------------------
r4931 | rmanfredi | 2004-03-15 18:32:25 -0500 (Mon, 15 Mar 2004) | 3 lines

[GTK1] Added anti-crash countermeasures for memory corruption in GUI
search results data.  Does NOT fix the root cause!

------------------------------------------------------------------------
r4930 | wyldfire | 2004-03-15 18:28:31 -0500 (Mon, 15 Mar 2004) | 3 lines


Use better fallback regexp for filter.

------------------------------------------------------------------------
r4928 | wyldfire | 2004-03-13 18:48:38 -0500 (Sat, 13 Mar 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4927 | wyldfire | 2004-03-13 18:47:58 -0500 (Sat, 13 Mar 2004) | 3 lines


Add filtering to fileinfo pane.

------------------------------------------------------------------------
r4926 | wyldfire | 2004-03-13 18:44:46 -0500 (Sat, 13 Mar 2004) | 4 lines


Add filtering to fileinfo pane.
Minor layout change on the downloads pane.

------------------------------------------------------------------------
r4925 | wyldfire | 2004-03-13 18:41:59 -0500 (Sat, 13 Mar 2004) | 3 lines


[Gtk1] Add filtering to fileinfo pane.

------------------------------------------------------------------------
r4924 | wyldfire | 2004-03-13 18:40:40 -0500 (Sat, 13 Mar 2004) | 3 lines


Really remove file from disk when pressing "Purge" in the fileinfo page.

------------------------------------------------------------------------
r4923 | wyldfire | 2004-03-13 18:39:41 -0500 (Sat, 13 Mar 2004) | 4 lines


[Gtk1] [Gtk2] No longer clear "Select" field in the download queue
  after pressing [enter].

------------------------------------------------------------------------
r4922 | rmanfredi | 2004-03-10 14:53:54 -0500 (Wed, 10 Mar 2004) | 3 lines

Increased size of gnet header response for better Crawler replies, since
GTKG can support 200+ leaves.

------------------------------------------------------------------------
r4921 | rmanfredi | 2004-03-09 15:18:17 -0500 (Tue, 09 Mar 2004) | 2 lines

Version of 2004-03-09.

------------------------------------------------------------------------
r4920 | rmanfredi | 2004-03-09 15:16:35 -0500 (Tue, 09 Mar 2004) | 2 lines

Applied HSEP patch #6 from Thomas.

------------------------------------------------------------------------
r4919 | rmanfredi | 2004-03-09 15:12:48 -0500 (Tue, 09 Mar 2004) | 2 lines

Don't call make_room() with "needed <= 0".

------------------------------------------------------------------------
r4918 | nonamer | 2004-03-08 13:07:37 -0500 (Mon, 08 Mar 2004) | 3 lines

Make sure we don't pass a needed room of 0 when deviding by 3 and the value
is actually less then 3.

------------------------------------------------------------------------
r4916 | rmanfredi | 2004-03-07 14:58:14 -0500 (Sun, 07 Mar 2004) | 2 lines

Removed IPs of *.dip.t-dialin.net.

------------------------------------------------------------------------
r4914 | rmanfredi | 2004-03-06 10:23:50 -0500 (Sat, 06 Mar 2004) | 3 lines

Fixed typo that prevented renaming files to *.OK/*.BAD correctly when the
filename on disk was not readable (i.e. an URN).

------------------------------------------------------------------------
r4913 | rmanfredi | 2004-03-04 02:53:27 -0500 (Thu, 04 Mar 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r4912 | rmanfredi | 2004-03-04 02:53:10 -0500 (Thu, 04 Mar 2004) | 4 lines

On restart, when re-queuing a file with a computed SHA1 for moving, don't
forget to suspend all the queued files.  Normally this is done when we
start the SHA1 computing process, but that can be bypassed when restarting.

------------------------------------------------------------------------
r4911 | rmanfredi | 2004-03-03 18:16:19 -0500 (Wed, 03 Mar 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r4910 | rmanfredi | 2004-03-03 18:15:50 -0500 (Wed, 03 Mar 2004) | 3 lines

Added termination signal handler to allow background task to remove the
target file if GTKG is shutdown in the middle of a move operation.

------------------------------------------------------------------------
r4909 | rmanfredi | 2004-03-03 18:13:46 -0500 (Wed, 03 Mar 2004) | 4 lines

Removed constraint on bg_task_signal(): can be called from a non-running
task, since otherwise daemon taks can have difficulties using it in their
start/end callbacks!

------------------------------------------------------------------------
r4908 | wyldfire | 2004-03-03 13:56:04 -0500 (Wed, 03 Mar 2004) | 2 lines

regenerated glade files

------------------------------------------------------------------------
r4907 | nonamer | 2004-03-03 13:38:44 -0500 (Wed, 03 Mar 2004) | 2 lines

Fixed compiler warning

------------------------------------------------------------------------
r4906 | nonamer | 2004-03-03 13:09:31 -0500 (Wed, 03 Mar 2004) | 2 lines

HSEP typo fix

------------------------------------------------------------------------
r4905 | nonamer | 2004-03-03 12:07:41 -0500 (Wed, 03 Mar 2004) | 2 lines

Don't give up immediatly when a random chosen port fails. Retry with a new port

------------------------------------------------------------------------
r4904 | rmanfredi | 2004-03-03 01:59:38 -0500 (Wed, 03 Mar 2004) | 2 lines

Updated for 64-bit Gnet stats.

------------------------------------------------------------------------
r4903 | rmanfredi | 2004-03-03 01:58:15 -0500 (Wed, 03 Mar 2004) | 2 lines

New version from Paco Arjonilla.

------------------------------------------------------------------------
r4902 | nonamer | 2004-03-02 16:18:01 -0500 (Tue, 02 Mar 2004) | 4 lines

Use a random port on the first startup.

ps. Can someone regenerate the glade files?

------------------------------------------------------------------------
r4901 | rmanfredi | 2004-03-02 15:05:05 -0500 (Tue, 02 Mar 2004) | 2 lines

As per RFE #906834, use ISO timestamps in User-Agent string.

------------------------------------------------------------------------
r4900 | nonamer | 2004-03-02 12:19:02 -0500 (Tue, 02 Mar 2004) | 2 lines

Applied shell patch from Thadeu Lima de Souza Cascardo

------------------------------------------------------------------------
r4899 | nonamer | 2004-03-02 12:15:08 -0500 (Tue, 02 Mar 2004) | 2 lines

Intergrated patch HSEP patch 5

------------------------------------------------------------------------
r4898 | nonamer | 2004-03-02 12:14:18 -0500 (Tue, 02 Mar 2004) | 2 lines

Added some roadmap items from ram

------------------------------------------------------------------------
r4897 | rmanfredi | 2004-03-02 09:03:19 -0500 (Tue, 02 Mar 2004) | 2 lines

Fixed bug I introduced when cleaning up.

------------------------------------------------------------------------
r4896 | rmanfredi | 2004-03-02 02:08:23 -0500 (Tue, 02 Mar 2004) | 2 lines

Updates from RAM.

------------------------------------------------------------------------
r4895 | rmanfredi | 2004-03-02 02:02:48 -0500 (Tue, 02 Mar 2004) | 2 lines

Made header_get_feature() more robust, to avoid matching sub-words.

------------------------------------------------------------------------
r4894 | rmanfredi | 2004-03-01 15:43:15 -0500 (Mon, 01 Mar 2004) | 2 lines

Cleanup of code, and fixed a bug on big-endian machines.

------------------------------------------------------------------------
r4893 | nonamer | 2004-02-29 14:39:16 -0500 (Sun, 29 Feb 2004) | 2 lines

Version of 29/2/2004

------------------------------------------------------------------------
r4892 | nonamer | 2004-02-29 14:36:56 -0500 (Sun, 29 Feb 2004) | 2 lines

Included HSEP 3 and 4 patch

------------------------------------------------------------------------
r4890 | rmanfredi | 2004-02-27 18:35:41 -0500 (Fri, 27 Feb 2004) | 2 lines

Removed spurious parameter to rand().

------------------------------------------------------------------------
r4889 | rmanfredi | 2004-02-26 18:53:24 -0500 (Thu, 26 Feb 2004) | 2 lines

When printing a 64-bit char as an integer, one needs at most 20 chars!

------------------------------------------------------------------------
r4888 | nonamer | 2004-02-26 17:25:40 -0500 (Thu, 26 Feb 2004) | 2 lines

HSEP patch2 intergrated

------------------------------------------------------------------------
r4887 | nonamer | 2004-02-25 15:15:24 -0500 (Wed, 25 Feb 2004) | 2 lines

Applied updated patch from Thomas Schuerger

------------------------------------------------------------------------
r4885 | nonamer | 2004-02-25 11:48:27 -0500 (Wed, 25 Feb 2004) | 2 lines

Forgot one X-Features error

------------------------------------------------------------------------
r4884 | nonamer | 2004-02-25 11:06:16 -0500 (Wed, 25 Feb 2004) | 3 lines

Fixed a bug in nodes.c handshaking code regarding X-Features as pointed
out by Thomas Schuerger

------------------------------------------------------------------------
r4883 | nonamer | 2004-02-25 02:37:44 -0500 (Wed, 25 Feb 2004) | 2 lines

/tmp/cvs29xCbW

------------------------------------------------------------------------
r4882 | nonamer | 2004-02-24 14:34:05 -0500 (Tue, 24 Feb 2004) | 2 lines

Inclusion only for HSEP. Does not get compiled yet

------------------------------------------------------------------------
r4881 | nonamer | 2004-02-24 13:18:20 -0500 (Tue, 24 Feb 2004) | 2 lines

Included documentation about the X-Feature header as used by Bearshare

------------------------------------------------------------------------
r4880 | rmanfredi | 2004-02-21 09:36:42 -0500 (Sat, 21 Feb 2004) | 2 lines

Switched Gnet stats to 64-bit arithmetic.

------------------------------------------------------------------------
r4879 | rmanfredi | 2004-02-21 09:35:38 -0500 (Sat, 21 Feb 2004) | 2 lines

Added compact_size64().

------------------------------------------------------------------------
r4877 | rmanfredi | 2004-02-17 17:56:55 -0500 (Tue, 17 Feb 2004) | 3 lines

Regenerated with newer jmake rules without the "else exit 0;" to
allow "make -j" to complete on FreeBSD.

------------------------------------------------------------------------
r4876 | rmanfredi | 2004-02-16 17:12:34 -0500 (Mon, 16 Feb 2004) | 2 lines

Version of 16/02/2004.

------------------------------------------------------------------------
r4875 | rmanfredi | 2004-02-16 17:11:16 -0500 (Mon, 16 Feb 2004) | 6 lines

[From Emile le Vivre]
When a parent node is downloaded from the search tab (but not its
children), GTKG will now correctly update parent hashtable (fixes bug #892593).
When search results are sorted by count, GTKG will now correctly
re-sort column if a single node is downloaded

------------------------------------------------------------------------
r4874 | rmanfredi | 2004-02-16 13:51:52 -0500 (Mon, 16 Feb 2004) | 3 lines

Persist "errno" in signal handler if signal() is called.
Only re-instantiate the signal handler if it's not sticky.

------------------------------------------------------------------------
r4873 | rmanfredi | 2004-02-16 13:50:05 -0500 (Mon, 16 Feb 2004) | 2 lines

Regenerated with metaconfig.

------------------------------------------------------------------------
r4872 | rmanfredi | 2004-02-16 13:48:58 -0500 (Mon, 16 Feb 2004) | 2 lines

We need at least GTK+ 2.2.1 when 2.x is used.

------------------------------------------------------------------------
r4871 | rmanfredi | 2004-02-16 13:48:04 -0500 (Mon, 16 Feb 2004) | 2 lines

Added -liconv to the list of libs wanted.

------------------------------------------------------------------------
r4869 | rmanfredi | 2004-02-15 09:04:54 -0500 (Sun, 15 Feb 2004) | 4 lines

Activate "file_descriptor_shortage" each time we call ban_reclaim_fd()
and we succeed.  We set "file_descriptor_runout" when there is nothing
more to reclaim.  Both properties are reset after 10 minutes.

------------------------------------------------------------------------
r4868 | rmanfredi | 2004-02-15 09:04:13 -0500 (Sun, 15 Feb 2004) | 2 lines

New properties "file_descriptor_shortage" and "file_descriptor_runout".

------------------------------------------------------------------------
r4866 | rmanfredi | 2004-02-15 08:01:56 -0500 (Sun, 15 Feb 2004) | 3 lines

Must count two file descriptors per upload slot and active download: one
for the socket and one for the file being read/written.

------------------------------------------------------------------------
r4864 | rmanfredi | 2004-02-15 06:04:29 -0500 (Sun, 15 Feb 2004) | 2 lines

Must use integer arg when calling ctype functions (fixes bug #897252).

------------------------------------------------------------------------
r4863 | rmanfredi | 2004-02-15 05:46:06 -0500 (Sun, 15 Feb 2004) | 2 lines

Version of 15/02/2004.

------------------------------------------------------------------------
r4858 | rmanfredi | 2004-02-15 05:25:15 -0500 (Sun, 15 Feb 2004) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r4857 | rmanfredi | 2004-02-15 05:24:49 -0500 (Sun, 15 Feb 2004) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r4856 | rmanfredi | 2004-02-15 05:23:14 -0500 (Sun, 15 Feb 2004) | 3 lines

Even if we can't start the move/verify thread correctly for an item,
invoke the download state change callbacks.

------------------------------------------------------------------------
r4855 | rmanfredi | 2004-02-15 05:21:51 -0500 (Sun, 15 Feb 2004) | 2 lines

Protect against "errno == 0" on failed open().

------------------------------------------------------------------------
r4854 | rmanfredi | 2004-02-15 05:20:45 -0500 (Sun, 15 Feb 2004) | 3 lines

Also use "friendly download name" (i.e. non-URN) when renaming completed
file locally after a failed copy.

------------------------------------------------------------------------
r4853 | rmanfredi | 2004-02-14 06:06:24 -0500 (Sat, 14 Feb 2004) | 2 lines

Deleted U/new/pkgsrc.U.

------------------------------------------------------------------------
r4852 | rmanfredi | 2004-02-14 06:05:51 -0500 (Sat, 14 Feb 2004) | 2 lines

Deleted -- integrated in metaconfig.

------------------------------------------------------------------------
r4851 | wyldfire | 2004-02-14 00:17:06 -0500 (Sat, 14 Feb 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4850 | wyldfire | 2004-02-14 00:15:08 -0500 (Sat, 14 Feb 2004) | 5 lines


Removed property PROP_JUMP_TO_DOWNLOADS. I don't think we need this anymore.
[Gtk1] Added PROP_SEARCH_CASESENSE. This controls if the name column in the
  search results is sorted case-sensitive.

------------------------------------------------------------------------
r4849 | wyldfire | 2004-02-14 00:14:27 -0500 (Sat, 14 Feb 2004) | 3 lines


Removed property PROP_JUMP_TO_DOWNLOADS. I don't think we need this anymore

------------------------------------------------------------------------
r4848 | wyldfire | 2004-02-14 00:14:00 -0500 (Sat, 14 Feb 2004) | 8 lines


Removed property PROP_JUMP_TO_DOWNLOADS. I don't think we need this anymore.
Added PROP_SEARCH_CASESENSE. This controls if the name column in the
  search results is sorted case-sensitive.
Cleant up a few places in search_gui.c and fixed part 2 of bug #892593
  in the process. Maybe part one is also fixed.
Use gtk_ctree_count_node_children() from gtk-missing.[ch].

------------------------------------------------------------------------
r4847 | wyldfire | 2004-02-14 00:11:40 -0500 (Sat, 14 Feb 2004) | 5 lines


Try to avoid memory corruption during selection in search results due
  to recursive calls of on_ctree_search_results_select_row().
  Should close #892802.

------------------------------------------------------------------------
r4846 | wyldfire | 2004-02-14 00:09:41 -0500 (Sat, 14 Feb 2004) | 4 lines


[Gtk2] Fixed compiler warnings about redefinition of g_string_printf and
  g_string_printfa in malloc.h.

------------------------------------------------------------------------
r4845 | wyldfire | 2004-02-14 00:09:17 -0500 (Sat, 14 Feb 2004) | 3 lines


Number of leaks is now reported in the leak summary.

------------------------------------------------------------------------
r4844 | wyldfire | 2004-02-14 00:07:54 -0500 (Sat, 14 Feb 2004) | 4 lines


Removed property PROP_JUMP_TO_DOWNLOADS.
   I don't think we need this anymore.

------------------------------------------------------------------------
r4843 | wyldfire | 2004-02-14 00:06:15 -0500 (Sat, 14 Feb 2004) | 3 lines


Added a general gtk_ctree_count_node_children() to gtk-missing.[ch].

------------------------------------------------------------------------
r4842 | wyldfire | 2004-02-14 00:05:46 -0500 (Sat, 14 Feb 2004) | 5 lines


Removed property PROP_JUMP_TO_DOWNLOADS. I don't think we need this anymore.
Added PROP_SEARCH_CASESENSE. This controls if the name column in the
  search results is sorted case-sensitive.

------------------------------------------------------------------------
r4841 | wyldfire | 2004-02-14 00:04:06 -0500 (Sat, 14 Feb 2004) | 3 lines


Removed property PROP_JUMP_TO_DOWNLOADS.

------------------------------------------------------------------------
r4840 | wyldfire | 2004-02-14 00:03:39 -0500 (Sat, 14 Feb 2004) | 6 lines


Small GUI layout fixed in the downloads and fileinfo panes.
Added PROP_SEARCH_CASESENSE. This controls if the name column in the
  search results is sorted case-sensitive.
Removed property PROP_JUMP_TO_DOWNLOADS.

------------------------------------------------------------------------
r4839 | wyldfire | 2004-02-13 23:05:11 -0500 (Fri, 13 Feb 2004) | 4 lines


Try to avoid memory corruption during selection in search results due
  to recursive calls of on_ctree_search_results_select_row()

------------------------------------------------------------------------
r4834 | nonamer | 2004-02-13 17:29:40 -0500 (Fri, 13 Feb 2004) | 2 lines

Valgrind warning fix

------------------------------------------------------------------------
r4833 | rmanfredi | 2004-02-13 17:18:21 -0500 (Fri, 13 Feb 2004) | 2 lines

Fixed compilation with ICU.

------------------------------------------------------------------------
r4832 | nonamer | 2004-02-13 17:17:52 -0500 (Fri, 13 Feb 2004) | 2 lines

Removed unused variable

------------------------------------------------------------------------
r4831 | rmanfredi | 2004-02-13 17:13:43 -0500 (Fri, 13 Feb 2004) | 2 lines

Don't call unicode_canonize() on non-UTF8 strings.

------------------------------------------------------------------------
r4829 | nonamer | 2004-02-12 14:48:36 -0500 (Thu, 12 Feb 2004) | 2 lines

Requested email adres changed

------------------------------------------------------------------------
r4823 | nonamer | 2004-02-09 12:04:55 -0500 (Mon, 09 Feb 2004) | 2 lines

Don't allow to 'overflow' the rw pointer

------------------------------------------------------------------------
r4822 | nonamer | 2004-02-08 14:55:34 -0500 (Sun, 08 Feb 2004) | 3 lines

New TODO describes briefly the features planned for 0.94. Please
take care to sort by importance

------------------------------------------------------------------------
r4821 | rmanfredi | 2004-02-08 06:42:56 -0500 (Sun, 08 Feb 2004) | 2 lines

Regenerated with newer metaconfig.  Should fix bug #887539.

------------------------------------------------------------------------
r4820 | rmanfredi | 2004-02-08 06:35:35 -0500 (Sun, 08 Feb 2004) | 2 lines

Removed U/modified/Config_sh.U as changes are now integrated into metaconfig.

------------------------------------------------------------------------
r4819 | rmanfredi | 2004-02-07 09:19:14 -0500 (Sat, 07 Feb 2004) | 2 lines

Added missing gtk2-gnutella.gladep to the manifests.

------------------------------------------------------------------------
r4815 | nonamer | 2004-02-06 12:51:28 -0500 (Fri, 06 Feb 2004) | 2 lines

Port from 0.93.x, fix compiler warnings and a possible segfault when using ICU

------------------------------------------------------------------------
r4813 | wyldfire | 2004-02-06 06:04:40 -0500 (Fri, 06 Feb 2004) | 2 lines

make Gtk2 compile again

------------------------------------------------------------------------
r4812 | wyldfire | 2004-02-06 06:03:01 -0500 (Fri, 06 Feb 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4811 | wyldfire | 2004-02-06 06:01:52 -0500 (Fri, 06 Feb 2004) | 5 lines


Fix sorting by name in the search panel. Result from
  search_gui_compare_records() was interpreted wrong.
Changed search_gui_quick_sort_array_swap to be faster.

------------------------------------------------------------------------
r4810 | emilelevivre | 2004-02-02 23:59:27 -0500 (Mon, 02 Feb 2004) | 6 lines

[GTK1] Fixes errors in autoselect routine introduced by previous 'gui_record struct' patch, including fixing
segfaults occuring when all search results are selected and all cursor keys are pressed simultaneously.

[GTK1] Fixes "cannot unlink..." warnings and temporary gui lockup generated when downloads are aborted by name or
sha1.

------------------------------------------------------------------------
r4809 | emilelevivre | 2004-02-02 18:59:42 -0500 (Mon, 02 Feb 2004) | 4 lines

[GTK1] Added gui_record struct to the search gui.  This should
correct sorting problems with Passive searches and clean up the way we
werekeeping track of grouped search results.

------------------------------------------------------------------------
r4808 | rmanfredi | 2004-02-01 15:29:07 -0500 (Sun, 01 Feb 2004) | 2 lines

Bug in looks_like_urn() was not where I thought it was...

------------------------------------------------------------------------
r4805 | rmanfredi | 2004-02-01 15:03:35 -0500 (Sun, 01 Feb 2004) | 2 lines

Can't check for USE_GTK2 before including config.h via common.h...

------------------------------------------------------------------------
r4804 | wyldfire | 2004-02-01 15:01:20 -0500 (Sun, 01 Feb 2004) | 3 lines


Move the USE_GTK2 ifdef to the right place (above the includes).

------------------------------------------------------------------------
r4803 | rmanfredi | 2004-02-01 15:00:11 -0500 (Sun, 01 Feb 2004) | 2 lines

Version of 01/02/2004.

------------------------------------------------------------------------
r4802 | rmanfredi | 2004-02-01 14:29:48 -0500 (Sun, 01 Feb 2004) | 2 lines

Fixed looks_like_urn() which was not detecting names made out of a single SHA1.

------------------------------------------------------------------------
r4801 | rmanfredi | 2004-02-01 14:28:39 -0500 (Sun, 01 Feb 2004) | 2 lines

Code cleanup: commented-out unused code and removed spurious declaration.

------------------------------------------------------------------------
r4800 | rmanfredi | 2004-02-01 14:27:32 -0500 (Sun, 01 Feb 2004) | 2 lines

Code cleanup.

------------------------------------------------------------------------
r4799 | rmanfredi | 2004-02-01 14:26:53 -0500 (Sun, 01 Feb 2004) | 2 lines

Added IP:port + vendor string to warning about weird HTTP status.

------------------------------------------------------------------------
r4794 | rmanfredi | 2004-02-01 09:36:57 -0500 (Sun, 01 Feb 2004) | 2 lines

Uses new LINUX_SYSTEM symbol instead of "#if linux".

------------------------------------------------------------------------
r4793 | rmanfredi | 2004-02-01 09:36:16 -0500 (Sun, 01 Feb 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r4792 | rmanfredi | 2004-02-01 09:35:42 -0500 (Sun, 01 Feb 2004) | 2 lines

Only compile pbarcellrenderer_gui2.c for GTK2.

------------------------------------------------------------------------
r4791 | rmanfredi | 2004-02-01 09:35:09 -0500 (Sun, 01 Feb 2004) | 2 lines

Removed unused variables.

------------------------------------------------------------------------
r4790 | rmanfredi | 2004-02-01 09:32:37 -0500 (Sun, 01 Feb 2004) | 2 lines

Cell rendering is GTK2-specific.

------------------------------------------------------------------------
r4789 | rmanfredi | 2004-02-01 08:46:18 -0500 (Sun, 01 Feb 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r4788 | rmanfredi | 2004-02-01 08:44:57 -0500 (Sun, 01 Feb 2004) | 2 lines

Moved pbarcellrenderer_gui2.c to the proper position in filelist.

------------------------------------------------------------------------
r4787 | graaff | 2004-02-01 08:22:08 -0500 (Sun, 01 Feb 2004) | 2 lines

Show progress bars in the up- and download lists to indicate progress.

------------------------------------------------------------------------
r4786 | rmanfredi | 2004-02-01 07:03:28 -0500 (Sun, 01 Feb 2004) | 3 lines

Don't include a partial file in the mesh if we don't have 512K of it, or
at least 10% of it.

------------------------------------------------------------------------
r4785 | rmanfredi | 2004-01-31 13:38:07 -0500 (Sat, 31 Jan 2004) | 2 lines

When moving files, don't leave the target file around when an error occurs.

------------------------------------------------------------------------
r4784 | rmanfredi | 2004-01-31 13:35:54 -0500 (Sat, 31 Jan 2004) | 2 lines

Allow main window to shrink width below 933 pixels (fixes bug #885659).

------------------------------------------------------------------------
r4783 | rmanfredi | 2004-01-31 13:32:17 -0500 (Sat, 31 Jan 2004) | 2 lines

Re-opening the 0.94u line.

------------------------------------------------------------------------
r4782 | rmanfredi | 2004-01-27 02:15:42 -0500 (Tue, 27 Jan 2004) | 2 lines

Security fix in proxy code [Found by Leonardo H. Liporati].

------------------------------------------------------------------------
r4777 | rmanfredi | 2004-01-25 15:20:46 -0500 (Sun, 25 Jan 2004) | 2 lines

Fixed compilation warnings.

------------------------------------------------------------------------
r4776 | rmanfredi | 2004-01-25 14:46:23 -0500 (Sun, 25 Jan 2004) | 2 lines

Added missing override.h.

------------------------------------------------------------------------
r4775 | rmanfredi | 2004-01-25 14:31:21 -0500 (Sun, 25 Jan 2004) | 2 lines

Use new metaconfig $msgmerge_update variable.

------------------------------------------------------------------------
r4774 | rmanfredi | 2004-01-25 14:29:51 -0500 (Sun, 25 Jan 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r4773 | rmanfredi | 2004-01-25 14:28:55 -0500 (Sun, 25 Jan 2004) | 3 lines

Leave out GTK_INTERFACE from ver.c, as we don't need it and it would cause
duplicate definition.

------------------------------------------------------------------------
r4772 | rmanfredi | 2004-01-25 14:28:06 -0500 (Sun, 25 Jan 2004) | 2 lines

Added new files.

------------------------------------------------------------------------
r4771 | rmanfredi | 2004-01-25 14:26:04 -0500 (Sun, 25 Jan 2004) | 2 lines

Created.

------------------------------------------------------------------------
r4770 | rmanfredi | 2004-01-25 13:41:26 -0500 (Sun, 25 Jan 2004) | 2 lines

Release 0.93.3 stable.

------------------------------------------------------------------------
r4769 | rmanfredi | 2004-01-25 11:11:43 -0500 (Sun, 25 Jan 2004) | 3 lines

If the last QRP patch message contains only zlib trailer data to mark
the end of stream, don't consider it as a spurious message: just ignore it.

------------------------------------------------------------------------
r4768 | rmanfredi | 2004-01-25 07:43:20 -0500 (Sun, 25 Jan 2004) | 2 lines

Turned RANDOM_MASK definition of 2147483647 into 0x7fffffff for readability.

------------------------------------------------------------------------
r4766 | rmanfredi | 2004-01-20 03:38:15 -0500 (Tue, 20 Jan 2004) | 4 lines

Only call message_add() at the end of forward_message() since that call
could modify the validity of the `dest' list we get as an argument.
(should fix bug #846755 and bug #876011).

------------------------------------------------------------------------
r4765 | rmanfredi | 2004-01-19 16:30:56 -0500 (Mon, 19 Jan 2004) | 2 lines

Updated.

------------------------------------------------------------------------
r4764 | rmanfredi | 2004-01-19 16:29:07 -0500 (Mon, 19 Jan 2004) | 3 lines

Fix overwriting of already read data when parsing more than one line
[Patch from Thadeu Lima de Souza Cascardo, fixes bug #857075].

------------------------------------------------------------------------
r4763 | rmanfredi | 2004-01-19 15:37:15 -0500 (Mon, 19 Jan 2004) | 2 lines

Version of 19/01/2004.

------------------------------------------------------------------------
r4762 | rmanfredi | 2004-01-19 15:29:01 -0500 (Mon, 19 Jan 2004) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r4761 | rmanfredi | 2004-01-19 15:28:18 -0500 (Mon, 19 Jan 2004) | 2 lines

Don't call downloads_gui_init() before settings_gui_init().

------------------------------------------------------------------------
r4760 | rmanfredi | 2004-01-19 15:27:36 -0500 (Mon, 19 Jan 2004) | 2 lines

Removed blank line.

------------------------------------------------------------------------
r4759 | rmanfredi | 2004-01-19 15:26:26 -0500 (Mon, 19 Jan 2004) | 2 lines

Abort download_clear_stopped() if there's nothing in `sl_unqueued'.

------------------------------------------------------------------------
r4758 | rmanfredi | 2004-01-18 16:21:14 -0500 (Sun, 18 Jan 2004) | 2 lines

Version of 18/01/2004.

------------------------------------------------------------------------
r4757 | rmanfredi | 2004-01-18 16:06:54 -0500 (Sun, 18 Jan 2004) | 2 lines

Added vendor to some warning.

------------------------------------------------------------------------
r4756 | rmanfredi | 2004-01-18 16:06:27 -0500 (Sun, 18 Jan 2004) | 2 lines

Periodically call gui_update_download_clear_now() from download_timer().

------------------------------------------------------------------------
r4755 | rmanfredi | 2004-01-18 16:05:15 -0500 (Sun, 18 Jan 2004) | 4 lines

Must perform downloads_gui_init() before settings_gui_init() due to
the use of property callbacks that can trigger GUI code, and because we
now cache the results of lookup_widget() in downloads_gui.c.

------------------------------------------------------------------------
r4754 | rmanfredi | 2004-01-18 16:03:45 -0500 (Sun, 18 Jan 2004) | 4 lines

Routine gui_update_download_clear() now only records that we need to
figure out the sensitivity of "Clear Stopped".  However the real change is
only performed once per second via gui_update_download_clear_now().

------------------------------------------------------------------------
r4753 | rmanfredi | 2004-01-18 16:01:36 -0500 (Sun, 18 Jan 2004) | 2 lines

Optimized to do without the costly count_node_children() routine.

------------------------------------------------------------------------
r4752 | rmanfredi | 2004-01-18 14:16:17 -0500 (Sun, 18 Jan 2004) | 2 lines

Replaced useless "," with "&&" in for().

------------------------------------------------------------------------
r4751 | rmanfredi | 2004-01-18 14:15:55 -0500 (Sun, 18 Jan 2004) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r4750 | eqom14 | 2004-01-18 12:10:12 -0500 (Sun, 18 Jan 2004) | 2 lines

Cleaned dead GWCs and added a very few - down to 60 GWCs from 72.  GWebCache system crisis by summer?

------------------------------------------------------------------------
r4749 | wyldfire | 2004-01-18 11:12:41 -0500 (Sun, 18 Jan 2004) | 2 lines

Use host_is_valid to check if ip and port are sane

------------------------------------------------------------------------
r4748 | wyldfire | 2004-01-18 11:07:46 -0500 (Sun, 18 Jan 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4747 | wyldfire | 2004-01-18 11:07:09 -0500 (Sun, 18 Jan 2004) | 6 lines


Replaced a number of g_free with G_FREE_NULL.
Count number of unstable nodes and hits on node_is_bad and node_ip_is_bad.
  Numbers are reported if core debug level is > 1.
Don't add bad ip adresses to the host caches in extract_field_pongs.

------------------------------------------------------------------------
r4746 | rmanfredi | 2004-01-18 09:18:13 -0500 (Sun, 18 Jan 2004) | 2 lines

Fixed default returned value for add_host_to_cache() to FALSE.

------------------------------------------------------------------------
r4745 | wyldfire | 2004-01-18 08:19:28 -0500 (Sun, 18 Jan 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4744 | eqom14 | 2004-01-18 08:17:01 -0500 (Sun, 18 Jan 2004) | 2 lines

Mentioned the Configure -O option, minor fixes.

------------------------------------------------------------------------
r4743 | wyldfire | 2004-01-18 08:05:35 -0500 (Sun, 18 Jan 2004) | 3 lines


Disable "expand all" and "collapse all" when no search is open.

------------------------------------------------------------------------
r4742 | wyldfire | 2004-01-18 08:04:40 -0500 (Sun, 18 Jan 2004) | 4 lines


Disable "expand all" and "collapse all" when no search is open.
Fix possible crash if sorting on less then 50 results (Thanks Emile).

------------------------------------------------------------------------
r4741 | rmanfredi | 2004-01-18 07:34:41 -0500 (Sun, 18 Jan 2004) | 5 lines

Try to account for PARQ active upload slots when looking whether we have
enough file descriptors to become an UP, but lower the impact of banned
fd since we can now steal them when we run out of available ones.
Lowered banned IP timeout to 6 hours, and mark IP as bad on connect timeout.

------------------------------------------------------------------------
r4740 | rmanfredi | 2004-01-18 07:32:42 -0500 (Sun, 18 Jan 2004) | 2 lines

Regenerated with newer template.

------------------------------------------------------------------------
r4739 | rmanfredi | 2004-01-18 07:31:33 -0500 (Sun, 18 Jan 2004) | 4 lines

Changed minimum for "node_connected_timeout" to 120 and the default to 180,
since we must account for possible flow-control, both at the node and TCP
level.

------------------------------------------------------------------------
r4738 | rmanfredi | 2004-01-18 07:28:15 -0500 (Sun, 18 Jan 2004) | 2 lines

Include "override.h", not "malloc.h".

------------------------------------------------------------------------
r4730 | wyldfire | 2004-01-17 20:11:57 -0500 (Sat, 17 Jan 2004) | 4 lines


Fixed crash when "expand all" or "collapse all" was pressed and
  no search was open.

------------------------------------------------------------------------
r4728 | rmanfredi | 2004-01-17 19:13:11 -0500 (Sat, 17 Jan 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r4727 | wyldfire | 2004-01-17 19:08:04 -0500 (Sat, 17 Jan 2004) | 4 lines


Hopefully fixed a few memory leaks in the download pane probably caused
   by calling g_list_free() not on the first element of a GList.

------------------------------------------------------------------------
r4726 | wyldfire | 2004-01-17 18:55:26 -0500 (Sat, 17 Jan 2004) | 4 lines


In the search pane two more leaks reported by the leak detection
   code should be fixed.

------------------------------------------------------------------------
r4725 | wyldfire | 2004-01-17 18:35:53 -0500 (Sat, 17 Jan 2004) | 4 lines


Hopefully fixed a memleak probably caused by calling g_list_free() not on the
  first element of a GList.

------------------------------------------------------------------------
r4724 | rmanfredi | 2004-01-17 18:01:30 -0500 (Sat, 17 Jan 2004) | 3 lines

Fixed stupid (recent?) typo preventing proper recording of the user-agent
for uploads.

------------------------------------------------------------------------
r4723 | wyldfire | 2004-01-17 16:12:51 -0500 (Sat, 17 Jan 2004) | 3 lines


Cleaned up gtk-missing.h.

------------------------------------------------------------------------
r4722 | wyldfire | 2004-01-17 16:12:28 -0500 (Sat, 17 Jan 2004) | 6 lines


Hopefully fixed sorting when any node in the results was expanded
  by iterating only over the top-level nodes when sorting. Refactored
  some of the code in the process and added a couple of FIXMEs for later
  releases.

------------------------------------------------------------------------
r4721 | rmanfredi | 2004-01-17 13:49:38 -0500 (Sat, 17 Jan 2004) | 2 lines

Added g_string_*() trapping when -DTRACK_MALLOC.

------------------------------------------------------------------------
r4720 | rmanfredi | 2004-01-17 13:49:03 -0500 (Sat, 17 Jan 2004) | 2 lines

Made sure we cleanup the banned mesh by IP at close time.

------------------------------------------------------------------------
r4718 | rmanfredi | 2004-01-17 08:46:23 -0500 (Sat, 17 Jan 2004) | 3 lines

Redirect big walloc() calls to malloc_track() under TRACK_MALLOC,
instead of g_malloc(), to not lose the source of the leak.

------------------------------------------------------------------------
r4717 | rmanfredi | 2004-01-17 08:39:34 -0500 (Sat, 17 Jan 2004) | 2 lines

Removed needless atom_str_get() calls.

------------------------------------------------------------------------
r4714 | rmanfredi | 2004-01-17 05:22:46 -0500 (Sat, 17 Jan 2004) | 2 lines

Fixed incorrect list_delete_link_track() implementation causing memory havoc.

------------------------------------------------------------------------
r4713 | rmanfredi | 2004-01-17 04:30:45 -0500 (Sat, 17 Jan 2004) | 2 lines

Allow 6 unanswered "alive pings" in a row instead of 4 for UP connections.

------------------------------------------------------------------------
r4712 | rmanfredi | 2004-01-16 18:34:02 -0500 (Fri, 16 Jan 2004) | 2 lines

Version of 16/01/2004.

------------------------------------------------------------------------
r4711 | rmanfredi | 2004-01-16 17:32:52 -0500 (Fri, 16 Jan 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r4710 | rmanfredi | 2004-01-16 17:24:02 -0500 (Fri, 16 Jan 2004) | 2 lines

Made an explict free_data() callback for TRACK_MALLOC.

------------------------------------------------------------------------
r4709 | rmanfredi | 2004-01-16 16:54:10 -0500 (Fri, 16 Jan 2004) | 2 lines

Forgot to cleanup d->escaped_name at exit time.

------------------------------------------------------------------------
r4708 | rmanfredi | 2004-01-16 16:53:03 -0500 (Fri, 16 Jan 2004) | 2 lines

Fixed possible atom leak.

------------------------------------------------------------------------
r4707 | rmanfredi | 2004-01-16 16:27:50 -0500 (Fri, 16 Jan 2004) | 2 lines

Forgot to initialize local variable to NULL in slist_insert_sorted_track().

------------------------------------------------------------------------
r4706 | rmanfredi | 2004-01-16 15:45:07 -0500 (Fri, 16 Jan 2004) | 2 lines

Fixed list leak.

------------------------------------------------------------------------
r4705 | rmanfredi | 2004-01-16 15:32:24 -0500 (Fri, 16 Jan 2004) | 2 lines

New signature for hash_list_free() to make it possible to use TRACK_MALLOC.

------------------------------------------------------------------------
r4704 | rmanfredi | 2004-01-16 15:31:27 -0500 (Fri, 16 Jan 2004) | 2 lines

Commented out unused search_results_compare_func().

------------------------------------------------------------------------
r4703 | rmanfredi | 2004-01-16 15:30:01 -0500 (Fri, 16 Jan 2004) | 3 lines

Added trapping of g_slist_() and g_list_() routines that allocate linkable
objects under the hood.  Added trapping for hash_list new/free as well.

------------------------------------------------------------------------
r4702 | rmanfredi | 2004-01-16 03:01:52 -0500 (Fri, 16 Jan 2004) | 2 lines

Make sure to reset n->rxfc to NULL when freeing, to avoid problems at shutdown.

------------------------------------------------------------------------
r4701 | wyldfire | 2004-01-15 19:32:01 -0500 (Thu, 15 Jan 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4700 | wyldfire | 2004-01-15 19:24:02 -0500 (Thu, 15 Jan 2004) | 3 lines


Integrated fast-sorting patch from Emile le Vivre.

------------------------------------------------------------------------
r4699 | wyldfire | 2004-01-15 19:22:15 -0500 (Thu, 15 Jan 2004) | 3 lines


Replaced a number of g_free with G_FREE_NULL.

------------------------------------------------------------------------
r4698 | wyldfire | 2004-01-15 19:20:56 -0500 (Thu, 15 Jan 2004) | 3 lines


Moved hash_list code from glib-missing.[ch] to hashlist.[ch].

------------------------------------------------------------------------
r4697 | rmanfredi | 2004-01-15 19:10:18 -0500 (Thu, 15 Jan 2004) | 2 lines

Christian Biere is the author of that file, not me.

------------------------------------------------------------------------
r4696 | rmanfredi | 2004-01-15 19:06:59 -0500 (Thu, 15 Jan 2004) | 2 lines

Regenerated.

------------------------------------------------------------------------
r4695 | wyldfire | 2004-01-15 19:06:37 -0500 (Thu, 15 Jan 2004) | 3 lines


Moved hash_list code from glib-missing.[ch] to hashlist.[ch].

------------------------------------------------------------------------
r4694 | rmanfredi | 2004-01-15 19:06:34 -0500 (Thu, 15 Jan 2004) | 2 lines

Added hashlist.c.

------------------------------------------------------------------------
r4693 | wyldfire | 2004-01-15 19:04:03 -0500 (Thu, 15 Jan 2004) | 4 lines


Moved init code from main_gui to downloads_gui.
Replaced a number of g_free with G_FREE_NULL

------------------------------------------------------------------------
r4692 | wyldfire | 2004-01-15 19:02:11 -0500 (Thu, 15 Jan 2004) | 3 lines


Replaced a number of g_free with G_FREE_NULL.

------------------------------------------------------------------------
r4691 | wyldfire | 2004-01-15 19:00:14 -0500 (Thu, 15 Jan 2004) | 5 lines


Made dmesh_remove state if it really removed something (preparetion
   for XNalt support).
Replaced a number of g_free with G_FREE_NUL

------------------------------------------------------------------------
r4690 | rmanfredi | 2004-01-15 18:59:22 -0500 (Thu, 15 Jan 2004) | 2 lines

Made bg_task_signal() public.

------------------------------------------------------------------------
r4689 | rmanfredi | 2004-01-15 18:58:30 -0500 (Thu, 15 Jan 2004) | 2 lines

Fixed signature typo for hashtable_destroy_track().

------------------------------------------------------------------------
r4688 | rmanfredi | 2004-01-15 18:57:35 -0500 (Thu, 15 Jan 2004) | 2 lines

Commented out unused function.

------------------------------------------------------------------------
r4687 | wyldfire | 2004-01-15 18:54:21 -0500 (Thu, 15 Jan 2004) | 4 lines


Moved "close" button for searches to a more convenient
   position in the upper right

------------------------------------------------------------------------
r4686 | wyldfire | 2004-01-15 18:51:48 -0500 (Thu, 15 Jan 2004) | 3 lines


Replaced a number of g_free with G_FREE_NULL

------------------------------------------------------------------------
r4685 | rmanfredi | 2004-01-15 18:36:26 -0500 (Thu, 15 Jan 2004) | 2 lines

Added src/malloc.[ch].

------------------------------------------------------------------------
r4684 | rmanfredi | 2004-01-15 18:33:32 -0500 (Thu, 15 Jan 2004) | 2 lines

Now traps g_hash_table_new() and g_hash_table_destroy() calls.

------------------------------------------------------------------------
r4683 | rmanfredi | 2004-01-15 16:41:13 -0500 (Thu, 15 Jan 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r4682 | rmanfredi | 2004-01-15 16:31:42 -0500 (Thu, 15 Jan 2004) | 2 lines

Fixed atom leak.

------------------------------------------------------------------------
r4681 | rmanfredi | 2004-01-15 16:19:21 -0500 (Thu, 15 Jan 2004) | 2 lines

Fixed atom leak.

------------------------------------------------------------------------
r4680 | rmanfredi | 2004-01-15 16:18:53 -0500 (Thu, 15 Jan 2004) | 2 lines

Simplified leak summarizing code: only uses a single hash table now.

------------------------------------------------------------------------
r4679 | rmanfredi | 2004-01-15 16:18:14 -0500 (Thu, 15 Jan 2004) | 2 lines

Added tracking for atoms (enabled with -DTRACK_ATOMS).

------------------------------------------------------------------------
r4678 | rmanfredi | 2004-01-15 02:17:12 -0500 (Thu, 15 Jan 2004) | 2 lines

Fixed typo spotted by Carl Erhorn.

------------------------------------------------------------------------
r4676 | rmanfredi | 2004-01-14 18:46:17 -0500 (Wed, 14 Jan 2004) | 3 lines

Also use the leak_*() routines to gather and summarize leaks when reporting
for a zone (with -DTRACK_ZALLOC).

------------------------------------------------------------------------
r4675 | rmanfredi | 2004-01-14 18:37:41 -0500 (Wed, 14 Jan 2004) | 2 lines

Now counts and shows # of blocks leaked at a given place in the summary.

------------------------------------------------------------------------
r4673 | rmanfredi | 2004-01-14 16:33:34 -0500 (Wed, 14 Jan 2004) | 2 lines

Removed spurious comment termination.

------------------------------------------------------------------------
r4672 | rmanfredi | 2004-01-14 16:16:10 -0500 (Wed, 14 Jan 2004) | 2 lines

Debugging malloc now also traps g_strfreev() and g_strsplit().

------------------------------------------------------------------------
r4671 | rmanfredi | 2004-01-14 15:52:33 -0500 (Wed, 14 Jan 2004) | 2 lines

Added trailing inclusion of "override.h" to all C files.

------------------------------------------------------------------------
r4670 | rmanfredi | 2004-01-14 15:44:24 -0500 (Wed, 14 Jan 2004) | 2 lines

Added custom debugging malloc support.

------------------------------------------------------------------------
r4668 | eqom14 | 2004-01-14 05:11:41 -0500 (Wed, 14 Jan 2004) | 2 lines

No longer neccessary to increment NEWSMIN and NEWSMAX so remove 1 step of the release process.

------------------------------------------------------------------------
r4661 | rmanfredi | 2004-01-13 01:54:20 -0500 (Tue, 13 Jan 2004) | 2 lines

Removed spurious g_strdup() call.

------------------------------------------------------------------------
r4660 | rmanfredi | 2004-01-12 17:34:28 -0500 (Mon, 12 Jan 2004) | 2 lines

Version of 12/01/2004.

------------------------------------------------------------------------
r4659 | rmanfredi | 2004-01-12 17:32:31 -0500 (Mon, 12 Jan 2004) | 4 lines

Changed minimum for "node_tx_flowc_timeout" to 90 secs (was 60 secs)
since new "swift" mode needs at least 70 secs to clear the FC condition
with 95% probability.

------------------------------------------------------------------------
r4658 | rmanfredi | 2004-01-12 17:27:51 -0500 (Mon, 12 Jan 2004) | 2 lines

Typo fix.

------------------------------------------------------------------------
r4657 | rmanfredi | 2004-01-12 16:48:35 -0500 (Mon, 12 Jan 2004) | 4 lines

The "swift" mode is pretty efficient, but the timers for leaf nodes were too
low: leaf traffic is not a priority and we need to keep precious query hits
for them as long as we can.

------------------------------------------------------------------------
r4656 | rmanfredi | 2004-01-12 16:23:06 -0500 (Mon, 12 Jan 2004) | 2 lines

Suppressed mq_leave_swift(), do all the job in mq_leave_flowc().

------------------------------------------------------------------------
r4655 | rmanfredi | 2004-01-12 16:17:52 -0500 (Mon, 12 Jan 2004) | 2 lines

Tell node when we enter/leave "swift" mode so that flags can be updated.

------------------------------------------------------------------------
r4654 | rmanfredi | 2004-01-12 16:02:21 -0500 (Mon, 12 Jan 2004) | 2 lines

Forgot to reset q->swift_ev to NULL when we leave "swift" mode.

------------------------------------------------------------------------
r4653 | rmanfredi | 2004-01-12 15:34:55 -0500 (Mon, 12 Jan 2004) | 5 lines

New flow-control mode called "swift" mode, shown with an 'S' instead of 'F'.
This mode is activated when we have spent some time in flow-control and
need to flush the queue faster, at the price of dropping more messages,
and possibly some query hits.

------------------------------------------------------------------------
r4652 | rmanfredi | 2004-01-12 15:29:08 -0500 (Mon, 12 Jan 2004) | 2 lines

Fixed possible uninitialized variable usage.

------------------------------------------------------------------------
r4651 | rmanfredi | 2004-01-12 15:24:57 -0500 (Mon, 12 Jan 2004) | 2 lines

Fixed printf format error.

------------------------------------------------------------------------
r4647 | rmanfredi | 2004-01-12 07:11:35 -0500 (Mon, 12 Jan 2004) | 2 lines

Must use file_fopen_missing() when reading the pid file.

------------------------------------------------------------------------
r4646 | rmanfredi | 2004-01-12 07:06:26 -0500 (Mon, 12 Jan 2004) | 2 lines

Fixed free(0) call and switched to walloc() for subscriber allocation.

------------------------------------------------------------------------
r4645 | rmanfredi | 2004-01-12 06:16:25 -0500 (Mon, 12 Jan 2004) | 3 lines

Don't ping all our neighbours on pong-cache expiration: only select
20% of them, randomly, with at least 3 being selected.

------------------------------------------------------------------------
r4644 | rmanfredi | 2004-01-12 06:14:57 -0500 (Mon, 12 Jan 2004) | 4 lines

New property "banned_count".
Default number of node connections raised to 12 now that many servents
support high outdegree.

------------------------------------------------------------------------
r4643 | rmanfredi | 2004-01-12 06:13:11 -0500 (Mon, 12 Jan 2004) | 2 lines

Display the amount of file descriptors currently used for banning.

------------------------------------------------------------------------
r4639 | rmanfredi | 2004-01-11 17:15:42 -0500 (Sun, 11 Jan 2004) | 2 lines

Error logging is now assured by file_open*() and file_fopen*() routines.

------------------------------------------------------------------------
r4638 | rmanfredi | 2004-01-11 14:55:13 -0500 (Sun, 11 Jan 2004) | 2 lines

Error logging is now assured by file_open*() and file_fopen*() routines.

------------------------------------------------------------------------
r4637 | rmanfredi | 2004-01-11 14:53:47 -0500 (Sun, 11 Jan 2004) | 2 lines

Added file_open_missing(), and file_fopen*() routines.

------------------------------------------------------------------------
r4636 | rmanfredi | 2004-01-11 12:25:15 -0500 (Sun, 11 Jan 2004) | 2 lines

Version of 11/01/2004.

------------------------------------------------------------------------
r4635 | rmanfredi | 2004-01-11 12:04:42 -0500 (Sun, 11 Jan 2004) | 2 lines

Don't consider pongs with less than 8 kbytes shared as being ultra pongs.

------------------------------------------------------------------------
r4634 | rmanfredi | 2004-01-11 11:58:48 -0500 (Sun, 11 Jan 2004) | 2 lines

Don't force bit 0 of amount of Kbytes shared to 1 if they share nothing.

------------------------------------------------------------------------
r4633 | rmanfredi | 2004-01-11 11:28:29 -0500 (Sun, 11 Jan 2004) | 3 lines

Remove -licuuc from the list of libs when it is present but does not
contain the functions we want (fixes bug #859761).

------------------------------------------------------------------------
r4632 | rmanfredi | 2004-01-11 11:16:22 -0500 (Sun, 11 Jan 2004) | 3 lines

For prettyness, don't show a library size of 8K when the # of files shared
is 0 (all UP will advertise 8K sharing so that this amount is a power of 2).

------------------------------------------------------------------------
r4631 | rmanfredi | 2004-01-11 11:11:59 -0500 (Sun, 11 Jan 2004) | 3 lines

Don't blindly assume pong information with hops=0 comes from the node,
as LimeWire suffers from a bug breaking this assertion.

------------------------------------------------------------------------
r4630 | rmanfredi | 2004-01-11 10:50:56 -0500 (Sun, 11 Jan 2004) | 3 lines

When applying a patch message, make sure they did not already fill the
QRP table before processing (should fix bug #762121).

------------------------------------------------------------------------
r4628 | rmanfredi | 2004-01-11 10:39:14 -0500 (Sun, 11 Jan 2004) | 2 lines

Added compact_kb_size().

------------------------------------------------------------------------
r4627 | rmanfredi | 2004-01-11 10:28:43 -0500 (Sun, 11 Jan 2004) | 2 lines

New node info display configuration: show library size / # of files shared.

------------------------------------------------------------------------
r4626 | rmanfredi | 2004-01-11 10:20:45 -0500 (Sun, 11 Jan 2004) | 2 lines

New properties: "show_gnet_info_shared_size", "show_gnet_info_shared_files".

------------------------------------------------------------------------
r4625 | rmanfredi | 2004-01-11 10:19:40 -0500 (Sun, 11 Jan 2004) | 3 lines

Generalized call to ban_reclaim_fd() when opening files on out-of-fd
condition by introducing the file_open() and file_create() calls.

------------------------------------------------------------------------
r4624 | rmanfredi | 2004-01-11 10:16:44 -0500 (Sun, 11 Jan 2004) | 2 lines

New node info display configuration: show library size / # of files shared.

------------------------------------------------------------------------
r4623 | rmanfredi | 2004-01-11 09:12:37 -0500 (Sun, 11 Jan 2004) | 3 lines

Generalized call to ban_reclaim_fd() when opening files on out-of-fd
condition by introducing the file_open() and file_create() calls.

------------------------------------------------------------------------
r4622 | rmanfredi | 2004-01-11 06:55:11 -0500 (Sun, 11 Jan 2004) | 2 lines

Make sure regular files are installed without the 'x' bit set.

------------------------------------------------------------------------
r4621 | rmanfredi | 2004-01-11 06:42:25 -0500 (Sun, 11 Jan 2004) | 2 lines

When we run out of socket descriptors, try to close a banned fd, if any.

------------------------------------------------------------------------
r4620 | rmanfredi | 2004-01-11 06:34:36 -0500 (Sun, 11 Jan 2004) | 2 lines

Make sure pixmaps are installed without the 'x' bit set.

------------------------------------------------------------------------
r4619 | rmanfredi | 2004-01-11 04:19:23 -0500 (Sun, 11 Jan 2004) | 3 lines

Made ban_reclaim_fd() a public function, that can be used when we run out
of file descriptors.

------------------------------------------------------------------------
r4618 | rmanfredi | 2004-01-11 04:18:27 -0500 (Sun, 11 Jan 2004) | 2 lines

When we run out of socket descriptors, try to close a banned fd, if any.

------------------------------------------------------------------------
r4617 | rmanfredi | 2004-01-11 03:51:50 -0500 (Sun, 11 Jan 2004) | 3 lines

Fixed "fi->lifecount > 0" assertion failure when backing out data after a
resuming mismatch.

------------------------------------------------------------------------
r4616 | rmanfredi | 2004-01-10 16:22:09 -0500 (Sat, 10 Jan 2004) | 3 lines

Don't abort a download entry if it is a pseudo-header [From Russell Francis]
(fixes #874596).

------------------------------------------------------------------------
r4615 | rmanfredi | 2004-01-10 16:16:38 -0500 (Sat, 10 Jan 2004) | 2 lines

Added some extra assertions [From Thadeu Lima de Souza Cascardo].

------------------------------------------------------------------------
r4614 | rmanfredi | 2004-01-10 15:15:17 -0500 (Sat, 10 Jan 2004) | 3 lines

Fixed titles[] array sizing using enum constants, avoiding too small
sizing causing memory corruption [Patch from Thomas Schuerger].

------------------------------------------------------------------------
r4613 | rmanfredi | 2004-01-10 12:34:26 -0500 (Sat, 10 Jan 2004) | 2 lines

CVS is 0.94u again.

------------------------------------------------------------------------
r4612 | rmanfredi | 2004-01-10 12:32:38 -0500 (Sat, 10 Jan 2004) | 2 lines

When GTKG thinks it is offline, don't even try to do GWebCache updates.

------------------------------------------------------------------------
r4611 | rmanfredi | 2004-01-10 12:29:46 -0500 (Sat, 10 Jan 2004) | 2 lines

Fixed assert failure when all the entries from the cache are deleted.

------------------------------------------------------------------------
r4610 | wyldfire | 2004-01-10 06:44:47 -0500 (Sat, 10 Jan 2004) | 2 lines

much work for nothing

------------------------------------------------------------------------
r4609 | wyldfire | 2004-01-10 06:43:34 -0500 (Sat, 10 Jan 2004) | 4 lines


Reverted changes to hostcount display from 2004.01.08
Moved generation of hostname for downloads pane to downloads_gui_common.c

------------------------------------------------------------------------
r4608 | wyldfire | 2004-01-10 06:35:47 -0500 (Sat, 10 Jan 2004) | 4 lines


Fixed a memory leak in search_gui_common.c when search_hide_downloaded
  was activated.

------------------------------------------------------------------------
r4606 | wyldfire | 2004-01-08 17:43:36 -0500 (Thu, 08 Jan 2004) | 4 lines


Show active and trying hosts seperatly when counting hosts
  in download pane. Format: "n hosts (m)" n - active, m - trying.

------------------------------------------------------------------------
r4604 | eqom14 | 2004-01-07 08:19:59 -0500 (Wed, 07 Jan 2004) | 2 lines

Fixed typo - thanks to Alan for spotting it.

------------------------------------------------------------------------
r4597 | rmanfredi | 2004-01-05 06:07:28 -0500 (Mon, 05 Jan 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r4595 | rmanfredi | 2004-01-05 02:47:42 -0500 (Mon, 05 Jan 2004) | 2 lines

Version 0.93.2 of 05/01/2004.

------------------------------------------------------------------------
r4594 | rmanfredi | 2004-01-05 02:28:46 -0500 (Mon, 05 Jan 2004) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r4593 | rmanfredi | 2004-01-04 19:44:26 -0500 (Sun, 04 Jan 2004) | 2 lines

Forgot to include stock_form-time-field-16.xpm.

------------------------------------------------------------------------
r4590 | rmanfredi | 2004-01-04 18:46:33 -0500 (Sun, 04 Jan 2004) | 2 lines

Version 0.93.2.

------------------------------------------------------------------------
r4589 | rmanfredi | 2004-01-04 18:43:53 -0500 (Sun, 04 Jan 2004) | 2 lines

Fixed problems in the file.

------------------------------------------------------------------------
r4588 | rmanfredi | 2004-01-04 18:42:44 -0500 (Sun, 04 Jan 2004) | 2 lines

Version 0.93.2 (04/01/2004).

------------------------------------------------------------------------
r4587 | rmanfredi | 2004-01-04 18:24:48 -0500 (Sun, 04 Jan 2004) | 3 lines

Finished normalization of filenames/queries when the ICU library is
present [From Stephane Corbe].

------------------------------------------------------------------------
r4586 | rmanfredi | 2004-01-04 17:59:05 -0500 (Sun, 04 Jan 2004) | 3 lines

Signature of header_fmt_make() changed, and now uses header_fmt_append_value()
to add the values, and header_fmt_value_fits() to see whether they'll fit.

------------------------------------------------------------------------
r4585 | rmanfredi | 2004-01-04 17:58:17 -0500 (Sun, 04 Jan 2004) | 2 lines

Lowered min size for QRP tables to 16K.

------------------------------------------------------------------------
r4584 | rmanfredi | 2004-01-04 17:57:00 -0500 (Sun, 04 Jan 2004) | 2 lines

Signature of dmesh_alternate_location() changed.

------------------------------------------------------------------------
r4583 | rmanfredi | 2004-01-04 17:55:49 -0500 (Sun, 04 Jan 2004) | 5 lines

Changed signature of dmesh_alternate_location() to include whether we're
emitting alt-locs in a request or in a reply.
No longer format X-Alt and X-Nalt with continuations in requests, and
to BearShare nodes on replies (due to a parsing bug in BS causing its crash).

------------------------------------------------------------------------
r4582 | rmanfredi | 2004-01-04 17:52:59 -0500 (Sun, 04 Jan 2004) | 3 lines

Signature of header_fmt_make() changed, and now uses header_fmt_append_value()
to add the values.

------------------------------------------------------------------------
r4581 | rmanfredi | 2004-01-04 17:51:03 -0500 (Sun, 04 Jan 2004) | 5 lines

New header formatting routines: header_fmt_set_line_length(),
header_fmt_value_fits() and header_fmt_append_value().
Changed signature of header_fmt_make() to include default separator.
Default line length set to 78 chars (was 72).

------------------------------------------------------------------------
r4580 | graaff | 2004-01-04 17:45:28 -0500 (Sun, 04 Jan 2004) | 3 lines

 * Updated i18n .po and .pot files based on current code
 * Updated Dutch translation

------------------------------------------------------------------------
r4579 | eqom14 | 2004-01-04 17:37:40 -0500 (Sun, 04 Jan 2004) | 2 lines

Added stock_form-time-field-16.xpm icon.

------------------------------------------------------------------------
r4578 | eqom14 | 2004-01-04 17:29:21 -0500 (Sun, 04 Jan 2004) | 2 lines

Added new 16x16 and 32x32 icons.

------------------------------------------------------------------------
r4577 | graaff | 2004-01-04 17:19:34 -0500 (Sun, 04 Jan 2004) | 3 lines

 * [Gtk1] Show leafs and "normal" (legacy) clients in grey in the nodes list.
 * [Gtk2] Update nodes and uploads lists to show rows in grey in line with Gtk1

------------------------------------------------------------------------
r4576 | eqom14 | 2004-01-04 16:54:39 -0500 (Sun, 04 Jan 2004) | 2 lines

Some dists e.g. Mandrake want these 16x16 and 32x32 icons.

------------------------------------------------------------------------
r4575 | wyldfire | 2004-01-04 16:12:39 -0500 (Sun, 04 Jan 2004) | 2 lines

Final changes by me for release.

------------------------------------------------------------------------
r4574 | wyldfire | 2004-01-04 16:02:52 -0500 (Sun, 04 Jan 2004) | 3 lines


Show icon when gtkg determines that it is ancient.

------------------------------------------------------------------------
r4573 | wyldfire | 2004-01-04 15:58:01 -0500 (Sun, 04 Jan 2004) | 4 lines


Props that have default values are saved as comments, so they can be
  upgraded to new defaults on version upgrades. [from Globuz]

------------------------------------------------------------------------
r4572 | wyldfire | 2004-01-04 15:57:13 -0500 (Sun, 04 Jan 2004) | 3 lines


New icon to show ancient version status

------------------------------------------------------------------------
r4571 | wyldfire | 2004-01-04 15:55:58 -0500 (Sun, 04 Jan 2004) | 2 lines

Updated contibutors in about dialog

------------------------------------------------------------------------
r4570 | wyldfire | 2004-01-04 15:55:15 -0500 (Sun, 04 Jan 2004) | 2 lines

Added Globuz

------------------------------------------------------------------------
r4569 | wyldfire | 2004-01-04 08:46:17 -0500 (Sun, 04 Jan 2004) | 2 lines

Hopefully fixed duplicate rs in accumulates_rs.

------------------------------------------------------------------------
r4568 | emilelevivre | 2004-01-04 07:04:19 -0500 (Sun, 04 Jan 2004) | 4 lines

- (2004.01.04 - Emile)
 * [Gtk1] Fixed autosort for "count" column
 * [Gtk1] Added "Push mode" status for downloads tree

------------------------------------------------------------------------
r4567 | rmanfredi | 2004-01-04 06:32:26 -0500 (Sun, 04 Jan 2004) | 2 lines

Increase tolerance for clock skew to +/- 1 hour.

------------------------------------------------------------------------
r4566 | rmanfredi | 2004-01-04 03:28:36 -0500 (Sun, 04 Jan 2004) | 2 lines

Made the burst interval period for search refresh configurable from the GUI.

------------------------------------------------------------------------
r4565 | rmanfredi | 2004-01-04 03:25:42 -0500 (Sun, 04 Jan 2004) | 2 lines

New property "search_accumulation_period" for burst period configuration.

------------------------------------------------------------------------
r4564 | wyldfire | 2004-01-03 23:03:49 -0500 (Sat, 03 Jan 2004) | 2 lines

An assertion and a little cleanup

------------------------------------------------------------------------
r4563 | wyldfire | 2004-01-03 21:41:20 -0500 (Sat, 03 Jan 2004) | 2 lines

merged changelog

------------------------------------------------------------------------
r4562 | wyldfire | 2004-01-03 21:37:15 -0500 (Sat, 03 Jan 2004) | 2 lines

Forgot to move a message to debug mode

------------------------------------------------------------------------
r4561 | wyldfire | 2004-01-03 21:26:38 -0500 (Sat, 03 Jan 2004) | 12 lines


Implemented "results bursting". That means that the gui accumulates incoming
  results over a period of time and then flushes them out to display in a burst   This technique drastically reduces the number of redraws. Unfortunately I
  had to inject some #ifdef USE_GTK1 into search_gui_common.c. I hope you can
  bear with me ;) The burst interval is currently hardcoded at 5 seconds
  in search_gui_common.c::search_gui_flush().
[Gtk1] "results burting" causes CTrees affected by the burst to be frozen
  during  the burst and unfrozen later.
[Gtk2] the TreeViews are not frozen, but Gtk2 seems to handle the burst
  intelligently and doesn't redraw during the burst all by itself. *shrug*
  Further testing is required here.

------------------------------------------------------------------------
r4560 | wyldfire | 2004-01-03 21:25:23 -0500 (Sat, 03 Jan 2004) | 3 lines


Periodically flush results cache and force flush on exit.

------------------------------------------------------------------------
r4559 | rmanfredi | 2004-01-03 18:18:31 -0500 (Sat, 03 Jan 2004) | 2 lines

Version of 03/01/2004.

------------------------------------------------------------------------
r4558 | rmanfredi | 2004-01-03 18:17:59 -0500 (Sat, 03 Jan 2004) | 3 lines

Changed default for "node_rx_flowc_ratio" to 70%, and raised minimum
to 30%, to allow traffic bursts.

------------------------------------------------------------------------
r4557 | rmanfredi | 2004-01-03 17:56:55 -0500 (Sat, 03 Jan 2004) | 3 lines

Apparently glib2 has different hash table management: the hash table
is configured to auto-free the keys...

------------------------------------------------------------------------
r4556 | rmanfredi | 2004-01-03 17:28:01 -0500 (Sat, 03 Jan 2004) | 4 lines

Removed spurious atom_int_get()/atom_int_free() calls that do not
strike me as beeing needed, but added explicit atom_int_get()  in the
add_parent_with_fi_handle() routine.

------------------------------------------------------------------------
r4555 | rmanfredi | 2004-01-03 16:48:16 -0500 (Sat, 03 Jan 2004) | 3 lines

[GTK2] Fixed crash when clicking twice on Purge in the fileinfo pane [From
Hans de Graaff].

------------------------------------------------------------------------
r4554 | wyldfire | 2004-01-03 16:46:12 -0500 (Sat, 03 Jan 2004) | 4 lines


Replaced a bunch of viewports in the config panes by frames so the
  that they scale to thier content.

------------------------------------------------------------------------
r4553 | rmanfredi | 2004-01-03 16:08:52 -0500 (Sat, 03 Jan 2004) | 2 lines

Fixed long-standing race condition when receiving a GIV string.

------------------------------------------------------------------------
r4552 | rmanfredi | 2004-01-03 15:54:42 -0500 (Sat, 03 Jan 2004) | 3 lines

Avoid too frequent updates and structure traversals to update the parent
tree summary info when its GUI info is fresh enough.

------------------------------------------------------------------------
r4551 | rmanfredi | 2004-01-03 14:53:13 -0500 (Sat, 03 Jan 2004) | 3 lines

Made sure the hash tables are declared with g_int_hash and g_int_equal
to work properly with integer keys.

------------------------------------------------------------------------
r4550 | rmanfredi | 2004-01-03 14:37:36 -0500 (Sat, 03 Jan 2004) | 5 lines

[GTK1] Adds "connecting" and "queued" status messages to grouped downloads.
Removed spurious atom_int_get()/atom_int_free() calls that do not strike
me as beeing needed, but added explicit atom_int_get() in the
add_parent_with_fi_handle() routine. [RAM]

------------------------------------------------------------------------
r4549 | rmanfredi | 2004-01-03 14:33:56 -0500 (Sat, 03 Jan 2004) | 3 lines

[GTK1] Fixes autosort (except for count column for some reason) [From Emile
le Vivre].

------------------------------------------------------------------------
r4548 | rmanfredi | 2004-01-03 14:28:59 -0500 (Sat, 03 Jan 2004) | 3 lines

[GTK1] Fixed autoselect to update the ctree so autoselected rows show up
immediately.

------------------------------------------------------------------------
r4547 | rmanfredi | 2004-01-03 13:31:15 -0500 (Sat, 03 Jan 2004) | 4 lines

[GTK2] emove expand/collapse all buttons from search pane because they
didn't fit and because the expand all button wasn't updating the
treeview [From Emile le Vivre].

------------------------------------------------------------------------
r4546 | rmanfredi | 2004-01-03 13:12:51 -0500 (Sat, 03 Jan 2004) | 2 lines

Added precisions about some functions in leading comments.

------------------------------------------------------------------------
r4545 | rmanfredi | 2004-01-03 13:12:16 -0500 (Sat, 03 Jan 2004) | 3 lines

Added call to download_passively_queued() in download_bad_source(), and
also before requeuing on 416 -- range not available yet.

------------------------------------------------------------------------
r4544 | rmanfredi | 2004-01-03 09:28:10 -0500 (Sat, 03 Jan 2004) | 3 lines

Changed computation formula for QRP pass-throw now that we filter SHA1
queries through the table.  The cut-off is now fixed at 5%.

------------------------------------------------------------------------
r4543 | rmanfredi | 2004-01-03 09:26:42 -0500 (Sat, 03 Jan 2004) | 2 lines

Lowered maximum query monitoring half life to 10 seconds.

------------------------------------------------------------------------
r4542 | rmanfredi | 2004-01-03 09:18:35 -0500 (Sat, 03 Jan 2004) | 3 lines

Now always emit alternate locations via X-Alt:, so got rid of the old
code that emitted X-Gnutella-Alternate-Location headers.

------------------------------------------------------------------------
r4541 | rmanfredi | 2004-01-03 06:45:28 -0500 (Sat, 03 Jan 2004) | 2 lines

Now count failed push proxy resolutions as well.

------------------------------------------------------------------------
r4540 | rmanfredi | 2004-01-03 06:43:28 -0500 (Sat, 03 Jan 2004) | 2 lines

Fixed typo in tooltips.

------------------------------------------------------------------------
r4539 | rmanfredi | 2004-01-03 06:07:49 -0500 (Sat, 03 Jan 2004) | 3 lines

Added a continuation on X-Queued: line, which was longer than 80 chars
when we emit lifetime and ETA information.

------------------------------------------------------------------------
r4538 | rmanfredi | 2004-01-03 05:56:25 -0500 (Sat, 03 Jan 2004) | 2 lines

Decrement stall counter when an upload un-stalls.

------------------------------------------------------------------------
r4537 | rmanfredi | 2004-01-03 05:56:18 -0500 (Sat, 03 Jan 2004) | 3 lines

Added assertions to narrow down the scope of a core failure when receiving
a "GIV".

------------------------------------------------------------------------
r4536 | wyldfire | 2004-01-03 00:49:22 -0500 (Sat, 03 Jan 2004) | 2 lines

no comment

------------------------------------------------------------------------
r4535 | wyldfire | 2004-01-03 00:48:31 -0500 (Sat, 03 Jan 2004) | 3 lines


Applied patch to fix column visibility on the gnet pane [from Clayton Rollins].

------------------------------------------------------------------------
r4534 | wyldfire | 2004-01-03 00:21:59 -0500 (Sat, 03 Jan 2004) | 6 lines


Lots of layout changes to assimilate the gtk1 and gtk2 guis, to clean up
  layout in general and to fix paddings and spacings.
Unhid the "current search" entry in the search panel again as users
requested so.

------------------------------------------------------------------------
r4533 | rmanfredi | 2004-01-02 19:46:49 -0500 (Fri, 02 Jan 2004) | 3 lines

Fixed spurious beeping on startup when the "ancient_version_left_days"
property was initialized.

------------------------------------------------------------------------
r4532 | rmanfredi | 2004-01-02 18:31:17 -0500 (Fri, 02 Jan 2004) | 2 lines

Version of 02/01/2004.

------------------------------------------------------------------------
r4531 | rmanfredi | 2004-01-02 18:29:45 -0500 (Fri, 02 Jan 2004) | 2 lines

Cleanup.

------------------------------------------------------------------------
r4530 | rmanfredi | 2004-01-02 18:13:56 -0500 (Fri, 02 Jan 2004) | 2 lines

Fixed hole in flow-control updating after message write.

------------------------------------------------------------------------
r4529 | rmanfredi | 2004-01-02 16:29:20 -0500 (Fri, 02 Jan 2004) | 3 lines

Count and display in gnet stats pane the amount proxified push messages
we relayed or broadcasted.

------------------------------------------------------------------------
r4528 | rmanfredi | 2004-01-02 13:47:53 -0500 (Fri, 02 Jan 2004) | 2 lines

[GTK1] Adds grouped downloads [From Emile le Vivre].

------------------------------------------------------------------------
r4527 | rmanfredi | 2004-01-02 13:45:09 -0500 (Fri, 02 Jan 2004) | 2 lines

Changed definition of char_map_t to be guint8 instead of (signed) char.

------------------------------------------------------------------------
r4526 | rmanfredi | 2004-01-02 13:40:33 -0500 (Fri, 02 Jan 2004) | 3 lines

Offer ability to backout file by some amount on resuming mismatch
[From Hans de Graaff].

------------------------------------------------------------------------
r4525 | rmanfredi | 2004-01-02 13:07:39 -0500 (Fri, 02 Jan 2004) | 3 lines

Offer ability to backout file by some amount on resuming mismatch
[From Hans de Graaff].

------------------------------------------------------------------------
r4524 | rmanfredi | 2004-01-02 09:41:38 -0500 (Fri, 02 Jan 2004) | 2 lines

[GTK1] Fixes errors in autoselect [From Emile le Vivre].

------------------------------------------------------------------------
r4523 | rmanfredi | 2004-01-02 09:39:41 -0500 (Fri, 02 Jan 2004) | 2 lines

[GTK1] Added groupped downloads [From Emile le Vivre].

------------------------------------------------------------------------
r4522 | rmanfredi | 2004-01-02 09:26:01 -0500 (Fri, 02 Jan 2004) | 2 lines

Removed spurious printf.

------------------------------------------------------------------------
r4521 | rmanfredi | 2004-01-02 09:02:54 -0500 (Fri, 02 Jan 2004) | 3 lines

Allow early exits: don't cancel update callout queue timers if they have not
been instantiated yet.

------------------------------------------------------------------------
r4520 | rmanfredi | 2004-01-02 09:00:25 -0500 (Fri, 02 Jan 2004) | 3 lines

Warn them before the version becomes too old, and refuse to run without
user manual action when we become old, after some grace period.

------------------------------------------------------------------------
r4519 | rmanfredi | 2004-01-02 08:57:01 -0500 (Fri, 02 Jan 2004) | 2 lines

New properties to control ancient versions.

------------------------------------------------------------------------
r4518 | rmanfredi | 2004-01-02 08:56:25 -0500 (Fri, 02 Jan 2004) | 2 lines

Fixed style issues.

------------------------------------------------------------------------
r4517 | rmanfredi | 2004-01-02 03:57:14 -0500 (Fri, 02 Jan 2004) | 2 lines

Fixed conflict ratio computation when they don't share anything.

------------------------------------------------------------------------
r4516 | rmanfredi | 2004-01-02 03:46:22 -0500 (Fri, 02 Jan 2004) | 2 lines

Fixed variable declarations.

------------------------------------------------------------------------
r4515 | rmanfredi | 2004-01-01 18:56:08 -0500 (Thu, 01 Jan 2004) | 2 lines

Fixed leading underlining line.

------------------------------------------------------------------------
r4514 | rmanfredi | 2004-01-01 18:51:20 -0500 (Thu, 01 Jan 2004) | 2 lines

Created.

------------------------------------------------------------------------
r4513 | rmanfredi | 2004-01-01 13:32:35 -0500 (Thu, 01 Jan 2004) | 2 lines

Regenrated since we now use the USE_ICU symbol.

------------------------------------------------------------------------
r4512 | rmanfredi | 2004-01-01 13:28:24 -0500 (Thu, 01 Jan 2004) | 2 lines

Applied ICU patch from Stephane Corbe.

------------------------------------------------------------------------
r4511 | emilelevivre | 2004-01-01 12:35:02 -0500 (Thu, 01 Jan 2004) | 2 lines

Missing .glade file for GTK2 expand/collapse patch

------------------------------------------------------------------------
r4510 | rmanfredi | 2004-01-01 12:22:36 -0500 (Thu, 01 Jan 2004) | 6 lines

A series of patches from Emile le Vivre:
[GTK2] Adds "expand/collapse all" popups for search and download tabs
[GTK2] Adds "expand/collapse all" buttons for search tab
[GTK2] Adds "Search results" frame around searches tab (missing since
we moved the new search entry to the lefthand pane).

------------------------------------------------------------------------
r4509 | rmanfredi | 2004-01-01 10:55:34 -0500 (Thu, 01 Jan 2004) | 2 lines

Factorized drop message logging in gnet_stats.c.

------------------------------------------------------------------------
r4508 | rmanfredi | 2004-01-01 10:53:01 -0500 (Thu, 01 Jan 2004) | 2 lines

New drop reason: MSG_DROP_IMPROPER_HOPS_TTL.

------------------------------------------------------------------------
r4507 | rmanfredi | 2004-01-01 09:03:53 -0500 (Thu, 01 Jan 2004) | 2 lines

Removed unused variables.

------------------------------------------------------------------------
r4506 | rmanfredi | 2004-01-01 08:25:29 -0500 (Thu, 01 Jan 2004) | 3 lines

Added 2.4 section to mention that code sections should be commented out
using #if 0 ... #endif sections.

------------------------------------------------------------------------
r4505 | rmanfredi | 2004-01-01 07:47:12 -0500 (Thu, 01 Jan 2004) | 3 lines

Update gnet connection counts in gnet bandwidth progressbar immediately
when user changes some maximum, in ultra mode.

------------------------------------------------------------------------
r4504 | rmanfredi | 2004-01-01 06:54:36 -0500 (Thu, 01 Jan 2004) | 2 lines

Fixed assertion failures, and cleaned-up style issues, unused variables.

------------------------------------------------------------------------
r4503 | rmanfredi | 2004-01-01 06:52:51 -0500 (Thu, 01 Jan 2004) | 3 lines

When looking at memory requirements for becoming an ultranode, take into
account flow-control via the maximum message queue size.

------------------------------------------------------------------------
r4502 | rmanfredi | 2004-01-01 06:12:38 -0500 (Thu, 01 Jan 2004) | 2 lines

Don't remove gtk-gnutella.pot in "realclean" since we distribute it.

------------------------------------------------------------------------
r4501 | rmanfredi | 2004-01-01 06:11:43 -0500 (Thu, 01 Jan 2004) | 2 lines

Code cleanup.

------------------------------------------------------------------------
r4500 | rmanfredi | 2004-01-01 06:10:15 -0500 (Thu, 01 Jan 2004) | 3 lines

[GTK1] Added treeview in search results, in line with GTK2's GUI
[From Emile le Vivre].

------------------------------------------------------------------------
r4499 | rmanfredi | 2004-01-01 05:24:51 -0500 (Thu, 01 Jan 2004) | 3 lines

Raised size of gnutella handshake reply and that of generated crawler
info to accomodate the larger number of leaves we can now support.

------------------------------------------------------------------------
r4498 | rmanfredi | 2004-01-01 05:23:10 -0500 (Thu, 01 Jan 2004) | 3 lines

Halved requirements for gnet connections: with dynamic querying, there is
less traffic between peers (GTKG does not support it yet though).

------------------------------------------------------------------------
r4497 | rmanfredi | 2003-12-31 16:45:58 -0500 (Wed, 31 Dec 2003) | 3 lines

Update flow-control indication within make_room() in case we dropped enough
messages to go below the low watermark.

------------------------------------------------------------------------
r4496 | rmanfredi | 2003-12-31 16:38:16 -0500 (Wed, 31 Dec 2003) | 2 lines

Version of 31/12/2003.

------------------------------------------------------------------------
r4495 | rmanfredi | 2003-12-31 16:37:30 -0500 (Wed, 31 Dec 2003) | 4 lines

Now that we no longer forward all SHA1 queries to leaves, the bandwidth
requirement per leaf has dropped significantly.  Increased the default
number of leaves and halved b/w requirement to 32 bytes/sec/leaf.

------------------------------------------------------------------------
r4494 | rmanfredi | 2003-12-31 16:34:13 -0500 (Wed, 31 Dec 2003) | 2 lines

Now advertises Query-Routing 0.2.

------------------------------------------------------------------------
r4493 | rmanfredi | 2003-12-31 13:13:32 -0500 (Wed, 31 Dec 2003) | 3 lines

Apply socket RX buffer changes for downloads and nodes immediately to all
existing connections.

------------------------------------------------------------------------
r4492 | rmanfredi | 2003-12-31 06:54:47 -0500 (Wed, 31 Dec 2003) | 2 lines

Removed unused variables.

------------------------------------------------------------------------
r4491 | rmanfredi | 2003-12-31 06:53:27 -0500 (Wed, 31 Dec 2003) | 5 lines

Patch from Emile le Vivre:
[GTK2] Fixes the memory leaks introduce by Emile's grouped downloads patch.
[GTK2] Fixes quirky behaviour for abort popups.
[GTK2] Aborted grouped downloads now update status column correctly.

------------------------------------------------------------------------
r4490 | rmanfredi | 2003-12-31 06:06:42 -0500 (Wed, 31 Dec 2003) | 3 lines

[GTK2] Fix time remaining and k/s status for grouped downloads: now
uses the core-computed fi->recv_last_rate value [From Emile le Vivre].

------------------------------------------------------------------------
r4489 | rmanfredi | 2003-12-31 05:52:00 -0500 (Wed, 31 Dec 2003) | 7 lines

Wrote qrt_eq() to check whether the new table we've built is identical
to the previous one: don't install if no change.
If the incremental routing patch is larger than the default one against an
empty table, discard it in favor of a RESET plus the default patch.
Filter SHA1 queries differently: don't forward them blindly if there's no
matching in the QRP table, and don't forward them to leaves in TX flow control.

------------------------------------------------------------------------
r4488 | rmanfredi | 2003-12-31 05:22:24 -0500 (Wed, 31 Dec 2003) | 3 lines

Moved periodic refreshing of fi->recv_last_rate into the core, where
it belongs.

------------------------------------------------------------------------
r4487 | rmanfredi | 2003-12-31 05:02:26 -0500 (Wed, 31 Dec 2003) | 5 lines

Added "emergency fixing" code: if the downloading partition gets trashed
one can now reconstruct a fileinfo with "grep -v ^CHNK fileinfo", and
gtk-gnutella will correctly reset the entries on startup (all empty, but
kept; otherwise gtk-gnutella would delete entries for missing files).

------------------------------------------------------------------------
r4485 | rmanfredi | 2003-12-30 04:42:40 -0500 (Tue, 30 Dec 2003) | 3 lines

[GTK2] Fixed column selection in gnet pane: it's a tree in GTK2, not
a clist [From Clayton Rollins].

------------------------------------------------------------------------
r4481 | rmanfredi | 2003-12-29 09:38:48 -0500 (Mon, 29 Dec 2003) | 3 lines

Removed logical negation causing extra ultranode connections to be rejected
with "Reserved slot" instead of the appropriate "Too many ultra nodes".

------------------------------------------------------------------------
r4478 | rmanfredi | 2003-12-29 02:51:52 -0500 (Mon, 29 Dec 2003) | 2 lines

Second take at 0.93.1 release.

------------------------------------------------------------------------
r4477 | rmanfredi | 2003-12-29 02:34:14 -0500 (Mon, 29 Dec 2003) | 2 lines

Added po/hu.po and src/downloads_cb2.h to MANIFESTs.

------------------------------------------------------------------------
r4476 | rmanfredi | 2003-12-29 02:31:57 -0500 (Mon, 29 Dec 2003) | 2 lines

Restored "hu" support -- did not see the hu.po there.

------------------------------------------------------------------------
r4471 | rmanfredi | 2003-12-28 18:01:02 -0500 (Sun, 28 Dec 2003) | 2 lines

Fixed compiler warning.

------------------------------------------------------------------------
r4470 | rmanfredi | 2003-12-28 17:59:25 -0500 (Sun, 28 Dec 2003) | 2 lines

Added install.man target.

------------------------------------------------------------------------
r4469 | rmanfredi | 2003-12-28 17:59:10 -0500 (Sun, 28 Dec 2003) | 2 lines

Removed missing "hu" language.

------------------------------------------------------------------------
r4468 | rmanfredi | 2003-12-28 17:40:05 -0500 (Sun, 28 Dec 2003) | 2 lines

Release 0.93.1 stable.

------------------------------------------------------------------------
r4467 | rmanfredi | 2003-12-28 17:38:42 -0500 (Sun, 28 Dec 2003) | 2 lines

[GTK2] GUI brought up in sync with GTK1 again [Thanks to Clayton Rollins].

------------------------------------------------------------------------
r4466 | rmanfredi | 2003-12-28 17:32:48 -0500 (Sun, 28 Dec 2003) | 2 lines

For version 0.93.1.

------------------------------------------------------------------------
r4465 | rmanfredi | 2003-12-28 17:26:14 -0500 (Sun, 28 Dec 2003) | 2 lines

Added new set of keys.

------------------------------------------------------------------------
r4464 | rmanfredi | 2003-12-28 17:24:34 -0500 (Sun, 28 Dec 2003) | 2 lines

Turned off "expand" from "frame_gnet_can_become_ultra".

------------------------------------------------------------------------
r4463 | rmanfredi | 2003-12-28 13:02:23 -0500 (Sun, 28 Dec 2003) | 4 lines

Forgot to handle the GTA_DL_REQ_SENDING state in download_timer().
Now that we do, we can skip the GUI update for that state if they're
not looking.

------------------------------------------------------------------------
r4462 | rmanfredi | 2003-12-28 12:41:43 -0500 (Sun, 28 Dec 2003) | 3 lines

Fileinfo callback were not prepared to handle (FREQ_SECS, 2), otherwise
change notifications are lost when adding/removing sources.

------------------------------------------------------------------------
r4461 | rmanfredi | 2003-12-28 12:26:48 -0500 (Sun, 28 Dec 2003) | 2 lines

[GTK1] Remember the vertical position of the fileinfo pane separation.

------------------------------------------------------------------------
r4460 | rmanfredi | 2003-12-28 12:25:39 -0500 (Sun, 28 Dec 2003) | 3 lines

New "fileinfo_divider_pos" property to remember the postion of the
fileinfo vertical separation.

------------------------------------------------------------------------
r4459 | rmanfredi | 2003-12-28 11:07:50 -0500 (Sun, 28 Dec 2003) | 2 lines

Fill QRP and library scanning statistics.

------------------------------------------------------------------------
r4458 | rmanfredi | 2003-12-28 10:51:47 -0500 (Sun, 28 Dec 2003) | 4 lines

[GTK1] Added "expert" statistics frame showing library scanning time and
some properties about the QRP table and the generated patch in the upload
config pane.

------------------------------------------------------------------------
r4457 | rmanfredi | 2003-12-28 10:46:42 -0500 (Sun, 28 Dec 2003) | 2 lines

Added comment.

------------------------------------------------------------------------
r4456 | rmanfredi | 2003-12-28 10:43:57 -0500 (Sun, 28 Dec 2003) | 2 lines

Added statistics properties about library scanning and QRP patch generation.

------------------------------------------------------------------------
r4455 | rmanfredi | 2003-12-28 06:49:07 -0500 (Sun, 28 Dec 2003) | 3 lines

Some download states must always be updated whether they are looking or
not since we won't periodically refresh the GUI.

------------------------------------------------------------------------
r4454 | rmanfredi | 2003-12-28 06:03:56 -0500 (Sun, 28 Dec 2003) | 3 lines

Put column definition enum for fileinfo pane in gui.h, to be in line with
the way it's done for others.

------------------------------------------------------------------------
r4453 | rmanfredi | 2003-12-28 05:53:31 -0500 (Sun, 28 Dec 2003) | 2 lines

Only update downloads if we're in the "Downloads" tab.

------------------------------------------------------------------------
r4452 | rmanfredi | 2003-12-28 05:50:13 -0500 (Sun, 28 Dec 2003) | 2 lines

Marked that EV_FI_INFO_CHANGED is unused.

------------------------------------------------------------------------
r4451 | rmanfredi | 2003-12-28 05:14:52 -0500 (Sun, 28 Dec 2003) | 2 lines

Named the downloads notebook as "notebook_downloads".

------------------------------------------------------------------------
r4450 | rmanfredi | 2003-12-28 05:08:34 -0500 (Sun, 28 Dec 2003) | 3 lines

Put column definition enum for gnet pane in gui.h, to be in line with
the way it's done for others.

------------------------------------------------------------------------
r4449 | rmanfredi | 2003-12-28 04:41:12 -0500 (Sun, 28 Dec 2003) | 2 lines

Cache result of lookup_widget(main_window, "notebook_main").

------------------------------------------------------------------------
r4448 | rmanfredi | 2003-12-28 04:39:47 -0500 (Sun, 28 Dec 2003) | 3 lines

Ensure that we update the nodes every 5 minutes at least, even if nobody
is watching to perform cleanup of dead entries.

------------------------------------------------------------------------
r4447 | rmanfredi | 2003-12-28 03:55:18 -0500 (Sun, 28 Dec 2003) | 2 lines

Created.

------------------------------------------------------------------------
r4446 | rmanfredi | 2003-12-28 03:50:59 -0500 (Sun, 28 Dec 2003) | 2 lines

[GTK2] Brought up in sync with GTK1 [From Clayton Rollins].

------------------------------------------------------------------------
r4445 | rmanfredi | 2003-12-28 03:40:57 -0500 (Sun, 28 Dec 2003) | 3 lines

Ensure that we update the uploads every 5 minutes at least, even if nobody
is watching to perform cleanup of dead entries.

------------------------------------------------------------------------
r4444 | rmanfredi | 2003-12-28 02:52:00 -0500 (Sun, 28 Dec 2003) | 3 lines

[GTK1] Renamed "Search for" as "Search:" to save horizontal real-estate
and have a larger search box.

------------------------------------------------------------------------
r4443 | eqom14 | 2003-12-27 18:38:51 -0500 (Sat, 27 Dec 2003) | 2 lines

Remote control is now compiled by default (thanks ram,) mentioned some newer features, minor formatting.

------------------------------------------------------------------------
r4442 | rmanfredi | 2003-12-27 17:51:21 -0500 (Sat, 27 Dec 2003) | 2 lines

Fixed compilation problem.

------------------------------------------------------------------------
r4441 | rmanfredi | 2003-12-27 17:29:53 -0500 (Sat, 27 Dec 2003) | 2 lines

Added the new source files.

------------------------------------------------------------------------
r4440 | rmanfredi | 2003-12-27 17:23:20 -0500 (Sat, 27 Dec 2003) | 2 lines

Better path stripping version.

------------------------------------------------------------------------
r4439 | rmanfredi | 2003-12-27 16:45:00 -0500 (Sat, 27 Dec 2003) | 2 lines

Added space.

------------------------------------------------------------------------
r4438 | rmanfredi | 2003-12-27 16:44:32 -0500 (Sat, 27 Dec 2003) | 3 lines

Now that remote control can be disabled from the GUI, compile it by
default but do not activate it.

------------------------------------------------------------------------
r4437 | rmanfredi | 2003-12-27 16:32:10 -0500 (Sat, 27 Dec 2003) | 3 lines

When autoselect is disabled in the search pane, prevent them from being
able to select the fuzzy matching or identical settings...

------------------------------------------------------------------------
r4436 | rmanfredi | 2003-12-27 16:01:42 -0500 (Sat, 27 Dec 2003) | 2 lines

Version of 27/12/2003.

------------------------------------------------------------------------
r4435 | rmanfredi | 2003-12-27 15:54:04 -0500 (Sat, 27 Dec 2003) | 2 lines

[GTK1] Plugged in the new properties.

------------------------------------------------------------------------
r4434 | rmanfredi | 2003-12-27 15:53:13 -0500 (Sat, 27 Dec 2003) | 2 lines

Fixed compilation problems for traditional C compilers [From Clayton Rollins].

------------------------------------------------------------------------
r4433 | rmanfredi | 2003-12-27 15:38:39 -0500 (Sat, 27 Dec 2003) | 2 lines

New definition [From Mike Mestnik].

------------------------------------------------------------------------
r4432 | rmanfredi | 2003-12-27 15:34:54 -0500 (Sat, 27 Dec 2003) | 2 lines

Take into account the "entry_removal_timeout" property for removing uploads.

------------------------------------------------------------------------
r4431 | rmanfredi | 2003-12-27 15:34:14 -0500 (Sat, 27 Dec 2003) | 2 lines

Must always perform upload_info_changed().

------------------------------------------------------------------------
r4430 | rmanfredi | 2003-12-27 15:32:51 -0500 (Sat, 27 Dec 2003) | 2 lines

Search queue size and spacing is now configurable from the GUI.

------------------------------------------------------------------------
r4429 | rmanfredi | 2003-12-27 15:32:17 -0500 (Sat, 27 Dec 2003) | 2 lines

One can now disable the shell control from within the GUI.

------------------------------------------------------------------------
r4428 | rmanfredi | 2003-12-27 15:31:40 -0500 (Sat, 27 Dec 2003) | 2 lines

Query traffic monitoring is now controlled by GUI-settable properties.

------------------------------------------------------------------------
r4427 | rmanfredi | 2003-12-27 15:31:20 -0500 (Sat, 27 Dec 2003) | 5 lines

[GTK1] Plugged new properties for configuring the search queue, whether to
enable the "shell" remote control, whether and how tightly we should monitor
query traffic for duplicates, and for how long we should keep "dead"
entries for GUI display before removing them.

------------------------------------------------------------------------
r4426 | rmanfredi | 2003-12-27 15:30:05 -0500 (Sat, 27 Dec 2003) | 2 lines

Added get_average_servent_uptime() and get_average_ip_lifetime().

------------------------------------------------------------------------
r4425 | rmanfredi | 2003-12-27 15:29:31 -0500 (Sat, 27 Dec 2003) | 2 lines

Must always perform nodes_gui_node_info_changed().

------------------------------------------------------------------------
r4424 | rmanfredi | 2003-12-27 15:28:28 -0500 (Sat, 27 Dec 2003) | 4 lines

When computing average servent uptime and IP lifetime for ultranode
promotion, take into account the current uptime and IP lifetime.
Query traffic monitoring is now controlled by GUI-settable properties.

------------------------------------------------------------------------
r4423 | rmanfredi | 2003-12-27 15:26:36 -0500 (Sat, 27 Dec 2003) | 2 lines

Raised atexit() timeout to 20 seconds.

------------------------------------------------------------------------
r4422 | rmanfredi | 2003-12-27 15:25:53 -0500 (Sat, 27 Dec 2003) | 2 lines

Use the "entry_removal_timeout" property to remove dead downloads.

------------------------------------------------------------------------
r4421 | rmanfredi | 2003-12-27 15:22:39 -0500 (Sat, 27 Dec 2003) | 2 lines

Fixed download columns for GTK1, broken by Emile's patches.

------------------------------------------------------------------------
r4420 | rmanfredi | 2003-12-27 15:21:40 -0500 (Sat, 27 Dec 2003) | 5 lines

Added new properties for configuring the search queue, whether to enable
the "shell" remote control, whether and how tightly we should monitor
query traffic for duplicates, and for how long we should keep "dead"
entries for GUI display before removing them.

------------------------------------------------------------------------
r4419 | rmanfredi | 2003-12-27 10:19:42 -0500 (Sat, 27 Dec 2003) | 2 lines

Applied cleanup patch for tree-view downloads (GTK2) [From Emile le Vivre].

------------------------------------------------------------------------
r4418 | rmanfredi | 2003-12-27 10:01:16 -0500 (Sat, 27 Dec 2003) | 3 lines

[GTK1] Added a frame showing ultrapeer promotion statistics when running
in "auto" mode.

------------------------------------------------------------------------
r4417 | rmanfredi | 2003-12-27 10:00:50 -0500 (Sat, 27 Dec 2003) | 2 lines

Added properties to track ultrapeer eligibility status and switching time.

------------------------------------------------------------------------
r4416 | rmanfredi | 2003-12-27 09:52:31 -0500 (Sat, 27 Dec 2003) | 2 lines

Forgot to add this file from Emile's patch.

------------------------------------------------------------------------
r4415 | rmanfredi | 2003-12-27 07:13:51 -0500 (Sat, 27 Dec 2003) | 3 lines

When restarting a search from menu, re-enable it automatically if it
was disabled (fixes bug #864348).

------------------------------------------------------------------------
r4414 | rmanfredi | 2003-12-27 07:11:48 -0500 (Sat, 27 Dec 2003) | 2 lines

Make sure '(' follows the function name, for tags/cscope...

------------------------------------------------------------------------
r4413 | rmanfredi | 2003-12-27 07:03:14 -0500 (Sat, 27 Dec 2003) | 3 lines

[GTK1] Upon restart, a disabled search will now be shown in gray in the
search list (fixes bug #857972).

------------------------------------------------------------------------
r4412 | rmanfredi | 2003-12-27 04:37:02 -0500 (Sat, 27 Dec 2003) | 2 lines

Finished integration of Emile's gtk2 changes.

------------------------------------------------------------------------
r4411 | rmanfredi | 2003-12-27 04:32:24 -0500 (Sat, 27 Dec 2003) | 3 lines

Due to a stupid typo, we were denying promoting nodes to UP even if the
bandwidth requirements were met [Patch from Sebastian Bork].

------------------------------------------------------------------------
r4410 | rmanfredi | 2003-12-27 04:15:46 -0500 (Sat, 27 Dec 2003) | 2 lines

Forgot this file as part of Emile's patch to create a tree-view for downloads.

------------------------------------------------------------------------
r4409 | rmanfredi | 2003-12-26 17:24:40 -0500 (Fri, 26 Dec 2003) | 2 lines

Version of 26/12/2003.

------------------------------------------------------------------------
r4408 | rmanfredi | 2003-12-26 17:23:36 -0500 (Fri, 26 Dec 2003) | 4 lines

Added missing RCSID.
Removed "#ifdef USE_GTK2" as it is now a GTK1-only file.
Fixed some coding standard violations.

------------------------------------------------------------------------
r4407 | rmanfredi | 2003-12-26 17:17:01 -0500 (Fri, 26 Dec 2003) | 3 lines

Added RCSID.
Hastily fixed as many coding standard violations as I could see.

------------------------------------------------------------------------
r4406 | rmanfredi | 2003-12-26 17:15:45 -0500 (Fri, 26 Dec 2003) | 2 lines

Moved RCSID.

------------------------------------------------------------------------
r4405 | rmanfredi | 2003-12-26 16:58:16 -0500 (Fri, 26 Dec 2003) | 2 lines

Replaced "#ifndef USE_GTK2" by "#ifdef USE_GTK1".

------------------------------------------------------------------------
r4404 | rmanfredi | 2003-12-26 16:54:31 -0500 (Fri, 26 Dec 2003) | 4 lines

Added empty labels in the Config / User interface / gnutellaNet frame to
avoid brutal resizing of the enclosing frame when the gnutella info selection
frame appears.

------------------------------------------------------------------------
r4403 | rmanfredi | 2003-12-26 16:35:40 -0500 (Fri, 26 Dec 2003) | 2 lines

Applied patch to introduce tree-view for downloads [From Emile le Vivre].

------------------------------------------------------------------------
r4402 | rmanfredi | 2003-12-26 16:26:47 -0500 (Fri, 26 Dec 2003) | 2 lines

Created [Patch from Emile le Vivre].

------------------------------------------------------------------------
r4401 | rmanfredi | 2003-12-26 14:39:37 -0500 (Fri, 26 Dec 2003) | 3 lines

Fixed compilation problem for gcc 2.95 which is strict C and did not
allow statements before variable declaration.

------------------------------------------------------------------------
r4400 | rmanfredi | 2003-12-26 14:37:08 -0500 (Fri, 26 Dec 2003) | 2 lines

Integrated bugfix in random chunk shuffling for PFSP [From Hans de Graaff].

------------------------------------------------------------------------
r4399 | rmanfredi | 2003-12-26 14:24:00 -0500 (Fri, 26 Dec 2003) | 3 lines

Optimize GUI refreshing of nodes and uploads to only perform it when
the GUI displays the node or upload page.

------------------------------------------------------------------------
r4398 | rmanfredi | 2003-12-26 14:23:10 -0500 (Fri, 26 Dec 2003) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r4397 | rmanfredi | 2003-12-26 13:40:50 -0500 (Fri, 26 Dec 2003) | 4 lines

[GTK1] Added ability to configure Gnutella message sizes in expert mode,
as well as the ability to customize some of the columns and info display
in the gnutellaNet pane.

------------------------------------------------------------------------
r4396 | rmanfredi | 2003-12-26 13:38:01 -0500 (Fri, 26 Dec 2003) | 2 lines

Updated a comment.

------------------------------------------------------------------------
r4395 | rmanfredi | 2003-12-26 13:37:39 -0500 (Fri, 26 Dec 2003) | 3 lines

Use dynamic configuration to generate the node "Info" column display.
Added symbolic constants to refer to node columns.

------------------------------------------------------------------------
r4394 | rmanfredi | 2003-12-26 13:32:40 -0500 (Fri, 26 Dec 2003) | 6 lines

Introduced many new GUI properties:
. node_show_uptime
. node_show_handshake_version
. node_show_detailed_info
. show_gnet_info_XXX [15 of them]

------------------------------------------------------------------------
r4393 | rmanfredi | 2003-12-26 13:30:27 -0500 (Fri, 26 Dec 2003) | 2 lines

Fixed compiler warning in boolean expression.

------------------------------------------------------------------------
r4392 | rmanfredi | 2003-12-26 13:29:56 -0500 (Fri, 26 Dec 2003) | 3 lines

Changed min/max values for Gnutella message sizes now that they can be
configured from the GUI.

------------------------------------------------------------------------
r4391 | rmanfredi | 2003-12-26 10:55:23 -0500 (Fri, 26 Dec 2003) | 2 lines

Added Hans de Graaff.

------------------------------------------------------------------------
r4390 | rmanfredi | 2003-12-26 10:54:44 -0500 (Fri, 26 Dec 2003) | 3 lines

Don't send QUEUE callbacks for entries we no longer share [Patch from
Hans de Graaff].

------------------------------------------------------------------------
r4389 | rmanfredi | 2003-12-26 05:02:33 -0500 (Fri, 26 Dec 2003) | 2 lines

Message "re-request too soon" is now only emitted under debugging.

------------------------------------------------------------------------
r4388 | wyldfire | 2003-12-25 15:43:26 -0500 (Thu, 25 Dec 2003) | 6 lines


Use hidden rc files for the home directory and normal files for the
  config dir. That's:
  ~/.gtkrc
  ~/.gtk-gnutella/gtkrc

------------------------------------------------------------------------
r4387 | wyldfire | 2003-12-25 15:35:40 -0500 (Thu, 25 Dec 2003) | 2 lines

aftermath

------------------------------------------------------------------------
r4386 | wyldfire | 2003-12-25 15:34:15 -0500 (Thu, 25 Dec 2003) | 6 lines


[Gtk2] No more Gtk-Critical when loading gtkrc file. rc-file loading code
  now uses ~/gtkrc for gtk1 and ~/.gtkrc-2.0 for gtkg. This is correct
  on my Debian system and hopefully also on other systems. (Analogous for
  the rc files in the gtkg config dir.)

------------------------------------------------------------------------
r4385 | wyldfire | 2003-12-25 15:32:32 -0500 (Thu, 25 Dec 2003) | 3 lines


[Gtk2] Socket recieve buffer size settings visible only in expert mode.

------------------------------------------------------------------------
r4384 | wyldfire | 2003-12-24 21:21:30 -0500 (Wed, 24 Dec 2003) | 2 lines

no comment

------------------------------------------------------------------------
r4383 | wyldfire | 2003-12-24 21:20:58 -0500 (Wed, 24 Dec 2003) | 3 lines


* Added "Compute upload connection speed" setting to config pane

------------------------------------------------------------------------
r4382 | wyldfire | 2003-12-24 21:16:23 -0500 (Wed, 24 Dec 2003) | 8 lines


* More padding fixes.
* In bandwidth config panel changed layout to match that of the
  Gtk2 interface.
* Updated gui maintainer entry in about dialog.
* Changed label of expert mode toggle to
  "Show additional information and settings for advanced and expert users"

------------------------------------------------------------------------
r4381 | wyldfire | 2003-12-24 21:13:37 -0500 (Wed, 24 Dec 2003) | 7 lines


* More padding fixes.
* Updated gui maintainer entry in about dialog.
* Changed label of expert mode toggle to
  "Show additional information and settings for advanced and expert users"
* Added "Compute upload connection speed" setting to config pane.

------------------------------------------------------------------------
r4380 | wyldfire | 2003-12-24 11:34:59 -0500 (Wed, 24 Dec 2003) | 2 lines

no comment

------------------------------------------------------------------------
r4379 | wyldfire | 2003-12-24 11:33:14 -0500 (Wed, 24 Dec 2003) | 4 lines


Fix sidebar resizing when traffic stats are hidden (a hack, but
  it seems to work)

------------------------------------------------------------------------
r4378 | wyldfire | 2003-12-24 11:11:17 -0500 (Wed, 24 Dec 2003) | 2 lines

no comment

------------------------------------------------------------------------
r4377 | wyldfire | 2003-12-24 11:10:40 -0500 (Wed, 24 Dec 2003) | 4 lines


Added option to automatically hide leaf bandwidth stats when not in ultrapeer
  mode (default: on).

------------------------------------------------------------------------
r4376 | rmanfredi | 2003-12-24 10:48:48 -0500 (Wed, 24 Dec 2003) | 2 lines

Treat all input exceptions during download as an EOF condition.

------------------------------------------------------------------------
r4375 | wyldfire | 2003-12-24 09:56:42 -0500 (Wed, 24 Dec 2003) | 3 lines


Merry christmas!

------------------------------------------------------------------------
r4374 | wyldfire | 2003-12-24 09:54:44 -0500 (Wed, 24 Dec 2003) | 4 lines


Hide leaf bandwidth odometers in the sidebar by default. Most people will
  not need those.

------------------------------------------------------------------------
r4373 | wyldfire | 2003-12-24 09:50:31 -0500 (Wed, 24 Dec 2003) | 3 lines


Moved stuff to expert mode again because of update conflict.

------------------------------------------------------------------------
r4372 | rmanfredi | 2003-12-24 09:42:02 -0500 (Wed, 24 Dec 2003) | 3 lines

[GTK2] Fix from Russell Francis putting back socket RX buffer size
selection into an "expert" frame.

------------------------------------------------------------------------
r4371 | wyldfire | 2003-12-24 09:39:03 -0500 (Wed, 24 Dec 2003) | 15 lines


Applied suggestions of Emile le Vivre for gui simplification:
  - moved to expert mode:
    - hostcatcher (gnet panel)
    - transfered files stats (gnet panel)
    - local node information (gnet panel)
    - 'add passive' searches (sidebar)
  - Searches: current search combo removed (only hidden for now),
    redesigned settings panel, moved adding of new searches to sidebar,
    moved a few buttons around
  - Sidebar: moved adding of new searches here
  - Config: a few minor changes in the gnet settings to make gtk1 and gtk2
    look more similar.
Changed lots of paddings and spacings so they are more uniform.

------------------------------------------------------------------------
r4370 | wyldfire | 2003-12-24 09:35:48 -0500 (Wed, 24 Dec 2003) | 14 lines


Applied suggestions of Emile le Vivre for gui simplification:
  - moved to expert mode:
    - hostcatcher (gnet panel)
    - transfered files stats (gnet panel)
    - local node information (gnet panel)
    - 'add passive' searches (sidebar)
  - Searches: current search combo removed (only hidden for now),
    redesigned settings panel, moved adding of new searches to sidebar,
    moved a few buttons around
  - Sidebar: moved adding of new searches here
  - Config: a few minor changes in the gnet settings to make gtk1 and gtk2
    look more similar.

------------------------------------------------------------------------
r4369 | rmanfredi | 2003-12-24 05:27:53 -0500 (Wed, 24 Dec 2003) | 3 lines

Enforce the maximum uploads per IP after PARQ, since it seems there is
a race condition somewhere.

------------------------------------------------------------------------
r4368 | rmanfredi | 2003-12-24 05:26:39 -0500 (Wed, 24 Dec 2003) | 3 lines

PARQ will now guard a slot for 45 seconds after a remote disconnect.
Special handling for stalled uploads being replaced in parq_upload_get().

------------------------------------------------------------------------
r4367 | rmanfredi | 2003-12-24 05:22:57 -0500 (Wed, 24 Dec 2003) | 2 lines

Don't call bsched_clear_active() too often: only once per period.

------------------------------------------------------------------------
r4366 | rmanfredi | 2003-12-24 03:20:57 -0500 (Wed, 24 Dec 2003) | 2 lines

Added a short_size64() routine for 64-bit values.

------------------------------------------------------------------------
r4365 | rmanfredi | 2003-12-23 18:34:29 -0500 (Tue, 23 Dec 2003) | 3 lines

Transferred bytes are now shown in short size form, followed by the
verbatim value between parenthesis.

------------------------------------------------------------------------
r4364 | rmanfredi | 2003-12-21 18:23:53 -0500 (Sun, 21 Dec 2003) | 3 lines

Don't queue up a new query message in the queue if we already have an
unsent message in the queue originating from the same search.

------------------------------------------------------------------------
r4363 | rmanfredi | 2003-12-21 18:20:52 -0500 (Sun, 21 Dec 2003) | 4 lines

Don't update drop statistics on high TTL when running as a leaf node and
don't bother running through the routing computation for forwarding
a message since leaf nodes will never actually route messages.

------------------------------------------------------------------------
r4362 | rmanfredi | 2003-12-20 15:30:04 -0500 (Sat, 20 Dec 2003) | 2 lines

Version of 20/12/2003.

------------------------------------------------------------------------
r4361 | rmanfredi | 2003-12-20 15:27:05 -0500 (Sat, 20 Dec 2003) | 2 lines

[GTK2] Patch from Russell Francis adding the avail b/w display like in GTK1.

------------------------------------------------------------------------
r4360 | rmanfredi | 2003-12-20 15:18:17 -0500 (Sat, 20 Dec 2003) | 2 lines

[GTK1] Added GUI interface for "compute_connection_speed" configuration.

------------------------------------------------------------------------
r4359 | rmanfredi | 2003-12-20 15:16:50 -0500 (Sat, 20 Dec 2003) | 3 lines

Changed semantics of reported connection speed: it is now the connection
speed in kbits/s for each upload slot, not a global one.

------------------------------------------------------------------------
r4358 | rmanfredi | 2003-12-20 15:15:16 -0500 (Sat, 20 Dec 2003) | 2 lines

PARQ will no longer send QUEUE when uploads are disabled.

------------------------------------------------------------------------
r4357 | rmanfredi | 2003-12-20 15:12:34 -0500 (Sat, 20 Dec 2003) | 2 lines

New property "compute_connection_speed", TRUE by default.

------------------------------------------------------------------------
r4356 | rmanfredi | 2003-12-17 10:36:17 -0500 (Wed, 17 Dec 2003) | 5 lines

Removed unused "Default minimum speed" configuration in the
Config / Gnutella pane.
Changed increments for bandwidth changes via PageUp and PageDown to be 5
units, and increments for the speed reported to peers to be 8 units.

------------------------------------------------------------------------
r4355 | eqom14 | 2003-12-17 05:15:27 -0500 (Wed, 17 Dec 2003) | 2 lines

82 - 27 bad + 17 new = 72.  Net loss 10.

------------------------------------------------------------------------
r4354 | rmanfredi | 2003-12-17 01:48:53 -0500 (Wed, 17 Dec 2003) | 2 lines

Version of 17/12/2003.

------------------------------------------------------------------------
r4353 | rmanfredi | 2003-12-17 01:47:23 -0500 (Wed, 17 Dec 2003) | 4 lines

Changed some property defaults:
	node_monitor_unstable_servents -> FALSE (was TRUE)
	max_leaves -> 48 (was 100)

------------------------------------------------------------------------
r4352 | rmanfredi | 2003-12-17 01:45:49 -0500 (Wed, 17 Dec 2003) | 2 lines

Changed minimum bandwidth requirements per leaf (128 bytes -> 64).

------------------------------------------------------------------------
r4351 | rmanfredi | 2003-12-16 13:33:35 -0500 (Tue, 16 Dec 2003) | 2 lines

Don't count TTL=0 messages when we're a leaf node since we handle them.

------------------------------------------------------------------------
r4350 | rmanfredi | 2003-12-16 13:22:40 -0500 (Tue, 16 Dec 2003) | 2 lines

Added more cleaning actions.

------------------------------------------------------------------------
r4349 | rmanfredi | 2003-12-16 13:14:18 -0500 (Tue, 16 Dec 2003) | 2 lines

New property "dl_http_latency".

------------------------------------------------------------------------
r4348 | rmanfredi | 2003-12-16 13:10:56 -0500 (Tue, 16 Dec 2003) | 3 lines

Downloads now maintain a measure of the HTTP latency between request
and reply.

------------------------------------------------------------------------
r4347 | rmanfredi | 2003-12-16 13:09:16 -0500 (Tue, 16 Dec 2003) | 2 lines

Added bsched_enabled() macro.

------------------------------------------------------------------------
r4346 | rmanfredi | 2003-12-16 13:08:52 -0500 (Tue, 16 Dec 2003) | 2 lines

Added tm.c.

------------------------------------------------------------------------
r4345 | rmanfredi | 2003-12-16 13:06:19 -0500 (Tue, 16 Dec 2003) | 3 lines

[GTK1] Added display of total limited bandwidth in the Config / Bandwidth
pane, as well as the current measure of the HTTP latency.

------------------------------------------------------------------------
r4344 | rmanfredi | 2003-12-16 13:01:13 -0500 (Tue, 16 Dec 2003) | 2 lines

Regenerated after addition of "struct timeval" manipulation routines.

------------------------------------------------------------------------
r4343 | rmanfredi | 2003-12-16 13:00:10 -0500 (Tue, 16 Dec 2003) | 2 lines

Added "struct timeval" manipulation routines.

------------------------------------------------------------------------
r4342 | rmanfredi | 2003-12-15 14:04:40 -0500 (Mon, 15 Dec 2003) | 2 lines

[GTK1] Added "expert" settings to configure the RX buffers of sockets.

------------------------------------------------------------------------
r4341 | rmanfredi | 2003-12-15 13:56:50 -0500 (Mon, 15 Dec 2003) | 3 lines

Added two new properties: "download_rx_size" and "node_rx_size" to
configure the socket RX buffer size.

------------------------------------------------------------------------
r4340 | rmanfredi | 2003-12-15 13:52:33 -0500 (Mon, 15 Dec 2003) | 2 lines

Removed Richard Eckart from the list of devs for this year.

------------------------------------------------------------------------
r4339 | rmanfredi | 2003-12-15 03:37:39 -0500 (Mon, 15 Dec 2003) | 3 lines

Changed some timeouts minima values, and added the ".aac" extension (MP3
clone from Apple).

------------------------------------------------------------------------
r4338 | rmanfredi | 2003-12-14 12:11:53 -0500 (Sun, 14 Dec 2003) | 2 lines

Don't forward random pongs to leaves that are already in TX flow control.

------------------------------------------------------------------------
r4337 | rmanfredi | 2003-12-14 12:09:31 -0500 (Sun, 14 Dec 2003) | 3 lines

Fixed IP TOS settings: only change it when downloading/uploading, but
leave normal TOS when exchanging headers.

------------------------------------------------------------------------
r4336 | rmanfredi | 2003-12-14 12:07:50 -0500 (Sun, 14 Dec 2003) | 2 lines

Removed remaining Gnutella 0.4 handshaking code.

------------------------------------------------------------------------
r4335 | nonamer | 2003-12-13 04:24:03 -0500 (Sat, 13 Dec 2003) | 2 lines

Added patch from Clayton. This adds vendor preferencing settings to the gui

------------------------------------------------------------------------
r4334 | rmanfredi | 2003-12-11 09:40:56 -0500 (Thu, 11 Dec 2003) | 2 lines

Suppressed activity timeout between ultra nodes and leaves.

------------------------------------------------------------------------
r4333 | rmanfredi | 2003-12-11 09:07:14 -0500 (Thu, 11 Dec 2003) | 2 lines

Also measure the efficiency of the QRT at the ultra node level.

------------------------------------------------------------------------
r4332 | rmanfredi | 2003-12-11 08:43:04 -0500 (Thu, 11 Dec 2003) | 2 lines

Version of 11/12/2003.

------------------------------------------------------------------------
r4331 | rmanfredi | 2003-12-11 08:42:14 -0500 (Thu, 11 Dec 2003) | 2 lines

Added some query routing table stats for ultrapeers to monitor their leaves.

------------------------------------------------------------------------
r4330 | rmanfredi | 2003-12-11 08:41:03 -0500 (Thu, 11 Dec 2003) | 3 lines

Changed compact_size() to display an even more compact string when the
size is an even multiple of Kbytes, Mbytes, etc...

------------------------------------------------------------------------
r4329 | rmanfredi | 2003-12-10 14:12:26 -0500 (Wed, 10 Dec 2003) | 2 lines

Removed unused variable.

------------------------------------------------------------------------
r4328 | nonamer | 2003-12-10 13:47:52 -0500 (Wed, 10 Dec 2003) | 2 lines

Remove unused variables

------------------------------------------------------------------------
r4327 | nonamer | 2003-12-10 13:45:54 -0500 (Wed, 10 Dec 2003) | 2 lines

Fixed an faulty but allready merged patch.

------------------------------------------------------------------------
r4326 | rmanfredi | 2003-12-10 12:35:52 -0500 (Wed, 10 Dec 2003) | 2 lines

Forgot to request floating point arithmetic when computing QRP efficiency.

------------------------------------------------------------------------
r4325 | rmanfredi | 2003-12-10 12:29:19 -0500 (Wed, 10 Dec 2003) | 3 lines

Keep query/ hit statistics per node (TX & RX) and measure QRP efficiency
for leaf nodes.

------------------------------------------------------------------------
r4324 | rmanfredi | 2003-12-10 09:44:14 -0500 (Wed, 10 Dec 2003) | 3 lines

When remote Gnutella node does not reply correctly or issues a 401 reply,
remember his IP address as being bad.

------------------------------------------------------------------------
r4323 | rmanfredi | 2003-12-10 05:01:09 -0500 (Wed, 10 Dec 2003) | 2 lines

Make sure we can generate valid tokens, or declare ourselves ancient.

------------------------------------------------------------------------
r4322 | rmanfredi | 2003-12-10 02:54:30 -0500 (Wed, 10 Dec 2003) | 4 lines

Make sure to initialize `last_update' when creating a node, to avoid
it being immediately selected by the node_timer() thread for removal!
Restored the activity timeout check...

------------------------------------------------------------------------
r4321 | rmanfredi | 2003-12-10 02:43:46 -0500 (Wed, 10 Dec 2003) | 2 lines

Fix compiler warning.

------------------------------------------------------------------------
r4320 | rmanfredi | 2003-12-10 02:27:53 -0500 (Wed, 10 Dec 2003) | 2 lines

Version of 10/12/2003.

------------------------------------------------------------------------
r4319 | rmanfredi | 2003-12-10 02:24:44 -0500 (Wed, 10 Dec 2003) | 2 lines

Added query throttle.

------------------------------------------------------------------------
r4318 | rmanfredi | 2003-12-10 02:23:34 -0500 (Wed, 10 Dec 2003) | 5 lines

Added warning when running under debug level tracing the BYE received.
When we're a leaf node, don't issue any "Activity Timeout" to our
Ultranodes.  If the connection went dead, this will be caught by their
not replying to our alive pings, after 8 minutes.

------------------------------------------------------------------------
r4317 | eqom14 | 2003-12-09 13:32:33 -0500 (Tue, 09 Dec 2003) | 2 lines

Added new WHATIS command. Minor spelling fixes.

------------------------------------------------------------------------
r4316 | rmanfredi | 2003-12-09 12:13:47 -0500 (Tue, 09 Dec 2003) | 3 lines

Throttle queries that are re-emitted too soon or too closely in time
to not be related.

------------------------------------------------------------------------
r4315 | rmanfredi | 2003-12-09 12:12:13 -0500 (Tue, 09 Dec 2003) | 3 lines

Renamed "Ping throttle" as "Message throttle" since we can now throttle
both pings and queries.

------------------------------------------------------------------------
r4314 | nonamer | 2003-12-09 07:46:44 -0500 (Tue, 09 Dec 2003) | 2 lines

New default settings

------------------------------------------------------------------------
r4313 | rmanfredi | 2003-12-09 07:26:32 -0500 (Tue, 09 Dec 2003) | 2 lines

Regenerated after unit change.

------------------------------------------------------------------------
r4312 | nonamer | 2003-12-09 07:02:40 -0500 (Tue, 09 Dec 2003) | 2 lines

That'll be all folks

------------------------------------------------------------------------
r4311 | nonamer | 2003-12-09 06:59:12 -0500 (Tue, 09 Dec 2003) | 2 lines

As suggested by Murphy. Less scary remote control Configure question

------------------------------------------------------------------------
r4310 | nonamer | 2003-12-09 06:54:44 -0500 (Tue, 09 Dec 2003) | 2 lines

Added Paco Arjonilla to the list of contributors

------------------------------------------------------------------------
r4309 | nonamer | 2003-12-09 06:53:37 -0500 (Tue, 09 Dec 2003) | 3 lines

Added internationalization for the gnutellaNetstats tab messages.
Patch from Paco Arjonilla

------------------------------------------------------------------------
r4308 | nonamer | 2003-12-09 06:30:30 -0500 (Tue, 09 Dec 2003) | 3 lines

Modified and intergrated patch from 'wwp'. gtkrc parsing added on a per
application base

------------------------------------------------------------------------
r4307 | rmanfredi | 2003-12-09 05:10:28 -0500 (Tue, 09 Dec 2003) | 2 lines

Important bug fixing, so mark version as 09/12/2203.

------------------------------------------------------------------------
r4306 | rmanfredi | 2003-12-09 05:08:53 -0500 (Tue, 09 Dec 2003) | 3 lines

Was misparsing HUGE URNs followed by GGEP extensions, causing spurious
"Security Violations" disconnections from GTKG peers.

------------------------------------------------------------------------
r4305 | nonamer | 2003-12-09 04:58:43 -0500 (Tue, 09 Dec 2003) | 4 lines

Intergrated and slightly modified patch from Thadeu Lima de Souza Cascardo.
(Path no 854771). Remote shell WHATIS command displays the tooltip for a
property

------------------------------------------------------------------------
r4304 | rmanfredi | 2003-12-09 03:40:48 -0500 (Tue, 09 Dec 2003) | 3 lines

Added "[weird #n]" tagging string to all debugging warnings emitted when
we increase the weird message count for a node.

------------------------------------------------------------------------
r4303 | rmanfredi | 2003-12-08 18:14:19 -0500 (Mon, 08 Dec 2003) | 3 lines

Allow them to issue a duplicate upload if the original began to stall.
The new upload will simply replace the previous one.

------------------------------------------------------------------------
r4302 | rmanfredi | 2003-12-06 18:46:14 -0500 (Sat, 06 Dec 2003) | 3 lines

Count the amount of bytes actually sent back for each upload request.
This amount is displayed when a data timeout occurs.

------------------------------------------------------------------------
r4301 | eqom14 | 2003-12-05 13:35:09 -0500 (Fri, 05 Dec 2003) | 2 lines

Added translated keys for hu from Sulyok P�ter to desktop entry file

------------------------------------------------------------------------
r4300 | rmanfredi | 2003-12-04 13:52:12 -0500 (Thu, 04 Dec 2003) | 2 lines

Version of 04/12/2003.

------------------------------------------------------------------------
r4299 | rmanfredi | 2003-12-04 13:41:57 -0500 (Thu, 04 Dec 2003) | 3 lines

Detect recurrent upload stalling conditions, and try to workaround
the problem.

------------------------------------------------------------------------
r4298 | rmanfredi | 2003-12-04 13:37:02 -0500 (Thu, 04 Dec 2003) | 2 lines

Exported socket_tos_*() routines and added sock_is_corked().

------------------------------------------------------------------------
r4297 | rmanfredi | 2003-12-04 13:34:59 -0500 (Thu, 04 Dec 2003) | 3 lines

Don't attempt QUEUE callback if we don't have enough bandwidth left to issue
a connection.

------------------------------------------------------------------------
r4296 | rmanfredi | 2003-12-04 13:30:38 -0500 (Thu, 04 Dec 2003) | 2 lines

Added an assertion to make sure we never lose an I/O source.

------------------------------------------------------------------------
r4295 | rmanfredi | 2003-12-04 12:36:56 -0500 (Thu, 04 Dec 2003) | 2 lines

Make sure to include <errno.h> when code uses "errno".

------------------------------------------------------------------------
r4294 | rmanfredi | 2003-12-03 17:03:18 -0500 (Wed, 03 Dec 2003) | 3 lines

Don't return alt-locs for ourselves if they enabled PFSP-server but
disabled sharing for now.

------------------------------------------------------------------------
r4293 | rmanfredi | 2003-12-03 17:02:31 -0500 (Wed, 03 Dec 2003) | 3 lines

Try to account for the bandwidth used by TCP/IP, which can become
significant when many connections are issued concurrently.

------------------------------------------------------------------------
r4292 | eqom14 | 2003-12-02 18:47:21 -0500 (Tue, 02 Dec 2003) | 2 lines

Added StartupNotify=false key

------------------------------------------------------------------------
r4291 | rmanfredi | 2003-12-02 16:10:29 -0500 (Tue, 02 Dec 2003) | 2 lines

Code cleanup: made `uploads' a static variable, and added an assertion.

------------------------------------------------------------------------
r4290 | rmanfredi | 2003-12-02 15:54:50 -0500 (Tue, 02 Dec 2003) | 2 lines

Fixed some possible usage of uninitialized variables.

------------------------------------------------------------------------
r4289 | rmanfredi | 2003-12-02 15:53:36 -0500 (Tue, 02 Dec 2003) | 2 lines

Now shows real instantaneous bandwidth usage and not a fast EMA.

------------------------------------------------------------------------
r4288 | rmanfredi | 2003-11-27 17:03:48 -0500 (Thu, 27 Nov 2003) | 2 lines

Ancient versions should rely on their hostcache to be connected.

------------------------------------------------------------------------
r4287 | rmanfredi | 2003-11-27 16:38:31 -0500 (Thu, 27 Nov 2003) | 3 lines

Fixed mapping of INPUT_EVENT_* into the glib equivalents and normalized
callback processing to abort on an INPUT_EVENT_EXCEPTION, where applicable.

------------------------------------------------------------------------
r4285 | eqom14 | 2003-11-25 23:40:56 -0500 (Tue, 25 Nov 2003) | 2 lines

Added information for packagers re make install INSTALL_PREFIX=/DESTDIR

------------------------------------------------------------------------
r4284 | nonamer | 2003-11-25 17:06:07 -0500 (Tue, 25 Nov 2003) | 2 lines

Changelog, I really don't have that much time currently...

------------------------------------------------------------------------
r4283 | nonamer | 2003-11-25 17:03:43 -0500 (Tue, 25 Nov 2003) | 2 lines

Removed dead gnucleus webcache

------------------------------------------------------------------------
r4282 | rmanfredi | 2003-11-24 10:55:29 -0500 (Mon, 24 Nov 2003) | 2 lines

Version of 24/11/2003.

------------------------------------------------------------------------
r4281 | rmanfredi | 2003-11-24 10:54:50 -0500 (Mon, 24 Nov 2003) | 2 lines

Added check for EACCES for FreeBSD.

------------------------------------------------------------------------
r4280 | rmanfredi | 2003-11-24 10:54:24 -0500 (Mon, 24 Nov 2003) | 2 lines

[GTK1] Was not low-lighting the right search in list when disabling.

------------------------------------------------------------------------
r4279 | rmanfredi | 2003-11-24 10:53:38 -0500 (Mon, 24 Nov 2003) | 2 lines

Revisited node_avoid_monopoly() and node_reserve_slot().

------------------------------------------------------------------------
r4278 | rmanfredi | 2003-11-24 10:52:25 -0500 (Mon, 24 Nov 2003) | 2 lines

New strcmp_delimit() routine to compare strings up to a delimitor.

------------------------------------------------------------------------
r4277 | rmanfredi | 2003-11-24 10:51:46 -0500 (Mon, 24 Nov 2003) | 2 lines

Don't hammer the same webcache if we can't connect.

------------------------------------------------------------------------
r4276 | eqom14 | 2003-11-23 22:15:09 -0500 (Sun, 23 Nov 2003) | 2 lines

Further corrections

------------------------------------------------------------------------
r4275 | eqom14 | 2003-11-23 19:37:13 -0500 (Sun, 23 Nov 2003) | 2 lines

Updated with info provided by Thadeu Cascardo

------------------------------------------------------------------------
r4274 | nonamer | 2003-11-23 13:51:10 -0500 (Sun, 23 Nov 2003) | 2 lines

Use different counters when in Ultra, Leaf or legacy peer mode

------------------------------------------------------------------------
r4273 | nonamer | 2003-11-23 13:06:57 -0500 (Sun, 23 Nov 2003) | 2 lines

Don't devide by zero

------------------------------------------------------------------------
r4272 | nonamer | 2003-11-23 12:51:14 -0500 (Sun, 23 Nov 2003) | 2 lines

Reserving a connection for a gtk-gnutella node should work now

------------------------------------------------------------------------
r4271 | nonamer | 2003-11-22 13:26:52 -0500 (Sat, 22 Nov 2003) | 2 lines

Lets make MrSegfault happy! :)

------------------------------------------------------------------------
r4270 | nonamer | 2003-11-22 07:40:57 -0500 (Sat, 22 Nov 2003) | 3 lines

Don't segfault if node vendor name == NULL. Even though it shouldn't be
NULL anyway.

------------------------------------------------------------------------
r4269 | nonamer | 2003-11-21 18:53:00 -0500 (Fri, 21 Nov 2003) | 5 lines

Option added to prevent one vendor taking over all your gnutella connection
slots.
Option added to reserve a percentage of your gnutella connections for
gtk-gnutella-only.

------------------------------------------------------------------------
r4268 | eqom14 | 2003-11-20 20:24:08 -0500 (Thu, 20 Nov 2003) | 2 lines

Added a couple more registered Categories - FileTransfer and P2P

------------------------------------------------------------------------
r4267 | rmanfredi | 2003-11-11 08:02:38 -0500 (Tue, 11 Nov 2003) | 2 lines

Use average upload bandwidth consumption to compute PARQ ETA values.

------------------------------------------------------------------------
r4266 | rmanfredi | 2003-11-11 06:44:47 -0500 (Tue, 11 Nov 2003) | 2 lines

Pass the u->keep_alive status to http_send_status() on 2xx replies.

------------------------------------------------------------------------
r4265 | rmanfredi | 2003-11-11 06:44:05 -0500 (Tue, 11 Nov 2003) | 3 lines

Fixed http_send_status() to no longer ignore the given keep_alive parameter,
even with 2xx return codes.

------------------------------------------------------------------------
r4264 | rmanfredi | 2003-11-10 15:25:52 -0500 (Mon, 10 Nov 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4263 | rmanfredi | 2003-11-10 15:24:21 -0500 (Mon, 10 Nov 2003) | 2 lines

Flag query hits carrying a push-proxy indication.

------------------------------------------------------------------------
r4262 | rmanfredi | 2003-11-10 15:23:55 -0500 (Mon, 10 Nov 2003) | 2 lines

Use average upload bandwidth consumption to compute PARQ ETA values.

------------------------------------------------------------------------
r4261 | nonamer | 2003-11-09 14:39:23 -0500 (Sun, 09 Nov 2003) | 2 lines

Yesterdays changelog

------------------------------------------------------------------------
r4260 | rmanfredi | 2003-11-09 11:58:51 -0500 (Sun, 09 Nov 2003) | 2 lines

Version of 09/11/2003.

------------------------------------------------------------------------
r4259 | rmanfredi | 2003-11-09 11:47:19 -0500 (Sun, 09 Nov 2003) | 2 lines

Don't expire pong cache for leaves as often as in ultra mode.

------------------------------------------------------------------------
r4258 | rmanfredi | 2003-11-09 11:28:49 -0500 (Sun, 09 Nov 2003) | 2 lines

Forgot to allow X-Available-Ranges emission on HTTP 2xx returns.

------------------------------------------------------------------------
r4257 | rmanfredi | 2003-11-09 11:28:17 -0500 (Sun, 09 Nov 2003) | 2 lines

Forgot to include "settings_gui.h" in main.c.

------------------------------------------------------------------------
r4256 | nonamer | 2003-11-08 13:01:30 -0500 (Sat, 08 Nov 2003) | 2 lines

Lets not forget this one

------------------------------------------------------------------------
r4255 | nonamer | 2003-11-08 12:52:29 -0500 (Sat, 08 Nov 2003) | 2 lines

Incoming patch: Enable purge button in the GTK2 interface

------------------------------------------------------------------------
r4254 | nonamer | 2003-11-08 12:38:57 -0500 (Sat, 08 Nov 2003) | 5 lines

Fixed a bug, which also caused the following assertion:
** ERROR **: file uploads.c: line 636 (send_upload_error_v): assertion > failed: (> hevcnt <= G_N_ELEMENTS(hev))

The array which holded the http_extra_desc_t was not large enough.

------------------------------------------------------------------------
r4252 | nonamer | 2003-11-07 16:48:39 -0500 (Fri, 07 Nov 2003) | 2 lines

Added Sulyok P�ter to the contributors list

------------------------------------------------------------------------
r4251 | nonamer | 2003-11-07 16:37:54 -0500 (Fri, 07 Nov 2003) | 3 lines

Added hungarian (is this the correct spelling?) translation
Credits: Sulyok P�ter <sp@elte.hu>

------------------------------------------------------------------------
r4250 | nonamer | 2003-11-06 17:51:57 -0500 (Thu, 06 Nov 2003) | 4 lines

Version 06/11/2003 => Use this version if you want to run the GTK2 interface
but don't want to run any into trouble because CVS introduced all kind of new
features.

------------------------------------------------------------------------
r4249 | nonamer | 2003-11-06 17:50:20 -0500 (Thu, 06 Nov 2003) | 3 lines

Changelog for 6/11/2003.
Use this version if you want to run the GTK2 interface

------------------------------------------------------------------------
r4248 | nonamer | 2003-11-06 17:47:07 -0500 (Thu, 06 Nov 2003) | 2 lines

Fixed incorrect assertions. GTK2 should now run stable

------------------------------------------------------------------------
r4247 | nonamer | 2003-11-06 14:55:27 -0500 (Thu, 06 Nov 2003) | 2 lines

Intergrated patch from Thadeu Cascardo. Improvements in the remote shell

------------------------------------------------------------------------
r4246 | rmanfredi | 2003-11-04 14:41:12 -0500 (Tue, 04 Nov 2003) | 2 lines

Don't include ourselves in the mesh (PFSP server) if we're firewalled.

------------------------------------------------------------------------
r4245 | nonamer | 2003-11-03 14:09:42 -0500 (Mon, 03 Nov 2003) | 3 lines

Make sure gtk-gnutella.desktop and gtk-gnutella.png will be in the release
next time

------------------------------------------------------------------------
r4244 | nonamer | 2003-11-03 14:08:41 -0500 (Mon, 03 Nov 2003) | 2 lines

Fixed formatting error

------------------------------------------------------------------------
r4243 | nonamer | 2003-11-03 14:07:37 -0500 (Mon, 03 Nov 2003) | 4 lines

Fixed a lot of compiler warnings. Some might actually prevent a segfault ;)
There are a limit number of warnings left, however they can't all be fixed
right now

------------------------------------------------------------------------
r4242 | nonamer | 2003-11-03 14:04:57 -0500 (Mon, 03 Nov 2003) | 2 lines

A little bit updated the translation

------------------------------------------------------------------------
r4241 | nonamer | 2003-11-03 13:51:54 -0500 (Mon, 03 Nov 2003) | 2 lines

X-Features was not _always_ send. Nothing to worry about.

------------------------------------------------------------------------
r4240 | nonamer | 2003-11-03 13:51:01 -0500 (Mon, 03 Nov 2003) | 2 lines

Back to development version again

------------------------------------------------------------------------
r4232 | nonamer | 2003-11-02 08:43:21 -0500 (Sun, 02 Nov 2003) | 2 lines

Release 0.93

------------------------------------------------------------------------
r4231 | nonamer | 2003-11-02 08:40:08 -0500 (Sun, 02 Nov 2003) | 2 lines

Release 0.93 stable.

------------------------------------------------------------------------
r4230 | eqom14 | 2003-11-02 08:17:42 -0500 (Sun, 02 Nov 2003) | 2 lines

Last minute cleanup of GWC's.

------------------------------------------------------------------------
r4228 | eqom14 | 2003-11-02 05:18:36 -0500 (Sun, 02 Nov 2003) | 2 lines

Added fr desktop entry by T`az

------------------------------------------------------------------------
r4227 | rmanfredi | 2003-11-02 04:58:54 -0500 (Sun, 02 Nov 2003) | 2 lines

Number of legacy connections is now 0 by default.

------------------------------------------------------------------------
r4226 | eqom14 | 2003-11-02 04:57:31 -0500 (Sun, 02 Nov 2003) | 2 lines

Indent more consistantly the make clobber.

------------------------------------------------------------------------
r4225 | eqom14 | 2003-11-02 04:54:44 -0500 (Sun, 02 Nov 2003) | 2 lines

Indent make clobber to be consistant.

------------------------------------------------------------------------
r4224 | eqom14 | 2003-11-02 04:52:27 -0500 (Sun, 02 Nov 2003) | 2 lines

Encourage the user to accept the Configure default if they don't know what to answer.

------------------------------------------------------------------------
r4223 | eqom14 | 2003-11-02 04:48:20 -0500 (Sun, 02 Nov 2003) | 2 lines

Emphasized that Configure is meant to be interactive, added a note about make clobber.

------------------------------------------------------------------------
r4222 | rmanfredi | 2003-11-02 04:44:41 -0500 (Sun, 02 Nov 2003) | 2 lines

Don't consider sending "alive" pings in timer unless Gnutella is established.

------------------------------------------------------------------------
r4221 | rmanfredi | 2003-11-02 04:39:20 -0500 (Sun, 02 Nov 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4220 | rmanfredi | 2003-11-02 04:31:14 -0500 (Sun, 02 Nov 2003) | 5 lines

Don't mark node as bad when an EOF condition occurs but the Gnutella
connection is not "established".  It could be the result of a timeout
on the other end, and without an established connection, no BYE is
possible.

------------------------------------------------------------------------
r4219 | rmanfredi | 2003-11-02 03:31:00 -0500 (Sun, 02 Nov 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4218 | rmanfredi | 2003-11-02 02:57:25 -0500 (Sun, 02 Nov 2003) | 4 lines

Added the concept of "established" Gnutella connection: don't relay
Gnutella traffic to non-established connections.  A connection becomes
established when we receive traffic or got the 3rd handshake.

------------------------------------------------------------------------
r4217 | rmanfredi | 2003-11-02 02:53:04 -0500 (Sun, 02 Nov 2003) | 2 lines

Removed useless file.

------------------------------------------------------------------------
r4216 | rmanfredi | 2003-11-02 02:28:07 -0500 (Sun, 02 Nov 2003) | 2 lines

Don't forget a cache URL when it reports an ERROR: can be a transient problem.

------------------------------------------------------------------------
r4215 | rmanfredi | 2003-11-01 17:43:02 -0500 (Sat, 01 Nov 2003) | 3 lines

As a precaution, keep the max of average and last ping/pong round-trip times
when determining the period for sending "alive" pings.

------------------------------------------------------------------------
r4214 | nonamer | 2003-11-01 17:13:15 -0500 (Sat, 01 Nov 2003) | 2 lines

Added hashtree to the list of sourcefiles needed.

------------------------------------------------------------------------
r4213 | nonamer | 2003-11-01 17:12:04 -0500 (Sat, 01 Nov 2003) | 3 lines

Changed some default values.
Increased the number of maximum simultaneous downloads

------------------------------------------------------------------------
r4212 | rmanfredi | 2003-11-01 17:07:55 -0500 (Sat, 01 Nov 2003) | 2 lines

Use memset() to blank url_tmp[] when forgetting an URL.

------------------------------------------------------------------------
r4211 | nonamer | 2003-11-01 15:20:53 -0500 (Sat, 01 Nov 2003) | 2 lines

Hopefully last commit before creating the 0.93 release

------------------------------------------------------------------------
r4210 | nonamer | 2003-11-01 15:19:00 -0500 (Sat, 01 Nov 2003) | 2 lines

Pass the correct size of the buffer for X-Features generation

------------------------------------------------------------------------
r4209 | nonamer | 2003-11-01 15:16:55 -0500 (Sat, 01 Nov 2003) | 2 lines

Reformatted to use tabs for ident instead of spaces

------------------------------------------------------------------------
r4208 | nonamer | 2003-11-01 15:16:11 -0500 (Sat, 01 Nov 2003) | 2 lines

X-Features creation now used header_fmt_* functions

------------------------------------------------------------------------
r4207 | rmanfredi | 2003-11-01 15:12:04 -0500 (Sat, 01 Nov 2003) | 2 lines

Forgot that g_hash_table_lookup_extended() returns a boolean, not the value.

------------------------------------------------------------------------
r4206 | rmanfredi | 2003-11-01 14:32:31 -0500 (Sat, 01 Nov 2003) | 2 lines

Fixed ban_mesh_by_ip management and X-Nalt generation.

------------------------------------------------------------------------
r4205 | rmanfredi | 2003-11-01 13:09:37 -0500 (Sat, 01 Nov 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4204 | rmanfredi | 2003-11-01 12:47:45 -0500 (Sat, 01 Nov 2003) | 2 lines

Remove bad URLs from the Gnutella web cache as soon as we encounter them.

------------------------------------------------------------------------
r4203 | nonamer | 2003-11-01 12:45:55 -0500 (Sat, 01 Nov 2003) | 2 lines

Intergrated patch from Clayton which adds PFS settings in the GTK2 interface

------------------------------------------------------------------------
r4202 | nonamer | 2003-11-01 12:21:52 -0500 (Sat, 01 Nov 2003) | 3 lines

Added support for X-Nalt header sending. We don't parse this header
ourself.

------------------------------------------------------------------------
r4201 | rmanfredi | 2003-11-01 11:02:40 -0500 (Sat, 01 Nov 2003) | 2 lines

Added po/gtk-gnutella.pot for people who can't run xgettext.

------------------------------------------------------------------------
r4200 | rmanfredi | 2003-11-01 10:56:06 -0500 (Sat, 01 Nov 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r4199 | rmanfredi | 2003-11-01 10:13:33 -0500 (Sat, 01 Nov 2003) | 3 lines

Make sure we don't include -lpthread since we don't need it and it
causes problems with recent libc6 and gcc 3.x.

------------------------------------------------------------------------
r4198 | nonamer | 2003-11-01 09:35:27 -0500 (Sat, 01 Nov 2003) | 2 lines

Add updated fr.po

------------------------------------------------------------------------
r4197 | rmanfredi | 2003-11-01 09:32:36 -0500 (Sat, 01 Nov 2003) | 2 lines

Fixed getting of GUI colors in search: is done differently for GTK1/GTK2.

------------------------------------------------------------------------
r4196 | rmanfredi | 2003-11-01 08:05:07 -0500 (Sat, 01 Nov 2003) | 2 lines

Take into account the last ping round-trip time for spacing out our pings.

------------------------------------------------------------------------
r4195 | rmanfredi | 2003-11-01 07:34:14 -0500 (Sat, 01 Nov 2003) | 2 lines

Added this xgettext-generated file.

------------------------------------------------------------------------
r4194 | rmanfredi | 2003-11-01 05:43:13 -0500 (Sat, 01 Nov 2003) | 3 lines

Do not send "alive" pings if we've been receiving data from the remote
node recently.

------------------------------------------------------------------------
r4193 | rmanfredi | 2003-11-01 04:51:12 -0500 (Sat, 01 Nov 2003) | 5 lines

Account for BearShare 4.3.x no longer sending the X-Ultrapeer to signal
Ultrapeer status but relies on X-Ultrapeer-Needed instead.
Cleanly deny the connection to Ultrapeers requesting us to become a leaf
when we cannot be demoted.

------------------------------------------------------------------------
r4192 | rmanfredi | 2003-11-01 04:17:09 -0500 (Sat, 01 Nov 2003) | 2 lines

Changed the leveling algorithm to use floating point for more precision.

------------------------------------------------------------------------
r4191 | rmanfredi | 2003-10-31 18:26:38 -0500 (Fri, 31 Oct 2003) | 2 lines

Version of 31/10/2003.

------------------------------------------------------------------------
r4190 | rmanfredi | 2003-10-31 18:24:55 -0500 (Fri, 31 Oct 2003) | 3 lines

When leveling the reissue timeout, don't change the value they entered
as it is the one displayed in the GUI.

------------------------------------------------------------------------
r4189 | rmanfredi | 2003-10-31 17:58:48 -0500 (Fri, 31 Oct 2003) | 2 lines

Ooops, forgot an argument when calling search_update_items().

------------------------------------------------------------------------
r4188 | rmanfredi | 2003-10-31 17:18:22 -0500 (Fri, 31 Oct 2003) | 2 lines

Forgot to level reissue timeout at search creation.

------------------------------------------------------------------------
r4187 | rmanfredi | 2003-10-31 17:16:17 -0500 (Fri, 31 Oct 2003) | 2 lines

Increased size of hev[] in upload_request().

------------------------------------------------------------------------
r4186 | rmanfredi | 2003-10-31 16:42:38 -0500 (Fri, 31 Oct 2003) | 2 lines

Added a bunch of new addresses collected from a .htaccess and converted.

------------------------------------------------------------------------
r4185 | nonamer | 2003-10-31 16:33:57 -0500 (Fri, 31 Oct 2003) | 2 lines

Sorry, no code freeze today. I stil need to finish one more thing tomorrow

------------------------------------------------------------------------
r4184 | nonamer | 2003-10-31 16:24:08 -0500 (Fri, 31 Oct 2003) | 2 lines

OK, this is what happens when I am not reviewing my own code...

------------------------------------------------------------------------
r4183 | rmanfredi | 2003-10-31 16:22:34 -0500 (Fri, 31 Oct 2003) | 3 lines

Let the GUI side tell the core side how much items were found and are
still listed in the search window.

------------------------------------------------------------------------
r4182 | nonamer | 2003-10-31 16:01:35 -0500 (Fri, 31 Oct 2003) | 3 lines

Don't use the type anymore to indicate for which connection the X-Features
header should be applied

------------------------------------------------------------------------
r4181 | rmanfredi | 2003-10-31 15:32:58 -0500 (Fri, 31 Oct 2003) | 3 lines

Disable non-passive searches that became full (max configured amount
of result displayed).

------------------------------------------------------------------------
r4180 | nonamer | 2003-10-31 14:45:53 -0500 (Fri, 31 Oct 2003) | 2 lines

Seperate the featured features with a comma!

------------------------------------------------------------------------
r4179 | nonamer | 2003-10-31 14:38:17 -0500 (Fri, 31 Oct 2003) | 2 lines

Only emit X-Features header when the header is not empty

------------------------------------------------------------------------
r4178 | rmanfredi | 2003-10-31 14:30:36 -0500 (Fri, 31 Oct 2003) | 2 lines

Restored the "static" nature of the "current_search" variable.

------------------------------------------------------------------------
r4177 | nonamer | 2003-10-31 14:24:54 -0500 (Fri, 31 Oct 2003) | 3 lines

Added support for X-Features header parsing and generation.
PARQ now also supports the X-Features: queue/1.0 syntax

------------------------------------------------------------------------
r4176 | rmanfredi | 2003-10-31 14:03:39 -0500 (Fri, 31 Oct 2003) | 2 lines

Factorized search_matched() into search_gui_common.c.

------------------------------------------------------------------------
r4175 | rmanfredi | 2003-10-31 03:21:17 -0500 (Fri, 31 Oct 2003) | 4 lines

More attempt to workaround the errno == 0 problem.  Introduced a specific
variable "do_errno" to avoid any black magic done by the compiler/linker
on the "errno" variable.

------------------------------------------------------------------------
r4174 | eqom14 | 2003-10-30 17:14:00 -0500 (Thu, 30 Oct 2003) | 2 lines

Make the gtk1 gui since the gtk2 version is not currently supported.

------------------------------------------------------------------------
r4173 | rmanfredi | 2003-10-30 02:20:13 -0500 (Thu, 30 Oct 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4172 | rmanfredi | 2003-10-30 02:19:29 -0500 (Thu, 30 Oct 2003) | 3 lines

When a download is done, try to rename it using one of the non URN-like
aliases we have for it.

------------------------------------------------------------------------
r4171 | rmanfredi | 2003-10-30 02:01:40 -0500 (Thu, 30 Oct 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4170 | rmanfredi | 2003-10-30 02:00:42 -0500 (Thu, 30 Oct 2003) | 6 lines

Changed the way the `fi_by_namesize' hash is handled: we non longer keep
one alias per (name, size) tuple but a list of them.  This avoids dropping
alternate names between different fileinfo for the "same" file (albeit
bearing disctint SHA1).  Non-SHA1 matching of query hits will now autoselect
an entry for downloading only if there is one known entry by (name, size).

------------------------------------------------------------------------
r4169 | rmanfredi | 2003-10-30 01:55:54 -0500 (Thu, 30 Oct 2003) | 3 lines

No longer emit the X-Try header during Gnutella handshaking unless we're
runnning in normal (legacy) mode.

------------------------------------------------------------------------
r4168 | nonamer | 2003-10-29 14:03:35 -0500 (Wed, 29 Oct 2003) | 2 lines

I can't do anymore today

------------------------------------------------------------------------
r4167 | nonamer | 2003-10-29 12:57:00 -0500 (Wed, 29 Oct 2003) | 4 lines

Better cross compiling.
Removed some inline keywords where it would never help anyway.
Don't return a value if the function is 'void'.

------------------------------------------------------------------------
r4166 | rmanfredi | 2003-10-28 18:13:16 -0500 (Tue, 28 Oct 2003) | 2 lines

Version of 28/10/2003.

------------------------------------------------------------------------
r4165 | rmanfredi | 2003-10-28 18:12:21 -0500 (Tue, 28 Oct 2003) | 2 lines

Don't share partial files, even if the "tmp" directory is shared.

------------------------------------------------------------------------
r4164 | rmanfredi | 2003-10-28 18:11:38 -0500 (Tue, 28 Oct 2003) | 3 lines

Added file_info_has_trailer() to check whether a file has a trailer,
indicating it is being downloaded but still incomplete.

------------------------------------------------------------------------
r4163 | rmanfredi | 2003-10-28 17:20:20 -0500 (Tue, 28 Oct 2003) | 3 lines

When checking for an up-to-date SHA1 in a partial file, don't bother
verifying whether the file is still present on the disk.

------------------------------------------------------------------------
r4162 | rmanfredi | 2003-10-28 13:34:27 -0500 (Tue, 28 Oct 2003) | 2 lines

Raised minimal search retry timeout to 1800 seconds.

------------------------------------------------------------------------
r4161 | rmanfredi | 2003-10-28 13:33:19 -0500 (Tue, 28 Oct 2003) | 2 lines

Was missing header inclusion protection.

------------------------------------------------------------------------
r4160 | rmanfredi | 2003-10-28 13:33:04 -0500 (Tue, 28 Oct 2003) | 2 lines

RCSID definition was not correct (missed trailing '$').

------------------------------------------------------------------------
r4159 | eqom14 | 2003-10-28 04:56:56 -0500 (Tue, 28 Oct 2003) | 2 lines

Added some, removed more - net loss of 5 - now 80 GWCs.

------------------------------------------------------------------------
r4158 | eqom14 | 2003-10-28 02:04:12 -0500 (Tue, 28 Oct 2003) | 2 lines

Removed a 404 and a redirect.

------------------------------------------------------------------------
r4157 | rmanfredi | 2003-10-27 12:51:44 -0500 (Mon, 27 Oct 2003) | 2 lines

Wrapped some strategic stat() calls via do_stat() due to the errno == 0 bug.

------------------------------------------------------------------------
r4156 | rmanfredi | 2003-10-27 08:33:10 -0500 (Mon, 27 Oct 2003) | 2 lines

Added keys for forthcoming 0.92.2.

------------------------------------------------------------------------
r4155 | rmanfredi | 2003-10-27 07:20:56 -0500 (Mon, 27 Oct 2003) | 2 lines

Remember atexit() cleanup steps in case we have to abort in the middle.

------------------------------------------------------------------------
r4154 | rmanfredi | 2003-10-27 06:03:30 -0500 (Mon, 27 Oct 2003) | 2 lines

Better accounting for the version's age.

------------------------------------------------------------------------
r4153 | rmanfredi | 2003-10-27 04:56:37 -0500 (Mon, 27 Oct 2003) | 3 lines

Must reparent all downloads to common server when there is an IP conflict
due to DNS resolution of the server name.

------------------------------------------------------------------------
r4152 | rmanfredi | 2003-10-27 04:55:00 -0500 (Mon, 27 Oct 2003) | 2 lines

The download pane will now try to show a non-URN alias for filename.

------------------------------------------------------------------------
r4151 | rmanfredi | 2003-10-27 04:53:44 -0500 (Mon, 27 Oct 2003) | 2 lines

Handle '_' as a space in looks_like_urn().

------------------------------------------------------------------------
r4150 | rmanfredi | 2003-10-27 04:52:32 -0500 (Mon, 27 Oct 2003) | 2 lines

Added "const" qualifier in the signature of hostname_port_to_gchar().

------------------------------------------------------------------------
r4149 | rmanfredi | 2003-10-26 18:57:17 -0500 (Sun, 26 Oct 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4148 | rmanfredi | 2003-10-26 18:56:47 -0500 (Sun, 26 Oct 2003) | 2 lines

[GTK1] Display hostname when known in searches.

------------------------------------------------------------------------
r4147 | rmanfredi | 2003-10-26 18:56:03 -0500 (Sun, 26 Oct 2003) | 2 lines

Added hostname_port_to_gchar().

------------------------------------------------------------------------
r4146 | rmanfredi | 2003-10-26 18:55:42 -0500 (Sun, 26 Oct 2003) | 2 lines

Display hostname when known for downloads.

------------------------------------------------------------------------
r4145 | rmanfredi | 2003-10-26 15:53:54 -0500 (Sun, 26 Oct 2003) | 2 lines

Version of 26/10/2003.

------------------------------------------------------------------------
r4144 | rmanfredi | 2003-10-26 15:52:07 -0500 (Sun, 26 Oct 2003) | 3 lines

Moved generation of X-Hostname further up in the routine, so that more HTTP
replies can include that header.

------------------------------------------------------------------------
r4143 | rmanfredi | 2003-10-26 12:35:40 -0500 (Sun, 26 Oct 2003) | 2 lines

[GTK1] Added configuration of the server's hostname.

------------------------------------------------------------------------
r4142 | rmanfredi | 2003-10-26 12:34:03 -0500 (Sun, 26 Oct 2003) | 2 lines

Generate the GGEP "HNAME" extension in our query hits, if possible.

------------------------------------------------------------------------
r4141 | rmanfredi | 2003-10-26 12:33:25 -0500 (Sun, 26 Oct 2003) | 2 lines

Return the X-Hostname to uploaders if possible.

------------------------------------------------------------------------
r4140 | rmanfredi | 2003-10-26 12:32:47 -0500 (Sun, 26 Oct 2003) | 2 lines

Added socket_bad_hostname().

------------------------------------------------------------------------
r4139 | rmanfredi | 2003-10-26 12:32:10 -0500 (Sun, 26 Oct 2003) | 3 lines

Limit duration of the cleanup during atexit() to avoid endless Xlib loops
in case of a severe crash.

------------------------------------------------------------------------
r4138 | rmanfredi | 2003-10-26 12:30:59 -0500 (Sun, 26 Oct 2003) | 2 lines

Added parsing of the HNAME extension in query hits.

------------------------------------------------------------------------
r4137 | rmanfredi | 2003-10-26 12:29:43 -0500 (Sun, 26 Oct 2003) | 2 lines

Added generation of the X-Hostname header.

------------------------------------------------------------------------
r4136 | rmanfredi | 2003-10-26 12:28:47 -0500 (Sun, 26 Oct 2003) | 3 lines

New properties "server_hostname" and "give_server_hostname" controlling
the setup and the advertising of the server's hostname.

------------------------------------------------------------------------
r4135 | rmanfredi | 2003-10-26 12:27:14 -0500 (Sun, 26 Oct 2003) | 2 lines

Added parsing support for new GGEP "HNAME" extension.

------------------------------------------------------------------------
r4134 | rmanfredi | 2003-10-26 12:26:36 -0500 (Sun, 26 Oct 2003) | 2 lines

Added support for symbolic hostname in downloads.

------------------------------------------------------------------------
r4133 | rmanfredi | 2003-10-26 12:25:06 -0500 (Sun, 26 Oct 2003) | 2 lines

New servent code "FEVR" for FileFever.

------------------------------------------------------------------------
r4132 | rmanfredi | 2003-10-26 12:24:19 -0500 (Sun, 26 Oct 2003) | 2 lines

When creating downloads, one can optionally supply a hostname as well.

------------------------------------------------------------------------
r4131 | rmanfredi | 2003-10-26 12:20:43 -0500 (Sun, 26 Oct 2003) | 2 lines

Fixed async DNS resolution to behave properly when pipe with ADNS fills up.

------------------------------------------------------------------------
r4130 | rmanfredi | 2003-10-26 10:56:59 -0500 (Sun, 26 Oct 2003) | 2 lines

Created.

------------------------------------------------------------------------
r4129 | nonamer | 2003-10-25 10:02:18 -0400 (Sat, 25 Oct 2003) | 2 lines

End of my shift for today ;)

------------------------------------------------------------------------
r4128 | nonamer | 2003-10-25 09:48:22 -0400 (Sat, 25 Oct 2003) | 3 lines

Adds Remove file on resuming mismatch config entry for GTK2. Patch by
Russell Francis.

------------------------------------------------------------------------
r4127 | nonamer | 2003-10-25 09:09:38 -0400 (Sat, 25 Oct 2003) | 3 lines

Don't allow purging a download for which currently a background task
(SHA1 checking) is active.

------------------------------------------------------------------------
r4126 | nonamer | 2003-10-21 15:49:34 -0400 (Tue, 21 Oct 2003) | 4 lines

Increase node_leaf, node_normal or node_ultra counter as soon as the
connection is established and the counter will be decreased on node_remove.
As pointed out by Thadeu Lima de Souza Cascardo

------------------------------------------------------------------------
r4125 | nonamer | 2003-10-21 15:10:17 -0400 (Tue, 21 Oct 2003) | 2 lines

Still had some old entries lying around

------------------------------------------------------------------------
r4124 | nonamer | 2003-10-21 15:05:21 -0400 (Tue, 21 Oct 2003) | 2 lines

Added Thadeu Lima de Souza Cascardo

------------------------------------------------------------------------
r4123 | nonamer | 2003-10-21 15:04:17 -0400 (Tue, 21 Oct 2003) | 3 lines

Intergrated patch from Thadeu Lima de Souza Cascardo, only modified it just
a little bit

------------------------------------------------------------------------
r4121 | eqom14 | 2003-10-20 21:22:39 -0400 (Mon, 20 Oct 2003) | 2 lines

Added some hints on non-interactive use of Configure

------------------------------------------------------------------------
r4120 | rmanfredi | 2003-10-19 15:35:13 -0400 (Sun, 19 Oct 2003) | 4 lines

Rotate sources in bandwidth scheduler at each timeslice, since apparently
the order used to insert them as I/O callbacks determines the order with
which glib calls us back when they trigger.

------------------------------------------------------------------------
r4119 | rmanfredi | 2003-10-18 19:24:00 -0400 (Sat, 18 Oct 2003) | 2 lines

Version of 18/10/2003.

------------------------------------------------------------------------
r4118 | rmanfredi | 2003-10-18 19:23:14 -0400 (Sat, 18 Oct 2003) | 4 lines

Keep information about the mesh information being sent to uploaders for
a longer period, to better accomodate with PARQ's long retry timeouts.
Added more stringent size control on the generated headers in replies.

------------------------------------------------------------------------
r4117 | rmanfredi | 2003-10-18 19:21:09 -0400 (Sat, 18 Oct 2003) | 4 lines

Moved some PARQ constants to parq.h.
More carefully control the generation of the PARQ headers depending on
the callback flags.

------------------------------------------------------------------------
r4116 | rmanfredi | 2003-10-18 19:19:56 -0400 (Sat, 18 Oct 2003) | 3 lines

Trace amount of bytes in HTTP requests and replies.
Updated signature of HTTP header generation callbacks.

------------------------------------------------------------------------
r4115 | rmanfredi | 2003-10-18 19:19:10 -0400 (Sat, 18 Oct 2003) | 3 lines

Refactored the gtk_gnutealla_exit() destruction order to avoid assertion
failures in GUI code.

------------------------------------------------------------------------
r4114 | rmanfredi | 2003-10-18 19:18:15 -0400 (Sat, 18 Oct 2003) | 5 lines

Trace amount of bytes in HTTP requests and replies.
Improved limitation of HTTP replies: now based on the error code with
explicit sizing of the header and with flag propagation to callbacks, to
tell them more about the context of the reply they're generating.

------------------------------------------------------------------------
r4113 | rmanfredi | 2003-10-18 19:16:28 -0400 (Sat, 18 Oct 2003) | 2 lines

Trace amount of bytes in HTTP requests and replies.

------------------------------------------------------------------------
r4112 | rmanfredi | 2003-10-18 12:34:10 -0400 (Sat, 18 Oct 2003) | 2 lines

[GTK1] Added GUI configuration for server-side PFSP.

------------------------------------------------------------------------
r4109 | eqom14 | 2003-10-15 01:09:39 -0400 (Wed, 15 Oct 2003) | 2 lines

Added a few more GWC's for a total of 85 - 0.92.1 had 120.

------------------------------------------------------------------------
r4108 | eqom14 | 2003-10-14 15:46:32 -0400 (Tue, 14 Oct 2003) | 2 lines

Start repopulating GWC's, remove a few more - net gain 18.

------------------------------------------------------------------------
r4107 | rmanfredi | 2003-10-14 02:56:15 -0400 (Tue, 14 Oct 2003) | 2 lines

Version of 13/10/2003.

------------------------------------------------------------------------
r4106 | rmanfredi | 2003-10-14 02:54:20 -0400 (Tue, 14 Oct 2003) | 3 lines

Re-organized gtk_gnutella_exit() to perform only minimal activities
when being called from atexit().

------------------------------------------------------------------------
r4105 | rmanfredi | 2003-10-14 02:49:35 -0400 (Tue, 14 Oct 2003) | 2 lines

Bearshare changed its vendor tag to "BARE" in query hits.

------------------------------------------------------------------------
r4104 | rmanfredi | 2003-10-14 02:48:47 -0400 (Tue, 14 Oct 2003) | 2 lines

Added ip2_to_gchar() in case we want to format two IPs in the same printf.

------------------------------------------------------------------------
r4103 | rmanfredi | 2003-10-14 02:47:37 -0400 (Tue, 14 Oct 2003) | 3 lines

Because of PFSP-server, we can get our own alt-locs back: make sure we
don't try to download a partial file from oursevelves!

------------------------------------------------------------------------
r4102 | rmanfredi | 2003-10-14 02:45:19 -0400 (Tue, 14 Oct 2003) | 2 lines

Detect and ignore exact duplicate entries in the hostiles.txt file.

------------------------------------------------------------------------
r4101 | rmanfredi | 2003-10-14 02:43:33 -0400 (Tue, 14 Oct 2003) | 2 lines

Fixed file_info_available_ranges() to avoid assertion fail at the end.

------------------------------------------------------------------------
r4100 | rmanfredi | 2003-10-12 18:43:53 -0400 (Sun, 12 Oct 2003) | 2 lines

Never try to send anything back when upload stops due to EOF.

------------------------------------------------------------------------
r4099 | rmanfredi | 2003-10-12 18:43:15 -0400 (Sun, 12 Oct 2003) | 2 lines

Removed spurious blank line.

------------------------------------------------------------------------
r4098 | rmanfredi | 2003-10-12 18:42:50 -0400 (Sun, 12 Oct 2003) | 2 lines

Make sure argument to shared_file_free() is never NULL.

------------------------------------------------------------------------
r4097 | rmanfredi | 2003-10-12 18:42:22 -0400 (Sun, 12 Oct 2003) | 2 lines

Fixed memory leak in list_clone_shift().

------------------------------------------------------------------------
r4096 | rmanfredi | 2003-10-12 14:53:08 -0400 (Sun, 12 Oct 2003) | 3 lines

Break out of the available range random generation as soon as we run out
of space in the buffer.

------------------------------------------------------------------------
r4095 | rmanfredi | 2003-10-12 14:52:20 -0400 (Sun, 12 Oct 2003) | 3 lines

Leave only 160 bytes for alt-locs: ranges are important, and soon we'll emit
compact alt-locs unconditionally anyway.

------------------------------------------------------------------------
r4094 | rmanfredi | 2003-10-12 14:38:00 -0400 (Sun, 12 Oct 2003) | 2 lines

Version of 12/10/2003.

------------------------------------------------------------------------
r4093 | rmanfredi | 2003-10-12 14:23:30 -0400 (Sun, 12 Oct 2003) | 2 lines

Be nice about requests for partial files that are sent via name!

------------------------------------------------------------------------
r4092 | rmanfredi | 2003-10-12 13:56:40 -0400 (Sun, 12 Oct 2003) | 2 lines

Better fix for the PARQ/PFSP interaction.

------------------------------------------------------------------------
r4091 | rmanfredi | 2003-10-12 13:56:18 -0400 (Sun, 12 Oct 2003) | 2 lines

Cosmetics.

------------------------------------------------------------------------
r4090 | rmanfredi | 2003-10-12 13:27:33 -0400 (Sun, 12 Oct 2003) | 4 lines

When outgoing bandwidth is saturated, limit the size of the HTTP replies
we make, or the size of our HTTP requests.  This includes emitting shorter
version strings, less alternate locations, etc...

------------------------------------------------------------------------
r4089 | rmanfredi | 2003-10-12 11:18:38 -0400 (Sun, 12 Oct 2003) | 2 lines

Reset "is_followup" when no PARQ slot and they finally request a good chunk.

------------------------------------------------------------------------
r4088 | rmanfredi | 2003-10-12 10:13:29 -0400 (Sun, 12 Oct 2003) | 2 lines

When unlinking or resetting a fileinfo, kill all uploads targeted to it.

------------------------------------------------------------------------
r4087 | nonamer | 2003-10-12 09:37:44 -0400 (Sun, 12 Oct 2003) | 2 lines

Added Richard Hyde

------------------------------------------------------------------------
r4086 | nonamer | 2003-10-12 09:35:08 -0400 (Sun, 12 Oct 2003) | 3 lines

Added purge button support to the GTk2 interface.
(Patch from Richard Hyde)

------------------------------------------------------------------------
r4085 | rmanfredi | 2003-10-12 09:22:19 -0400 (Sun, 12 Oct 2003) | 4 lines

Fixed `running_uploads' counting when waiting for follow-up request after
an "unavailable range" error: decrement it before waiting, since we don't
even know whether there will be a follow-up at all!

------------------------------------------------------------------------
r4084 | rmanfredi | 2003-10-12 09:02:28 -0400 (Sun, 12 Oct 2003) | 2 lines

Must use walloc0() to create uploads, to ensure structure is zeroed correctly.

------------------------------------------------------------------------
r4083 | rmanfredi | 2003-10-12 07:13:54 -0400 (Sun, 12 Oct 2003) | 3 lines

Remember the time when we rewrite the properties to disk, to avoid spurious
warning about the file having changed whilst we were running.

------------------------------------------------------------------------
r4082 | rmanfredi | 2003-10-12 07:12:14 -0400 (Sun, 12 Oct 2003) | 3 lines

In the upload pane, prefix the Range column with a '*' when dealing with
a partial file.

------------------------------------------------------------------------
r4081 | rmanfredi | 2003-10-12 07:10:28 -0400 (Sun, 12 Oct 2003) | 5 lines

Removed assertions when re-reading fileinfo trailer: they could be harmful
when the trailer is inconsistent / corrupted.
Now remember explicitly when list_clone_shift() was called and cloned,
to avoid problems with the list changing underneath.

------------------------------------------------------------------------
r4080 | rmanfredi | 2003-10-12 07:07:16 -0400 (Sun, 12 Oct 2003) | 3 lines

Added file_info_readable_filename() to get a meaningful name for uploads
related to partial files, and not an URN if possible.

------------------------------------------------------------------------
r4079 | rmanfredi | 2003-10-11 19:21:21 -0400 (Sat, 11 Oct 2003) | 2 lines

Version 11/10/2003: adds server-side PFSP.

------------------------------------------------------------------------
r4078 | rmanfredi | 2003-10-11 19:19:36 -0400 (Sat, 11 Oct 2003) | 4 lines

Return a 416 to uploaders requesting an unavailable range, keeping the
connection alive to give them a chance to re-request the proper range
immediately without loosing the connection.

------------------------------------------------------------------------
r4077 | rmanfredi | 2003-10-11 19:18:20 -0400 (Sat, 11 Oct 2003) | 2 lines

New upload state GTA_UL_PFSP_WAITING.

------------------------------------------------------------------------
r4076 | rmanfredi | 2003-10-11 19:17:45 -0400 (Sat, 11 Oct 2003) | 3 lines

Remember in each upload whether the previous request was for an unavailable
range.

------------------------------------------------------------------------
r4075 | rmanfredi | 2003-10-11 19:16:45 -0400 (Sat, 11 Oct 2003) | 3 lines

Don't ignore files for which shared_file_by_sha1() returns something but
which are actually partial files.

------------------------------------------------------------------------
r4074 | rmanfredi | 2003-10-11 19:15:54 -0400 (Sat, 11 Oct 2003) | 2 lines

Raised HTTP reply size to 2.5K to give room to available ranges.

------------------------------------------------------------------------
r4073 | rmanfredi | 2003-10-11 19:15:11 -0400 (Sat, 11 Oct 2003) | 2 lines

Emit header continuations with leading "\t" instead of 4 spaces.

------------------------------------------------------------------------
r4072 | rmanfredi | 2003-10-11 19:14:39 -0400 (Sat, 11 Oct 2003) | 4 lines

New upload state GTA_UL_PFSP_WAITING entered when they request an
unavailable range and we give them one more chance to get a correct chunk
by retrying on the kept-alive connection.

------------------------------------------------------------------------
r4071 | rmanfredi | 2003-10-11 19:13:16 -0400 (Sat, 11 Oct 2003) | 5 lines

Adapted the "shared file" structure and the lookup routines to handle
partially downloaded files: a fileinfo can now contain a "shared file" and
the "shared file" is marked as being partial by referencing its associated
fileinfo.

------------------------------------------------------------------------
r4070 | rmanfredi | 2003-10-11 19:11:18 -0400 (Sat, 11 Oct 2003) | 3 lines

Tell the mesh to include ourselves in the alternate locations when
downloading a file for which we have data (PFSP).

------------------------------------------------------------------------
r4069 | rmanfredi | 2003-10-11 19:09:49 -0400 (Sat, 11 Oct 2003) | 3 lines

Add ourselves to the sent alternate locations when server-side PFSP is on
and we have some data for a partially downloaded file.

------------------------------------------------------------------------
r4068 | nonamer | 2003-10-11 11:27:43 -0400 (Sat, 11 Oct 2003) | 2 lines

Sync with bearshare

------------------------------------------------------------------------
r4067 | rmanfredi | 2003-10-09 15:17:03 -0400 (Thu, 09 Oct 2003) | 2 lines

Trace errno annomalies (weird errors that are remapped to EAGAIN).

------------------------------------------------------------------------
r4066 | rmanfredi | 2003-10-07 14:29:44 -0400 (Tue, 07 Oct 2003) | 4 lines

Don't call gtk_gnutella_exit() from signal handler, in case we were
interrupted in the middle of a malloc() call or similar: perform the
exit asynchronously.

------------------------------------------------------------------------
r4065 | rmanfredi | 2003-10-07 14:28:27 -0400 (Tue, 07 Oct 2003) | 2 lines

I've seen a write() fail with EINPROGRESS today.  Weird, but...

------------------------------------------------------------------------
r4064 | rmanfredi | 2003-10-06 17:48:45 -0400 (Mon, 06 Oct 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4063 | rmanfredi | 2003-10-06 17:44:48 -0400 (Mon, 06 Oct 2003) | 4 lines

Terminate connection when peermode changed during handshaking, using
a BYE message with code 504.  This race condition is rare enough to not
warrant recovery (fixes bug #799675).

------------------------------------------------------------------------
r4062 | rmanfredi | 2003-10-06 17:22:35 -0400 (Mon, 06 Oct 2003) | 2 lines

Removed more cruft from the 0.4 handshaking days.

------------------------------------------------------------------------
r4061 | rmanfredi | 2003-10-06 17:17:13 -0400 (Mon, 06 Oct 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r4060 | rmanfredi | 2003-10-06 17:16:20 -0400 (Mon, 06 Oct 2003) | 2 lines

Now uses GGEP "ALT" to provide known alternate locations in query hits.

------------------------------------------------------------------------
r4059 | nonamer | 2003-10-06 14:20:51 -0400 (Mon, 06 Oct 2003) | 2 lines

Changelog for yesterday ...

------------------------------------------------------------------------
r4058 | rmanfredi | 2003-10-06 10:57:35 -0400 (Mon, 06 Oct 2003) | 2 lines

Version of 06/10/2003.

------------------------------------------------------------------------
r4057 | rmanfredi | 2003-10-06 10:55:47 -0400 (Mon, 06 Oct 2003) | 4 lines

Added lazy property saving to the slow main timer.
Added atexit() hook to allow GTKG to cleanup properly when a library
calls exit() directly, especially when the connection with X is lost.

------------------------------------------------------------------------
r4056 | rmanfredi | 2003-10-06 10:54:00 -0400 (Mon, 06 Oct 2003) | 2 lines

Added routines to save properties if dirty.

------------------------------------------------------------------------
r4055 | rmanfredi | 2003-10-06 10:52:56 -0400 (Mon, 06 Oct 2003) | 2 lines

Cosmetic.

------------------------------------------------------------------------
r4054 | rmanfredi | 2003-10-06 10:52:36 -0400 (Mon, 06 Oct 2003) | 4 lines

The property system now remembers when a saved property is changed, and
supports a new prop_save_to_file_if_dirty() call that will perform a
save only if a saved property changed since last flush to disk.

------------------------------------------------------------------------
r4053 | eqom14 | 2003-10-06 03:06:38 -0400 (Mon, 06 Oct 2003) | 2 lines

Added a couple of little GWC checking scripts from Christian Biere.

------------------------------------------------------------------------
r4052 | eqom14 | 2003-10-06 02:43:31 -0400 (Mon, 06 Oct 2003) | 5 lines

Removed the most obvious bad GWC's - 4xx, NXDOMAIN, filtered or closed ports,
and others that obviously don't want hits from us, e.g. resolving to localhost.
Left GWC's on hosts that were down when tested but seemed to be some sort of
dyndns type situation - will test those again later.

------------------------------------------------------------------------
r4051 | rmanfredi | 2003-10-06 02:20:09 -0400 (Mon, 06 Oct 2003) | 2 lines

Created.

------------------------------------------------------------------------
r4048 | rmanfredi | 2003-10-05 17:48:05 -0400 (Sun, 05 Oct 2003) | 3 lines

Added hack to workaround broken gcc-3.x, which can lead to write() and
writev() returning -1 whilst errno is set to 0.

------------------------------------------------------------------------
r4047 | rmanfredi | 2003-10-05 15:01:08 -0400 (Sun, 05 Oct 2003) | 2 lines

Added timebomb: after 01/01/2004, always emit alt-locs with X-Alt.

------------------------------------------------------------------------
r4046 | rmanfredi | 2003-10-05 09:41:39 -0400 (Sun, 05 Oct 2003) | 2 lines

Version of 05/10/2003.

------------------------------------------------------------------------
r4045 | rmanfredi | 2003-10-05 09:35:38 -0400 (Sun, 05 Oct 2003) | 3 lines

Assume all GTKG versions newer than 05/10/2003 support X-Alt even if we
have never seen an X-Alt from them.

------------------------------------------------------------------------
r4044 | rmanfredi | 2003-10-05 09:34:14 -0400 (Sun, 05 Oct 2003) | 2 lines

Added version_newer() to check for GTKG versions being newer than a date.

------------------------------------------------------------------------
r4043 | rmanfredi | 2003-10-05 09:20:01 -0400 (Sun, 05 Oct 2003) | 4 lines

Fixed update of the ul_byte_count property (now a guint64).
Now passes vendor string to alt-loc collection routine so that we can
record who supports X-Alt and who doesn't.

------------------------------------------------------------------------
r4042 | rmanfredi | 2003-10-05 09:18:48 -0400 (Sun, 05 Oct 2003) | 2 lines

Don't hardwire 6346 as default port, use the new GTA_PORT definition.

------------------------------------------------------------------------
r4041 | rmanfredi | 2003-10-05 09:17:56 -0400 (Sun, 05 Oct 2003) | 2 lines

Skip leading whitespaces when parsing IP address.

------------------------------------------------------------------------
r4040 | rmanfredi | 2003-10-05 09:17:22 -0400 (Sun, 05 Oct 2003) | 3 lines

Now look at X-Alt when collecting alternate locations and record vendors known
to support that new compact form.

------------------------------------------------------------------------
r4039 | rmanfredi | 2003-10-05 09:16:13 -0400 (Sun, 05 Oct 2003) | 2 lines

Suppressed range header parsing warnings when not debugging.

------------------------------------------------------------------------
r4038 | rmanfredi | 2003-10-05 09:15:07 -0400 (Sun, 05 Oct 2003) | 5 lines

Added collecting of alternate locations on HTTP 416 replies.
Fixed update of the dl_byte_count property (now a guint64).
Now passes vendor string to alt-loc collection routine so that we can
record who supports X-Alt and who doesn't.

------------------------------------------------------------------------
r4037 | rmanfredi | 2003-10-05 09:11:51 -0400 (Sun, 05 Oct 2003) | 3 lines

Added parsing of new compact X-Alt header and generation of that new header
to servents who have shown support for it.

------------------------------------------------------------------------
r4036 | rmanfredi | 2003-10-05 09:10:06 -0400 (Sun, 05 Oct 2003) | 3 lines

Added default Gnutella port define.
Version of 05/10/2003.

------------------------------------------------------------------------
r4035 | nonamer | 2003-10-05 06:29:36 -0400 (Sun, 05 Oct 2003) | 3 lines

This fixes bug [ 790622 ] change "fuzzy filter" tooltip contents.
The word "thepurpose" is not "the purpose"

------------------------------------------------------------------------
r4034 | nonamer | 2003-10-05 06:13:15 -0400 (Sun, 05 Oct 2003) | 2 lines

Changelog for saturday and friday

------------------------------------------------------------------------
r4033 | nonamer | 2003-10-04 16:08:01 -0400 (Sat, 04 Oct 2003) | 3 lines

Transfer byte count is now a 64 bits counter.
Properties for a GUINT64 has been added.

------------------------------------------------------------------------
r4032 | nonamer | 2003-10-04 11:18:12 -0400 (Sat, 04 Oct 2003) | 2 lines

Use time_t for time values

------------------------------------------------------------------------
r4031 | nonamer | 2003-10-03 14:01:08 -0400 (Fri, 03 Oct 2003) | 3 lines

Don't assert when u->name is NULL (this can happen when the file is not
shared anymore).

------------------------------------------------------------------------
r4030 | nonamer | 2003-10-02 16:27:37 -0400 (Thu, 02 Oct 2003) | 2 lines

My changelog(je) for today

------------------------------------------------------------------------
r4029 | nonamer | 2003-10-02 16:25:09 -0400 (Thu, 02 Oct 2003) | 4 lines

Added some assertion to verify u->name != NULL. glibc doesn't seem to care
if we do a printf("%s", NULL) but other platforms might not like this and segfault.
These assertions should force same behaviour anywhere.

------------------------------------------------------------------------
r4028 | eqom14 | 2003-10-02 14:15:12 -0400 (Thu, 02 Oct 2003) | 2 lines

Added locale dir to the files section, other minor tweaks.

------------------------------------------------------------------------
r4027 | eqom14 | 2003-09-27 17:24:39 -0400 (Sat, 27 Sep 2003) | 2 lines

Added desktop icon - convert-ed from pixmaps/icon.xpm - yes it's antialiased, MrJoe

------------------------------------------------------------------------
r4026 | eqom14 | 2003-09-27 17:11:01 -0400 (Sat, 27 Sep 2003) | 2 lines

Remove .desktop file generation. Other cleanups, hopefully this will work on rh or mdk.

------------------------------------------------------------------------
r4025 | eqom14 | 2003-09-27 14:36:13 -0400 (Sat, 27 Sep 2003) | 2 lines

Added section about desktop entry keys.

------------------------------------------------------------------------
r4024 | eqom14 | 2003-09-27 14:06:22 -0400 (Sat, 27 Sep 2003) | 2 lines

Added http://www.freedesktop.org/standards/desktop-entry-spec/0.9.4-onehtml/ compliant desktop entry

------------------------------------------------------------------------
r4022 | rmanfredi | 2003-09-21 12:51:30 -0400 (Sun, 21 Sep 2003) | 2 lines

Remove file on resuming mismatch when told to do so.

------------------------------------------------------------------------
r4021 | nonamer | 2003-09-17 15:57:25 -0400 (Wed, 17 Sep 2003) | 2 lines

Dont compile verify-tigertree yet. It is not included (yet)

------------------------------------------------------------------------
r4020 | nonamer | 2003-09-16 16:04:48 -0400 (Tue, 16 Sep 2003) | 2 lines

Initial release of a generic hashtree implementation

------------------------------------------------------------------------
r4019 | nonamer | 2003-09-16 16:03:17 -0400 (Tue, 16 Sep 2003) | 2 lines

Required for hashtree.c/hashtree.h

------------------------------------------------------------------------
r4018 | rmanfredi | 2003-09-11 16:05:25 -0400 (Thu, 11 Sep 2003) | 2 lines

Version of 11/09/2003.

------------------------------------------------------------------------
r4017 | rmanfredi | 2003-09-11 16:04:24 -0400 (Thu, 11 Sep 2003) | 2 lines

[GTK1] Plugged in the checkbutton_dl_remove_file_on_mismatch widget.

------------------------------------------------------------------------
r4016 | rmanfredi | 2003-09-11 16:03:41 -0400 (Thu, 11 Sep 2003) | 3 lines

New "dl_remove_file_on_mismatch" property to request file removal when
there is a resuming mismatch for a download.

------------------------------------------------------------------------
r4015 | rmanfredi | 2003-09-11 16:01:27 -0400 (Thu, 11 Sep 2003) | 2 lines

[GTK1] Added a "remove file on mismatch" checkbutton in download pane.

------------------------------------------------------------------------
r4014 | rmanfredi | 2003-09-11 15:40:09 -0400 (Thu, 11 Sep 2003) | 4 lines

Fixed definition of QUERY_SPEED flags to match LimeWire's interpretation.
When they talk about bit #15, it's the bit on the wire, but since the
field is little-endiant, that's really bit #7 in the definition.

------------------------------------------------------------------------
r4013 | rmanfredi | 2003-09-11 15:32:54 -0400 (Thu, 11 Sep 2003) | 3 lines

No longer aborts downloads when we can't write data to disk: requeue them
with the "busy" retry delay.

------------------------------------------------------------------------
r4012 | rmanfredi | 2003-09-11 15:31:54 -0400 (Thu, 11 Sep 2003) | 2 lines

Typo fixes in comments.

------------------------------------------------------------------------
r4011 | rmanfredi | 2003-09-11 15:31:06 -0400 (Thu, 11 Sep 2003) | 2 lines

My farewell to gtk-gnutella...  Appointed Jeroen as new leader.

------------------------------------------------------------------------
r4010 | nonamer | 2003-09-08 14:07:16 -0400 (Mon, 08 Sep 2003) | 2 lines

Added Russel Francis to list of authors

------------------------------------------------------------------------
r4009 | nonamer | 2003-09-08 14:06:37 -0400 (Mon, 08 Sep 2003) | 2 lines

Integrated patch by Russel Francis to correctly sort the normalized statics

------------------------------------------------------------------------
r4008 | nonamer | 2003-09-07 07:55:19 -0400 (Sun, 07 Sep 2003) | 2 lines

This should prevent a lot of warnings when compiling on Darwin, perhaps on BSD to.

------------------------------------------------------------------------
r4003 | rmanfredi | 2003-08-26 17:22:21 -0400 (Tue, 26 Aug 2003) | 4 lines

Optimized file_info_update() to not call file_info_merge_adjacent()
systematically.  It now also behave more efficiently for the common
case where we append new data to an already "done" chunk.

------------------------------------------------------------------------
r4002 | rmanfredi | 2003-08-20 13:34:26 -0400 (Wed, 20 Aug 2003) | 2 lines

Had forgotten to fix IP endianess issues.

------------------------------------------------------------------------
r4001 | rmanfredi | 2003-08-19 18:17:56 -0400 (Tue, 19 Aug 2003) | 2 lines

Version of 19/08/2003.

------------------------------------------------------------------------
r4000 | rmanfredi | 2003-08-19 18:13:54 -0400 (Tue, 19 Aug 2003) | 2 lines

Modified for metalint.

------------------------------------------------------------------------
r3999 | rmanfredi | 2003-08-19 18:12:54 -0400 (Tue, 19 Aug 2003) | 2 lines

Fixed wrong Configure flags.

------------------------------------------------------------------------
r3998 | rmanfredi | 2003-08-19 18:07:46 -0400 (Tue, 19 Aug 2003) | 2 lines

Regenerated Configure.

------------------------------------------------------------------------
r3997 | rmanfredi | 2003-08-19 18:06:32 -0400 (Tue, 19 Aug 2003) | 2 lines

Changed jmake so that all install directories are made if they don't exist.

------------------------------------------------------------------------
r3996 | rmanfredi | 2003-08-19 18:02:10 -0400 (Tue, 19 Aug 2003) | 4 lines

When removing downloads from a peer that is unavailable, flag all those
downloads as unavailable as well.
Fixed endless "Request" -> "Sinking" -> "Request" cycle.

------------------------------------------------------------------------
r3995 | rmanfredi | 2003-08-19 18:00:13 -0400 (Tue, 19 Aug 2003) | 2 lines

Added extra argument to download_remove_all_from_peer().

------------------------------------------------------------------------
r3994 | rmanfredi | 2003-08-19 17:59:37 -0400 (Tue, 19 Aug 2003) | 2 lines

Flag aborted downloads with server unavailable as "Aborted (Server down)".

------------------------------------------------------------------------
r3993 | rmanfredi | 2003-08-19 17:58:32 -0400 (Tue, 19 Aug 2003) | 2 lines

Escape leading '.' in filenames as '_' to avoid downloading "hidden" files.

------------------------------------------------------------------------
r3991 | eqom14 | 2003-08-19 13:45:02 -0400 (Tue, 19 Aug 2003) | 2 lines

Added some info on updating the webpage.

------------------------------------------------------------------------
r3988 | rmanfredi | 2003-08-18 16:25:47 -0400 (Mon, 18 Aug 2003) | 2 lines

Integrated patch from Russell Francis.

------------------------------------------------------------------------
r3987 | rmanfredi | 2003-08-17 13:15:43 -0400 (Sun, 17 Aug 2003) | 2 lines

Changes to metaconfig made privatization of 4 units unnecessary.

------------------------------------------------------------------------
r3986 | nonamer | 2003-08-16 18:07:05 -0400 (Sat, 16 Aug 2003) | 2 lines

My changelog for 16/8/2003

------------------------------------------------------------------------
r3985 | rmanfredi | 2003-08-16 11:57:39 -0400 (Sat, 16 Aug 2003) | 2 lines

Version of 16/08/2003.

------------------------------------------------------------------------
r3984 | rmanfredi | 2003-08-16 11:55:56 -0400 (Sat, 16 Aug 2003) | 2 lines

Renamed "Clear completed" button as "Clear stopped".

------------------------------------------------------------------------
r3983 | rmanfredi | 2003-08-16 11:53:19 -0400 (Sat, 16 Aug 2003) | 2 lines

[GTK1] Added new download auto-clear option: unavailable downloads only.

------------------------------------------------------------------------
r3982 | rmanfredi | 2003-08-16 11:52:19 -0400 (Sat, 16 Aug 2003) | 3 lines

New property "autoclear_unavailable_downloads" to clear unavailble
downloads only.  TRUE by default.

------------------------------------------------------------------------
r3981 | rmanfredi | 2003-08-16 11:50:38 -0400 (Sat, 16 Aug 2003) | 3 lines

All downloads that timeout or for which the push route is lost are
stopped via download_unavailable().

------------------------------------------------------------------------
r3980 | rmanfredi | 2003-08-16 11:48:34 -0400 (Sat, 16 Aug 2003) | 2 lines

Renamed "Clear completed" button as "Clear stopped".

------------------------------------------------------------------------
r3979 | rmanfredi | 2003-08-16 11:47:27 -0400 (Sat, 16 Aug 2003) | 3 lines

[GTK1] Added new download auto-clear option: unavailable downloads only.
Renamed "Clear completed" button as "Clear stopped".

------------------------------------------------------------------------
r3978 | nonamer | 2003-08-16 06:31:56 -0400 (Sat, 16 Aug 2003) | 3 lines

Update all ip / port entries for a certain host when a servent sends its
new IP / Port using X-Node

------------------------------------------------------------------------
r3977 | rmanfredi | 2003-08-16 05:23:14 -0400 (Sat, 16 Aug 2003) | 2 lines

Added size of arrays in external declations from gnet_stats_gui_common.h.

------------------------------------------------------------------------
r3976 | rmanfredi | 2003-08-16 05:20:16 -0400 (Sat, 16 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3975 | rmanfredi | 2003-08-16 04:43:56 -0400 (Sat, 16 Aug 2003) | 3 lines

Updated metaconfig so that the generated config.h can compile properly
with the broken gcc 3.x pre-processor.

------------------------------------------------------------------------
r3974 | rmanfredi | 2003-08-15 19:05:25 -0400 (Fri, 15 Aug 2003) | 2 lines

Version of 16/08/2003.

------------------------------------------------------------------------
r3973 | rmanfredi | 2003-08-15 19:02:07 -0400 (Fri, 15 Aug 2003) | 4 lines

Factorized "Malformed SHA1 query" and "Query hit had bad SHA1" statistics
into "Malformed SHA1 message", since we keep track of message types.
Renamed "Malformed UFT-8 query" into "Message with malformed UTF-8".

------------------------------------------------------------------------
r3972 | rmanfredi | 2003-08-15 18:58:45 -0400 (Fri, 15 Aug 2003) | 2 lines

Added proper computation of INSTALL and INSTALLDIR.

------------------------------------------------------------------------
r3971 | rmanfredi | 2003-08-15 18:57:34 -0400 (Fri, 15 Aug 2003) | 2 lines

The NEWS file has disappeared.

------------------------------------------------------------------------
r3970 | rmanfredi | 2003-08-15 18:57:04 -0400 (Fri, 15 Aug 2003) | 2 lines

Added the resolv library.

------------------------------------------------------------------------
r3969 | rmanfredi | 2003-08-15 18:56:24 -0400 (Fri, 15 Aug 2003) | 2 lines

Added rules for installing the manual page.

------------------------------------------------------------------------
r3968 | rmanfredi | 2003-08-15 18:55:50 -0400 (Fri, 15 Aug 2003) | 2 lines

Count all fileinfo, and those with sources.

------------------------------------------------------------------------
r3967 | rmanfredi | 2003-08-15 18:54:26 -0400 (Fri, 15 Aug 2003) | 2 lines

New properties "fi_all_count" and "fi_with_source_count".

------------------------------------------------------------------------
r3966 | rmanfredi | 2003-08-15 18:53:13 -0400 (Fri, 15 Aug 2003) | 3 lines

[GTK1] Added display of the amount of fileinfo entries, and which have
sources in the Fileinfo pane.

------------------------------------------------------------------------
r3965 | rmanfredi | 2003-08-15 18:50:28 -0400 (Fri, 15 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3964 | rmanfredi | 2003-08-15 16:18:12 -0400 (Fri, 15 Aug 2003) | 2 lines

Moved the manual page from debian/ to src/.

------------------------------------------------------------------------
r3963 | rmanfredi | 2003-08-15 14:01:46 -0400 (Fri, 15 Aug 2003) | 2 lines

Moved common Gnet stats GUI code to gnet_stats_gui_common.c.

------------------------------------------------------------------------
r3962 | rmanfredi | 2003-08-15 11:08:37 -0400 (Fri, 15 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3961 | rmanfredi | 2003-08-14 18:40:58 -0400 (Thu, 14 Aug 2003) | 3 lines

Adapted the process now that we switched to metaconfig: no more need to
run autogen.sh and edit configure.in each time.

------------------------------------------------------------------------
r3958 | rmanfredi | 2003-08-14 17:22:55 -0400 (Thu, 14 Aug 2003) | 2 lines

Release 0.92.1 stable.

------------------------------------------------------------------------
r3957 | rmanfredi | 2003-08-14 17:09:15 -0400 (Thu, 14 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3956 | rmanfredi | 2003-08-14 17:07:23 -0400 (Thu, 14 Aug 2003) | 2 lines

Removed iconv: we don't use it for now.

------------------------------------------------------------------------
r3955 | rmanfredi | 2003-08-14 16:36:22 -0400 (Thu, 14 Aug 2003) | 2 lines

Added subdir "po".

------------------------------------------------------------------------
r3954 | rmanfredi | 2003-08-14 16:26:41 -0400 (Thu, 14 Aug 2003) | 2 lines

The metaconfig symbol for LOCALEDIR is LOCALE_EXP.

------------------------------------------------------------------------
r3953 | rmanfredi | 2003-08-14 16:25:36 -0400 (Thu, 14 Aug 2003) | 3 lines

Don't use "SOCKET", say "socket" to avoid metaconfig complaining about
obsolete symbol.

------------------------------------------------------------------------
r3952 | rmanfredi | 2003-08-14 16:24:37 -0400 (Thu, 14 Aug 2003) | 2 lines

Added the --from-code=UTF-8 option to XGETTEXT_OPTIONS.

------------------------------------------------------------------------
r3951 | rmanfredi | 2003-08-14 16:23:59 -0400 (Thu, 14 Aug 2003) | 2 lines

Removed the now needless -Dyacc="bison -y" settings.

------------------------------------------------------------------------
r3950 | rmanfredi | 2003-08-14 16:22:43 -0400 (Thu, 14 Aug 2003) | 2 lines

Removed needless "sh" dependency.

------------------------------------------------------------------------
r3949 | rmanfredi | 2003-08-14 16:22:10 -0400 (Thu, 14 Aug 2003) | 2 lines

Don't use "setvar" to set $official.

------------------------------------------------------------------------
r3948 | rmanfredi | 2003-08-14 16:21:30 -0400 (Thu, 14 Aug 2003) | 2 lines

Fixed spurious leading space in default.

------------------------------------------------------------------------
r3947 | rmanfredi | 2003-08-14 16:20:53 -0400 (Thu, 14 Aug 2003) | 2 lines

Added lib ioconv.

------------------------------------------------------------------------
r3946 | rmanfredi | 2003-08-14 16:20:00 -0400 (Thu, 14 Aug 2003) | 2 lines

Show NLS settings.

------------------------------------------------------------------------
r3945 | rmanfredi | 2003-08-14 16:19:22 -0400 (Thu, 14 Aug 2003) | 2 lines

Added new files.

------------------------------------------------------------------------
r3944 | rmanfredi | 2003-08-14 16:18:46 -0400 (Thu, 14 Aug 2003) | 2 lines

Regenerated Configure.

------------------------------------------------------------------------
r3943 | rmanfredi | 2003-08-14 16:17:56 -0400 (Thu, 14 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3942 | rmanfredi | 2003-08-13 02:26:25 -0400 (Wed, 13 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3941 | rmanfredi | 2003-08-13 02:13:41 -0400 (Wed, 13 Aug 2003) | 2 lines

Force bison as the yacc parser when building on Debian.

------------------------------------------------------------------------
r3940 | rmanfredi | 2003-08-13 02:11:55 -0400 (Wed, 13 Aug 2003) | 2 lines

Was missing src/upload_stats_cb.[ch].

------------------------------------------------------------------------
r3939 | rmanfredi | 2003-08-13 02:11:16 -0400 (Wed, 13 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3938 | rmanfredi | 2003-08-12 17:31:48 -0400 (Tue, 12 Aug 2003) | 2 lines

Added the Jmakefiles.

------------------------------------------------------------------------
r3937 | rmanfredi | 2003-08-12 17:28:30 -0400 (Tue, 12 Aug 2003) | 2 lines

Make sure the Debian build is "official" as far as Configure goes.

------------------------------------------------------------------------
r3936 | rmanfredi | 2003-08-12 17:11:46 -0400 (Tue, 12 Aug 2003) | 2 lines

Added MANIFEST to itself.

------------------------------------------------------------------------
r3935 | rmanfredi | 2003-08-12 17:05:45 -0400 (Tue, 12 Aug 2003) | 2 lines

Updated README now that we are meta-configured.  Removed INSTALL.

------------------------------------------------------------------------
r3934 | rmanfredi | 2003-08-12 14:13:49 -0400 (Tue, 12 Aug 2003) | 2 lines

Let Configure determine how to catenate tokens portably.

------------------------------------------------------------------------
r3933 | rmanfredi | 2003-08-12 14:12:41 -0400 (Tue, 12 Aug 2003) | 2 lines

Now shows gtk-gnutella's version.

------------------------------------------------------------------------
r3932 | rmanfredi | 2003-08-12 14:11:59 -0400 (Tue, 12 Aug 2003) | 2 lines

Regenerated Configure.

------------------------------------------------------------------------
r3931 | rmanfredi | 2003-08-12 14:00:11 -0400 (Tue, 12 Aug 2003) | 2 lines

Use Configure's STRINGIFY to do cpp stringification.

------------------------------------------------------------------------
r3930 | rmanfredi | 2003-08-12 13:59:35 -0400 (Tue, 12 Aug 2003) | 3 lines

The USE_SOURCE_DIR_AS_FALLBACK define is now gone.  Replaced by new
metaconfig symbol OFFICIAL_BUILD.

------------------------------------------------------------------------
r3929 | rmanfredi | 2003-08-12 13:58:16 -0400 (Tue, 12 Aug 2003) | 2 lines

Simpler way.

------------------------------------------------------------------------
r3928 | rmanfredi | 2003-08-12 13:57:56 -0400 (Tue, 12 Aug 2003) | 2 lines

Modified so that they cleanly pass metalint checks.

------------------------------------------------------------------------
r3927 | rmanfredi | 2003-08-12 13:56:13 -0400 (Tue, 12 Aug 2003) | 2 lines

Added gtk-gnutella.spec to the clean list.

------------------------------------------------------------------------
r3926 | rmanfredi | 2003-08-12 13:55:46 -0400 (Tue, 12 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3925 | rmanfredi | 2003-08-12 13:15:31 -0400 (Tue, 12 Aug 2003) | 2 lines

Two new files.

------------------------------------------------------------------------
r3924 | rmanfredi | 2003-08-12 13:13:33 -0400 (Tue, 12 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3923 | rmanfredi | 2003-08-12 13:12:44 -0400 (Tue, 12 Aug 2003) | 2 lines

Useless now that we no longer use autoconf.

------------------------------------------------------------------------
r3922 | rmanfredi | 2003-08-10 20:05:53 -0400 (Sun, 10 Aug 2003) | 2 lines

Spell out Limwire as LimeWire.

------------------------------------------------------------------------
r3921 | rmanfredi | 2003-08-10 19:34:20 -0400 (Sun, 10 Aug 2003) | 2 lines

Version of 10/08/2003.

------------------------------------------------------------------------
r3920 | rmanfredi | 2003-08-10 19:34:03 -0400 (Sun, 10 Aug 2003) | 2 lines

Suppressed compiler warning about possible unitialized variable.

------------------------------------------------------------------------
r3919 | rmanfredi | 2003-08-10 19:32:52 -0400 (Sun, 10 Aug 2003) | 2 lines

Added ChangeLog, removed src/getdate.c, which is generated.

------------------------------------------------------------------------
r3918 | rmanfredi | 2003-08-10 19:22:33 -0400 (Sun, 10 Aug 2003) | 2 lines

Added the doc/ directory and a few more private units.

------------------------------------------------------------------------
r3917 | rmanfredi | 2003-08-10 19:12:26 -0400 (Sun, 10 Aug 2003) | 3 lines

Integrated GUI update from Andrew Barnert, propagating changes
made to the GTK1 interface.

------------------------------------------------------------------------
r3916 | rmanfredi | 2003-08-10 19:07:04 -0400 (Sun, 10 Aug 2003) | 2 lines

Added install target for gtk-gnutella.

------------------------------------------------------------------------
r3915 | rmanfredi | 2003-08-10 19:06:24 -0400 (Sun, 10 Aug 2003) | 2 lines

Ported Debian packaging makefile to Configure.

------------------------------------------------------------------------
r3914 | rmanfredi | 2003-08-10 19:04:33 -0400 (Sun, 10 Aug 2003) | 2 lines

Added install rules for gwcache.boot and hostiles.txt.

------------------------------------------------------------------------
r3913 | rmanfredi | 2003-08-10 19:04:00 -0400 (Sun, 10 Aug 2003) | 2 lines

Added the pixmaps directory.

------------------------------------------------------------------------
r3912 | rmanfredi | 2003-08-10 19:03:03 -0400 (Sun, 10 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3911 | rmanfredi | 2003-08-10 19:01:44 -0400 (Sun, 10 Aug 2003) | 2 lines

Added Jmakefile in pixmaps.

------------------------------------------------------------------------
r3910 | rmanfredi | 2003-08-10 11:16:29 -0400 (Sun, 10 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3909 | rmanfredi | 2003-08-10 11:00:48 -0400 (Sun, 10 Aug 2003) | 2 lines

Added debian files, gwcache.boot and hostiles.txt.

------------------------------------------------------------------------
r3908 | rmanfredi | 2003-08-10 10:59:02 -0400 (Sun, 10 Aug 2003) | 2 lines

Don't compile unless USE_REMOTE_CTRL is defined.

------------------------------------------------------------------------
r3907 | rmanfredi | 2003-08-10 10:55:57 -0400 (Sun, 10 Aug 2003) | 2 lines

Regenerated Configure with new units.

------------------------------------------------------------------------
r3906 | rmanfredi | 2003-08-10 10:55:06 -0400 (Sun, 10 Aug 2003) | 2 lines

Added a ?Y:TOP line to force this question at the beginning of Configure.

------------------------------------------------------------------------
r3905 | rmanfredi | 2003-08-10 10:54:12 -0400 (Sun, 10 Aug 2003) | 4 lines

Renamed USE_REMOTE_SHELL as USE_REMOTE_CTRL, since "remote shell" was
a term that confused people.  It's a remote control interface, and
not a Unix shell.

------------------------------------------------------------------------
r3904 | rmanfredi | 2003-08-10 10:50:02 -0400 (Sun, 10 Aug 2003) | 2 lines

New units.

------------------------------------------------------------------------
r3903 | rmanfredi | 2003-08-10 10:46:44 -0400 (Sun, 10 Aug 2003) | 2 lines

Removed spurious space in ?C: line.

------------------------------------------------------------------------
r3902 | rmanfredi | 2003-08-10 10:45:23 -0400 (Sun, 10 Aug 2003) | 2 lines

Added the icuuc library (ICU).

------------------------------------------------------------------------
r3901 | rmanfredi | 2003-08-10 10:44:00 -0400 (Sun, 10 Aug 2003) | 2 lines

Now uses the USE_IP_TOS metaconfig symbol.

------------------------------------------------------------------------
r3900 | rmanfredi | 2003-08-10 06:57:16 -0400 (Sun, 10 Aug 2003) | 2 lines

Added a few other files that must be present.

------------------------------------------------------------------------
r3899 | rmanfredi | 2003-08-10 06:56:50 -0400 (Sun, 10 Aug 2003) | 2 lines

No longer used.

------------------------------------------------------------------------
r3898 | rmanfredi | 2003-08-10 06:55:02 -0400 (Sun, 10 Aug 2003) | 2 lines

This file was useless.

------------------------------------------------------------------------
r3897 | rmanfredi | 2003-08-10 06:53:27 -0400 (Sun, 10 Aug 2003) | 2 lines

Removed duplicate file.  We already have LICENSE.

------------------------------------------------------------------------
r3896 | rmanfredi | 2003-08-10 06:49:07 -0400 (Sun, 10 Aug 2003) | 2 lines

Regenerated with new customized units to overcome compilation problems.

------------------------------------------------------------------------
r3895 | rmanfredi | 2003-08-10 06:48:11 -0400 (Sun, 10 Aug 2003) | 2 lines

More customized units.

------------------------------------------------------------------------
r3894 | rmanfredi | 2003-08-10 05:40:53 -0400 (Sun, 10 Aug 2003) | 2 lines

Replacement inet_aton() was using same parameter and local variable name.

------------------------------------------------------------------------
r3893 | rmanfredi | 2003-08-10 05:23:50 -0400 (Sun, 10 Aug 2003) | 3 lines

Added customized ccflags.U to avoid supplying -DDEBUGGING when they say -g
and advertising for inexistent -DDEBUG in the message for ccflags.

------------------------------------------------------------------------
r3892 | rmanfredi | 2003-08-10 04:43:36 -0400 (Sun, 10 Aug 2003) | 2 lines

Regenerated Configure after addition of d_strlcpy.U.

------------------------------------------------------------------------
r3891 | rmanfredi | 2003-08-10 04:42:34 -0400 (Sun, 10 Aug 2003) | 2 lines

Was missing d_strlcpy.U.

------------------------------------------------------------------------
r3890 | rmanfredi | 2003-08-10 04:18:41 -0400 (Sun, 10 Aug 2003) | 2 lines

Removed accidental presence of fileinfo_gui.o!

------------------------------------------------------------------------
r3889 | rmanfredi | 2003-08-09 19:50:19 -0400 (Sat, 09 Aug 2003) | 2 lines

Useless file now.

------------------------------------------------------------------------
r3888 | rmanfredi | 2003-08-09 19:45:50 -0400 (Sat, 09 Aug 2003) | 2 lines

Removed: useless files now.

------------------------------------------------------------------------
r3887 | rmanfredi | 2003-08-09 19:44:25 -0400 (Sat, 09 Aug 2003) | 2 lines

Removed.

------------------------------------------------------------------------
r3886 | rmanfredi | 2003-08-09 19:42:35 -0400 (Sat, 09 Aug 2003) | 2 lines

Continuing to get rid of autoconf/automake files.

------------------------------------------------------------------------
r3885 | rmanfredi | 2003-08-09 19:37:38 -0400 (Sat, 09 Aug 2003) | 2 lines

Getting rid of autoconf-related files.

------------------------------------------------------------------------
r3884 | rmanfredi | 2003-08-09 19:33:16 -0400 (Sat, 09 Aug 2003) | 2 lines

Added proper ?LINT: line.

------------------------------------------------------------------------
r3883 | rmanfredi | 2003-08-09 19:32:49 -0400 (Sat, 09 Aug 2003) | 2 lines

Typo fix.

------------------------------------------------------------------------
r3882 | rmanfredi | 2003-08-09 19:24:37 -0400 (Sat, 09 Aug 2003) | 2 lines

Added a MANIFEST so that Configure can check it.

------------------------------------------------------------------------
r3881 | rmanfredi | 2003-08-09 19:18:35 -0400 (Sat, 09 Aug 2003) | 2 lines

Switched to metaconfig symbols.

------------------------------------------------------------------------
r3880 | rmanfredi | 2003-08-09 19:17:25 -0400 (Sat, 09 Aug 2003) | 2 lines

Regenerated Configure.

------------------------------------------------------------------------
r3879 | rmanfredi | 2003-08-09 19:13:44 -0400 (Sat, 09 Aug 2003) | 2 lines

Needs the sendfile library for checking the sendfile() routine.

------------------------------------------------------------------------
r3878 | rmanfredi | 2003-08-09 19:12:04 -0400 (Sat, 09 Aug 2003) | 2 lines

New units for gtk-gnutella.

------------------------------------------------------------------------
r3877 | rmanfredi | 2003-08-09 18:38:30 -0400 (Sat, 09 Aug 2003) | 2 lines

Added proper copyright, and removed expanded logs.

------------------------------------------------------------------------
r3876 | rmanfredi | 2003-08-09 18:20:31 -0400 (Sat, 09 Aug 2003) | 2 lines

Added metaconfig files.

------------------------------------------------------------------------
r3875 | rmanfredi | 2003-08-09 18:18:49 -0400 (Sat, 09 Aug 2003) | 2 lines

Added private metaconfig units.

------------------------------------------------------------------------
r3874 | rmanfredi | 2003-08-09 18:16:04 -0400 (Sat, 09 Aug 2003) | 2 lines

Switched to metaconfig.

------------------------------------------------------------------------
r3873 | rmanfredi | 2003-08-08 18:47:38 -0400 (Fri, 08 Aug 2003) | 2 lines

Version of 08/08/2003.

------------------------------------------------------------------------
r3872 | rmanfredi | 2003-08-08 18:45:56 -0400 (Fri, 08 Aug 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3871 | rmanfredi | 2003-08-08 18:45:09 -0400 (Fri, 08 Aug 2003) | 4 lines

Manually patched generated po/Makefile.in.in and Makefile.am because of
crappy auto* tools: it would not build on my machine, yet those files
were generated/updated!

------------------------------------------------------------------------
r3870 | rmanfredi | 2003-08-08 18:35:47 -0400 (Fri, 08 Aug 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3869 | rmanfredi | 2003-08-08 18:14:17 -0400 (Fri, 08 Aug 2003) | 2 lines

Updated by autogen.sh.

------------------------------------------------------------------------
r3868 | rmanfredi | 2003-08-08 18:13:45 -0400 (Fri, 08 Aug 2003) | 2 lines

Added 64.15.0.0/255.255.0.0.

------------------------------------------------------------------------
r3867 | rmanfredi | 2003-08-08 18:11:12 -0400 (Fri, 08 Aug 2003) | 2 lines

Applied update from Stephane Corbe and reran autogen.sh.

------------------------------------------------------------------------
r3866 | rmanfredi | 2003-08-08 17:41:10 -0400 (Fri, 08 Aug 2003) | 2 lines

Suddenly, an empty config.guess is no longer sufficient.

------------------------------------------------------------------------
r3865 | rmanfredi | 2003-08-08 16:31:09 -0400 (Fri, 08 Aug 2003) | 2 lines

Applied Emile le Vivre's update.

------------------------------------------------------------------------
r3864 | rmanfredi | 2003-08-08 16:30:35 -0400 (Fri, 08 Aug 2003) | 2 lines

[GTK2] Applied Emile le Vivre's update.

------------------------------------------------------------------------
r3863 | rmanfredi | 2003-08-08 16:22:14 -0400 (Fri, 08 Aug 2003) | 3 lines

[GTK1] Changed label to "Report an upload connection speed of" to avoid
confusion on asymetric lines.

------------------------------------------------------------------------
r3862 | rmanfredi | 2003-08-08 16:20:25 -0400 (Fri, 08 Aug 2003) | 2 lines

Changed tooltip for "connection_speed" to make it clear it's the upload speed.

------------------------------------------------------------------------
r3861 | rmanfredi | 2003-08-08 15:30:50 -0400 (Fri, 08 Aug 2003) | 2 lines

Perform log_init() before locale_init().

------------------------------------------------------------------------
r3860 | rmanfredi | 2003-08-08 15:26:17 -0400 (Fri, 08 Aug 2003) | 2 lines

Updated the French translations.

------------------------------------------------------------------------
r3859 | rmanfredi | 2003-08-08 15:23:53 -0400 (Fri, 08 Aug 2003) | 2 lines

Fixed config_comment() to have readable and nicely-formatted comments.

------------------------------------------------------------------------
r3858 | rmanfredi | 2003-08-08 14:13:09 -0400 (Fri, 08 Aug 2003) | 2 lines

Space fixing.

------------------------------------------------------------------------
r3857 | rmanfredi | 2003-08-08 14:12:31 -0400 (Fri, 08 Aug 2003) | 2 lines

Moved GUI callbacks for upload stats to new upload_stats_cb.c.

------------------------------------------------------------------------
r3856 | rmanfredi | 2003-08-08 13:48:57 -0400 (Fri, 08 Aug 2003) | 3 lines

Renamed "Abort all from host" as "Forget all from host" since we're
no longer paying attention to the "delete file on abort" setting here.

------------------------------------------------------------------------
r3855 | rmanfredi | 2003-08-08 13:47:42 -0400 (Fri, 08 Aug 2003) | 2 lines

Allow them to abort/forget a download when it is in "Sinking" mode.

------------------------------------------------------------------------
r3854 | rmanfredi | 2003-08-08 13:46:40 -0400 (Fri, 08 Aug 2003) | 3 lines

Was unduly removing downloaded files when removing all queued download from
a host on timeout when they had "delete file in abort" turned on.

------------------------------------------------------------------------
r3853 | rmanfredi | 2003-08-08 13:44:25 -0400 (Fri, 08 Aug 2003) | 2 lines

Forgot to call update_togglebutton() in the new update_monitor_unstable_ip().

------------------------------------------------------------------------
r3852 | rmanfredi | 2003-08-07 18:52:00 -0400 (Thu, 07 Aug 2003) | 3 lines

When they don't monitor unstable IPs, gray out monitoring of unstable
servents in the GUI.

------------------------------------------------------------------------
r3851 | rmanfredi | 2003-08-07 18:14:30 -0400 (Thu, 07 Aug 2003) | 4 lines

Added GUI configuration for "checkbutton_auto_feed_dmesh" and
"checkbutton_fuzzy_filter_dmesh" in the Config/Downloads pane.
Reworded text for the checkbox controlling "auto_download_identical".

------------------------------------------------------------------------
r3850 | rmanfredi | 2003-08-07 18:11:16 -0400 (Thu, 07 Aug 2003) | 2 lines

Removed duplicate shadowing variable.

------------------------------------------------------------------------
r3849 | nonamer | 2003-08-07 15:07:12 -0400 (Thu, 07 Aug 2003) | 2 lines

Removed old PARQ banning code.

------------------------------------------------------------------------
r3848 | rmanfredi | 2003-08-07 03:29:38 -0400 (Thu, 07 Aug 2003) | 3 lines

Integrated Emile le Vivre's patch adding support for the two
"node_monitor_unstable_ip" and "node_monitor_unstable_servents" properties.

------------------------------------------------------------------------
r3847 | rmanfredi | 2003-08-07 03:11:12 -0400 (Thu, 07 Aug 2003) | 2 lines

Ooops -- 172.31/12 does not exist as a defined private IP range!

------------------------------------------------------------------------
r3846 | rmanfredi | 2003-08-06 17:45:31 -0400 (Wed, 06 Aug 2003) | 2 lines

Code cleanup.

------------------------------------------------------------------------
r3845 | rmanfredi | 2003-08-06 17:42:28 -0400 (Wed, 06 Aug 2003) | 3 lines

Had forgotten to clear the "actively queued" on 2xx replies.
Asserted that a cloned download cannot be actively nor passively queued.

------------------------------------------------------------------------
r3844 | rmanfredi | 2003-08-06 16:53:55 -0400 (Wed, 06 Aug 2003) | 3 lines

Also consider 172.31/12 as a private IP range, and 255/8 as unroutable,
instead of just 255.255.255/24.

------------------------------------------------------------------------
r3843 | rmanfredi | 2003-08-06 16:53:32 -0400 (Wed, 06 Aug 2003) | 2 lines

String typo.

------------------------------------------------------------------------
r3842 | rmanfredi | 2003-08-06 16:35:13 -0400 (Wed, 06 Aug 2003) | 2 lines

Fixed typo marking a regular 503 download as passively queued!

------------------------------------------------------------------------
r3841 | rmanfredi | 2003-08-06 16:21:40 -0400 (Wed, 06 Aug 2003) | 2 lines

New combo to handle ignored files: 3 choices: display / mark / skip.

------------------------------------------------------------------------
r3840 | rmanfredi | 2003-08-06 16:12:18 -0400 (Wed, 06 Aug 2003) | 2 lines

New combo to handle ignored files: 3 choices: display / mark / skip.

------------------------------------------------------------------------
r3839 | rmanfredi | 2003-08-06 16:10:53 -0400 (Wed, 06 Aug 2003) | 2 lines

Can now prevent display of search results that will be ignored.

------------------------------------------------------------------------
r3838 | rmanfredi | 2003-08-06 16:09:35 -0400 (Wed, 06 Aug 2003) | 3 lines

Obsoleted "mark_ignored": only retained for GTK2, and replaced with
"search_handle_ignored_files" for GTK1.

------------------------------------------------------------------------
r3837 | rmanfredi | 2003-08-06 14:29:19 -0400 (Wed, 06 Aug 2003) | 3 lines

Reset the CP_F_SWAPPED_IP flag when we can't initiate the connection with
the swapped IP.

------------------------------------------------------------------------
r3836 | rmanfredi | 2003-08-06 14:27:59 -0400 (Wed, 06 Aug 2003) | 2 lines

Display actively and passively queued downloads.

------------------------------------------------------------------------
r3835 | rmanfredi | 2003-08-06 14:26:47 -0400 (Wed, 06 Aug 2003) | 2 lines

Count actively and passively queued downloads.

------------------------------------------------------------------------
r3834 | rmanfredi | 2003-08-05 17:43:37 -0400 (Tue, 05 Aug 2003) | 2 lines

Version of 05/08/2003.

------------------------------------------------------------------------
r3833 | rmanfredi | 2003-08-05 17:38:18 -0400 (Tue, 05 Aug 2003) | 4 lines

Plugged the necessary tieing update logic for the update of the three
new checkboxes (checkbutton_search_hide_downloaded, checkbutton_gnet_monitor_ip
and checkbutton_gnet_monitor_servents).

------------------------------------------------------------------------
r3832 | rmanfredi | 2003-08-05 17:36:45 -0400 (Tue, 05 Aug 2003) | 2 lines

Don't show them auto-downloaded files if  they don't want to see them.

------------------------------------------------------------------------
r3831 | rmanfredi | 2003-08-05 17:35:23 -0400 (Tue, 05 Aug 2003) | 3 lines

After having swapped the IP, reswap it back before reporting failure to the
download layer.

------------------------------------------------------------------------
r3830 | rmanfredi | 2003-08-05 17:33:12 -0400 (Tue, 05 Aug 2003) | 2 lines

New "search_hide_downloaded" GUI property.

------------------------------------------------------------------------
r3829 | rmanfredi | 2003-08-05 17:32:12 -0400 (Tue, 05 Aug 2003) | 2 lines

Default for "nodes_monitor_unstable_servents" is now FALSE.

------------------------------------------------------------------------
r3828 | rmanfredi | 2003-08-05 17:30:41 -0400 (Tue, 05 Aug 2003) | 2 lines

Changed record flags definition to highlight that they're 16-bit flags.

------------------------------------------------------------------------
r3827 | rmanfredi | 2003-08-05 17:27:40 -0400 (Tue, 05 Aug 2003) | 6 lines

Turned on gettext support in glade.
Added GUI settings for the "node_monitor_unstable_ip" and
"node_monitor_unstable_servents" properties in the Gnutella config pane.
New "Hide downloaded files" setting in Search to control display
of entries that were auto-downloaded already.

------------------------------------------------------------------------
r3826 | rmanfredi | 2003-08-05 02:59:41 -0400 (Tue, 05 Aug 2003) | 3 lines

When computing the remote node's uptime, use our clock offset to correct
the remote timestamp.

------------------------------------------------------------------------
r3825 | rmanfredi | 2003-08-05 02:50:21 -0400 (Tue, 05 Aug 2003) | 2 lines

Don't display negative uptimes, force 0.

------------------------------------------------------------------------
r3824 | rmanfredi | 2003-08-05 02:28:24 -0400 (Tue, 05 Aug 2003) | 3 lines

Forgot to customize the HTTP async layer when we're using the IP
swapping hack for client-side push proxy.

------------------------------------------------------------------------
r3823 | nonamer | 2003-08-05 01:09:48 -0400 (Tue, 05 Aug 2003) | 2 lines

Forgot to commit this one yesterday

------------------------------------------------------------------------
r3822 | rmanfredi | 2003-08-04 19:00:31 -0400 (Mon, 04 Aug 2003) | 2 lines

Removed use of costly runtime assertions in hash_list_t.

------------------------------------------------------------------------
r3821 | rmanfredi | 2003-08-04 18:45:02 -0400 (Mon, 04 Aug 2003) | 2 lines

Version of 04/08/2003.

------------------------------------------------------------------------
r3820 | rmanfredi | 2003-08-04 18:44:05 -0400 (Mon, 04 Aug 2003) | 2 lines

Use known clock skew to correct startup time to as close to GMT as possible.

------------------------------------------------------------------------
r3819 | rmanfredi | 2003-08-04 16:27:29 -0400 (Mon, 04 Aug 2003) | 2 lines

If we can't connect to a push-proxy, try swapping the IP as a temp hack.

------------------------------------------------------------------------
r3818 | rmanfredi | 2003-08-04 16:07:47 -0400 (Mon, 04 Aug 2003) | 2 lines

More endianness IP fixes.

------------------------------------------------------------------------
r3817 | rmanfredi | 2003-08-04 15:44:45 -0400 (Mon, 04 Aug 2003) | 3 lines

Made a distinction between "connection timeout" and "data timeout" for
asynchronous HTTP requests.

------------------------------------------------------------------------
r3816 | nonamer | 2003-08-04 01:27:24 -0400 (Mon, 04 Aug 2003) | 2 lines

Unstable servent / ip banning is now configurable

------------------------------------------------------------------------
r3815 | rmanfredi | 2003-08-03 16:56:03 -0400 (Sun, 03 Aug 2003) | 2 lines

Version of 03/08/2003.

------------------------------------------------------------------------
r3814 | rmanfredi | 2003-08-03 15:37:33 -0400 (Sun, 03 Aug 2003) | 2 lines

Fixed indentation.

------------------------------------------------------------------------
r3813 | rmanfredi | 2003-08-03 15:36:14 -0400 (Sun, 03 Aug 2003) | 3 lines

Editing pane for filtering "flags" rules had fixed hardwired values for
the "Mark only" and "Active" checkboxes instead of the current rule's ones.

------------------------------------------------------------------------
r3812 | rmanfredi | 2003-08-03 14:11:51 -0400 (Sun, 03 Aug 2003) | 2 lines

New address for Michael Gray.

------------------------------------------------------------------------
r3811 | rmanfredi | 2003-08-03 12:28:46 -0400 (Sun, 03 Aug 2003) | 2 lines

Now that 0.4 support is gone, there cannot be any "ponging" connection.

------------------------------------------------------------------------
r3810 | rmanfredi | 2003-08-03 12:26:32 -0400 (Sun, 03 Aug 2003) | 2 lines

Removed all the code that dealt with legacy 0.4 servents.

------------------------------------------------------------------------
r3809 | rmanfredi | 2003-08-03 11:47:20 -0400 (Sun, 03 Aug 2003) | 2 lines

Now pass file index to cproxy_create().

------------------------------------------------------------------------
r3808 | rmanfredi | 2003-08-03 11:46:04 -0400 (Sun, 03 Aug 2003) | 3 lines

Added support for the "file=" parameter in push-proxies.
Converted query parameter parsing in URL from handcoded to url_params_xxx().

------------------------------------------------------------------------
r3807 | rmanfredi | 2003-08-03 11:44:35 -0400 (Sun, 03 Aug 2003) | 2 lines

Added url_params_xxx() routines to get parameters in URL query strings.

------------------------------------------------------------------------
r3806 | rmanfredi | 2003-08-03 11:41:52 -0400 (Sun, 03 Aug 2003) | 2 lines

Fixed computation order for bw_max to avoid integer overflow.

------------------------------------------------------------------------
r3805 | rmanfredi | 2003-08-03 06:04:58 -0400 (Sun, 03 Aug 2003) | 2 lines

Now tells them exactly why they were denied a Gnet connection.

------------------------------------------------------------------------
r3804 | rmanfredi | 2003-08-03 06:04:05 -0400 (Sun, 03 Aug 2003) | 2 lines

Was not logging the "http://" prefix in URLs.

------------------------------------------------------------------------
r3803 | rmanfredi | 2003-08-03 06:03:08 -0400 (Sun, 03 Aug 2003) | 4 lines

Fixed query_make_word_vec(), changed by Christian to make the first
argument a const: it was not filling the vector at all when there was
only one word in the query.

------------------------------------------------------------------------
r3802 | rmanfredi | 2003-08-03 06:01:16 -0400 (Sun, 03 Aug 2003) | 6 lines

Reverted Christian's optimization of timestamp emitting on log messages:
now always emit the timestamp on messages, otherwise it is a major pain
when grepping through logs and trying to correlate events, or simply
whem montitoring a logfile via "tail -f log | grep pattern".
[Fixes bug #778183]

------------------------------------------------------------------------
r3801 | rmanfredi | 2003-08-03 04:09:17 -0400 (Sun, 03 Aug 2003) | 2 lines

Christian Biere left the project.

------------------------------------------------------------------------
r3800 | rmanfredi | 2003-08-03 04:08:28 -0400 (Sun, 03 Aug 2003) | 2 lines

Copyright date was updated.

------------------------------------------------------------------------
r3799 | rmanfredi | 2003-08-03 04:07:37 -0400 (Sun, 03 Aug 2003) | 2 lines

Fixed wrong copyright date.

------------------------------------------------------------------------
r3798 | rmanfredi | 2003-08-03 04:07:17 -0400 (Sun, 03 Aug 2003) | 3 lines

Forgot one more instance where writing of IP address was incorrect (the
IP in the GGEP "PUSH" extension).

------------------------------------------------------------------------
r3797 | rmanfredi | 2003-08-03 04:06:11 -0400 (Sun, 03 Aug 2003) | 3 lines

Added two new properties: "node_monitor_unstable_ip" and
"node_monitor_unstable_servents".

------------------------------------------------------------------------
r3796 | rmanfredi | 2003-08-03 04:03:54 -0400 (Sun, 03 Aug 2003) | 3 lines

Only compute the "escaped filename" for downloads once, not at every
saving of the download queue.

------------------------------------------------------------------------
r3795 | cbiere | 2003-08-02 18:31:59 -0400 (Sat, 02 Aug 2003) | 2 lines

Dismissed.

------------------------------------------------------------------------
r3794 | nonamer | 2003-08-02 18:19:47 -0400 (Sat, 02 Aug 2003) | 2 lines

Don't mark a node as bad when we did not connect to it at all.

------------------------------------------------------------------------
r3793 | nonamer | 2003-08-02 18:12:05 -0400 (Sat, 02 Aug 2003) | 3 lines

PARQ actually never expired a banned entry (unless you would run out
of memory). Now it does.

------------------------------------------------------------------------
r3792 | rmanfredi | 2003-08-02 13:42:22 -0400 (Sat, 02 Aug 2003) | 2 lines

Version of 02/08/2003.

------------------------------------------------------------------------
r3791 | rmanfredi | 2003-08-02 13:31:52 -0400 (Sat, 02 Aug 2003) | 3 lines

Rolled back invalid change wrt reading/writing of IP addresses from/to Gnet.
Was writing the IP addess in LIME/22v2 as a 16-bit quantity!

------------------------------------------------------------------------
r3790 | rmanfredi | 2003-08-02 13:30:12 -0400 (Sat, 02 Aug 2003) | 3 lines

Rolled back invalid change wrt reading/writing of IP addresses from/to Gnet.
Added magic number at the head of the cproxy structure.

------------------------------------------------------------------------
r3789 | rmanfredi | 2003-08-02 13:28:53 -0400 (Sat, 02 Aug 2003) | 2 lines

Rolled back invalid change wrt reading/writing of IP addresses from/to Gnet.

------------------------------------------------------------------------
r3788 | nonamer | 2003-08-02 09:51:55 -0400 (Sat, 02 Aug 2003) | 3 lines

Added some assertion to track a problem. These assertion are to make sure we
never insert NULL data in the routes linked list

------------------------------------------------------------------------
r3787 | nonamer | 2003-08-02 09:50:52 -0400 (Sat, 02 Aug 2003) | 3 lines

Increased debug level before we start reporting banned IP due to PARQ.
Banning should be silent anyway

------------------------------------------------------------------------
r3786 | nonamer | 2003-08-02 09:49:46 -0400 (Sat, 02 Aug 2003) | 2 lines

My Changelog for 1/8/03

------------------------------------------------------------------------
r3785 | nonamer | 2003-08-01 13:33:41 -0400 (Fri, 01 Aug 2003) | 3 lines

Forgot to cleanup when PARQ banned an ip. This will reduce the number of
warnings about filedescriptors a lot

------------------------------------------------------------------------
r3779 | cbiere | 2003-07-30 21:32:35 -0400 (Wed, 30 Jul 2003) | 2 lines

Corrected misspellings.

------------------------------------------------------------------------
r3778 | cbiere | 2003-07-30 21:20:36 -0400 (Wed, 30 Jul 2003) | 3 lines

Fixed detection of source files.
Removed ChangeLog from DISTFILES.

------------------------------------------------------------------------
r3777 | cbiere | 2003-07-30 21:17:20 -0400 (Wed, 30 Jul 2003) | 3 lines

Integrated patch for detecting ICU from Stephane Corbe.
Moved #define for G{,DK}_DISABLE_DEPRECATED to config.h.

------------------------------------------------------------------------
r3776 | nonamer | 2003-07-30 14:22:45 -0400 (Wed, 30 Jul 2003) | 2 lines

My changelog for 29/7/2003 and 30/7/2003

------------------------------------------------------------------------
r3775 | nonamer | 2003-07-30 14:20:30 -0400 (Wed, 30 Jul 2003) | 3 lines

PARQ will now agressively ban clients which do not honour the
Retry-After header.

------------------------------------------------------------------------
r3774 | nonamer | 2003-07-30 14:18:59 -0400 (Wed, 30 Jul 2003) | 2 lines

Forgot some debugging levels

------------------------------------------------------------------------
r3773 | cbiere | 2003-07-29 17:32:18 -0400 (Tue, 29 Jul 2003) | 2 lines

Fixed a typo in the last commit which caused new searches being stopped.

------------------------------------------------------------------------
r3772 | nonamer | 2003-07-29 14:04:58 -0400 (Tue, 29 Jul 2003) | 2 lines

Increased the banning logging up one debug level

------------------------------------------------------------------------
r3771 | cbiere | 2003-07-28 00:58:16 -0400 (Mon, 28 Jul 2003) | 4 lines

Added hash_list_has_previous().
Added magic for hash_list_t.
Moved the excessive assertions to hash_list_regression().

------------------------------------------------------------------------
r3770 | cbiere | 2003-07-28 00:55:57 -0400 (Mon, 28 Jul 2003) | 2 lines

Don't use g_int_hash() if not necessary. Use the int as-is.

------------------------------------------------------------------------
r3769 | cbiere | 2003-07-28 00:54:35 -0400 (Mon, 28 Jul 2003) | 3 lines

Fixed a problem with disabled searches. When a disabled search was loaded,
a hashtable is never initialized. See also comment.

------------------------------------------------------------------------
r3768 | cbiere | 2003-07-28 00:52:13 -0400 (Mon, 28 Jul 2003) | 3 lines

Don't use g_int_hash() if not necessary. Use the int as-is.
Cosmetic fixes.

------------------------------------------------------------------------
r3765 | cbiere | 2003-07-27 18:48:17 -0400 (Sun, 27 Jul 2003) | 2 lines

Mark as version of 28/07/2003.

------------------------------------------------------------------------
r3764 | cbiere | 2003-07-27 18:41:20 -0400 (Sun, 27 Jul 2003) | 2 lines

Don't use g_str_equal() if not necessary. It's equal to (0 == strcmp()).

------------------------------------------------------------------------
r3763 | cbiere | 2003-07-27 18:40:10 -0400 (Sun, 27 Jul 2003) | 2 lines

Use hash_list_t instead of GSList to store result_sets_t.

------------------------------------------------------------------------
r3762 | cbiere | 2003-07-27 18:33:20 -0400 (Sun, 27 Jul 2003) | 2 lines

Save column widths property on shutdown only.

------------------------------------------------------------------------
r3761 | cbiere | 2003-07-27 18:31:42 -0400 (Sun, 27 Jul 2003) | 2 lines

Minor clean-ups.

------------------------------------------------------------------------
r3760 | cbiere | 2003-07-27 18:28:18 -0400 (Sun, 27 Jul 2003) | 4 lines

Use hash_list_t instead of GSList to store result_sets_t.
search_gui_hash_func():
	Use GPOINTER_TO_UINT() instead of g_direct_hash(), it's the same anyway.

------------------------------------------------------------------------
r3759 | cbiere | 2003-07-27 18:19:10 -0400 (Sun, 27 Jul 2003) | 2 lines

Fixed reference counting for search results records.

------------------------------------------------------------------------
r3758 | cbiere | 2003-07-27 18:14:27 -0400 (Sun, 27 Jul 2003) | 2 lines

Fixed a warning; removed unused function.

------------------------------------------------------------------------
r3757 | cbiere | 2003-07-27 18:11:38 -0400 (Sun, 27 Jul 2003) | 2 lines

[GTK2] Added popup menu to configure columns and disconnect from nodes.

------------------------------------------------------------------------
r3756 | cbiere | 2003-07-27 18:03:04 -0400 (Sun, 27 Jul 2003) | 2 lines

Don't use g_str_equal() if not necessary. It's equal to (0 == strcmp()).

------------------------------------------------------------------------
r3755 | cbiere | 2003-07-27 17:45:25 -0400 (Sun, 27 Jul 2003) | 2 lines

gui_record_name_eq(): Don't show the result at a low debug level.

------------------------------------------------------------------------
r3754 | cbiere | 2003-07-27 17:43:39 -0400 (Sun, 27 Jul 2003) | 2 lines

Save the column widths property for the gnet stats pane on quit, only.

------------------------------------------------------------------------
r3753 | cbiere | 2003-07-27 17:29:04 -0400 (Sun, 27 Jul 2003) | 7 lines

Added `g_list_delete_link' which is in GLib 2.x but not 1.2.x.
Added new `container type' hash_list_t which combines a GList and a GHashTable;
	thus it's a list (means ordered) which is (almost) as fast as hash table.
	Many functions are still missing though. The code makes *excessive*
	use of expensive assertions, so it'll be rather slow, until it'll be
	considered being bug-free.

------------------------------------------------------------------------
r3752 | cbiere | 2003-07-27 17:20:09 -0400 (Sun, 27 Jul 2003) | 3 lines

Removed unused variables `filter_prop_name' and `filter_prop_state_names'.
Fixed memory leaks.

------------------------------------------------------------------------
r3751 | nonamer | 2003-07-27 14:34:20 -0400 (Sun, 27 Jul 2003) | 3 lines

I am not going to change anymore today. Still waiting for Cyclonus to raise
his bet

------------------------------------------------------------------------
r3750 | nonamer | 2003-07-27 13:40:58 -0400 (Sun, 27 Jul 2003) | 3 lines

Avoid gtkg to segfault when a download was cloned (download_clone) and was
connecting using push proxy

------------------------------------------------------------------------
r3748 | cbiere | 2003-07-26 12:47:31 -0400 (Sat, 26 Jul 2003) | 2 lines

Added check for langinfo.h.

------------------------------------------------------------------------
r3747 | cbiere | 2003-07-26 06:42:06 -0400 (Sat, 26 Jul 2003) | 4 lines

query_make_word_vec(): query_str is `const' now. So the function will
	not temporarily write to `query_str' any longer (was NOT a bug).
	Don't use a hashtable if `query_str' contains only one word.

------------------------------------------------------------------------
r3746 | cbiere | 2003-07-26 06:38:08 -0400 (Sat, 26 Jul 2003) | 2 lines

Added optional protection for atoms (#define PROTECT_ATOMS to activate it).

------------------------------------------------------------------------
r3745 | cbiere | 2003-07-26 06:15:12 -0400 (Sat, 26 Jul 2003) | 3 lines

Added tree_view_save_widths() for saving the column widths of a treeview as
	a property.

------------------------------------------------------------------------
r3744 | cbiere | 2003-07-26 05:45:31 -0400 (Sat, 26 Jul 2003) | 2 lines

Applied I18N_LEVEL_1 patch by Stephane Corbe.

------------------------------------------------------------------------
r3743 | cbiere | 2003-07-25 12:47:33 -0400 (Fri, 25 Jul 2003) | 2 lines

GTKG couldn't establish any outgoing gnet connection.

------------------------------------------------------------------------
r3742 | nonamer | 2003-07-25 12:27:19 -0400 (Fri, 25 Jul 2003) | 2 lines

My changelog entries from a few days back

------------------------------------------------------------------------
r3741 | cbiere | 2003-07-25 07:45:42 -0400 (Fri, 25 Jul 2003) | 2 lines

node_slow_timer(): Banned IP address were removed everytime.

------------------------------------------------------------------------
r3740 | cbiere | 2003-07-24 18:21:13 -0400 (Thu, 24 Jul 2003) | 2 lines

GCC 3.3 doesn't seem to like GLib's definition of G_MAXUINT64.

------------------------------------------------------------------------
r3739 | cbiere | 2003-07-24 08:37:47 -0400 (Thu, 24 Jul 2003) | 4 lines

Removed trailing `\r's.
Sainer #ifdefs.
There are probably alignment problems.

------------------------------------------------------------------------
r3738 | cbiere | 2003-07-24 08:28:07 -0400 (Thu, 24 Jul 2003) | 4 lines

Fixed some potential alignment problems.
The original code used `unsigned' 64-bit integers *not* `signed'.
Sainer #ifdefs.

------------------------------------------------------------------------
r3737 | cbiere | 2003-07-24 07:43:48 -0400 (Thu, 24 Jul 2003) | 2 lines

There were no elements added to the lists unstable_ips and unstable_servents.

------------------------------------------------------------------------
r3736 | cbiere | 2003-07-24 07:24:34 -0400 (Thu, 24 Jul 2003) | 3 lines

Removed unnecessary '\r' characters from warnings.
Fixed a typo which caused a weird truncated message.

------------------------------------------------------------------------
r3735 | cbiere | 2003-07-24 07:22:39 -0400 (Thu, 24 Jul 2003) | 4 lines

host_to_ip(): Function was broken by last commit.
	Added additional error checking.
gchar_to_ip_and_mask(): CIDR mask wasn't correct.

------------------------------------------------------------------------
r3734 | cbiere | 2003-07-24 07:18:48 -0400 (Thu, 24 Jul 2003) | 2 lines

Added an assertion to catch a bug [expecting backtraces].

------------------------------------------------------------------------
r3733 | cbiere | 2003-07-24 07:16:19 -0400 (Thu, 24 Jul 2003) | 2 lines

adns uses atoms too now. Thus, adns_close() must preceed atoms_close().

------------------------------------------------------------------------
r3732 | cbiere | 2003-07-24 07:14:48 -0400 (Thu, 24 Jul 2003) | 3 lines

Implemented a nicer cache.
Fixed a potential bug which could have caused wrong IPs (very unlikely).

------------------------------------------------------------------------
r3731 | cbiere | 2003-07-23 09:11:53 -0400 (Wed, 23 Jul 2003) | 2 lines

send_proxy_request() must not be called for leaves (Found and fixed by uriel).

------------------------------------------------------------------------
r3729 | nonamer | 2003-07-22 14:43:00 -0400 (Tue, 22 Jul 2003) | 5 lines

When using SOURCE dir as a fallback, they array used for file paths was
to small. The array sizes for USE_SOURCE_DIR_AS_FALLBACK and without
were swapped.
Thanks to: Thomas Schuerger

------------------------------------------------------------------------
r3727 | nonamer | 2003-07-22 14:33:18 -0400 (Tue, 22 Jul 2003) | 2 lines

Added copyright notice and RCSID tag

------------------------------------------------------------------------
r3725 | cbiere | 2003-07-22 04:45:13 -0400 (Tue, 22 Jul 2003) | 2 lines

Version of 22/07/2003.

------------------------------------------------------------------------
r3724 | cbiere | 2003-07-22 04:43:01 -0400 (Tue, 22 Jul 2003) | 7 lines

node_slow_timer(): Fixed memory leak; list was never freed.
Fixed some problems with the `bad node' code.
Replaced gnutella_hello with macro.
sl_nodes is static now but can be accessed through node_all_nodes().
Further code clean-ups e.g., `l' -> `sl'.
Note that IP addresses are in big endian byteorder at any time now.

------------------------------------------------------------------------
r3723 | cbiere | 2003-07-22 04:35:20 -0400 (Tue, 22 Jul 2003) | 4 lines

Added some const qualifiers.
Renamed GSLists from `l' to `sl'; use macros to traverse lists.
Note that IP addresses are in big endian byteorder at any time now.

------------------------------------------------------------------------
r3722 | cbiere | 2003-07-22 04:22:16 -0400 (Tue, 22 Jul 2003) | 2 lines

Note that IP addresses are in big endian byteorder at any time now.

------------------------------------------------------------------------
r3721 | cbiere | 2003-07-22 03:57:08 -0400 (Tue, 22 Jul 2003) | 2 lines

Replaced version_number with macro VERSION_NUMBER.

------------------------------------------------------------------------
r3720 | cbiere | 2003-07-22 03:55:29 -0400 (Tue, 22 Jul 2003) | 5 lines

[GTK2]:
	Search result records are now properly referenced and dereferenced;
		should fix a memory leak.
	Cosmetic fixes and clean-ups.

------------------------------------------------------------------------
r3719 | cbiere | 2003-07-22 03:51:53 -0400 (Tue, 22 Jul 2003) | 2 lines

Replaced version_number with macro VERSION_NUMBER.

------------------------------------------------------------------------
r3718 | cbiere | 2003-07-22 03:51:22 -0400 (Tue, 22 Jul 2003) | 2 lines

Fixed a long-standing memory leak.

------------------------------------------------------------------------
r3717 | cbiere | 2003-07-22 03:50:16 -0400 (Tue, 22 Jul 2003) | 2 lines

Cosmetic fixes only.

------------------------------------------------------------------------
r3716 | cbiere | 2003-07-22 03:48:33 -0400 (Tue, 22 Jul 2003) | 2 lines

Again, only 2 bytes of the push proxy IP address were written. Note that IP addresses are in big endian byteorder at any time now.

------------------------------------------------------------------------
r3715 | cbiere | 2003-07-22 03:46:46 -0400 (Tue, 22 Jul 2003) | 2 lines

Note that IP addresses are in big endian byteorder at any time now.

------------------------------------------------------------------------
r3714 | cbiere | 2003-07-22 03:45:05 -0400 (Tue, 22 Jul 2003) | 2 lines

Replaced const pointer with const char array.

------------------------------------------------------------------------
r3713 | cbiere | 2003-07-22 03:44:33 -0400 (Tue, 22 Jul 2003) | 2 lines

langinfo.h isn't necessary if libcharset.h is present - should fix compile problem on Darwin.

------------------------------------------------------------------------
r3712 | cbiere | 2003-07-22 03:42:42 -0400 (Tue, 22 Jul 2003) | 2 lines

Replaced version_number with macro VERSION_NUMBER.

------------------------------------------------------------------------
r3711 | cbiere | 2003-07-22 03:40:44 -0400 (Tue, 22 Jul 2003) | 4 lines

vmsg_send_proxy_ack(), handle_proxy_ack():
	Bugfix, only two bytes of the IP address were written/read.
	Note that IP addresses have big endian byteorder at any time, now.

------------------------------------------------------------------------
r3710 | cbiere | 2003-07-22 03:36:19 -0400 (Tue, 22 Jul 2003) | 2 lines

Replaced const pointer with const char array.

------------------------------------------------------------------------
r3709 | cbiere | 2003-07-22 03:34:54 -0400 (Tue, 22 Jul 2003) | 2 lines

Simplified gui_init_window_title().

------------------------------------------------------------------------
r3708 | cbiere | 2003-07-22 03:33:39 -0400 (Tue, 22 Jul 2003) | 3 lines

Applied log handler to all log levels.
Timestamps are only emitted once per minute; otherwise the delta is printed.

------------------------------------------------------------------------
r3707 | cbiere | 2003-07-22 03:29:45 -0400 (Tue, 22 Jul 2003) | 3 lines

Replaced static const char pointers with static const char arrays.
Removed unnecessary #include <sys/stat.h>.

------------------------------------------------------------------------
r3706 | cbiere | 2003-07-22 03:28:13 -0400 (Tue, 22 Jul 2003) | 3 lines

Replaced client_info with macro CLIENT_INFO.
gwc_get_urls(): Replaced a gm_snprintf() with g_strlcpy().

------------------------------------------------------------------------
r3705 | cbiere | 2003-07-22 03:26:11 -0400 (Tue, 22 Jul 2003) | 4 lines

Added const qualifiers for lists.
Use macros to traverse lists.
Prefixed resp. renamed lists with/to `sl' emphasizing they're single-linked.

------------------------------------------------------------------------
r3704 | cbiere | 2003-07-22 03:23:24 -0400 (Tue, 22 Jul 2003) | 2 lines

Added a const qualifier and replaced two gm_snprintf() with g_strlcpy().

------------------------------------------------------------------------
r3701 | guruz | 2003-07-21 06:25:31 -0400 (Mon, 21 Jul 2003) | 2 lines

Added giFT vendor code

------------------------------------------------------------------------
r3700 | cbiere | 2003-07-20 23:39:52 -0400 (Sun, 20 Jul 2003) | 2 lines

Don't compile in the source directory!

------------------------------------------------------------------------
r3699 | cbiere | 2003-07-20 18:50:20 -0400 (Sun, 20 Jul 2003) | 2 lines

The size column wasn't updated for active uploads.

------------------------------------------------------------------------
r3698 | nonamer | 2003-07-20 15:12:09 -0400 (Sun, 20 Jul 2003) | 4 lines

Only mark ultrapeers as bad when they are bad :).
Leaves aren't expected to have high uptimes, so don't punish them for not
having them

------------------------------------------------------------------------
r3696 | nonamer | 2003-07-20 13:10:26 -0400 (Sun, 20 Jul 2003) | 2 lines

Initial tiger tree import

------------------------------------------------------------------------
r3693 | nonamer | 2003-07-20 12:54:55 -0400 (Sun, 20 Jul 2003) | 2 lines

Includes changelog for 0.92.1c

------------------------------------------------------------------------
r3691 | nonamer | 2003-07-20 11:33:59 -0400 (Sun, 20 Jul 2003) | 2 lines

Code contained a little bit to much debugging printfs

------------------------------------------------------------------------
r3690 | nonamer | 2003-07-20 11:22:07 -0400 (Sun, 20 Jul 2003) | 5 lines

Don't connect to ultrapeers whoms IP is very unstable. If a certain client
version proved to be unstable, avoid connecting to that specific version too.
Current settings: We should be able to connect at least 2 hours to an
ultrapeer or we'll mark the IP as bad

------------------------------------------------------------------------
r3689 | nonamer | 2003-07-20 11:18:06 -0400 (Sun, 20 Jul 2003) | 2 lines

Back to development / unstable again

------------------------------------------------------------------------
r3685 | cbiere | 2003-07-20 02:50:44 -0400 (Sun, 20 Jul 2003) | 2 lines

Use UTF-8 instead of ISO-8859-1 for contributors list. Added contributors.

------------------------------------------------------------------------
r3684 | cbiere | 2003-07-20 02:44:05 -0400 (Sun, 20 Jul 2003) | 2 lines

locale_charset(): Fixed a stupid typo which prevented the codeset to be aliased.

------------------------------------------------------------------------
r3683 | cbiere | 2003-07-20 00:05:19 -0400 (Sun, 20 Jul 2003) | 2 lines

Fixed the purge bug with the help of cascardo (#757276).

------------------------------------------------------------------------
r3682 | cbiere | 2003-07-19 21:12:37 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r3681 | cbiere | 2003-07-19 21:09:35 -0400 (Sat, 19 Jul 2003) | 2 lines

Build for 0.92.1 c - Candidate.

------------------------------------------------------------------------
r3680 | cbiere | 2003-07-19 21:06:47 -0400 (Sat, 19 Jul 2003) | 2 lines

Re-generated.

------------------------------------------------------------------------
r3679 | cbiere | 2003-07-19 21:05:05 -0400 (Sat, 19 Jul 2003) | 2 lines

Added static const qualifier to "one" as it is never changed.

------------------------------------------------------------------------
r3678 | cbiere | 2003-07-19 21:04:09 -0400 (Sat, 19 Jul 2003) | 2 lines

Added due to usage by auto* tools.

------------------------------------------------------------------------
r3677 | cbiere | 2003-07-19 21:02:18 -0400 (Sat, 19 Jul 2003) | 2 lines

Moved call to nl_langinfo() into locale_charset() to have the same prototype as the GNU version.

------------------------------------------------------------------------
r3676 | cbiere | 2003-07-19 20:14:52 -0400 (Sat, 19 Jul 2003) | 2 lines

Removed accidental double-check for bind_textdomain_codeset.

------------------------------------------------------------------------
r3675 | nonamer | 2003-07-19 20:05:14 -0400 (Sat, 19 Jul 2003) | 2 lines

Compile!

------------------------------------------------------------------------
r3674 | cbiere | 2003-07-19 20:02:50 -0400 (Sat, 19 Jul 2003) | 2 lines

Forgot the #else part

------------------------------------------------------------------------
r3673 | nonamer | 2003-07-19 19:10:25 -0400 (Sat, 19 Jul 2003) | 2 lines

Re-ran autogen.sh for 0.92.1 candidate release

------------------------------------------------------------------------
r3672 | cbiere | 2003-07-19 19:10:22 -0400 (Sat, 19 Jul 2003) | 2 lines

Removed failing caches.

------------------------------------------------------------------------
r3671 | nonamer | 2003-07-19 18:56:30 -0400 (Sat, 19 Jul 2003) | 2 lines

Build for 0.92.1 c - Candidate

------------------------------------------------------------------------
r3670 | rmanfredi | 2003-07-19 18:17:06 -0400 (Sat, 19 Jul 2003) | 2 lines

Version of 19/07/2003.

------------------------------------------------------------------------
r3669 | rmanfredi | 2003-07-19 18:14:03 -0400 (Sat, 19 Jul 2003) | 3 lines

Now always send the GGEP "GTKGV1" in query hits, regardless of query sender.
Added sending of GGEP "PUSH" in query hits to list our push proxies.

------------------------------------------------------------------------
r3668 | rmanfredi | 2003-07-19 18:12:14 -0400 (Sat, 19 Jul 2003) | 3 lines

Fixed broken validate_vendor().
Forgot to free some lists.

------------------------------------------------------------------------
r3667 | rmanfredi | 2003-07-19 18:11:22 -0400 (Sat, 19 Jul 2003) | 2 lines

Added node_push_proxies().

------------------------------------------------------------------------
r3666 | rmanfredi | 2003-07-19 18:09:34 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed name typo: node_become_... instead of node_became_firewalled().

------------------------------------------------------------------------
r3665 | rmanfredi | 2003-07-19 18:08:59 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed typo in declaration: ggep_mark_last() instead of ggep_ext_mark_last().

------------------------------------------------------------------------
r3664 | rmanfredi | 2003-07-19 18:07:15 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r3663 | rmanfredi | 2003-07-19 18:07:02 -0400 (Sat, 19 Jul 2003) | 3 lines

Say "Push sent via..." and not "Sent push via..." to look more like the
traditional "Push sent" message.

------------------------------------------------------------------------
r3662 | cbiere | 2003-07-19 17:40:35 -0400 (Sat, 19 Jul 2003) | 2 lines

shell_timer(): to_remove was never freed.

------------------------------------------------------------------------
r3661 | cbiere | 2003-07-19 17:01:47 -0400 (Sat, 19 Jul 2003) | 2 lines

Include nodes.h for prototype of node_become_firewalled().

------------------------------------------------------------------------
r3660 | cbiere | 2003-07-19 17:00:03 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed prototype for pproxy_close().

------------------------------------------------------------------------
r3659 | cbiere | 2003-07-19 16:34:03 -0400 (Sat, 19 Jul 2003) | 2 lines

VA_COPY(): First check for presence of the ISO C99 equivalent va_copy().

------------------------------------------------------------------------
r3658 | rmanfredi | 2003-07-19 15:49:45 -0400 (Sat, 19 Jul 2003) | 2 lines

Disabled broken equlity fix in qrp_step_compute(), pending later fix.

------------------------------------------------------------------------
r3657 | rmanfredi | 2003-07-19 15:47:14 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed freeing sequence for cproxy.

------------------------------------------------------------------------
r3656 | rmanfredi | 2003-07-19 14:40:52 -0400 (Sat, 19 Jul 2003) | 3 lines

Added new 'p' or 'P' node flag to indicate either our push-proxy or a
node for which we are push-proxy, respectively.

------------------------------------------------------------------------
r3655 | rmanfredi | 2003-07-19 14:38:00 -0400 (Sat, 19 Jul 2003) | 6 lines

Made "data_ind" callback optional in HTTP aync.
Added message argument to the "header_ind" callback in HTTP async.
Added new optional callback to monitor HTTP async state changes.
Disable redirections by default, unless specified otherwise.
Added ip and port to http_async_get(), for when we know them.

------------------------------------------------------------------------
r3654 | rmanfredi | 2003-07-19 14:34:51 -0400 (Sat, 19 Jul 2003) | 3 lines

Added node_became_firewalled(), called whenever we are becoming firewalled
to send push-proxy requests to non-leaf servents that we are connected to.

------------------------------------------------------------------------
r3653 | rmanfredi | 2003-07-19 14:32:51 -0400 (Sat, 19 Jul 2003) | 2 lines

Removed unneeded SOCK_TYPE_CPROXY type.

------------------------------------------------------------------------
r3652 | rmanfredi | 2003-07-19 14:31:33 -0400 (Sat, 19 Jul 2003) | 2 lines

Added client-side push proxy support, with GUI feedback.

------------------------------------------------------------------------
r3651 | cbiere | 2003-07-19 12:49:04 -0400 (Sat, 19 Jul 2003) | 2 lines

Replaced routing_log() by a VA_ARG macro to save performance at lower debug levels.

------------------------------------------------------------------------
r3650 | nonamer | 2003-07-19 11:21:46 -0400 (Sat, 19 Jul 2003) | 2 lines

Removed a redundant check

------------------------------------------------------------------------
r3649 | rmanfredi | 2003-07-19 11:07:53 -0400 (Sat, 19 Jul 2003) | 2 lines

Replace all control characters in filename by '_'.

------------------------------------------------------------------------
r3648 | nonamer | 2003-07-19 10:04:15 -0400 (Sat, 19 Jul 2003) | 4 lines

* Added an extra assert to verify there is only 1 active queued upload per IP.
* Only actively queue an upload when it is at a position which has a change
  to get an upload slot reasonable fast, or if the upload is a PUSH request

------------------------------------------------------------------------
r3647 | rmanfredi | 2003-07-19 06:23:44 -0400 (Sat, 19 Jul 2003) | 3 lines

Allow sending of push-proxy ACK (LIME/22v2) messages now that the
server-side works and we can act as a push-proxy.

------------------------------------------------------------------------
r3646 | rmanfredi | 2003-07-19 06:21:51 -0400 (Sat, 19 Jul 2003) | 3 lines

Added upload_send_giv() to be able to send a GIV string directly.
Send them our push-proxies when we're firewalled.

------------------------------------------------------------------------
r3645 | rmanfredi | 2003-07-19 06:20:35 -0400 (Sat, 19 Jul 2003) | 3 lines

Added two new socket types: SOCK_TYPE_PPROXY and SOCK_TYPE_CPROXY.
Redirect incoming HTTP requests to /gnutella or /gnet to push-proxy.

------------------------------------------------------------------------
r3644 | rmanfredi | 2003-07-19 06:18:50 -0400 (Sat, 19 Jul 2003) | 2 lines

Added route_proxy_find() so that we can resolve push-proxy HTTP requests.

------------------------------------------------------------------------
r3643 | rmanfredi | 2003-07-19 06:18:13 -0400 (Sat, 19 Jul 2003) | 4 lines

Added node_http_proxies_add() so we can send them our known push-proxies
when we are firewalled.
Added paranoid sanity checks on reception of push-proxy request messages.

------------------------------------------------------------------------
r3642 | rmanfredi | 2003-07-19 06:16:19 -0400 (Sat, 19 Jul 2003) | 4 lines

Fixed hex2dec() to report -1 on invalid hex char.
hex_to_guid() now returns boolean indicating proper decoding.
New guid_base32_str() and base32_to_guid() routines.

------------------------------------------------------------------------
r3641 | rmanfredi | 2003-07-19 06:14:26 -0400 (Sat, 19 Jul 2003) | 2 lines

Added calls to pproxy_close() and pproxy_timer().

------------------------------------------------------------------------
r3640 | rmanfredi | 2003-07-19 06:13:56 -0400 (Sat, 19 Jul 2003) | 4 lines

Added new generic http_buffer_t management for spill-out management.
Allow http async users to customize the building of the HTTP request.
Now handles partial sending of the HTTP request for async http.

------------------------------------------------------------------------
r3639 | rmanfredi | 2003-07-19 06:11:48 -0400 (Sat, 19 Jul 2003) | 2 lines

Factorized dl_request handling code into http.c, as http_buffer_t.

------------------------------------------------------------------------
r3638 | rmanfredi | 2003-07-19 06:10:48 -0400 (Sat, 19 Jul 2003) | 5 lines

Factorized dl_request handling code into http.c, as http_buffer_t.
Fixed pushed download selection on GIV reception to also consider running
downloads expecting a GIV when no exact fileindex is found.
Check for X-Push-Proxies lines in HTTP replies from firewalled hosts.

------------------------------------------------------------------------
r3637 | rmanfredi | 2003-07-19 06:07:47 -0400 (Sat, 19 Jul 2003) | 2 lines

Fixed a typo.

------------------------------------------------------------------------
r3636 | rmanfredi | 2003-07-19 06:07:11 -0400 (Sat, 19 Jul 2003) | 3 lines

New routine base32_encode_str_into().
Added optional padding emission to base32_encode().

------------------------------------------------------------------------
r3635 | rmanfredi | 2003-07-19 06:06:00 -0400 (Sat, 19 Jul 2003) | 2 lines

Added server-side push-proxy support.

------------------------------------------------------------------------
r3633 | nonamer | 2003-07-18 13:51:14 -0400 (Fri, 18 Jul 2003) | 2 lines

Destroy the used hashtables on parq_close

------------------------------------------------------------------------
r3632 | rmanfredi | 2003-07-18 10:08:00 -0400 (Fri, 18 Jul 2003) | 2 lines

Encoding of IP addresses in ALT is now big-endian.

------------------------------------------------------------------------
r3631 | rmanfredi | 2003-07-18 10:04:36 -0400 (Fri, 18 Jul 2003) | 2 lines

BearShare finally decided to fix the broken encoding of IP: now big-endian.

------------------------------------------------------------------------
r3630 | cbiere | 2003-07-18 08:16:29 -0400 (Fri, 18 Jul 2003) | 2 lines

Re-corrected #includes for NLS support.

------------------------------------------------------------------------
r3629 | cbiere | 2003-07-18 08:14:03 -0400 (Fri, 18 Jul 2003) | 2 lines

Corrected: These files are from gettext-0.11.2.

------------------------------------------------------------------------
r3628 | rmanfredi | 2003-07-18 08:08:46 -0400 (Fri, 18 Jul 2003) | 2 lines

Removed mention of Olrick's original message.

------------------------------------------------------------------------
r3627 | cbiere | 2003-07-18 07:36:15 -0400 (Fri, 18 Jul 2003) | 4 lines

Included code to find the correct alias for a charset.
Reordered some #ifdefs for GTK1.
locale_to_utf8(): Check whether the string is already UTF-8 encoded.

------------------------------------------------------------------------
r3626 | rmanfredi | 2003-07-18 04:46:18 -0400 (Fri, 18 Jul 2003) | 2 lines

Added state indication in HTTP async requests, for external monitoring.

------------------------------------------------------------------------
r3625 | rmanfredi | 2003-07-18 04:42:00 -0400 (Fri, 18 Jul 2003) | 2 lines

Rewrote formatted_connection_pongs() to use generic header_fmt_xxx().

------------------------------------------------------------------------
r3624 | rmanfredi | 2003-07-18 04:40:39 -0400 (Fri, 18 Jul 2003) | 2 lines

Added generic header formatting routines: header_fmt_xxx().

------------------------------------------------------------------------
r3623 | rmanfredi | 2003-07-18 04:39:09 -0400 (Fri, 18 Jul 2003) | 2 lines

Removed the "[No Push]" indication in download status: was misleading.

------------------------------------------------------------------------
r3622 | rmanfredi | 2003-07-18 04:33:07 -0400 (Fri, 18 Jul 2003) | 2 lines

Added step #0: don't forget to update local files before releasing!

------------------------------------------------------------------------
r3621 | eqom14 | 2003-07-18 03:05:51 -0400 (Fri, 18 Jul 2003) | 2 lines

Updated

------------------------------------------------------------------------
r3620 | cbiere | 2003-07-18 01:53:22 -0400 (Fri, 18 Jul 2003) | 2 lines

[GTK2] Don't show the deprecated speed information in the result details.

------------------------------------------------------------------------
r3619 | rmanfredi | 2003-07-18 01:48:13 -0400 (Fri, 18 Jul 2003) | 2 lines

Always set QUERY_SPEED_NO_XML since GTKG does not parse XML in query hits.

------------------------------------------------------------------------
r3618 | rmanfredi | 2003-07-18 01:47:16 -0400 (Fri, 18 Jul 2003) | 2 lines

Don't call free_proxies() when there is no known push-proxy on server.

------------------------------------------------------------------------
r3617 | cbiere | 2003-07-18 01:33:42 -0400 (Fri, 18 Jul 2003) | 2 lines

Added checks for bind_textdomain_codeset and libcharset.h [Stephane, #771314].

------------------------------------------------------------------------
r3616 | cbiere | 2003-07-18 01:20:51 -0400 (Fri, 18 Jul 2003) | 8 lines

Fixed some unnessary `extern's.
Minor style fixes and code clean-ups.
Bugfix: If non-xml searches existed, new searches couldn't be saved.
search_gui_hash_key_compare(), search_gui_hash_func():	Prefer sha1 instead
	of filename. This means identical results (same ip,port,guid,size) are
	considered dups if one result has a sha1 but the other doesn't. Servents
	which send different results for the same sha1 are broken anyway.

------------------------------------------------------------------------
r3615 | cbiere | 2003-07-18 01:07:45 -0400 (Fri, 18 Jul 2003) | 2 lines

Use file_path_set() because of const pedantism.

------------------------------------------------------------------------
r3614 | cbiere | 2003-07-18 01:05:14 -0400 (Fri, 18 Jul 2003) | 3 lines

{READ,WRITE}_GUINT16_BE: Use ntohs() and htons() instead of the crappy GTK+ 1.2
	macros.

------------------------------------------------------------------------
r3613 | cbiere | 2003-07-18 01:03:43 -0400 (Fri, 18 Jul 2003) | 2 lines

Typedefed structures to reduce `struct' noise.

------------------------------------------------------------------------
r3612 | cbiere | 2003-07-18 01:01:11 -0400 (Fri, 18 Jul 2003) | 2 lines

Added checks for bind_textdomain_codeset and libcharset.h [Stephane, #771314].

------------------------------------------------------------------------
r3611 | rmanfredi | 2003-07-17 19:30:49 -0400 (Thu, 17 Jul 2003) | 3 lines

The push proxy ACK message was incorrectly generated: was not advancing
in payload after writing the IP.

------------------------------------------------------------------------
r3610 | rmanfredi | 2003-07-17 19:30:08 -0400 (Thu, 17 Jul 2003) | 2 lines

Deny push-proxyfication if we're firewalled, or if our IP is invalid.

------------------------------------------------------------------------
r3609 | rmanfredi | 2003-07-17 19:02:13 -0400 (Thu, 17 Jul 2003) | 3 lines

Heavy callback signature and message building refactoring.
Can now send and receive LIME/21v2 and LIME/22v2.

------------------------------------------------------------------------
r3608 | rmanfredi | 2003-07-17 19:00:28 -0400 (Thu, 17 Jul 2003) | 3 lines

Added logic for processing LIME/21v2 and LIME22v2 messages (push proxy
request and ack, respectively).

------------------------------------------------------------------------
r3607 | rmanfredi | 2003-07-17 18:58:49 -0400 (Thu, 17 Jul 2003) | 2 lines

Added comment to stress-out that routing_close() MUST follow node_close().

------------------------------------------------------------------------
r3606 | rmanfredi | 2003-07-17 18:58:10 -0400 (Thu, 17 Jul 2003) | 2 lines

Struct gnutella_host is now defined in gnet.h.

------------------------------------------------------------------------
r3605 | rmanfredi | 2003-07-17 18:57:45 -0400 (Thu, 17 Jul 2003) | 3 lines

Moved definition of structs gnutella_host and gnet_host_vec there, since
they are also used by the GUI.

------------------------------------------------------------------------
r3604 | rmanfredi | 2003-07-17 18:56:33 -0400 (Thu, 17 Jul 2003) | 2 lines

Finally, the IP is stored in big-endian within GGEP "PUSH".

------------------------------------------------------------------------
r3603 | rmanfredi | 2003-07-17 18:54:46 -0400 (Thu, 17 Jul 2003) | 7 lines

Moved search_gui_got_results() to search_gui_common.c.
GUI now uses gnet_host_vec_t instead of host_vec_t: no need to make a
particular data structure.
Result set now stores push-proxies given in query hit.
Changed signature of download_new() and download_auto_new() to include
the known push proxies.

------------------------------------------------------------------------
r3602 | rmanfredi | 2003-07-17 18:51:06 -0400 (Thu, 17 Jul 2003) | 3 lines

Changed signature of download_new() and download_auto_new() to include
the known push proxies.

------------------------------------------------------------------------
r3601 | nonamer | 2003-07-17 16:10:53 -0400 (Thu, 17 Jul 2003) | 2 lines

A little bit to late

------------------------------------------------------------------------
r3600 | nonamer | 2003-07-17 13:11:18 -0400 (Thu, 17 Jul 2003) | 2 lines

Made search_gui_common.c compile again when XML was disabled

------------------------------------------------------------------------
r3599 | rmanfredi | 2003-07-17 11:20:12 -0400 (Thu, 17 Jul 2003) | 4 lines

Added knowledge about the GGEP "PUSH" extension for push-proxy, and created
new READ_GUINT16_BE() and WRITE_GUINT16_BE() supporting macros, required
by "PUSH".

------------------------------------------------------------------------
r3598 | rmanfredi | 2003-07-17 11:08:44 -0400 (Thu, 17 Jul 2003) | 2 lines

Renamed alt_locs_t into host_vec_t and gnet_alt_locs_t into gnet_host_vec_t.

------------------------------------------------------------------------
r3597 | rmanfredi | 2003-07-17 10:29:52 -0400 (Thu, 17 Jul 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3596 | rmanfredi | 2003-07-17 04:43:48 -0400 (Thu, 17 Jul 2003) | 3 lines

Added more debugging warning when parsing "ALT" in query hits.
Only open "u" in query hits if it looks like a sha1 or a bitprint URN.

------------------------------------------------------------------------
r3594 | rmanfredi | 2003-07-17 03:02:48 -0400 (Thu, 17 Jul 2003) | 2 lines

Fixed comments that said no trailing padding was emitted, where it was!

------------------------------------------------------------------------
r3593 | rmanfredi | 2003-07-17 03:00:44 -0400 (Thu, 17 Jul 2003) | 3 lines

Fixed lowercase decoding table for the old base32 alphabet.
Fixed comments that said no trailing padding was emitted, where it was!

------------------------------------------------------------------------
r3588 | rmanfredi | 2003-07-16 19:13:28 -0400 (Wed, 16 Jul 2003) | 2 lines

Reserved bit 10 of "min speed" for out-of-band reply delivery.

------------------------------------------------------------------------
r3587 | rmanfredi | 2003-07-16 19:00:33 -0400 (Wed, 16 Jul 2003) | 2 lines

Version of 16/07/2003.

------------------------------------------------------------------------
r3586 | rmanfredi | 2003-07-16 18:51:36 -0400 (Wed, 16 Jul 2003) | 5 lines

Make a distinction between re-queuing a download that must not be rescheduled
before some delay, and re-queuing a download from a host that is busy or
is timeouting, in which case we want to hold further requests to that host.
Make sure to space requests to same host by 15 seconds or so.

------------------------------------------------------------------------
r3584 | rmanfredi | 2003-07-16 17:34:07 -0400 (Wed, 16 Jul 2003) | 2 lines

The download "waiting" list is now sorted by increasing download retry time.

------------------------------------------------------------------------
r3583 | rmanfredi | 2003-07-16 16:53:15 -0400 (Wed, 16 Jul 2003) | 2 lines

Forgot to set d->retry_after when queueing.

------------------------------------------------------------------------
r3582 | rmanfredi | 2003-07-16 16:51:46 -0400 (Wed, 16 Jul 2003) | 2 lines

Fixed typo that could cause an assert failure!

------------------------------------------------------------------------
r3581 | rmanfredi | 2003-07-16 16:31:28 -0400 (Wed, 16 Jul 2003) | 5 lines

Processing of EXT_T_URN_BITPRINT in query hits was incorrect.
Added processing for GGEP "u" and "T" extensions in query hits.
Will now protect against a query hit record having several SHA1, to avoid
memory leaks mainly.

------------------------------------------------------------------------
r3580 | rmanfredi | 2003-07-16 16:30:04 -0400 (Wed, 16 Jul 2003) | 2 lines

Added huge_extract_sha1_no_urn().

------------------------------------------------------------------------
r3579 | rmanfredi | 2003-07-16 15:36:22 -0400 (Wed, 16 Jul 2003) | 4 lines

Handle retry-after time on a per-download basis, not only on a per-server
one because of PARQ: we might need to retry one particular download earlier
than the others queued on the same server.

------------------------------------------------------------------------
r3578 | rmanfredi | 2003-07-16 15:35:50 -0400 (Wed, 16 Jul 2003) | 2 lines

Added declaration for GGEP "H" new types: MD5, UUID and MD4.

------------------------------------------------------------------------
r3576 | rmanfredi | 2003-07-16 13:31:17 -0400 (Wed, 16 Jul 2003) | 3 lines

Switched GGEP "H" support indication from bit 12 to bit 11, since bit 12
is used for leaf-guided queries.

------------------------------------------------------------------------
r3575 | rmanfredi | 2003-07-16 13:30:49 -0400 (Wed, 16 Jul 2003) | 2 lines

Rename XML searches as .orig before parsing.

------------------------------------------------------------------------
r3574 | rmanfredi | 2003-07-16 12:51:39 -0400 (Wed, 16 Jul 2003) | 2 lines

Further factorized code into search_gui_common.c: search saving / restoring.

------------------------------------------------------------------------
r3573 | rmanfredi | 2003-07-16 11:54:21 -0400 (Wed, 16 Jul 2003) | 2 lines

Update GUI immediately after having sent the HTTP request.

------------------------------------------------------------------------
r3572 | rmanfredi | 2003-07-16 11:53:04 -0400 (Wed, 16 Jul 2003) | 2 lines

Upgraded file_info_store() to use common file.c routines for saving.

------------------------------------------------------------------------
r3571 | rmanfredi | 2003-07-16 08:53:42 -0400 (Wed, 16 Jul 2003) | 2 lines

Added knowledge about GGEP "T" and "u" extensions.

------------------------------------------------------------------------
r3570 | rmanfredi | 2003-07-16 08:21:55 -0400 (Wed, 16 Jul 2003) | 3 lines

Added MD4 as a defined hash type.
Added the column encoding, with blurb referring to new RFC-3548.

------------------------------------------------------------------------
r3569 | rmanfredi | 2003-07-16 08:11:06 -0400 (Wed, 16 Jul 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3568 | rmanfredi | 2003-07-16 07:45:25 -0400 (Wed, 16 Jul 2003) | 4 lines

Added new codes 0x3 and 0x4 for MD5 and UUID.
Added column specifying the URN scheme associated with each code.
Added Revision line before publishing on the GDF.

------------------------------------------------------------------------
r3567 | rmanfredi | 2003-07-16 07:44:09 -0400 (Wed, 16 Jul 2003) | 2 lines

Added Revision line before publishing on the GDF.

------------------------------------------------------------------------
r3566 | rmanfredi | 2003-07-16 06:46:57 -0400 (Wed, 16 Jul 2003) | 2 lines

Will now reply with a GGEP "H" to servents that claim support for it.

------------------------------------------------------------------------
r3565 | rmanfredi | 2003-07-16 06:46:06 -0400 (Wed, 16 Jul 2003) | 2 lines

Added indication of support of GGEP "H" in the "min speed" query field.

------------------------------------------------------------------------
r3564 | rmanfredi | 2003-07-16 05:42:44 -0400 (Wed, 16 Jul 2003) | 3 lines

Refactored checking of results set: moved file_info_check_results_set() and
file_info_check_alt_locs() to search.c with proper name change.

------------------------------------------------------------------------
r3563 | rmanfredi | 2003-07-16 05:41:12 -0400 (Wed, 16 Jul 2003) | 2 lines

Fixed definition of ZERO_LENGTH: ensure it is 0 for gcc.

------------------------------------------------------------------------
r3562 | rmanfredi | 2003-07-16 05:29:33 -0400 (Wed, 16 Jul 2003) | 2 lines

Factorized definition of blank_guid[] into guid.c.

------------------------------------------------------------------------
r3561 | cbiere | 2003-07-16 05:15:12 -0400 (Wed, 16 Jul 2003) | 2 lines

Handle conversion failure.

------------------------------------------------------------------------
r3560 | cbiere | 2003-07-16 05:12:30 -0400 (Wed, 16 Jul 2003) | 2 lines

Removed depricated code. Use file_config_open* functions to access parq file. parq_upload_load_queue(): file was never closed.

------------------------------------------------------------------------
r3559 | cbiere | 2003-07-16 05:09:57 -0400 (Wed, 16 Jul 2003) | 2 lines

iso_8859_1_to_utf8(): Fixed copy&paste error.

------------------------------------------------------------------------
r3558 | cbiere | 2003-07-16 05:08:47 -0400 (Wed, 16 Jul 2003) | 2 lines

Use lazy_* conversion functions for GUI elements.

------------------------------------------------------------------------
r3557 | cbiere | 2003-07-16 05:01:14 -0400 (Wed, 16 Jul 2003) | 2 lines

Moved all character conversion and locale code to utf8.c.

------------------------------------------------------------------------
r3556 | cbiere | 2003-07-16 04:59:29 -0400 (Wed, 16 Jul 2003) | 2 lines

Use "sl" for single-linked list. Moved ip/mask parsing to misc.c.

------------------------------------------------------------------------
r3555 | cbiere | 2003-07-16 04:58:19 -0400 (Wed, 16 Jul 2003) | 2 lines

Added gchar_to_ip_and_mask() from hostiles.c.

------------------------------------------------------------------------
r3554 | rmanfredi | 2003-07-16 04:56:45 -0400 (Wed, 16 Jul 2003) | 2 lines

Not only refuse to add private IPs in the mesh, also refuse multicast et al.

------------------------------------------------------------------------
r3553 | cbiere | 2003-07-16 04:55:31 -0400 (Wed, 16 Jul 2003) | 2 lines

Corrected order for checking syntax of zero-length arrays.

------------------------------------------------------------------------
r3552 | cbiere | 2003-07-16 04:49:54 -0400 (Wed, 16 Jul 2003) | 2 lines

Removed depricated minimum speed spinbutton and PROP_DEFAULT_MINIMUM_SPEED.

------------------------------------------------------------------------
r3551 | cbiere | 2003-07-16 04:22:26 -0400 (Wed, 16 Jul 2003) | 2 lines

Replaced C++ comments by C counterparts.

------------------------------------------------------------------------
r3550 | cbiere | 2003-07-16 04:09:10 -0400 (Wed, 16 Jul 2003) | 2 lines

Sorted EXTRA_GTK2 and added fileinfo_gui2.c.

------------------------------------------------------------------------
r3549 | rmanfredi | 2003-07-16 03:53:13 -0400 (Wed, 16 Jul 2003) | 2 lines

When running under debug, warn when partially written HTTP request is flushed.

------------------------------------------------------------------------
r3548 | rmanfredi | 2003-07-16 03:49:50 -0400 (Wed, 16 Jul 2003) | 2 lines

Don't call search_gui_check_alt_locs() if there's no alternate location.

------------------------------------------------------------------------
r3547 | rmanfredi | 2003-07-16 03:42:38 -0400 (Wed, 16 Jul 2003) | 2 lines

Forgot to initialize rc->alt_locs to NULL at creation time.

------------------------------------------------------------------------
r3546 | rmanfredi | 2003-07-16 03:32:42 -0400 (Wed, 16 Jul 2003) | 3 lines

Added read-only support for new GGEP "ALT" extension carrying alt-locs
in query hit records.

------------------------------------------------------------------------
r3545 | rmanfredi | 2003-07-16 03:30:50 -0400 (Wed, 16 Jul 2003) | 2 lines

Regenerated after copyright notice update.

------------------------------------------------------------------------
r3544 | rmanfredi | 2003-07-16 03:30:08 -0400 (Wed, 16 Jul 2003) | 2 lines

New property "auto_feed_download_mesh", defaulting to TRUE.

------------------------------------------------------------------------
r3543 | rmanfredi | 2003-07-16 03:29:18 -0400 (Wed, 16 Jul 2003) | 4 lines

New property "auto_feed_download_mesh", defaulting to TRUE, used to
control whether we monitor query hits for alt-locs of files we are sharing
or already have in our mesh.

------------------------------------------------------------------------
r3542 | rmanfredi | 2003-07-16 03:28:42 -0400 (Wed, 16 Jul 2003) | 2 lines

Updated copyright year.

------------------------------------------------------------------------
r3541 | rmanfredi | 2003-07-16 03:27:46 -0400 (Wed, 16 Jul 2003) | 2 lines

Regenerated after copyright notice update.

------------------------------------------------------------------------
r3540 | rmanfredi | 2003-07-16 03:21:41 -0400 (Wed, 16 Jul 2003) | 2 lines

Moved type-specific GGEP extraction code to new ggep_type.c file.

------------------------------------------------------------------------
r3539 | rmanfredi | 2003-07-16 03:10:12 -0400 (Wed, 16 Jul 2003) | 2 lines

Factorized common search GUI code to search_gui_common.c.

------------------------------------------------------------------------
r3538 | rmanfredi | 2003-07-16 02:10:58 -0400 (Wed, 16 Jul 2003) | 2 lines

Forgot to initialize `len' in dl_req_alloc().

------------------------------------------------------------------------
r3537 | rmanfredi | 2003-07-15 16:50:13 -0400 (Tue, 15 Jul 2003) | 2 lines

Removed support for the loading of old (legacy) config files.

------------------------------------------------------------------------
r3536 | nonamer | 2003-07-15 15:15:10 -0400 (Tue, 15 Jul 2003) | 2 lines

Made it compilable again when xml is disabled

------------------------------------------------------------------------
r3535 | cbiere | 2003-07-15 08:05:03 -0400 (Tue, 15 Jul 2003) | 2 lines

is_ascii_string(): Forgot to dereference str. Found by Stephane.

------------------------------------------------------------------------
r3534 | rmanfredi | 2003-07-15 05:08:00 -0400 (Tue, 15 Jul 2003) | 2 lines

Ran the new "fix_copyright" script to update all copyright notice dates.

------------------------------------------------------------------------
r3533 | rmanfredi | 2003-07-15 04:24:50 -0400 (Tue, 15 Jul 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3532 | cbiere | 2003-07-14 20:47:23 -0400 (Mon, 14 Jul 2003) | 2 lines

Use g_strlcpy() instead of gm_snprintf() or strcpy() where possible.

------------------------------------------------------------------------
r3531 | cbiere | 2003-07-14 20:40:34 -0400 (Mon, 14 Jul 2003) | 2 lines

Merged a few fputs() and fprintf() calls.

------------------------------------------------------------------------
r3530 | cbiere | 2003-07-14 17:30:26 -0400 (Mon, 14 Jul 2003) | 2 lines

Fixed too long lines (caused by me) and similar minor style violations.

------------------------------------------------------------------------
r3529 | cbiere | 2003-07-14 16:56:59 -0400 (Mon, 14 Jul 2003) | 2 lines

Fixed style.

------------------------------------------------------------------------
r3528 | rmanfredi | 2003-07-14 14:28:41 -0400 (Mon, 14 Jul 2003) | 2 lines

Amended the specs slightly to account for other URN requests.

------------------------------------------------------------------------
r3527 | rmanfredi | 2003-07-14 14:15:37 -0400 (Mon, 14 Jul 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3526 | rmanfredi | 2003-07-14 13:53:05 -0400 (Mon, 14 Jul 2003) | 2 lines

The draft-josefsson-base-encoding-04.txt was replaced by rfc3548.txt.

------------------------------------------------------------------------
r3525 | rmanfredi | 2003-07-14 13:12:14 -0400 (Mon, 14 Jul 2003) | 2 lines

Fixed encoding of saved strings [Patch from Stephane Corbe, fixes #747501].

------------------------------------------------------------------------
r3524 | rmanfredi | 2003-07-14 12:24:00 -0400 (Mon, 14 Jul 2003) | 2 lines

Handle partial sending of the HTTP request, instead of stopping.

------------------------------------------------------------------------
r3523 | cbiere | 2003-07-14 02:44:41 -0400 (Mon, 14 Jul 2003) | 3 lines

Moved the "Purge" button to the left because a long filename would cause
the filename label to overlap the button [Paul W. Morehead, #770625].

------------------------------------------------------------------------
r3522 | cbiere | 2003-07-14 02:10:25 -0400 (Mon, 14 Jul 2003) | 6 lines

[GTK2]: Fixed sorting at the upload pane.
		Further optimized upload pane.
		upload_row_data_t buffers for (not yet) removed rows where not freed
			when shutting down.
		Added some comments and applied minor style fixes.

------------------------------------------------------------------------
r3521 | cbiere | 2003-07-14 02:05:00 -0400 (Mon, 14 Jul 2003) | 2 lines

Minor cosmestic style fix.

------------------------------------------------------------------------
r3520 | cbiere | 2003-07-14 02:03:35 -0400 (Mon, 14 Jul 2003) | 2 lines

Fixed harmless but annyoing `type-punning' warnings (gcc 3.3).

------------------------------------------------------------------------
r3519 | rmanfredi | 2003-07-13 18:39:22 -0400 (Sun, 13 Jul 2003) | 2 lines

Minor cleanup: moved ban_is_banned() call at the end of "if" test.

------------------------------------------------------------------------
r3518 | cbiere | 2003-07-13 18:09:44 -0400 (Sun, 13 Jul 2003) | 3 lines

Use G_LIST_FOREACH() for better performance by inline.
Added comments and applied a few style fixes.

------------------------------------------------------------------------
r3517 | cbiere | 2003-07-13 17:30:34 -0400 (Sun, 13 Jul 2003) | 3 lines

Added macro counterparts of g_{s,}list_foreach() G_{S,}LIST_FOREACH() for
	better performance by using inline functions.

------------------------------------------------------------------------
r3516 | nonamer | 2003-07-13 14:03:43 -0400 (Sun, 13 Jul 2003) | 2 lines

My changes for 13/7/2003 (I hope this will be all actually for now)

------------------------------------------------------------------------
r3515 | nonamer | 2003-07-13 13:52:05 -0400 (Sun, 13 Jul 2003) | 2 lines

Lets do it the right way shall we?

------------------------------------------------------------------------
r3514 | nonamer | 2003-07-13 13:49:27 -0400 (Sun, 13 Jul 2003) | 4 lines

If multiple uploads enter the PARQ for the same file from the same IP, display
a warning and deny the upload instead of asserting. There isn't that much
we can do about other clients misbehaving.

------------------------------------------------------------------------
r3513 | nonamer | 2003-07-13 08:26:30 -0400 (Sun, 13 Jul 2003) | 2 lines

<wilm> typo in vendors.c:47 { T_FISH, "PEERahna" }  should be "PEERanha"

------------------------------------------------------------------------
r3512 | nonamer | 2003-07-13 05:49:48 -0400 (Sun, 13 Jul 2003) | 5 lines

Don't update ETA on parq shutdown. We don't need it on shutdown, so it is
a waste of time. Also the calculated values ain't correct on shutdown
neither.
Side effect: This fixes a segfault which happens sometimes on shutdown.

------------------------------------------------------------------------
r3511 | rmanfredi | 2003-07-13 04:32:36 -0400 (Sun, 13 Jul 2003) | 2 lines

Protect against subsequent ban_record() calls: free existing ban mesasge.

------------------------------------------------------------------------
r3510 | rmanfredi | 2003-07-13 04:02:01 -0400 (Sun, 13 Jul 2003) | 2 lines

Version of 13/07/2003.

------------------------------------------------------------------------
r3509 | rmanfredi | 2003-07-13 04:00:07 -0400 (Sun, 13 Jul 2003) | 2 lines

Don't send back QUEUE to a host that is banned.

------------------------------------------------------------------------
r3508 | rmanfredi | 2003-07-13 03:59:50 -0400 (Sun, 13 Jul 2003) | 3 lines

When host refuses that we download from it, ban it for some time and kill
all its pending uploads.

------------------------------------------------------------------------
r3507 | rmanfredi | 2003-07-13 03:58:55 -0400 (Sun, 13 Jul 2003) | 4 lines

Fixed ban_record(): could be using the wrong callout queue callback.
Added ban_is_banned() to allow checking for the ban status without calling
ban_allow() which is only supposed to be called on new connections.

------------------------------------------------------------------------
r3506 | cbiere | 2003-07-12 22:28:03 -0400 (Sat, 12 Jul 2003) | 3 lines

ggep_ext_writev():
	hlen[] was one element to small. Reported by Prashant Murthy (#768254).

------------------------------------------------------------------------
r3505 | nonamer | 2003-07-12 14:12:32 -0400 (Sat, 12 Jul 2003) | 3 lines

I don't intend to change anything anymore about gtk-gnutella today, so this
is probably my changelog for 12/7/03

------------------------------------------------------------------------
r3504 | nonamer | 2003-07-12 11:32:29 -0400 (Sat, 12 Jul 2003) | 4 lines

PARQ doesn't like multiple uploads from the same host for the same file at
once. It will never like it either :). First check wether a host is allready
downloading 'that' file before asking anything at parq.

------------------------------------------------------------------------
r3503 | nonamer | 2003-07-12 08:25:55 -0400 (Sat, 12 Jul 2003) | 2 lines

Another assert safety check.

------------------------------------------------------------------------
r3502 | nonamer | 2003-07-12 07:53:00 -0400 (Sat, 12 Jul 2003) | 3 lines

Added some assertion to track problems with parq_ul->u not keeped in sync
with u

------------------------------------------------------------------------
r3501 | cbiere | 2003-07-11 22:26:27 -0400 (Fri, 11 Jul 2003) | 2 lines

[GTK2] (Hopefully) reduced cpu usage at the nodes pane.

------------------------------------------------------------------------
r3500 | cbiere | 2003-07-11 22:24:24 -0400 (Fri, 11 Jul 2003) | 5 lines

[GTK2]:
	Revisied code for upload pane.
	Reduced cpu usage.
	Made column widths persistent.

------------------------------------------------------------------------
r3499 | cbiere | 2003-07-11 22:20:59 -0400 (Fri, 11 Jul 2003) | 2 lines

[GTK2] Cosmetic clean-ups.

------------------------------------------------------------------------
r3498 | cbiere | 2003-07-11 22:19:54 -0400 (Fri, 11 Jul 2003) | 2 lines

[GTK2] Added w_tree_iter_new().

------------------------------------------------------------------------
r3497 | nonamer | 2003-07-11 18:48:11 -0400 (Fri, 11 Jul 2003) | 2 lines

Let parq keep track of cloned uploads

------------------------------------------------------------------------
r3496 | nonamer | 2003-07-11 15:15:53 -0400 (Fri, 11 Jul 2003) | 3 lines

When an upload is freed, a parq structure might allready have been removed.
Check this first before doing anything the non-existing structure

------------------------------------------------------------------------
r3495 | nonamer | 2003-07-11 14:29:03 -0400 (Fri, 11 Jul 2003) | 4 lines

Why on earth was parq_upload_remove called twice when an upload got finished?
parq now keeps track of the upload structures so it should be able to remove
the parq_opaque pointer as soon as a parq structure is freed.

------------------------------------------------------------------------
r3494 | nonamer | 2003-07-11 12:16:17 -0400 (Fri, 11 Jul 2003) | 4 lines

Don't trigger PARQ to remove an upload for "too many disconnections" while
the upload is doing a follow request and the previous upload succeeded
succesfully

------------------------------------------------------------------------
r3493 | guruz | 2003-07-11 05:52:17 -0400 (Fri, 11 Jul 2003) | 2 lines

removed ciabot.pl from gtk-gnutella-current, it _should_ work in CVSROOT now.

------------------------------------------------------------------------
r3491 | guruz | 2003-07-11 05:38:50 -0400 (Fri, 11 Jul 2003) | 2 lines

Added RCS id..

------------------------------------------------------------------------
r3490 | nonamer | 2003-07-11 01:34:48 -0400 (Fri, 11 Jul 2003) | 2 lines

Starting minor PARQ cleanup.

------------------------------------------------------------------------
r3489 | cbiere | 2003-07-10 19:53:14 -0400 (Thu, 10 Jul 2003) | 2 lines

[GTK2] Re-added download button to the search pane.

------------------------------------------------------------------------
r3488 | guruz | 2003-07-09 13:49:35 -0400 (Wed, 09 Jul 2003) | 2 lines

Whitespace added ;)

------------------------------------------------------------------------
r3486 | guruz | 2003-07-09 13:48:18 -0400 (Wed, 09 Jul 2003) | 2 lines

Copied ciabot over here

------------------------------------------------------------------------
r3484 | nonamer | 2003-07-09 13:39:02 -0400 (Wed, 09 Jul 2003) | 2 lines

My changelog for (09.07.03) (PARQ updates only)

------------------------------------------------------------------------
r3483 | rmanfredi | 2003-07-09 13:38:21 -0400 (Wed, 09 Jul 2003) | 2 lines

Step 16: SF renamed "Edit/Add Releases" section into "File Releases"

------------------------------------------------------------------------
r3482 | rmanfredi | 2003-07-09 13:36:00 -0400 (Wed, 09 Jul 2003) | 2 lines

Added mention of the "GTKG.lst" file.

------------------------------------------------------------------------
r3480 | nonamer | 2003-07-09 13:15:41 -0400 (Wed, 09 Jul 2003) | 3 lines

Better use of the parq_opaque pointer. Also remove the pointer when the
PARQ structure got removed.

------------------------------------------------------------------------
r3479 | cbiere | 2003-07-08 09:07:22 -0400 (Tue, 08 Jul 2003) | 2 lines

Corrected code for setting locale.

------------------------------------------------------------------------
r3478 | rmanfredi | 2003-07-08 02:07:08 -0400 (Tue, 08 Jul 2003) | 2 lines

Forgot to include <locale.h>.

------------------------------------------------------------------------
r3477 | cbiere | 2003-07-07 20:47:25 -0400 (Mon, 07 Jul 2003) | 2 lines

Imported small patch from OpenBSD package.

------------------------------------------------------------------------
r3476 | cbiere | 2003-07-07 20:42:41 -0400 (Mon, 07 Jul 2003) | 2 lines

Removed inline qualifier from functions which access static data.

------------------------------------------------------------------------
r3474 | rmanfredi | 2003-07-07 18:29:39 -0400 (Mon, 07 Jul 2003) | 2 lines

Call setlocale() and determine proper codeset [Path from Stephane Corbe].

------------------------------------------------------------------------
r3473 | cbiere | 2003-07-07 02:29:17 -0400 (Mon, 07 Jul 2003) | 2 lines

Use gchar instead guchar whenever possible to reduce unnecessary casts and prevent trouble with picky compilers.

------------------------------------------------------------------------
r3472 | cbiere | 2003-07-07 02:20:03 -0400 (Mon, 07 Jul 2003) | 2 lines

Fixed alignment problem: char array was casted to an array of guint32!

------------------------------------------------------------------------
r3471 | cbiere | 2003-07-07 02:15:48 -0400 (Mon, 07 Jul 2003) | 2 lines

Fixed minor signedness problems.

------------------------------------------------------------------------
r3470 | cbiere | 2003-07-07 02:15:01 -0400 (Mon, 07 Jul 2003) | 2 lines

Corrected cast for function pointer.

------------------------------------------------------------------------
r3469 | cbiere | 2003-07-07 02:13:17 -0400 (Mon, 07 Jul 2003) | 2 lines

Fixed minor problems with const qualifiers.

------------------------------------------------------------------------
r3468 | cbiere | 2003-07-07 02:12:24 -0400 (Mon, 07 Jul 2003) | 2 lines

main_gui_shutdown(): Enforce correct signedness for coord.

------------------------------------------------------------------------
r3467 | cbiere | 2003-07-07 02:09:07 -0400 (Mon, 07 Jul 2003) | 2 lines

[ENABLE_NLS] Include libintl.h instead of locale.h for bindtextdomain_codeset.

------------------------------------------------------------------------
r3466 | cbiere | 2003-07-07 02:07:09 -0400 (Mon, 07 Jul 2003) | 2 lines

Fixed minor problems with const qualifiers.

------------------------------------------------------------------------
r3465 | cbiere | 2003-07-07 02:06:29 -0400 (Mon, 07 Jul 2003) | 2 lines

Moved h_tmp to only functions it's used by. Fixed minor problems with const qualifiers and a signedness-mismatch.

------------------------------------------------------------------------
r3464 | cbiere | 2003-07-07 02:05:06 -0400 (Mon, 07 Jul 2003) | 2 lines

Fixed minor problems with const qualifiers and a signedness-mismatch.

------------------------------------------------------------------------
r3463 | cbiere | 2003-07-07 02:02:39 -0400 (Mon, 07 Jul 2003) | 2 lines

gui_record_sha1_eq(): There's no reason to use guchar instead of gchar.

------------------------------------------------------------------------
r3462 | cbiere | 2003-07-07 02:01:05 -0400 (Mon, 07 Jul 2003) | 2 lines

Corrected casts for function pointers.

------------------------------------------------------------------------
r3461 | cbiere | 2003-07-07 02:00:25 -0400 (Mon, 07 Jul 2003) | 2 lines

Use ISO C99 syntax for arrays with "zero-length" for non-GNU compilers. Use gchar instead of guchar where possible.

------------------------------------------------------------------------
r3460 | cbiere | 2003-07-07 01:57:03 -0400 (Mon, 07 Jul 2003) | 2 lines

Removed G_INLINE_FUNC because ISO C99 does not permit inline functions to access static objects.

------------------------------------------------------------------------
r3459 | cbiere | 2003-07-07 01:54:51 -0400 (Mon, 07 Jul 2003) | 2 lines

Use gchar instead of guchar for less casts and less trouble with picky compilers.

------------------------------------------------------------------------
r3458 | cbiere | 2003-07-07 01:49:49 -0400 (Mon, 07 Jul 2003) | 2 lines

Added explicit casts for picky compilers.

------------------------------------------------------------------------
r3457 | cbiere | 2003-07-07 01:48:58 -0400 (Mon, 07 Jul 2003) | 2 lines

fuzzy_strlower(): Added explicit cast for picky compilers.

------------------------------------------------------------------------
r3456 | cbiere | 2003-07-07 01:46:50 -0400 (Mon, 07 Jul 2003) | 2 lines

Removed unnecessary parentheses.

------------------------------------------------------------------------
r3455 | cbiere | 2003-07-07 01:44:58 -0400 (Mon, 07 Jul 2003) | 2 lines

Added missing 2nd parameter for locale_utf8().

------------------------------------------------------------------------
r3454 | rmanfredi | 2003-07-06 18:10:57 -0400 (Sun, 06 Jul 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r3453 | rmanfredi | 2003-07-06 18:09:35 -0400 (Sun, 06 Jul 2003) | 2 lines

Also "broadcast" our own Push requests if we have multiple routes.

------------------------------------------------------------------------
r3452 | rmanfredi | 2003-07-06 17:29:32 -0400 (Sun, 06 Jul 2003) | 2 lines

Call locale_to_utf8() on filenames for GTK2 [Patch from Uriel].

------------------------------------------------------------------------
r3451 | rmanfredi | 2003-07-06 17:15:16 -0400 (Sun, 06 Jul 2003) | 2 lines

Version of 06/07/2003.

------------------------------------------------------------------------
r3450 | rmanfredi | 2003-07-06 17:13:36 -0400 (Sun, 06 Jul 2003) | 2 lines

Regenerated.

------------------------------------------------------------------------
r3449 | rmanfredi | 2003-07-06 17:13:13 -0400 (Sun, 06 Jul 2003) | 2 lines

File path properties have their default set to "~" instead of "/tmp".

------------------------------------------------------------------------
r3448 | rmanfredi | 2003-07-06 17:07:30 -0400 (Sun, 06 Jul 2003) | 3 lines

Factorized setting callback for file path into one file_path_changed(),
and added a verification callback for PROP_BAD_FILE_PATH.

------------------------------------------------------------------------
r3447 | rmanfredi | 2003-07-06 17:05:50 -0400 (Sun, 06 Jul 2003) | 2 lines

Simplified code to use gui_prop_name().

------------------------------------------------------------------------
r3446 | rmanfredi | 2003-07-06 17:05:13 -0400 (Sun, 06 Jul 2003) | 4 lines

Added new generic prop_name() to convert a property into its name.
Property initialization strings are now run through eval_subst() to allow
environment variables and ~ in their value.

------------------------------------------------------------------------
r3445 | rmanfredi | 2003-07-06 17:01:28 -0400 (Sun, 06 Jul 2003) | 2 lines

Added string evaluation code, that can evaluate ~/foo and $HOME or ${HOME}.

------------------------------------------------------------------------
r3444 | rmanfredi | 2003-07-06 10:19:22 -0400 (Sun, 06 Jul 2003) | 2 lines

We now have the IP address in version checks: log it when bad token is seen.

------------------------------------------------------------------------
r3443 | rmanfredi | 2003-07-06 10:16:24 -0400 (Sun, 06 Jul 2003) | 2 lines

Cleanup dest route list (ROUTE_MULTI) for broadcasted push messages.

------------------------------------------------------------------------
r3442 | rmanfredi | 2003-07-06 10:12:59 -0400 (Sun, 06 Jul 2003) | 3 lines

Now fully supports special "min speed" field in queries.  The GUI min speed
value as well as the default min speed are now ignored and should be removed.

------------------------------------------------------------------------
r3441 | rmanfredi | 2003-07-06 10:10:56 -0400 (Sun, 06 Jul 2003) | 2 lines

Created.

------------------------------------------------------------------------
r3440 | rmanfredi | 2003-07-06 10:07:22 -0400 (Sun, 06 Jul 2003) | 2 lines

Raised default gnet connection timeout to 10 seconds.

------------------------------------------------------------------------
r3439 | rmanfredi | 2003-07-06 06:24:47 -0400 (Sun, 06 Jul 2003) | 3 lines

Added -mieee to the compile flags when building for Debian on Alpha
[Patch from Christoph Reichenbach on Debian].

------------------------------------------------------------------------
r3438 | rmanfredi | 2003-07-06 06:13:19 -0400 (Sun, 06 Jul 2003) | 2 lines

Double grace period when running in ultra mode: more connections to flush.

------------------------------------------------------------------------
r3437 | rmanfredi | 2003-07-06 06:11:39 -0400 (Sun, 06 Jul 2003) | 2 lines

Broadcast Push messages to all known routes to increase reception likelihood.

------------------------------------------------------------------------
r3436 | rmanfredi | 2003-07-05 17:07:28 -0400 (Sat, 05 Jul 2003) | 2 lines

Version of 05/07/2003.

------------------------------------------------------------------------
r3435 | rmanfredi | 2003-07-05 17:06:21 -0400 (Sat, 05 Jul 2003) | 2 lines

Don't send queries unless there is a route for the possible replies.

------------------------------------------------------------------------
r3434 | rmanfredi | 2003-07-05 13:05:30 -0400 (Sat, 05 Jul 2003) | 2 lines

Avoid duplicate free in _search_send_packet() when empty word vector.

------------------------------------------------------------------------
r3433 | rmanfredi | 2003-07-05 12:35:11 -0400 (Sat, 05 Jul 2003) | 3 lines

Don't use GNU-isms for variadic macros, prefer the ANSI way
[Patch #755639 from int_80h].

------------------------------------------------------------------------
r3432 | rmanfredi | 2003-07-05 12:12:06 -0400 (Sat, 05 Jul 2003) | 3 lines

[GTK1] Print message in statusbar showing how many downloads were created
from the many items selected.

------------------------------------------------------------------------
r3431 | rmanfredi | 2003-07-05 11:35:04 -0400 (Sat, 05 Jul 2003) | 3 lines

Apply queue regexp search to both download's filename and output filename
[Patch #754923 from Stephane Corbe].

------------------------------------------------------------------------
r3430 | nonamer | 2003-07-05 11:30:14 -0400 (Sat, 05 Jul 2003) | 2 lines

Uploads now contain a pointer to a PARQ structure for faster lookup.

------------------------------------------------------------------------
r3429 | rmanfredi | 2003-07-05 09:18:12 -0400 (Sat, 05 Jul 2003) | 2 lines

Forgot to include "dmesh.h".

------------------------------------------------------------------------
r3428 | rmanfredi | 2003-07-05 09:17:52 -0400 (Sat, 05 Jul 2003) | 2 lines

Only use an IP for clock skew computation once per 24 hours.

------------------------------------------------------------------------
r3427 | rmanfredi | 2003-07-05 09:14:15 -0400 (Sat, 05 Jul 2003) | 2 lines

Forgot to tag vendor with leading '*' when adding download to GUI.

------------------------------------------------------------------------
r3426 | rmanfredi | 2003-07-05 08:17:14 -0400 (Sat, 05 Jul 2003) | 2 lines

Prefix user-agent strings with a '*' when server appears to be banning us.

------------------------------------------------------------------------
r3425 | rmanfredi | 2003-07-05 08:16:27 -0400 (Sat, 05 Jul 2003) | 5 lines

Don't activate the "no keepalive" flag on downloads if we detect that
the server is performing some kind of "rotation" in the queue by closing
our connection after having shrunk our request.
Refresh user-agent when the banning status changes.

------------------------------------------------------------------------
r3424 | rmanfredi | 2003-07-05 08:14:45 -0400 (Sat, 05 Jul 2003) | 2 lines

Parse all query hits for inclusion into the download mesh.

------------------------------------------------------------------------
r3423 | rmanfredi | 2003-07-04 17:23:12 -0400 (Fri, 04 Jul 2003) | 2 lines

Version of 04/07/2003.

------------------------------------------------------------------------
r3422 | rmanfredi | 2003-07-04 17:18:55 -0400 (Fri, 04 Jul 2003) | 3 lines

When banning due to vendor user-agent string, record the IP and forcefully
ban it for 3 hours from then on, to defeat GTKG's own anti-banning code.

------------------------------------------------------------------------
r3421 | rmanfredi | 2003-07-04 16:16:24 -0400 (Fri, 04 Jul 2003) | 3 lines

Navigation pane updates correctly with 'jump to downloads' (fixes #612799 and
#629299) [From Emile le Vivre].

------------------------------------------------------------------------
r3420 | rmanfredi | 2003-07-04 15:50:21 -0400 (Fri, 04 Jul 2003) | 2 lines

Don't insert alt-locs pointing to hostile IPs in the mesh.

------------------------------------------------------------------------
r3419 | rmanfredi | 2003-07-04 15:28:37 -0400 (Fri, 04 Jul 2003) | 2 lines

Added anti-403 "Network Disabled" code.

------------------------------------------------------------------------
r3418 | nonamer | 2003-07-04 14:46:55 -0400 (Fri, 04 Jul 2003) | 4 lines

Quick fix: PARQ would assert when a client did not request the file PARQ
was expecting on a PARQ callback. This needs to be worked out better
though

------------------------------------------------------------------------
r3417 | cbiere | 2003-07-04 03:05:13 -0400 (Fri, 04 Jul 2003) | 3 lines

Added RCS Ids.
Added no-c-format tag (nl).

------------------------------------------------------------------------
r3416 | nonamer | 2003-07-03 15:19:57 -0400 (Thu, 03 Jul 2003) | 2 lines

Should now only actively queue one upload per ip. (Not very well tested)

------------------------------------------------------------------------
r3414 | cbiere | 2003-07-02 00:48:12 -0400 (Wed, 02 Jul 2003) | 2 lines

Revised code for updating and removing rows at the upload pane.

------------------------------------------------------------------------
r3413 | cbiere | 2003-07-02 00:39:38 -0400 (Wed, 02 Jul 2003) | 2 lines

Added checkbutton_scan_ignore_symlink_{dirs,regfiles}.

------------------------------------------------------------------------
r3412 | cbiere | 2003-07-02 00:32:44 -0400 (Wed, 02 Jul 2003) | 2 lines

Updated list of caches.

------------------------------------------------------------------------
r3411 | cbiere | 2003-07-01 23:43:03 -0400 (Tue, 01 Jul 2003) | 2 lines

Added french translation provided by T'aZ.

------------------------------------------------------------------------
r3410 | cbiere | 2003-07-01 21:08:27 -0400 (Tue, 01 Jul 2003) | 2 lines

Committed french translation provided by T'aZ.

------------------------------------------------------------------------
r3409 | cbiere | 2003-07-01 21:05:53 -0400 (Tue, 01 Jul 2003) | 2 lines

Use --check for msgfmt to detect messing with the c-format string.

------------------------------------------------------------------------
r3408 | cbiere | 2003-07-01 09:26:50 -0400 (Tue, 01 Jul 2003) | 2 lines

Several code clean-ups.

------------------------------------------------------------------------
r3407 | cbiere | 2003-07-01 09:25:28 -0400 (Tue, 01 Jul 2003) | 2 lines

Removed unused legacy code.

------------------------------------------------------------------------
r3406 | rmanfredi | 2003-07-01 03:04:08 -0400 (Tue, 01 Jul 2003) | 2 lines

Sort by size, then by SHA1 when sorting by size [From Thomas Schuerger].

------------------------------------------------------------------------
r3405 | rmanfredi | 2003-06-28 03:35:09 -0400 (Sat, 28 Jun 2003) | 2 lines

Added "torrent" to the default list of sharing extensions.

------------------------------------------------------------------------
r3404 | rmanfredi | 2003-06-25 16:26:00 -0400 (Wed, 25 Jun 2003) | 2 lines

Version of 25/06/2003.

------------------------------------------------------------------------
r3403 | rmanfredi | 2003-06-25 16:12:17 -0400 (Wed, 25 Jun 2003) | 2 lines

Send blanked GUID in vendor messages that don't need a particular GUID.

------------------------------------------------------------------------
r3402 | rmanfredi | 2003-06-25 16:11:11 -0400 (Wed, 25 Jun 2003) | 2 lines

Code cleanup.

------------------------------------------------------------------------
r3401 | rmanfredi | 2003-06-25 16:10:05 -0400 (Wed, 25 Jun 2003) | 2 lines

Mark fileinfo database as being dirty when a fileinfo is reset.

------------------------------------------------------------------------
r3400 | rmanfredi | 2003-06-25 16:08:50 -0400 (Wed, 25 Jun 2003) | 3 lines

Don't pick a suspended download in download_find_waiting_unparq().
Asserted that a verifying download must be in DL_LIST_STOPPED.

------------------------------------------------------------------------
r3399 | nonamer | 2003-06-25 15:45:32 -0400 (Wed, 25 Jun 2003) | 2 lines

80 char limit (sorry)

------------------------------------------------------------------------
r3398 | nonamer | 2003-06-25 14:40:21 -0400 (Wed, 25 Jun 2003) | 2 lines

A little bit late...

------------------------------------------------------------------------
r3397 | nonamer | 2003-06-25 14:21:03 -0400 (Wed, 25 Jun 2003) | 4 lines

Perhaps this fixes the GTA_DL_VERIFYING bug.
This change should also help to accept QUEUE commands when an download is
actively queued

------------------------------------------------------------------------
r3396 | cbiere | 2003-06-24 20:50:16 -0400 (Tue, 24 Jun 2003) | 3 lines

download_resume(): Refuse to resume if the download is in the
    GTA_DL_TIMEOUT_WAIT state. Should fix #739262.

------------------------------------------------------------------------
r3395 | cbiere | 2003-06-24 01:35:45 -0400 (Tue, 24 Jun 2003) | 2 lines

locale_to_utf8(): If the string is already UTF-8 encoded, return it "as-is".

------------------------------------------------------------------------
r3394 | cbiere | 2003-06-24 00:10:29 -0400 (Tue, 24 Jun 2003) | 5 lines

Re-worked removing of rows. Due to enabled sorting it seems to be possible
that a list store contains the same row twice. I consider this a GTK+ bug,
thus the changes are a bug workaround. The important part is setting
the data column to NULL to prevent accessing already freed data.

------------------------------------------------------------------------
r3393 | nonamer | 2003-06-22 09:32:04 -0400 (Sun, 22 Jun 2003) | 2 lines

One debug line to many: Removed

------------------------------------------------------------------------
r3392 | nonamer | 2003-06-22 09:22:24 -0400 (Sun, 22 Jun 2003) | 3 lines

This should fix the Retry-After: 0 bug when max uploads from one ip has
been reached. This logic is now completly handled by PARQ.

------------------------------------------------------------------------
r3391 | nonamer | 2003-06-22 09:15:56 -0400 (Sun, 22 Jun 2003) | 4 lines

Only sends one QUEUE command to one IP at a time. Doesn't attempt to send
more QUEUE commands to the same IP within 10 minutes if the host didn't
respond at all

------------------------------------------------------------------------
r3390 | cbiere | 2003-06-21 09:52:17 -0400 (Sat, 21 Jun 2003) | 2 lines

d_start(): Use g_strdup_printf() to prevent truncation of the filename.

------------------------------------------------------------------------
r3389 | rmanfredi | 2003-06-20 02:23:02 -0400 (Fri, 20 Jun 2003) | 2 lines

This is 0.93u now!

------------------------------------------------------------------------
r3388 | cbiere | 2003-06-20 01:20:39 -0400 (Fri, 20 Jun 2003) | 2 lines

Removed dead caches and added a bunch of new ones.

------------------------------------------------------------------------
r3387 | rmanfredi | 2003-06-19 17:52:02 -0400 (Thu, 19 Jun 2003) | 2 lines

Additional changes.

------------------------------------------------------------------------
r3386 | rmanfredi | 2003-06-19 17:50:55 -0400 (Thu, 19 Jun 2003) | 3 lines

Moved verify_close() and move_close() calls before main_gui_shutdown()
so that no ticks to the daemon thread be made whilst in shutdown!

------------------------------------------------------------------------
r3385 | rmanfredi | 2003-06-19 17:48:45 -0400 (Thu, 19 Jun 2003) | 2 lines

Restored stripped out gtk_init(&argc, &argv) call (fixes bug #757504).

------------------------------------------------------------------------
r3384 | rmanfredi | 2003-06-19 16:10:13 -0400 (Thu, 19 Jun 2003) | 2 lines

Version of 19/06/2003.

------------------------------------------------------------------------
r3383 | rmanfredi | 2003-06-19 14:02:19 -0400 (Thu, 19 Jun 2003) | 2 lines

Finished application of Angelo's symlink patch (fixes bug #756146).

------------------------------------------------------------------------
r3382 | rmanfredi | 2003-06-19 13:58:40 -0400 (Thu, 19 Jun 2003) | 2 lines

Don't send pong-cache pings on a flow-controlled connection.

------------------------------------------------------------------------
r3381 | rmanfredi | 2003-06-19 13:57:50 -0400 (Thu, 19 Jun 2003) | 2 lines

Optimized server banning test.

------------------------------------------------------------------------
r3379 | wyldfire | 2003-06-17 09:31:51 -0400 (Tue, 17 Jun 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3378 | wyldfire | 2003-06-17 09:31:04 -0400 (Tue, 17 Jun 2003) | 5 lines


[Gtk2] No longer disable antialiasing. This confuses people who are
   using Gtk2 and get font problems. If they want better performance, they
   should turn off AA manually using "export GDK_USE_XFT=0".

------------------------------------------------------------------------
r3377 | rmanfredi | 2003-06-17 02:14:38 -0400 (Tue, 17 Jun 2003) | 2 lines

Version of 17/06/2003.

------------------------------------------------------------------------
r3376 | rmanfredi | 2003-06-17 02:13:27 -0400 (Tue, 17 Jun 2003) | 5 lines

Collect URNs from non-standard Shareaza X-Content-URN header.
When remote host turns out to be a genuine GTKG, stop anti-banning
protection by faking a user-agent string, since we know the remote end
won't be discriminating us.

------------------------------------------------------------------------
r3375 | rmanfredi | 2003-06-17 02:11:13 -0400 (Tue, 17 Jun 2003) | 2 lines

Use new dmesh_collect_sha1() to collect URNs.

------------------------------------------------------------------------
r3374 | rmanfredi | 2003-06-17 02:10:25 -0400 (Tue, 17 Jun 2003) | 3 lines

Now supports collection of multiple URNs from X-Gnutella-Content-URN,
but still only look at ones containing a SHA1.

------------------------------------------------------------------------
r3369 | rmanfredi | 2003-06-15 05:02:06 -0400 (Sun, 15 Jun 2003) | 2 lines

Re-enabled source directory fallback after the release.

------------------------------------------------------------------------
r3367 | rmanfredi | 2003-06-15 04:11:05 -0400 (Sun, 15 Jun 2003) | 2 lines

Release 0.92 stable.

------------------------------------------------------------------------
r3366 | rmanfredi | 2003-06-14 16:55:47 -0400 (Sat, 14 Jun 2003) | 2 lines

Fixed typo appereance -> appearance in GTK2.

------------------------------------------------------------------------
r3365 | rmanfredi | 2003-06-14 16:49:16 -0400 (Sat, 14 Jun 2003) | 2 lines

The new default listening port is now set to 8436 to avoid ISP censorship.

------------------------------------------------------------------------
r3364 | rmanfredi | 2003-06-14 15:22:09 -0400 (Sat, 14 Jun 2003) | 2 lines

Changed tooltip for "listen_port".

------------------------------------------------------------------------
r3363 | rmanfredi | 2003-06-14 14:46:49 -0400 (Sat, 14 Jun 2003) | 2 lines

Forgot to mention PARQ id in header of persisted downloads.

------------------------------------------------------------------------
r3362 | rmanfredi | 2003-06-14 14:13:58 -0400 (Sat, 14 Jun 2003) | 2 lines

Updated hostiles.txt to follow BearShare's modifications, and sorted it.

------------------------------------------------------------------------
r3361 | nonamer | 2003-06-14 12:30:33 -0400 (Sat, 14 Jun 2003) | 3 lines

Upload behaviour is back to normal again to avoid one queue to obtain most
of the upload slots.

------------------------------------------------------------------------
r3360 | wyldfire | 2003-06-13 17:47:43 -0400 (Fri, 13 Jun 2003) | 3 lines


Probably fixed segfault in search_cb.c:430 in rare cases.

------------------------------------------------------------------------
r3359 | nonamer | 2003-06-13 15:29:40 -0400 (Fri, 13 Jun 2003) | 2 lines

Enables dynamic upload slot allocation again

------------------------------------------------------------------------
r3358 | nonamer | 2003-06-13 14:20:28 -0400 (Fri, 13 Jun 2003) | 5 lines

Fixes:
** ERROR **: file parq.c: line 1976 (parq_upload_continue): assertion failed: (slots_free >= 0)

Removed the assertion, as this one won't work when dynamic slots are enabled.

------------------------------------------------------------------------
r3357 | nonamer | 2003-06-13 14:14:03 -0400 (Fri, 13 Jun 2003) | 5 lines

The assertion was totally wrong. ETA is a relative time stamp, and not an
absolute timestamp as now is.
This will fix:
** ERROR **: file parq.c: line 2180 (parq_upload_request): assertion failed:

------------------------------------------------------------------------
r3356 | rmanfredi | 2003-06-12 16:24:43 -0400 (Thu, 12 Jun 2003) | 2 lines

Integrated GTK2 icon patch [From Russell Francis].

------------------------------------------------------------------------
r3355 | nonamer | 2003-06-12 16:17:02 -0400 (Thu, 12 Jun 2003) | 2 lines

My changelof for 12/6/2003

------------------------------------------------------------------------
r3354 | nonamer | 2003-06-12 16:15:51 -0400 (Thu, 12 Jun 2003) | 2 lines

This should fix an assertion failure on gtk-gnutella shutdown

------------------------------------------------------------------------
r3353 | nonamer | 2003-06-12 16:13:10 -0400 (Thu, 12 Jun 2003) | 3 lines

Disabled the shorter retry for parq. They are #if 0 now, so just change them
to 1 if you still want to use it.

------------------------------------------------------------------------
r3352 | nonamer | 2003-06-12 15:14:17 -0400 (Thu, 12 Jun 2003) | 8 lines

I am not sure if everyone is going to like this, PARQ however is now more
agressive timing out small uploads requests. Those who only share small
files and have high bandwith should notice a speedup in removing PARQ entries.
This is to avoid that small chunks who get downloaded from another slot block
another upload because it still has to timeout.

PARQ now internally also detects max uploads per ip.

------------------------------------------------------------------------
r3351 | nonamer | 2003-06-11 14:29:03 -0400 (Wed, 11 Jun 2003) | 4 lines

This should speed up the using of uploads slots even more. The disadvantage is
that not all queues get exactly the same amount of upload slots. But they are
all garanteed to get at least 1 (if they weren't empty)

------------------------------------------------------------------------
r3350 | rmanfredi | 2003-06-10 13:53:13 -0400 (Tue, 10 Jun 2003) | 2 lines

Don't send out an invalid IP/port in the X-Node header.

------------------------------------------------------------------------
r3349 | rmanfredi | 2003-06-09 17:07:57 -0400 (Mon, 09 Jun 2003) | 2 lines

Version of 09/06/2003.

------------------------------------------------------------------------
r3348 | rmanfredi | 2003-06-09 17:05:46 -0400 (Mon, 09 Jun 2003) | 2 lines

Added some extra assertions in PARQ, little cleanup.

------------------------------------------------------------------------
r3347 | rmanfredi | 2003-06-09 17:01:58 -0400 (Mon, 09 Jun 2003) | 3 lines

Fixed English: SHRINKED -> SHRUNK.
Avoid endless request/sinking loops: only allow one sinking per session.

------------------------------------------------------------------------
r3346 | nonamer | 2003-06-09 13:37:28 -0400 (Mon, 09 Jun 2003) | 2 lines

Fixed: Slots by IP didn't work yet

------------------------------------------------------------------------
r3345 | nonamer | 2003-06-09 13:11:09 -0400 (Mon, 09 Jun 2003) | 3 lines

This should fix the following assertion:
line 1359:	g_assert(parq_ul->by_ip->ip == parq_ul->remote_ip);

------------------------------------------------------------------------
r3344 | nonamer | 2003-06-09 12:24:38 -0400 (Mon, 09 Jun 2003) | 4 lines

Also preference by IP and not just by filename only. If client has 2 files
A (pos 1) and B (pos 66) and it is requesting file B it will still be allowed
to upload. file A will have to wait for file B though.

------------------------------------------------------------------------
r3343 | rmanfredi | 2003-06-09 07:19:07 -0400 (Mon, 09 Jun 2003) | 2 lines

Doubled max PARQ retry time, and lowered retry frequency for queued entries.

------------------------------------------------------------------------
r3342 | nonamer | 2003-06-09 06:11:19 -0400 (Mon, 09 Jun 2003) | 2 lines

Changelog for 9/06/2003

------------------------------------------------------------------------
r3341 | nonamer | 2003-06-09 06:08:32 -0400 (Mon, 09 Jun 2003) | 2 lines

All warnings should now be prefixed by either [PARQ DL] or [PARQ UL]

------------------------------------------------------------------------
r3340 | nonamer | 2003-06-09 06:05:55 -0400 (Mon, 09 Jun 2003) | 2 lines

Initial release. About 50% is translated.

------------------------------------------------------------------------
r3339 | nonamer | 2003-06-09 06:03:42 -0400 (Mon, 09 Jun 2003) | 6 lines

Previous parq commit contained a bug regarding looking up an IP in parq. This
should be fixed now.

PARQ IP adresses are now stored in their dotted format. Older formats are
still imported

------------------------------------------------------------------------
r3338 | rmanfredi | 2003-06-09 05:28:58 -0400 (Mon, 09 Jun 2003) | 2 lines

Update from Murphy.

------------------------------------------------------------------------
r3337 | rmanfredi | 2003-06-09 05:21:15 -0400 (Mon, 09 Jun 2003) | 2 lines

Raised default amount of downloads from 10 to 50.

------------------------------------------------------------------------
r3336 | rmanfredi | 2003-06-08 18:48:54 -0400 (Sun, 08 Jun 2003) | 2 lines

Moved a declaration to the beginning of the block.  This is not C++...

------------------------------------------------------------------------
r3335 | nonamer | 2003-06-08 17:49:14 -0400 (Sun, 08 Jun 2003) | 2 lines

My changelog for 8/06/2003

------------------------------------------------------------------------
r3334 | nonamer | 2003-06-08 17:42:57 -0400 (Sun, 08 Jun 2003) | 3 lines

Prefered connections when in ultrapeer mode should be working again
(to other utlrapeers and for incoming leaf connections)

------------------------------------------------------------------------
r3333 | nonamer | 2003-06-08 16:35:19 -0400 (Sun, 08 Jun 2003) | 8 lines

Removed some assertion related with parq_max_upload_size. This could give
invalid assertions when the max number of uploads got decreased and gtk-
gnutella got restarted

PARQ now keeps track of uploads per ip. This should avoid 2 queus to wait
for each other and thus blocking all uploads. Also this can be used later
to update all statusses of one IP quickly (ie, for sending QUEUE etc)

------------------------------------------------------------------------
r3332 | rmanfredi | 2003-06-07 06:03:04 -0400 (Sat, 07 Jun 2003) | 2 lines

Fixed stupid memory leak: pmsg_free() called in a debug block.

------------------------------------------------------------------------
r3331 | rmanfredi | 2003-06-07 04:45:01 -0400 (Sat, 07 Jun 2003) | 2 lines

Decode base32 case-insensitively.

------------------------------------------------------------------------
r3330 | rmanfredi | 2003-06-05 19:20:06 -0400 (Thu, 05 Jun 2003) | 2 lines

Version of 05/06/2003.

------------------------------------------------------------------------
r3329 | rmanfredi | 2003-06-05 19:19:49 -0400 (Thu, 05 Jun 2003) | 2 lines

Added Angelo Cano.

------------------------------------------------------------------------
r3328 | rmanfredi | 2003-06-05 18:47:56 -0400 (Thu, 05 Jun 2003) | 2 lines

Finished application of symlink patch from Angelo Cano.

------------------------------------------------------------------------
r3327 | rmanfredi | 2003-06-05 18:38:43 -0400 (Thu, 05 Jun 2003) | 3 lines

Don't parse incoming X-Node headers for PARQ if requestor did not advertise
support for PARQ, since X-Node is not necessarily PARQ-specific.

------------------------------------------------------------------------
r3326 | rmanfredi | 2003-06-03 15:33:05 -0400 (Tue, 03 Jun 2003) | 3 lines

Don't store downloads to disk every time we abort/stop one.  This should
improve speed noticeably when aborting by SHA1 or by server!

------------------------------------------------------------------------
r3325 | wyldfire | 2003-06-03 04:09:57 -0400 (Tue, 03 Jun 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3324 | rmanfredi | 2003-06-03 02:55:44 -0400 (Tue, 03 Jun 2003) | 4 lines

Append a trailing '-' in the download range size indication when the server
is answering us with less data than we requested.  The amount shown then
reflects what the server is giving.

------------------------------------------------------------------------
r3323 | wyldfire | 2003-06-02 16:12:00 -0400 (Mon, 02 Jun 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3322 | nonamer | 2003-06-02 15:34:55 -0400 (Mon, 02 Jun 2003) | 3 lines

Fixed (again)
** ERROR **: file parq.c: line 1121 (parq_upload_free): assertion failed: (parq_ul->ip_and_name != NULL)

------------------------------------------------------------------------
r3321 | wyldfire | 2003-06-02 15:25:22 -0400 (Mon, 02 Jun 2003) | 3 lines


Applied symlink patch from Angelo Cano

------------------------------------------------------------------------
r3320 | rmanfredi | 2003-06-02 02:22:07 -0400 (Mon, 02 Jun 2003) | 2 lines

Version of 01/06/2003.

------------------------------------------------------------------------
r3319 | rmanfredi | 2003-06-02 02:21:13 -0400 (Mon, 02 Jun 2003) | 2 lines

Removed spurious trailing "\n" in warnings.

------------------------------------------------------------------------
r3318 | nonamer | 2003-06-02 01:31:22 -0400 (Mon, 02 Jun 2003) | 7 lines

Fixed an assertion failure:
file parq.c: line 691 (parq_dl_reparent_id): assertion
failed: (parq_dl->id != NULL)

Not all queued (parq) downloads have an ID, only if the remote host supplied
one

------------------------------------------------------------------------
r3317 | rmanfredi | 2003-06-01 12:54:35 -0400 (Sun, 01 Jun 2003) | 3 lines

Fixed download_clone() to remap the parq ID to the children download.
Make sure to revitalize a stopped download upon receiving QUEUE.

------------------------------------------------------------------------
r3316 | nonamer | 2003-06-01 10:13:01 -0400 (Sun, 01 Jun 2003) | 2 lines

My changelog for 01/06/2003

------------------------------------------------------------------------
r3315 | nonamer | 2003-06-01 10:11:47 -0400 (Sun, 01 Jun 2003) | 2 lines

Fixed a spelling error

------------------------------------------------------------------------
r3314 | nonamer | 2003-06-01 09:51:03 -0400 (Sun, 01 Jun 2003) | 4 lines

When a client did a HEAD request with a Keep alived connection the client
coulddownload multiple files at once, ignoring the max uploads per ip setting.
This should not be possible anymore

------------------------------------------------------------------------
r3313 | nonamer | 2003-06-01 08:52:51 -0400 (Sun, 01 Jun 2003) | 4 lines

This should fix the following bug:
file parq.c: line 1085 (parq_upload_free): assertion failed: (parq_ul->ip_and_name != NULL)
(reported at 30-05-2003)

------------------------------------------------------------------------
r3312 | rmanfredi | 2003-06-01 06:49:32 -0400 (Sun, 01 Jun 2003) | 2 lines

Version of 29/05/2003.

------------------------------------------------------------------------
r3311 | nonamer | 2003-05-30 11:57:54 -0400 (Fri, 30 May 2003) | 2 lines

Fixed an error which causes the previous fix not to work

------------------------------------------------------------------------
r3310 | nonamer | 2003-05-30 09:38:37 -0400 (Fri, 30 May 2003) | 4 lines

This should avoid aa broken client to keep an upload slot by
disconnecting over and over again.
1 Disconnection every 10 minutes is allowed.

------------------------------------------------------------------------
r3309 | rmanfredi | 2003-05-29 01:47:11 -0400 (Thu, 29 May 2003) | 2 lines

Reset counter of QUEUE requests sent when remote servent replies to one.

------------------------------------------------------------------------
r3308 | rmanfredi | 2003-05-29 01:30:33 -0400 (Thu, 29 May 2003) | 2 lines

Top makefile did not install "hostiles.txt".

------------------------------------------------------------------------
r3307 | nonamer | 2003-05-27 14:39:44 -0400 (Tue, 27 May 2003) | 3 lines

Fixed an assertion in parq when on an incoming QUEUE while the download
was in the to removed list.

------------------------------------------------------------------------
r3304 | rmanfredi | 2003-05-25 09:29:09 -0400 (Sun, 25 May 2003) | 2 lines

Marking CVS unstable again.

------------------------------------------------------------------------
r3302 | rmanfredi | 2003-05-25 08:44:02 -0400 (Sun, 25 May 2003) | 2 lines

Forgot to remove debian/substvars.

------------------------------------------------------------------------
r3301 | rmanfredi | 2003-05-25 08:39:43 -0400 (Sun, 25 May 2003) | 2 lines

Release 0.92 candidate.

------------------------------------------------------------------------
r3300 | rmanfredi | 2003-05-25 08:34:08 -0400 (Sun, 25 May 2003) | 2 lines

Added definition for 203, 413, 414 and 505.

------------------------------------------------------------------------
r3299 | rmanfredi | 2003-05-25 08:33:05 -0400 (Sun, 25 May 2003) | 2 lines

Added paragraph on GTKG's use of the Hops Flow message.

------------------------------------------------------------------------
r3298 | rmanfredi | 2003-05-25 08:32:15 -0400 (Sun, 25 May 2003) | 2 lines

Added hostiles.txt.

------------------------------------------------------------------------
r3297 | rmanfredi | 2003-05-25 08:29:04 -0400 (Sun, 25 May 2003) | 2 lines

Added Rafael R. Reilova and Stephane Corbe.

------------------------------------------------------------------------
r3296 | rmanfredi | 2003-05-25 07:21:50 -0400 (Sun, 25 May 2003) | 2 lines

Added new set of keys for 0.92c.

------------------------------------------------------------------------
r3295 | rmanfredi | 2003-05-25 06:02:50 -0400 (Sun, 25 May 2003) | 2 lines

Display lifecount of the fileinfo, not its refcount [From Hans de Graaff].

------------------------------------------------------------------------
r3294 | nonamer | 2003-05-25 05:57:56 -0400 (Sun, 25 May 2003) | 3 lines

Prefer compressed connections in leaf mode is honoured again (even though
we are making outgoing connections)

------------------------------------------------------------------------
r3293 | rmanfredi | 2003-05-25 05:19:21 -0400 (Sun, 25 May 2003) | 4 lines

Mentionned in GUI hints that number of PARQ queue is governed by the
number of upload slots, and that it should be at least set to 2.
Tell them that when host runs NTP, the computed clock skew is ignored.

------------------------------------------------------------------------
r3292 | rmanfredi | 2003-05-25 05:17:18 -0400 (Sun, 25 May 2003) | 2 lines

Now trace vendor string in the "Cancelling upload" messages.

------------------------------------------------------------------------
r3291 | rmanfredi | 2003-05-25 05:13:33 -0400 (Sun, 25 May 2003) | 2 lines

Adjusted logging levels.

------------------------------------------------------------------------
r3290 | rmanfredi | 2003-05-24 16:41:58 -0400 (Sat, 24 May 2003) | 2 lines

Version of 24/05/2003.

------------------------------------------------------------------------
r3289 | rmanfredi | 2003-05-24 16:07:37 -0400 (Sat, 24 May 2003) | 2 lines

Include vendor string in PARQ warning messages about early retries.

------------------------------------------------------------------------
r3288 | rmanfredi | 2003-05-24 14:36:12 -0400 (Sat, 24 May 2003) | 3 lines

Try to report a more specific message to servents mis-handling Retry-After
whilst passively queued.

------------------------------------------------------------------------
r3287 | rmanfredi | 2003-05-24 14:34:15 -0400 (Sat, 24 May 2003) | 2 lines

Random cleanup.

------------------------------------------------------------------------
r3286 | rmanfredi | 2003-05-24 14:34:05 -0400 (Sat, 24 May 2003) | 2 lines

Added some assertions regarding fileinfo lifecount.

------------------------------------------------------------------------
r3285 | nonamer | 2003-05-24 12:59:14 -0400 (Sat, 24 May 2003) | 2 lines

My changelog for 24/5/2003

------------------------------------------------------------------------
r3284 | nonamer | 2003-05-24 10:39:21 -0400 (Sat, 24 May 2003) | 3 lines

Avoid abusing PARQ: It was possible to reuse an ID for an allready finished
upload for another (new) upload.

------------------------------------------------------------------------
r3283 | nonamer | 2003-05-24 10:01:14 -0400 (Sat, 24 May 2003) | 2 lines

Fixed: Eta kept increasing even for the first download.

------------------------------------------------------------------------
r3282 | rmanfredi | 2003-05-24 09:42:13 -0400 (Sat, 24 May 2003) | 3 lines

Order of parameters was not correct when calling search_gui_new_search_full(),
and forgot to give SEARCH_ENABLED.

------------------------------------------------------------------------
r3281 | nonamer | 2003-05-24 09:40:15 -0400 (Sat, 24 May 2003) | 2 lines

New eta calculation

------------------------------------------------------------------------
r3280 | nonamer | 2003-05-24 09:38:20 -0400 (Sat, 24 May 2003) | 4 lines

Gui now displays "minimum retry delay not honoured" instead of
"Retry-After not honoured". Queue: 0.1 use the minRetry value instead
of the Retry-After header.

------------------------------------------------------------------------
r3279 | rmanfredi | 2003-05-24 09:09:05 -0400 (Sat, 24 May 2003) | 2 lines

Cleaned up patch from Stephane Corbe.

------------------------------------------------------------------------
r3278 | rmanfredi | 2003-05-24 08:52:58 -0400 (Sat, 24 May 2003) | 2 lines

Cleaned up patch from Stephane Corbe.

------------------------------------------------------------------------
r3277 | rmanfredi | 2003-05-24 07:33:50 -0400 (Sat, 24 May 2003) | 2 lines

Increased max HTTP header size on reception to 16K.

------------------------------------------------------------------------
r3276 | rmanfredi | 2003-05-24 07:33:06 -0400 (Sat, 24 May 2003) | 3 lines

Remember disabled searches when persisting (fixes bug #625314) [Patch
#739466 from Stephane Corbe].

------------------------------------------------------------------------
r3275 | rmanfredi | 2003-05-24 06:44:34 -0400 (Sat, 24 May 2003) | 4 lines

When ignoring a download due to an hostile IP address, make sure we don't
clear all the downloads for that file: it's just the server that we ignore,
not the download entry.

------------------------------------------------------------------------
r3274 | rmanfredi | 2003-05-24 05:28:44 -0400 (Sat, 24 May 2003) | 3 lines

Don't store download queue at each download inserted [Patch #699251 from
Paul J. Mantyla].

------------------------------------------------------------------------
r3273 | rmanfredi | 2003-05-24 05:03:10 -0400 (Sat, 24 May 2003) | 2 lines

Also package the pixmaps in the RPM [Patch from Sam Varshavchik].

------------------------------------------------------------------------
r3272 | rmanfredi | 2003-05-23 18:23:30 -0400 (Fri, 23 May 2003) | 2 lines

Version of 23/05/2003.

------------------------------------------------------------------------
r3271 | rmanfredi | 2003-05-23 18:21:58 -0400 (Fri, 23 May 2003) | 3 lines

Fixed punishing of hosts that re-request too early without paying attention
to the Retry-After header.

------------------------------------------------------------------------
r3270 | nonamer | 2003-05-22 16:04:11 -0400 (Thu, 22 May 2003) | 2 lines

My changelog for 22/5/03

------------------------------------------------------------------------
r3269 | nonamer | 2003-05-22 16:02:43 -0400 (Thu, 22 May 2003) | 3 lines

The PARQ position for a download which got disconnected is saved. This way
a client can reclaim its position (or even upload slot).

------------------------------------------------------------------------
r3268 | nonamer | 2003-05-22 15:24:21 -0400 (Thu, 22 May 2003) | 2 lines

Upload pane now shows the queue no in which the upload got queued

------------------------------------------------------------------------
r3267 | nonamer | 2003-05-22 14:26:07 -0400 (Thu, 22 May 2003) | 2 lines

Dynamic upload slots should also honour PARQ now.

------------------------------------------------------------------------
r3266 | nonamer | 2003-05-22 13:18:43 -0400 (Thu, 22 May 2003) | 3 lines

An upload shouldn't get have the state Waiting infinite anymore when
one of the queues is empty

------------------------------------------------------------------------
r3265 | nonamer | 2003-05-20 16:04:04 -0400 (Tue, 20 May 2003) | 2 lines

My changelog for 20/5/'03

------------------------------------------------------------------------
r3264 | nonamer | 2003-05-20 16:02:40 -0400 (Tue, 20 May 2003) | 2 lines

Layout (80 chars max in width)

------------------------------------------------------------------------
r3263 | nonamer | 2003-05-20 15:02:22 -0400 (Tue, 20 May 2003) | 8 lines

Ban 'timeout' is now 10 minutes. So if a client rerequest twice within 10
minutes without honouring the Retry-After header it is kicked out of the
PARQ queue.

An upload can't get activly queued multiple times anymore.
A actively queued upload which got disconnected is now nicely removed. (And
not after the retry-after time has expired).

------------------------------------------------------------------------
r3261 | nonamer | 2003-05-19 16:10:42 -0400 (Mon, 19 May 2003) | 2 lines

My changelog for 19/5/2003

------------------------------------------------------------------------
r3260 | nonamer | 2003-05-19 16:09:49 -0400 (Mon, 19 May 2003) | 3 lines

If a client does not obey the Retry-After header. It will get removed from
the queue (if this happens twice within the retry-after period)

------------------------------------------------------------------------
r3259 | nonamer | 2003-05-19 13:38:54 -0400 (Mon, 19 May 2003) | 3 lines

Fixed an PARQ assertion when dynamic slot allocation is enabled and parq
wants to send the ID to the client

------------------------------------------------------------------------
r3258 | rmanfredi | 2003-05-19 02:13:12 -0400 (Mon, 19 May 2003) | 2 lines

Make sure the message queue kept track of the right amount of items.

------------------------------------------------------------------------
r3257 | rmanfredi | 2003-05-19 02:11:50 -0400 (Mon, 19 May 2003) | 4 lines

Forgot a "continue" statement in download_remove_file().
Likewise, on a file info change, don't requeue actively queued downloads
or connecting ones.

------------------------------------------------------------------------
r3256 | cbiere | 2003-05-18 20:08:14 -0400 (Sun, 18 May 2003) | 2 lines

Added `const' qualifier to prop_type_str.

------------------------------------------------------------------------
r3255 | rmanfredi | 2003-05-18 18:03:29 -0400 (Sun, 18 May 2003) | 3 lines

Made sure tagging used for marking used blocks is odd, so that it is
not confused with a valid pointer.

------------------------------------------------------------------------
r3254 | rmanfredi | 2003-05-18 18:02:48 -0400 (Sun, 18 May 2003) | 2 lines

Factorized cleanup code in mq_putq().

------------------------------------------------------------------------
r3253 | rmanfredi | 2003-05-18 17:51:34 -0400 (Sun, 18 May 2003) | 2 lines

Version of 18/05/2003.

------------------------------------------------------------------------
r3252 | rmanfredi | 2003-05-18 17:48:50 -0400 (Sun, 18 May 2003) | 2 lines

Added extra pre-condition to fi_purge().

------------------------------------------------------------------------
r3251 | rmanfredi | 2003-05-18 17:48:12 -0400 (Sun, 18 May 2003) | 2 lines

Don't send the PARQ ID on 2xx for HEAD replies and follow-up requests.

------------------------------------------------------------------------
r3250 | rmanfredi | 2003-05-18 17:47:37 -0400 (Sun, 18 May 2003) | 2 lines

Changed status type in uploads to upload_stage_t.

------------------------------------------------------------------------
r3249 | cbiere | 2003-05-18 15:37:21 -0400 (Sun, 18 May 2003) | 2 lines

prop_parse_guint32_vector(): Use gm_atoul() instead of atol(); fixes (also) the "huge clock skew" problem.

------------------------------------------------------------------------
r3248 | cbiere | 2003-05-18 15:32:24 -0400 (Sun, 18 May 2003) | 2 lines

Added gm_atoul() as replacement for atol(), atoi(), strtol(), strtoul().

------------------------------------------------------------------------
r3247 | rmanfredi | 2003-05-18 05:42:32 -0400 (Sun, 18 May 2003) | 4 lines

Reset some fields to NULL in download_remove().
Must ignore downloads marked as GTA_DL_REMOVED when iterating on the
download list.

------------------------------------------------------------------------
r3246 | rmanfredi | 2003-05-18 05:42:07 -0400 (Sun, 18 May 2003) | 3 lines

Don't call download_free_removed() from fi_purge().  That call must be
done asynchronously.

------------------------------------------------------------------------
r3245 | rmanfredi | 2003-05-18 05:37:35 -0400 (Sun, 18 May 2003) | 3 lines

Added the @INTLLIBS@ macro in the linking flags for I18N
[From Christian Biere].

------------------------------------------------------------------------
r3244 | cbiere | 2003-05-17 22:30:35 -0400 (Sat, 17 May 2003) | 2 lines

Replaced the defines for GTA_DL_.* by enum download_status_t (for better readability in the debugger).

------------------------------------------------------------------------
r3243 | cbiere | 2003-05-17 22:27:09 -0400 (Sat, 17 May 2003) | 2 lines

Replaced the "raw" guint32 status by upload_stage_t status.

------------------------------------------------------------------------
r3242 | cbiere | 2003-05-17 22:24:03 -0400 (Sat, 17 May 2003) | 2 lines

Depend on USE_SOURCE_DIR_AS_FALLBACK instead of PACKAGE_SOURCE_DIR because the latter is always defined while the first is undefined for releases.

------------------------------------------------------------------------
r3241 | rmanfredi | 2003-05-17 18:52:40 -0400 (Sat, 17 May 2003) | 2 lines

Fixed assert failure in ban_force() when only 1 fd is used for banning.

------------------------------------------------------------------------
r3240 | rmanfredi | 2003-05-17 18:49:45 -0400 (Sat, 17 May 2003) | 2 lines

Remember when a PARQ id was sent, to avoid sending one back on 2xx replies.

------------------------------------------------------------------------
r3239 | rmanfredi | 2003-05-17 16:13:50 -0400 (Sat, 17 May 2003) | 3 lines

Call parq_upload_add_header_id() before upload_http_status() to avoid
lacking room in the headers if alternate locations are present.

------------------------------------------------------------------------
r3238 | rmanfredi | 2003-05-17 16:03:13 -0400 (Sat, 17 May 2003) | 2 lines

Version of 17/05/2003.

------------------------------------------------------------------------
r3237 | rmanfredi | 2003-05-17 16:01:23 -0400 (Sat, 17 May 2003) | 2 lines

Added call to parq_download_parse_queue_status() even on 2xx replies.

------------------------------------------------------------------------
r3236 | rmanfredi | 2003-05-17 15:24:09 -0400 (Sat, 17 May 2003) | 2 lines

Renamed upload_push_conf() as upload_connect_conf().

------------------------------------------------------------------------
r3235 | rmanfredi | 2003-05-17 15:22:59 -0400 (Sat, 17 May 2003) | 4 lines

Always call parq_upload_remove() from upload_remove().
Plugged call to parq_upload_add_header_id() to send queue ID on 2xx replies.
Renamed upload_push_conf() as upload_connect_conf().

------------------------------------------------------------------------
r3234 | rmanfredi | 2003-05-17 15:21:05 -0400 (Sat, 17 May 2003) | 2 lines

Added parq_upload_add_header_id() to add an X-Queued header on 2xx replies.

------------------------------------------------------------------------
r3233 | rmanfredi | 2003-05-17 15:18:47 -0400 (Sat, 17 May 2003) | 5 lines

Flag when we send a QUEUE, and determine whether they refused our callback.
After they refused it MAX_QUEUE_REFUSED times, we give up and never send
them a QUEUE during this session.
Added parq_upload_add_header_id() to add an X-Queued header on 2xx replies.

------------------------------------------------------------------------
r3232 | rmanfredi | 2003-05-17 14:27:02 -0400 (Sat, 17 May 2003) | 2 lines

Increased period for alive pings between ultrapeer and leaf to 120 seconds.

------------------------------------------------------------------------
r3231 | cbiere | 2003-05-17 14:24:41 -0400 (Sat, 17 May 2003) | 2 lines

Suppress warnings about read/write errors when quitting.

------------------------------------------------------------------------
r3230 | rmanfredi | 2003-05-17 14:24:30 -0400 (Sat, 17 May 2003) | 4 lines

Reverted to using casts in clock_update().
Made clock_update() ignore the new timestamp if delta is within precision
(making the ignore interval 2*precision instead of just precision).

------------------------------------------------------------------------
r3229 | cbiere | 2003-05-17 14:21:44 -0400 (Sat, 17 May 2003) | 2 lines

[GTK2] Enabled checkbutton_host_runs_ftp.

------------------------------------------------------------------------
r3228 | rmanfredi | 2003-05-17 13:02:56 -0400 (Sat, 17 May 2003) | 2 lines

Use g_slist_copy() for cloning the lists.

------------------------------------------------------------------------
r3227 | rmanfredi | 2003-05-17 12:52:28 -0400 (Sat, 17 May 2003) | 2 lines

Clone lists before iterating in bg_close().

------------------------------------------------------------------------
r3226 | rmanfredi | 2003-05-17 08:23:27 -0400 (Sat, 17 May 2003) | 2 lines

Renamed download_free() into download_remove().

------------------------------------------------------------------------
r3225 | rmanfredi | 2003-05-17 08:22:57 -0400 (Sat, 17 May 2003) | 6 lines

Don't requeue actively queued downloads or connecting ones when the
underlying file is removed.
When a download has PARQ information, don't stop it when a write to the
remote host fails, but requeue it instead.  Those downloads have a chance
of being resumed.

------------------------------------------------------------------------
r3224 | rmanfredi | 2003-05-17 08:19:33 -0400 (Sat, 17 May 2003) | 2 lines

Doubled half period for remote flow control computations to 5 minutes.

------------------------------------------------------------------------
r3223 | rmanfredi | 2003-05-17 04:27:24 -0400 (Sat, 17 May 2003) | 2 lines

Version of 16/05/2003.

------------------------------------------------------------------------
r3222 | rmanfredi | 2003-05-17 04:25:48 -0400 (Sat, 17 May 2003) | 2 lines

Removed extra spaces in blank lines.

------------------------------------------------------------------------
r3221 | rmanfredi | 2003-05-17 04:25:03 -0400 (Sat, 17 May 2003) | 2 lines

Removed trailing "\n" in warning.

------------------------------------------------------------------------
r3220 | rmanfredi | 2003-05-17 04:23:09 -0400 (Sat, 17 May 2003) | 3 lines

Must call parq_init() before retrieving the downloads now that PARQ IDs
are stored.

------------------------------------------------------------------------
r3219 | rmanfredi | 2003-05-17 04:21:21 -0400 (Sat, 17 May 2003) | 2 lines

Ignore SIGQUIT in the adns process, so that CTRL-\ makes GTKG dump a core.

------------------------------------------------------------------------
r3218 | rmanfredi | 2003-05-17 04:20:31 -0400 (Sat, 17 May 2003) | 3 lines

GTKG could loop in malloc(): block was freed twice in the case a config
file was retrieved from the .orig version.

------------------------------------------------------------------------
r3217 | rmanfredi | 2003-05-16 17:41:20 -0400 (Fri, 16 May 2003) | 3 lines

Avoid issuing a connection to a node we're already connected to
[From Rafael R. Reilova].

------------------------------------------------------------------------
r3216 | rmanfredi | 2003-05-16 17:39:05 -0400 (Fri, 16 May 2003) | 3 lines

Limit clock skew to one day maximum: avoid badly synchronized remote clocks
to let the skew deviate out of proportions.

------------------------------------------------------------------------
r3215 | rmanfredi | 2003-05-15 19:08:02 -0400 (Thu, 15 May 2003) | 2 lines

Call parq_dl_remove() in download_close().

------------------------------------------------------------------------
r3214 | rmanfredi | 2003-05-15 19:07:28 -0400 (Thu, 15 May 2003) | 2 lines

Typo fix.

------------------------------------------------------------------------
r3213 | rmanfredi | 2003-05-15 18:58:36 -0400 (Thu, 15 May 2003) | 2 lines

Don't call file_info_update(DL_CHUNK_BUSY) for a zero-width chunk.

------------------------------------------------------------------------
r3212 | rmanfredi | 2003-05-15 18:44:10 -0400 (Thu, 15 May 2003) | 2 lines

Avoid memory leak when there is a PARQ id and download is ignored.

------------------------------------------------------------------------
r3211 | rmanfredi | 2003-05-15 18:28:15 -0400 (Thu, 15 May 2003) | 2 lines

Version of 15/05/2003.

------------------------------------------------------------------------
r3210 | rmanfredi | 2003-05-15 18:25:24 -0400 (Thu, 15 May 2003) | 2 lines

Forgot to strip the trailing "\n" when restoring PARQ ids.

------------------------------------------------------------------------
r3209 | rmanfredi | 2003-05-15 18:22:54 -0400 (Thu, 15 May 2003) | 2 lines

Open hostiles and whitelist with new file_config_open_read_norename().

------------------------------------------------------------------------
r3208 | rmanfredi | 2003-05-15 18:21:16 -0400 (Thu, 15 May 2003) | 2 lines

Fixed file_info_update() so that it accepts DL_CHUNK_EMPTY on *whole* ranges.

------------------------------------------------------------------------
r3207 | rmanfredi | 2003-05-15 18:18:21 -0400 (Thu, 15 May 2003) | 5 lines

New file_config_open_read_norename() to open config files that are never
written, and which therefore don't need to be renamed as ".orig".
Fixed file_config_open_read() so that it displays "instead" when we open
the ".orig" version.

------------------------------------------------------------------------
r3206 | rmanfredi | 2003-05-15 18:16:51 -0400 (Thu, 15 May 2003) | 5 lines

Don't call file_info_update(DL_CHUNK_EMPTY) to clear the tail of a range.
The routine is not prepared to handle that case.  As a workaround,
call file_info_clear_download() first, then file_info_update(DL_CHUNK_BUSY)
on the complementary part.

------------------------------------------------------------------------
r3205 | rmanfredi | 2003-05-15 17:44:56 -0400 (Thu, 15 May 2003) | 5 lines

Fixed handling of QUEUE callbacks: was not parsing the ID correctly.
When looking up a PARQ download by ID, if we don't find one for the host,
try to pick any non-PARQ waiting download for that host instead.
PARQ ids are now random GUIDs, tagged for GTKG.

------------------------------------------------------------------------
r3204 | rmanfredi | 2003-05-15 17:40:47 -0400 (Thu, 15 May 2003) | 3 lines

Reject download when range end is greater than what we asked for.
Fixed download_retrieve() for RECLINES=4.

------------------------------------------------------------------------
r3203 | rmanfredi | 2003-05-15 17:10:41 -0400 (Thu, 15 May 2003) | 2 lines

Forgot to assign d->queue_status when creating PARQ structure.

------------------------------------------------------------------------
r3202 | rmanfredi | 2003-05-15 17:02:51 -0400 (Thu, 15 May 2003) | 2 lines

Added download_find_waiting_unparq() to elect replacing download on QUEUE.

------------------------------------------------------------------------
r3201 | rmanfredi | 2003-05-15 17:01:26 -0400 (Thu, 15 May 2003) | 4 lines

Allow server to give a smaller range than the one we're requesting.
Persist download PARQ ids.
Added download_find_waiting_unparq() to elect replacing download on QUEUE.

------------------------------------------------------------------------
r3200 | nonamer | 2003-05-15 15:42:14 -0400 (Thu, 15 May 2003) | 2 lines

My changelog for 15/5/'03

------------------------------------------------------------------------
r3199 | nonamer | 2003-05-15 15:39:33 -0400 (Thu, 15 May 2003) | 4 lines

When queued with PARQ, only display Waiting... status when there are
upload slots available. Queued at position 1 does not always mean
there is an upload slot available.

------------------------------------------------------------------------
r3198 | nonamer | 2003-05-15 14:11:37 -0400 (Thu, 15 May 2003) | 2 lines

Send a QUEUE command when an upload slot came available

------------------------------------------------------------------------
r3197 | nonamer | 2003-05-14 16:28:35 -0400 (Wed, 14 May 2003) | 8 lines

Expiration time is now also saved during shutdown and will be reloaded
on startup. This will speed up marking dead upload as dead, and thus
uploads should start sooner.

In parq_upload_timer the by_rel_pos linked list was traversed. But the list
was modified in the same time. This is now avoided as this could cause an
assertion failure

------------------------------------------------------------------------
r3196 | rmanfredi | 2003-05-13 18:17:09 -0400 (Tue, 13 May 2003) | 2 lines

Version of 13/05/2003.

------------------------------------------------------------------------
r3195 | rmanfredi | 2003-05-13 18:08:16 -0400 (Tue, 13 May 2003) | 2 lines

Fixed memory leak when query is ignored.

------------------------------------------------------------------------
r3194 | rmanfredi | 2003-05-13 17:56:12 -0400 (Tue, 13 May 2003) | 3 lines

Forgot to make a variable "static", causing endless promoting and demoting
to/from ultra mode.

------------------------------------------------------------------------
r3193 | rmanfredi | 2003-05-13 17:52:24 -0400 (Tue, 13 May 2003) | 2 lines

In the download pane, display ETA for queued entries in a readable way.

------------------------------------------------------------------------
r3192 | rmanfredi | 2003-05-13 17:49:57 -0400 (Tue, 13 May 2003) | 2 lines

Avoid casting to (gint32), and use the "* (gint32*)" dereferencing trick.

------------------------------------------------------------------------
r3191 | rmanfredi | 2003-05-12 17:29:31 -0400 (Mon, 12 May 2003) | 2 lines

Added missing RCSID.

------------------------------------------------------------------------
r3190 | rmanfredi | 2003-05-12 17:28:48 -0400 (Mon, 12 May 2003) | 3 lines

Stopped removing half the slot contribution to writing b/w schedulers for
all the slots that don't trigger.

------------------------------------------------------------------------
r3189 | nonamer | 2003-05-12 15:57:05 -0400 (Mon, 12 May 2003) | 2 lines

My small changelog for 12/5/03

------------------------------------------------------------------------
r3188 | nonamer | 2003-05-12 15:55:39 -0400 (Mon, 12 May 2003) | 2 lines

Fixed assertion in another way by using the prefered parq_upload_update_ip_and_name function

------------------------------------------------------------------------
r3187 | nonamer | 2003-05-12 14:20:27 -0400 (Mon, 12 May 2003) | 3 lines

Fixes an assertion when connecting back to the X-Node ip while the IP the
client connects from differs.

------------------------------------------------------------------------
r3186 | cbiere | 2003-05-12 14:10:06 -0400 (Mon, 12 May 2003) | 2 lines

Fixed misplaced comma in initialization of msg_drop_str[].

------------------------------------------------------------------------
r3185 | cbiere | 2003-05-12 13:05:15 -0400 (Mon, 12 May 2003) | 4 lines

[GTK2] Added label_clock_skew to Config->Network.
[GTK2] Added checkbutton_host_runs_ntp to Config->Network.
Moved list of contributors to main_gui.c

------------------------------------------------------------------------
r3184 | cbiere | 2003-05-12 12:59:36 -0400 (Mon, 12 May 2003) | 2 lines

Added convert_to_utf8().

------------------------------------------------------------------------
r3183 | cbiere | 2003-05-12 12:56:51 -0400 (Mon, 12 May 2003) | 2 lines

Moved list of contributors to main_gui.c.

------------------------------------------------------------------------
r3182 | cbiere | 2003-05-12 10:44:21 -0400 (Mon, 12 May 2003) | 2 lines

autoselect_files_helper(): [bugfix] Used wrong variable path instead of p.

------------------------------------------------------------------------
r3181 | cbiere | 2003-05-12 10:38:54 -0400 (Mon, 12 May 2003) | 2 lines

hostiles_check(): [bugfix] Removed local variables which shadowed the global ones.

------------------------------------------------------------------------
r3180 | cbiere | 2003-05-12 10:36:17 -0400 (Mon, 12 May 2003) | 2 lines

file_config_open_read(): Added/corrected warnings.

------------------------------------------------------------------------
r3179 | cbiere | 2003-05-12 10:29:17 -0400 (Mon, 12 May 2003) | 2 lines

Moved uploads_gui_status_str() and upload_should_remove() to uploads_gui_common.c.

------------------------------------------------------------------------
r3178 | cbiere | 2003-05-12 09:28:52 -0400 (Mon, 12 May 2003) | 2 lines

Moved uploads_gui_status_str() and upload_should_remove() to uploads_gui_common.c.

------------------------------------------------------------------------
r3177 | cbiere | 2003-05-12 08:37:46 -0400 (Mon, 12 May 2003) | 2 lines

Moved uploads_gui_status_str() and upload_should_remove() to uploads_gui_common.c.

------------------------------------------------------------------------
r3176 | cbiere | 2003-05-12 08:33:36 -0400 (Mon, 12 May 2003) | 2 lines

expect_http_header(): Replaced guint32 new_status with upload_stage_t new_status.

------------------------------------------------------------------------
r3175 | cbiere | 2003-05-12 08:32:16 -0400 (Mon, 12 May 2003) | 2 lines

Included <sys/types.h> for size_t.

------------------------------------------------------------------------
r3174 | cbiere | 2003-05-12 08:31:30 -0400 (Mon, 12 May 2003) | 2 lines

Removed duplicate inclusion of config.h.

------------------------------------------------------------------------
r3173 | cbiere | 2003-05-12 08:05:56 -0400 (Mon, 12 May 2003) | 3 lines

Use enum upload_stage_t for GTA_UL_.* instead of #define.
gnet_upload_info_t: Replaced `guint32 status' with `upload_stage_t status'.

------------------------------------------------------------------------
r3172 | nonamer | 2003-05-11 12:45:57 -0400 (Sun, 11 May 2003) | 2 lines

Added PARQ changelog for 10/5/03

------------------------------------------------------------------------
r3171 | wyldfire | 2003-05-11 10:05:23 -0400 (Sun, 11 May 2003) | 2 lines

no comment

------------------------------------------------------------------------
r3170 | wyldfire | 2003-05-11 10:04:35 -0400 (Sun, 11 May 2003) | 3 lines


Properly update PROP_CLOCK_SKEW instead of modifying the variable directly.

------------------------------------------------------------------------
r3169 | wyldfire | 2003-05-11 10:03:27 -0400 (Sun, 11 May 2003) | 3 lines


Changed displayed info when failing to load config files.

------------------------------------------------------------------------
r3168 | wyldfire | 2003-05-11 10:02:15 -0400 (Sun, 11 May 2003) | 6 lines


[Gtk1] Added clock skew to gui (calculation seems broken).
[Gtk1] Added PROP_RUNS_NTP to gui.
Show all connection settings on gnet pane in leaf and ultra mode and hide
   ultrapeer setting in legacy mode.

------------------------------------------------------------------------
r3167 | wyldfire | 2003-05-11 10:01:11 -0400 (Sun, 11 May 2003) | 6 lines


[Gtk1] Added clock skew to gui (calculation seems broken).
[Gtk1] Added PROP_RUNS_NTP to gui.
[Gtk1] Reordered connection settings in gnet pane.
[Gtk1] Updated list of contributors in about dialog.

------------------------------------------------------------------------
r3166 | rmanfredi | 2003-05-11 08:11:15 -0400 (Sun, 11 May 2003) | 2 lines

Version of 11/05/2003.

------------------------------------------------------------------------
r3165 | rmanfredi | 2003-05-11 08:02:51 -0400 (Sun, 11 May 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r3164 | rmanfredi | 2003-05-11 06:42:22 -0400 (Sun, 11 May 2003) | 2 lines

Fixed typo causing flooding of QUEUE requests.

------------------------------------------------------------------------
r3163 | rmanfredi | 2003-05-11 06:16:31 -0400 (Sun, 11 May 2003) | 2 lines

Also added legacy parsing for a signed XIP in the saved PARQ file.

------------------------------------------------------------------------
r3162 | rmanfredi | 2003-05-11 06:12:02 -0400 (Sun, 11 May 2003) | 3 lines

Send QUEUE messages spaced by at least 10 minutes for a given entry.
Give dead downloads a chance to come back to life by sending them QUEUE.

------------------------------------------------------------------------
r3161 | rmanfredi | 2003-05-11 05:40:16 -0400 (Sun, 11 May 2003) | 2 lines

Exported download_redirect_to_server() for PARQ.

------------------------------------------------------------------------
r3160 | rmanfredi | 2003-05-11 05:38:03 -0400 (Sun, 11 May 2003) | 6 lines

Updated PARQ to revision 1.0.a of the specs.
Added flags to record whether a QUEUE is pending.
Try sending as many QUEUE messages as possible until we have 100 uploads.
Don't expire a PARQ entry if a QUEUE message is pending but was delayed
because there are too many uploads running.

------------------------------------------------------------------------
r3159 | cbiere | 2003-05-11 00:56:10 -0400 (Sun, 11 May 2003) | 2 lines

Fixed wrong variable name. (Oversight in previous commit.)

------------------------------------------------------------------------
r3158 | cbiere | 2003-05-11 00:40:14 -0400 (Sun, 11 May 2003) | 2 lines

file_info_retrieve(): Make sure `aliases' is cleared and free'd.

------------------------------------------------------------------------
r3157 | cbiere | 2003-05-11 00:38:12 -0400 (Sun, 11 May 2003) | 3 lines

Replaced ->next by g_{s,}list_next().
download_remove_all_named(): Removed unnecessary gm_snprintf().

------------------------------------------------------------------------
r3156 | cbiere | 2003-05-11 00:31:15 -0400 (Sun, 11 May 2003) | 3 lines

Made it compile again.
Minor style fixes.

------------------------------------------------------------------------
r3155 | cbiere | 2003-05-11 00:29:06 -0400 (Sun, 11 May 2003) | 6 lines

Updated search_gui_new_search_full(); sort order isn't persistent for
    GTK2 though.
Integrated changes to search_gui.c.
Replaced printf() by g_warning().
Minor style fixes.

------------------------------------------------------------------------
r3154 | cbiere | 2003-05-11 00:26:53 -0400 (Sun, 11 May 2003) | 3 lines

Updated search_gui_new_search_full(); sort order isn't persistent for
    GTK2 though.

------------------------------------------------------------------------
r3153 | cbiere | 2003-05-11 00:24:39 -0400 (Sun, 11 May 2003) | 6 lines

Fixed auto-selection problem with grouped results; results are now
    expanded if clicked so that the selection isn't lost.
Updated search_gui_new_search_full(); sort order isn't persistent for
    GTK2 though.
Minor style fixes.

------------------------------------------------------------------------
r3152 | cbiere | 2003-05-11 00:18:33 -0400 (Sun, 11 May 2003) | 2 lines

gui_steal_widget_dict_recursive(): Removed unnecessary * after gpointer.

------------------------------------------------------------------------
r3151 | cbiere | 2003-05-10 22:40:10 -0400 (Sat, 10 May 2003) | 2 lines

Removed dead GWCs.

------------------------------------------------------------------------
r3150 | rmanfredi | 2003-05-10 17:48:14 -0400 (Sat, 10 May 2003) | 2 lines

Deleted: this file is automatically generated.

------------------------------------------------------------------------
r3149 | rmanfredi | 2003-05-10 17:42:45 -0400 (Sat, 10 May 2003) | 2 lines

Version of 10/05/2003.

------------------------------------------------------------------------
r3148 | wyldfire | 2003-05-10 15:57:47 -0400 (Sat, 10 May 2003) | 3 lines


Show all connection settings on gnet pane regardless of mode.

------------------------------------------------------------------------
r3147 | rmanfredi | 2003-05-10 13:38:21 -0400 (Sat, 10 May 2003) | 2 lines

Revision 1.0.a: added IP:port to QUEUE, and changed X-Listen-IP to X-Node.

------------------------------------------------------------------------
r3146 | rmanfredi | 2003-05-10 12:23:40 -0400 (Sat, 10 May 2003) | 2 lines

Was not using the forced 95% threshold for flow-control limits in leaf mode.

------------------------------------------------------------------------
r3145 | wyldfire | 2003-05-10 11:55:13 -0400 (Sat, 10 May 2003) | 4 lines


[Gtk1] Added "host runs ntp" to gui
[Gtk1] Added PARQ credits to about dialog

------------------------------------------------------------------------
r3144 | rmanfredi | 2003-05-10 11:38:53 -0400 (Sat, 10 May 2003) | 2 lines

Added Emile le Vivre.

------------------------------------------------------------------------
r3143 | rmanfredi | 2003-05-10 11:35:34 -0400 (Sat, 10 May 2003) | 2 lines

Made sort order in the search pane persistent [From Emile le Vivre].

------------------------------------------------------------------------
r3142 | nonamer | 2003-05-10 11:34:12 -0400 (Sat, 10 May 2003) | 2 lines

PARQ won't send a QUEUE when the library is being rebuilt. Neither will al QUEUE commands be send at once but with a 5 second interval

------------------------------------------------------------------------
r3141 | rmanfredi | 2003-05-10 11:12:42 -0400 (Sat, 10 May 2003) | 2 lines

Trace Ultrapeer selection criteria for debugging.

------------------------------------------------------------------------
r3140 | rmanfredi | 2003-05-10 09:29:25 -0400 (Sat, 10 May 2003) | 2 lines

Use token timestamps as another source for clock skew computation.

------------------------------------------------------------------------
r3139 | rmanfredi | 2003-05-10 09:29:07 -0400 (Sat, 10 May 2003) | 2 lines

Use the Date: HTTP header as a source for clock skew computation.

------------------------------------------------------------------------
r3138 | rmanfredi | 2003-05-10 09:26:11 -0400 (Sat, 10 May 2003) | 2 lines

Will now try to automatically figure out the clock skew relative to GMT.

------------------------------------------------------------------------
r3137 | rmanfredi | 2003-05-10 09:17:47 -0400 (Sat, 10 May 2003) | 2 lines

New properties "host_runs_ntp" and "clock_skew".

------------------------------------------------------------------------
r3136 | rmanfredi | 2003-05-10 06:40:17 -0400 (Sat, 10 May 2003) | 3 lines

New -DTRACK_ZALLOC compilation switch that will track down the allocation
points of all the zalloc blocks to display leaks at the end.

------------------------------------------------------------------------
r3135 | rmanfredi | 2003-05-10 06:39:30 -0400 (Sat, 10 May 2003) | 2 lines

Fixed "memory leak".

------------------------------------------------------------------------
r3134 | nonamer | 2003-05-10 06:35:27 -0400 (Sat, 10 May 2003) | 3 lines

PARQ enabled clients (Queue: 1.0) weren't moved into the SQ, fixed.
GUI now displays the number of alive downloads instead total queue size for active queued uploads.

------------------------------------------------------------------------
r3133 | rmanfredi | 2003-05-09 14:45:45 -0400 (Fri, 09 May 2003) | 2 lines

Integrated PARQ patch #20 [From Jeroen Asselman].

------------------------------------------------------------------------
r3132 | rmanfredi | 2003-05-09 02:05:02 -0400 (Fri, 09 May 2003) | 2 lines

Cast incoming_connecting_timeout to signed int.

------------------------------------------------------------------------
r3131 | rmanfredi | 2003-05-09 02:02:38 -0400 (Fri, 09 May 2003) | 2 lines

Version of 09/05/2003.

------------------------------------------------------------------------
r3130 | rmanfredi | 2003-05-09 02:01:02 -0400 (Fri, 09 May 2003) | 2 lines

Integrated PARQ patch #19 [From Jeroen Asselman].

------------------------------------------------------------------------
r3129 | rmanfredi | 2003-05-09 01:36:24 -0400 (Fri, 09 May 2003) | 3 lines

Accidentally inverted condition for hostile checks on pongs: was dropping
all the non-hostile pongs as being hostile!

------------------------------------------------------------------------
r3128 | rmanfredi | 2003-05-08 17:52:19 -0400 (Thu, 08 May 2003) | 2 lines

Version of 08/05/2003.

------------------------------------------------------------------------
r3127 | rmanfredi | 2003-05-08 17:46:44 -0400 (Thu, 08 May 2003) | 2 lines

Minor fixes.

------------------------------------------------------------------------
r3126 | rmanfredi | 2003-05-08 17:45:09 -0400 (Thu, 08 May 2003) | 2 lines

Plugged dropping of connections and packets from/to hostile IP addresses.

------------------------------------------------------------------------
r3125 | rmanfredi | 2003-05-08 17:33:14 -0400 (Thu, 08 May 2003) | 2 lines

Plugged dropping of connections and packets from/to hostile IP addresses.

------------------------------------------------------------------------
r3124 | rmanfredi | 2003-05-08 17:29:50 -0400 (Thu, 08 May 2003) | 2 lines

Integrated hostile IP parsing [From Markus Goetz].

------------------------------------------------------------------------
r3123 | rmanfredi | 2003-05-08 13:31:17 -0400 (Thu, 08 May 2003) | 2 lines

Fixed assertion: sources can be removed between two periods.

------------------------------------------------------------------------
r3122 | rmanfredi | 2003-05-08 12:27:53 -0400 (Thu, 08 May 2003) | 2 lines

Don't further limit query propagation to leaves with no pending messages.

------------------------------------------------------------------------
r3121 | rmanfredi | 2003-05-08 12:21:40 -0400 (Thu, 08 May 2003) | 2 lines

Ultrapeer election now takes into account system params and bandwidth.

------------------------------------------------------------------------
r3120 | rmanfredi | 2003-05-08 12:20:10 -0400 (Thu, 08 May 2003) | 3 lines

Added monitoring of average outgoing bandwidth.
Further tuned the bandwidth scheduler to maximize available bandwidth use.

------------------------------------------------------------------------
r3119 | cbiere | 2003-05-07 17:20:46 -0400 (Wed, 07 May 2003) | 2 lines

parq_upload_continue(): Removed invalid assertion as suggested by Jeroen.

------------------------------------------------------------------------
r3118 | wyldfire | 2003-05-07 07:08:46 -0400 (Wed, 07 May 2003) | 2 lines

no comment

------------------------------------------------------------------------
r3117 | wyldfire | 2003-05-07 07:07:46 -0400 (Wed, 07 May 2003) | 3 lines


Export download_free_removed() so it can be used in fi_purge.

------------------------------------------------------------------------
r3116 | wyldfire | 2003-05-07 07:05:53 -0400 (Wed, 07 May 2003) | 3 lines


[Gtk1] Added tooltips to peermode icons.

------------------------------------------------------------------------
r3115 | wyldfire | 2003-05-07 07:04:30 -0400 (Wed, 07 May 2003) | 5 lines


Added "purge" button to fileinfo pane.
Removed "sources" tab from fileinfo pane. This has not been used yet
    and will not be completed before the next release.

------------------------------------------------------------------------
r3113 | cbiere | 2003-05-04 15:58:29 -0400 (Sun, 04 May 2003) | 2 lines

Integrated PARQ patch #17 [From Jeroen Asselman].

------------------------------------------------------------------------
r3112 | cbiere | 2003-05-03 17:20:57 -0400 (Sat, 03 May 2003) | 4 lines

nodes_gui_shutdown():
	Remove signal handlers for "notify::width" because the properties
	are not be accessbile at this stage any longer.

------------------------------------------------------------------------
r3111 | cbiere | 2003-05-03 17:17:51 -0400 (Sat, 03 May 2003) | 2 lines

Removed inclusion of interface-glade[12].h from gui.h for faster rebuilding.

------------------------------------------------------------------------
r3110 | cbiere | 2003-05-03 16:45:14 -0400 (Sat, 03 May 2003) | 2 lines

gui_update_global(): Moved "Uptime:" to the glade file.

------------------------------------------------------------------------
r3109 | cbiere | 2003-05-03 16:43:11 -0400 (Sat, 03 May 2003) | 3 lines

filter_gui_edit_ip_rule(): Fixed a minor memory leak.
Added to void to function headers to provide a prototype.

------------------------------------------------------------------------
r3108 | cbiere | 2003-05-03 16:40:16 -0400 (Sat, 03 May 2003) | 3 lines

Removed unused macro BIT_TO_BOOL().
Removed inclusion of interface-glade{2,}.h from gui.h for faster rebuilding.

------------------------------------------------------------------------
r3107 | cbiere | 2003-05-03 16:35:33 -0400 (Sat, 03 May 2003) | 2 lines

Moved uptime label to left to prevent shifting the icons.

------------------------------------------------------------------------
r3106 | cbiere | 2003-05-02 01:23:03 -0400 (Fri, 02 May 2003) | 2 lines

Updated to gettext-0.11.2.

------------------------------------------------------------------------
r3105 | cbiere | 2003-05-02 01:18:52 -0400 (Fri, 02 May 2003) | 5 lines

GTK2] Replaced entry_nodes_{guid,ip} by labels because they aren't editable;
	also added tooltips.
[GTK2] Fixed problem of showing wrong tooltips for firewalled and peermode.
Prevent an underflow of the UP counter in the progress bars.

------------------------------------------------------------------------
r3104 | cbiere | 2003-05-02 01:13:50 -0400 (Fri, 02 May 2003) | 2 lines

Fixed an oversight of truncation detection.

------------------------------------------------------------------------
r3103 | cbiere | 2003-05-02 01:12:08 -0400 (Fri, 02 May 2003) | 4 lines

[GTK2] Replaced entry_nodes_{guid,ip} by labels because they aren't editable;
	also added tooltips.
[GTK2] Fixed problem of showing wrong tooltips for firewalled and peermode.

------------------------------------------------------------------------
r3102 | cbiere | 2003-05-02 01:05:46 -0400 (Fri, 02 May 2003) | 2 lines

Built gettext stuff at first so we can link against it.

------------------------------------------------------------------------
r3101 | cbiere | 2003-04-28 19:25:10 -0400 (Mon, 28 Apr 2003) | 2 lines

Fixed a very stupid memory leak of mine.

------------------------------------------------------------------------
r3100 | cbiere | 2003-04-28 17:04:24 -0400 (Mon, 28 Apr 2003) | 3 lines

Fixed my off-by-one error (seen by Jeroen).
Replaced the strlen() by sizeof() - 1.

------------------------------------------------------------------------
r3099 | cbiere | 2003-04-27 19:57:47 -0400 (Sun, 27 Apr 2003) | 2 lines

Fixed another memory leak I created.

------------------------------------------------------------------------
r3098 | cbiere | 2003-04-27 19:57:03 -0400 (Sun, 27 Apr 2003) | 2 lines

Fixed the memory leak I created.

------------------------------------------------------------------------
r3097 | cbiere | 2003-04-27 19:56:05 -0400 (Sun, 27 Apr 2003) | 2 lines

Also remove const qualifier.

------------------------------------------------------------------------
r3096 | cbiere | 2003-04-27 18:53:28 -0400 (Sun, 27 Apr 2003) | 2 lines

Revised code to previous version as it seems to be buggy.

------------------------------------------------------------------------
r3095 | cbiere | 2003-04-27 17:09:20 -0400 (Sun, 27 Apr 2003) | 3 lines

get_integer(): Fixed signedness problem.
Minor (style) fixes.

------------------------------------------------------------------------
r3094 | cbiere | 2003-04-27 17:05:25 -0400 (Sun, 27 Apr 2003) | 2 lines

Added code to handle failure of sysconf().

------------------------------------------------------------------------
r3093 | cbiere | 2003-04-27 17:02:43 -0400 (Sun, 27 Apr 2003) | 2 lines

Resorted header includes so that system definitions come first.

------------------------------------------------------------------------
r3092 | cbiere | 2003-04-27 17:00:10 -0400 (Sun, 27 Apr 2003) | 2 lines

Use a macro instead of a variable so that the compiler can verify the printf-arguments.

------------------------------------------------------------------------
r3091 | cbiere | 2003-04-27 16:58:09 -0400 (Sun, 27 Apr 2003) | 2 lines

Added `const' qualifier to pointers where possible.

------------------------------------------------------------------------
r3090 | cbiere | 2003-04-27 16:56:32 -0400 (Sun, 27 Apr 2003) | 2 lines

Resorted header includes so that system definitions come first.

------------------------------------------------------------------------
r3089 | cbiere | 2003-04-27 16:49:19 -0400 (Sun, 27 Apr 2003) | 2 lines

Added `const' qualifier to pointers where possible.

------------------------------------------------------------------------
r3088 | cbiere | 2003-04-24 17:08:26 -0400 (Thu, 24 Apr 2003) | 2 lines

Don't free path to early so that it's still set in the warning message.

------------------------------------------------------------------------
r3087 | cbiere | 2003-04-23 16:22:38 -0400 (Wed, 23 Apr 2003) | 4 lines

parse_netmasks():
	Don't use unsigned long because its size differs between platforms.
Style fixes.

------------------------------------------------------------------------
r3086 | cbiere | 2003-04-23 14:29:54 -0400 (Wed, 23 Apr 2003) | 2 lines

Found the bug with "grep -E ' if.+\(.*\).*;' *".

------------------------------------------------------------------------
r3085 | cbiere | 2003-04-23 14:14:35 -0400 (Wed, 23 Apr 2003) | 3 lines

Bugfix: I accidently put a semi-colon behind the condition for an `if'.
Style fix: Use g_return_if_fail() instead of a simple return.

------------------------------------------------------------------------
r3084 | cbiere | 2003-04-20 18:54:49 -0400 (Sun, 20 Apr 2003) | 2 lines

Deny to run with root privileges.

------------------------------------------------------------------------
r3083 | cbiere | 2003-04-20 18:15:03 -0400 (Sun, 20 Apr 2003) | 2 lines

Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3082 | cbiere | 2003-04-20 18:09:11 -0400 (Sun, 20 Apr 2003) | 3 lines

Use g_strdup_printf() for pathnames to prevent truncation.
Utilize file_config_open_read().

------------------------------------------------------------------------
r3081 | cbiere | 2003-04-20 18:04:46 -0400 (Sun, 20 Apr 2003) | 2 lines

Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3080 | cbiere | 2003-04-20 17:58:05 -0400 (Sun, 20 Apr 2003) | 3 lines

Use g_strdup_printf() for pathnames to prevent truncation.
g_strdup() already returns NULL if param is NULL.

------------------------------------------------------------------------
r3079 | cbiere | 2003-04-20 17:56:33 -0400 (Sun, 20 Apr 2003) | 2 lines

Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3078 | cbiere | 2003-04-20 17:53:41 -0400 (Sun, 20 Apr 2003) | 4 lines

Use g_strdup_printf() for pathnames to prevent truncation.
Added is_regular() as counterpart for is_directory().
Minor performance improvements.

------------------------------------------------------------------------
r3077 | cbiere | 2003-04-20 17:46:06 -0400 (Sun, 20 Apr 2003) | 2 lines

Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3076 | cbiere | 2003-04-20 17:43:57 -0400 (Sun, 20 Apr 2003) | 4 lines

Use g_strdup_printf() for pathnames to prevent truncation.
Utilize file_config_open_read().
Added const qualifier where possible.

------------------------------------------------------------------------
r3075 | cbiere | 2003-04-20 17:39:09 -0400 (Sun, 20 Apr 2003) | 2 lines

Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3074 | cbiere | 2003-04-20 17:37:37 -0400 (Sun, 20 Apr 2003) | 5 lines

Use g_strdup_printf() instead of gm_snprintf() for pathnames to prevent
	truncation.
Compare result of lseek() with requested offset instead of checking for -1.
Use S_IRUSR et al. for file mode instead of numeric values.

------------------------------------------------------------------------
r3073 | cbiere | 2003-04-20 15:32:33 -0400 (Sun, 20 Apr 2003) | 3 lines

Utilize file_config_open_read().
Use g_strdup_printf() for pathnames to prevent truncation.

------------------------------------------------------------------------
r3072 | cbiere | 2003-04-20 15:30:45 -0400 (Sun, 20 Apr 2003) | 3 lines

Moved code for error handling from tx_link_write() and tx_link_writev()
	to tx_link_write_error() and added further errno values.

------------------------------------------------------------------------
r3071 | cbiere | 2003-04-20 15:28:26 -0400 (Sun, 20 Apr 2003) | 3 lines

Use g_strdup_printf() instead of gm_snprintf() for pathnames
	to prevent truncation.

------------------------------------------------------------------------
r3070 | cbiere | 2003-04-20 15:24:34 -0400 (Sun, 20 Apr 2003) | 2 lines

Stick to inline instead of G_INLINE_FUNC; handled by autoconf.

------------------------------------------------------------------------
r3069 | cbiere | 2003-04-19 09:20:37 -0400 (Sat, 19 Apr 2003) | 4 lines

file_info_retrieve():
	Removed g_assert_not_reached(); should not be there (slipped through).
	Fixed an off-by-one bug; fgets() shall nul-terminate strings.

------------------------------------------------------------------------
r3068 | rmanfredi | 2003-04-18 02:15:18 -0400 (Fri, 18 Apr 2003) | 2 lines

Version of 17/04/2003.

------------------------------------------------------------------------
r3067 | rmanfredi | 2003-04-18 02:13:07 -0400 (Fri, 18 Apr 2003) | 2 lines

List PARQ development explicitly in the AUTHORS file.

------------------------------------------------------------------------
r3066 | cbiere | 2003-04-18 01:36:58 -0400 (Fri, 18 Apr 2003) | 5 lines

Replaced external variable ``config_dir'' with function setting_config_dir().
Dito ``gui_config_dir''.
Added some ``const'' qualifiers where possible.
Minor fly-by style fixes.

------------------------------------------------------------------------
r3065 | cbiere | 2003-04-18 01:25:31 -0400 (Fri, 18 Apr 2003) | 5 lines

Replaced external variable ``config_dir'' with function setting_config_dir().
Dito ``gui_config_dir''.
Added some ``const'' qualifiers where possible.
Minor fly-by style fixes.

------------------------------------------------------------------------
r3064 | cbiere | 2003-04-17 23:43:51 -0400 (Thu, 17 Apr 2003) | 2 lines

Disabled autogen.sh for users.

------------------------------------------------------------------------
r3063 | rmanfredi | 2003-04-17 16:24:56 -0400 (Thu, 17 Apr 2003) | 2 lines

Integrated PARQ patch #15 [From Jeroen Asselman].

------------------------------------------------------------------------
r3062 | rmanfredi | 2003-04-17 14:32:38 -0400 (Thu, 17 Apr 2003) | 2 lines

Fixed the properties target.

------------------------------------------------------------------------
r3061 | wyldfire | 2003-04-16 19:22:13 -0400 (Wed, 16 Apr 2003) | 4 lines


Fixed refcount problem with downloads/fileinfo
Replace file_info_free() with file_info_source_remove()

------------------------------------------------------------------------
r3060 | cbiere | 2003-04-16 17:48:23 -0400 (Wed, 16 Apr 2003) | 2 lines

Re-added bind_textdomain_codeset() because gettext converts to the current locale.

------------------------------------------------------------------------
r3059 | cbiere | 2003-04-16 16:29:36 -0400 (Wed, 16 Apr 2003) | 2 lines

Fixed progress bar for leaves (switching between avg and current).

------------------------------------------------------------------------
r3058 | rmanfredi | 2003-04-16 16:18:34 -0400 (Wed, 16 Apr 2003) | 2 lines

Version of 16/04/2003.

------------------------------------------------------------------------
r3057 | rmanfredi | 2003-04-16 15:51:35 -0400 (Wed, 16 Apr 2003) | 3 lines

When switching to the "auto" configured peermode and there is no connection
yet, force leaf mode as the current mode.

------------------------------------------------------------------------
r3056 | rmanfredi | 2003-04-16 15:48:40 -0400 (Wed, 16 Apr 2003) | 2 lines

Removed unused function on_the_net().

------------------------------------------------------------------------
r3055 | wyldfire | 2003-04-16 15:24:38 -0400 (Wed, 16 Apr 2003) | 3 lines


Fixed segfault when removing a download.

------------------------------------------------------------------------
r3054 | wyldfire | 2003-04-16 13:14:20 -0400 (Wed, 16 Apr 2003) | 4 lines


Added icon to about dialog
Fixed display of controls on gnet pane when switching the Ultrapeer mode.

------------------------------------------------------------------------
r3053 | wyldfire | 2003-04-16 12:37:44 -0400 (Wed, 16 Apr 2003) | 3 lines


* Added peermode icons

------------------------------------------------------------------------
r3052 | rmanfredi | 2003-04-16 12:14:30 -0400 (Wed, 16 Apr 2003) | 2 lines

Adjusted bandwidth scheduler for low-activity sources.

------------------------------------------------------------------------
r3051 | rmanfredi | 2003-04-16 11:12:14 -0400 (Wed, 16 Apr 2003) | 2 lines

Throttle leaf node pings to 60 seconds instead of the 3 seconds for others.

------------------------------------------------------------------------
r3050 | rmanfredi | 2003-04-16 10:32:27 -0400 (Wed, 16 Apr 2003) | 2 lines

Fixed memory leak in searches: limit MUID list to 4 per search.

------------------------------------------------------------------------
r3049 | rmanfredi | 2003-04-16 10:27:54 -0400 (Wed, 16 Apr 2003) | 2 lines

Don't send non-ultra pongs to leaf nodes.

------------------------------------------------------------------------
r3048 | rmanfredi | 2003-04-16 10:25:08 -0400 (Wed, 16 Apr 2003) | 2 lines

Addded automatic promotion of leaf to Ultrapeer based on uptime (for now).

------------------------------------------------------------------------
r3047 | rmanfredi | 2003-04-16 10:23:15 -0400 (Wed, 16 Apr 2003) | 2 lines

Removed "force_ultrapeer" and "force_leaf" properties.

------------------------------------------------------------------------
r3046 | rmanfredi | 2003-04-16 10:18:50 -0400 (Wed, 16 Apr 2003) | 2 lines

Shut up compiler warning about uninitialized var.

------------------------------------------------------------------------
r3045 | rmanfredi | 2003-04-16 08:05:28 -0400 (Wed, 16 Apr 2003) | 3 lines

Reordered the computations in bsched.c: resort to early floating point
division by 1000.0 then to multiplication to avoid overflowing integers.

------------------------------------------------------------------------
r3044 | cbiere | 2003-04-16 07:45:50 -0400 (Wed, 16 Apr 2003) | 2 lines

Reuse freeze.xpm for the moment.

------------------------------------------------------------------------
r3043 | cbiere | 2003-04-16 07:42:40 -0400 (Wed, 16 Apr 2003) | 2 lines

Reuse smallserver.xpm for the moment.

------------------------------------------------------------------------
r3042 | cbiere | 2003-04-16 07:37:21 -0400 (Wed, 16 Apr 2003) | 2 lines

Provided by T`aZ.

------------------------------------------------------------------------
r3041 | cbiere | 2003-04-16 07:33:03 -0400 (Wed, 16 Apr 2003) | 2 lines

Style fix: trailer isn't a C-string don't use strncpy().

------------------------------------------------------------------------
r3040 | cbiere | 2003-04-16 07:20:53 -0400 (Wed, 16 Apr 2003) | 2 lines

host_name(): Guarantee that the returned name is nul-terminated. Bump the buffer size by one - just in case.

------------------------------------------------------------------------
r3039 | cbiere | 2003-04-16 07:17:35 -0400 (Wed, 16 Apr 2003) | 3 lines

Fail if the hostname was truncated.
Minor style fixes.

------------------------------------------------------------------------
r3038 | cbiere | 2003-04-16 07:13:04 -0400 (Wed, 16 Apr 2003) | 2 lines

Added I18N.

------------------------------------------------------------------------
r3037 | cbiere | 2003-04-16 06:53:56 -0400 (Wed, 16 Apr 2003) | 6 lines

The GUI will now let users set the "configured_peermode" property.
The "current_peermode" property becomes internal and is not persistent.
Legacy mode (aka normal mode) is deprecated and cannot be set through
the GUI any longer.
New auto mode which switches between ultrapeer and leaf on demand.

------------------------------------------------------------------------
r3036 | rmanfredi | 2003-04-16 06:53:43 -0400 (Wed, 16 Apr 2003) | 2 lines

Leaf node bandwidth is now stolen from HTTP.

------------------------------------------------------------------------
r3035 | rmanfredi | 2003-04-16 06:45:41 -0400 (Wed, 16 Apr 2003) | 3 lines

Leaf node bandwidth is now stolen from HTTP.  If that brings outgoing
HTTP bandwidth to 0, sharing is disabled.

------------------------------------------------------------------------
r3034 | rmanfredi | 2003-04-16 06:15:44 -0400 (Wed, 16 Apr 2003) | 2 lines

Regenerated with autoconf 1.4-p4.

------------------------------------------------------------------------
r3033 | rmanfredi | 2003-04-16 04:24:18 -0400 (Wed, 16 Apr 2003) | 3 lines

The GUI will now let users set the "configured_peermode" property.
The "current_peermode" property becomes internal and is not persistent.

------------------------------------------------------------------------
r3032 | cbiere | 2003-04-15 19:45:52 -0400 (Tue, 15 Apr 2003) | 2 lines

A short guide about translating messages.

------------------------------------------------------------------------
r3031 | cbiere | 2003-04-15 17:01:57 -0400 (Tue, 15 Apr 2003) | 6 lines

Removed bind_textdomain_codeset() because it's not supported on some
platforms even if the other gettext functions are available. It's
further not necessary because you should convert the POT files to
UTF-8 (e.g., iconv -f ISO-8859-1 -t UTF-8) instead of converting it
during runtime - GTK+ 2.x won't accept anything but UTF-8.

------------------------------------------------------------------------
r3029 | cbiere | 2003-04-13 21:40:52 -0400 (Sun, 13 Apr 2003) | 3 lines

Integrated patch #720528 by Nicol�s Lichtmaier (niqueco).
Minor style fixes.

------------------------------------------------------------------------
r3028 | cbiere | 2003-04-13 21:20:08 -0400 (Sun, 13 Apr 2003) | 2 lines

Suddenly necessary.

------------------------------------------------------------------------
r3027 | cbiere | 2003-04-13 21:12:23 -0400 (Sun, 13 Apr 2003) | 2 lines

Moved definition of LOCALEDIR from src/Makefile.am to configure.in.

------------------------------------------------------------------------
r3026 | cbiere | 2003-04-13 21:07:35 -0400 (Sun, 13 Apr 2003) | 3 lines

Move definition of LOCALEDIR to configure.in.
Users should not autogenerate the property files.

------------------------------------------------------------------------
r3025 | cbiere | 2003-04-13 18:23:12 -0400 (Sun, 13 Apr 2003) | 2 lines

Removed dead GWCs.

------------------------------------------------------------------------
r3024 | rmanfredi | 2003-04-13 16:42:34 -0400 (Sun, 13 Apr 2003) | 2 lines

Integrated i18n patch [From Nicolas Lichtmaier].

------------------------------------------------------------------------
r3023 | rmanfredi | 2003-04-13 16:30:59 -0400 (Sun, 13 Apr 2003) | 2 lines

Integrated i18n patch [From Nicolas Lichtmaier].

------------------------------------------------------------------------
r3022 | rmanfredi | 2003-04-13 16:23:54 -0400 (Sun, 13 Apr 2003) | 2 lines

Added files created by gettext for internationalization (i18n).

------------------------------------------------------------------------
r3021 | rmanfredi | 2003-04-13 16:21:53 -0400 (Sun, 13 Apr 2003) | 2 lines

Integrated i18n patch [From Nicolas Lichtmaier].

------------------------------------------------------------------------
r3020 | rmanfredi | 2003-04-13 16:17:40 -0400 (Sun, 13 Apr 2003) | 2 lines

Forgot to update node's timestamp after having sent the Gnutella hello.

------------------------------------------------------------------------
r3019 | cbiere | 2003-04-10 17:08:51 -0400 (Thu, 10 Apr 2003) | 2 lines

[GTK2] Fixed assertions: wrong variable.

------------------------------------------------------------------------
r3018 | cbiere | 2003-04-10 16:09:37 -0400 (Thu, 10 Apr 2003) | 2 lines

[GTK2] Removed property listener for column widths for search results, too.

------------------------------------------------------------------------
r3017 | cbiere | 2003-04-10 01:55:57 -0400 (Thu, 10 Apr 2003) | 3 lines

Fixed "notify::width" callback.
Fixed and moved cast for GUI_CELL_RENDERER_YPAD to definition.

------------------------------------------------------------------------
r3016 | cbiere | 2003-04-10 01:49:29 -0400 (Thu, 10 Apr 2003) | 6 lines

Initialize column widths during creation instead of using a prop. listener.
Fixed callbacks for "notify::width".
Use g_object_set() instead of single functions to set column properties.
Fixed and move cast for GUI_CELL_RENDERER_YPAD to definition.
Minor style fixes.

------------------------------------------------------------------------
r3015 | cbiere | 2003-04-10 01:41:28 -0400 (Thu, 10 Apr 2003) | 3 lines

update_treeview_col_widths():
	Replaced the property listener by a dummy because it causes problems.

------------------------------------------------------------------------
r3014 | cbiere | 2003-04-10 01:36:58 -0400 (Thu, 10 Apr 2003) | 2 lines

Cast GUI_CELL_RENDERER_YPAD to guint.

------------------------------------------------------------------------
r3013 | cbiere | 2003-04-10 01:34:32 -0400 (Thu, 10 Apr 2003) | 2 lines

Removed a dead cache and fixed an address.

------------------------------------------------------------------------
r3012 | cbiere | 2003-04-09 20:50:49 -0400 (Wed, 09 Apr 2003) | 2 lines

Replaced g_ntohl() et al. by ntohl() etc. and included arpa/inet.h for these.

------------------------------------------------------------------------
r3011 | rmanfredi | 2003-04-09 17:07:09 -0400 (Wed, 09 Apr 2003) | 2 lines

Version of 09/04/2003.

------------------------------------------------------------------------
r3010 | rmanfredi | 2003-04-09 17:04:20 -0400 (Wed, 09 Apr 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r3009 | rmanfredi | 2003-04-09 17:02:33 -0400 (Wed, 09 Apr 2003) | 2 lines

Propagate random unsollicited ultra pongs to leaf nodes.

------------------------------------------------------------------------
r3008 | rmanfredi | 2003-04-09 17:00:42 -0400 (Wed, 09 Apr 2003) | 3 lines

Make sure we're not over-querying new connections by limiting the amount
of queries sent to the configured outdegree.

------------------------------------------------------------------------
r3007 | rmanfredi | 2003-04-09 16:58:09 -0400 (Wed, 09 Apr 2003) | 3 lines

Be sure to requeue all active downloads that were referencing a file
we are removing.

------------------------------------------------------------------------
r3006 | cbiere | 2003-04-08 16:56:26 -0400 (Tue, 08 Apr 2003) | 2 lines

Stop removing entries when shutting down; style fixes.

------------------------------------------------------------------------
r3005 | cbiere | 2003-04-08 02:46:13 -0400 (Tue, 08 Apr 2003) | 2 lines

Remove listener from signal node_flags_changed at exit.

------------------------------------------------------------------------
r3004 | cbiere | 2003-04-08 02:43:19 -0400 (Tue, 08 Apr 2003) | 2 lines

Free hash table and tree models at exit.

------------------------------------------------------------------------
r3003 | cbiere | 2003-04-08 00:56:00 -0400 (Tue, 08 Apr 2003) | 2 lines

Hopefully fixed a bug which could crash GTKG when removing finished/failed uploads. Style fixes.

------------------------------------------------------------------------
r3002 | cbiere | 2003-04-08 00:51:32 -0400 (Tue, 08 Apr 2003) | 2 lines

Fixed search_gui_restart_search(): Must call search_gui_clear_search() because of the hashed iters.

------------------------------------------------------------------------
r3001 | cbiere | 2003-04-08 00:49:14 -0400 (Tue, 08 Apr 2003) | 2 lines

Replaced a g_return_if_fail() which shouldn't be there.

------------------------------------------------------------------------
r3000 | cbiere | 2003-04-08 00:47:09 -0400 (Tue, 08 Apr 2003) | 2 lines

[GTK2] Added download/fileinfo (Sync with GTK1).

------------------------------------------------------------------------
r2999 | cbiere | 2003-04-08 00:04:46 -0400 (Tue, 08 Apr 2003) | 2 lines

Added comment for USE_SOURCE_DIR_AS_FALLBACK.

------------------------------------------------------------------------
r2997 | cbiere | 2003-04-03 17:47:34 -0500 (Thu, 03 Apr 2003) | 2 lines

Fixed two bugs in the stats; iterators were increased twice.

------------------------------------------------------------------------
r2996 | cbiere | 2003-04-02 20:16:28 -0500 (Wed, 02 Apr 2003) | 2 lines

Use IPTOS_LOWDELAY for downloads.

------------------------------------------------------------------------
r2995 | cbiere | 2003-04-02 19:25:18 -0500 (Wed, 02 Apr 2003) | 2 lines

common.h: Added USE_SOURCE_DIR_AS_FALLBACK which should be commented out for releases.

------------------------------------------------------------------------
r2994 | rmanfredi | 2003-04-02 16:28:05 -0500 (Wed, 02 Apr 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2993 | rmanfredi | 2003-04-02 16:27:03 -0500 (Wed, 02 Apr 2003) | 2 lines

Avoid setting the IP ToS on a freed socket descriptor.

------------------------------------------------------------------------
r2992 | rmanfredi | 2003-04-02 16:22:29 -0500 (Wed, 02 Apr 2003) | 2 lines

Fixed icon.c to have it work with GTK 2.0 [From Michael Gray].

------------------------------------------------------------------------
r2991 | rmanfredi | 2003-04-02 16:21:10 -0500 (Wed, 02 Apr 2003) | 3 lines

Also remove all downloads from host when push route is lost, or when we
can't reach a host through a direct connection.

------------------------------------------------------------------------
r2990 | rmanfredi | 2003-04-02 16:17:17 -0500 (Wed, 02 Apr 2003) | 2 lines

Added the default gtk-gnutella icon for GTK1 [From Michael Gray].

------------------------------------------------------------------------
r2989 | rmanfredi | 2003-04-02 16:17:00 -0500 (Wed, 02 Apr 2003) | 2 lines

Added Michael Gray, author of the icon support.

------------------------------------------------------------------------
r2988 | wyldfire | 2003-04-01 06:57:23 -0500 (Tue, 01 Apr 2003) | 2 lines

Fixed compilation of gtk1

------------------------------------------------------------------------
r2987 | cbiere | 2003-04-01 04:07:41 -0500 (Tue, 01 Apr 2003) | 2 lines

Removed dead GWCs; fixed one URL.

------------------------------------------------------------------------
r2986 | rmanfredi | 2003-04-01 01:09:44 -0500 (Tue, 01 Apr 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2985 | rmanfredi | 2003-04-01 01:02:51 -0500 (Tue, 01 Apr 2003) | 2 lines

Integrated IP TOS patch [From Mike Mestnik].

------------------------------------------------------------------------
r2984 | rmanfredi | 2003-04-01 00:57:44 -0500 (Tue, 01 Apr 2003) | 2 lines

Integrated PARQ patch #14 [From Jeroen Asselman].

------------------------------------------------------------------------
r2983 | cbiere | 2003-03-31 16:42:38 -0500 (Mon, 31 Mar 2003) | 2 lines

main_gui.c: Set GDK_USE_XFT=0 if not defined to save performance by default.

------------------------------------------------------------------------
r2982 | cbiere | 2003-03-31 14:39:33 -0500 (Mon, 31 Mar 2003) | 2 lines

[GTK2] icon.c: Include gtk/gtk.h so that GTK_VERSION_.* is defined.

------------------------------------------------------------------------
r2981 | rmanfredi | 2003-03-31 14:39:12 -0500 (Mon, 31 Mar 2003) | 2 lines

Be more stringent when generating the QRP table: no more than 1% full.

------------------------------------------------------------------------
r2980 | rmanfredi | 2003-03-31 14:35:33 -0500 (Mon, 31 Mar 2003) | 2 lines

Added Retry-After header in parq_upload_add_header().

------------------------------------------------------------------------
r2979 | rmanfredi | 2003-03-31 14:33:37 -0500 (Mon, 31 Mar 2003) | 2 lines

Optimized sha1_eq() and guid_eq() when pointers are identical.

------------------------------------------------------------------------
r2978 | cbiere | 2003-03-30 13:48:22 -0500 (Sun, 30 Mar 2003) | 2 lines

[GTK2] search_cb2.c: Several style fixes. current_search -> search to reduce noise and overlong lines. Replaced button_search_download by popup_search_download.

------------------------------------------------------------------------
r2977 | cbiere | 2003-03-30 13:44:30 -0500 (Sun, 30 Mar 2003) | 2 lines

Replaced property PROP_AUTOCLEAR_UPLOADS by PROP_AUTOCLEAR_COMPLETED_UPLOADS and PROP_AUTOCLEAR_FAILED_UPLOADS.

------------------------------------------------------------------------
r2976 | cbiere | 2003-03-30 13:39:57 -0500 (Sun, 30 Mar 2003) | 2 lines

[GTK2] gtk2-gnutella.glade: Added several icons; changed layout at downloads/uploads/search pane.

------------------------------------------------------------------------
r2975 | cbiere | 2003-03-30 13:35:32 -0500 (Sun, 30 Mar 2003) | 2 lines

[GTK2] icon.c: This depends on GTK+ >= 2.2.0, thus use dummies for older versions.

------------------------------------------------------------------------
r2974 | cbiere | 2003-03-29 16:49:53 -0500 (Sat, 29 Mar 2003) | 2 lines

settings_gui.c:	[GTK2] Sync'ed with latest changes to GTK1.

------------------------------------------------------------------------
r2973 | cbiere | 2003-03-29 16:47:13 -0500 (Sat, 29 Mar 2003) | 2 lines

search_cb2.c:	Fixed glitch when lookup_vendor_name() returns NULL.

------------------------------------------------------------------------
r2972 | cbiere | 2003-03-29 16:41:30 -0500 (Sat, 29 Mar 2003) | 5 lines

[GTK2] gtk2-gnutella.glade:
	Made download settings on download pane hidable.
	Prepared fileinfo pane for downloads.
	Minor changes to the search pane.

------------------------------------------------------------------------
r2971 | wyldfire | 2003-03-29 11:51:32 -0500 (Sat, 29 Mar 2003) | 2 lines

Fixed maximum UP connections

------------------------------------------------------------------------
r2970 | wyldfire | 2003-03-29 09:11:03 -0500 (Sat, 29 Mar 2003) | 2 lines

fixed runtime warning when compiling against Gtk2

------------------------------------------------------------------------
r2969 | wyldfire | 2003-03-29 08:57:31 -0500 (Sat, 29 Mar 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2968 | wyldfire | 2003-03-29 08:56:38 -0500 (Sat, 29 Mar 2003) | 5 lines


Added basic support for download/source related events.
Added event type enumeration for download/source related events.
Added event type enumeration for fileinfo related events.

------------------------------------------------------------------------
r2967 | wyldfire | 2003-03-29 08:56:06 -0500 (Sat, 29 Mar 2003) | 4 lines


Correctly show when a file is finished.
Use generalized fi_add/remove_listener().

------------------------------------------------------------------------
r2966 | wyldfire | 2003-03-29 08:54:18 -0500 (Sat, 29 Mar 2003) | 3 lines


Typedefed frequency_t and event_t.

------------------------------------------------------------------------
r2965 | wyldfire | 2003-03-29 08:53:37 -0500 (Sat, 29 Mar 2003) | 8 lines


download_clear_stopped can clear failed and/or completed downloads.
Added PROP_AUTOCLEAR_COMPLETED_DOWNLOADS.
Added PROP_AUTOCLEAR_FAILED_DOWNLOADS.
Removed PROP_AUTOCLEAR_DOWNLOADS.
Added PROP_SHOW_DL_SETTINGS.
Fixed connection odometer in NODE_P_LEAF.

------------------------------------------------------------------------
r2964 | wyldfire | 2003-03-29 08:52:04 -0500 (Sat, 29 Mar 2003) | 3 lines


download_clear_stopped can clear failed and/or completed downloads.

------------------------------------------------------------------------
r2963 | wyldfire | 2003-03-29 08:51:14 -0500 (Sat, 29 Mar 2003) | 5 lines


Added some skeletons for having events on the downloads (sources)
Added handles to downloads
download_clear_stopped can clear failed and/or completed downloads.

------------------------------------------------------------------------
r2962 | wyldfire | 2003-03-29 08:49:47 -0500 (Sat, 29 Mar 2003) | 6 lines


Put events into an array instead of keeping several event_t variables.
Removed event specific add/remove listeners functions and added
  general fi_add/remove_listener() function. Event types are defined
  in gnet.h.

------------------------------------------------------------------------
r2961 | wyldfire | 2003-03-29 08:49:13 -0500 (Sat, 29 Mar 2003) | 4 lines


Mapped old "clear_downloads" configuration variable to both new
PROP_AUTOCLEAR_*_DOWNLOADS properties.

------------------------------------------------------------------------
r2960 | wyldfire | 2003-03-29 08:48:46 -0500 (Sat, 29 Mar 2003) | 3 lines


Added PROP_SHOW_DL_SETTINGS

------------------------------------------------------------------------
r2959 | wyldfire | 2003-03-29 08:48:17 -0500 (Sat, 29 Mar 2003) | 5 lines


Added PROP_AUTOCLEAR_COMPLETED_DOWNLOADS
Added PROP_AUTOCLEAR_FAILED_DOWNLOADS
Removed PROP_AUTOCLEAR_DOWNLOADS

------------------------------------------------------------------------
r2958 | wyldfire | 2003-03-29 08:47:03 -0500 (Sat, 29 Mar 2003) | 4 lines


download settings on download pane hidable
added detail panel to fileinfo pane

------------------------------------------------------------------------
r2957 | wyldfire | 2003-03-29 07:29:11 -0500 (Sat, 29 Mar 2003) | 3 lines


Fixed warning: "settings_parse_array" define but not used. #if-0-ed it out.

------------------------------------------------------------------------
r2956 | cbiere | 2003-03-28 22:50:20 -0500 (Fri, 28 Mar 2003) | 2 lines

gnet_props.ag: Added filename extension `ogm'. (#711553)

------------------------------------------------------------------------
r2955 | rmanfredi | 2003-03-28 13:57:06 -0500 (Fri, 28 Mar 2003) | 2 lines

Abort all downloads from a host to which we can't connect.

------------------------------------------------------------------------
r2954 | rmanfredi | 2003-03-28 13:20:07 -0500 (Fri, 28 Mar 2003) | 2 lines

Integrated PARQ patch #13 [From Jeroen Asselman].

------------------------------------------------------------------------
r2953 | cbiere | 2003-03-27 19:17:06 -0500 (Thu, 27 Mar 2003) | 2 lines

settings.c: Include "config.h" at first.

------------------------------------------------------------------------
r2952 | cbiere | 2003-03-27 19:15:57 -0500 (Thu, 27 Mar 2003) | 2 lines

Fixed make dist so that all necessary sources will be included.

------------------------------------------------------------------------
r2951 | wyldfire | 2003-03-27 18:46:37 -0500 (Thu, 27 Mar 2003) | 3 lines


Fixed calculation of maximum number of acceptable connections in leaf-mode.

------------------------------------------------------------------------
r2950 | rmanfredi | 2003-03-27 17:33:02 -0500 (Thu, 27 Mar 2003) | 2 lines

Added handle_to_queued() to verify the PARQ_UL_MAGIC magic whilst casting.

------------------------------------------------------------------------
r2949 | rmanfredi | 2003-03-27 01:33:01 -0500 (Thu, 27 Mar 2003) | 2 lines

Added inclusion of <sys/time.h> before <sys/resource.h> for FreeBSD.

------------------------------------------------------------------------
r2948 | rmanfredi | 2003-03-26 16:13:21 -0500 (Wed, 26 Mar 2003) | 2 lines

Added leading comment for socket_tos().

------------------------------------------------------------------------
r2947 | rmanfredi | 2003-03-26 16:08:42 -0500 (Wed, 26 Mar 2003) | 2 lines

Version of 26/03/2003.

------------------------------------------------------------------------
r2946 | rmanfredi | 2003-03-26 16:07:13 -0500 (Wed, 26 Mar 2003) | 2 lines

Fixed function declarations to avoid compiler warnings in downloads.c.

------------------------------------------------------------------------
r2945 | rmanfredi | 2003-03-26 16:02:04 -0500 (Wed, 26 Mar 2003) | 2 lines

Integrated PARQ patch #12 [From Jeroen Asselman].

------------------------------------------------------------------------
r2944 | rmanfredi | 2003-03-26 14:11:50 -0500 (Wed, 26 Mar 2003) | 2 lines

Moved down inclusion of "gnutella.h" to avoid warnings on MIN/MAX redefine.

------------------------------------------------------------------------
r2943 | rmanfredi | 2003-03-26 14:10:33 -0500 (Wed, 26 Mar 2003) | 3 lines

Split parq_upload_request() into two to avoid assertion failures.
New parq_upload_get() call to return an opaque PARQ slot for uploads.

------------------------------------------------------------------------
r2942 | rmanfredi | 2003-03-25 16:24:25 -0500 (Tue, 25 Mar 2003) | 2 lines

Version of 25/03/2003.

------------------------------------------------------------------------
r2941 | rmanfredi | 2003-03-25 16:22:45 -0500 (Tue, 25 Mar 2003) | 2 lines

Integrated PARQ patch #10 [From Jeroen Asselman].

------------------------------------------------------------------------
r2940 | rmanfredi | 2003-03-25 16:18:53 -0500 (Tue, 25 Mar 2003) | 2 lines

Added Jeroen Asselman to the glade file in the authors list.

------------------------------------------------------------------------
r2939 | rmanfredi | 2003-03-25 16:10:19 -0500 (Tue, 25 Mar 2003) | 2 lines

Integrated icon patch #2 [From Michael Gray].

------------------------------------------------------------------------
r2938 | rmanfredi | 2003-03-25 15:57:41 -0500 (Tue, 25 Mar 2003) | 2 lines

Fixed stupid trailing char truncation when quoting download mesh URLs.

------------------------------------------------------------------------
r2935 | cbiere | 2003-03-24 19:12:30 -0500 (Mon, 24 Mar 2003) | 6 lines

sockets.c:
	Renamed all sock_ functions to socket_ for consistency.
	socket_tos_default():	Removed break from the default branch.
	socket_connect_finalize():	Moved socket_tos_default() to
		socket_connect_prepare() as suggested by Mike Mestnik.

------------------------------------------------------------------------
r2934 | cbiere | 2003-03-24 19:05:48 -0500 (Mon, 24 Mar 2003) | 2 lines

Added Andrew Barnert to contributors.

------------------------------------------------------------------------
r2933 | wyldfire | 2003-03-23 16:28:05 -0500 (Sun, 23 Mar 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2932 | wyldfire | 2003-03-23 15:49:38 -0500 (Sun, 23 Mar 2003) | 3 lines


Show aliases in fileinfo screen.

------------------------------------------------------------------------
r2931 | wyldfire | 2003-03-23 15:44:08 -0500 (Sun, 23 Mar 2003) | 3 lines


Regenerated configure and friends.

------------------------------------------------------------------------
r2930 | wyldfire | 2003-03-23 15:41:19 -0500 (Sun, 23 Mar 2003) | 3 lines


Show aliases in fileinfo screen

------------------------------------------------------------------------
r2929 | wyldfire | 2003-03-23 15:40:45 -0500 (Sun, 23 Mar 2003) | 3 lines


Added link between fileinfo and associated downloads (fi->dl)

------------------------------------------------------------------------
r2928 | wyldfire | 2003-03-23 15:39:56 -0500 (Sun, 23 Mar 2003) | 4 lines


Added link between fileinfo and associated downloads (fi->dl)
Added means to fetch aliases of a file from fileinfo database

------------------------------------------------------------------------
r2927 | wyldfire | 2003-03-23 15:38:38 -0500 (Sun, 23 Mar 2003) | 3 lines


Added means to fetch aliases of a file from fileinfo database

------------------------------------------------------------------------
r2926 | wyldfire | 2003-03-23 15:35:03 -0500 (Sun, 23 Mar 2003) | 3 lines


Missing ";" in misc.h broke compilation when HAVE_STRLCPY was not set

------------------------------------------------------------------------
r2925 | wyldfire | 2003-03-23 15:33:57 -0500 (Sun, 23 Mar 2003) | 3 lines


Fixed max-nodes calculation in the connection-odometer

------------------------------------------------------------------------
r2924 | cbiere | 2003-03-22 23:22:39 -0500 (Sat, 22 Mar 2003) | 2 lines

misc.h: Provide prototype for strlcpy().

------------------------------------------------------------------------
r2923 | cbiere | 2003-03-22 22:05:36 -0500 (Sat, 22 Mar 2003) | 2 lines

settings.c/settings_getphysmemsize(): Do not use sysctl() if CTL_HW and HW_PHYSMEM are not defined.

------------------------------------------------------------------------
r2922 | cbiere | 2003-03-22 20:30:56 -0500 (Sat, 22 Mar 2003) | 2 lines

fuzzy.c/fuzzy_strlower(): Added cast to guchar for tolower().

------------------------------------------------------------------------
r2921 | cbiere | 2003-03-22 20:29:30 -0500 (Sat, 22 Mar 2003) | 2 lines

misc.c: Relocated strlcpy().

------------------------------------------------------------------------
r2920 | cbiere | 2003-03-22 19:50:42 -0500 (Sat, 22 Mar 2003) | 2 lines

Regenerated from configure.in

------------------------------------------------------------------------
r2919 | cbiere | 2003-03-22 19:27:18 -0500 (Sat, 22 Mar 2003) | 2 lines

Integrated IP TOS patch by Andrew Barnert.

------------------------------------------------------------------------
r2918 | cbiere | 2003-03-22 15:38:22 -0500 (Sat, 22 Mar 2003) | 2 lines

share.h: Fixed a `const' qualifier

------------------------------------------------------------------------
r2917 | cbiere | 2003-03-22 15:36:25 -0500 (Sat, 22 Mar 2003) | 2 lines

search_cb.c: Removed USE_GTK2; Changed cast for gtk_column_chooser_new().

------------------------------------------------------------------------
r2916 | cbiere | 2003-03-22 15:11:35 -0500 (Sat, 22 Mar 2003) | 2 lines

[GTK2] Discard parameter `allow null' from tree_selection_collect_data().

------------------------------------------------------------------------
r2915 | cbiere | 2003-03-22 15:10:15 -0500 (Sat, 22 Mar 2003) | 2 lines

[GTK2] Use w_tree_iter_{copy,free}() from gtk-missing.[ch].

------------------------------------------------------------------------
r2914 | cbiere | 2003-03-22 15:07:06 -0500 (Sat, 22 Mar 2003) | 8 lines

gtk-missing.c:
	[GTK2] Corrected tree_selection_collect_data() to restore the functionality
		of ko's original patch.
	[GTK2] Dropped parameter `allow_null' for tree_selection_collect_data() as
		it's not used.
	[GTK2] Added w_tree_iter_copy() and w_tree_iter_free().
	Minor style fixes.

------------------------------------------------------------------------
r2913 | cbiere | 2003-03-22 14:58:48 -0500 (Sat, 22 Mar 2003) | 2 lines

downloads.c: Fixed two `const' qualifiers

------------------------------------------------------------------------
r2912 | cbiere | 2003-03-18 16:26:38 -0500 (Tue, 18 Mar 2003) | 2 lines

search_gui2.c: Fixed sorting by source counter.

------------------------------------------------------------------------
r2911 | cbiere | 2003-03-18 16:25:33 -0500 (Tue, 18 Mar 2003) | 2 lines

search_cb2.c: Fixed a cast

------------------------------------------------------------------------
r2910 | cbiere | 2003-03-18 08:53:27 -0500 (Tue, 18 Mar 2003) | 2 lines

[GTK2] Activated gtkcolumnchooser code.

------------------------------------------------------------------------
r2909 | cbiere | 2003-03-18 06:59:26 -0500 (Tue, 18 Mar 2003) | 2 lines

gtkcolumnchooser.c: Use GtkTreeView if compiling with GTK+ 2.x

------------------------------------------------------------------------
r2908 | cbiere | 2003-03-18 03:23:07 -0500 (Tue, 18 Mar 2003) | 3 lines

atoms.c:
	Just fixed the previous committed thinko considering memcmp() usage.

------------------------------------------------------------------------
r2907 | cbiere | 2003-03-18 03:16:55 -0500 (Tue, 18 Mar 2003) | 5 lines

settings.c:
	Use autoconf to determine whether sysctl() is available.
	Use `const' where possible.
	Set `home_dir' and `config_dir' to NULL after free()ing them.

------------------------------------------------------------------------
r2906 | cbiere | 2003-03-18 03:14:11 -0500 (Tue, 18 Mar 2003) | 7 lines

misc.c:
	ip_to_gchar():	Copy result of inet_ntoa() to a local static
		buffer (again).
	Use `const' where possible.
	host_to_ip(): Use hstrerror() if available for consistent warnings.
	dump_hex(): Style fix i.e., while (1) -> for (;;)

------------------------------------------------------------------------
r2905 | cbiere | 2003-03-18 03:09:11 -0500 (Tue, 18 Mar 2003) | 4 lines

main.c:
	Set s_listen to NULL after free()ing the socket.
	Removed g_assert()s for g_strlcpy() (this was accidently committed).

------------------------------------------------------------------------
r2904 | cbiere | 2003-03-18 03:07:19 -0500 (Tue, 18 Mar 2003) | 2 lines

bg.c/bg_sched_timer(): Declare remain and ticks as volatile to silence compiler warnings.

------------------------------------------------------------------------
r2903 | cbiere | 2003-03-18 03:05:39 -0500 (Tue, 18 Mar 2003) | 4 lines

atoms.c:
	Disabled casting `guchar *' to `guint32 *' in guid_eq() and sha1_eq()
		as it causes crashes due to possible misalignment (at least on Sparc).

------------------------------------------------------------------------
r2902 | cbiere | 2003-03-18 03:01:54 -0500 (Tue, 18 Mar 2003) | 2 lines

configure.in:	Added checks for hstrerror(), sysctl() and sys/sysctl.h

------------------------------------------------------------------------
r2901 | cbiere | 2003-03-17 21:55:45 -0500 (Mon, 17 Mar 2003) | 2 lines

settings_gui.c: Corrected calculation of fraction for downloads progressbar.

------------------------------------------------------------------------
r2900 | cbiere | 2003-03-17 21:20:26 -0500 (Mon, 17 Mar 2003) | 5 lines

Revised fileinfo pane for search results.
Added column for counting alternate sources.
search_hash_key_compare():	Exploit the fact the guid is an atom.
Several style fixes.

------------------------------------------------------------------------
r2899 | cbiere | 2003-03-17 21:16:09 -0500 (Mon, 17 Mar 2003) | 2 lines

[GTK2] gui.h: Added column for counting alternate sources.

------------------------------------------------------------------------
r2898 | cbiere | 2003-03-17 20:49:31 -0500 (Mon, 17 Mar 2003) | 2 lines

[GTK2] gtk2-gnutella.glade: Revised fileinfo pane in search results; fixed typo

------------------------------------------------------------------------
r2897 | cbiere | 2003-03-17 20:44:43 -0500 (Mon, 17 Mar 2003) | 2 lines

gui_props.ag: Added property `results_divider_pos'

------------------------------------------------------------------------
r2896 | cbiere | 2003-03-17 20:41:03 -0500 (Mon, 17 Mar 2003) | 2 lines

props.tpl: Removed duplicate prototype for .*_prop_get_by_name

------------------------------------------------------------------------
r2895 | cbiere | 2003-03-17 19:28:31 -0500 (Mon, 17 Mar 2003) | 10 lines

Fixed warnings for pedantic compiler options:
    Provide prototypes for all functions i.e., void foo() -> void foo(void).
    Declare all functions only used local as static.
    Avoid using identifiers already used in surrounding scope e.g., (link,
        abort, remove, index, send...)
    Avoid casting `const gchar *' to `gchar *'.
    Added `const' when obviously possible.
    Replaced all C++ style comments by C style comments i.e., // -> /* */.
    Removed duplicate prototypes.

------------------------------------------------------------------------
r2894 | cbiere | 2003-03-17 19:02:40 -0500 (Mon, 17 Mar 2003) | 2 lines

gtk-gnutella.glade: Fixed typos

------------------------------------------------------------------------
r2893 | cbiere | 2003-03-17 18:54:27 -0500 (Mon, 17 Mar 2003) | 2 lines

Fixed typos

------------------------------------------------------------------------
r2892 | cbiere | 2003-03-16 15:31:35 -0500 (Sun, 16 Mar 2003) | 2 lines

search_xml.c: Added some const qualifiers to get rid of pedantic warnings

------------------------------------------------------------------------
r2891 | rmanfredi | 2003-03-16 12:30:10 -0500 (Sun, 16 Mar 2003) | 2 lines

Version of 16/03/2003.

------------------------------------------------------------------------
r2890 | rmanfredi | 2003-03-16 12:21:28 -0500 (Sun, 16 Mar 2003) | 3 lines

Adjusted bandwidth scheduler to limit starvation effects when we have
a large amount of entries.

------------------------------------------------------------------------
r2889 | rmanfredi | 2003-03-16 12:19:29 -0500 (Sun, 16 Mar 2003) | 2 lines

Fixed flags display for nodes: was no longer showing 'I' or 'O'.

------------------------------------------------------------------------
r2888 | rmanfredi | 2003-03-16 04:27:35 -0500 (Sun, 16 Mar 2003) | 2 lines

In leaf mode, allow flow control from ultrapeer up to 95% of the time.

------------------------------------------------------------------------
r2887 | rmanfredi | 2003-03-16 04:25:39 -0500 (Sun, 16 Mar 2003) | 2 lines

Make sure we don't try to parse ranges if the file size is zero bytes.

------------------------------------------------------------------------
r2886 | rmanfredi | 2003-03-16 04:24:24 -0500 (Sun, 16 Mar 2003) | 2 lines

Suppress error message from DNS helper upon final exit.

------------------------------------------------------------------------
r2885 | rmanfredi | 2003-03-16 04:23:11 -0500 (Sun, 16 Mar 2003) | 2 lines

Integrated icon patch from Mike Gray.

------------------------------------------------------------------------
r2884 | rmanfredi | 2003-03-16 04:19:59 -0500 (Sun, 16 Mar 2003) | 2 lines

Regenerated configure and friends.

------------------------------------------------------------------------
r2883 | cbiere | 2003-03-15 01:12:36 -0500 (Sat, 15 Mar 2003) | 5 lines

[GTK2] search_gui2.c:
	Fixed some comments, indents, style and a minor mistake.
	Removed Speed, Host, urn:sha1 and Status column.
	Added grouping by sha1.

------------------------------------------------------------------------
r2882 | cbiere | 2003-03-15 01:04:49 -0500 (Sat, 15 Mar 2003) | 2 lines

[GTK2] search_gui.h: Added hash table for iterators (used for grouping by sha1) to search_t

------------------------------------------------------------------------
r2881 | cbiere | 2003-03-15 01:00:35 -0500 (Sat, 15 Mar 2003) | 5 lines

[GTK2] search_cb2.c:
	Corrected some indents.
	Changed code for auto-selection to work with "grouped" results.
	Update labels in the result information pane if cursor has changed.

------------------------------------------------------------------------
r2880 | cbiere | 2003-03-15 00:53:40 -0500 (Sat, 15 Mar 2003) | 2 lines

[GTK2] gui.h: Removed speed, host, urn and status column

------------------------------------------------------------------------
r2879 | cbiere | 2003-03-15 00:52:04 -0500 (Sat, 15 Mar 2003) | 2 lines

[GTK2] Added pane for information about selected search result

------------------------------------------------------------------------
r2878 | cbiere | 2003-03-13 03:36:02 -0500 (Thu, 13 Mar 2003) | 5 lines

nodes_gui2.c:
	Moved nodes_gui_status_str() and most of nodes_gui_update_node_flags()
		to nodes_gui_common.c
	Use hashtable for faster (node handle -> iter) mapping

------------------------------------------------------------------------
r2877 | cbiere | 2003-03-13 03:31:32 -0500 (Thu, 13 Mar 2003) | 2 lines

nodes_gui_common.[ch] should be used for toolkit-independent code used in a UI

------------------------------------------------------------------------
r2876 | cbiere | 2003-03-13 03:28:58 -0500 (Thu, 13 Mar 2003) | 2 lines

nodes_gui(2).c: Moved nodes_gui_status_str() and most of nodes_gui_update_node_flags() to nodes_gui_common.c

------------------------------------------------------------------------
r2875 | cbiere | 2003-03-13 03:23:56 -0500 (Thu, 13 Mar 2003) | 2 lines

upload_stats_gui2.c/upload_stats_cell_render_size_func(): Skip unnecessary gm_snprintf().

------------------------------------------------------------------------
r2874 | wyldfire | 2003-03-10 20:46:46 -0500 (Mon, 10 Mar 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2873 | wyldfire | 2003-03-10 20:45:56 -0500 (Mon, 10 Mar 2003) | 4 lines


[Gtk1] Added file info table to the downloads pane. This is not finished,
  but already helpful.

------------------------------------------------------------------------
r2872 | wyldfire | 2003-03-10 20:45:34 -0500 (Mon, 10 Mar 2003) | 4 lines


Fixed: PROP_BAN_MAX_FDS not updated in
[Gtk1] Added support for persisting column width in clist_fileinfo

------------------------------------------------------------------------
r2871 | wyldfire | 2003-03-10 20:43:44 -0500 (Mon, 10 Mar 2003) | 4 lines


Changed init sequence: first init gui, then read back downloads+fileinfo
Changed shutdown: first close downloads, then gui, then fileinfo

------------------------------------------------------------------------
r2870 | wyldfire | 2003-03-10 20:43:07 -0500 (Mon, 10 Mar 2003) | 3 lines


Added possibility to tap into the fileinfo database from the gui.

------------------------------------------------------------------------
r2869 | wyldfire | 2003-03-10 20:42:21 -0500 (Mon, 10 Mar 2003) | 5 lines


[Gtk1] Added file info table to the downloads pane. This is not finished,
   but already helpful.
Added property to preserve column width.

------------------------------------------------------------------------
r2868 | wyldfire | 2003-03-10 20:41:11 -0500 (Mon, 10 Mar 2003) | 5 lines


Added possibility to tap into the fileinfo database from the gui
Introduced file_info_ref() and file_info_unref() to make it possible to
  watch for changes here and notify the gui.

------------------------------------------------------------------------
r2867 | wyldfire | 2003-03-10 20:39:46 -0500 (Mon, 10 Mar 2003) | 6 lines


Added download_restore_state() (seperated out from download_init())
Introduced file_info_ref() and file_info_unref() to make it possible to
  watch for changes here and notify the gui.
Changed shutdown: first close downloads, then gui, then fileinfo

------------------------------------------------------------------------
r2866 | wyldfire | 2003-03-10 20:36:49 -0500 (Mon, 10 Mar 2003) | 3 lines


[Gtk1] Added possibility to tap into the fileinfo database from the gui.

------------------------------------------------------------------------
r2865 | wyldfire | 2003-03-10 20:34:58 -0500 (Mon, 10 Mar 2003) | 4 lines


[Gtk1] Added possibility to tap into the fileinfo database from the gui.
  (added fileinfo_gui.[ch] and thus ran autogen.sh)

------------------------------------------------------------------------
r2864 | wyldfire | 2003-03-10 20:33:07 -0500 (Mon, 10 Mar 2003) | 4 lines


Added file info table to the downloads pane. This is not finished, but
  already helpful.

------------------------------------------------------------------------
r2863 | cbiere | 2003-03-10 17:24:18 -0500 (Mon, 10 Mar 2003) | 2 lines

Merged gnet_stats_gui.h and gnet_stats_gui2.h

------------------------------------------------------------------------
r2862 | cbiere | 2003-03-10 17:23:28 -0500 (Mon, 10 Mar 2003) | 2 lines

Added test for strlcpy()

------------------------------------------------------------------------
r2861 | cbiere | 2003-03-10 17:15:37 -0500 (Mon, 10 Mar 2003) | 2 lines

Merged gnet_stats_gui.h and gnet_stats_gui2.h

------------------------------------------------------------------------
r2860 | cbiere | 2003-03-10 17:07:54 -0500 (Mon, 10 Mar 2003) | 2 lines

gnet_stats_gui2.c/gnet_stats_gui_update(): Refresh `last_update' only if stats were really updated

------------------------------------------------------------------------
r2859 | cbiere | 2003-03-10 17:02:38 -0500 (Mon, 10 Mar 2003) | 2 lines

gnet_stats_gui(2).c/gnet_stats_gui_update(): Added parameter `now' to reduce updates

------------------------------------------------------------------------
r2858 | cbiere | 2003-03-10 16:59:12 -0500 (Mon, 10 Mar 2003) | 2 lines

Merged gnet_stats_gui.h and gnet_stats_gui2.h

------------------------------------------------------------------------
r2857 | cbiere | 2003-03-10 16:57:32 -0500 (Mon, 10 Mar 2003) | 7 lines

fuzzy.c/fuzzy_strlower():
	`dst' was only terminated at the end of buffer.
	`i' could wrap and turn the loop into an endless one (only in theory).
fuzzy.c/fuzzy_make_word_list():
	`w->s' was one char too long not only the buffer.
	Renamed `n' to `str' and `len' to `size' for better semantic recognition.

------------------------------------------------------------------------
r2856 | cbiere | 2003-03-10 16:28:29 -0500 (Mon, 10 Mar 2003) | 4 lines

misc.c/strlcpy():
	Fixed off-by-one bug.
	Use native strlcpy() if present.

------------------------------------------------------------------------
r2855 | cbiere | 2003-03-10 13:46:39 -0500 (Mon, 10 Mar 2003) | 5 lines

fuzzy.c/fuzzy_make_word_list():
	Fixed bug; '\0' is not a member of the alnum class which causes reading
		beyond '\0'. Up to version 1.5 fuzzy.c this could also cause
		putting a '\0' *god-knows-where* into memory.

------------------------------------------------------------------------
r2854 | rmanfredi | 2003-03-09 12:00:47 -0500 (Sun, 09 Mar 2003) | 2 lines

Change web cache when an HTTP error is reported.

------------------------------------------------------------------------
r2853 | rmanfredi | 2003-03-09 11:32:36 -0500 (Sun, 09 Mar 2003) | 2 lines

Change web cache when an ERROR is reported.

------------------------------------------------------------------------
r2852 | cbiere | 2003-03-09 11:30:19 -0500 (Sun, 09 Mar 2003) | 2 lines

Replaced manual NULL pointer handling of vendor string with macro node_vendor()

------------------------------------------------------------------------
r2851 | cbiere | 2003-03-09 09:48:02 -0500 (Sun, 09 Mar 2003) | 4 lines

fuzzy.c/fuzzy_make_word_list():
	Use G_STRUCT_OFFSET() to calculate the dynamic size of word_entry *w;
		this should fix problems with walloc() and double-free()s

------------------------------------------------------------------------
r2850 | cbiere | 2003-03-09 03:04:45 -0500 (Sun, 09 Mar 2003) | 2 lines

Fixed typo

------------------------------------------------------------------------
r2849 | cbiere | 2003-03-09 02:57:04 -0500 (Sun, 09 Mar 2003) | 2 lines

Fixed usage of locale_to_utf8() due to new semantics

------------------------------------------------------------------------
r2848 | cbiere | 2003-03-09 02:54:18 -0500 (Sun, 09 Mar 2003) | 4 lines

search_gui2.c:
	Fixed usage of locale_to_utf8() due to new semantics
	Removed an unnecessary g_strdup()

------------------------------------------------------------------------
r2847 | cbiere | 2003-03-09 02:52:28 -0500 (Sun, 09 Mar 2003) | 6 lines

nodes_gui2.c:
	Fixed problem of too frequent updates; last_update wasn't refreshed
	Minor style fixes
	Removed unnecessary g_strdup()s
	Fixed usage of locale_to_utf8() due to new semantics

------------------------------------------------------------------------
r2846 | cbiere | 2003-03-09 02:48:00 -0500 (Sun, 09 Mar 2003) | 2 lines

gnet_stats_gui2.c: Save pointers to widgets during initialization

------------------------------------------------------------------------
r2845 | cbiere | 2003-03-09 02:46:25 -0500 (Sun, 09 Mar 2003) | 3 lines

monitor_gui2.c/monitor_gui_append_to_monitor():
	Use return value of gm_snprintf() for locale_to_utf8()

------------------------------------------------------------------------
r2844 | cbiere | 2003-03-09 02:43:32 -0500 (Sun, 09 Mar 2003) | 4 lines

utf8.c/locale_to_utf8():
	Zero is now used to indicate unknown string length instead of (-1)
	Changed parameter from gssize to size_t

------------------------------------------------------------------------
r2843 | cbiere | 2003-03-09 02:37:22 -0500 (Sun, 09 Mar 2003) | 5 lines

misc.c:
	gchar_to_ip_port(): Removed variable c; Cosmetic change to loop
	guid_hex_str(): Replaced gm_snprintf(); added const to parameter
	g_strlcpy(): Implemented to match documentation

------------------------------------------------------------------------
r2842 | cbiere | 2003-03-08 19:56:38 -0500 (Sat, 08 Mar 2003) | 6 lines

fuzzy.c:
    fuzzy_strlower() uses now a destination string instead of modifying
        the source; saves time because the string has to be copied anyway
    fuzzy_make_word_list() creates now a list of word_entry_t elements;
        necessary for walloc() as wfree() needs the size as parameter

------------------------------------------------------------------------
r2841 | cbiere | 2003-03-08 19:28:47 -0500 (Sat, 08 Mar 2003) | 2 lines

Mapped property allow_private_network_connection to checkbutton_config_no_rfc1918; Replaced spinbutton_config_max_banned_fd with entry_config_max_banned_fd

------------------------------------------------------------------------
r2840 | cbiere | 2003-03-08 19:19:39 -0500 (Sat, 08 Mar 2003) | 2 lines

Removed compile-time option --enable-no-rfc1918 in favour of property allow_private_network_connection

------------------------------------------------------------------------
r2839 | cbiere | 2003-03-08 19:08:11 -0500 (Sat, 08 Mar 2003) | 2 lines

[GTK2] Replaced spinbutton_config_max_banned_fd with read-only entry_config_max_banned_fd as the value is calculated by the backend

------------------------------------------------------------------------
r2838 | cbiere | 2003-03-08 19:03:34 -0500 (Sat, 08 Mar 2003) | 2 lines

Removed compile-time option --enable-no-rfc1918 in favour of property allow_private_network_connection

------------------------------------------------------------------------
r2837 | cbiere | 2003-03-08 16:10:27 -0500 (Sat, 08 Mar 2003) | 6 lines

fuzzy.c:
	Replaced any by gulong
	Slight style corrections
	Slight optimizations
	Renamed `maxscore' to `n' because of changed semantic

------------------------------------------------------------------------
r2836 | cbiere | 2003-03-08 16:02:12 -0500 (Sat, 08 Mar 2003) | 2 lines

fuzzy_compare() returns value of type gulong between 0 and (1 << FUZZY_SHIFT) now

------------------------------------------------------------------------
r2835 | wyldfire | 2003-03-08 13:38:50 -0500 (Sat, 08 Mar 2003) | 3 lines


Made max_banned_fd no longer editable and use a GtkEntry instead of a GtkSpinbutton

------------------------------------------------------------------------
r2832 | cbiere | 2003-03-06 23:31:27 -0500 (Thu, 06 Mar 2003) | 2 lines

uploads_gui2.c: Removed unused variable tmpstr

------------------------------------------------------------------------
r2831 | cbiere | 2003-03-06 23:30:51 -0500 (Thu, 06 Mar 2003) | 2 lines

main.c/log_handler(): Use less strict hex_escape()

------------------------------------------------------------------------
r2830 | cbiere | 2003-03-06 23:30:09 -0500 (Thu, 06 Mar 2003) | 2 lines

extensions.c/ext_name_atom(): Use strict hex_escape()

------------------------------------------------------------------------
r2829 | cbiere | 2003-03-06 23:28:02 -0500 (Thu, 06 Mar 2003) | 2 lines

misc.c/hex_escape(): Added parameter to switch between strict and non-strict (but still safe) escaping; suppress compiler warning

------------------------------------------------------------------------
r2828 | cbiere | 2003-03-06 22:20:44 -0500 (Thu, 06 Mar 2003) | 2 lines

Remove unused variable tmpstr

------------------------------------------------------------------------
r2827 | cbiere | 2003-03-06 21:52:07 -0500 (Thu, 06 Mar 2003) | 5 lines

settings_gui.c:
	Added property callbacks to update {up,down}load odometers
	Minor style fixes in gnet_connections_changed()
	Don't use property description for GtkTreeView tooltips

------------------------------------------------------------------------
r2826 | cbiere | 2003-03-06 21:46:15 -0500 (Thu, 06 Mar 2003) | 2 lines

Use properties to control odometers for {up,down}loads

------------------------------------------------------------------------
r2825 | cbiere | 2003-03-06 21:42:55 -0500 (Thu, 06 Mar 2003) | 2 lines

Use property "ul_running" instead of exporting running_uploads

------------------------------------------------------------------------
r2824 | cbiere | 2003-03-06 21:40:53 -0500 (Thu, 06 Mar 2003) | 2 lines

Removed gui_update_c_downloads()

------------------------------------------------------------------------
r2823 | cbiere | 2003-03-06 21:26:01 -0500 (Thu, 06 Mar 2003) | 2 lines

[GTK2] gtk2-gnutella.glade: Removed PROP_NODE_{LEAF,NORMAL,ULTRA} from unmapped stuff

------------------------------------------------------------------------
r2822 | cbiere | 2003-03-06 21:17:57 -0500 (Thu, 06 Mar 2003) | 2 lines

gnet_props.ag: Added runtime properties ul_running, ul_registered, dl_active_count

------------------------------------------------------------------------
r2821 | cbiere | 2003-03-06 21:09:29 -0500 (Thu, 06 Mar 2003) | 2 lines

prop.c/prop_set_boolean(): Corrected offset for comparing the vectors

------------------------------------------------------------------------
r2820 | wyldfire | 2003-03-06 15:34:20 -0500 (Thu, 06 Mar 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2819 | wyldfire | 2003-03-06 15:33:03 -0500 (Thu, 06 Mar 2003) | 4 lines


Converted the *_LE and *_BE macros to glib style using G_STMT_START and
  G_STMT_END

------------------------------------------------------------------------
r2818 | wyldfire | 2003-03-06 15:31:27 -0500 (Thu, 06 Mar 2003) | 3 lines


Moved download_gui_add and download_gui_removed to downloads_gui.[ch]

------------------------------------------------------------------------
r2817 | wyldfire | 2003-03-06 15:26:41 -0500 (Thu, 06 Mar 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2816 | wyldfire | 2003-03-06 15:24:45 -0500 (Thu, 06 Mar 2003) | 3 lines


Fixed the connections odometer for the different peermodes

------------------------------------------------------------------------
r2815 | wyldfire | 2003-03-06 15:23:25 -0500 (Thu, 06 Mar 2003) | 3 lines


Some layout-fixes on the odometers

------------------------------------------------------------------------
r2814 | cbiere | 2003-03-06 11:15:57 -0500 (Thu, 06 Mar 2003) | 2 lines

[GTK2] gtk2-gnutella.glade: Sync'ed with GTK1 again

------------------------------------------------------------------------
r2813 | cbiere | 2003-03-05 23:44:31 -0500 (Wed, 05 Mar 2003) | 2 lines

[GTK2] gtk2-gnutella.glade: Added Jeroen to About dialogue and sync'ed with latest GTK1 changes

------------------------------------------------------------------------
r2812 | cbiere | 2003-03-05 21:42:00 -0500 (Wed, 05 Mar 2003) | 2 lines

main.c/log_handler(): Use hex_escape() for message as it may contain malicious data

------------------------------------------------------------------------
r2811 | cbiere | 2003-03-05 21:38:40 -0500 (Wed, 05 Mar 2003) | 2 lines

misc.[ch]/hex_escape(): Use const for parameter as it won't be changed

------------------------------------------------------------------------
r2810 | wyldfire | 2003-03-05 21:07:06 -0500 (Wed, 05 Mar 2003) | 3 lines


no comment

------------------------------------------------------------------------
r2809 | wyldfire | 2003-03-05 21:05:13 -0500 (Wed, 05 Mar 2003) | 3 lines


Added odometer for leaf traffic

------------------------------------------------------------------------
r2808 | wyldfire | 2003-03-05 21:03:58 -0500 (Wed, 05 Mar 2003) | 3 lines


Traffix stats odometer fixes

------------------------------------------------------------------------
r2807 | wyldfire | 2003-03-05 21:03:18 -0500 (Wed, 05 Mar 2003) | 3 lines


Added notice about new icons taken from eMule

------------------------------------------------------------------------
r2806 | wyldfire | 2003-03-05 21:02:07 -0500 (Wed, 05 Mar 2003) | 3 lines


Some fixes to the new odometers

------------------------------------------------------------------------
r2805 | wyldfire | 2003-03-05 20:40:22 -0500 (Wed, 05 Mar 2003) | 3 lines


Added leaf bandwidth odometers

------------------------------------------------------------------------
r2804 | wyldfire | 2003-03-05 20:36:05 -0500 (Wed, 05 Mar 2003) | 4 lines


Added a few icons to the stats.
Added odometers for leaf bandwidth

------------------------------------------------------------------------
r2803 | wyldfire | 2003-03-05 20:31:59 -0500 (Wed, 05 Mar 2003) | 3 lines


Added a few new icons

------------------------------------------------------------------------
r2802 | rmanfredi | 2003-03-05 12:43:41 -0500 (Wed, 05 Mar 2003) | 2 lines

Back to the unstable version...

------------------------------------------------------------------------
r2798 | rmanfredi | 2003-03-04 14:05:08 -0500 (Tue, 04 Mar 2003) | 2 lines

Regenerated with autogen.sh.

------------------------------------------------------------------------
r2797 | rmanfredi | 2003-03-04 14:01:47 -0500 (Tue, 04 Mar 2003) | 2 lines

Added Jeroen Asselman.

------------------------------------------------------------------------
r2796 | rmanfredi | 2003-03-04 13:49:37 -0500 (Tue, 04 Mar 2003) | 2 lines

Version 0.92 beta2.

------------------------------------------------------------------------
r2795 | rmanfredi | 2003-03-04 13:47:05 -0500 (Tue, 04 Mar 2003) | 2 lines

Fixed version_tagcmp(): was not anti-symetric for 'b' and 'u'.

------------------------------------------------------------------------
r2794 | rmanfredi | 2003-03-04 13:45:03 -0500 (Tue, 04 Mar 2003) | 2 lines

Only emit the exec() argument size warning if lib_debug.

------------------------------------------------------------------------
r2793 | rmanfredi | 2003-03-04 13:43:45 -0500 (Tue, 04 Mar 2003) | 2 lines

Ban 0.92b as an hostile servent, due to its GWC hammering.

------------------------------------------------------------------------
r2792 | rmanfredi | 2003-03-03 16:31:54 -0500 (Mon, 03 Mar 2003) | 2 lines

Version of 03/03/2003.

------------------------------------------------------------------------
r2791 | rmanfredi | 2003-03-03 16:29:49 -0500 (Mon, 03 Mar 2003) | 2 lines

Minor style fix.

------------------------------------------------------------------------
r2790 | rmanfredi | 2003-03-03 16:28:52 -0500 (Mon, 03 Mar 2003) | 2 lines

Removed spurious trailing "\n" in some warnings.

------------------------------------------------------------------------
r2789 | rmanfredi | 2003-03-03 16:28:00 -0500 (Mon, 03 Mar 2003) | 2 lines

Avoid using / and % in macros from idtable.c.

------------------------------------------------------------------------
r2788 | rmanfredi | 2003-03-03 16:25:09 -0500 (Mon, 03 Mar 2003) | 2 lines

Fixed GWC hammering bug.

------------------------------------------------------------------------
r2787 | rmanfredi | 2003-03-03 16:24:25 -0500 (Mon, 03 Mar 2003) | 3 lines

Rewrote the callout queue to have a more efficient ev_link() routine, the
drawback being a slightly more costly cq_clock() call.

------------------------------------------------------------------------
r2786 | rmanfredi | 2003-03-03 16:22:27 -0500 (Mon, 03 Mar 2003) | 2 lines

Optimized guid_eq() and sha1_eq() to not call memcmp().

------------------------------------------------------------------------
r2785 | rmanfredi | 2003-03-03 01:59:57 -0500 (Mon, 03 Mar 2003) | 2 lines

Version of 02/03/2003.

------------------------------------------------------------------------
r2783 | cbiere | 2003-03-02 05:40:51 -0500 (Sun, 02 Mar 2003) | 2 lines

Version of 02/03/2003

------------------------------------------------------------------------
r2782 | cbiere | 2003-03-02 05:26:17 -0500 (Sun, 02 Mar 2003) | 6 lines

adns.c:
	Use adns_callback_t instead of a lazy gpointer
	Revised client-side to use non-blocking pipes which prevents
		deadlocks, allows partial transfers and to handle filled
		pipe buffers

------------------------------------------------------------------------
r2781 | cbiere | 2003-03-02 05:20:41 -0500 (Sun, 02 Mar 2003) | 3 lines

adns.h:	Added adns_callback_t to enforce using a callback function with
	the correct prototype

------------------------------------------------------------------------
r2780 | cbiere | 2003-03-02 05:18:25 -0500 (Sun, 02 Mar 2003) | 2 lines

nodes_cb(2).c: Added add_node_helper() for proper type translation

------------------------------------------------------------------------
r2779 | cbiere | 2003-03-02 00:55:51 -0500 (Sun, 02 Mar 2003) | 2 lines

Applied patch by Murphy <juncus@telus.net> which fixes typos in tooltips

------------------------------------------------------------------------
r2778 | cbiere | 2003-03-02 00:44:56 -0500 (Sun, 02 Mar 2003) | 3 lines

Removed all GDK legacy from core i.e., s/GDK_INPUT/INPUT_EVENT/ and
	no #include <gdk/gdk.h> any longer

------------------------------------------------------------------------
r2777 | cbiere | 2003-03-01 23:34:24 -0500 (Sat, 01 Mar 2003) | 2 lines

adns.h: Remove unused definitions

------------------------------------------------------------------------
r2776 | cbiere | 2003-03-01 23:30:43 -0500 (Sat, 01 Mar 2003) | 13 lines

sockets.c/socket_connect_prepare():
	Moved ip parameter to socket_connect_finalize()
sockets.c/socket_connect_finalize():
	Fixed typo: addr <-> lcladdr
	Added another memset() to clear lcladdr
	Don't call socket_destroy() if the function was called from the
		ADNS callback which would cause a second socket_destroy() later
sockets.c/socket_connect_by_name_helper():
	Don't call socket_destroy() but set SOCK_ADNS_FAILED in case of an error
sockets.c/socket_connect_by_name():
	If the callback for adns_resolve was already invoked, check the status
	and call socket_destroy() in case of an error

------------------------------------------------------------------------
r2775 | cbiere | 2003-03-01 23:14:35 -0500 (Sat, 01 Mar 2003) | 5 lines

sockets.h/struct gnutella_socket:
	Replaced `gboolean adns_pending' with `gint adns' as status variable
	Added `adns_msg' which should point to a static error message when
		SOCK_ADNS_FAILED is set, points to NULL otherwise

------------------------------------------------------------------------
r2774 | cbiere | 2003-03-01 23:07:13 -0500 (Sat, 01 Mar 2003) | 3 lines

adns.c/adns_resolve(): Returns FALSE if the resolution happened
	synchronous, otherwise returns TRUE.

------------------------------------------------------------------------
r2773 | cbiere | 2003-03-01 23:01:51 -0500 (Sat, 01 Mar 2003) | 3 lines

oldconfig.c/config_set_param(): Translate proxy_connections to
	proxy_protocol=PROXY_NONE from old config files

------------------------------------------------------------------------
r2772 | cbiere | 2003-03-01 19:17:50 -0500 (Sat, 01 Mar 2003) | 4 lines

[GTK2] gtk2-gnutella.glade:
	- Added spinbutton_config_track_props (sync with GTK1)
	- main_window_config_sel_tab: center contents

------------------------------------------------------------------------
r2771 | rmanfredi | 2003-03-01 17:21:04 -0500 (Sat, 01 Mar 2003) | 3 lines

Avoid uninitialized memory reads by bind(): zero the addr structs.
Forgot to free the list in socket_timer().

------------------------------------------------------------------------
r2770 | rmanfredi | 2003-03-01 13:55:43 -0500 (Sat, 01 Mar 2003) | 2 lines

Special case the insertion to an empty array in qlink_insert().

------------------------------------------------------------------------
r2769 | rmanfredi | 2003-03-01 07:23:14 -0500 (Sat, 01 Mar 2003) | 2 lines

Changed socket_timer() to avoid removing entries whilst iterating on list.

------------------------------------------------------------------------
r2768 | rmanfredi | 2003-03-01 07:22:11 -0500 (Sat, 01 Mar 2003) | 2 lines

The ADNS subprocess will now be identified by "ps" as the "DNS helper".

------------------------------------------------------------------------
r2767 | rmanfredi | 2003-03-01 07:21:10 -0500 (Sat, 01 Mar 2003) | 2 lines

Added gm_setproctitle().

------------------------------------------------------------------------
r2766 | rmanfredi | 2003-03-01 04:03:53 -0500 (Sat, 01 Mar 2003) | 2 lines

Fixed assertion failure when parsing PARQ replies.

------------------------------------------------------------------------
r2765 | rmanfredi | 2003-03-01 04:00:35 -0500 (Sat, 01 Mar 2003) | 2 lines

Show that we sent crawler info when remote disconnects after our reply.

------------------------------------------------------------------------
r2764 | rmanfredi | 2003-02-28 19:32:56 -0500 (Fri, 28 Feb 2003) | 2 lines

Version of 28/02/2003.

------------------------------------------------------------------------
r2763 | rmanfredi | 2003-02-28 19:30:56 -0500 (Fri, 28 Feb 2003) | 4 lines

Fixed mq_service(): need to saturate the lower layer whilst running, lest
we run the risk of never being called again when the lower layer has
finished flushing its data => the TX side freezes.

------------------------------------------------------------------------
r2762 | rmanfredi | 2003-02-28 19:27:55 -0500 (Fri, 28 Feb 2003) | 2 lines

Added some debugging traces whilst chasing the "connection freeze" problem.

------------------------------------------------------------------------
r2761 | rmanfredi | 2003-02-28 19:25:44 -0500 (Fri, 28 Feb 2003) | 2 lines

Turned an old g_return_if_fail() from legacy code into a g_assert().

------------------------------------------------------------------------
r2760 | rmanfredi | 2003-02-28 19:24:09 -0500 (Fri, 28 Feb 2003) | 2 lines

Optimized search_has_muid(): sent MUIDs are now stored in a hash table.

------------------------------------------------------------------------
r2759 | rmanfredi | 2003-02-28 19:22:28 -0500 (Fri, 28 Feb 2003) | 3 lines

Optimized filter_apply() by pre-computing the length of the matching text
at filter "compilation" time, to avoid endless strlen() calls.

------------------------------------------------------------------------
r2758 | rmanfredi | 2003-02-28 19:18:20 -0500 (Fri, 28 Feb 2003) | 4 lines

The `dl_by_time' list was split into a hashed array, to cut down the number
of item comparisons we do when inserting, at the cost of more work when
traversing the list.

------------------------------------------------------------------------
r2757 | rmanfredi | 2003-02-27 15:30:30 -0500 (Thu, 27 Feb 2003) | 2 lines

Don't encode '/' in the query portion of URLs.

------------------------------------------------------------------------
r2756 | rmanfredi | 2003-02-27 15:28:39 -0500 (Thu, 27 Feb 2003) | 3 lines

Optimized message queue to avoid huge CPU utilization during flow-control.
Optimized mq_service() to avoid useless I/O vector building.

------------------------------------------------------------------------
r2755 | wyldfire | 2003-02-27 13:59:43 -0500 (Thu, 27 Feb 2003) | 2 lines

Replaced call to gdk_input_add with inputevt_add

------------------------------------------------------------------------
r2754 | wyldfire | 2003-02-27 09:57:19 -0500 (Thu, 27 Feb 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2753 | wyldfire | 2003-02-27 09:54:52 -0500 (Thu, 27 Feb 2003) | 7 lines


event.[ch]: Added as a replacement for listener.h. For now it's used only
  in the property system. The bonus over listener.h: control of callback
  frequency on a per-listener base.
Added provisions to have GCallback defined when using Gtk1 and Gtk1. It's
  needed by event.[ch]

------------------------------------------------------------------------
r2752 | wyldfire | 2003-02-27 09:53:40 -0500 (Thu, 27 Feb 2003) | 5 lines


shell.c:
- No longer show auth cookie in debug output
- New command: "PRINT [property]" to display current value of a propert

------------------------------------------------------------------------
r2751 | wyldfire | 2003-02-27 09:52:55 -0500 (Thu, 27 Feb 2003) | 9 lines


(forgot a few things in the last commit):

prop.[ch]:
- Upgraded to use event.[ch]
- Added prop_get_by_name(): look up a property by name.
- Added prop_to_string(): converting a property to string reprsenentation,
  doesn't work for all property types yet.

------------------------------------------------------------------------
r2750 | wyldfire | 2003-02-27 09:26:32 -0500 (Thu, 27 Feb 2003) | 4 lines


Upgraded property_map in settings_gui.c to make use of the new frequency
control feature of prop.[ch]

------------------------------------------------------------------------
r2749 | wyldfire | 2003-02-27 09:25:24 -0500 (Thu, 27 Feb 2003) | 3 lines


Upgraded prop.[ch] to use event.[ch]

------------------------------------------------------------------------
r2748 | wyldfire | 2003-02-27 09:24:17 -0500 (Thu, 27 Feb 2003) | 3 lines


Upgraded props.tpl to use event.[ch], regenerated property sources.

------------------------------------------------------------------------
r2747 | wyldfire | 2003-02-27 09:23:59 -0500 (Thu, 27 Feb 2003) | 3 lines


Upgraded props.tpl to use event.[ch], regenerated property sources

------------------------------------------------------------------------
r2746 | wyldfire | 2003-02-27 09:21:56 -0500 (Thu, 27 Feb 2003) | 4 lines


Upgraded props.tpl to use event.[ch], regenerated property sources.
Added seperate property to control debug level of the property system.

------------------------------------------------------------------------
r2745 | wyldfire | 2003-02-27 09:09:29 -0500 (Thu, 27 Feb 2003) | 3 lines


Added seperate property to control debug level of the property system.

------------------------------------------------------------------------
r2744 | wyldfire | 2003-02-27 09:01:25 -0500 (Thu, 27 Feb 2003) | 5 lines


Added event.[ch] as a replacement for listener.h. For now it's used only
in the property system. The bonus over listener.h: control of callback
frequency on a per-listener base

------------------------------------------------------------------------
r2743 | wyldfire | 2003-02-27 08:59:21 -0500 (Thu, 27 Feb 2003) | 3 lines


Had to regenerate Makefiles in response to adding event.[ch]

------------------------------------------------------------------------
r2742 | cbiere | 2003-02-27 01:16:19 -0500 (Thu, 27 Feb 2003) | 2 lines

PROP_PROXY_CONNECTIONS: Don't save this property any longer and set it to TRUE per default

------------------------------------------------------------------------
r2741 | cbiere | 2003-02-27 01:11:11 -0500 (Thu, 27 Feb 2003) | 2 lines

proxy_protocol_changed(): Use gnet_prop_set_guint32_val() instead of gnet_prop_set_guint32()

------------------------------------------------------------------------
r2739 | rmanfredi | 2003-02-26 04:49:15 -0500 (Wed, 26 Feb 2003) | 2 lines

Restored old ban_vendor() signature.

------------------------------------------------------------------------
r2738 | rmanfredi | 2003-02-26 04:27:54 -0500 (Wed, 26 Feb 2003) | 2 lines

Version of 25/02/2003.

------------------------------------------------------------------------
r2737 | rmanfredi | 2003-02-26 04:24:34 -0500 (Wed, 26 Feb 2003) | 2 lines

Added token level.

------------------------------------------------------------------------
r2736 | rmanfredi | 2003-02-26 04:23:40 -0500 (Wed, 26 Feb 2003) | 2 lines

Some servents send X-Try headers at every handshaking step, so process them.

------------------------------------------------------------------------
r2735 | rmanfredi | 2003-02-26 04:22:18 -0500 (Wed, 26 Feb 2003) | 3 lines

Fixed the base32/base64 code to correctly process padding, and return the
amount of decoded bytes, padding not included.

------------------------------------------------------------------------
r2734 | rmanfredi | 2003-02-26 04:19:15 -0500 (Wed, 26 Feb 2003) | 2 lines

Added CRC32 code.

------------------------------------------------------------------------
r2733 | cbiere | 2003-02-25 18:21:25 -0500 (Tue, 25 Feb 2003) | 2 lines

nodes_gui2.c: increase buffer sizes of proto_tmp, timestr and version to prevent string truncation

------------------------------------------------------------------------
r2732 | cbiere | 2003-02-25 18:13:16 -0500 (Tue, 25 Feb 2003) | 2 lines

nodes_gui.c/nodes_gui_add_node(): double size of proto_tmp so it can really hold 2 ints

------------------------------------------------------------------------
r2730 | cbiere | 2003-02-23 19:39:52 -0500 (Sun, 23 Feb 2003) | 2 lines

http_range_parse(): Cast pointer differences to gint to match the format string arguments for g_warning().

------------------------------------------------------------------------
r2729 | rmanfredi | 2003-02-23 16:57:20 -0500 (Sun, 23 Feb 2003) | 2 lines

Forgot to use network order when writing token's timestamp.

------------------------------------------------------------------------
r2728 | cbiere | 2003-02-23 16:19:54 -0500 (Sun, 23 Feb 2003) | 2 lines

adns.c: Remove __attribute__((__packed__)) because it's unnecessary and causes crashes on certain architectures

------------------------------------------------------------------------
r2727 | cbiere | 2003-02-23 10:46:45 -0500 (Sun, 23 Feb 2003) | 2 lines

Version of 23/02/2003

------------------------------------------------------------------------
r2726 | cbiere | 2003-02-23 10:35:07 -0500 (Sun, 23 Feb 2003) | 2 lines

[GTK2] locale_to_utf8: moved function from misc.[ch] to utf8.[ch]

------------------------------------------------------------------------
r2725 | cbiere | 2003-02-23 10:33:29 -0500 (Sun, 23 Feb 2003) | 7 lines

adns.c:	Added caching; caching happens server-side, if the server dies
		caching will be started client-side;
		Fixed typo (children -> child);
		Debug warnings depend on dbg > 1 or dbg > 2, now;
		Declared larger variables as static;
		adns_resolve(): usage of fallback is only reported once

------------------------------------------------------------------------
r2724 | cbiere | 2003-02-23 01:39:29 -0500 (Sun, 23 Feb 2003) | 2 lines

Version of 23/02/2003

------------------------------------------------------------------------
r2723 | cbiere | 2003-02-23 01:31:12 -0500 (Sun, 23 Feb 2003) | 11 lines

adns_do_transfer(): forgot to rename write to do_write
adns_gethostbyname(): use host_to_ip() instead of gethostbyname()
adns_callback(): remove the callback manually because the relay in inputevt.c
    doesn't propagate the return value
	close() pipe if adns_do_read() fails
adns_init(): close stdin and wire the file descriptor to /dev/null (just in
    case because it's shared with the main process;
    use _exit() instead of exit();
    close() all opened file descriptors in case fork() fails
adns_resolve(): close() pipe if adns_do_write() fails and don't retry

------------------------------------------------------------------------
r2722 | cbiere | 2003-02-23 01:00:54 -0500 (Sun, 23 Feb 2003) | 3 lines

main(): ignore SIGINT and SIGPIPE before adns_init();\
         use sig_ignore also for SIGXFSZ

------------------------------------------------------------------------
r2721 | cbiere | 2003-02-23 00:56:33 -0500 (Sun, 23 Feb 2003) | 2 lines

host_to_ip(): declare hostname as const

------------------------------------------------------------------------
r2720 | cbiere | 2003-02-23 00:54:53 -0500 (Sun, 23 Feb 2003) | 2 lines

Hide variable "pos" if HAVE_SENDFILE is undefined

------------------------------------------------------------------------
r2719 | rmanfredi | 2003-02-22 19:12:07 -0500 (Sat, 22 Feb 2003) | 2 lines

Applied Christian's patch fixing the type of gtk_tag and inputevt_add().

------------------------------------------------------------------------
r2718 | rmanfredi | 2003-02-22 18:30:24 -0500 (Sat, 22 Feb 2003) | 2 lines

Forgot trailing return in tok_version_valid().

------------------------------------------------------------------------
r2717 | rmanfredi | 2003-02-22 17:52:34 -0500 (Sat, 22 Feb 2003) | 2 lines

Version of 23/02/2003.

------------------------------------------------------------------------
r2716 | rmanfredi | 2003-02-22 17:43:21 -0500 (Sat, 22 Feb 2003) | 2 lines

Avoid always polling at the minimum specified by the download server.

------------------------------------------------------------------------
r2715 | rmanfredi | 2003-02-22 17:37:59 -0500 (Sat, 22 Feb 2003) | 2 lines

Partially validate version whose token is given.

------------------------------------------------------------------------
r2714 | cbiere | 2003-02-22 15:39:59 -0500 (Sat, 22 Feb 2003) | 2 lines

[GTK2] Use kill_upload() instead of doing the same manually (also removes a compile warning)

------------------------------------------------------------------------
r2713 | rmanfredi | 2003-02-22 14:35:28 -0500 (Sat, 22 Feb 2003) | 2 lines

Forgot to negate the return of version_check().

------------------------------------------------------------------------
r2712 | rmanfredi | 2003-02-22 14:34:48 -0500 (Sat, 22 Feb 2003) | 2 lines

Added.

------------------------------------------------------------------------
r2711 | cbiere | 2003-02-22 14:04:42 -0500 (Sat, 22 Feb 2003) | 2 lines

The user_callback (parameter for adns_resolve()) was called twice if the hostname was an IP string; this caused s->gdk_tag != 0 in socket_connect_finalize() because it was called twice due to this bug

------------------------------------------------------------------------
r2710 | guruz | 2003-02-22 12:54:32 -0500 (Sat, 22 Feb 2003) | 2 lines

added MLDonkey vendor code

------------------------------------------------------------------------
r2709 | rmanfredi | 2003-02-22 10:15:46 -0500 (Sat, 22 Feb 2003) | 2 lines

Forgot the token.

------------------------------------------------------------------------
r2708 | rmanfredi | 2003-02-22 09:59:38 -0500 (Sat, 22 Feb 2003) | 2 lines

Requeue instead of stopping on retryable condition.

------------------------------------------------------------------------
r2707 | rmanfredi | 2003-02-22 09:49:08 -0500 (Sat, 22 Feb 2003) | 2 lines

Version of 22/02/2003.

------------------------------------------------------------------------
r2706 | rmanfredi | 2003-02-22 09:48:02 -0500 (Sat, 22 Feb 2003) | 2 lines

Added version tokens.

------------------------------------------------------------------------
r2705 | cbiere | 2003-02-20 23:27:43 -0500 (Thu, 20 Feb 2003) | 2 lines

Fixed socket_free(): don't close file descriptor too early and deinitialize variables

------------------------------------------------------------------------
r2704 | cbiere | 2003-02-20 22:32:46 -0500 (Thu, 20 Feb 2003) | 2 lines

Version of 21/02/2003

------------------------------------------------------------------------
r2703 | cbiere | 2003-02-20 22:24:50 -0500 (Thu, 20 Feb 2003) | 8 lines

Added socket_connect_prepare() to reduce double coded
Added adns_pending to which indicates whether the adns callback has been invoked
Added socket type SOCK_TYPE_DESTROYING which is used free the socket after the
	adns callback has been invoked; prevents accessing already free()d memory.
Replaced assertion in socket_connect_finalize() because a event handler might have been
	installed while resolving the hostname; this is only a temporarily work around and
	not a solution!

------------------------------------------------------------------------
r2702 | cbiere | 2003-02-20 22:14:07 -0500 (Thu, 20 Feb 2003) | 2 lines

Removed #include <time.h> because ctime() isn't used any longer

------------------------------------------------------------------------
r2701 | rmanfredi | 2003-02-20 18:55:29 -0500 (Thu, 20 Feb 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2700 | rmanfredi | 2003-02-20 18:53:50 -0500 (Thu, 20 Feb 2003) | 2 lines

Now uses G_N_ELEMENTS() to determine the amount of items in array.

------------------------------------------------------------------------
r2699 | rmanfredi | 2003-02-20 18:52:48 -0500 (Thu, 20 Feb 2003) | 2 lines

Integrated Christian Biere's ADNS patch (fixes bug #662916).

------------------------------------------------------------------------
r2698 | rmanfredi | 2003-02-17 13:06:41 -0500 (Mon, 17 Feb 2003) | 2 lines

Would not remove all the downloads from a given host sometimes.

------------------------------------------------------------------------
r2697 | cbiere | 2003-02-16 13:49:31 -0500 (Sun, 16 Feb 2003) | 2 lines

Use GINT_TO_POINTER() for int->pointer casts

------------------------------------------------------------------------
r2696 | cbiere | 2003-02-16 13:48:16 -0500 (Sun, 16 Feb 2003) | 2 lines

Fix the (tree node, tab) mapping for GTK1

------------------------------------------------------------------------
r2695 | cbiere | 2003-02-16 07:26:27 -0500 (Sun, 16 Feb 2003) | 2 lines

Hide GTK2-specific functions when compiling with GTK1

------------------------------------------------------------------------
r2694 | rmanfredi | 2003-02-15 17:40:47 -0500 (Sat, 15 Feb 2003) | 2 lines

Version of 15/02/2003.

------------------------------------------------------------------------
r2693 | cbiere | 2003-02-15 13:49:06 -0500 (Sat, 15 Feb 2003) | 2 lines

[GTK2] Added config panel with buttons to sub-sections and short descriptions

------------------------------------------------------------------------
r2692 | rmanfredi | 2003-02-15 13:48:34 -0500 (Sat, 15 Feb 2003) | 3 lines

Associate download with move context early in case we cannot create the
file on the filesystem: d_end() processing must still be able to run.

------------------------------------------------------------------------
r2691 | cbiere | 2003-02-15 05:59:16 -0500 (Sat, 15 Feb 2003) | 5 lines

[GTK2] Integrated "reparenting patch" by ko (thx a lot!)
[GTK2] Changed layout for config tabs
[GTK2] Both changes fix bug #666629 (heavy memory usage when compiling with
       optimization)

------------------------------------------------------------------------
r2690 | rmanfredi | 2003-02-11 21:18:15 -0500 (Tue, 11 Feb 2003) | 2 lines

Don't lead them to the leaf status if we can't accept leaves.

------------------------------------------------------------------------
r2689 | rmanfredi | 2003-02-11 21:16:58 -0500 (Tue, 11 Feb 2003) | 2 lines

Forgot to add the "sinking" state to the ESTABLISHING macro.

------------------------------------------------------------------------
r2687 | cbiere | 2003-02-09 10:14:14 -0500 (Sun, 09 Feb 2003) | 5 lines

Fixed problem with bit shift:
	* On x86 only the 5 lower bits of the shift value seem to be used. This
      isn't portable e.g., it doesn't work on PPC. Thus, we must do the
      modulo operation explicitly.

------------------------------------------------------------------------
r2686 | cbiere | 2003-02-09 10:10:28 -0500 (Sun, 09 Feb 2003) | 2 lines

Mark CVS as unstable again

------------------------------------------------------------------------
r2681 | rmanfredi | 2003-02-08 10:50:20 -0500 (Sat, 08 Feb 2003) | 2 lines

Beta 0.92.

------------------------------------------------------------------------
r2679 | rmanfredi | 2003-02-08 10:30:33 -0500 (Sat, 08 Feb 2003) | 2 lines

Beta 0.92.

------------------------------------------------------------------------
r2678 | rmanfredi | 2003-02-08 10:07:36 -0500 (Sat, 08 Feb 2003) | 2 lines

Make sure we react to the peermode change asynchronously.

------------------------------------------------------------------------
r2677 | rmanfredi | 2003-02-08 09:23:12 -0500 (Sat, 08 Feb 2003) | 4 lines

When downgrading from ultra to leaf mode due to peer request, be sure to
use the property system to change the "current_peermode" property, instead
of writing directly to the variable!

------------------------------------------------------------------------
r2676 | rmanfredi | 2003-02-08 07:14:31 -0500 (Sat, 08 Feb 2003) | 2 lines

New FALSE default for the "fuzzy_filter_dmesh" property.

------------------------------------------------------------------------
r2675 | rmanfredi | 2003-02-08 07:12:32 -0500 (Sat, 08 Feb 2003) | 3 lines

Be sure to call bsched_set_peermode() each time a bandwidth value is changed
so that we can adjust the schedulers according to the current mode.

------------------------------------------------------------------------
r2674 | rmanfredi | 2003-02-08 07:07:28 -0500 (Sat, 08 Feb 2003) | 3 lines

Refactored upload_stats_dump_history(), and added upload_stats_close().
Cleanup and dumping are now clearly separated.

------------------------------------------------------------------------
r2673 | rmanfredi | 2003-02-08 07:06:13 -0500 (Sat, 08 Feb 2003) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r2672 | rmanfredi | 2003-02-07 17:51:54 -0500 (Fri, 07 Feb 2003) | 2 lines

Version of 07/02/2003.

------------------------------------------------------------------------
r2671 | rmanfredi | 2003-02-07 17:24:32 -0500 (Fri, 07 Feb 2003) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r2670 | rmanfredi | 2003-02-07 17:23:19 -0500 (Fri, 07 Feb 2003) | 2 lines

Fixed reading of free'd memory.

------------------------------------------------------------------------
r2669 | rmanfredi | 2003-02-07 17:21:55 -0500 (Fri, 07 Feb 2003) | 2 lines

Added upload_stats_free_all() to clean up memory on exit.

------------------------------------------------------------------------
r2668 | rmanfredi | 2003-02-07 17:18:46 -0500 (Fri, 07 Feb 2003) | 2 lines

Allow user to abort actively-queued downloads.

------------------------------------------------------------------------
r2667 | rmanfredi | 2003-02-06 14:50:04 -0500 (Thu, 06 Feb 2003) | 2 lines

Prefix all warnings with a timestamp [From Christian Biere].

------------------------------------------------------------------------
r2666 | rmanfredi | 2003-02-06 14:48:49 -0500 (Thu, 06 Feb 2003) | 2 lines

Had mistakenly added the "sinking" state to DOWNLOAD_IS_ACTIVE().

------------------------------------------------------------------------
r2665 | rmanfredi | 2003-02-06 02:24:23 -0500 (Thu, 06 Feb 2003) | 2 lines

Version of 05/02/2003.

------------------------------------------------------------------------
r2664 | rmanfredi | 2003-02-06 02:23:07 -0500 (Thu, 06 Feb 2003) | 2 lines

Added missing memory cleanup to shutdown calls, preventing leak detection.

------------------------------------------------------------------------
r2663 | rmanfredi | 2003-02-06 02:22:13 -0500 (Thu, 06 Feb 2003) | 2 lines

Send PUSH messages at max TTL value, not my TTL in case it needs re-routing.

------------------------------------------------------------------------
r2662 | rmanfredi | 2003-02-06 02:20:35 -0500 (Thu, 06 Feb 2003) | 2 lines

Fixed dmesh fuzzy matching memory corruption.

------------------------------------------------------------------------
r2661 | cbiere | 2003-02-05 22:27:16 -0500 (Wed, 05 Feb 2003) | 2 lines

Sync'ed configure with configure.in

------------------------------------------------------------------------
r2660 | rmanfredi | 2003-02-04 17:36:58 -0500 (Tue, 04 Feb 2003) | 2 lines

Integrated fix in get_header_value() [From Jeroen Asselman].

------------------------------------------------------------------------
r2659 | rmanfredi | 2003-02-04 16:24:34 -0500 (Tue, 04 Feb 2003) | 2 lines

Version of 04/02/2003.

------------------------------------------------------------------------
r2658 | rmanfredi | 2003-02-04 16:22:14 -0500 (Tue, 04 Feb 2003) | 2 lines

Give unused reserved bandwidth for leaf nodes to HTTP traffic.

------------------------------------------------------------------------
r2657 | rmanfredi | 2003-02-04 16:20:45 -0500 (Tue, 04 Feb 2003) | 3 lines

New properties "pfsp_server", "pfsp_first_chunk" for PFSP (unused for now).
New property "fuzzy_filter_dmesh" to toggle fuzzy dmesh filtering.

------------------------------------------------------------------------
r2656 | rmanfredi | 2003-02-04 16:18:07 -0500 (Tue, 04 Feb 2003) | 2 lines

Shortened the string displayed for queued download entries.

------------------------------------------------------------------------
r2655 | rmanfredi | 2003-02-04 16:16:49 -0500 (Tue, 04 Feb 2003) | 2 lines

Integrated fuzzy dmesh filtering for non-N2R entries [From Alex Bennee].

------------------------------------------------------------------------
r2654 | rmanfredi | 2003-02-04 15:16:28 -0500 (Tue, 04 Feb 2003) | 2 lines

Abort download if handed out an URL that is too large (probably garbage).

------------------------------------------------------------------------
r2653 | cbiere | 2003-02-04 07:44:56 -0500 (Tue, 04 Feb 2003) | 2 lines

[GTK2] Fixed #include for glade files

------------------------------------------------------------------------
r2652 | rmanfredi | 2003-02-03 17:23:40 -0500 (Mon, 03 Feb 2003) | 2 lines

Version of 03/02/2003.

------------------------------------------------------------------------
r2651 | rmanfredi | 2003-02-03 17:22:26 -0500 (Mon, 03 Feb 2003) | 4 lines

Raised minimal query routing table size to 128 K slots, and lowered the
sparseness and conflict ratios to check whether we can double the routing
table size.

------------------------------------------------------------------------
r2650 | rmanfredi | 2003-02-03 17:18:52 -0500 (Mon, 03 Feb 2003) | 2 lines

Integrated PARQ patch: client-side is fully supported [from Jeroen Asselman].

------------------------------------------------------------------------
r2649 | rmanfredi | 2003-02-03 15:29:50 -0500 (Mon, 03 Feb 2003) | 2 lines

Added inclusion of "common.h" for FreeBSD 4.7.

------------------------------------------------------------------------
r2648 | rmanfredi | 2003-02-03 02:16:22 -0500 (Mon, 03 Feb 2003) | 2 lines

Fixed get_header_value() to look for a ',' separator as well.

------------------------------------------------------------------------
r2647 | cbiere | 2003-02-02 19:43:59 -0500 (Sun, 02 Feb 2003) | 2 lines

[GTK2] Disable closing of the shutdown window which would crash GtkG

------------------------------------------------------------------------
r2646 | rmanfredi | 2003-02-02 18:39:24 -0500 (Sun, 02 Feb 2003) | 2 lines

Fixed status display for remotely queued entries.

------------------------------------------------------------------------
r2645 | rmanfredi | 2003-02-02 18:28:11 -0500 (Sun, 02 Feb 2003) | 2 lines

Fixed parq_download_add_header(): now gets length of buffer explicitly.

------------------------------------------------------------------------
r2644 | rmanfredi | 2003-02-02 18:04:45 -0500 (Sun, 02 Feb 2003) | 2 lines

Version of 02/02/2003.

------------------------------------------------------------------------
r2643 | rmanfredi | 2003-02-02 18:03:06 -0500 (Sun, 02 Feb 2003) | 3 lines

First experimental support for PARQ (active queuing only, client-side)
[From Jeroen Asselman].

------------------------------------------------------------------------
r2642 | rmanfredi | 2003-02-02 17:56:44 -0500 (Sun, 02 Feb 2003) | 2 lines

When doing SEEK_SET, check that lseek() returns the right offset.

------------------------------------------------------------------------
r2641 | rmanfredi | 2003-02-02 15:27:15 -0500 (Sun, 02 Feb 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2640 | rmanfredi | 2003-02-02 15:26:23 -0500 (Sun, 02 Feb 2003) | 4 lines

Made sure `n' is no greater than INT_MAX for gm_*snprintf() calls.
Don't forget to reset str[0] to NUL in case we have to strlen(str) within
the gm_*snprintf() calls.

------------------------------------------------------------------------
r2639 | rmanfredi | 2003-02-02 15:18:51 -0500 (Sun, 02 Feb 2003) | 2 lines

Fixed memory leak on the query sending path in ultra mode.

------------------------------------------------------------------------
r2638 | rmanfredi | 2003-02-02 15:16:57 -0500 (Sun, 02 Feb 2003) | 4 lines

Changed freeing order for the existing query table when a RESET is received.
Protect against broken servents that don't send us QRP patches covering
the whole query table.

------------------------------------------------------------------------
r2637 | rmanfredi | 2003-02-02 15:13:47 -0500 (Sun, 02 Feb 2003) | 2 lines

Fixed final cleanup to also discard the recent pong cache.

------------------------------------------------------------------------
r2636 | rmanfredi | 2003-02-02 15:13:04 -0500 (Sun, 02 Feb 2003) | 3 lines

Be sure to not truncate the headers for crawler replies in the middle
of an IP address [From Christian Biere].

------------------------------------------------------------------------
r2635 | rmanfredi | 2003-02-02 15:07:40 -0500 (Sun, 02 Feb 2003) | 4 lines

When seeking to get the fileinfo trailer, don't use SEEK_END with a
negative offset, but use SEEK_SET with an explicit positive value to
avoid problems when off_t is 8-byte wide.

------------------------------------------------------------------------
r2634 | rmanfredi | 2003-02-02 15:03:20 -0500 (Sun, 02 Feb 2003) | 2 lines

No longer free remaining atoms in atom_warn_free(), for leak detectors.

------------------------------------------------------------------------
r2633 | cbiere | 2003-02-02 08:32:45 -0500 (Sun, 02 Feb 2003) | 2 lines

[GTK2] Fixed group settings for radios in state and flags filters (thx to sK-800)

------------------------------------------------------------------------
r2632 | cbiere | 2003-02-02 04:24:07 -0500 (Sun, 02 Feb 2003) | 2 lines

[GTK2] Revised gtk_tree_selection_collect_data(): doesn't need gtk+-2.2 and should be more than twice as fast

------------------------------------------------------------------------
r2631 | cbiere | 2003-02-02 00:59:39 -0500 (Sun, 02 Feb 2003) | 2 lines

[GTK2] Added T'aZ to About dialogue; Added PROP_CRAWLER_VISIT_COUNT Config->Debug->Unmapped

------------------------------------------------------------------------
r2630 | cbiere | 2003-02-02 00:53:41 -0500 (Sun, 02 Feb 2003) | 2 lines

[GTK2] Added PROP_CRAWLER_VISIT_COUNT

------------------------------------------------------------------------
r2629 | rmanfredi | 2003-02-01 18:33:40 -0500 (Sat, 01 Feb 2003) | 2 lines

Version of 01/02/2003.

------------------------------------------------------------------------
r2628 | rmanfredi | 2003-02-01 18:25:58 -0500 (Sat, 01 Feb 2003) | 3 lines

Replaced all broken g_snprintf() and g_vsnprintf() calls by calls to
fixed gm_snprintf() and gm_vsnprintf().  Broken calls are now forbidden.

------------------------------------------------------------------------
r2627 | rmanfredi | 2003-02-01 18:25:04 -0500 (Sat, 01 Feb 2003) | 2 lines

configure now looks for vsnprintf() and defines HAVE_VSNPRINTF.

------------------------------------------------------------------------
r2626 | rmanfredi | 2003-02-01 18:16:59 -0500 (Sat, 01 Feb 2003) | 3 lines

Replaced all broken g_snprintf() and g_vsnprintf() calls by calls to
fixed gm_snprintf() and gm_vsnprintf().  Broken calls are now forbidden.

------------------------------------------------------------------------
r2625 | wyldfire | 2003-02-01 13:55:50 -0500 (Sat, 01 Feb 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2624 | wyldfire | 2003-02-01 13:53:56 -0500 (Sat, 01 Feb 2003) | 13 lines


Integrated patch by ko <junkpile@free.fr>:
- moved/renamed filter rule adding convenience functions from
  search_cb.c and search_cb2.c to filter.c
- moved/renamed add_targetted_search from search_cb.c and search_cb2.c to
  gui.c
- moved/renamed record comparing functions from search_cb.c and
  search_cb2.c to gui.c

Integrated patch by T'aZ <tazdev@altern.org>
- show "none auto selected" in the status bar when no additional results
  were autoselected

------------------------------------------------------------------------
r2623 | wyldfire | 2003-02-01 13:50:49 -0500 (Sat, 01 Feb 2003) | 7 lines


Integrated patch by ko <junkpile@free.fr>:
- moved/renamed add_targetted_search from search_cb.c and search_cb2.c to
  gui.c
- moved/renamed record comparing functions from search_cb.c and
  search_cb2.c to gui.c

------------------------------------------------------------------------
r2622 | wyldfire | 2003-02-01 13:48:15 -0500 (Sat, 01 Feb 2003) | 5 lines


Integrated patch by ko <junkpile@free.fr>:
moved/rename filter rule adding convenience functions from
search_cb.c and search_cb2.c to filter.c

------------------------------------------------------------------------
r2621 | wyldfire | 2003-02-01 13:45:22 -0500 (Sat, 01 Feb 2003) | 5 lines


Integrated patch by ko <junkpile@free.fr>:
- gtk-missing.c: Optimize clist collect_data
- gtk-missing.c: added tree_selection_collect_data

------------------------------------------------------------------------
r2620 | wyldfire | 2003-02-01 13:41:47 -0500 (Sat, 01 Feb 2003) | 4 lines


Reduced padding on uptime
Added "edit filters" button back to search pane

------------------------------------------------------------------------
r2619 | wyldfire | 2003-02-01 13:39:05 -0500 (Sat, 01 Feb 2003) | 3 lines


Remove unnecessary (GdkInputCondition) cast. (Thx ko)

------------------------------------------------------------------------
r2618 | rmanfredi | 2003-02-01 09:53:00 -0500 (Sat, 01 Feb 2003) | 2 lines

Include "common.h" to allow compiles with -DUSE_DMALLOC.

------------------------------------------------------------------------
r2617 | rmanfredi | 2003-02-01 09:51:17 -0500 (Sat, 01 Feb 2003) | 5 lines

Limit the headers sent back to crawlers to the strict minimum.
Forbid outgoing connections to a Gnutella crawler.
Apply vendor-specific banning early, so banned people know about it even
if we're otherwise busy.

------------------------------------------------------------------------
r2616 | rmanfredi | 2003-02-01 09:49:01 -0500 (Sat, 01 Feb 2003) | 2 lines

Added pre-condition to file_info_find_hole(): no busy chunks for download.

------------------------------------------------------------------------
r2615 | rmanfredi | 2003-02-01 09:46:59 -0500 (Sat, 01 Feb 2003) | 2 lines

Limit lifetime of download mesh entries to 1 day.

------------------------------------------------------------------------
r2614 | rmanfredi | 2003-01-30 18:11:52 -0500 (Thu, 30 Jan 2003) | 2 lines

Version of 30/01/2003.

------------------------------------------------------------------------
r2613 | rmanfredi | 2003-01-30 18:10:46 -0500 (Thu, 30 Jan 2003) | 2 lines

Added support for LimeWire's crawler.

------------------------------------------------------------------------
r2612 | rmanfredi | 2003-01-30 17:32:54 -0500 (Thu, 30 Jan 2003) | 2 lines

Removed spurious assert() in qrt_patch_computed_add_listener().

------------------------------------------------------------------------
r2611 | rmanfredi | 2003-01-30 17:30:17 -0500 (Thu, 30 Jan 2003) | 2 lines

Initial revision.

------------------------------------------------------------------------
r2610 | rmanfredi | 2003-01-30 16:07:42 -0500 (Thu, 30 Jan 2003) | 2 lines

Suppressed warning about handle_messages_supported() not being done.

------------------------------------------------------------------------
r2609 | rmanfredi | 2003-01-30 15:58:31 -0500 (Thu, 30 Jan 2003) | 4 lines

Clone directory list before traversing it with recurse_scan() since we
loop back to the GUI and the directory list could be changed whilst the
scanning is proceeding.

------------------------------------------------------------------------
r2608 | rmanfredi | 2003-01-30 15:52:37 -0500 (Thu, 30 Jan 2003) | 3 lines

Forgot to remove QRT patch compression task from the list of running tasks
upon a cancel.

------------------------------------------------------------------------
r2607 | rmanfredi | 2003-01-30 15:50:11 -0500 (Thu, 30 Jan 2003) | 3 lines

Immediately reset the qrt_ fields and query_table to NULL after having
freed those items, to prevent accidental reuse.

------------------------------------------------------------------------
r2606 | rmanfredi | 2003-01-29 18:02:50 -0500 (Wed, 29 Jan 2003) | 2 lines

Version of 29/01/2003.

------------------------------------------------------------------------
r2605 | rmanfredi | 2003-01-29 17:45:10 -0500 (Wed, 29 Jan 2003) | 2 lines

Fixed another bug when cancelling QRT computation due to rescanning.

------------------------------------------------------------------------
r2604 | rmanfredi | 2003-01-29 17:44:31 -0500 (Wed, 29 Jan 2003) | 2 lines

Typo fix.

------------------------------------------------------------------------
r2603 | rmanfredi | 2003-01-29 17:29:40 -0500 (Wed, 29 Jan 2003) | 2 lines

Tell whether we're an ultranode or not on handshaking errors.

------------------------------------------------------------------------
r2602 | rmanfredi | 2003-01-29 17:25:41 -0500 (Wed, 29 Jan 2003) | 2 lines

Fixed bug when cancelling QRT computation due to rescanning.

------------------------------------------------------------------------
r2601 | rmanfredi | 2003-01-29 17:24:16 -0500 (Wed, 29 Jan 2003) | 2 lines

Forgot to test for swapped ranges in the trailing range listed.

------------------------------------------------------------------------
r2600 | rmanfredi | 2003-01-29 17:19:40 -0500 (Wed, 29 Jan 2003) | 2 lines

If downloaded filename is empty, use "noname" as the filename.

------------------------------------------------------------------------
r2597 | rmanfredi | 2003-01-27 17:41:24 -0500 (Mon, 27 Jan 2003) | 2 lines

Version of 27/01/2003.

------------------------------------------------------------------------
r2596 | rmanfredi | 2003-01-27 17:40:08 -0500 (Mon, 27 Jan 2003) | 2 lines

Handle only the very first range in upload requests, instead of replying 500.

------------------------------------------------------------------------
r2595 | rmanfredi | 2003-01-27 17:32:01 -0500 (Mon, 27 Jan 2003) | 4 lines

Dynamic upload slot computation was not co-existing peacefully with
the ability to steal bandwidth: now compare both instantaneous and average
to the min usage percentage.

------------------------------------------------------------------------
r2594 | rmanfredi | 2003-01-27 17:27:16 -0500 (Mon, 27 Jan 2003) | 3 lines

Changed detection place of so-called "gnutella2": will now abort earlier,
without giving the chance for the remote ultranode to become a leaf.

------------------------------------------------------------------------
r2593 | rmanfredi | 2003-01-27 17:23:14 -0500 (Mon, 27 Jan 2003) | 4 lines

Now makes sure ranges are well-specified before calling http_range_add().
Also detect overlapping with next range in list during http_range_add().
New http_range_size() routine.

------------------------------------------------------------------------
r2592 | rmanfredi | 2003-01-27 17:20:37 -0500 (Mon, 27 Jan 2003) | 3 lines

Will now show when a download is from a partial file, and how much of
the total file the remote server has.

------------------------------------------------------------------------
r2591 | rmanfredi | 2003-01-27 15:08:55 -0500 (Mon, 27 Jan 2003) | 2 lines

Added specs for the UDP connect back "GTKG/7v1" message.

------------------------------------------------------------------------
r2590 | cbiere | 2003-01-27 00:19:57 -0500 (Mon, 27 Jan 2003) | 2 lines

Removed unused variable

------------------------------------------------------------------------
r2589 | cbiere | 2003-01-27 00:02:17 -0500 (Mon, 27 Jan 2003) | 2 lines

[GTK2] Sync with GTK1; Use GtkTreeView for Search stats and Uploads

------------------------------------------------------------------------
r2588 | cbiere | 2003-01-26 23:56:02 -0500 (Sun, 26 Jan 2003) | 2 lines

gtk2-gnutella.glade

------------------------------------------------------------------------
r2587 | rmanfredi | 2003-01-26 20:27:47 -0500 (Sun, 26 Jan 2003) | 2 lines

Version of 26/01/2003.

------------------------------------------------------------------------
r2586 | rmanfredi | 2003-01-26 20:26:50 -0500 (Sun, 26 Jan 2003) | 2 lines

New download state "sinking" when slurping HTTP reply between requests.

------------------------------------------------------------------------
r2585 | rmanfredi | 2003-01-26 20:25:16 -0500 (Sun, 26 Jan 2003) | 2 lines

Added support for client-side PFSP (Partial File Sharing Protocol).

------------------------------------------------------------------------
r2584 | rmanfredi | 2003-01-26 20:23:59 -0500 (Sun, 26 Jan 2003) | 2 lines

Don't add words less than QRP_MIN_WORD_LENGTH chars to the QRP vector.

------------------------------------------------------------------------
r2583 | rmanfredi | 2003-01-26 20:23:36 -0500 (Sun, 26 Jan 2003) | 3 lines

Fixed RX flow-control ratio computation.
Don't accept nodes claiming so-called "gnutella2" support as peers.

------------------------------------------------------------------------
r2582 | rmanfredi | 2003-01-26 20:21:36 -0500 (Sun, 26 Jan 2003) | 2 lines

Exports QRP_MIN_WORD_LENGTH.

------------------------------------------------------------------------
r2581 | rmanfredi | 2003-01-26 20:21:06 -0500 (Sun, 26 Jan 2003) | 2 lines

Renamed MIN_WORD_LENGTH into QRP_MIN_WORD_LENGTH.

------------------------------------------------------------------------
r2580 | rmanfredi | 2003-01-26 20:19:44 -0500 (Sun, 26 Jan 2003) | 2 lines

Range requests now handled through new HTTP parsing routines.

------------------------------------------------------------------------
r2579 | rmanfredi | 2003-01-26 20:18:46 -0500 (Sun, 26 Jan 2003) | 2 lines

New HTTP range parsing routines.

------------------------------------------------------------------------
r2578 | rmanfredi | 2003-01-26 20:17:52 -0500 (Sun, 26 Jan 2003) | 2 lines

Added glib-missing routines.

------------------------------------------------------------------------
r2577 | rmanfredi | 2003-01-26 20:17:27 -0500 (Sun, 26 Jan 2003) | 2 lines

Created.

------------------------------------------------------------------------
r2576 | wyldfire | 2003-01-25 09:49:17 -0500 (Sat, 25 Jan 2003) | 2 lines

Added PROP_DL_QALIVE_COUNT to gui, added update_label call

------------------------------------------------------------------------
r2575 | wyldfire | 2003-01-25 07:23:50 -0500 (Sat, 25 Jan 2003) | 2 lines

Fixed labels of gnet leaf traffic control

------------------------------------------------------------------------
r2574 | rmanfredi | 2003-01-24 18:32:18 -0500 (Fri, 24 Jan 2003) | 2 lines

Version of 24/01/2003.

------------------------------------------------------------------------
r2573 | rmanfredi | 2003-01-24 18:30:35 -0500 (Fri, 24 Jan 2003) | 2 lines

Fixed `elapsed' to be a time_t instead of a guint32.

------------------------------------------------------------------------
r2572 | rmanfredi | 2003-01-24 18:29:30 -0500 (Fri, 24 Jan 2003) | 2 lines

Do not send out duplicate addresses in X-Try* headers.

------------------------------------------------------------------------
r2571 | rmanfredi | 2003-01-24 18:28:38 -0500 (Fri, 24 Jan 2003) | 3 lines

Reworked the bandwidth stealing algorithm to behave less aggressively when
the kernel flow-controls us on the way out.

------------------------------------------------------------------------
r2570 | cbiere | 2003-01-20 17:14:15 -0500 (Mon, 20 Jan 2003) | 2 lines

Replaced GtkCList with GtkTreeView - not used yet!

------------------------------------------------------------------------
r2569 | cbiere | 2003-01-19 16:52:07 -0500 (Sun, 19 Jan 2003) | 2 lines

sizeof() wasn't casted to something printf()able

------------------------------------------------------------------------
r2568 | cbiere | 2003-01-19 16:45:15 -0500 (Sun, 19 Jan 2003) | 2 lines

Suppress warnings about different pointer types

------------------------------------------------------------------------
r2567 | rmanfredi | 2003-01-19 16:43:33 -0500 (Sun, 19 Jan 2003) | 2 lines

More update on 19/01/2003.

------------------------------------------------------------------------
r2566 | rmanfredi | 2003-01-19 16:42:40 -0500 (Sun, 19 Jan 2003) | 2 lines

Do not trigger "activity timeout" for leaf nodes.

------------------------------------------------------------------------
r2565 | rmanfredi | 2003-01-19 16:41:40 -0500 (Sun, 19 Jan 2003) | 2 lines

Missed inclusion of <ctype.h>.

------------------------------------------------------------------------
r2564 | rmanfredi | 2003-01-19 16:39:57 -0500 (Sun, 19 Jan 2003) | 3 lines

Was not parsing version tag properly, and therefore started to ban recent
stable GTKG versions.

------------------------------------------------------------------------
r2563 | rmanfredi | 2003-01-19 15:55:45 -0500 (Sun, 19 Jan 2003) | 3 lines

Added necessary callback from mq.c to warn when queue count changes, so
we can update the node's flag immediately.

------------------------------------------------------------------------
r2562 | rmanfredi | 2003-01-19 15:29:54 -0500 (Sun, 19 Jan 2003) | 2 lines

Version of 19/01/2003.

------------------------------------------------------------------------
r2561 | rmanfredi | 2003-01-19 15:29:14 -0500 (Sun, 19 Jan 2003) | 2 lines

Display max amount of leaves/ultra/nodes when rejecting connections.

------------------------------------------------------------------------
r2560 | cbiere | 2003-01-19 15:23:52 -0500 (Sun, 19 Jan 2003) | 2 lines

Tried to free() static memory

------------------------------------------------------------------------
r2559 | rmanfredi | 2003-01-19 15:21:29 -0500 (Sun, 19 Jan 2003) | 3 lines

Based on my experiments about the necessary bandwidth to run an Ultrapeer,
changed the default amount of leaves to 15 and the minimum to 5.

------------------------------------------------------------------------
r2558 | rmanfredi | 2003-01-19 14:24:55 -0500 (Sun, 19 Jan 2003) | 3 lines

New flag 'd' shown instead of 'F' when the queue is non-empty, to indicate
that there is some delay in the packets sent.

------------------------------------------------------------------------
r2557 | cbiere | 2003-01-19 13:48:36 -0500 (Sun, 19 Jan 2003) | 2 lines

[GTK2] Use gdk_drawable_get_size instead of deprecated gdk_window_get_size

------------------------------------------------------------------------
r2556 | cbiere | 2003-01-19 13:45:58 -0500 (Sun, 19 Jan 2003) | 2 lines

[GTK2] Compile with -DGDK_DISABLE_DEPRECATED by default

------------------------------------------------------------------------
r2555 | rmanfredi | 2003-01-19 12:04:21 -0500 (Sun, 19 Jan 2003) | 2 lines

Was not emitting X-Try-Ultrapeers correctly.

------------------------------------------------------------------------
r2554 | cbiere | 2003-01-19 09:57:47 -0500 (Sun, 19 Jan 2003) | 2 lines

[GTK2] Sync with GTK1 version

------------------------------------------------------------------------
r2553 | rmanfredi | 2003-01-19 07:30:53 -0500 (Sun, 19 Jan 2003) | 2 lines

Warn users running an unstable version after 60 days, ban them after 90.

------------------------------------------------------------------------
r2552 | rmanfredi | 2003-01-19 07:28:51 -0500 (Sun, 19 Jan 2003) | 2 lines

Understand specially marked speed in queries, but do not emit them yet.

------------------------------------------------------------------------
r2551 | rmanfredi | 2003-01-19 07:26:34 -0500 (Sun, 19 Jan 2003) | 2 lines

Only send about 50% of queries to flow-controlled leaf nodes.

------------------------------------------------------------------------
r2550 | rmanfredi | 2003-01-19 07:23:47 -0500 (Sun, 19 Jan 2003) | 2 lines

Update node flags after the first handshake reply.

------------------------------------------------------------------------
r2549 | rmanfredi | 2003-01-19 07:21:30 -0500 (Sun, 19 Jan 2003) | 2 lines

Must not free word vector if it was not allocated.

------------------------------------------------------------------------
r2548 | wyldfire | 2003-01-18 22:21:18 -0500 (Sat, 18 Jan 2003) | 4 lines


[Gtk1] Added all missing gnet properties to gui (some read-only on the
   debugging config pane)

------------------------------------------------------------------------
r2547 | rmanfredi | 2003-01-18 19:16:24 -0500 (Sat, 18 Jan 2003) | 2 lines

Version of 18/01/2003.

------------------------------------------------------------------------
r2546 | rmanfredi | 2003-01-18 19:05:41 -0500 (Sat, 18 Jan 2003) | 2 lines

Don't send queries from the search queue on flow-controlled connections.

------------------------------------------------------------------------
r2545 | rmanfredi | 2003-01-18 19:02:00 -0500 (Sat, 18 Jan 2003) | 2 lines

Don't route the query if the hashing vector is empty.

------------------------------------------------------------------------
r2544 | rmanfredi | 2003-01-18 18:58:46 -0500 (Sat, 18 Jan 2003) | 4 lines

GUI now displays the node TX / RX speeds in k/s.
Leaf nodes have their send buffer shrank to as low as 256 bytes.
Doubled the time between two alive pings.

------------------------------------------------------------------------
r2543 | rmanfredi | 2003-01-18 18:55:57 -0500 (Sat, 18 Jan 2003) | 2 lines

GUI now displays the node TX / RX speeds in k/s.

------------------------------------------------------------------------
r2542 | rmanfredi | 2003-01-18 18:55:12 -0500 (Sat, 18 Jan 2003) | 2 lines

Now provides access to the underlying link-level I/O source.

------------------------------------------------------------------------
r2541 | rmanfredi | 2003-01-18 18:49:54 -0500 (Sat, 18 Jan 2003) | 3 lines

No longer kills a connection when the send queue becomes full, unless
the message was a prioritary one.

------------------------------------------------------------------------
r2540 | rmanfredi | 2003-01-18 18:48:30 -0500 (Sat, 18 Jan 2003) | 3 lines

Adjusted the bandwidth scheduling algorithm to behave a little better
in the advent we lack bandwidth and lots of stealing occurs accross shapers.

------------------------------------------------------------------------
r2539 | rmanfredi | 2003-01-18 18:44:31 -0500 (Sat, 18 Jan 2003) | 2 lines

Typo fixes in comments.

------------------------------------------------------------------------
r2538 | wyldfire | 2003-01-18 14:16:21 -0500 (Sat, 18 Jan 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2537 | wyldfire | 2003-01-18 14:06:08 -0500 (Sat, 18 Jan 2003) | 6 lines


[Gtk1] Added following props to gui:
  - PROP_SEARCH_MAX_RESULTS (search pane settings)
  - PROP_NODE_RX_FLOWC_RATIO (gnet config quality management)
  - PROP_NORMAL_CONNECTION (gnet config)

------------------------------------------------------------------------
r2536 | rmanfredi | 2003-01-18 08:29:02 -0500 (Sat, 18 Jan 2003) | 3 lines

Had inverted proportional bandwidth repartition computations.
Forgot to enable leaf bandwidth scheduler when moving to ultra mode.

------------------------------------------------------------------------
r2535 | rmanfredi | 2003-01-18 07:23:32 -0500 (Sat, 18 Jan 2003) | 2 lines

Slight update to the node_set_current_peermode() signature.

------------------------------------------------------------------------
r2534 | rmanfredi | 2003-01-18 07:19:35 -0500 (Sat, 18 Jan 2003) | 2 lines

Added support for QRP infinity 1 to not rule out Shareaza.

------------------------------------------------------------------------
r2533 | rmanfredi | 2003-01-18 07:19:28 -0500 (Sat, 18 Jan 2003) | 2 lines

Have the TX and RX link layers write/read using proper bandwidth scheduler.

------------------------------------------------------------------------
r2532 | rmanfredi | 2003-01-18 07:16:51 -0500 (Sat, 18 Jan 2003) | 4 lines

Reordered creation of TX and RX stack so that the peermode is known.
Can now properly switch between all three modes (normal, leaf, ultra).
Upon mode change, reshape the Gnet bandwidth (leaf versus regular).

------------------------------------------------------------------------
r2531 | rmanfredi | 2003-01-18 07:12:08 -0500 (Sat, 18 Jan 2003) | 2 lines

Added leaf bandwidth scheduler, that can steal bandwidth out of Gnet only.

------------------------------------------------------------------------
r2530 | rmanfredi | 2003-01-18 07:05:36 -0500 (Sat, 18 Jan 2003) | 7 lines

Set decent default Gnutella bandwidths.
Added new properties: "bw_gnet_leaf_in_enabled", "bw_gnet_leaf_out_enabled",
"bw_gnet_lin" and "bw_gnet_lout" to control leaf node bandwidth.
Those are special: values configured are automatically added to Gnet
bandwidth when not in ultra mode, regardless of whether the shaper is
enabled.

------------------------------------------------------------------------
r2529 | rmanfredi | 2003-01-18 05:10:15 -0500 (Sat, 18 Jan 2003) | 2 lines

Avoid routing back a leaf node query to its sender.

------------------------------------------------------------------------
r2528 | rmanfredi | 2003-01-18 03:32:33 -0500 (Sat, 18 Jan 2003) | 2 lines

Version of 17/01/2003.

------------------------------------------------------------------------
r2527 | rmanfredi | 2003-01-18 03:30:46 -0500 (Sat, 18 Jan 2003) | 2 lines

Fixed URL unescaping when given a truncated trailing escape sequence.

------------------------------------------------------------------------
r2526 | rmanfredi | 2003-01-18 03:29:58 -0500 (Sat, 18 Jan 2003) | 2 lines

Forgot to free word vector built for query routing purposes.

------------------------------------------------------------------------
r2525 | rmanfredi | 2003-01-18 03:28:05 -0500 (Sat, 18 Jan 2003) | 2 lines

Avoid routing back a leaf node query to its sender.

------------------------------------------------------------------------
r2524 | rmanfredi | 2003-01-18 03:25:47 -0500 (Sat, 18 Jan 2003) | 2 lines

Don't ping leaf nodes to get pongs from them.

------------------------------------------------------------------------
r2523 | rmanfredi | 2003-01-18 03:23:51 -0500 (Sat, 18 Jan 2003) | 4 lines

Refactored management of connections to be more aggressive when we
lack nodes and avoid turning incoming connections down too early
(closes 607268).

------------------------------------------------------------------------
r2522 | rmanfredi | 2003-01-18 03:18:53 -0500 (Sat, 18 Jan 2003) | 2 lines

Lowered the minimum amount of leaves from 50 to 25.

------------------------------------------------------------------------
r2521 | rmanfredi | 2003-01-17 16:46:16 -0500 (Fri, 17 Jan 2003) | 2 lines

Forgot to free query word vector on no matches.

------------------------------------------------------------------------
r2520 | rmanfredi | 2003-01-17 16:44:54 -0500 (Fri, 17 Jan 2003) | 2 lines

Cosmetic: added comment.

------------------------------------------------------------------------
r2519 | rmanfredi | 2003-01-17 13:47:17 -0500 (Fri, 17 Jan 2003) | 2 lines

Added highest_bit_set() routine.

------------------------------------------------------------------------
r2518 | rmanfredi | 2003-01-17 13:41:22 -0500 (Fri, 17 Jan 2003) | 2 lines

Don't put leaf node's address in the hostcache for crawler pings.

------------------------------------------------------------------------
r2517 | rmanfredi | 2003-01-17 13:39:28 -0500 (Fri, 17 Jan 2003) | 2 lines

Don't even try to insert in the search queue if hops-flow is set to 0.

------------------------------------------------------------------------
r2516 | rmanfredi | 2003-01-17 13:37:35 -0500 (Fri, 17 Jan 2003) | 2 lines

Added routing of queries based on QRT.

------------------------------------------------------------------------
r2515 | rmanfredi | 2003-01-15 01:46:39 -0500 (Wed, 15 Jan 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2514 | rmanfredi | 2003-01-15 01:43:57 -0500 (Wed, 15 Jan 2003) | 2 lines

Finalized reception of QRP patches and application to routing table.

------------------------------------------------------------------------
r2513 | rmanfredi | 2003-01-15 01:42:57 -0500 (Wed, 15 Jan 2003) | 3 lines

Finalized reception of QRP patches and application to routing table.
Drop leaf nodes that route messages.

------------------------------------------------------------------------
r2512 | rmanfredi | 2003-01-15 01:41:51 -0500 (Wed, 15 Jan 2003) | 3 lines

Added QRP to the list of messages we "route", for routing tracing.
Do not drop routed TTL=0 messages whose target is a leaf node.

------------------------------------------------------------------------
r2511 | rmanfredi | 2003-01-15 01:40:29 -0500 (Wed, 15 Jan 2003) | 2 lines

Warn when receiving unknown vendor message, in debug mode.

------------------------------------------------------------------------
r2510 | rmanfredi | 2003-01-15 01:39:40 -0500 (Wed, 15 Jan 2003) | 3 lines

Fixed wrong QRP patch computation for leaf nodes.
Finalized reception of QRP patches and application to routing table.

------------------------------------------------------------------------
r2509 | rmanfredi | 2003-01-15 01:38:18 -0500 (Wed, 15 Jan 2003) | 2 lines

New QRP Flag 'p' indicates ultrapeer receiving routing patch.

------------------------------------------------------------------------
r2508 | rmanfredi | 2003-01-15 01:37:10 -0500 (Wed, 15 Jan 2003) | 2 lines

New drop reason "Unexpected message".

------------------------------------------------------------------------
r2506 | cbiere | 2003-01-13 05:38:15 -0500 (Mon, 13 Jan 2003) | 2 lines

Version of 13/01/2003

------------------------------------------------------------------------
r2505 | cbiere | 2003-01-13 05:34:20 -0500 (Mon, 13 Jan 2003) | 2 lines

set encoding to NULL which is safe to use with binary data

------------------------------------------------------------------------
r2504 | rmanfredi | 2003-01-12 17:02:18 -0500 (Sun, 12 Jan 2003) | 2 lines

Version of 12/01/2003.

------------------------------------------------------------------------
r2503 | rmanfredi | 2003-01-12 16:53:12 -0500 (Sun, 12 Jan 2003) | 2 lines

First take at QRP reception message management (partially done).

------------------------------------------------------------------------
r2502 | rmanfredi | 2003-01-12 16:52:21 -0500 (Sun, 12 Jan 2003) | 2 lines

Will ban ancient versions after 1 year only, instead of 1.5 years.

------------------------------------------------------------------------
r2501 | rmanfredi | 2003-01-12 16:51:20 -0500 (Sun, 12 Jan 2003) | 2 lines

Cosmetic: removed spurious braces.

------------------------------------------------------------------------
r2500 | rmanfredi | 2003-01-12 16:49:08 -0500 (Sun, 12 Jan 2003) | 2 lines

Is now lenient about TTL=0 messages sent from ultrapeer to leaf.

------------------------------------------------------------------------
r2499 | rmanfredi | 2003-01-12 16:47:45 -0500 (Sun, 12 Jan 2003) | 2 lines

Added Ultrapeer negotiation management (inter-ultra nodes and ultra / leaf).

------------------------------------------------------------------------
r2498 | rmanfredi | 2003-01-12 16:46:33 -0500 (Sun, 12 Jan 2003) | 4 lines

New properties "normal_connections", "node_leaf_count", "node_normal_count"
and "node_ultra_count".
The leaf node mode is no longer experimental, but Ultrapeer mode is.

------------------------------------------------------------------------
r2497 | rmanfredi | 2003-01-12 16:43:14 -0500 (Sun, 12 Jan 2003) | 4 lines

Quote mesh URLs that contain the ',' character so other servents are
not confused (GTKG does not need this).
Fixed skipping of trailing quote in URL parsing [From Alex Bennee].

------------------------------------------------------------------------
r2496 | cbiere | 2003-01-12 05:50:38 -0500 (Sun, 12 Jan 2003) | 2 lines

Added note to use GNU make

------------------------------------------------------------------------
r2495 | cbiere | 2003-01-11 14:27:20 -0500 (Sat, 11 Jan 2003) | 2 lines

Version of 11/01/2003

------------------------------------------------------------------------
r2494 | cbiere | 2003-01-11 14:23:56 -0500 (Sat, 11 Jan 2003) | 2 lines

Version of 11/03/2003

------------------------------------------------------------------------
r2493 | cbiere | 2003-01-11 14:12:56 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Use custom CellDataFunc instead of invisible columns; prepared save/restore for column widths (not complete yet)

------------------------------------------------------------------------
r2492 | cbiere | 2003-01-11 14:10:30 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Save and restore column widths; Sync column widths (still buggy but harmless); Use highlighting; New column for status of search results

------------------------------------------------------------------------
r2491 | cbiere | 2003-01-11 14:05:32 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Stop autoselecting during shutdown phase

------------------------------------------------------------------------
r2490 | cbiere | 2003-01-11 14:03:49 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Save and restore column widths

------------------------------------------------------------------------
r2489 | cbiere | 2003-01-11 14:01:47 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Added status column for search results

------------------------------------------------------------------------
r2488 | cbiere | 2003-01-11 14:00:30 -0500 (Sat, 11 Jan 2003) | 2 lines

[Gtk2] Added invisible columns for fore/background colors; removed unnecessary columns for upload stats

------------------------------------------------------------------------
r2487 | cbiere | 2003-01-11 13:58:30 -0500 (Sat, 11 Jan 2003) | 2 lines

Save and restore column widths; use pretty alignments

------------------------------------------------------------------------
r2486 | cbiere | 2003-01-11 13:56:51 -0500 (Sat, 11 Jan 2003) | 2 lines

New locale_to_utf8: non-convertible characters are replaced by an underscore ('_')

------------------------------------------------------------------------
r2485 | cbiere | 2003-01-11 13:16:08 -0500 (Sat, 11 Jan 2003) | 2 lines

Reenabled multi-selection in downloads pane

------------------------------------------------------------------------
r2484 | rmanfredi | 2003-01-11 08:58:54 -0500 (Sat, 11 Jan 2003) | 2 lines

Fixed improper assertions with dl_qalive_count.

------------------------------------------------------------------------
r2483 | rmanfredi | 2003-01-11 08:45:02 -0500 (Sat, 11 Jan 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2482 | rmanfredi | 2003-01-11 08:41:30 -0500 (Sat, 11 Jan 2003) | 3 lines

Downloads now update the "dl_qalive_count" to reflect the amount of
sources that still reply to our requests.

------------------------------------------------------------------------
r2481 | rmanfredi | 2003-01-11 08:40:00 -0500 (Sat, 11 Jan 2003) | 2 lines

New property "dl_qalive_count".

------------------------------------------------------------------------
r2480 | rmanfredi | 2003-01-11 07:42:25 -0500 (Sat, 11 Jan 2003) | 2 lines

Replaced magical "7" with the new GTA_NORMAL_TTL constant.

------------------------------------------------------------------------
r2479 | rmanfredi | 2003-01-11 07:40:43 -0500 (Sat, 11 Jan 2003) | 2 lines

Make sure we're not remotely flow-controlled too often.

------------------------------------------------------------------------
r2478 | rmanfredi | 2003-01-11 07:39:10 -0500 (Sat, 11 Jan 2003) | 2 lines

New property "node_rx_flowc_ratio".

------------------------------------------------------------------------
r2477 | rmanfredi | 2003-01-11 04:04:52 -0500 (Sat, 11 Jan 2003) | 2 lines

Initial revision.

------------------------------------------------------------------------
r2476 | cbiere | 2003-01-10 23:16:30 -0500 (Fri, 10 Jan 2003) | 2 lines

Tried to pop non-existent message from statusbar; fixed typo

------------------------------------------------------------------------
r2475 | rmanfredi | 2003-01-10 18:49:57 -0500 (Fri, 10 Jan 2003) | 2 lines

Fixed uninitialized version field problem for result sets.

------------------------------------------------------------------------
r2474 | rmanfredi | 2003-01-10 17:38:56 -0500 (Fri, 10 Jan 2003) | 2 lines

Version of 10/01/2003.

------------------------------------------------------------------------
r2473 | rmanfredi | 2003-01-10 17:37:44 -0500 (Fri, 10 Jan 2003) | 3 lines

Will now emit "GTKGV1" extensions in query hits when replying to a GTKG
query, and display version information in search pane.

------------------------------------------------------------------------
r2472 | rmanfredi | 2003-01-10 17:36:37 -0500 (Fri, 10 Jan 2003) | 4 lines

Be sure to not call inet_firewalled() on first listening port change,
i.e. when we read back the configuration file, or the persisted
"is_firewalled" property will be ignored!

------------------------------------------------------------------------
r2471 | rmanfredi | 2003-01-10 17:35:10 -0500 (Fri, 10 Jan 2003) | 2 lines

Exported version_str() for version string formatting.

------------------------------------------------------------------------
r2470 | rmanfredi | 2003-01-10 17:32:30 -0500 (Fri, 10 Jan 2003) | 3 lines

Added inet_init() to ensure we have the no-connection timer set if we
startup in non-firewalled mode.

------------------------------------------------------------------------
r2469 | rmanfredi | 2003-01-10 17:31:13 -0500 (Fri, 10 Jan 2003) | 3 lines

Created new GTKG-specific GGEP extension "GTKGV1" to propagate version
information and servent startup time in query hits.

------------------------------------------------------------------------
r2468 | rmanfredi | 2003-01-10 14:01:43 -0500 (Fri, 10 Jan 2003) | 2 lines

Try to allocate chunks of 4K at most for walloc(), or 8 objects at least.

------------------------------------------------------------------------
r2467 | rmanfredi | 2003-01-10 14:00:42 -0500 (Fri, 10 Jan 2003) | 2 lines

Generalized the use of walloc/wfree for small structures.

------------------------------------------------------------------------
r2466 | rmanfredi | 2003-01-10 13:57:25 -0500 (Fri, 10 Jan 2003) | 2 lines

Was reading '*p' but could peruse 'c' instead.

------------------------------------------------------------------------
r2465 | rmanfredi | 2003-01-08 01:51:25 -0500 (Wed, 08 Jan 2003) | 2 lines

Version of 08/01/2003.

------------------------------------------------------------------------
r2464 | rmanfredi | 2003-01-08 01:49:27 -0500 (Wed, 08 Jan 2003) | 2 lines

Also compare SHA1 of requested files when checking for upload duplicates.

------------------------------------------------------------------------
r2463 | rmanfredi | 2003-01-08 01:48:20 -0500 (Wed, 08 Jan 2003) | 2 lines

Forgot to check for alternate locations on 503 replies.

------------------------------------------------------------------------
r2462 | cbiere | 2003-01-07 18:30:42 -0500 (Tue, 07 Jan 2003) | 2 lines

Enabled "moving file" icon

------------------------------------------------------------------------
r2461 | cbiere | 2003-01-06 19:51:22 -0500 (Mon, 06 Jan 2003) | 2 lines

Set "ypad" to zero for all tree views

------------------------------------------------------------------------
r2460 | cbiere | 2003-01-06 19:43:18 -0500 (Mon, 06 Jan 2003) | 2 lines

Moved status icons and uptime to top

------------------------------------------------------------------------
r2459 | cbiere | 2003-01-06 19:40:37 -0500 (Mon, 06 Jan 2003) | 2 lines

Added spinbutton for PROP_SEARCH_MAX_RESULTS

------------------------------------------------------------------------
r2458 | cbiere | 2003-01-06 14:09:31 -0500 (Mon, 06 Jan 2003) | 2 lines

Added spinbutton for PROP_SEARCH_MAX_RESULTS; Reordered status bar

------------------------------------------------------------------------
r2457 | cbiere | 2003-01-06 14:02:20 -0500 (Mon, 06 Jan 2003) | 2 lines

Set "ypad" to zero for all tree views

------------------------------------------------------------------------
r2456 | cbiere | 2003-01-05 16:52:54 -0500 (Sun, 05 Jan 2003) | 2 lines

Disabled editing for combo-entries (except search, of course);  Enlarged spinbuttons for port settings

------------------------------------------------------------------------
r2455 | cbiere | 2003-01-05 06:40:29 -0500 (Sun, 05 Jan 2003) | 2 lines

Version of 05/01/2003

------------------------------------------------------------------------
r2454 | cbiere | 2003-01-05 04:48:35 -0500 (Sun, 05 Jan 2003) | 2 lines

Fixed a few thing and settings causing problems with glade; reenabled "clear" buttons for caches

------------------------------------------------------------------------
r2453 | cbiere | 2003-01-05 04:44:37 -0500 (Sun, 05 Jan 2003) | 2 lines

[Gtk2] Revisited code; removed unnecessary functions

------------------------------------------------------------------------
r2452 | cbiere | 2003-01-05 04:42:11 -0500 (Sun, 05 Jan 2003) | 2 lines

[Gtk2] gnutellaNet: Nodes can be removed manually

------------------------------------------------------------------------
r2451 | cbiere | 2003-01-05 04:40:10 -0500 (Sun, 05 Jan 2003) | 2 lines

[Gtk2] Enable proper sorting of upload stats by size and normalized

------------------------------------------------------------------------
r2450 | cbiere | 2003-01-05 04:38:30 -0500 (Sun, 05 Jan 2003) | 2 lines

removed unused variable 'error'

------------------------------------------------------------------------
r2449 | cbiere | 2003-01-05 04:36:01 -0500 (Sun, 05 Jan 2003) | 2 lines

locale_to_utf8: extended error message

------------------------------------------------------------------------
r2448 | cbiere | 2003-01-05 04:34:55 -0500 (Sun, 05 Jan 2003) | 2 lines

Include version.h for version_is_too_old()

------------------------------------------------------------------------
r2447 | rmanfredi | 2003-01-05 03:35:08 -0500 (Sun, 05 Jan 2003) | 2 lines

Updated.

------------------------------------------------------------------------
r2446 | rmanfredi | 2003-01-04 18:54:19 -0500 (Sat, 04 Jan 2003) | 2 lines

Was wrongly putting a trailing 's' to the Vendor-Message header.

------------------------------------------------------------------------
r2445 | rmanfredi | 2003-01-04 16:56:49 -0500 (Sat, 04 Jan 2003) | 2 lines

Version of 04/01/2003.

------------------------------------------------------------------------
r2444 | rmanfredi | 2003-01-04 13:19:51 -0500 (Sat, 04 Jan 2003) | 2 lines

Forgot to include "gnet_stats.h".

------------------------------------------------------------------------
r2443 | rmanfredi | 2003-01-04 13:18:46 -0500 (Sat, 04 Jan 2003) | 2 lines

Count unhandled vendor-specific messages as being of an "unknown type".

------------------------------------------------------------------------
r2442 | rmanfredi | 2003-01-04 12:57:55 -0500 (Sat, 04 Jan 2003) | 2 lines

Added support for initial advertising of supported vendor messages.

------------------------------------------------------------------------
r2441 | rmanfredi | 2003-01-04 12:35:17 -0500 (Sat, 04 Jan 2003) | 4 lines

Seeing a vendor-specific message sets the NODE_A_CAN_VENDOR attribute as
if we had seen a Vendor-Message header.
Drop ping/pongs/pushes that are smaller than their normal size.

------------------------------------------------------------------------
r2440 | rmanfredi | 2003-01-04 09:29:31 -0500 (Sat, 04 Jan 2003) | 2 lines

Don't need to send the "Connect Back" message as a control message.

------------------------------------------------------------------------
r2439 | rmanfredi | 2003-01-04 09:13:01 -0500 (Sat, 04 Jan 2003) | 3 lines

Fixed hops-flow handling in mq_service(): was generating bad iovec entries
for dropped messages!

------------------------------------------------------------------------
r2438 | rmanfredi | 2003-01-04 09:12:39 -0500 (Sat, 04 Jan 2003) | 4 lines

Added argument to download_remove_file(), so that we can reset the fileinfo
of manually removed files, in order to not discard the entry at the
next startup.

------------------------------------------------------------------------
r2437 | rmanfredi | 2003-01-04 06:15:30 -0500 (Sat, 04 Jan 2003) | 2 lines

Explicitly mention that the connection must be a TCP one, not UDP.

------------------------------------------------------------------------
r2436 | rmanfredi | 2003-01-04 04:58:31 -0500 (Sat, 04 Jan 2003) | 3 lines

Fixed hops-flow description: to turn on queries, a hop count max of max_TTL
is enough.

------------------------------------------------------------------------
r2435 | rmanfredi | 2003-01-04 04:21:38 -0500 (Sat, 04 Jan 2003) | 3 lines

Had forgotten that we must "goto next" instead of "continue" in
the URL parsing loop from dmesh_collect_locations().

------------------------------------------------------------------------
r2434 | wyldfire | 2003-01-04 00:36:46 -0500 (Sat, 04 Jan 2003) | 3 lines


Some cosmetic changes to the gui layout

------------------------------------------------------------------------
r2433 | cbiere | 2003-01-04 00:36:03 -0500 (Sat, 04 Jan 2003) | 2 lines

[Gtk2] Strings gotten from GTk+2 don't have to be converted again

------------------------------------------------------------------------
r2432 | cbiere | 2003-01-04 00:01:56 -0500 (Sat, 04 Jan 2003) | 2 lines

[Gtk2] Adjusted a few settings

------------------------------------------------------------------------
r2431 | wyldfire | 2003-01-03 23:09:47 -0500 (Fri, 03 Jan 2003) | 3 lines


Added a few notes on layout

------------------------------------------------------------------------
r2430 | cbiere | 2003-01-03 21:49:07 -0500 (Fri, 03 Jan 2003) | 2 lines

[Gtk2] Convert from locale to UTF-8 where it might be necessary

------------------------------------------------------------------------
r2429 | cbiere | 2003-01-03 19:39:52 -0500 (Fri, 03 Jan 2003) | 2 lines

Strings must be converted to UTF-8 before storing them in GtkTreeModel

------------------------------------------------------------------------
r2428 | rmanfredi | 2003-01-03 17:23:42 -0500 (Fri, 03 Jan 2003) | 2 lines

Version of 03/01/2002.

------------------------------------------------------------------------
r2427 | rmanfredi | 2003-01-03 17:23:04 -0500 (Fri, 03 Jan 2003) | 2 lines

Only show 'h' when hops_flow is strictly less than 7.

------------------------------------------------------------------------
r2426 | rmanfredi | 2003-01-03 17:18:12 -0500 (Fri, 03 Jan 2003) | 2 lines

Initial revision.

------------------------------------------------------------------------
r2425 | rmanfredi | 2003-01-03 17:04:19 -0500 (Fri, 03 Jan 2003) | 2 lines

Added RFC822-like leading description for Hops Flow.

------------------------------------------------------------------------
r2424 | rmanfredi | 2003-01-03 17:01:59 -0500 (Fri, 03 Jan 2003) | 2 lines

Implemented the "Connect Back" vendor-specific message (BEAR/7v1).

------------------------------------------------------------------------
r2423 | rmanfredi | 2003-01-03 16:09:53 -0500 (Fri, 03 Jan 2003) | 2 lines

Added pre-condition to gmsg_check_ggep().

------------------------------------------------------------------------
r2422 | rmanfredi | 2003-01-03 16:06:43 -0500 (Fri, 03 Jan 2003) | 4 lines

New Gnutella node flag 'h' or 'f' to indicate hops-flow or flow-control
on the receiving side (hops flow message sent to remote node so that it
limits the traffic sent to us).

------------------------------------------------------------------------
r2421 | rmanfredi | 2003-01-03 16:04:27 -0500 (Fri, 03 Jan 2003) | 3 lines

Make sure there is a private extension in the query hit before calling
ext_parse() on it.

------------------------------------------------------------------------
r2420 | rmanfredi | 2003-01-03 16:03:24 -0500 (Fri, 03 Jan 2003) | 2 lines

Added support for vendor-specific messages.

------------------------------------------------------------------------
r2419 | rmanfredi | 2003-01-03 16:02:52 -0500 (Fri, 03 Jan 2003) | 2 lines

Exported vendor_code_cmp() and added vendor_code_str().

------------------------------------------------------------------------
r2418 | rmanfredi | 2003-01-03 16:02:04 -0500 (Fri, 03 Jan 2003) | 2 lines

New version_is_too_old() routine.

------------------------------------------------------------------------
r2417 | rmanfredi | 2003-01-03 16:01:29 -0500 (Fri, 03 Jan 2003) | 2 lines

Now supports the "Hops Flow" vendor-specific message (BEAR/4v1).

------------------------------------------------------------------------
r2416 | rmanfredi | 2003-01-03 15:59:34 -0500 (Fri, 03 Jan 2003) | 2 lines

New miscellaneous routing hex_escape().

------------------------------------------------------------------------
r2415 | rmanfredi | 2003-01-03 15:59:01 -0500 (Fri, 03 Jan 2003) | 2 lines

Keep track of IDs from unknown GGEP extensions we see.

------------------------------------------------------------------------
r2414 | rmanfredi | 2003-01-03 15:57:43 -0500 (Fri, 03 Jan 2003) | 2 lines

Ignore leading/trailing quotes in "quoted" URLs from Alternate-Location.

------------------------------------------------------------------------
r2413 | rmanfredi | 2003-01-03 15:56:47 -0500 (Fri, 03 Jan 2003) | 2 lines

Ban ancient-enough versions of GTKG.

------------------------------------------------------------------------
r2412 | rmanfredi | 2003-01-03 15:55:17 -0500 (Fri, 03 Jan 2003) | 2 lines

Added support for vendor messages.

------------------------------------------------------------------------
r2411 | cbiere | 2003-01-03 06:11:00 -0500 (Fri, 03 Jan 2003) | 2 lines

Version of 03/01/2003

------------------------------------------------------------------------
r2410 | rmanfredi | 2003-01-03 06:03:59 -0500 (Fri, 03 Jan 2003) | 2 lines

Second draft.

------------------------------------------------------------------------
r2409 | cbiere | 2003-01-03 05:11:06 -0500 (Fri, 03 Jan 2003) | 2 lines

[Gtk2] Added multichoice for toolbar style

------------------------------------------------------------------------
r2408 | cbiere | 2003-01-03 05:07:12 -0500 (Fri, 03 Jan 2003) | 4 lines

Several syncs with Gtk1 version
Added multichoice for toolbar style
Moved "Freeze queue" button from toolbar to download pane

------------------------------------------------------------------------
r2407 | cbiere | 2003-01-03 05:03:59 -0500 (Fri, 03 Jan 2003) | 2 lines

Gtk2 version isn't marked as experimental any more

------------------------------------------------------------------------
r2406 | cbiere | 2003-01-03 05:01:20 -0500 (Fri, 03 Jan 2003) | 4 lines

[Gtk2] Added property for collapsed/expanded status of nodes in tree menu;
[Gtk2] Added multichoice for toolbar style
[Gtk2] Several syncs with Gtk1 version

------------------------------------------------------------------------
r2405 | cbiere | 2003-01-03 04:56:22 -0500 (Fri, 03 Jan 2003) | 2 lines

[Gtk2] Moved "Freeze queue" button from toolbar to download pane

------------------------------------------------------------------------
r2404 | rmanfredi | 2003-01-02 13:55:20 -0500 (Thu, 02 Jan 2003) | 2 lines

Was not filling the ultra cache correctly upon startup.

------------------------------------------------------------------------
r2403 | cbiere | 2003-01-02 13:26:12 -0500 (Thu, 02 Jan 2003) | 2 lines

Added check for 192.0.2/24 TEST-NET [RFC 3330] to host_is_valid()

------------------------------------------------------------------------
r2402 | wyldfire | 2003-01-02 13:03:23 -0500 (Thu, 02 Jan 2003) | 3 lines


Fixed percentage toggle for "drop reasons" table in gnet stats

------------------------------------------------------------------------
r2401 | wyldfire | 2003-01-02 13:00:39 -0500 (Thu, 02 Jan 2003) | 4 lines


Added new props to gui ("dl_queue_count", "dl_running_count",
  "dl_byte_count" and "ul_byte_count")

------------------------------------------------------------------------
r2400 | wyldfire | 2003-01-02 12:58:34 -0500 (Thu, 02 Jan 2003) | 5 lines


Added GtkHBox around child where GtkViewports are used.
Added new props to gui ("dl_queue_count", "dl_running_count",
   "dl_byte_count" and "ul_byte_count")

------------------------------------------------------------------------
r2399 | rmanfredi | 2003-01-02 05:47:26 -0500 (Thu, 02 Jan 2003) | 2 lines

Typo fix.

------------------------------------------------------------------------
r2398 | rmanfredi | 2003-01-02 05:44:31 -0500 (Thu, 02 Jan 2003) | 2 lines

Version of 02/01/2003.

------------------------------------------------------------------------
r2397 | rmanfredi | 2003-01-02 05:43:37 -0500 (Thu, 02 Jan 2003) | 3 lines

Fixed "was a duplicate" computation, which falsely reported duplicates
with oneself!

------------------------------------------------------------------------
r2396 | rmanfredi | 2003-01-02 05:42:15 -0500 (Thu, 02 Jan 2003) | 2 lines

Added Shinobu (SHNB) vendor code.

------------------------------------------------------------------------
r2395 | rmanfredi | 2003-01-02 05:41:14 -0500 (Thu, 02 Jan 2003) | 2 lines

Added error reporting for failed HTTP URL parsing.

------------------------------------------------------------------------
r2394 | rmanfredi | 2003-01-02 05:40:17 -0500 (Thu, 02 Jan 2003) | 2 lines

Added error reporting for failed download mesh URL parsing.

------------------------------------------------------------------------
r2393 | rmanfredi | 2003-01-02 04:36:12 -0500 (Thu, 02 Jan 2003) | 2 lines

Initial draft.

------------------------------------------------------------------------
r2392 | cbiere | 2003-01-01 18:58:59 -0500 (Wed, 01 Jan 2003) | 2 lines

Version of 02/01/2003

------------------------------------------------------------------------
r2391 | cbiere | 2003-01-01 18:52:59 -0500 (Wed, 01 Jan 2003) | 2 lines

Wrote into stats array out of bounds

------------------------------------------------------------------------
r2390 | rmanfredi | 2003-01-01 18:49:52 -0500 (Wed, 01 Jan 2003) | 2 lines

Now counts total useful bytes uploaded.

------------------------------------------------------------------------
r2389 | rmanfredi | 2003-01-01 18:49:40 -0500 (Wed, 01 Jan 2003) | 4 lines

Now counts total useful bytes downloaded.
Maintains two new property counters: amount of running downloads and amount
of queued downloads.

------------------------------------------------------------------------
r2388 | rmanfredi | 2003-01-01 18:47:56 -0500 (Wed, 01 Jan 2003) | 3 lines

New properties: "dl_queue_count", "dl_running_count", "dl_byte_count"
and "ul_byte_count".

------------------------------------------------------------------------
r2387 | wyldfire | 2003-01-01 18:35:32 -0500 (Wed, 01 Jan 2003) | 4 lines


Removed "ultrapeer" mode from selection for PROP_CURRENT_PEERMODE. It's not
  implemented anyway and we want to release a snapshot

------------------------------------------------------------------------
r2386 | wyldfire | 2003-01-01 18:33:59 -0500 (Wed, 01 Jan 2003) | 3 lines


Min/max chunk size widgets enlarge

------------------------------------------------------------------------
r2385 | wyldfire | 2003-01-01 18:06:30 -0500 (Wed, 01 Jan 2003) | 2 lines

no comment

------------------------------------------------------------------------
r2384 | wyldfire | 2003-01-01 18:04:17 -0500 (Wed, 01 Jan 2003) | 3 lines


Added UP hostcache to gnet pane

------------------------------------------------------------------------
r2383 | wyldfire | 2003-01-01 18:01:47 -0500 (Wed, 01 Jan 2003) | 4 lines


Redesigned a few config panels
Added UP hostcache to gnet panel

------------------------------------------------------------------------
r2382 | rmanfredi | 2003-01-01 17:22:12 -0500 (Wed, 01 Jan 2003) | 2 lines

Version of 01/01/2003.

------------------------------------------------------------------------
r2381 | rmanfredi | 2003-01-01 16:50:04 -0500 (Wed, 01 Jan 2003) | 2 lines

In leaf node mode, ignore the "hops_random_factor" property.

------------------------------------------------------------------------
r2380 | rmanfredi | 2003-01-01 16:46:05 -0500 (Wed, 01 Jan 2003) | 2 lines

Check for duplicate download in new download_convert_to_urires().

------------------------------------------------------------------------
r2379 | rmanfredi | 2003-01-01 15:34:36 -0500 (Wed, 01 Jan 2003) | 3 lines

Fixed logic bug in upload code for checking that followup requests still
refer to the same source.

------------------------------------------------------------------------
r2378 | rmanfredi | 2003-01-01 15:32:42 -0500 (Wed, 01 Jan 2003) | 5 lines

Whenever we can do a successful /uri-res/N2R? request, force the download
to always request that URI from the server to avoid problems in case the
library is reshuffled remotely (for non-GTKG servents).  This also forces
the /uri-res/N2R? URL into the download mesh.

------------------------------------------------------------------------
r2377 | rmanfredi | 2003-01-01 15:26:03 -0500 (Wed, 01 Jan 2003) | 2 lines

Validate all the /uri-res/N2R?urn:sha1 alternate locations we might get.

------------------------------------------------------------------------
r2376 | rmanfredi | 2003-01-01 15:24:25 -0500 (Wed, 01 Jan 2003) | 2 lines

Added tracing of extensions for big pings/pongs/pushes.

------------------------------------------------------------------------
r2375 | rmanfredi | 2003-01-01 15:21:28 -0500 (Wed, 01 Jan 2003) | 3 lines

Added a wrapper on top of the qrp_patch_compress() user-defined callback to
cleanly remove the task from the list where we put it at creation time.

------------------------------------------------------------------------
r2374 | wyldfire | 2003-01-01 15:12:38 -0500 (Wed, 01 Jan 2003) | 4 lines


Added "ko" to conributors
Make RCSID label hidden

------------------------------------------------------------------------
r2373 | wyldfire | 2003-01-01 15:00:35 -0500 (Wed, 01 Jan 2003) | 4 lines


Fixed typo in gui
Added os information and rcsid to about dialog

------------------------------------------------------------------------
r2372 | rmanfredi | 2003-01-01 09:14:52 -0500 (Wed, 01 Jan 2003) | 2 lines

Regenerated after fix in props.tpl.

------------------------------------------------------------------------
r2371 | rmanfredi | 2003-01-01 09:14:02 -0500 (Wed, 01 Jan 2003) | 2 lines

eplaced an "inline" directive with G_INLINE_FUNC.

------------------------------------------------------------------------
r2370 | rmanfredi | 2003-01-01 09:13:02 -0500 (Wed, 01 Jan 2003) | 4 lines

Template props.tpl was not defining the default value correctly for
the new "multichoice" type, resulting in badly initialized properties
whereby the default of the previous property was used.

------------------------------------------------------------------------
r2369 | rmanfredi | 2003-01-01 08:52:42 -0500 (Wed, 01 Jan 2003) | 2 lines

Removed double underscores in #ifdef protection example for includes.

------------------------------------------------------------------------
r2368 | rmanfredi | 2003-01-01 08:46:21 -0500 (Wed, 01 Jan 2003) | 3 lines

Removed the G_INLINE_FUNC attribute in node_add_tx() and friends, as
it no longer links properly.

------------------------------------------------------------------------
r2367 | rmanfredi | 2003-01-01 05:31:40 -0500 (Wed, 01 Jan 2003) | 2 lines

Created.

------------------------------------------------------------------------
r2366 | cbiere | 2002-12-31 19:33:48 -0500 (Tue, 31 Dec 2002) | 2 lines

Version of 01/01/2003

------------------------------------------------------------------------
r2365 | cbiere | 2002-12-31 19:14:38 -0500 (Tue, 31 Dec 2002) | 2 lines

Fixed identifiers with leading underscores

------------------------------------------------------------------------
r2364 | rmanfredi | 2002-12-31 16:21:31 -0500 (Tue, 31 Dec 2002) | 4 lines

Do not send a RESET before subsequent PATCH messages if we already
sent a routing table to our ultrapeer, unless the new table has a
different size.

------------------------------------------------------------------------
r2363 | rmanfredi | 2002-12-31 13:11:56 -0500 (Tue, 31 Dec 2002) | 2 lines

Version of 31/12/2002.

------------------------------------------------------------------------
r2362 | rmanfredi | 2002-12-31 13:03:02 -0500 (Tue, 31 Dec 2002) | 4 lines

Now accepts and forwards big pings/pongs/pushes to nodes that will
advertize "GGEP: 0.5" (at least) in their handshakes.  Other nodes
will get a stripped down message without the GGEP extensions.

------------------------------------------------------------------------
r2361 | rmanfredi | 2002-12-31 10:21:43 -0500 (Tue, 31 Dec 2002) | 2 lines

Added static RCS Id to all the C files.

------------------------------------------------------------------------
r2360 | rmanfredi | 2002-12-31 05:40:15 -0500 (Tue, 31 Dec 2002) | 2 lines

Version of 31/12/2002.

------------------------------------------------------------------------
r2359 | rmanfredi | 2002-12-31 05:38:52 -0500 (Tue, 31 Dec 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r2358 | rmanfredi | 2002-12-31 05:34:57 -0500 (Tue, 31 Dec 2002) | 2 lines

Made the "is_firewalled" property persistent to accelerate warm startup.

------------------------------------------------------------------------
r2357 | cbiere | 2002-12-31 05:18:12 -0500 (Tue, 31 Dec 2002) | 2 lines

Version of Hogmanay 2002/3

------------------------------------------------------------------------
r2356 | cbiere | 2002-12-31 04:42:51 -0500 (Tue, 31 Dec 2002) | 2 lines

[Gtk2] Added and removed properties for gnet stats

------------------------------------------------------------------------
r2355 | cbiere | 2002-12-31 04:41:07 -0500 (Tue, 31 Dec 2002) | 2 lines

Size for received packets was wrongly added

------------------------------------------------------------------------
r2354 | cbiere | 2002-12-31 04:39:36 -0500 (Tue, 31 Dec 2002) | 2 lines

Added enum PROXY_NONE

------------------------------------------------------------------------
r2353 | cbiere | 2002-12-31 04:34:28 -0500 (Tue, 31 Dec 2002) | 2 lines

Rearranged gnet stats; simplified proxy and peer mode configuration

------------------------------------------------------------------------
r2352 | cbiere | 2002-12-31 04:30:13 -0500 (Tue, 31 Dec 2002) | 3 lines

Rearranged gnet stats and fixed bugs in them;
toggle settings will be saved now

------------------------------------------------------------------------
r2351 | cbiere | 2002-12-31 04:21:31 -0500 (Tue, 31 Dec 2002) | 2 lines

Use enums for proxy protocol

------------------------------------------------------------------------
r2350 | cbiere | 2002-12-31 04:18:22 -0500 (Tue, 31 Dec 2002) | 2 lines

Simplified proxy and peer mode configuration

------------------------------------------------------------------------
r2349 | cbiere | 2002-12-31 04:11:03 -0500 (Tue, 31 Dec 2002) | 2 lines

[Gtk2] Upload stats are sortable now (not by size yet); skip manual int->string conversion

------------------------------------------------------------------------
r2348 | cbiere | 2002-12-30 19:57:47 -0500 (Mon, 30 Dec 2002) | 2 lines

RCSID is only for .c files

------------------------------------------------------------------------
r2347 | cbiere | 2002-12-30 19:32:58 -0500 (Mon, 30 Dec 2002) | 2 lines

RCSID: __attribute__ was at the wrong place

------------------------------------------------------------------------
r2346 | cbiere | 2002-12-30 19:22:05 -0500 (Mon, 30 Dec 2002) | 2 lines

Added RCSID macro which should be used in every file: RCSID("$Id")

------------------------------------------------------------------------
r2345 | rmanfredi | 2002-12-30 15:21:29 -0500 (Mon, 30 Dec 2002) | 3 lines

Actually limit the memory size we figure by the max allowed size for
the data segment.

------------------------------------------------------------------------
r2344 | rmanfredi | 2002-12-30 13:34:38 -0500 (Mon, 30 Dec 2002) | 2 lines

Avoid overflow of signed integer when stealing bandwidth.

------------------------------------------------------------------------
r2343 | wyldfire | 2002-12-30 11:46:10 -0500 (Mon, 30 Dec 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2342 | wyldfire | 2002-12-30 11:45:41 -0500 (Mon, 30 Dec 2002) | 3 lines


Removed cruft code from gui_update_all()

------------------------------------------------------------------------
r2341 | wyldfire | 2002-12-30 11:45:23 -0500 (Mon, 30 Dec 2002) | 3 lines


Removed cruft code: on_search_stats_type_selected()

------------------------------------------------------------------------
r2340 | wyldfire | 2002-12-30 11:40:13 -0500 (Mon, 30 Dec 2002) | 4 lines


Added PROP_BW_ALLOW_STEALING to gui
Replaced radiobuttons with GtkCombo for PROP_PROXY_PROTOCOL

------------------------------------------------------------------------
r2339 | rmanfredi | 2002-12-30 11:26:04 -0500 (Mon, 30 Dec 2002) | 2 lines

Prevent bandwidth stealing from a disabled scheduler.

------------------------------------------------------------------------
r2338 | rmanfredi | 2002-12-30 10:01:54 -0500 (Mon, 30 Dec 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r2337 | rmanfredi | 2002-12-30 09:29:20 -0500 (Mon, 30 Dec 2002) | 2 lines

Cosmetic changes.

------------------------------------------------------------------------
r2336 | rmanfredi | 2002-12-30 09:07:27 -0500 (Mon, 30 Dec 2002) | 2 lines

New property "bw_allow_stealing" to control bandwidth sharing.

------------------------------------------------------------------------
r2335 | rmanfredi | 2002-12-30 09:06:29 -0500 (Mon, 30 Dec 2002) | 2 lines

Send query routing table faster, as bandwidth permits.

------------------------------------------------------------------------
r2334 | rmanfredi | 2002-12-30 09:05:00 -0500 (Mon, 30 Dec 2002) | 2 lines

New flag q/Q to indicate query routing table sending/sent.

------------------------------------------------------------------------
r2333 | rmanfredi | 2002-12-30 09:01:38 -0500 (Mon, 30 Dec 2002) | 2 lines

Added ability to share bandwidth between HTTP and Gnet.

------------------------------------------------------------------------
r2332 | cbiere | 2002-12-29 22:57:19 -0500 (Sun, 29 Dec 2002) | 2 lines

Version of 30/12/2002

------------------------------------------------------------------------
r2331 | cbiere | 2002-12-29 22:50:49 -0500 (Sun, 29 Dec 2002) | 2 lines

Changed return type of settings_getphysmemsize to gulong

------------------------------------------------------------------------
r2330 | cbiere | 2002-12-29 22:46:03 -0500 (Sun, 29 Dec 2002) | 2 lines

Fixed phys. RAM detection so it should work with Linux, Free/Net/OpenBSD and Solaris

------------------------------------------------------------------------
r2329 | wyldfire | 2002-12-29 20:47:08 -0500 (Sun, 29 Dec 2002) | 2 lines

Fix property-change interception bug in GtkCombo handling

------------------------------------------------------------------------
r2328 | rmanfredi | 2002-12-29 17:46:11 -0500 (Sun, 29 Dec 2002) | 2 lines

Version of 29/12/2002.

------------------------------------------------------------------------
r2327 | rmanfredi | 2002-12-29 17:45:02 -0500 (Sun, 29 Dec 2002) | 3 lines

When in leaf mode, no need to demultiplex pongs.  Also don't forward
cached pongs when we get a ping.

------------------------------------------------------------------------
r2326 | rmanfredi | 2002-12-29 17:42:31 -0500 (Sun, 29 Dec 2002) | 2 lines

Space alive pings more for a leaf <-> ultra connection.

------------------------------------------------------------------------
r2325 | rmanfredi | 2002-12-29 04:59:33 -0500 (Sun, 29 Dec 2002) | 3 lines

Fixed improper assertion in node_send_qrt(), and forgot to cleanly
unref the old query table, if present.

------------------------------------------------------------------------
r2324 | rmanfredi | 2002-12-29 03:40:22 -0500 (Sun, 29 Dec 2002) | 3 lines

When "enable_ultrapeer" is FALSE, forbid setting "current_peermode" to
anything other than NODE_P_NORMAL, forcing the value if necessary.

------------------------------------------------------------------------
r2323 | cbiere | 2002-12-28 22:18:45 -0500 (Sat, 28 Dec 2002) | 2 lines

[Gtk2] Added ultrapeer support in gnet pane (sync with Gtk1)

------------------------------------------------------------------------
r2322 | guruz | 2002-12-28 21:20:01 -0500 (Sat, 28 Dec 2002) | 3 lines

*cough*
added some ifndef because it didnt compile ..

------------------------------------------------------------------------
r2321 | guruz | 2002-12-28 21:09:43 -0500 (Sat, 28 Dec 2002) | 2 lines

PROP_MAX_ULTRAPEERS can now be configured via the GUI.

------------------------------------------------------------------------
r2320 | cbiere | 2002-12-28 21:01:30 -0500 (Sat, 28 Dec 2002) | 2 lines

Added workaround/hack for systems without _SC_PHYS_PAGES

------------------------------------------------------------------------
r2319 | cbiere | 2002-12-28 20:59:55 -0500 (Sat, 28 Dec 2002) | 2 lines

Columns can be hidden by setting their widths to zero

------------------------------------------------------------------------
r2318 | cbiere | 2002-12-28 20:46:16 -0500 (Sat, 28 Dec 2002) | 2 lines

Added controls for ultrapeer support, banning and debug settings

------------------------------------------------------------------------
r2317 | wyldfire | 2002-12-28 18:22:54 -0500 (Sat, 28 Dec 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2316 | wyldfire | 2002-12-28 18:19:44 -0500 (Sat, 28 Dec 2002) | 7 lines


Added new property type: PROP_TYPE_MULTICHOICE. This is useful for
  property-controlled dropdown menus (GtkCombo).
Dropdown menu for PROP_SEARCH_STATS_MODE is now fully property controlled.
Removed PROP_DEFAULT_POLICY: can be done using a filter rule in global
  post filter. Is hardcoded to DO DISPLAY now.

------------------------------------------------------------------------
r2315 | wyldfire | 2002-12-28 18:18:59 -0500 (Sat, 28 Dec 2002) | 5 lines


Added new property type: PROP_TYPE_MULTICHOICE. This is useful for
  property-controlled dropdown menus (GtkCombo).
Dropdown menu for PROP_CURRENT_PEERMODE is now fully property controlled.

------------------------------------------------------------------------
r2314 | wyldfire | 2002-12-28 18:16:58 -0500 (Sat, 28 Dec 2002) | 10 lines


Added PROP_BAN_MAX_FDS and PROP_BAN_RATIO to gui
Added PROP_LIB_DEBUG to gui
Added new property type: PROP_TYPE_MULTICHOICE. This is useful for
   property-controlled dropdown menus (GtkComb
Added automatic bindings for GtkCombo widgets if they are in the
   property_map in settings_gui.c.
Dropdown menu for PROP_SEARCH_STATS_MODE is now fully property controlled.
Dropdown menu for PROP_CURRENT_PEERMODE is now fully property controlled

------------------------------------------------------------------------
r2313 | wyldfire | 2002-12-28 18:16:07 -0500 (Sat, 28 Dec 2002) | 3 lines


Dropdown menu for PROP_SEARCH_STATS_MODE is now fully property controlled.

------------------------------------------------------------------------
r2312 | wyldfire | 2002-12-28 18:15:42 -0500 (Sat, 28 Dec 2002) | 4 lines


Added new property type: PROP_TYPE_MULTICHOICE. This is useful for
  property-controlled dropdown menus (GtkCombo).

------------------------------------------------------------------------
r2311 | wyldfire | 2002-12-28 18:15:21 -0500 (Sat, 28 Dec 2002) | 4 lines


Removed PROP_DEFAULT_POLICY: can be done using a filter rule in global
  post filter. Is hardcoded to DO DISPLAY now

------------------------------------------------------------------------
r2310 | wyldfire | 2002-12-28 18:15:01 -0500 (Sat, 28 Dec 2002) | 5 lines


Added new property type: PROP_TYPE_MULTICHOICE. This is useful for
  property-controlled dropdown menus (GtkCombo).
Cleant up props.tpl. Uses more scheme code now.

------------------------------------------------------------------------
r2309 | wyldfire | 2002-12-28 18:14:17 -0500 (Sat, 28 Dec 2002) | 4 lines


Removed PROP_DEFAULT_POLICY: can be done using a filter rule in global
post filter. Is hardcoded to DO DISPLAY now.

------------------------------------------------------------------------
r2308 | rmanfredi | 2002-12-28 18:13:37 -0500 (Sat, 28 Dec 2002) | 2 lines

Changes of 28/12/2002.

------------------------------------------------------------------------
r2307 | wyldfire | 2002-12-28 18:12:07 -0500 (Sat, 28 Dec 2002) | 6 lines


Added PROP_BAN_MAX_FDS and PROP_BAN_RATIO to gui
Added PROP_LIB_DEBUG to gui
Removed PROP_DEFAULT_POLICY: can be done using a filter rule in global
  post filter. Is hardcoded to DO DISPLAY now.

------------------------------------------------------------------------
r2306 | wyldfire | 2002-12-28 18:05:15 -0500 (Sat, 28 Dec 2002) | 3 lines


 * Added gtk_combo_init_choices to gtk-missing.c

------------------------------------------------------------------------
r2305 | rmanfredi | 2002-12-28 17:43:17 -0500 (Sat, 28 Dec 2002) | 2 lines

Fixed node_bye_flags() to skip already removing or shutdown nodes.

------------------------------------------------------------------------
r2304 | rmanfredi | 2002-12-28 17:31:25 -0500 (Sat, 28 Dec 2002) | 2 lines

Don't try to compact queries when in leaf mode, since we don't relay.

------------------------------------------------------------------------
r2303 | rmanfredi | 2002-12-28 17:30:58 -0500 (Sat, 28 Dec 2002) | 2 lines

Added computation of sys_xxx properties at startup.

------------------------------------------------------------------------
r2302 | rmanfredi | 2002-12-28 17:30:18 -0500 (Sat, 28 Dec 2002) | 2 lines

Minor change for tags.

------------------------------------------------------------------------
r2301 | rmanfredi | 2002-12-28 17:29:56 -0500 (Sat, 28 Dec 2002) | 3 lines

Pre-compute the default QRT patch (against NULL table) to immediately
be able to send it on new connections.

------------------------------------------------------------------------
r2300 | rmanfredi | 2002-12-28 17:29:05 -0500 (Sat, 28 Dec 2002) | 2 lines

Don't demultiplex pongs nor honour TTL=2 pings when in leaf mode.

------------------------------------------------------------------------
r2299 | rmanfredi | 2002-12-28 17:27:34 -0500 (Sat, 28 Dec 2002) | 7 lines

Renamed network_init() as node_init() for consistency.
Reworked the code sending BYE messages to not include a header payload
on 200, and force a trailing NUL.
Was sending the QRT too early after connecting (before setting up the
TX stack).
Refuse connections from leaf nodes when we're a normal node.

------------------------------------------------------------------------
r2298 | rmanfredi | 2002-12-28 17:24:12 -0500 (Sat, 28 Dec 2002) | 2 lines

New routing next_pow2().

------------------------------------------------------------------------
r2297 | rmanfredi | 2002-12-28 17:22:40 -0500 (Sat, 28 Dec 2002) | 2 lines

Renamed network_init() as node_init() for consistency.

------------------------------------------------------------------------
r2296 | rmanfredi | 2002-12-28 17:22:09 -0500 (Sat, 28 Dec 2002) | 2 lines

Don't send our IP to web cache if we're a leaf node.

------------------------------------------------------------------------
r2295 | rmanfredi | 2002-12-28 17:21:35 -0500 (Sat, 28 Dec 2002) | 2 lines

Added assertion in gnet_stats.c: cannot send a message with TTL=0.

------------------------------------------------------------------------
r2294 | rmanfredi | 2002-12-28 17:20:51 -0500 (Sat, 28 Dec 2002) | 2 lines

New properties: "max_banned_fd", "sys_nofile" and "sys_physmem".

------------------------------------------------------------------------
r2293 | rmanfredi | 2002-12-28 17:18:28 -0500 (Sat, 28 Dec 2002) | 3 lines

Added ban_max_recompute() to recompute max amount of file descriptors.
Now sets the "max_banned_fd" property with the configured amount of fds.

------------------------------------------------------------------------
r2292 | cbiere | 2002-12-28 16:08:50 -0500 (Sat, 28 Dec 2002) | 2 lines

[Gtk2] Forgot to comment out clist_ul_stats

------------------------------------------------------------------------
r2291 | cbiere | 2002-12-28 15:50:35 -0500 (Sat, 28 Dec 2002) | 2 lines

[Gtk2] Added new tab "Received" in gnet stats (2nd try)

------------------------------------------------------------------------
r2290 | cbiere | 2002-12-28 15:11:17 -0500 (Sat, 28 Dec 2002) | 2 lines

[Gtk2] Added new tab "Received" in gnet stats

------------------------------------------------------------------------
r2287 | rmanfredi | 2002-12-27 14:03:11 -0500 (Fri, 27 Dec 2002) | 2 lines

Also forbid outgoing connections to 0.4 nodes when in leaf mode.

------------------------------------------------------------------------
r2286 | rmanfredi | 2002-12-27 04:58:43 -0500 (Fri, 27 Dec 2002) | 2 lines

Version of 27/12/2002.

------------------------------------------------------------------------
r2285 | rmanfredi | 2002-12-27 04:57:39 -0500 (Fri, 27 Dec 2002) | 2 lines

Fixed wrong complaint about error whilst freeing compressor.

------------------------------------------------------------------------
r2284 | rmanfredi | 2002-12-27 04:57:05 -0500 (Fri, 27 Dec 2002) | 2 lines

Fixed cleanup order in qrp update to avoid crash at exit time.

------------------------------------------------------------------------
r2283 | rmanfredi | 2002-12-27 04:56:23 -0500 (Fri, 27 Dec 2002) | 2 lines

When in leaf mode, pong all 0.4 connections.

------------------------------------------------------------------------
r2282 | rmanfredi | 2002-12-27 04:55:42 -0500 (Fri, 27 Dec 2002) | 2 lines

Fixed wrong complaint from bg tasks about user code forgetting exit status.

------------------------------------------------------------------------
r2281 | rmanfredi | 2002-12-26 19:19:18 -0500 (Thu, 26 Dec 2002) | 2 lines

Wrong signature for node_qrt_changed().

------------------------------------------------------------------------
r2280 | rmanfredi | 2002-12-26 19:19:04 -0500 (Thu, 26 Dec 2002) | 3 lines

Was returning bad status in qrt_update_send_next(), not sending last patch.
Wrong signature for node_qrt_changed().

------------------------------------------------------------------------
r2279 | rmanfredi | 2002-12-26 19:13:15 -0500 (Thu, 26 Dec 2002) | 2 lines

Forgot that we could still get 0.4 connections whilst in leaf mode.

------------------------------------------------------------------------
r2278 | rmanfredi | 2002-12-26 19:12:35 -0500 (Thu, 26 Dec 2002) | 2 lines

Was sending QRP patch messages with wrong length -> desynchronizing.

------------------------------------------------------------------------
r2277 | rmanfredi | 2002-12-26 18:48:29 -0500 (Thu, 26 Dec 2002) | 2 lines

Fixed bad trailing assertion in qrt_update_send_next().

------------------------------------------------------------------------
r2276 | rmanfredi | 2002-12-26 18:47:59 -0500 (Thu, 26 Dec 2002) | 2 lines

Fixed hcache_get_caught() to swap the caught/valid lists if necessary.

------------------------------------------------------------------------
r2275 | rmanfredi | 2002-12-26 18:22:26 -0500 (Thu, 26 Dec 2002) | 2 lines

Forgot to send the X-Query-Routing header when not in "normal" mode.

------------------------------------------------------------------------
r2274 | rmanfredi | 2002-12-26 18:19:50 -0500 (Thu, 26 Dec 2002) | 3 lines

Only report compression error when there is actually an error, not when
the task is cancelled.

------------------------------------------------------------------------
r2273 | rmanfredi | 2002-12-26 16:34:27 -0500 (Thu, 26 Dec 2002) | 2 lines

Version of 26/12/2002.

------------------------------------------------------------------------
r2272 | rmanfredi | 2002-12-26 16:33:03 -0500 (Thu, 26 Dec 2002) | 2 lines

Made sure leaf nodes don't send connectible pongs back.

------------------------------------------------------------------------
r2271 | rmanfredi | 2002-12-26 16:32:16 -0500 (Thu, 26 Dec 2002) | 2 lines

Plugged support for GTA_MSG_QRP messages.

------------------------------------------------------------------------
r2270 | rmanfredi | 2002-12-26 16:31:44 -0500 (Thu, 26 Dec 2002) | 3 lines

Added host_add_ultra(), and adapted connecting loop to pay attention to
the "max_ultrapeers" property when acting in leaf mode.

------------------------------------------------------------------------
r2269 | rmanfredi | 2002-12-26 16:30:30 -0500 (Thu, 26 Dec 2002) | 2 lines

`start_time' is no longer a variable, we now use the "start_stamp" property.

------------------------------------------------------------------------
r2268 | rmanfredi | 2002-12-26 16:29:13 -0500 (Thu, 26 Dec 2002) | 2 lines

Added is_pow2() routine.

------------------------------------------------------------------------
r2267 | rmanfredi | 2002-12-26 16:28:46 -0500 (Thu, 26 Dec 2002) | 2 lines

Added support for handshaking as a leaf node and sending QRP updates.

------------------------------------------------------------------------
r2266 | rmanfredi | 2002-12-26 16:27:55 -0500 (Thu, 26 Dec 2002) | 2 lines

Now recognizes Ultrapeer-marked pongs (non-GGEP).

------------------------------------------------------------------------
r2265 | rmanfredi | 2002-12-26 16:27:16 -0500 (Thu, 26 Dec 2002) | 2 lines

Added management of QRP updating messages (RESET and PATCH).

------------------------------------------------------------------------
r2264 | rmanfredi | 2002-12-26 16:26:14 -0500 (Thu, 26 Dec 2002) | 2 lines

Plugged support for GTA_MSG_QRP messages.

------------------------------------------------------------------------
r2263 | rmanfredi | 2002-12-26 16:25:37 -0500 (Thu, 26 Dec 2002) | 4 lines

New properties: "current_ip_stamp", "average_ip_uptime", "start_stamp",
"average_servent_uptime", "force_ultrapeer", "force_leaf",
"max_ultrapeers", "max_leaves", "enable_ultrapeer", "current_peermode".

------------------------------------------------------------------------
r2262 | cbiere | 2002-12-26 14:09:29 -0500 (Thu, 26 Dec 2002) | 2 lines

[Gtk2] Switch to the search pane, when search is selected in the search list

------------------------------------------------------------------------
r2261 | cbiere | 2002-12-26 08:28:55 -0500 (Thu, 26 Dec 2002) | 2 lines

[Gtk2] Upload stats were initialized twice

------------------------------------------------------------------------
r2260 | cbiere | 2002-12-26 01:42:20 -0500 (Thu, 26 Dec 2002) | 2 lines

[Gtk2] Menu tree: Replaced GtkCTree with GtkTreeView

------------------------------------------------------------------------
r2259 | cbiere | 2002-12-25 23:15:10 -0500 (Wed, 25 Dec 2002) | 2 lines

[Gtk2] Menu tree: Replaced GtkCTree with GtkTreeView

------------------------------------------------------------------------
r2258 | cbiere | 2002-12-25 22:43:54 -0500 (Wed, 25 Dec 2002) | 2 lines

irc.freenode.org -> irc.freenode.net

------------------------------------------------------------------------
r2257 | cbiere | 2002-12-25 01:03:47 -0500 (Wed, 25 Dec 2002) | 2 lines

small fixes

------------------------------------------------------------------------
r2256 | cbiere | 2002-12-25 01:02:44 -0500 (Wed, 25 Dec 2002) | 2 lines

Removed dependency on hosts.h; use errno instead of stat()

------------------------------------------------------------------------
r2255 | cbiere | 2002-12-25 01:00:39 -0500 (Wed, 25 Dec 2002) | 2 lines

Moved host_is_valid() to misc.[ch]

------------------------------------------------------------------------
r2254 | cbiere | 2002-12-24 13:35:51 -0500 (Tue, 24 Dec 2002) | 2 lines

Added upload_stats_gui_init()

------------------------------------------------------------------------
r2253 | cbiere | 2002-12-24 13:34:20 -0500 (Tue, 24 Dec 2002) | 2 lines

Bugfix: Forgot to set upload_stats_list to NULL after freeing

------------------------------------------------------------------------
r2250 | cbiere | 2002-12-24 02:49:33 -0500 (Tue, 24 Dec 2002) | 2 lines

fixed typo

------------------------------------------------------------------------
r2249 | cbiere | 2002-12-24 02:40:00 -0500 (Tue, 24 Dec 2002) | 2 lines

[Gtk2] Use GtkTreeView instead of GtkCList

------------------------------------------------------------------------
r2248 | cbiere | 2002-12-24 02:19:48 -0500 (Tue, 24 Dec 2002) | 2 lines

X-mas edition

------------------------------------------------------------------------
r2247 | cbiere | 2002-12-24 02:10:25 -0500 (Tue, 24 Dec 2002) | 2 lines

Uploaded stats: splitted into gui and core; rename ul_* functions to upload_*

------------------------------------------------------------------------
r2246 | cbiere | 2002-12-24 02:04:26 -0500 (Tue, 24 Dec 2002) | 2 lines

[Gtk2] Upload stats: Replaced GtkCList with GtkTreeView;  About dialog: freenode.org -> freenode.net

------------------------------------------------------------------------
r2245 | cbiere | 2002-12-22 16:20:52 -0500 (Sun, 22 Dec 2002) | 2 lines

[Gtk2] Bugfix: GtkG crashed when size filter was added due to different widget names in Gtk2 vs. Gtk1

------------------------------------------------------------------------
r2244 | rmanfredi | 2002-12-22 11:29:07 -0500 (Sun, 22 Dec 2002) | 2 lines

Look at the file's timestamp to ensure the SHA1 we have is up to date.

------------------------------------------------------------------------
r2242 | rmanfredi | 2002-12-22 06:02:04 -0500 (Sun, 22 Dec 2002) | 2 lines

Forgot to cancel the hostcache reading tasks at shutdown time.

------------------------------------------------------------------------
r2241 | rmanfredi | 2002-12-22 05:41:17 -0500 (Sun, 22 Dec 2002) | 2 lines

Turned the Type colum in the gnet display into flags.

------------------------------------------------------------------------
r2240 | rmanfredi | 2002-12-22 05:25:11 -0500 (Sun, 22 Dec 2002) | 3 lines

Turned the Type colum in the gnet display into flags.
CV: ----------------------------------------------------------------------

------------------------------------------------------------------------
r2239 | cbiere | 2002-12-21 23:48:46 -0500 (Sat, 21 Dec 2002) | 2 lines

Version of 22/12/2002

------------------------------------------------------------------------
r2238 | cbiere | 2002-12-21 23:45:03 -0500 (Sat, 21 Dec 2002) | 2 lines

[Gtk2] Added columns for connected time and uptime (sync with Gtk1)

------------------------------------------------------------------------
r2237 | cbiere | 2002-12-21 09:46:39 -0500 (Sat, 21 Dec 2002) | 2 lines

Revised rule 4.2 and 4.3

------------------------------------------------------------------------
r2236 | wyldfire | 2002-12-20 14:38:55 -0500 (Fri, 20 Dec 2002) | 2 lines

Use g_strlcpy instead of strlcpy

------------------------------------------------------------------------
r2235 | cbiere | 2002-12-19 21:46:39 -0500 (Thu, 19 Dec 2002) | 2 lines

Version of 20/12/2002

------------------------------------------------------------------------
r2234 | cbiere | 2002-12-19 21:45:27 -0500 (Thu, 19 Dec 2002) | 2 lines

Rearranged gnet stats; reduced CPU load for gnet stats

------------------------------------------------------------------------
r2233 | cbiere | 2002-12-18 08:01:24 -0500 (Wed, 18 Dec 2002) | 2 lines

Version of 18/12/2002

------------------------------------------------------------------------
r2232 | cbiere | 2002-12-17 21:44:14 -0500 (Tue, 17 Dec 2002) | 2 lines

Fixed non-local #include

------------------------------------------------------------------------
r2231 | cbiere | 2002-12-17 21:42:47 -0500 (Tue, 17 Dec 2002) | 2 lines

Added #define for g_string_printf; fixed typo

------------------------------------------------------------------------
r2230 | cbiere | 2002-12-17 21:38:45 -0500 (Tue, 17 Dec 2002) | 2 lines

Fixed race condition in shell_dump_cookie(); fixed typo; moved g_string_printf compatibility quirk to misc.h

------------------------------------------------------------------------
r2229 | rmanfredi | 2002-12-17 17:36:54 -0500 (Tue, 17 Dec 2002) | 2 lines

Version of 17/12/2002.

------------------------------------------------------------------------
r2228 | rmanfredi | 2002-12-17 17:32:53 -0500 (Tue, 17 Dec 2002) | 3 lines

Was wrongly using strcasecmp(var, "http://") instead of the correct form
strncasecmp(var, "http://", 7).

------------------------------------------------------------------------
r2227 | rmanfredi | 2002-12-17 17:28:02 -0500 (Tue, 17 Dec 2002) | 2 lines

Fixed typo "Prefered" -> "Preferred".

------------------------------------------------------------------------
r2226 | rmanfredi | 2002-12-17 17:27:13 -0500 (Tue, 17 Dec 2002) | 2 lines

Simplified gnet_stats.c to always use the stats_lut[] array.

------------------------------------------------------------------------
r2225 | rmanfredi | 2002-12-17 17:26:11 -0500 (Tue, 17 Dec 2002) | 3 lines

Avoid writing back the fileinfo trailer when there was no new data
and the fileinfo is not otherwise dirty.

------------------------------------------------------------------------
r2224 | rmanfredi | 2002-12-17 17:24:39 -0500 (Tue, 17 Dec 2002) | 3 lines

Had to regenerate configure et al. because it complained it could not
find automake-1.4 on my system with --enable-maintainer-mode.

------------------------------------------------------------------------
r2223 | wyldfire | 2002-12-17 11:54:31 -0500 (Tue, 17 Dec 2002) | 4 lines


Added optional remote shell support (add --enable-remote-shell to configure)
Documentation is in doc/other/remote-shell.txt

------------------------------------------------------------------------
r2222 | wyldfire | 2002-12-17 10:14:39 -0500 (Tue, 17 Dec 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2221 | wyldfire | 2002-12-17 09:55:29 -0500 (Tue, 17 Dec 2002) | 3 lines


Removed reissue_timeout argument from search_gui_new_search(). (Also [Gtk2])

------------------------------------------------------------------------
r2220 | wyldfire | 2002-12-17 09:54:41 -0500 (Tue, 17 Dec 2002) | 4 lines


Added optional remote shell support (add --enable-remote-shell to configure)
Documentation is in doc/other/remote-shell.txt

------------------------------------------------------------------------
r2219 | wyldfire | 2002-12-17 09:48:08 -0500 (Tue, 17 Dec 2002) | 3 lines


[Gtk2] Moved #define of g_ascii_strcasecmp from dmesh.c to misc.h

------------------------------------------------------------------------
r2218 | wyldfire | 2002-12-17 09:47:26 -0500 (Tue, 17 Dec 2002) | 4 lines


About dialog should be opened centered now
Quit dialog should open at mouse position now

------------------------------------------------------------------------
r2217 | wyldfire | 2002-12-17 09:45:06 -0500 (Tue, 17 Dec 2002) | 4 lines


Fixed wrong argument type in inputevt_add (gint -> guint).
Added inputevt_remove(). Please use this instead of g_source_remove().

------------------------------------------------------------------------
r2216 | cbiere | 2002-12-16 01:15:27 -0500 (Mon, 16 Dec 2002) | 2 lines

Replaced #include "gtk-missing.h" by "gui.h"

------------------------------------------------------------------------
r2215 | cbiere | 2002-12-16 01:13:44 -0500 (Mon, 16 Dec 2002) | 2 lines

[Gtk2] Removed usage of deprecated g_hash_table_{freeze,thaw}()

------------------------------------------------------------------------
r2214 | cbiere | 2002-12-16 01:12:31 -0500 (Mon, 16 Dec 2002) | 2 lines

Added #include "config.h"

------------------------------------------------------------------------
r2213 | cbiere | 2002-12-16 01:11:02 -0500 (Mon, 16 Dec 2002) | 2 lines

Removed circular dependency

------------------------------------------------------------------------
r2212 | cbiere | 2002-12-16 01:10:00 -0500 (Mon, 16 Dec 2002) | 2 lines

Fixed #include for regex.h; [Gtk2] Wrapper for deprecated g_strdown()

------------------------------------------------------------------------
r2211 | cbiere | 2002-12-16 01:07:36 -0500 (Mon, 16 Dec 2002) | 2 lines

[Gtk2] Removed usage of deprecated g_strcasecmp()

------------------------------------------------------------------------
r2210 | cbiere | 2002-12-16 01:03:31 -0500 (Mon, 16 Dec 2002) | 2 lines

Fixed #include for regex.h

------------------------------------------------------------------------
r2209 | cbiere | 2002-12-16 01:01:16 -0500 (Mon, 16 Dec 2002) | 2 lines

[Gtk2] Enforce G_DISABLE_DEPRECATED

------------------------------------------------------------------------
r2208 | cbiere | 2002-12-15 19:40:52 -0500 (Sun, 15 Dec 2002) | 2 lines

Make sure all variables are initialized to suppress compiler warnings

------------------------------------------------------------------------
r2207 | cbiere | 2002-12-15 19:37:34 -0500 (Sun, 15 Dec 2002) | 2 lines

Removed unnecessary #includes and #define NO_FUNC

------------------------------------------------------------------------
r2206 | cbiere | 2002-12-15 19:36:11 -0500 (Sun, 15 Dec 2002) | 2 lines

Replaced gettimeofday() with g_get_current_time() from glib

------------------------------------------------------------------------
r2205 | wyldfire | 2002-12-15 14:37:33 -0500 (Sun, 15 Dec 2002) | 2 lines

Added notice not to set max connections larger then 10

------------------------------------------------------------------------
r2204 | wyldfire | 2002-12-15 14:27:06 -0500 (Sun, 15 Dec 2002) | 2 lines

Added notice about sourcefile to autogenerated property files

------------------------------------------------------------------------
r2203 | cbiere | 2002-12-15 13:55:00 -0500 (Sun, 15 Dec 2002) | 2 lines

[Gtk2] Replaced deprecated GtkCList in gnet stats pane by GtkTreeView

------------------------------------------------------------------------
r2202 | cbiere | 2002-12-12 23:39:48 -0500 (Thu, 12 Dec 2002) | 3 lines

 * New checkbutton for FC stats: select wehther packet headers should be added
   to volumes

------------------------------------------------------------------------
r2201 | rmanfredi | 2002-12-12 14:27:03 -0500 (Thu, 12 Dec 2002) | 2 lines

Fixed crash at exit time: was calling hcache_clear() from hcache_free().

------------------------------------------------------------------------
r2200 | wyldfire | 2002-12-12 14:08:38 -0500 (Thu, 12 Dec 2002) | 2 lines

Fixed shifted stats (really)

------------------------------------------------------------------------
r2199 | wyldfire | 2002-12-12 13:59:12 -0500 (Thu, 12 Dec 2002) | 2 lines

Fixed shifted stats

------------------------------------------------------------------------
r2198 | cbiere | 2002-12-12 01:33:47 -0500 (Thu, 12 Dec 2002) | 2 lines

 * gui_prop_shutdown(): corrected order in which pointers are set to NULL

------------------------------------------------------------------------
r2197 | cbiere | 2002-12-11 07:40:37 -0500 (Wed, 11 Dec 2002) | 2 lines

 * Removed a g_message(); fixed an oversight in pkg vs. byte

------------------------------------------------------------------------
r2196 | cbiere | 2002-12-11 06:40:07 -0500 (Wed, 11 Dec 2002) | 2 lines

 * Fixed problems with uninitialized variables, warning was omitted when compiling with -O

------------------------------------------------------------------------
r2195 | wyldfire | 2002-12-11 06:37:42 -0500 (Wed, 11 Dec 2002) | 2 lines

Set property array and property set to NULL during shutdown

------------------------------------------------------------------------
r2194 | wyldfire | 2002-12-10 14:47:11 -0500 (Tue, 10 Dec 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2193 | wyldfire | 2002-12-10 14:45:41 -0500 (Tue, 10 Dec 2002) | 2 lines

Removed reference to shell.[ch] from Makefile

------------------------------------------------------------------------
r2192 | wyldfire | 2002-12-10 14:37:30 -0500 (Tue, 10 Dec 2002) | 2 lines

Reorganized gnet stats again

------------------------------------------------------------------------
r2191 | wyldfire | 2002-12-10 14:33:00 -0500 (Tue, 10 Dec 2002) | 2 lines

Reorganized gnet stats again, split off gnet_stats_gui2.h

------------------------------------------------------------------------
r2190 | cbiere | 2002-12-10 03:36:07 -0500 (Tue, 10 Dec 2002) | 3 lines

 * Windows are opened at mouse cursor position
 * Replaced combo in flow control stats with radio buttons

------------------------------------------------------------------------
r2189 | cbiere | 2002-12-10 03:29:49 -0500 (Tue, 10 Dec 2002) | 4 lines

 * Column 0 is hidden for TTL view
 * Switched view selections from GtkCombo to GtkRadioButtons
 * some code cleanups

------------------------------------------------------------------------
r2188 | cbiere | 2002-12-10 03:25:17 -0500 (Tue, 10 Dec 2002) | 2 lines

 * [Gtk2] Columns for search results can be reordered

------------------------------------------------------------------------
r2187 | cbiere | 2002-12-09 17:32:56 -0500 (Mon, 09 Dec 2002) | 2 lines

 * GNet tab looks a less ugly in small pane now

------------------------------------------------------------------------
r2186 | cbiere | 2002-12-09 14:54:02 -0500 (Mon, 09 Dec 2002) | 2 lines

 * [Gtk2] Added #ifndef for non-existent widgets

------------------------------------------------------------------------
r2185 | wyldfire | 2002-12-08 18:50:23 -0500 (Sun, 08 Dec 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2184 | wyldfire | 2002-12-08 18:43:14 -0500 (Sun, 08 Dec 2002) | 2 lines

Updated new stats

------------------------------------------------------------------------
r2183 | rmanfredi | 2002-12-08 17:47:17 -0500 (Sun, 08 Dec 2002) | 2 lines

Added hcache_remove_all() to decouple hcache_free() from hcache_clear().

------------------------------------------------------------------------
r2182 | wyldfire | 2002-12-08 17:38:59 -0500 (Sun, 08 Dec 2002) | 2 lines

Fixed typo

------------------------------------------------------------------------
r2181 | wyldfire | 2002-12-08 17:36:54 -0500 (Sun, 08 Dec 2002) | 2 lines

Added new stats

------------------------------------------------------------------------
r2180 | rmanfredi | 2002-12-08 17:05:57 -0500 (Sun, 08 Dec 2002) | 2 lines

Tweaked order of host_close(), hcache_close() and settings_close().

------------------------------------------------------------------------
r2179 | cbiere | 2002-12-08 15:14:55 -0500 (Sun, 08 Dec 2002) | 2 lines

 * Bugfix: flow-stats were shifted one column to the left

------------------------------------------------------------------------
r2178 | cbiere | 2002-12-08 13:46:21 -0500 (Sun, 08 Dec 2002) | 2 lines

 * [Gtk2] Added new stats pane with information about flow-control

------------------------------------------------------------------------
r2176 | rmanfredi | 2002-12-08 09:56:19 -0500 (Sun, 08 Dec 2002) | 2 lines

Made sure Location headers in replies are absolute URIs, per HTTP/1.1 specs.

------------------------------------------------------------------------
r2175 | wyldfire | 2002-12-08 08:50:07 -0500 (Sun, 08 Dec 2002) | 2 lines

Cleant up misc.h and replaced ARRAY_COUNT with G_N_ELEMENTS

------------------------------------------------------------------------
r2174 | rmanfredi | 2002-12-08 04:40:11 -0500 (Sun, 08 Dec 2002) | 2 lines

When a host cache is freed, reset its pointer to NULL to prevent reuse.

------------------------------------------------------------------------
r2173 | rmanfredi | 2002-12-08 04:39:31 -0500 (Sun, 08 Dec 2002) | 2 lines

Was calling hcache_close() too soon.

------------------------------------------------------------------------
r2172 | rmanfredi | 2002-12-08 04:38:50 -0500 (Sun, 08 Dec 2002) | 2 lines

Added TASK_F_RUNNABLE flag to ensure non-duplication of tasks in run queue.

------------------------------------------------------------------------
r2171 | cbiere | 2002-12-08 01:16:11 -0500 (Sun, 08 Dec 2002) | 2 lines

 * [Gtk2] Sync'ed About-dialog with Gtk1

------------------------------------------------------------------------
r2170 | cbiere | 2002-12-07 22:34:11 -0500 (Sat, 07 Dec 2002) | 2 lines

 * [Gtk2] Added buttons for 'Require urn' and 'Require server name'; use GtkNotebook for GNet stats

------------------------------------------------------------------------
r2169 | cbiere | 2002-12-07 22:27:23 -0500 (Sat, 07 Dec 2002) | 2 lines

 * Gtk2 wants the handler for focus-out-event to return FALSE, Gtk1 doesn't care

------------------------------------------------------------------------
r2168 | rmanfredi | 2002-12-07 20:18:51 -0500 (Sat, 07 Dec 2002) | 2 lines

Switched vendor searching from linear to dichotomic lookup.

------------------------------------------------------------------------
r2167 | rmanfredi | 2002-12-07 20:15:51 -0500 (Sat, 07 Dec 2002) | 2 lines

Added vendor codes GDNA and GNTD.

------------------------------------------------------------------------
r2166 | rmanfredi | 2002-12-07 20:14:23 -0500 (Sat, 07 Dec 2002) | 2 lines

Changed "Transmit timeout" message into "Flow-controlled for too long".

------------------------------------------------------------------------
r2165 | rmanfredi | 2002-12-07 12:08:20 -0500 (Sat, 07 Dec 2002) | 2 lines

Refuse connection from "Gtk-Gnutella" (spoofed/tempered-with string).

------------------------------------------------------------------------
r2164 | wyldfire | 2002-12-07 10:31:12 -0500 (Sat, 07 Dec 2002) | 2 lines

Added two new properties to gui

------------------------------------------------------------------------
r2163 | rmanfredi | 2002-12-07 06:23:47 -0500 (Sat, 07 Dec 2002) | 2 lines

Added "ko" to the list.

------------------------------------------------------------------------
r2162 | rmanfredi | 2002-12-07 04:54:40 -0500 (Sat, 07 Dec 2002) | 2 lines

It's version of 06/12/2002, not 06/11!

------------------------------------------------------------------------
r2161 | rmanfredi | 2002-12-07 02:45:58 -0500 (Sat, 07 Dec 2002) | 2 lines

Even when node is connected, it can lack the "alive_ping" object.

------------------------------------------------------------------------
r2160 | rmanfredi | 2002-12-06 17:17:03 -0500 (Fri, 06 Dec 2002) | 2 lines

Version of 06/12/2002.

------------------------------------------------------------------------
r2159 | rmanfredi | 2002-12-06 17:01:44 -0500 (Fri, 06 Dec 2002) | 3 lines

Removed all GDK input dependencies, using a new input event facade on top
of the Glib I/O routines [Patch from ko].

------------------------------------------------------------------------
r2158 | rmanfredi | 2002-12-06 15:37:59 -0500 (Fri, 06 Dec 2002) | 3 lines

Two query hits or push messages with same hop count are now discriminated
via their TTL: the lowest it is, the more priority we give.

------------------------------------------------------------------------
r2157 | rmanfredi | 2002-12-06 15:35:34 -0500 (Fri, 06 Dec 2002) | 2 lines

Show average/last ping-pong roundtrip time in milliseconds in node's Info.

------------------------------------------------------------------------
r2156 | rmanfredi | 2002-12-06 15:34:40 -0500 (Fri, 06 Dec 2002) | 2 lines

Added alive_get_roundtrip_ms() to extract roundtrip times.

------------------------------------------------------------------------
r2155 | rmanfredi | 2002-12-05 15:50:28 -0500 (Thu, 05 Dec 2002) | 2 lines

Removed obsoleted "host_file" variable.

------------------------------------------------------------------------
r2154 | rmanfredi | 2002-12-05 15:49:06 -0500 (Thu, 05 Dec 2002) | 3 lines

Added more cases where we remove source from the download mesh on error.
Process properties "download_require_urn" and "download_require_server_name".

------------------------------------------------------------------------
r2153 | rmanfredi | 2002-12-05 15:46:32 -0500 (Thu, 05 Dec 2002) | 2 lines

Added properties "download_require_urn" and "download_require_server_name".

------------------------------------------------------------------------
r2152 | cbiere | 2002-12-05 11:55:25 -0500 (Thu, 05 Dec 2002) | 2 lines

 * Removed section about hostcaches; fixed some typos

------------------------------------------------------------------------
r2151 | cbiere | 2002-12-05 05:48:39 -0500 (Thu, 05 Dec 2002) | 2 lines

 * Cleanup for 64-bit architectures; replaced non-portable casts by GINT_TO_POINTER() et al.

------------------------------------------------------------------------
r2150 | cbiere | 2002-12-05 01:28:21 -0500 (Thu, 05 Dec 2002) | 2 lines

 * [Gtk2] Removed unnecessary c_sr_sortkey; fixed memory leak

------------------------------------------------------------------------
r2149 | cbiere | 2002-12-05 01:15:05 -0500 (Thu, 05 Dec 2002) | 2 lines

 * [Gtk2] Convert strings to UTF8

------------------------------------------------------------------------
r2148 | cbiere | 2002-12-02 19:06:57 -0500 (Mon, 02 Dec 2002) | 2 lines

 * Replaced g_free() by G_FREE_NULL()

------------------------------------------------------------------------
r2147 | cbiere | 2002-12-02 19:04:51 -0500 (Mon, 02 Dec 2002) | 2 lines

 * Changed type of error to const gchar *

------------------------------------------------------------------------
r2146 | cbiere | 2002-12-02 19:02:50 -0500 (Mon, 02 Dec 2002) | 2 lines

 * Added macro G_FREE_NULL()

------------------------------------------------------------------------
r2145 | cbiere | 2002-12-02 18:59:49 -0500 (Mon, 02 Dec 2002) | 2 lines

 * Added recommendation for G_FREE_NULL; fixed typo; added rule for "while" and "for"

------------------------------------------------------------------------
r2144 | cbiere | 2002-12-02 18:47:28 -0500 (Mon, 02 Dec 2002) | 2 lines

 * [Gtk2] Bugfix: handlers for focus-out-event must return FALSE, whereas Gtk1 doesn't care about this

------------------------------------------------------------------------
r2143 | rmanfredi | 2002-12-02 14:04:19 -0500 (Mon, 02 Dec 2002) | 2 lines

Forgot missing trailing space after the "Gnucleus" name.

------------------------------------------------------------------------
r2142 | cbiere | 2002-12-02 13:15:44 -0500 (Mon, 02 Dec 2002) | 2 lines

 * Bugfix: hcache_close() accessed gnet_property after it was free()d in settings_close()

------------------------------------------------------------------------
r2141 | cbiere | 2002-12-01 17:20:36 -0500 (Sun, 01 Dec 2002) | 2 lines

 * Removed some unnecessary lines

------------------------------------------------------------------------
r2140 | cbiere | 2002-12-01 13:32:11 -0500 (Sun, 01 Dec 2002) | 2 lines

 * [Gtk2] Speedup autoselection; re-use exisiting code for record comparison

------------------------------------------------------------------------
r2139 | cbiere | 2002-12-01 11:11:02 -0500 (Sun, 01 Dec 2002) | 2 lines

 * Fixed bug: potential reading from uninitialized memory

------------------------------------------------------------------------
r2138 | cbiere | 2002-12-01 11:09:56 -0500 (Sun, 01 Dec 2002) | 2 lines

 * Make sure hostname is initialized to a valid string

------------------------------------------------------------------------
r2137 | cbiere | 2002-12-01 09:30:26 -0500 (Sun, 01 Dec 2002) | 2 lines

 * Added checks for libsocket and libnsl needed by Solaris

------------------------------------------------------------------------
r2136 | cbiere | 2002-11-30 18:01:54 -0500 (Sat, 30 Nov 2002) | 3 lines

 * check_valid_host() was renamed to host_is_valid()
 * "Remove files manually selected for download" is honoured, now

------------------------------------------------------------------------
r2135 | cbiere | 2002-11-30 16:58:09 -0500 (Sat, 30 Nov 2002) | 2 lines

 * Fixed string for gtk_progress_bar_set_text() again

------------------------------------------------------------------------
r2134 | rmanfredi | 2002-11-30 14:59:35 -0500 (Sat, 30 Nov 2002) | 2 lines

Bug fixing.

------------------------------------------------------------------------
r2133 | rmanfredi | 2002-11-30 14:58:59 -0500 (Sat, 30 Nov 2002) | 4 lines

Was passing 'len' as a macro argument, which was then copying this into
a local variable called 'len' => was getting garbage into that value.
Do not store trailing NUL within aliases (in fileinfo trailer).

------------------------------------------------------------------------
r2132 | wyldfire | 2002-11-30 11:26:51 -0500 (Sat, 30 Nov 2002) | 2 lines

removed reference to old log file

------------------------------------------------------------------------
r2131 | rmanfredi | 2002-11-30 06:43:33 -0500 (Sat, 30 Nov 2002) | 2 lines

Version of 30/11/2002.

------------------------------------------------------------------------
r2130 | rmanfredi | 2002-11-30 06:41:20 -0500 (Sat, 30 Nov 2002) | 2 lines

Allow file moving and SHA1 verification tasks to process zero-sized files.

------------------------------------------------------------------------
r2129 | rmanfredi | 2002-11-30 06:40:25 -0500 (Sat, 30 Nov 2002) | 2 lines

Renamed check_valid_host() into host_is_valid().

------------------------------------------------------------------------
r2128 | rmanfredi | 2002-11-30 06:36:47 -0500 (Sat, 30 Nov 2002) | 4 lines

Renamed check_valid_host() into host_is_valid().
Would fail to parse saved downloads whose filename starts with a '#'.
We now forbid comments in the file passed the preamble.

------------------------------------------------------------------------
r2127 | rmanfredi | 2002-11-30 06:27:39 -0500 (Sat, 30 Nov 2002) | 3 lines

First take at the separation between the regular "host" cache and the
new "ultra" cache which will store ultranode pongs.

------------------------------------------------------------------------
r2126 | rmanfredi | 2002-11-30 06:10:23 -0500 (Sat, 30 Nov 2002) | 3 lines

Regenerated configuration files via autogen.sh: was complaining that I
needed automake-1.4 on my system, which I have!  Grr, I hate auto* tools.

------------------------------------------------------------------------
r2125 | rmanfredi | 2002-11-29 15:22:21 -0500 (Fri, 29 Nov 2002) | 3 lines

Safely handle very long lines when parsing the fileinfo text file.
Do not write aliases larger than 1024 bytes to the trailer.

------------------------------------------------------------------------
r2124 | rmanfredi | 2002-11-29 15:20:39 -0500 (Fri, 29 Nov 2002) | 2 lines

Added "Gnucleus 1.6.0.0" to the servent ban list (broken Morpheus version).

------------------------------------------------------------------------
r2123 | cbiere | 2002-11-28 17:28:47 -0500 (Thu, 28 Nov 2002) | 2 lines

 * Fixed typo in hostcatcher progress bar

------------------------------------------------------------------------
r2122 | cbiere | 2002-11-28 17:27:39 -0500 (Thu, 28 Nov 2002) | 2 lines

 * Added missing cast for strtoul()

------------------------------------------------------------------------
r2121 | cbiere | 2002-11-28 17:25:23 -0500 (Thu, 28 Nov 2002) | 3 lines

 * [Gtk2] Re-enabled sorting by size
 * [Gtk2] Tweaked autoselection and sorting

------------------------------------------------------------------------
r2120 | cbiere | 2002-11-27 22:54:37 -0500 (Wed, 27 Nov 2002) | 2 lines

 * Corrected inclusion comment for ctype.h: toupper()

------------------------------------------------------------------------
r2119 | cbiere | 2002-11-27 22:51:05 -0500 (Wed, 27 Nov 2002) | 2 lines

 * Removed unnecessary #include <ctype.h>

------------------------------------------------------------------------
r2118 | cbiere | 2002-11-27 22:49:16 -0500 (Wed, 27 Nov 2002) | 2 lines

 * Argument to tolower(), ..., isalnum(), isdigit() must be representable as an unsigned char or EOF

------------------------------------------------------------------------
r2115 | wyldfire | 2002-11-26 13:26:49 -0500 (Tue, 26 Nov 2002) | 4 lines


Moved "freeze queue" toggle back to downloads pane.
Filters can be opened from the toolbar or from the search pane.

------------------------------------------------------------------------
r2114 | cbiere | 2002-11-25 21:15:01 -0500 (Mon, 25 Nov 2002) | 2 lines

 * Corrects oversight in previous zlib fix

------------------------------------------------------------------------
r2113 | cbiere | 2002-11-25 20:51:13 -0500 (Mon, 25 Nov 2002) | 2 lines

 * Fixed detection of zlib because it could accidently default to "yes"

------------------------------------------------------------------------
r2110 | rmanfredi | 2002-11-25 07:12:17 -0500 (Mon, 25 Nov 2002) | 3 lines

Will now allow HTTP headers of up to 8K in size, before failing with
a "header line too long" error.

------------------------------------------------------------------------
r2109 | rmanfredi | 2002-11-25 05:13:16 -0500 (Mon, 25 Nov 2002) | 2 lines

Factorized configuration file opening/creating logic into "file.c".

------------------------------------------------------------------------
r2108 | rmanfredi | 2002-11-25 04:14:44 -0500 (Mon, 25 Nov 2002) | 3 lines

When considering whether a download has a SHA1 for abortion, use the
SHA1 information in the fileinfo, not the one in the download structure.

------------------------------------------------------------------------
r2107 | rmanfredi | 2002-11-24 11:22:23 -0500 (Sun, 24 Nov 2002) | 3 lines

Parse Mutella's Uptime header (xDD xHH xMM).
Also collect pongs from X-Try lines if the third handshaking step fails.

------------------------------------------------------------------------
r2106 | cbiere | 2002-11-24 07:21:00 -0500 (Sun, 24 Nov 2002) | 2 lines

 * commented out broken code; fixed wrong usage of search_gui_new_search()

------------------------------------------------------------------------
r2105 | cbiere | 2002-11-24 07:04:48 -0500 (Sun, 24 Nov 2002) | 2 lines

* [Gtk2] Port search pane to Gtk2 (search_cb2.[ch], search_gui2.c)

------------------------------------------------------------------------
r2104 | cbiere | 2002-11-24 06:52:02 -0500 (Sun, 24 Nov 2002) | 2 lines

* [Gtk2] Port search pane to Gtk2 (search_cb2.[ch], search_gui2.c)

------------------------------------------------------------------------
r2103 | rmanfredi | 2002-11-23 13:18:33 -0500 (Sat, 23 Nov 2002) | 2 lines

Removed duplicate entry for Markus Goetz!

------------------------------------------------------------------------
r2102 | rmanfredi | 2002-11-23 13:07:17 -0500 (Sat, 23 Nov 2002) | 2 lines

Version of 23/11/2002.

------------------------------------------------------------------------
r2101 | rmanfredi | 2002-11-23 13:06:18 -0500 (Sat, 23 Nov 2002) | 2 lines

Added Markus Goetz to the AUTHORS file.

------------------------------------------------------------------------
r2100 | rmanfredi | 2002-11-23 13:05:26 -0500 (Sat, 23 Nov 2002) | 2 lines

Added bootstrapping web cache file [Patch from Markus Goetz].

------------------------------------------------------------------------
r2099 | rmanfredi | 2002-11-23 13:00:01 -0500 (Sat, 23 Nov 2002) | 2 lines

Also apply vendor-specific banning to nodes we connect to.

------------------------------------------------------------------------
r2098 | rmanfredi | 2002-11-23 12:58:55 -0500 (Sat, 23 Nov 2002) | 4 lines

Flag downloads when overlapping checks have been done to avoid doing
them twice when we got exactly as many bytes as the overlapping window.
(Bug found by Richard)

------------------------------------------------------------------------
r2097 | wyldfire | 2002-11-23 12:42:14 -0500 (Sat, 23 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2096 | wyldfire | 2002-11-23 12:41:37 -0500 (Sat, 23 Nov 2002) | 3 lines


 * Made dmesh cope with buggy alternate locations from LimeWire.

------------------------------------------------------------------------
r2095 | wyldfire | 2002-11-23 12:40:44 -0500 (Sat, 23 Nov 2002) | 3 lines


 * Added key != NULL assertion to atom_get and atom_free.

------------------------------------------------------------------------
r2094 | wyldfire | 2002-11-23 12:38:15 -0500 (Sat, 23 Nov 2002) | 2 lines

 * Forgot to thank guruz for gnet compression preferance patch

------------------------------------------------------------------------
r2093 | rmanfredi | 2002-11-22 16:42:34 -0500 (Fri, 22 Nov 2002) | 2 lines

Don't display the patchlevel in the version number if it's 0.

------------------------------------------------------------------------
r2092 | rmanfredi | 2002-11-22 16:27:05 -0500 (Fri, 22 Nov 2002) | 2 lines

Version of 22/11/2002.

------------------------------------------------------------------------
r2091 | rmanfredi | 2002-11-22 16:25:27 -0500 (Fri, 22 Nov 2002) | 3 lines

Fixed buglet that caused GTKG to warn again and again for the same "more
recent" version on stderr.

------------------------------------------------------------------------
r2090 | rmanfredi | 2002-11-22 16:24:23 -0500 (Fri, 22 Nov 2002) | 3 lines

Will now ban gtk-gnutella/0.90 and gtk-gnutella/0.91u because they are
harmful (could corrupt Gnutella traffic).

------------------------------------------------------------------------
r2089 | wyldfire | 2002-11-22 11:55:00 -0500 (Fri, 22 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2088 | wyldfire | 2002-11-22 11:54:18 -0500 (Fri, 22 Nov 2002) | 2 lines

 * Show URN queries in search stats

------------------------------------------------------------------------
r2087 | wyldfire | 2002-11-22 11:53:39 -0500 (Fri, 22 Nov 2002) | 4 lines


 * Moved parsing of magnet: and urn:sha1: searches from
   search_cb.c to search_gui.c

------------------------------------------------------------------------
r2086 | wyldfire | 2002-11-22 11:46:25 -0500 (Fri, 22 Nov 2002) | 5 lines


 * Add new debug level variable "common_dbg" controlled by
   PROP_LIB_DEBUG
 * Clean up includes

------------------------------------------------------------------------
r2085 | wyldfire | 2002-11-22 11:45:19 -0500 (Fri, 22 Nov 2002) | 4 lines


 * Add new debug level variable "common_dbg" controlled by
   PROP_LIB_DEBUG

------------------------------------------------------------------------
r2084 | wyldfire | 2002-11-22 11:41:39 -0500 (Fri, 22 Nov 2002) | 2 lines

 * Regenreated build files

------------------------------------------------------------------------
r2083 | wyldfire | 2002-11-22 11:40:13 -0500 (Fri, 22 Nov 2002) | 2 lines

 * Cleant up includes

------------------------------------------------------------------------
r2082 | wyldfire | 2002-11-22 11:38:23 -0500 (Fri, 22 Nov 2002) | 2 lines

 * Set version to 0.92.0u

------------------------------------------------------------------------
r2081 | wyldfire | 2002-11-22 11:33:55 -0500 (Fri, 22 Nov 2002) | 3 lines


 *  Polished toolbar

------------------------------------------------------------------------
r2080 | wyldfire | 2002-11-22 11:18:07 -0500 (Fri, 22 Nov 2002) | 2 lines

 * Cleant up includes

------------------------------------------------------------------------
r2079 | wyldfire | 2002-11-22 11:13:33 -0500 (Fri, 22 Nov 2002) | 4 lines


 * Add new debug level variable: common_dbg
 * Clean up includes

------------------------------------------------------------------------
r2078 | wyldfire | 2002-11-22 11:11:19 -0500 (Fri, 22 Nov 2002) | 3 lines


 * Show more information on failed uploads

------------------------------------------------------------------------
r2074 | rmanfredi | 2002-11-22 06:05:26 -0500 (Fri, 22 Nov 2002) | 2 lines

Version 0.91.1.

------------------------------------------------------------------------
r2073 | rmanfredi | 2002-11-22 06:03:39 -0500 (Fri, 22 Nov 2002) | 2 lines

For version 0.91.1.

------------------------------------------------------------------------
r2072 | rmanfredi | 2002-11-22 05:58:59 -0500 (Fri, 22 Nov 2002) | 3 lines

Fixed maximum random value computation when random() is being used on
other machines than Linux [With the help from Uros Bizjak].

------------------------------------------------------------------------
r2071 | rmanfredi | 2002-11-22 05:45:49 -0500 (Fri, 22 Nov 2002) | 2 lines

Updated: 406 is now used, and 409 has been assigned.

------------------------------------------------------------------------
r2069 | rmanfredi | 2002-11-22 05:34:54 -0500 (Fri, 22 Nov 2002) | 2 lines

Unplugged QRT computation for 0.91.1.

------------------------------------------------------------------------
r2068 | rmanfredi | 2002-11-22 05:33:52 -0500 (Fri, 22 Nov 2002) | 3 lines

Moved sendfile() checks where they belong, i.e. in bio_sendfile(), with
additional paranoid checks.

------------------------------------------------------------------------
r2067 | wyldfire | 2002-11-21 13:53:43 -0500 (Thu, 21 Nov 2002) | 2 lines

 * Show hacked BearShare sha1 queries correct instead of showing '\'

------------------------------------------------------------------------
r2066 | rmanfredi | 2002-11-20 17:52:51 -0500 (Wed, 20 Nov 2002) | 2 lines

Do strftime("%z") formatting ourselves, since %z is a GNU extension.

------------------------------------------------------------------------
r2065 | rmanfredi | 2002-11-19 14:16:11 -0500 (Tue, 19 Nov 2002) | 2 lines

Added copyright statements for David Walker.

------------------------------------------------------------------------
r2064 | rmanfredi | 2002-11-19 14:14:38 -0500 (Tue, 19 Nov 2002) | 3 lines

Display message every 10 minutes in the status bar if they run an ancient
version, more than one year old.

------------------------------------------------------------------------
r2063 | rmanfredi | 2002-11-19 14:13:38 -0500 (Tue, 19 Nov 2002) | 3 lines

New `version_number' variable is now built to hold the version number string.
Do not show them new development versions if they don't run one.

------------------------------------------------------------------------
r2062 | rmanfredi | 2002-11-19 14:12:58 -0500 (Tue, 19 Nov 2002) | 2 lines

New `version_number' variable is now built to hold the version number string.

------------------------------------------------------------------------
r2060 | wyldfire | 2002-11-19 04:52:15 -0500 (Tue, 19 Nov 2002) | 2 lines

 * Improved about box, added more contributors

------------------------------------------------------------------------
r2059 | wyldfire | 2002-11-19 04:52:04 -0500 (Tue, 19 Nov 2002) | 2 lines

 * Automatically save core files in dated subdirs

------------------------------------------------------------------------
r2058 | wyldfire | 2002-11-19 04:33:32 -0500 (Tue, 19 Nov 2002) | 2 lines

 * new icons for the toolbar

------------------------------------------------------------------------
r2056 | wyldfire | 2002-11-17 13:32:25 -0500 (Sun, 17 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2055 | wyldfire | 2002-11-17 13:29:54 -0500 (Sun, 17 Nov 2002) | 3 lines

 * [Gtk2] Fixes crash when removing a search and switching to a new
   search.

------------------------------------------------------------------------
r2054 | rmanfredi | 2002-11-17 05:40:13 -0500 (Sun, 17 Nov 2002) | 2 lines

Version of 17/11/2002.

------------------------------------------------------------------------
r2053 | rmanfredi | 2002-11-17 05:27:02 -0500 (Sun, 17 Nov 2002) | 3 lines

Clearing of completed uploads now done "incrementally" to avoid freezing
the GUI when there is a lot to clear [Patch from Christian Biere].

------------------------------------------------------------------------
r2052 | rmanfredi | 2002-11-17 05:06:56 -0500 (Sun, 17 Nov 2002) | 3 lines

Will now use GGEP "H" in query hits when replying to a query from GTKG 0.91
or better, since we're sure the querying host will understand it.

------------------------------------------------------------------------
r2051 | rmanfredi | 2002-11-17 05:03:14 -0500 (Sun, 17 Nov 2002) | 2 lines

Removed hardwiring of `gui_debug'.

------------------------------------------------------------------------
r2050 | rmanfredi | 2002-11-17 05:00:42 -0500 (Sun, 17 Nov 2002) | 2 lines

Now understands "magnet:" URIs in search [Patch from David Belius].

------------------------------------------------------------------------
r2049 | rmanfredi | 2002-11-17 04:58:15 -0500 (Sun, 17 Nov 2002) | 2 lines

Style fix, for tags.

------------------------------------------------------------------------
r2048 | rmanfredi | 2002-11-17 04:56:11 -0500 (Sun, 17 Nov 2002) | 3 lines

Always verify that we have 32 chars before calling base32_decode_into()
to decode an urn:sha1.

------------------------------------------------------------------------
r2047 | rmanfredi | 2002-11-16 10:26:46 -0500 (Sat, 16 Nov 2002) | 2 lines

Added support for urn:bitprint:, although only its SHA1 part is processed.

------------------------------------------------------------------------
r2046 | rmanfredi | 2002-11-15 17:17:26 -0500 (Fri, 15 Nov 2002) | 2 lines

Version of 15/11/2002.

------------------------------------------------------------------------
r2045 | rmanfredi | 2002-11-15 17:16:14 -0500 (Fri, 15 Nov 2002) | 3 lines

Servers understanding /uri-res/N2R? may not send X-Gnutella-Content-URN.
No need to unlink the file in download_move_done().

------------------------------------------------------------------------
r2042 | wyldfire | 2002-11-14 12:46:56 -0500 (Thu, 14 Nov 2002) | 2 lines

 * Restore column width in nodes table (no saving yet)

------------------------------------------------------------------------
r2041 | wyldfire | 2002-11-14 12:43:06 -0500 (Thu, 14 Nov 2002) | 3 lines

 * Added update_treeview_col_width
 * Restore column width in nodes table (no saving yet)

------------------------------------------------------------------------
r2040 | wyldfire | 2002-11-14 12:40:58 -0500 (Thu, 14 Nov 2002) | 2 lines

 * Turn off auto-sizing of columns

------------------------------------------------------------------------
r2039 | wyldfire | 2002-11-14 10:41:51 -0500 (Thu, 14 Nov 2002) | 3 lines

 * Display "loading..." in host catcher while reading the file
 * Change plug icon if manually switching to offline mode

------------------------------------------------------------------------
r2038 | wyldfire | 2002-11-14 10:39:54 -0500 (Thu, 14 Nov 2002) | 2 lines

 * Don't try to connect to new hosts in offline mode

------------------------------------------------------------------------
r2037 | rmanfredi | 2002-11-13 02:05:40 -0500 (Wed, 13 Nov 2002) | 2 lines

Version of 12/11/2002.

------------------------------------------------------------------------
r2036 | rmanfredi | 2002-11-12 15:19:55 -0500 (Tue, 12 Nov 2002) | 2 lines

New file moving code was not properly stripping trailing fileinfo.

------------------------------------------------------------------------
r2035 | wyldfire | 2002-11-12 15:03:55 -0500 (Tue, 12 Nov 2002) | 2 lines

 * Fix: can browse "bad file path" only once.

------------------------------------------------------------------------
r2034 | wyldfire | 2002-11-12 10:32:37 -0500 (Tue, 12 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2033 | wyldfire | 2002-11-12 10:10:50 -0500 (Tue, 12 Nov 2002) | 2 lines

 * Now really add contributors

------------------------------------------------------------------------
r2032 | wyldfire | 2002-11-12 08:58:23 -0500 (Tue, 12 Nov 2002) | 2 lines

 * Greatly improved search monitor performance

------------------------------------------------------------------------
r2031 | wyldfire | 2002-11-12 08:56:39 -0500 (Tue, 12 Nov 2002) | 3 lines

 * Add new widgets from Gtk1 to Gtk2 frontend
 * Filled in contributors to about box

------------------------------------------------------------------------
r2030 | rmanfredi | 2002-11-11 18:16:52 -0500 (Mon, 11 Nov 2002) | 2 lines

Version of 11/11/2002.

------------------------------------------------------------------------
r2029 | rmanfredi | 2002-11-11 18:14:14 -0500 (Mon, 11 Nov 2002) | 2 lines

Show the server's uptime, even if we're not connected to the node.

------------------------------------------------------------------------
r2028 | rmanfredi | 2002-11-11 18:12:01 -0500 (Mon, 11 Nov 2002) | 2 lines

Also parse the Uptime header instead of X-Live-Since (Gnucleus nodes).

------------------------------------------------------------------------
r2027 | wyldfire | 2002-11-11 14:21:51 -0500 (Mon, 11 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r2026 | wyldfire | 2002-11-11 14:20:42 -0500 (Mon, 11 Nov 2002) | 2 lines

 * Added uptime and connected time columns to nodes table

------------------------------------------------------------------------
r2025 | wyldfire | 2002-11-11 14:18:56 -0500 (Mon, 11 Nov 2002) | 2 lines

 * Added entry for PROP_BAD_FILE_PATH to download config

------------------------------------------------------------------------
r2024 | wyldfire | 2002-11-11 14:18:13 -0500 (Mon, 11 Nov 2002) | 3 lines

 * Added entry for PROP_BAD_FILE_PATH to download config
 * Added icons to reflect state of PROP_FILE_MOVING

------------------------------------------------------------------------
r2023 | wyldfire | 2002-11-11 14:16:47 -0500 (Mon, 11 Nov 2002) | 2 lines

 * added FIXME: connect_date and up_date should be moved to gnet_node_info

------------------------------------------------------------------------
r2022 | wyldfire | 2002-11-11 14:13:05 -0500 (Mon, 11 Nov 2002) | 2 lines

 * Added uptime and connected time columns to nodes table

------------------------------------------------------------------------
r2021 | wyldfire | 2002-11-11 14:11:51 -0500 (Mon, 11 Nov 2002) | 4 lines

 * Added entry for PROP_BAD_FILE_PATH to download config
 * Added icons to reflect state of PROP_FILE_MOVING
 * Added uptime and connected time columns to nodes table

------------------------------------------------------------------------
r2020 | rmanfredi | 2002-11-11 10:53:32 -0500 (Mon, 11 Nov 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r2019 | rmanfredi | 2002-11-11 10:48:55 -0500 (Mon, 11 Nov 2002) | 3 lines

Changed property descriptions of "download paths" to remove any constraint
on them being on the same filesystem.

------------------------------------------------------------------------
r2018 | rmanfredi | 2002-11-11 10:47:14 -0500 (Mon, 11 Nov 2002) | 2 lines

Typo fix.

------------------------------------------------------------------------
r2017 | rmanfredi | 2002-11-11 10:46:34 -0500 (Mon, 11 Nov 2002) | 3 lines

Don't reject PUSH comming from a private IP if we're connected to it
(this is mainly for testing purposes but will not hurt).

------------------------------------------------------------------------
r2016 | rmanfredi | 2002-11-11 10:45:13 -0500 (Mon, 11 Nov 2002) | 2 lines

The verify_queue() routine no longer knows about download states.

------------------------------------------------------------------------
r2015 | rmanfredi | 2002-11-11 10:44:20 -0500 (Mon, 11 Nov 2002) | 2 lines

Renamed node_connected() as node_is_connected().

------------------------------------------------------------------------
r2014 | rmanfredi | 2002-11-11 10:43:02 -0500 (Mon, 11 Nov 2002) | 2 lines

Added asynchronous moving of downloaded files.

------------------------------------------------------------------------
r2013 | rmanfredi | 2002-11-10 06:21:37 -0500 (Sun, 10 Nov 2002) | 3 lines

No longer uses strftime() to format date string for X-Live-Since, since
it insists on using the user's locale.

------------------------------------------------------------------------
r2012 | rmanfredi | 2002-11-10 03:21:45 -0500 (Sun, 10 Nov 2002) | 3 lines

New http://gwebcache.bearshare.net/gcache.php replaces the old zero-g.net
hardwired bootstrapping web cache, which was shutdown due to traffic.

------------------------------------------------------------------------
r2011 | rmanfredi | 2002-11-09 17:12:01 -0500 (Sat, 09 Nov 2002) | 2 lines

Version of 09/11/2002.

------------------------------------------------------------------------
r2010 | rmanfredi | 2002-11-09 17:10:55 -0500 (Sat, 09 Nov 2002) | 3 lines

Ensure we have "LC_TIME=C" in our environment.  Some X-Live-Since headers
are still incorrectly localized by strftime().

------------------------------------------------------------------------
r2009 | rmanfredi | 2002-11-09 17:09:31 -0500 (Sat, 09 Nov 2002) | 3 lines

Now computes the "startup date" for the nodes to which we connect, parsing
the X-Live-Since header.

------------------------------------------------------------------------
r2008 | rmanfredi | 2002-11-09 17:07:12 -0500 (Sat, 09 Nov 2002) | 3 lines

When we abort a download due to a header reception timeout, we might
not have got the full status line.

------------------------------------------------------------------------
r2007 | rmanfredi | 2002-11-09 13:55:32 -0500 (Sat, 09 Nov 2002) | 5 lines

Fixed download_clone(): rolled back previous change incrementing `recvcount'
and instead forced status of clone to GTA_DL_CONNECTING, to ensure that
downlaod_stop() will be called should we enqueue this download before
starting it.

------------------------------------------------------------------------
r2006 | rmanfredi | 2002-11-09 11:02:15 -0500 (Sat, 09 Nov 2002) | 4 lines

Shortened retry delay to 2 seconds when server cannot understand /uri-res.
(unless server explicitly set a Retry-After, in which case we honour it).
Forgot to increment `fi->recvcount' when cloning a download.

------------------------------------------------------------------------
r2005 | rmanfredi | 2002-11-09 07:25:50 -0500 (Sat, 09 Nov 2002) | 2 lines

Added logic to make the new "online mode" toggle actually work.

------------------------------------------------------------------------
r2004 | rmanfredi | 2002-11-09 05:55:51 -0500 (Sat, 09 Nov 2002) | 3 lines

New "file_moving" property to indicate that we move files in the background.
Default for dynamic upload slot allocation is now FALSE.

------------------------------------------------------------------------
r2003 | rmanfredi | 2002-11-09 05:53:02 -0500 (Sat, 09 Nov 2002) | 2 lines

New unique_filemame() routine.

------------------------------------------------------------------------
r2002 | rmanfredi | 2002-11-09 05:48:47 -0500 (Sat, 09 Nov 2002) | 4 lines

Now computes and displays the overall swarming downloading rate and the
time that remains to get the complete files.  Also shows how many sources
we're currently using out of the ones we know.

------------------------------------------------------------------------
r2001 | rmanfredi | 2002-11-08 14:42:58 -0500 (Fri, 08 Nov 2002) | 2 lines

The BSD sendfile() requires that first two arguments be swapped (wrt linux).

------------------------------------------------------------------------
r2000 | rmanfredi | 2002-11-07 17:18:42 -0500 (Thu, 07 Nov 2002) | 2 lines

Version of 07/11/2002.

------------------------------------------------------------------------
r1999 | rmanfredi | 2002-11-07 17:09:47 -0500 (Thu, 07 Nov 2002) | 3 lines

The BSD sendfile() has different signature and semantics.  Emulate the
Linux behaviour on those systems.

------------------------------------------------------------------------
r1998 | rmanfredi | 2002-11-07 16:48:00 -0500 (Thu, 07 Nov 2002) | 6 lines

Was wrongly testing for queued download instead of running one in
queue_suspend_downloads_with_file(), which could mess up with lifecount.
Will now retry downloads for which the SHA1 did not match.
When unlinking a file, display its SHA1 (if any) and the done/size info
to stderr.

------------------------------------------------------------------------
r1997 | rmanfredi | 2002-11-07 16:44:24 -0500 (Thu, 07 Nov 2002) | 3 lines

Added new property "bad_file_path" to indicate where files which do not
match their advertised SHA1 should be moved.

------------------------------------------------------------------------
r1996 | rmanfredi | 2002-11-07 16:42:11 -0500 (Thu, 07 Nov 2002) | 2 lines

Fixed memory leak in search_stats_notify_word() [From Christian Biere].

------------------------------------------------------------------------
r1995 | wyldfire | 2002-11-07 13:04:13 -0500 (Thu, 07 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1994 | wyldfire | 2002-11-07 13:03:31 -0500 (Thu, 07 Nov 2002) | 3 lines

 * Fixed sizeof issue (memory corruption?). Thanks Christian Biere for
   pointing

------------------------------------------------------------------------
r1993 | wyldfire | 2002-11-07 13:01:24 -0500 (Thu, 07 Nov 2002) | 3 lines

 * [Gtk2] Columns in gnet panel automatically grow in width again
 * [Gtk2] Fixed bug showing status information in version row on gnet panel.

------------------------------------------------------------------------
r1992 | wyldfire | 2002-11-07 12:51:48 -0500 (Thu, 07 Nov 2002) | 2 lines

 * Added new icons from Gtk1 and"prefer compressed" switch.

------------------------------------------------------------------------
r1991 | rmanfredi | 2002-11-06 16:36:31 -0500 (Wed, 06 Nov 2002) | 2 lines

Version of 06/11/2002.

------------------------------------------------------------------------
r1990 | rmanfredi | 2002-11-06 14:55:29 -0500 (Wed, 06 Nov 2002) | 5 lines

More tweakings with fileinfos: will now physically remove files that are
SHA1 or name/size ignored (if not completed already).
Forgot a few calls to file_info_clear_download() which releases the
association between a download entry and a chunk in the file.

------------------------------------------------------------------------
r1989 | rmanfredi | 2002-11-05 17:26:56 -0500 (Tue, 05 Nov 2002) | 2 lines

Version of 05/11/2002.

------------------------------------------------------------------------
r1988 | rmanfredi | 2002-11-05 17:24:45 -0500 (Tue, 05 Nov 2002) | 7 lines

Revisited fileinfo handling: try to not discard them when a download
stops, unless it was an explicit removal from the user or we are told to
ignore its SHA1, for instance.
Fixed possible discrepancy between the download's SHA1 and the fileinfo's.
In particular, we could associate a download with a known SHA1 with a
fileinfo not bearing a SHA1 at all.

------------------------------------------------------------------------
r1987 | rmanfredi | 2002-11-05 17:21:27 -0500 (Tue, 05 Nov 2002) | 3 lines

Don't show SHA1 computation rate if we did not hash anything (e.g. after
a recovery crash where we jump to the "SHA1 verified state" directly).

------------------------------------------------------------------------
r1986 | rmanfredi | 2002-11-04 15:31:18 -0500 (Mon, 04 Nov 2002) | 2 lines

Version of 04/11/2002.

------------------------------------------------------------------------
r1985 | rmanfredi | 2002-11-04 15:27:18 -0500 (Mon, 04 Nov 2002) | 2 lines

Freeze GUI list when clearing completed downloads [From Christian Biere].

------------------------------------------------------------------------
r1984 | rmanfredi | 2002-11-04 15:25:37 -0500 (Mon, 04 Nov 2002) | 5 lines

Will now protect against "PUSH floods" by banning the relevant IPs.
Avoid doing some work if we are going to use the sendfile() system call.
Added temporary sanity checking around sendfile(), just in case it does
not behave as advertised.

------------------------------------------------------------------------
r1983 | rmanfredi | 2002-11-04 15:22:33 -0500 (Mon, 04 Nov 2002) | 3 lines

Persist settings of the "prefer compressed connections" toggle button
[From Christian Biere].

------------------------------------------------------------------------
r1982 | rmanfredi | 2002-11-04 15:19:05 -0500 (Mon, 04 Nov 2002) | 2 lines

Skip non-plain files when scanning the "tmp" directory for orphan files.

------------------------------------------------------------------------
r1981 | rmanfredi | 2002-11-04 15:18:16 -0500 (Mon, 04 Nov 2002) | 3 lines

Will now say "SHA1 figure OK" instead of "SHA1 check OK" when we correctly
computed the SHA1 but none was originally known for the file.

------------------------------------------------------------------------
r1980 | rmanfredi | 2002-11-04 15:16:34 -0500 (Mon, 04 Nov 2002) | 3 lines

Prevent concurrent downloads from being stuck in the "Waiting for SHA1..."
when another one finishes: requeue them as they are suspended.

------------------------------------------------------------------------
r1979 | rmanfredi | 2002-11-04 15:15:16 -0500 (Mon, 04 Nov 2002) | 2 lines

Inclusion of sys/sendfile.h now protected by HAVE_SYS_SENDFILE_H.

------------------------------------------------------------------------
r1978 | rmanfredi | 2002-11-04 15:14:21 -0500 (Mon, 04 Nov 2002) | 4 lines

Restored broken support for sendfile(): configure was no longer setting
the proper variables, leading to sendfile() being ruled out everywhere
even when present.

------------------------------------------------------------------------
r1975 | rmanfredi | 2002-11-03 05:25:26 -0500 (Sun, 03 Nov 2002) | 2 lines

Version of 03/11/2002.

------------------------------------------------------------------------
r1974 | rmanfredi | 2002-11-03 05:19:36 -0500 (Sun, 03 Nov 2002) | 2 lines

Added new is_faked_download() routine.

------------------------------------------------------------------------
r1973 | rmanfredi | 2002-11-03 05:15:58 -0500 (Sun, 03 Nov 2002) | 2 lines

Added comments.

------------------------------------------------------------------------
r1972 | rmanfredi | 2002-11-03 05:14:52 -0500 (Sun, 03 Nov 2002) | 3 lines

Was showing bytes/s instead of kbytes/s in the final SHA1 computing
rate display.

------------------------------------------------------------------------
r1971 | rmanfredi | 2002-11-03 05:04:29 -0500 (Sun, 03 Nov 2002) | 11 lines

Refuse to start a "suspended" download, requeuing it as "Suspended".
Moved settings of the DL_F_SUSPENDED after download is allocated
(thanks to Paul Cassella for spotting this).
Log vendor string when HTTP/1.1 server gives us more bytes than requested.
When we have to trim data, we can't use keep-alive connections: remember
bad servers so we don't request upper-bounded ranges from them again.
When logging to "done.sha1", use the output filename as name, not the
server name, which could be an obscure urn:sha1: string.
When resuming after crash, forgot to handle the case where a completed
file could be listed many times in the queue.

------------------------------------------------------------------------
r1970 | wyldfire | 2002-11-02 18:05:42 -0500 (Sat, 02 Nov 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1969 | wyldfire | 2002-11-02 18:05:12 -0500 (Sat, 02 Nov 2002) | 2 lines

 * Fixed tooltips for firewalled/non-firewalled icons

------------------------------------------------------------------------
r1968 | wyldfire | 2002-11-02 18:03:18 -0500 (Sat, 02 Nov 2002) | 3 lines

 * Changed a few defaults to be more sensible.
 * Sidebar and filter tree have default width 140

------------------------------------------------------------------------
r1967 | wyldfire | 2002-11-02 18:00:19 -0500 (Sat, 02 Nov 2002) | 2 lines

 * Fixed typo

------------------------------------------------------------------------
r1966 | wyldfire | 2002-11-02 17:39:39 -0500 (Sat, 02 Nov 2002) | 2 lines

 * Added default sharing extensions: doc, nes, smc, smd, rom

------------------------------------------------------------------------
r1965 | wyldfire | 2002-11-02 17:29:12 -0500 (Sat, 02 Nov 2002) | 2 lines

 * Don't show any host information if host ip is 0

------------------------------------------------------------------------
r1964 | rmanfredi | 2002-11-02 03:23:17 -0500 (Sat, 02 Nov 2002) | 2 lines

Version of 02/11/2002.

------------------------------------------------------------------------
r1963 | rmanfredi | 2002-11-02 03:22:51 -0500 (Sat, 02 Nov 2002) | 2 lines

Display SHA1 computation status in the download window.

------------------------------------------------------------------------
r1962 | rmanfredi | 2002-11-02 03:21:01 -0500 (Sat, 02 Nov 2002) | 3 lines

Removed spurious checks in get_file_to_upload_from_index(), replacing
them with assertions.

------------------------------------------------------------------------
r1961 | rmanfredi | 2002-11-02 03:19:25 -0500 (Sat, 02 Nov 2002) | 2 lines

Fixed routing_log() which was not logging anything.

------------------------------------------------------------------------
r1960 | rmanfredi | 2002-11-02 03:18:41 -0500 (Sat, 02 Nov 2002) | 2 lines

Plugged asynchronous SHA1 verification initialization/shutdown.

------------------------------------------------------------------------
r1959 | rmanfredi | 2002-11-02 03:16:55 -0500 (Sat, 02 Nov 2002) | 2 lines

Split ignore_add() into ignore_add_sha1() and ignore_add_filesize().

------------------------------------------------------------------------
r1958 | rmanfredi | 2002-11-02 03:15:19 -0500 (Sat, 02 Nov 2002) | 2 lines

Only send urlfile requests to web caches once every 8 hours.

------------------------------------------------------------------------
r1957 | rmanfredi | 2002-11-02 03:14:22 -0500 (Sat, 02 Nov 2002) | 4 lines

Plugged in SHA1 verification when a download is complete.
At startup, scan the download "tmp" dir for orphan files and reintegrate
them into the fileinfo database, moving complete files to "done".

------------------------------------------------------------------------
r1956 | rmanfredi | 2002-11-02 03:11:29 -0500 (Sat, 02 Nov 2002) | 4 lines

Extended the background task model to also support "daemon" tasks, which
are tasks that sleep in the background and are woken up when work is to
be performed.

------------------------------------------------------------------------
r1955 | rmanfredi | 2002-11-02 03:09:43 -0500 (Sat, 02 Nov 2002) | 2 lines

Added asychronous SHA1 verification routines.

------------------------------------------------------------------------
r1954 | rmanfredi | 2002-10-30 17:40:27 -0500 (Wed, 30 Oct 2002) | 2 lines

Version of 30/10/2002.

------------------------------------------------------------------------
r1953 | rmanfredi | 2002-10-30 17:37:27 -0500 (Wed, 30 Oct 2002) | 2 lines

When falling back to push, reset the time for accurate push timeout.

------------------------------------------------------------------------
r1952 | rmanfredi | 2002-10-30 17:34:28 -0500 (Wed, 30 Oct 2002) | 2 lines

Avoid dereferencing a NULL `current_search' variable [From Juli Mallett].

------------------------------------------------------------------------
r1951 | wyldfire | 2002-10-30 15:17:47 -0500 (Wed, 30 Oct 2002) | 2 lines

 * Added PROP_SHA1_VERIFYING and PROP_ONLINE_MODE and the corresponding gui elements

------------------------------------------------------------------------
r1950 | rmanfredi | 2002-10-30 14:23:00 -0500 (Wed, 30 Oct 2002) | 2 lines

Don't call search_close() too early [Fix from Juli Mallett].

------------------------------------------------------------------------
r1949 | rmanfredi | 2002-10-30 14:16:28 -0500 (Wed, 30 Oct 2002) | 2 lines

Integrated batch of portability and cleanup fixes from Christian Biere.

------------------------------------------------------------------------
r1948 | rmanfredi | 2002-10-30 02:38:59 -0500 (Wed, 30 Oct 2002) | 3 lines

Moved check for "no GUID to use PUSH" to download_push() to avoid seeing
retry countdowns when a connection cannot be made.

------------------------------------------------------------------------
r1947 | rmanfredi | 2002-10-30 02:37:03 -0500 (Wed, 30 Oct 2002) | 2 lines

Raised logging level for some innermost traces.

------------------------------------------------------------------------
r1946 | rmanfredi | 2002-10-29 17:39:23 -0500 (Tue, 29 Oct 2002) | 2 lines

Version of 29/10/2002.

------------------------------------------------------------------------
r1945 | rmanfredi | 2002-10-29 17:38:24 -0500 (Tue, 29 Oct 2002) | 2 lines

Added Christian Biere to AUTHORS.

------------------------------------------------------------------------
r1944 | rmanfredi | 2002-10-29 17:37:31 -0500 (Tue, 29 Oct 2002) | 2 lines

Integrated random() support from Christian Biere.

------------------------------------------------------------------------
r1943 | rmanfredi | 2002-10-29 17:27:04 -0500 (Tue, 29 Oct 2002) | 2 lines

Converted existing SHA1 and QRP computation code to new background tasks.

------------------------------------------------------------------------
r1942 | rmanfredi | 2002-10-29 17:26:04 -0500 (Tue, 29 Oct 2002) | 2 lines

Re-plugged query routing table computation.

------------------------------------------------------------------------
r1941 | rmanfredi | 2002-10-29 17:25:25 -0500 (Tue, 29 Oct 2002) | 2 lines

Typo fix.

------------------------------------------------------------------------
r1940 | rmanfredi | 2002-10-29 17:24:55 -0500 (Tue, 29 Oct 2002) | 2 lines

Plugged background task timer.

------------------------------------------------------------------------
r1939 | rmanfredi | 2002-10-29 17:24:13 -0500 (Tue, 29 Oct 2002) | 2 lines

Added provision for storing computed SHA1 in fileinfo trailer.

------------------------------------------------------------------------
r1938 | rmanfredi | 2002-10-29 17:20:41 -0500 (Tue, 29 Oct 2002) | 4 lines

Added X-Host: support to specify non-firewalled server's IP address to
pushed uploads.  A pushed download seeing X-Host in the reply knows that
the server is not firewalled and that a direct connection can be made.

------------------------------------------------------------------------
r1937 | rmanfredi | 2002-10-29 17:17:04 -0500 (Tue, 29 Oct 2002) | 2 lines

New background task layer.

------------------------------------------------------------------------
r1918 | rmanfredi | 2002-10-26 06:44:51 -0400 (Sat, 26 Oct 2002) | 2 lines

Integrated portability fixes from Christian Biere for NetBSD.

------------------------------------------------------------------------
r1917 | rmanfredi | 2002-10-26 06:24:16 -0400 (Sat, 26 Oct 2002) | 2 lines

Raised size of the search queue to 256 entries.

------------------------------------------------------------------------
r1916 | rmanfredi | 2002-10-26 06:23:21 -0400 (Sat, 26 Oct 2002) | 2 lines

varargs copying fixes from Michel Daenzer for powerpc platforms.

------------------------------------------------------------------------
r1915 | rmanfredi | 2002-10-24 15:59:49 -0400 (Thu, 24 Oct 2002) | 2 lines

Opening version 0.92u.

------------------------------------------------------------------------
r1914 | rmanfredi | 2002-10-24 15:58:51 -0400 (Thu, 24 Oct 2002) | 2 lines

Now allow again setting "min Gnet connections" to 0.

------------------------------------------------------------------------
r1913 | rmanfredi | 2002-10-24 15:57:46 -0400 (Thu, 24 Oct 2002) | 2 lines

Fixed typo "interaface" -> "interface" in some includes.

------------------------------------------------------------------------
r1912 | rmanfredi | 2002-10-24 15:54:35 -0400 (Thu, 24 Oct 2002) | 2 lines

New walloc0() routine.

------------------------------------------------------------------------
r1911 | rmanfredi | 2002-10-24 15:53:57 -0400 (Thu, 24 Oct 2002) | 2 lines

Don't show "503 rebuilding library" when in fact we don't share anything.

------------------------------------------------------------------------
r1910 | rmanfredi | 2002-10-24 15:53:07 -0400 (Thu, 24 Oct 2002) | 2 lines

Show download's disk filename when all we have from server is an URN.

------------------------------------------------------------------------
r1909 | rmanfredi | 2002-10-24 15:51:40 -0400 (Thu, 24 Oct 2002) | 2 lines

Fixed typo "interaface" -> "interface" in some includes.

------------------------------------------------------------------------
r1908 | rmanfredi | 2002-10-24 15:50:04 -0400 (Thu, 24 Oct 2002) | 2 lines

Stricter banning policy: ban after 5 reqs/minute instead of 10.

------------------------------------------------------------------------
r1907 | rmanfredi | 2002-10-19 08:10:23 -0400 (Sat, 19 Oct 2002) | 2 lines

Added the RELEASE guide.

------------------------------------------------------------------------
r1904 | rmanfredi | 2002-10-19 06:12:56 -0400 (Sat, 19 Oct 2002) | 2 lines

Release 0.91 stable.

------------------------------------------------------------------------
r1903 | rmanfredi | 2002-10-19 06:05:09 -0400 (Sat, 19 Oct 2002) | 2 lines

Release 0.91 stable.

------------------------------------------------------------------------
r1902 | rmanfredi | 2002-10-19 05:38:16 -0400 (Sat, 19 Oct 2002) | 2 lines

Expanded tooltip description for the local netmask string.

------------------------------------------------------------------------
r1901 | rmanfredi | 2002-10-19 04:35:03 -0400 (Sat, 19 Oct 2002) | 2 lines

Cleaned up GUI properties.

------------------------------------------------------------------------
r1900 | rmanfredi | 2002-10-19 04:29:38 -0400 (Sat, 19 Oct 2002) | 3 lines

Removed obsolete information about config options: everything should
now be configurable via the GUI and has a tooltip attached to it.

------------------------------------------------------------------------
r1899 | rmanfredi | 2002-10-18 19:02:15 -0400 (Fri, 18 Oct 2002) | 2 lines

Changed error code for non-compressed connections from 401 to 403.

------------------------------------------------------------------------
r1898 | rmanfredi | 2002-10-18 18:37:29 -0400 (Fri, 18 Oct 2002) | 2 lines

Version of 18/10/2002.

------------------------------------------------------------------------
r1897 | rmanfredi | 2002-10-18 18:32:15 -0400 (Fri, 18 Oct 2002) | 2 lines

Only trim TTL larger than our max_ttl for broadcasted packets.

------------------------------------------------------------------------
r1896 | rmanfredi | 2002-10-18 18:31:06 -0400 (Fri, 18 Oct 2002) | 2 lines

Make sure we do not fill a query hit with more than 255 results.

------------------------------------------------------------------------
r1895 | rmanfredi | 2002-10-18 18:30:05 -0400 (Fri, 18 Oct 2002) | 3 lines

Revised the descriptions of gnutella properties, and changed a few
limit values that were wrong (TTL, max TTL, etc...).

------------------------------------------------------------------------
r1894 | rmanfredi | 2002-10-18 17:20:49 -0400 (Fri, 18 Oct 2002) | 2 lines

Added pre-condition in download_request().

------------------------------------------------------------------------
r1893 | rmanfredi | 2002-10-18 17:15:56 -0400 (Fri, 18 Oct 2002) | 3 lines

Switched from 409 to 503 when "already downloading that file" so that
user can retry later on: this is not a fatal error.

------------------------------------------------------------------------
r1892 | rmanfredi | 2002-10-18 15:27:56 -0400 (Fri, 18 Oct 2002) | 2 lines

Small cleaning of whitelist/local (patch #623100).

------------------------------------------------------------------------
r1891 | rmanfredi | 2002-10-17 18:11:36 -0400 (Thu, 17 Oct 2002) | 2 lines

Version of 17/10/2002.

------------------------------------------------------------------------
r1890 | rmanfredi | 2002-10-17 18:03:44 -0400 (Thu, 17 Oct 2002) | 3 lines

Also send out X-Try when rejecting connections based on lack of compression.
Fixed Gnet compression rejection messages.

------------------------------------------------------------------------
r1889 | wyldfire | 2002-10-17 18:03:00 -0400 (Thu, 17 Oct 2002) | 3 lines


 * Adjusted some default values to more be more sensible.

------------------------------------------------------------------------
r1888 | wyldfire | 2002-10-17 17:30:19 -0400 (Thu, 17 Oct 2002) | 2 lines

 * rather send out '503 busy' then '401 no compression'

------------------------------------------------------------------------
r1887 | wyldfire | 2002-10-17 17:12:23 -0400 (Thu, 17 Oct 2002) | 2 lines

 * spelling fix

------------------------------------------------------------------------
r1886 | wyldfire | 2002-10-17 16:54:13 -0400 (Thu, 17 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1885 | wyldfire | 2002-10-17 16:53:46 -0400 (Thu, 17 Oct 2002) | 2 lines

 * init download counter in gui4

------------------------------------------------------------------------
r1884 | wyldfire | 2002-10-17 16:46:40 -0400 (Thu, 17 Oct 2002) | 4 lines


 * Replaced GtkSpinButtons with GtkEntry in the size-rule part of the
   filter dialog. Should give the full range of sized up to 2GB.

------------------------------------------------------------------------
r1883 | wyldfire | 2002-10-17 16:44:18 -0400 (Thu, 17 Oct 2002) | 4 lines


 * Added "prefer compressed connections" option to gnet config pane.
   (expert mode)

------------------------------------------------------------------------
r1882 | rmanfredi | 2002-10-17 15:52:41 -0400 (Thu, 17 Oct 2002) | 3 lines

Disabled failing assert in file_info_find_hole(), replaced by a warning
for now, pending further investigation after the release.

------------------------------------------------------------------------
r1881 | wyldfire | 2002-10-17 15:15:28 -0400 (Thu, 17 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1880 | wyldfire | 2002-10-17 09:55:49 -0400 (Thu, 17 Oct 2002) | 3 lines


 * Increase default size of active downloads.

------------------------------------------------------------------------
r1879 | wyldfire | 2002-10-17 09:33:30 -0400 (Thu, 17 Oct 2002) | 4 lines


 * Fixed bug: hostcatcher does not update properly in gui if no hosts
   file was found.

------------------------------------------------------------------------
r1878 | wyldfire | 2002-10-17 09:22:58 -0400 (Thu, 17 Oct 2002) | 3 lines


 * Fixed several bugs when copying/pasteing a rule.

------------------------------------------------------------------------
r1877 | rmanfredi | 2002-10-16 16:38:15 -0400 (Wed, 16 Oct 2002) | 2 lines

Reset "Clear Completed" correctly in upload pane when auto-clear is on.

------------------------------------------------------------------------
r1876 | rmanfredi | 2002-10-15 17:58:04 -0400 (Tue, 15 Oct 2002) | 2 lines

Version of 15/10/2002.

------------------------------------------------------------------------
r1875 | rmanfredi | 2002-10-15 17:56:58 -0400 (Tue, 15 Oct 2002) | 2 lines

Now knows how to generate GGEP "H" extensions in query hits, code disabled.

------------------------------------------------------------------------
r1874 | rmanfredi | 2002-10-15 17:55:25 -0400 (Tue, 15 Oct 2002) | 2 lines

Protected some GUI warnings with "if (gui_debug)" tests.

------------------------------------------------------------------------
r1873 | rmanfredi | 2002-10-15 17:54:23 -0400 (Tue, 15 Oct 2002) | 2 lines

Will now recognize GGEP "H" extensions in query hits.

------------------------------------------------------------------------
r1872 | rmanfredi | 2002-10-15 17:53:36 -0400 (Tue, 15 Oct 2002) | 2 lines

dump_hex() can now handle zero-sized dumps.

------------------------------------------------------------------------
r1871 | rmanfredi | 2002-10-15 17:52:49 -0400 (Tue, 15 Oct 2002) | 2 lines

Forgot to cancel the "urlfile" retry event during shutdown.

------------------------------------------------------------------------
r1870 | rmanfredi | 2002-10-15 17:52:06 -0400 (Tue, 15 Oct 2002) | 2 lines

Added assertions in gmsg_dump() and gmsg_split_dump().

------------------------------------------------------------------------
r1869 | rmanfredi | 2002-10-15 17:50:58 -0400 (Tue, 15 Oct 2002) | 2 lines

GGEP_MAGIC is now defined in the ggep.h file.

------------------------------------------------------------------------
r1868 | rmanfredi | 2002-10-15 17:50:11 -0400 (Tue, 15 Oct 2002) | 3 lines

Fixed improper lifecount in downloads, when resuming leads to a Duplicate.
Fixed "abort from host" routine.

------------------------------------------------------------------------
r1867 | rmanfredi | 2002-10-15 17:47:56 -0400 (Tue, 15 Oct 2002) | 3 lines

Added GGEP parsing and generation code.
Added support for COBS (required by GGEP).

------------------------------------------------------------------------
r1866 | rmanfredi | 2002-10-14 18:17:45 -0400 (Mon, 14 Oct 2002) | 2 lines

Version of 14/10/2002.

------------------------------------------------------------------------
r1865 | wyldfire | 2002-10-14 11:07:53 -0400 (Mon, 14 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1864 | wyldfire | 2002-10-14 11:03:51 -0400 (Mon, 14 Oct 2002) | 4 lines


 * Added icons to display state of background processes (building lib/sha1)
   to statusbar.

------------------------------------------------------------------------
r1863 | wyldfire | 2002-10-14 10:59:48 -0400 (Mon, 14 Oct 2002) | 2 lines

 * A few new icons

------------------------------------------------------------------------
r1862 | rmanfredi | 2002-10-14 09:52:01 -0400 (Mon, 14 Oct 2002) | 4 lines

Be nice to pushed uploads and don't impose them to follow a 301 if they
don't request the proper file and give a SHA1 in the HTTP header.
Converted to new gnet_prop_get/set_type_val() macros.

------------------------------------------------------------------------
r1861 | rmanfredi | 2002-10-14 09:50:50 -0400 (Mon, 14 Oct 2002) | 2 lines

Converted to new gnet_prop_get/set_type_val() macros.

------------------------------------------------------------------------
r1860 | rmanfredi | 2002-10-14 09:50:10 -0400 (Mon, 14 Oct 2002) | 2 lines

Forgot to reclaim current web cache URL atom during final cleanup.

------------------------------------------------------------------------
r1859 | rmanfredi | 2002-10-14 09:49:29 -0400 (Mon, 14 Oct 2002) | 2 lines

Added new properties: "library_rebuilding" and "sha1_rebuilding".

------------------------------------------------------------------------
r1858 | rmanfredi | 2002-10-14 09:46:32 -0400 (Mon, 14 Oct 2002) | 3 lines

Added new REMAP_ZALLOC compile flag to remap zalloc() and walloc() to
malloc(), indepently of the USE_DMALLOC flag.

------------------------------------------------------------------------
r1857 | rmanfredi | 2002-10-14 09:45:26 -0400 (Mon, 14 Oct 2002) | 3 lines

Converted to new gnet_prop_get/set_type_val() macros.
Generated property routines now have the opening "(" after the name.

------------------------------------------------------------------------
r1856 | rmanfredi | 2002-10-14 09:42:35 -0400 (Mon, 14 Oct 2002) | 2 lines

Added the GGEP_L_VSHIFT constant.

------------------------------------------------------------------------
r1855 | rmanfredi | 2002-10-14 09:42:13 -0400 (Mon, 14 Oct 2002) | 2 lines

Merge adjacent "unknown" extensions in vector.

------------------------------------------------------------------------
r1854 | rmanfredi | 2002-10-14 09:40:53 -0400 (Mon, 14 Oct 2002) | 2 lines

Added the DLS_A_MINIMAL_HTTP attribute.

------------------------------------------------------------------------
r1853 | rmanfredi | 2002-10-14 09:40:17 -0400 (Mon, 14 Oct 2002) | 6 lines

Fixed bug when following HTTP redirection during downloads.
Lowercase the Content-Range header value before parsing.
Don't send them the download mesh entries if they abort on "Stopped (EOF)",
as they might choke on the HTTP continuation.
Converted to new gnet_prop_get/set_type_val() macros.

------------------------------------------------------------------------
r1852 | rmanfredi | 2002-10-13 16:23:19 -0400 (Sun, 13 Oct 2002) | 2 lines

When tracing upload error, the u->socket field may be NULL.

------------------------------------------------------------------------
r1851 | rmanfredi | 2002-10-13 13:20:34 -0400 (Sun, 13 Oct 2002) | 2 lines

Version of 13/10/2002.

------------------------------------------------------------------------
r1850 | rmanfredi | 2002-10-13 13:20:03 -0400 (Sun, 13 Oct 2002) | 2 lines

Turn fuzzy name matching off by default, since it is potentially unsafe.

------------------------------------------------------------------------
r1849 | rmanfredi | 2002-10-13 09:11:09 -0400 (Sun, 13 Oct 2002) | 3 lines

When creating a new search, immediately send message to the search queue
as soon as the search is unfrozen (fixes bug #617206).

------------------------------------------------------------------------
r1848 | rmanfredi | 2002-10-13 09:07:52 -0400 (Sun, 13 Oct 2002) | 2 lines

Fixed function formatting, according to point 4.5 of the STYLE guide.

------------------------------------------------------------------------
r1847 | rmanfredi | 2002-10-13 08:27:38 -0400 (Sun, 13 Oct 2002) | 2 lines

Always parse query hits bearing 4 bytes of open data, whatever the vendor.

------------------------------------------------------------------------
r1846 | rmanfredi | 2002-10-13 08:26:12 -0400 (Sun, 13 Oct 2002) | 2 lines

Applied Solaris portability patch [From Uros Bizjak] (patch #579522).

------------------------------------------------------------------------
r1845 | rmanfredi | 2002-10-13 06:49:55 -0400 (Sun, 13 Oct 2002) | 2 lines

Added point 4.5 for tags.

------------------------------------------------------------------------
r1844 | rmanfredi | 2002-10-13 06:48:55 -0400 (Sun, 13 Oct 2002) | 2 lines

Fixed HTTP redirection bug: had put a wrong assertion.

------------------------------------------------------------------------
r1843 | rmanfredi | 2002-10-13 06:19:39 -0400 (Sun, 13 Oct 2002) | 2 lines

Forgot to initialize flags in HTTP async requests.

------------------------------------------------------------------------
r1842 | rmanfredi | 2002-10-13 06:19:08 -0400 (Sun, 13 Oct 2002) | 2 lines

Cosmetic fixes, plus fix for proper 'tags' matching.

------------------------------------------------------------------------
r1841 | rmanfredi | 2002-10-13 06:18:08 -0400 (Sun, 13 Oct 2002) | 2 lines

Give more precise feedback for failed pushed uploads.

------------------------------------------------------------------------
r1840 | rmanfredi | 2002-10-13 06:16:31 -0400 (Sun, 13 Oct 2002) | 2 lines

Fixed stupid error in vendors.c: was comparing aginst '0', instead of '\0'.

------------------------------------------------------------------------
r1839 | rmanfredi | 2002-10-13 06:15:33 -0400 (Sun, 13 Oct 2002) | 4 lines

Made socket_destroy() a private routine of sockets.c, which now takes
a reason string that can be propagated back to the socket's resource
for better error logging.

------------------------------------------------------------------------
r1838 | rmanfredi | 2002-10-12 16:11:13 -0400 (Sat, 12 Oct 2002) | 2 lines

Minor cosmetic fix.

------------------------------------------------------------------------
r1837 | rmanfredi | 2002-10-12 16:07:33 -0400 (Sat, 12 Oct 2002) | 2 lines

Version of 12/10/2002.

------------------------------------------------------------------------
r1836 | rmanfredi | 2002-10-12 15:30:28 -0400 (Sat, 12 Oct 2002) | 2 lines

When making a subrequest, disable timeouting of the now idle parent request.

------------------------------------------------------------------------
r1835 | rmanfredi | 2002-10-12 15:29:34 -0400 (Sat, 12 Oct 2002) | 4 lines

When stopping because we get 50+ lines, use http_async_close() and not
http_async_cancel() as it is not an error, so we don't want the error
callback to be called.

------------------------------------------------------------------------
r1834 | wyldfire | 2002-10-12 15:20:38 -0400 (Sat, 12 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1833 | wyldfire | 2002-10-12 15:17:37 -0400 (Sat, 12 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1832 | wyldfire | 2002-10-12 15:15:14 -0400 (Sat, 12 Oct 2002) | 3 lines


 * Option to visually mark ignored files in the search results.

------------------------------------------------------------------------
r1831 | wyldfire | 2002-10-12 15:07:18 -0400 (Sat, 12 Oct 2002) | 9 lines


 * Option to visually mark ignored files in the search results.
 * Optionally accept the first chunk of a file from a source that does not
   supply a urn to match against. This dramatically reduces the number of
   "No URN on server". This only helps in cases where you never get a file
   because the only source you have does not provide a urn.
 * Add a viewport to all config panes so they can be scrolled if the window
   too small to show them completely.

------------------------------------------------------------------------
r1830 | rmanfredi | 2002-10-12 12:53:36 -0400 (Sat, 12 Oct 2002) | 2 lines

Delay next urlfile webcache request when the previous failed.

------------------------------------------------------------------------
r1829 | rmanfredi | 2002-10-12 12:34:55 -0400 (Sat, 12 Oct 2002) | 3 lines

Now that shared_file_by_sha1() can be called early, before share_scan() has
begun, we need to guard against a null `sha1_to_share' variable.

------------------------------------------------------------------------
r1828 | rmanfredi | 2002-10-12 12:20:05 -0400 (Sat, 12 Oct 2002) | 3 lines

Made `current_url' an atom in gwcache.c to avoid race conditions with
the entry being superseded.

------------------------------------------------------------------------
r1827 | rmanfredi | 2002-10-12 10:40:16 -0400 (Sat, 12 Oct 2002) | 3 lines

When downloading, ignore SHA1 of files we already share in our library
(fixes bug #618722).

------------------------------------------------------------------------
r1826 | wyldfire | 2002-10-12 09:53:27 -0400 (Sat, 12 Oct 2002) | 3 lines


 * Update local address displays when listen port is changes (closes 622020).

------------------------------------------------------------------------
r1825 | rmanfredi | 2002-10-12 09:52:30 -0400 (Sat, 12 Oct 2002) | 3 lines

Forgot to update all callers of shared_file_by_sha1() so that they can
handle SHARE_REBUILDING correctly.

------------------------------------------------------------------------
r1824 | rmanfredi | 2002-10-12 09:30:45 -0400 (Sat, 12 Oct 2002) | 5 lines

Was not properly reporting errors when given bad URN in /uri-res.
Also report 503 if given a /uri-res and we are still rebuilding, in case
we do not find the file for the URN: we might not have parsed it in the
library if it is large.

------------------------------------------------------------------------
r1823 | rmanfredi | 2002-10-12 09:28:38 -0400 (Sat, 12 Oct 2002) | 3 lines

Display pushed uploads in light gray ("insensitive"), just as we do for
pushed downloads.

------------------------------------------------------------------------
r1822 | rmanfredi | 2002-10-12 09:27:07 -0400 (Sat, 12 Oct 2002) | 2 lines

Must free the I/O opaque only after subrequest has been launched.

------------------------------------------------------------------------
r1821 | wyldfire | 2002-10-12 07:24:14 -0400 (Sat, 12 Oct 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1820 | wyldfire | 2002-10-12 06:43:46 -0400 (Sat, 12 Oct 2002) | 6 lines


 * Optionally accept the first chunk of a file from a source that does not
   supply a urn to match against. This dramatically reduces the number of
   "No URN on server". This only helps in cases where you never get a file
   because the only source you have does not provide a urn.

------------------------------------------------------------------------
r1819 | wyldfire | 2002-10-12 06:39:27 -0400 (Sat, 12 Oct 2002) | 8 lines


 * Optionally accept the first chunk of a file from a source that does not
   supply a urn to match against. This dramatically reduces the number of
   "No URN on server". This only helps in cases where you never get a file
   because the only source you have does not provide a urn.
 * Add a viewport to all config panes so they can be scrolled if the window
   too small to show them completely.

------------------------------------------------------------------------
r1818 | wyldfire | 2002-10-12 06:37:42 -0400 (Sat, 12 Oct 2002) | 6 lines


 * Optionally accept the first chunk of a file from a source that does not
   supply a urn to match against. This dramatically reduces the number of
   "No URN on server". This only helps in cases where you never get a file
   because the only source you have does not provide a urn.

------------------------------------------------------------------------
r1817 | rmanfredi | 2002-10-12 05:19:58 -0400 (Sat, 12 Oct 2002) | 3 lines

Just because a hostname starts with a digit does not mean the host was
given as an IP address (fixes bug 617315).

------------------------------------------------------------------------
r1816 | rmanfredi | 2002-10-12 04:57:10 -0400 (Sat, 12 Oct 2002) | 3 lines

Added asynchronous disposal of HTTP async requests to avoid writing
into freed memory upon user callback returns.

------------------------------------------------------------------------
r1815 | rmanfredi | 2002-10-12 04:54:50 -0400 (Sat, 12 Oct 2002) | 2 lines

Added pre-condition in io_read_data().

------------------------------------------------------------------------
r1814 | rmanfredi | 2002-10-12 04:53:18 -0400 (Sat, 12 Oct 2002) | 2 lines

Fixed get_file_to_upload_from_index() to avoid writing to freed memory.

------------------------------------------------------------------------
r1813 | wyldfire | 2002-10-05 15:45:30 -0400 (Sat, 05 Oct 2002) | 2 lines

 * Problem with shared dirs longer then 100 chars and 'add dir' button not working

------------------------------------------------------------------------
r1812 | rmanfredi | 2002-10-05 08:03:13 -0400 (Sat, 05 Oct 2002) | 2 lines

Further changed the upload request checking order for better GUI reporting.

------------------------------------------------------------------------
r1811 | rmanfredi | 2002-10-05 08:01:57 -0400 (Sat, 05 Oct 2002) | 2 lines

Now includes "config.h" for compiles on FreeBSD.

------------------------------------------------------------------------
r1810 | rmanfredi | 2002-10-05 08:00:52 -0400 (Sat, 05 Oct 2002) | 2 lines

Moved comment.

------------------------------------------------------------------------
r1809 | rmanfredi | 2002-10-05 08:00:27 -0400 (Sat, 05 Oct 2002) | 2 lines

Never send pushes if we think we're firewalled.

------------------------------------------------------------------------
r1808 | wyldfire | 2002-09-29 10:56:12 -0400 (Sun, 29 Sep 2002) | 2 lines

 * Fixed typo

------------------------------------------------------------------------
r1807 | wyldfire | 2002-09-29 10:55:33 -0400 (Sun, 29 Sep 2002) | 2 lines

 * Replaced call to gtk_progress_set_format_string with gtk_progress_bar_set_text to be more Gtk2 compatible

------------------------------------------------------------------------
r1806 | rmanfredi | 2002-09-28 17:54:25 -0400 (Sat, 28 Sep 2002) | 2 lines

Fixed download fileinfo reparenting bug.

------------------------------------------------------------------------
r1805 | rmanfredi | 2002-09-28 17:53:07 -0400 (Sat, 28 Sep 2002) | 2 lines

Moved "TTL exceeded" reason at the top, with related reasons.

------------------------------------------------------------------------
r1804 | rmanfredi | 2002-09-28 17:50:10 -0400 (Sat, 28 Sep 2002) | 3 lines

When we're firewalled, answer pings at regular intervals, to help us
determine whether we're really firewalled.  Even if we have no slot.

------------------------------------------------------------------------
r1803 | rmanfredi | 2002-09-28 17:48:35 -0400 (Sat, 28 Sep 2002) | 2 lines

Drop "QTRAX2_CONNECTION" queries.

------------------------------------------------------------------------
r1802 | rmanfredi | 2002-09-28 17:47:55 -0400 (Sat, 28 Sep 2002) | 2 lines

Check HTTP upload request after we extracted the vendor information.

------------------------------------------------------------------------
r1801 | rmanfredi | 2002-09-28 17:46:11 -0400 (Sat, 28 Sep 2002) | 2 lines

Added ATOM vendor code.

------------------------------------------------------------------------
r1800 | rmanfredi | 2002-09-25 17:38:28 -0400 (Wed, 25 Sep 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1799 | rmanfredi | 2002-09-25 17:30:51 -0400 (Wed, 25 Sep 2002) | 2 lines

Vendor ACQX can include XML payload in query hits.

------------------------------------------------------------------------
r1798 | rmanfredi | 2002-09-25 17:30:19 -0400 (Wed, 25 Sep 2002) | 2 lines

Fixed the _shutdown() routine in property template to avoid freeing NULL.

------------------------------------------------------------------------
r1797 | rmanfredi | 2002-09-25 17:29:16 -0400 (Wed, 25 Sep 2002) | 2 lines

Split long line.

------------------------------------------------------------------------
r1796 | rmanfredi | 2002-09-25 17:28:51 -0400 (Wed, 25 Sep 2002) | 2 lines

Removed unused count_running_downloads_with_sha1().

------------------------------------------------------------------------
r1795 | rmanfredi | 2002-09-25 17:22:06 -0400 (Wed, 25 Sep 2002) | 3 lines

Now recognizes UTF-8 queries starting with Byte Order Mark tag.
Drop and count malformed UTF-8 queries we encounter.

------------------------------------------------------------------------
r1794 | rmanfredi | 2002-09-25 17:19:41 -0400 (Wed, 25 Sep 2002) | 3 lines

Shuffled code around in upload_request() to gather as much information from
the request as early as possible for GUI display purposes in case of error.

------------------------------------------------------------------------
r1793 | rmanfredi | 2002-09-25 17:18:05 -0400 (Wed, 25 Sep 2002) | 2 lines

Added ACQX and EVIL vendor codes.

------------------------------------------------------------------------
r1792 | wyldfire | 2002-09-25 16:20:48 -0400 (Wed, 25 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1791 | wyldfire | 2002-09-25 16:00:44 -0400 (Wed, 25 Sep 2002) | 2 lines

 * remove completed/failed uploads with a delay of 5sec

------------------------------------------------------------------------
r1790 | rmanfredi | 2002-09-25 15:31:39 -0400 (Wed, 25 Sep 2002) | 2 lines

Added my own cache to the bootstrap list.

------------------------------------------------------------------------
r1789 | wyldfire | 2002-09-25 06:25:12 -0400 (Wed, 25 Sep 2002) | 2 lines

 * sync with changes to Gtk1 version

------------------------------------------------------------------------
r1788 | rmanfredi | 2002-09-24 19:09:18 -0400 (Tue, 24 Sep 2002) | 2 lines

Forgot to remove copy of trailing "urn:\0", thereby overwriting memory.

------------------------------------------------------------------------
r1787 | rmanfredi | 2002-09-24 18:13:33 -0400 (Tue, 24 Sep 2002) | 2 lines

Version of 24/09/2002.

------------------------------------------------------------------------
r1786 | rmanfredi | 2002-09-24 18:12:53 -0400 (Tue, 24 Sep 2002) | 2 lines

Fixed missing counter decrements on completed uploads.

------------------------------------------------------------------------
r1785 | rmanfredi | 2002-09-24 18:12:11 -0400 (Tue, 24 Sep 2002) | 4 lines

Will now drop queries with too many (unneeded) separators in extension.
Now supports queries with multiple SHA1.
Split our query hit packets in chunks of ~2KB for better flow control.

------------------------------------------------------------------------
r1784 | rmanfredi | 2002-09-24 18:10:32 -0400 (Tue, 24 Sep 2002) | 3 lines

No longer send the trailing "urn:\0" in queries.
When issuing SHA1 queries, was not copying the trailing NUL.

------------------------------------------------------------------------
r1783 | rmanfredi | 2002-09-24 18:09:16 -0400 (Tue, 24 Sep 2002) | 2 lines

Fixed memory leak in nodes.c.

------------------------------------------------------------------------
r1782 | rmanfredi | 2002-09-24 18:08:41 -0400 (Tue, 24 Sep 2002) | 2 lines

Forgot to export http_async_strerror().

------------------------------------------------------------------------
r1781 | rmanfredi | 2002-09-24 18:08:15 -0400 (Tue, 24 Sep 2002) | 3 lines

Documented web cache usage policy.
Added cache seeding when the caches we inspect have few entries.

------------------------------------------------------------------------
r1780 | rmanfredi | 2002-09-24 18:05:12 -0400 (Tue, 24 Sep 2002) | 3 lines

Suppressed MSG_DROP_MULTIPLE_SHA1, added MSG_DROP_QUERY_OVERHEAD.
Renamed MSG_DROP_MISFORMED_SHA1_QUERY as MSG_DROP_MALFORMED_SHA1_QUERY.

------------------------------------------------------------------------
r1779 | rmanfredi | 2002-09-24 18:03:51 -0400 (Tue, 24 Sep 2002) | 3 lines

At debug level 5+, can now log the packets we emit, and the non-broadcasted
messages we relay.

------------------------------------------------------------------------
r1778 | rmanfredi | 2002-09-24 17:58:45 -0400 (Tue, 24 Sep 2002) | 2 lines

Don't warn at exit time on fileinfo entries with refcount=0.

------------------------------------------------------------------------
r1777 | rmanfredi | 2002-09-24 17:58:03 -0400 (Tue, 24 Sep 2002) | 2 lines

Added the EXT_NONE extension to hold separator overhead.

------------------------------------------------------------------------
r1776 | wyldfire | 2002-09-24 06:53:16 -0400 (Tue, 24 Sep 2002) | 6 lines


 * Partially fixed: Uploads and downloads won't abort (#612374)
   Should work for uploads, "abort by SHA1" and "abort by name". The
   "abort by host" was optimized by Raphael and I dont see the bug right
   now.

------------------------------------------------------------------------
r1775 | wyldfire | 2002-09-24 06:52:49 -0400 (Tue, 24 Sep 2002) | 4 lines


 * Cleant up search_xml.c a little
 * Fixed another memory leak in search_xml.c

------------------------------------------------------------------------
r1774 | wyldfire | 2002-09-23 19:43:29 -0400 (Mon, 23 Sep 2002) | 2 lines

 * fixed: can not disable 'searches by router'-type entries

------------------------------------------------------------------------
r1773 | wyldfire | 2002-09-23 19:23:23 -0400 (Mon, 23 Sep 2002) | 2 lines

 * fixed typo

------------------------------------------------------------------------
r1772 | wyldfire | 2002-09-23 18:26:48 -0400 (Mon, 23 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1771 | wyldfire | 2002-09-23 18:25:54 -0400 (Mon, 23 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1770 | wyldfire | 2002-09-23 18:21:56 -0400 (Mon, 23 Sep 2002) | 3 lines


 * fixed memory leaks in save_file_path_changed and move_file_path_changed

------------------------------------------------------------------------
r1769 | wyldfire | 2002-09-23 18:15:43 -0400 (Mon, 23 Sep 2002) | 2 lines

 * fixed memory leak in hosts.c (parse_netmasks)

------------------------------------------------------------------------
r1768 | wyldfire | 2002-09-23 17:59:48 -0400 (Mon, 23 Sep 2002) | 2 lines

 * fixed memory leak in config_comment

------------------------------------------------------------------------
r1767 | wyldfire | 2002-09-23 17:46:09 -0400 (Mon, 23 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1766 | wyldfire | 2002-09-23 17:34:21 -0400 (Mon, 23 Sep 2002) | 5 lines


 * Revisited gui/core separation code for gNet connections. Don't transfer
   the whole node information on each update. Don't alloc/free memory on
   each status update.

------------------------------------------------------------------------
r1765 | wyldfire | 2002-09-23 17:13:53 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Added "searches by router" to search stats.

------------------------------------------------------------------------
r1764 | wyldfire | 2002-09-23 17:12:51 -0400 (Mon, 23 Sep 2002) | 4 lines


 * Use GtkTreeView instead of a GtkCList to list the gNet connections.
   Breaks popup menu and removal of nodes in the experimental Gtk2 version.

------------------------------------------------------------------------
r1763 | wyldfire | 2002-09-23 17:08:12 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Remove sidebar viewport again (Gtk1)

------------------------------------------------------------------------
r1762 | wyldfire | 2002-09-23 17:04:58 -0400 (Mon, 23 Sep 2002) | 4 lines


 * Use GtkTreeView instead of a GtkCList to list the gNet connections.
   Breaks popup menu and removal of nodes in the experimental Gtk2 version.

------------------------------------------------------------------------
r1761 | wyldfire | 2002-09-23 17:02:30 -0400 (Mon, 23 Sep 2002) | 7 lines


 * Gui/core separation for uploads
 * Better monitoring of the gtk-gnutella internal server activity including
   monitoring of failed upload attempts and connections that are being kept
   open.
 * Fixed: upload status bar fails to decrement (closes #609479)

------------------------------------------------------------------------
r1760 | wyldfire | 2002-09-23 17:01:57 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Gui/core separation for uploads

------------------------------------------------------------------------
r1759 | wyldfire | 2002-09-23 16:50:07 -0400 (Mon, 23 Sep 2002) | 10 lines


 * Started to move gui initialization code from main_gui.c to the respective
   initialization functions of the different gui modules. That gives less
   problems with migrating to Gtk2 specific frontend modules.
 * Gui/core separation for uploads
 * Better monitoring of the gtk-gnutella internal server activity including
   monitoring of failed upload attempts and connections that are being kept
   open.
 * Fixed: upload status bar fails to decrement (closes #609479)

------------------------------------------------------------------------
r1758 | wyldfire | 2002-09-23 16:39:16 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Added "searches by router" to search stats.

------------------------------------------------------------------------
r1757 | wyldfire | 2002-09-23 16:37:11 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Give more warnings if a widget is not found in settings_gui.c

------------------------------------------------------------------------
r1756 | wyldfire | 2002-09-23 16:35:54 -0400 (Mon, 23 Sep 2002) | 4 lines


 * Destroy sorting arrow in search results panel when a search is closed.
   (thanks to Bjorge Dijkstra for spotting and providing a fix).

------------------------------------------------------------------------
r1755 | wyldfire | 2002-09-23 16:35:19 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Moved PROP_AUTOCLEAR_UPLOADS from gnet_props.ag to gui_props.ag

------------------------------------------------------------------------
r1754 | wyldfire | 2002-09-23 16:34:44 -0400 (Mon, 23 Sep 2002) | 5 lines


 * Started to move gui initialization code from main_gui.c to the respective
   initialization functions of the different gui modules. That gives less
   problems with migrating to Gtk2 specific frontend module

------------------------------------------------------------------------
r1753 | wyldfire | 2002-09-23 16:29:10 -0400 (Mon, 23 Sep 2002) | 5 lines


 * Started to move gui initialization code from main_gui.c to the respective
   initialization functions of the different gui modules. That gives less
   problems with migrating to Gtk2 specific frontend modules.

------------------------------------------------------------------------
r1752 | wyldfire | 2002-09-23 16:28:28 -0400 (Mon, 23 Sep 2002) | 5 lines


 * Should no longer give floating point exception on Alpha (closes #609253)
   Always use gtk_progress_bar_set_fraction and check that we don't do a
   div-by-zero when calculating the fraction.

------------------------------------------------------------------------
r1751 | wyldfire | 2002-09-23 16:18:51 -0400 (Mon, 23 Sep 2002) | 3 lines


 * Moved PROP_AUTOCLEAR_UPLOADS from gnet_props.ag to gui_props.ag

------------------------------------------------------------------------
r1750 | wyldfire | 2002-09-23 16:12:41 -0400 (Mon, 23 Sep 2002) | 6 lines


 * Revisited gui/core separation code for gNet connections. Don't transfer
   the whole node information on each update. Don't alloc/free memory on
   each status update.
* Gui/core separation for uploads

------------------------------------------------------------------------
r1749 | wyldfire | 2002-09-23 16:04:44 -0400 (Mon, 23 Sep 2002) | 7 lines


 * Revisited gui/core separation code for gNet connections. Don't transfer
   the whole node information on each update. Don't alloc/free memory on
   each status update.
 * Use GtkTreeView instead of a GtkCList to list the gNet connections.
   Breaks popup menu and removal of nodes in the experimental Gtk2 version.

------------------------------------------------------------------------
r1748 | rmanfredi | 2002-09-23 08:12:13 -0400 (Mon, 23 Sep 2002) | 2 lines

Removed spurious block that crept in inside gwc_store().

------------------------------------------------------------------------
r1747 | rmanfredi | 2002-09-23 03:05:42 -0400 (Mon, 23 Sep 2002) | 4 lines

When replacing URLs in the web cache, delete from the known URL table
before re-inserting, for the rare cases where we're inserting the same
URL at the same slot.

------------------------------------------------------------------------
r1746 | rmanfredi | 2002-09-22 18:55:57 -0400 (Sun, 22 Sep 2002) | 2 lines

Version of 22/09/2002.

------------------------------------------------------------------------
r1745 | rmanfredi | 2002-09-22 18:54:56 -0400 (Sun, 22 Sep 2002) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r1744 | rmanfredi | 2002-09-22 18:51:10 -0400 (Sun, 22 Sep 2002) | 2 lines

When running under dmalloc, don't define zn_extend().

------------------------------------------------------------------------
r1743 | rmanfredi | 2002-09-22 18:50:42 -0400 (Sun, 22 Sep 2002) | 3 lines

Fixed embarrassing bug: we were bluntly changing the query text on the
fly by calling st_search() on the original query text!

------------------------------------------------------------------------
r1742 | rmanfredi | 2002-09-22 18:49:27 -0400 (Sun, 22 Sep 2002) | 3 lines

Downloads were still using obsolete index==0 convention to indicate the
/uri-res URLs.  It is now index==URN_INDEX that must be used.

------------------------------------------------------------------------
r1741 | rmanfredi | 2002-09-22 18:45:29 -0400 (Sun, 22 Sep 2002) | 2 lines

Rolled-back previous version: some code depends on atoms being shared.

------------------------------------------------------------------------
r1740 | rmanfredi | 2002-09-22 17:48:53 -0400 (Sun, 22 Sep 2002) | 3 lines

Save URLs in gwcache starting with the oldest ones.
Rotate the web cache used after a few updates.

------------------------------------------------------------------------
r1739 | rmanfredi | 2002-09-22 17:46:03 -0400 (Sun, 22 Sep 2002) | 2 lines

Updated after GDF comments.  Will advertise as "X-Queue: 1.0" now.

------------------------------------------------------------------------
r1738 | rmanfredi | 2002-09-22 17:42:23 -0400 (Sun, 22 Sep 2002) | 2 lines

Fixed a few "free(NULL)" calls spotted by dmalloc.

------------------------------------------------------------------------
r1737 | rmanfredi | 2002-09-22 17:40:22 -0400 (Sun, 22 Sep 2002) | 2 lines

Unplugged all support for the now-dead public hostcaches.

------------------------------------------------------------------------
r1736 | rmanfredi | 2002-09-22 17:37:50 -0400 (Sun, 22 Sep 2002) | 2 lines

Added support for transparent redirection in async HTTP requests.

------------------------------------------------------------------------
r1735 | rmanfredi | 2002-09-22 17:36:52 -0400 (Sun, 22 Sep 2002) | 2 lines

Adapted atoms and zalloc/walloc code to be usable under dmalloc.

------------------------------------------------------------------------
r1734 | rmanfredi | 2002-09-22 17:33:44 -0400 (Sun, 22 Sep 2002) | 2 lines

Gnutella Web Cache specifications, as implemented in 0.91u.

------------------------------------------------------------------------
r1733 | rmanfredi | 2002-09-22 03:51:37 -0400 (Sun, 22 Sep 2002) | 2 lines

QRP hash code no longer uses tolower() and only translates [A-Z] to [a-z].

------------------------------------------------------------------------
r1732 | rmanfredi | 2002-09-22 03:49:40 -0400 (Sun, 22 Sep 2002) | 2 lines

Forgot to initialize the "header_ind_ field.

------------------------------------------------------------------------
r1731 | rmanfredi | 2002-09-21 18:23:07 -0400 (Sat, 21 Sep 2002) | 2 lines

Version of 21/09/2002.

------------------------------------------------------------------------
r1730 | rmanfredi | 2002-09-21 18:21:19 -0400 (Sat, 21 Sep 2002) | 2 lines

Finalized web cache support to publish our IP and propagate ring.

------------------------------------------------------------------------
r1729 | rmanfredi | 2002-09-21 18:20:17 -0400 (Sat, 21 Sep 2002) | 2 lines

Periodically save Gnutella web cache ring if dirty.

------------------------------------------------------------------------
r1728 | rmanfredi | 2002-09-21 18:19:29 -0400 (Sat, 21 Sep 2002) | 2 lines

Added url_escape_query() to escape query string parameters in URLs.

------------------------------------------------------------------------
r1727 | rmanfredi | 2002-09-21 18:17:40 -0400 (Sat, 21 Sep 2002) | 2 lines

Added http_async_close() to cleanly request connection close.

------------------------------------------------------------------------
r1726 | rmanfredi | 2002-09-21 18:16:52 -0400 (Sat, 21 Sep 2002) | 2 lines

Removed hostcache "gnutella-again.hostscache.com": no longer resolves.

------------------------------------------------------------------------
r1725 | rmanfredi | 2002-09-21 04:30:12 -0400 (Sat, 21 Sep 2002) | 2 lines

Version of 20/09/2002.

------------------------------------------------------------------------
r1724 | rmanfredi | 2002-09-21 04:28:24 -0400 (Sat, 21 Sep 2002) | 2 lines

Interface of http_url_parse() changed.

------------------------------------------------------------------------
r1723 | rmanfredi | 2002-09-21 04:27:14 -0400 (Sat, 21 Sep 2002) | 2 lines

Improved str_chomp() to also strip trailing "\r\n" or plain "\r".

------------------------------------------------------------------------
r1722 | rmanfredi | 2002-09-21 04:26:23 -0400 (Sat, 21 Sep 2002) | 2 lines

Finalized asynchronous HTTP request support.

------------------------------------------------------------------------
r1721 | rmanfredi | 2002-09-21 04:25:28 -0400 (Sat, 21 Sep 2002) | 2 lines

Added new core property "incoming_connecting_timeout".

------------------------------------------------------------------------
r1720 | rmanfredi | 2002-09-21 04:20:53 -0400 (Sat, 21 Sep 2002) | 2 lines

First implementation of Gnutella web cache support.  No update yet.

------------------------------------------------------------------------
r1719 | rmanfredi | 2002-09-20 14:13:19 -0400 (Fri, 20 Sep 2002) | 2 lines

Don't lseek to the trailer if we're not going to write it anyway.

------------------------------------------------------------------------
r1718 | rmanfredi | 2002-09-20 14:12:19 -0400 (Fri, 20 Sep 2002) | 5 lines

Forgot to update the name hash-table when changing fileinfo.
Must always seek before writing to a downloaded file, even when swarming
is OFF, since we always update the trailer, hence changing the write
pointer.

------------------------------------------------------------------------
r1717 | rmanfredi | 2002-09-19 14:45:33 -0400 (Thu, 19 Sep 2002) | 2 lines

Version of 19/09/2002.

------------------------------------------------------------------------
r1716 | rmanfredi | 2002-09-19 14:44:10 -0400 (Thu, 19 Sep 2002) | 2 lines

More untested code on asynchronous HTTP requests.

------------------------------------------------------------------------
r1715 | rmanfredi | 2002-09-19 14:43:17 -0400 (Thu, 19 Sep 2002) | 2 lines

Fixed wrong drop message.

------------------------------------------------------------------------
r1714 | rmanfredi | 2002-09-19 14:41:10 -0400 (Thu, 19 Sep 2002) | 2 lines

Vendor tags are now defined in "vendors.h".

------------------------------------------------------------------------
r1713 | rmanfredi | 2002-09-19 14:40:20 -0400 (Thu, 19 Sep 2002) | 6 lines

Check for sendfile() or write() returning 0 in case the underlying file
disappears on a non-Unix filesystem such as FAT32.  This avoid endless
loops (fixes bug 611537).
Check for the HTTP protocol tag before URL-unescaping the request,
which could shift the string backward in the buffer

------------------------------------------------------------------------
r1712 | rmanfredi | 2002-09-19 14:35:10 -0400 (Thu, 19 Sep 2002) | 2 lines

Added COCO to the vendor list.

------------------------------------------------------------------------
r1711 | rmanfredi | 2002-09-18 13:48:05 -0400 (Wed, 18 Sep 2002) | 2 lines

Version of 18/09/2002.

------------------------------------------------------------------------
r1710 | rmanfredi | 2002-09-18 13:45:55 -0400 (Wed, 18 Sep 2002) | 2 lines

More embryon of code for asynchronous HTTP requests.

------------------------------------------------------------------------
r1709 | rmanfredi | 2002-09-18 13:45:24 -0400 (Wed, 18 Sep 2002) | 3 lines

Now only compacts white-spaces in query text, and only for messages
we are going to relay.

------------------------------------------------------------------------
r1708 | rmanfredi | 2002-09-18 13:44:30 -0400 (Wed, 18 Sep 2002) | 2 lines

Automatically compact query text in messages we send.

------------------------------------------------------------------------
r1707 | rmanfredi | 2002-09-18 13:38:48 -0400 (Wed, 18 Sep 2002) | 2 lines

Factorized asynchronous I/O header parsing code.

------------------------------------------------------------------------
r1706 | rmanfredi | 2002-09-16 15:46:57 -0400 (Mon, 16 Sep 2002) | 2 lines

Version of 16/09/2002.

------------------------------------------------------------------------
r1705 | rmanfredi | 2002-09-16 15:45:47 -0400 (Mon, 16 Sep 2002) | 2 lines

Count queries with no trailing NUL as such.

------------------------------------------------------------------------
r1704 | rmanfredi | 2002-09-16 15:44:05 -0400 (Mon, 16 Sep 2002) | 4 lines

No longer alter open-data of query hits inplace for LimeWire/Swapper hits!
Will now detect query hit trailer with GGEP extensions.
Parse trailer extensions for validation only (currently).

------------------------------------------------------------------------
r1703 | rmanfredi | 2002-09-16 15:41:31 -0400 (Mon, 16 Sep 2002) | 2 lines

Now counts unusable pongs that we drop.

------------------------------------------------------------------------
r1702 | rmanfredi | 2002-09-16 15:40:36 -0400 (Mon, 16 Sep 2002) | 2 lines

Plugged http_timer() in.

------------------------------------------------------------------------
r1701 | rmanfredi | 2002-09-16 15:39:58 -0400 (Mon, 16 Sep 2002) | 2 lines

Random cleanup.

------------------------------------------------------------------------
r1700 | rmanfredi | 2002-09-16 15:37:58 -0400 (Mon, 16 Sep 2002) | 2 lines

Query compaction is now enabled by default.

------------------------------------------------------------------------
r1699 | rmanfredi | 2002-09-16 15:36:34 -0400 (Mon, 16 Sep 2002) | 5 lines

Capitalized first letter of all Gnet stats.
Removed MSG_DROP_RESULT_DOUBLE_NUL, which was wrong.
Changed MSG_DROP_QUERY_TOO_LONG into MSG_DROP_QUERY_NO_NUL.
Added MSG_DROP_PONG_UNUSABLE.

------------------------------------------------------------------------
r1698 | rmanfredi | 2002-09-16 15:34:25 -0400 (Mon, 16 Sep 2002) | 2 lines

Socket type/direction constant refactoring.

------------------------------------------------------------------------
r1697 | rmanfredi | 2002-09-16 15:29:29 -0400 (Mon, 16 Sep 2002) | 3 lines

IP/port parsing of URLs is now done in http.c.
Embryon of code for asynchronous HTTP requests.

------------------------------------------------------------------------
r1696 | rmanfredi | 2002-09-16 15:28:13 -0400 (Mon, 16 Sep 2002) | 5 lines

Fixed Alternate-Location parsing to avoid mistaking an URL for a date.
Should now correctly guess whether a "," in an URL is a separator of
two URLs or is part of the current URL.
Special index to indicate URN is now 0xffffffff instead of 0.

------------------------------------------------------------------------
r1695 | rmanfredi | 2002-09-16 15:27:12 -0400 (Mon, 16 Sep 2002) | 2 lines

Special index to indicate URN is now 0xffffffff instead of 0.

------------------------------------------------------------------------
r1694 | wyldfire | 2002-09-15 10:27:33 -0400 (Sun, 15 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1693 | wyldfire | 2002-09-15 10:27:05 -0400 (Sun, 15 Sep 2002) | 3 lines


 * Fixed warnings in gtk-missing.c when compiling with Gtk2

------------------------------------------------------------------------
r1692 | wyldfire | 2002-09-15 10:23:21 -0400 (Sun, 15 Sep 2002) | 10 lines


 * (Hopefully) fixed flickering in gui by jailing label_items_found and
   label_search_stats_count into GtkViewports (Gtk1 & Gtk2)
 * Added "(Globally) drop results from host" to search popup
 * Added "New search from selected" action from search results
   pane. Creates a new search based on the filename found and
   adds a filter to it based on the sha1 hash if it has one or the
   exact filename if it hasn't.
   (patch by Andrew Meredith <andrew@anvil.org>)

------------------------------------------------------------------------
r1691 | wyldfire | 2002-09-15 10:17:52 -0400 (Sun, 15 Sep 2002) | 4 lines


 * Fixed up build files following suggestions from Andrew
 * Bumped version in configure.in

------------------------------------------------------------------------
r1690 | wyldfire | 2002-09-15 09:11:16 -0400 (Sun, 15 Sep 2002) | 4 lines


 * Removed freezing/thawing of search results list in search_gui.c
 * Removed "clear search results" and "close search" from search popup

------------------------------------------------------------------------
r1689 | wyldfire | 2002-09-15 09:08:55 -0400 (Sun, 15 Sep 2002) | 7 lines


 * Added "Create targetted Download" action from search results
   pane. Creates a new search based on the filename found and
   adds a filter to it based on the sha1 hash if it has one or the
   exact filename if it hasn't.
 * Added "Drop by host" to search popup

------------------------------------------------------------------------
r1688 | wyldfire | 2002-09-14 12:52:38 -0400 (Sat, 14 Sep 2002) | 2 lines

 * Hopefully fix gui flashing problem

------------------------------------------------------------------------
r1687 | wyldfire | 2002-09-13 13:44:18 -0400 (Fri, 13 Sep 2002) | 2 lines

 * Bringing Gtk1 and Gtk2 frontends to sync

------------------------------------------------------------------------
r1686 | wyldfire | 2002-09-13 13:42:59 -0400 (Fri, 13 Sep 2002) | 2 lines

 * Added 'Drop by host' to search popup

------------------------------------------------------------------------
r1685 | wyldfire | 2002-09-13 13:41:36 -0400 (Fri, 13 Sep 2002) | 2 lines

 * Fixed widget name

------------------------------------------------------------------------
r1684 | wyldfire | 2002-09-13 13:39:14 -0400 (Fri, 13 Sep 2002) | 2 lines

 * Syncing Gtk1 and Gtk2 frontends

------------------------------------------------------------------------
r1683 | rmanfredi | 2002-09-12 17:38:15 -0400 (Thu, 12 Sep 2002) | 2 lines

Minor fixes in compact_query().

------------------------------------------------------------------------
r1682 | rmanfredi | 2002-09-12 16:32:38 -0400 (Thu, 12 Sep 2002) | 2 lines

Version of 12/09/2002.

------------------------------------------------------------------------
r1681 | rmanfredi | 2002-09-12 16:31:36 -0400 (Thu, 12 Sep 2002) | 2 lines

utf8_to_iso8859() forgot to decrement length of original string.

------------------------------------------------------------------------
r1680 | rmanfredi | 2002-09-12 16:30:23 -0400 (Thu, 12 Sep 2002) | 4 lines

No longer transform UTF-8 queries into ISO-8859 inplace: we now let UTF-8
queries go through as-is.
Query compacting is now UTF-8 safe.

------------------------------------------------------------------------
r1679 | rmanfredi | 2002-09-12 16:26:38 -0400 (Thu, 12 Sep 2002) | 3 lines

Was mistakenly going through routing_log() formatting even if the debug
level did not justify it.

------------------------------------------------------------------------
r1678 | wyldfire | 2002-09-12 14:01:15 -0400 (Thu, 12 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1677 | wyldfire | 2002-09-12 13:57:24 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Enabled Gtk2 frontend again (experimental)

------------------------------------------------------------------------
r1676 | wyldfire | 2002-09-12 13:37:00 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Enabled Gtk2 frontend again (experimental)

------------------------------------------------------------------------
r1675 | wyldfire | 2002-09-12 13:33:32 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Renamed share_gui2.c to monitor_gui2.c

------------------------------------------------------------------------
r1674 | wyldfire | 2002-09-12 13:29:01 -0400 (Thu, 12 Sep 2002) | 9 lines


 * Optional compaction of queries (default off). This cleans up
   the search stats and saves a little bandwidth but in turn costs
   a little cpu.
 * Reordered result processing in share.c: first check wether results
   should be dropped, then notify listeners (search monitor/stats),
   then check wether to perform a local search.
 * Expanded gnet statistics

------------------------------------------------------------------------
r1673 | wyldfire | 2002-09-12 13:27:52 -0400 (Thu, 12 Sep 2002) | 8 lines


 * Added checkbutton to config-UI panel to toggle expert mode
 * Optional compaction of queries (default off). This cleans up
   the search stats and saves a little bandwidth but in turn costs
   a little cpu.
 * Added more stats to gnet stats panel.
 * Expanded search stats. Can choose between "word" and "query" stats.

------------------------------------------------------------------------
r1672 | wyldfire | 2002-09-12 13:25:40 -0400 (Thu, 12 Sep 2002) | 2 lines

 * Cleanup cruft

------------------------------------------------------------------------
r1671 | wyldfire | 2002-09-12 13:22:41 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Expanded search stats. Can choose between "word" and "query" stats

------------------------------------------------------------------------
r1670 | wyldfire | 2002-09-12 13:22:03 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Fixed typo "No item found" => "No items found"

------------------------------------------------------------------------
r1669 | wyldfire | 2002-09-12 13:21:38 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Fixed freeze-bug when adding filter rules via search popup

------------------------------------------------------------------------
r1668 | wyldfire | 2002-09-12 13:20:17 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Expanded search stats. Can choose between "word" and "query" stats.

------------------------------------------------------------------------
r1667 | wyldfire | 2002-09-12 13:19:33 -0400 (Thu, 12 Sep 2002) | 2 lines

 * Cosmetics

------------------------------------------------------------------------
r1666 | wyldfire | 2002-09-12 13:17:22 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Added more stats to gnet stats panel.

------------------------------------------------------------------------
r1665 | wyldfire | 2002-09-12 13:16:51 -0400 (Thu, 12 Sep 2002) | 4 lines


 * Added more stats to gnet stats panel.
 * Expanded search stats. Can choose between "word" and "query"

------------------------------------------------------------------------
r1664 | wyldfire | 2002-09-12 13:11:19 -0400 (Thu, 12 Sep 2002) | 5 lines


 * Optional compaction of queries (default off). This cleans up
   the search stats and saves a little bandwidth but in turn costs
   a little cpu.

------------------------------------------------------------------------
r1663 | wyldfire | 2002-09-12 13:10:21 -0400 (Thu, 12 Sep 2002) | 2 lines

  * Added more stats to gnet stats panel.

------------------------------------------------------------------------
r1662 | wyldfire | 2002-09-12 13:09:44 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Cosmetics

------------------------------------------------------------------------
r1661 | wyldfire | 2002-09-12 13:02:04 -0400 (Thu, 12 Sep 2002) | 7 lines


 * Optional compaction of queries (default off). This cleans up
   the search stats and saves a little bandwidth but in turn costs
   a little cpu.
 * Added more stats to gnet stats panel.
 * Fixed typo "No item found" => "No items found"

------------------------------------------------------------------------
r1660 | wyldfire | 2002-09-12 12:57:21 -0400 (Thu, 12 Sep 2002) | 3 lines


 * Enabled Gtk2 frontend again (partially working)

------------------------------------------------------------------------
r1659 | rmanfredi | 2002-09-11 15:24:17 -0400 (Wed, 11 Sep 2002) | 3 lines

Re-organized download_request(), with better detection and handling
of header timeouts.

------------------------------------------------------------------------
r1658 | rmanfredi | 2002-09-11 15:21:05 -0400 (Wed, 11 Sep 2002) | 2 lines

Make sure we leave enough room in the reply HTTP header for final "\r\n".

------------------------------------------------------------------------
r1657 | wyldfire | 2002-09-10 16:01:54 -0400 (Tue, 10 Sep 2002) | 3 lines


 * hash table would not exist if PROP_SEARCH_STATS_ENABLE was FALSE.

------------------------------------------------------------------------
r1656 | wyldfire | 2002-09-10 15:48:28 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Integreted search stats in gui_update_global.

------------------------------------------------------------------------
r1655 | wyldfire | 2002-09-10 15:36:25 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Fixed bug in search stats combo

------------------------------------------------------------------------
r1654 | wyldfire | 2002-09-10 15:33:34 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Renamed search_stats.[ch] to search_stats_gui.[ch]

------------------------------------------------------------------------
r1653 | wyldfire | 2002-09-10 15:32:08 -0400 (Tue, 10 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1652 | wyldfire | 2002-09-10 15:24:15 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Renamed search_stats.[ch] to search_stats_gui.[ch]

------------------------------------------------------------------------
r1651 | wyldfire | 2002-09-10 15:22:45 -0400 (Tue, 10 Sep 2002) | 2 lines

 * Added assertion

------------------------------------------------------------------------
r1650 | wyldfire | 2002-09-10 15:14:42 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Added percentage display for gnet statistics

------------------------------------------------------------------------
r1649 | wyldfire | 2002-09-10 15:12:28 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Renamed search_stats.[ch] to search_stats_gui.[ch]

------------------------------------------------------------------------
r1648 | wyldfire | 2002-09-10 15:12:04 -0400 (Tue, 10 Sep 2002) | 4 lines


 * Renamed search_stats.[ch] to search_stats_gui.[ch]
 * Expanded search stats. Can choose between "word" and "query" stats.

------------------------------------------------------------------------
r1647 | wyldfire | 2002-09-10 15:09:25 -0400 (Tue, 10 Sep 2002) | 4 lines


 * Added percentage display for gnet statistics
 * Expanded search stats. Can choose between "word" and "query" stats.

------------------------------------------------------------------------
r1646 | wyldfire | 2002-09-10 14:25:05 -0400 (Tue, 10 Sep 2002) | 4 lines


 * Fixed bug: when removing multiple nodes, only the first is
   removed

------------------------------------------------------------------------
r1645 | wyldfire | 2002-09-10 13:52:00 -0400 (Tue, 10 Sep 2002) | 2 lines

 * Remove wrong assertion. node handle can be 0

------------------------------------------------------------------------
r1644 | wyldfire | 2002-09-10 11:31:21 -0400 (Tue, 10 Sep 2002) | 2 lines

 * Fixed serious bug in idtable: last_id was not initialized

------------------------------------------------------------------------
r1643 | wyldfire | 2002-09-10 07:15:58 -0400 (Tue, 10 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1642 | wyldfire | 2002-09-10 07:15:19 -0400 (Tue, 10 Sep 2002) | 4 lines


 * Expanded gnet statistics
 * Added percentage display for gnet statistics

------------------------------------------------------------------------
r1641 | wyldfire | 2002-09-10 07:12:55 -0400 (Tue, 10 Sep 2002) | 8 lines


 * Expanded gnet statistics
 * Added percentage display for gnet statistics
 * Finally added the "expert mode". This means you'll not see lots of
   settings in the config panes next time you start. If you want to
   enable the expert mode, edit your "config_gui" file in ~/.gtk-gnutella
   manually and set "expert mode" to TRUE.

------------------------------------------------------------------------
r1640 | wyldfire | 2002-09-10 07:11:53 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Expanded gnet statistics

------------------------------------------------------------------------
r1639 | wyldfire | 2002-09-10 07:11:29 -0400 (Tue, 10 Sep 2002) | 3 lines


 * "Can't remove node" bug should be fixed now

------------------------------------------------------------------------
r1638 | wyldfire | 2002-09-10 07:10:20 -0400 (Tue, 10 Sep 2002) | 7 lines


 * Added percentage display for gnet statistics
 * Finally added the "expert mode". This means you'll not see lots of
   settings in the config panes next time you start. If you want to
   enable the expert mode, edit your "config_gui" file in ~/.gtk-gnutella
   manually and set "expert mode" to TRUE.

------------------------------------------------------------------------
r1637 | wyldfire | 2002-09-10 07:08:30 -0400 (Tue, 10 Sep 2002) | 3 lines


 * Renamed "local" to "generated" in the gnet statistics

------------------------------------------------------------------------
r1636 | wyldfire | 2002-09-10 07:07:21 -0400 (Tue, 10 Sep 2002) | 6 lines


 * Expanded gnet statistics
 * Added percentage display for gnet statistics
 * Moved "(globally) drop..." do submenus. More to come
 * Renamed "local" to "generated" in the gnet statistics

------------------------------------------------------------------------
r1635 | rmanfredi | 2002-09-09 18:44:42 -0400 (Mon, 09 Sep 2002) | 2 lines

Version of 09/09/2002.

------------------------------------------------------------------------
r1634 | rmanfredi | 2002-09-09 18:19:46 -0400 (Mon, 09 Sep 2002) | 4 lines

Requeue downloads with a SHA1 in the fileinfo but for which the server
gives no URN: it will wait for an overlap to resume, provided the user
has at least configured 64 bytes of overlap (fixes bug #606373).

------------------------------------------------------------------------
r1633 | uid23183 | 2002-09-09 16:07:29 -0400 (Mon, 09 Sep 2002) | 2 lines

Split sent statistics into local and relayed.

------------------------------------------------------------------------
r1632 | uid23183 | 2002-09-09 16:06:06 -0400 (Mon, 09 Sep 2002) | 2 lines

When reading back fileinfo cache, guard against duplicate ALIA entries.

------------------------------------------------------------------------
r1631 | rmanfredi | 2002-09-09 15:39:17 -0400 (Mon, 09 Sep 2002) | 3 lines

Fixed size counting for sent messages: was using the header of the node,
not the supplied message type.

------------------------------------------------------------------------
r1630 | rmanfredi | 2002-09-09 15:32:56 -0400 (Mon, 09 Sep 2002) | 3 lines

Cleanup of statistics, separating reception: header and payload counted
separately.

------------------------------------------------------------------------
r1629 | rmanfredi | 2002-09-09 14:14:06 -0400 (Mon, 09 Sep 2002) | 2 lines

Was counting the Gnutella header twice for queued messages.

------------------------------------------------------------------------
r1628 | rmanfredi | 2002-09-09 13:44:13 -0400 (Mon, 09 Sep 2002) | 2 lines

Count sent message size from queue accurately.

------------------------------------------------------------------------
r1627 | wyldfire | 2002-09-09 12:58:39 -0400 (Mon, 09 Sep 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1626 | rmanfredi | 2002-09-09 12:58:05 -0400 (Mon, 09 Sep 2002) | 2 lines

Made socket_connected() private.

------------------------------------------------------------------------
r1625 | wyldfire | 2002-09-09 12:57:26 -0400 (Mon, 09 Sep 2002) | 4 lines


 * Added drop statistics for every message type and accumulated traffic
   statistics for every message typ

------------------------------------------------------------------------
r1624 | wyldfire | 2002-09-09 12:56:50 -0400 (Mon, 09 Sep 2002) | 4 lines


 * Reduced number of drop reasons and use same reason for different
   message types.

------------------------------------------------------------------------
r1623 | wyldfire | 2002-09-09 12:56:28 -0400 (Mon, 09 Sep 2002) | 3 lines


 * Again changed gNet pane update behaviour (once per second)

------------------------------------------------------------------------
r1622 | wyldfire | 2002-09-09 12:55:26 -0400 (Mon, 09 Sep 2002) | 5 lines


 * Added drop statistics for every message type and accumulated traffic
   statistics for every message type.
 * Fixed problem caused by not setting the GtkWindow size

------------------------------------------------------------------------
r1621 | rmanfredi | 2002-09-09 12:55:07 -0400 (Mon, 09 Sep 2002) | 2 lines

Fixed reference count problem when resetting fileinfo.

------------------------------------------------------------------------
r1620 | wyldfire | 2002-09-09 12:53:13 -0400 (Mon, 09 Sep 2002) | 4 lines


 * Added drop statistics for every message type and accumulated traffic
   statistics for every message type.

------------------------------------------------------------------------
r1619 | wyldfire | 2002-09-09 12:52:07 -0400 (Mon, 09 Sep 2002) | 4 lines


 * Don't bother trying to find a hit if we don't share any file.
 * Added stats for local query hits

------------------------------------------------------------------------
r1618 | wyldfire | 2002-09-09 12:50:38 -0400 (Mon, 09 Sep 2002) | 6 lines


 * Added drop statistics for every message type and accumulated traffic
   statistics for every message type.
 * Reduced number of drop reasons and use same reason for different
   message types.

------------------------------------------------------------------------
r1617 | wyldfire | 2002-09-09 05:29:00 -0400 (Mon, 09 Sep 2002) | 4 lines


 * Added AM_MAINTAINER_MODE to prevent automatic regeneration of files
   when a newer version of automake/autoconf is installed

------------------------------------------------------------------------
r1616 | rmanfredi | 2002-09-08 18:11:33 -0400 (Sun, 08 Sep 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1615 | rmanfredi | 2002-09-08 17:29:12 -0400 (Sun, 08 Sep 2002) | 2 lines

Fixed Richard's sent counter stats.

------------------------------------------------------------------------
r1614 | rmanfredi | 2002-09-08 16:55:31 -0400 (Sun, 08 Sep 2002) | 2 lines

Version of 08/09/2002.

------------------------------------------------------------------------
r1613 | rmanfredi | 2002-09-08 16:43:58 -0400 (Sun, 08 Sep 2002) | 2 lines

Changed message names to the "standard" names.

------------------------------------------------------------------------
r1612 | rmanfredi | 2002-09-08 16:37:59 -0400 (Sun, 08 Sep 2002) | 2 lines

Don't assert that size_atom exists on fi_free(), it could be missing.

------------------------------------------------------------------------
r1611 | rmanfredi | 2002-09-08 16:24:24 -0400 (Sun, 08 Sep 2002) | 3 lines

When about to move to "disconnected from the Internet" state, look whether
there was incoming traffic received recently.

------------------------------------------------------------------------
r1610 | wyldfire | 2002-09-08 15:57:31 -0400 (Sun, 08 Sep 2002) | 3 lines


no comment

------------------------------------------------------------------------
r1609 | wyldfire | 2002-09-08 15:56:56 -0400 (Sun, 08 Sep 2002) | 3 lines


* Adusted for new files

------------------------------------------------------------------------
r1608 | wyldfire | 2002-09-08 15:50:42 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Added gnet statistics

------------------------------------------------------------------------
r1607 | wyldfire | 2002-09-08 15:50:19 -0400 (Sun, 08 Sep 2002) | 6 lines


 * Added gnet statistics
 * Made (most) tooltips optional.
 * Show confirmation dialog when leaving gtk-gnutella (optional
 * Update guid using a property callback

------------------------------------------------------------------------
r1606 | wyldfire | 2002-09-08 15:48:55 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Use properties to set scan extensions

------------------------------------------------------------------------
r1605 | wyldfire | 2002-09-08 15:47:13 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Moved code from upload_stats.[ch] to upload_stats_gui.[ch]
 * Temporarily relocated a struct declaration from upload_stats to gnet.h

------------------------------------------------------------------------
r1604 | wyldfire | 2002-09-08 15:45:36 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Changed code to update sidebar stats

------------------------------------------------------------------------
r1603 | wyldfire | 2002-09-08 15:45:07 -0400 (Sun, 08 Sep 2002) | 5 lines


 * Mark files downloaded by "Watch searches for alternate sources" as
   "queued" in search results (same marking as when you manually download
   them)

------------------------------------------------------------------------
r1602 | wyldfire | 2002-09-08 15:44:39 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Don't generate duplicate filter rules when creating rules from
   a number of selected search results.

------------------------------------------------------------------------
r1601 | wyldfire | 2002-09-08 15:44:04 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Added gnet statistics

------------------------------------------------------------------------
r1600 | wyldfire | 2002-09-08 15:41:33 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Update nodes in gNet panel more often.
 * Changed code to update sidebar stats

------------------------------------------------------------------------
r1599 | wyldfire | 2002-09-08 15:40:31 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Updated clist_collect_data to be more usable

------------------------------------------------------------------------
r1598 | wyldfire | 2002-09-08 15:39:57 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Added gnet statistics
 * Changed code to update sidebar stats

------------------------------------------------------------------------
r1597 | wyldfire | 2002-09-08 15:38:49 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Show confirmation dialog when leaving gtk-gnutella (optional)

------------------------------------------------------------------------
r1596 | wyldfire | 2002-09-08 15:38:26 -0400 (Sun, 08 Sep 2002) | 5 lines


 * Mark files downloaded by "Watch searches for alternate sources" as
   "queued" in search results (same marking as when you manually download
   them)

------------------------------------------------------------------------
r1595 | wyldfire | 2002-09-08 15:36:44 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Moved code from main.c to main_gui.[ch]

------------------------------------------------------------------------
r1594 | wyldfire | 2002-09-08 15:34:47 -0400 (Sun, 08 Sep 2002) | 9 lines


 * Added gnet statistics
 * Moved declarations of functions needed by gui from downloads.h to
   gnet.h
 * Temporarily relocated a struct declaration from upload_stats to gnet.h
 * Mark files downloaded by "Watch searches for alternate sources" as
   "queued" in search results (same marking as when you manually download
   them)

------------------------------------------------------------------------
r1593 | wyldfire | 2002-09-08 15:33:00 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Moved declarations of functions needed by gui from downloads.h to
   gnet.h

------------------------------------------------------------------------
r1592 | wyldfire | 2002-09-08 15:30:35 -0400 (Sun, 08 Sep 2002) | 5 lines


 * Moved code from gui.[ch] to main_gui.[ch]
 * Moved code from gui.[ch] to downloads_gui.[ch] and uploads_gui.[ch]
 * Changed code to update sidebar stats

------------------------------------------------------------------------
r1591 | wyldfire | 2002-09-08 15:28:41 -0400 (Sun, 08 Sep 2002) | 5 lines


 * Moved code from main.c to main_gui.[ch]
 * Moved code from gui.[ch] to main_gui.[ch]
 * Added gnet statistics initialization code

------------------------------------------------------------------------
r1590 | wyldfire | 2002-09-08 15:27:22 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Moved code from gui.[ch] to downloads_gui.[ch] and uploads_gui.[ch]

------------------------------------------------------------------------
r1589 | wyldfire | 2002-09-08 15:26:27 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Moved code from callbacks.[ch] to downloads_cb.[ch] and uploads_cb.[ch]

------------------------------------------------------------------------
r1588 | wyldfire | 2002-09-08 15:24:32 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Added gnet statistics

------------------------------------------------------------------------
r1587 | wyldfire | 2002-09-08 15:19:41 -0400 (Sun, 08 Sep 2002) | 4 lines


 * Added gnet statistics
 * Added "User interface" settings to config pane.

------------------------------------------------------------------------
r1586 | wyldfire | 2002-09-08 15:17:52 -0400 (Sun, 08 Sep 2002) | 3 lines


 * Added feature summary to output of configure script

------------------------------------------------------------------------
r1585 | rmanfredi | 2002-09-08 14:48:23 -0400 (Sun, 08 Sep 2002) | 2 lines

Resize fileinfo when we get a larger file with same SHA1.

------------------------------------------------------------------------
r1584 | rmanfredi | 2002-09-08 06:14:54 -0400 (Sun, 08 Sep 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1583 | rmanfredi | 2002-09-08 06:13:25 -0400 (Sun, 08 Sep 2002) | 4 lines

Fixed problem when requeuing a stopped download from the GUI.
Internal invalidation of the "fileinfo" was leaving a NULL pointer and
this is confusing: always reget a proper fileinfo when invalidating.

------------------------------------------------------------------------
r1582 | rmanfredi | 2002-09-07 14:37:51 -0400 (Sat, 07 Sep 2002) | 2 lines

Make sure we don't display negative retry times for downloads.

------------------------------------------------------------------------
r1581 | rmanfredi | 2002-09-07 14:37:07 -0400 (Sat, 07 Sep 2002) | 2 lines

Version of 07/09/2002.

------------------------------------------------------------------------
r1580 | rmanfredi | 2002-09-07 14:36:41 -0400 (Sat, 07 Sep 2002) | 3 lines

Refactored swarming meta-information management to avoid conflicts between
different files, and really put identical sources to the same output file.

------------------------------------------------------------------------
r1579 | rmanfredi | 2002-09-07 14:34:10 -0400 (Sat, 07 Sep 2002) | 2 lines

Added "int" atoms.

------------------------------------------------------------------------
r1578 | rmanfredi | 2002-09-06 17:18:44 -0400 (Fri, 06 Sep 2002) | 2 lines

Version of 06/09/2002.

------------------------------------------------------------------------
r1577 | rmanfredi | 2002-09-06 17:00:26 -0400 (Fri, 06 Sep 2002) | 2 lines

Was badly computing position in queue when it holds more than 1024 entries.

------------------------------------------------------------------------
r1576 | rmanfredi | 2002-09-06 16:58:32 -0400 (Fri, 06 Sep 2002) | 2 lines

Made guid_random_fill() a public routine.

------------------------------------------------------------------------
r1575 | rmanfredi | 2002-09-06 16:57:56 -0400 (Fri, 06 Sep 2002) | 2 lines

Was wrongly forwarding query hits with bad SHA1s when debugging disabled.

------------------------------------------------------------------------
r1574 | rmanfredi | 2002-09-06 16:56:45 -0400 (Fri, 06 Sep 2002) | 2 lines

Factored out handling of (name, size) tuples.

------------------------------------------------------------------------
r1573 | rmanfredi | 2002-09-02 04:08:40 -0400 (Mon, 02 Sep 2002) | 2 lines

Fixed duplicate server free bug (fixes bug #603365).

------------------------------------------------------------------------
r1572 | rmanfredi | 2002-09-01 09:46:13 -0400 (Sun, 01 Sep 2002) | 4 lines

If remote HTTP/1.1 does not honour keep-alive on the connection as promised,
mark it as not supporting keep-alives.
Also defer reclaiming of the server structure when freeing a download.

------------------------------------------------------------------------
r1571 | rmanfredi | 2002-09-01 09:37:57 -0400 (Sun, 01 Sep 2002) | 3 lines

Added workaround for sscanf() parsing bug: always end parsing with a
scanned parameter.

------------------------------------------------------------------------
r1570 | rmanfredi | 2002-09-01 09:33:33 -0400 (Sun, 01 Sep 2002) | 2 lines

Was missing a trailing "\n" in whitelist.c debugging statement.

------------------------------------------------------------------------
r1569 | rmanfredi | 2002-09-01 09:32:56 -0400 (Sun, 01 Sep 2002) | 3 lines

Made local_ip persistent, in case it takes time to determine dynamically.
Fixed some English typos in descriptions ("then" -> "than").

------------------------------------------------------------------------
r1568 | wyldfire | 2002-08-31 20:35:02 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Move general settings above search-specific settings again

------------------------------------------------------------------------
r1567 | wyldfire | 2002-08-31 20:31:02 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Remove GTK-Critical warnings

------------------------------------------------------------------------
r1566 | wyldfire | 2002-08-31 20:21:19 -0400 (Sat, 31 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1565 | wyldfire | 2002-08-31 20:19:25 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Make size columns right-justrified

------------------------------------------------------------------------
r1564 | wyldfire | 2002-08-31 20:18:39 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Include juggle

------------------------------------------------------------------------
r1563 | wyldfire | 2002-08-31 20:18:07 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Cosmetic adjustments to idtable module

------------------------------------------------------------------------
r1562 | wyldfire | 2002-08-31 20:15:03 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Make reissue timeout setting work properly again

------------------------------------------------------------------------
r1561 | wyldfire | 2002-08-31 20:14:19 -0400 (Sat, 31 Aug 2002) | 2 lines

 * Rearrangement of the search panel

------------------------------------------------------------------------
r1560 | rmanfredi | 2002-08-31 08:08:24 -0400 (Sat, 31 Aug 2002) | 2 lines

Version of 31/08/2002.

------------------------------------------------------------------------
r1559 | rmanfredi | 2002-08-31 06:49:33 -0400 (Sat, 31 Aug 2002) | 2 lines

Changed the way GUID are generated for messages and servents.

------------------------------------------------------------------------
r1558 | rmanfredi | 2002-08-31 06:36:13 -0400 (Sat, 31 Aug 2002) | 2 lines

Changed the way GUID are generated for messages and servents.

------------------------------------------------------------------------
r1557 | rmanfredi | 2002-08-29 16:58:08 -0400 (Thu, 29 Aug 2002) | 2 lines

Fixed file descriptor leak.

------------------------------------------------------------------------
r1556 | rmanfredi | 2002-08-29 16:45:38 -0400 (Thu, 29 Aug 2002) | 2 lines

Fixed improper display when new version is encountered.

------------------------------------------------------------------------
r1555 | rmanfredi | 2002-08-29 15:26:49 -0400 (Thu, 29 Aug 2002) | 2 lines

Version of 29/08/2002.

------------------------------------------------------------------------
r1554 | rmanfredi | 2002-08-29 14:39:35 -0400 (Thu, 29 Aug 2002) | 2 lines

Fixed minor style issues.

------------------------------------------------------------------------
r1553 | rmanfredi | 2002-08-29 14:38:43 -0400 (Thu, 29 Aug 2002) | 3 lines

Make sure upload slot is reserved between two consecutive queries on
a persistent HTTP/1.1 connection.

------------------------------------------------------------------------
r1552 | rmanfredi | 2002-08-29 14:37:01 -0400 (Thu, 29 Aug 2002) | 2 lines

Plugged download ignore lists.

------------------------------------------------------------------------
r1551 | rmanfredi | 2002-08-29 14:36:31 -0400 (Thu, 29 Aug 2002) | 2 lines

Make sure we're not passed a removed download for display.

------------------------------------------------------------------------
r1550 | rmanfredi | 2002-08-29 14:35:50 -0400 (Thu, 29 Aug 2002) | 2 lines

Removed wrong assert in file_info_recreate() (fixes bug #601626).

------------------------------------------------------------------------
r1549 | rmanfredi | 2002-08-29 14:32:01 -0400 (Thu, 29 Aug 2002) | 4 lines

Actual freeing of download structures is now deferred to avoid race
conditions with list traversals.
Plugged download ignore lists.

------------------------------------------------------------------------
r1548 | rmanfredi | 2002-08-29 14:27:54 -0400 (Thu, 29 Aug 2002) | 2 lines

Added download ignoring list.

------------------------------------------------------------------------
r1547 | wyldfire | 2002-08-28 22:09:44 -0400 (Wed, 28 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1546 | wyldfire | 2002-08-28 21:59:37 -0400 (Wed, 28 Aug 2002) | 2 lines

 * removed unused variable

------------------------------------------------------------------------
r1545 | wyldfire | 2002-08-28 21:59:13 -0400 (Wed, 28 Aug 2002) | 2 lines

 * Added idtable.[ch]

------------------------------------------------------------------------
r1544 | wyldfire | 2002-08-28 21:55:04 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Drop usage of g_hash_table for handle lookup in search.c and nodes.c in
   favor of new idtable

------------------------------------------------------------------------
r1543 | wyldfire | 2002-08-28 14:23:42 -0400 (Wed, 28 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1542 | wyldfire | 2002-08-28 14:19:08 -0400 (Wed, 28 Aug 2002) | 2 lines

 * Adjust to added files

------------------------------------------------------------------------
r1541 | wyldfire | 2002-08-28 14:14:43 -0400 (Wed, 28 Aug 2002) | 2 lines

 * gui<->core split

------------------------------------------------------------------------
r1540 | wyldfire | 2002-08-28 14:12:47 -0400 (Wed, 28 Aug 2002) | 3 lines


 * Added upload_kill() to uploads.[ch]

------------------------------------------------------------------------
r1539 | wyldfire | 2002-08-28 14:12:20 -0400 (Wed, 28 Aug 2002) | 5 lines


 * Expanded search_request_listener signature to contain a query type and
   a query string. This way the gui can decide how to handle SHA1 queries.
   (Search monitor displays them, search stats drop them)

------------------------------------------------------------------------
r1538 | wyldfire | 2002-08-28 14:11:48 -0400 (Wed, 28 Aug 2002) | 3 lines


 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1537 | wyldfire | 2002-08-28 14:11:20 -0400 (Wed, 28 Aug 2002) | 3 lines


 * Moved more stuff out of callbacks.[ch]

------------------------------------------------------------------------
r1536 | wyldfire | 2002-08-28 14:10:34 -0400 (Wed, 28 Aug 2002) | 11 lines


 * Changed justification of columns in search stats
 * Moved search stats to gui side. Use the same callback as the
   search monitor to get information from backend.
 * Fix search stats so that a change in the update interval does immediatly
   take effect.
 * Expanded search_request_listener signature to contain a query type and
   a query string. This way the gui can decide how to handle SHA1 queries.
   (Search monitor displays them, search stats drop them)
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1535 | wyldfire | 2002-08-28 14:09:48 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Cleant up gui.[ch]. Moved code to downloads_gui.[ch] and search_gui.[ch]
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1534 | wyldfire | 2002-08-28 14:09:06 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Moved node_ip and message_dump from misc.c to nodes.c
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1533 | wyldfire | 2002-08-28 14:08:31 -0400 (Wed, 28 Aug 2002) | 7 lines


 * More include cleanups for gui<->core separation
 * Expanded search_request_listener signature to contain a query type and
   a query string. This way the gui can decide how to handle SHA1 queries.
   (Search monitor displays them, search stats drop them)
 * Fixed up search monitor to handle SHA1 queries on the gui side.

------------------------------------------------------------------------
r1532 | wyldfire | 2002-08-28 14:07:50 -0400 (Wed, 28 Aug 2002) | 5 lines


 * Moved build_url_from_download from misc.c to downloads.c
 * Moved node_ip and message_dump from misc.c to nodes.c
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1531 | wyldfire | 2002-08-28 14:06:52 -0400 (Wed, 28 Aug 2002) | 4 lines



 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1530 | wyldfire | 2002-08-28 14:06:11 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Made column headers insensitive for tables that can not be sorted.
 * Disable search stats on exit

------------------------------------------------------------------------
r1529 | wyldfire | 2002-08-28 14:05:40 -0400 (Wed, 28 Aug 2002) | 3 lines


 * Export host_clear_cache in gnet.h

------------------------------------------------------------------------
r1528 | wyldfire | 2002-08-28 14:05:07 -0400 (Wed, 28 Aug 2002) | 4 lines


 * More include cleanups for gui<->core separation
 * Cleant up gui.[ch]. Moved code to downloads_gui.[ch] and search_gui.[ch]

------------------------------------------------------------------------
r1527 | wyldfire | 2002-08-28 14:04:05 -0400 (Wed, 28 Aug 2002) | 4 lines


 * More include cleanups for gui<->core separation
 * Moved gtk_gnutella_exit prototype to common.h

------------------------------------------------------------------------
r1526 | wyldfire | 2002-08-28 14:02:08 -0400 (Wed, 28 Aug 2002) | 2 lines

 * Moved all search stats properties to gui.

------------------------------------------------------------------------
r1525 | wyldfire | 2002-08-28 14:01:18 -0400 (Wed, 28 Aug 2002) | 3 lines


 * Moved all search stats properties to gui.

------------------------------------------------------------------------
r1524 | wyldfire | 2002-08-28 14:00:19 -0400 (Wed, 28 Aug 2002) | 6 lines


 * Export host_clear_cache in gnet.h
 * Expanded search_request_listener signature to contain a query type and
   a query string. This way the gui can decide how to handle SHA1 queries.
   (Search monitor displays them, search stats drop them)

------------------------------------------------------------------------
r1523 | wyldfire | 2002-08-28 13:59:42 -0400 (Wed, 28 Aug 2002) | 2 lines

 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1522 | wyldfire | 2002-08-28 13:58:59 -0400 (Wed, 28 Aug 2002) | 4 lines


 * More include cleanups for gui<->core separation
 * Cleant up gui.[ch]. Moved code to downloads_gui.[ch] and search_gui.[ch]

------------------------------------------------------------------------
r1521 | wyldfire | 2002-08-28 13:58:03 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Moved build_url_from_download from misc.c to downloads.c
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1520 | wyldfire | 2002-08-28 13:57:19 -0400 (Wed, 28 Aug 2002) | 4 lines


 * More include cleanups for gui<->core separation
 * Moved gtk_gnutella_exit prototype to common.h

------------------------------------------------------------------------
r1519 | wyldfire | 2002-08-28 13:56:49 -0400 (Wed, 28 Aug 2002) | 4 lines


 * Moved more stuff out of callbacks.[ch]
 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1518 | wyldfire | 2002-08-28 13:52:25 -0400 (Wed, 28 Aug 2002) | 2 lines

 * More include cleanups for gui<->core separation

------------------------------------------------------------------------
r1517 | wyldfire | 2002-08-28 13:45:27 -0400 (Wed, 28 Aug 2002) | 2 lines

 * Minor cleanup

------------------------------------------------------------------------
r1516 | wyldfire | 2002-08-27 13:31:44 -0400 (Tue, 27 Aug 2002) | 2 lines

 * Moved all code from share_gui.[ch] to monitor_gui.[ch]

------------------------------------------------------------------------
r1515 | wyldfire | 2002-08-27 08:58:51 -0400 (Tue, 27 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1514 | wyldfire | 2002-08-27 08:19:56 -0400 (Tue, 27 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1513 | wyldfire | 2002-08-27 08:19:30 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Fixed missing include

------------------------------------------------------------------------
r1512 | wyldfire | 2002-08-27 08:11:35 -0400 (Tue, 27 Aug 2002) | 4 lines


 * Moved vendor code resolving to vendors.[ch]
 * Added ARES to known vendors

------------------------------------------------------------------------
r1511 | wyldfire | 2002-08-27 08:11:15 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Moved all code from share_gui.[ch] to monitor_gui.[ch]

------------------------------------------------------------------------
r1510 | wyldfire | 2002-08-27 08:10:12 -0400 (Tue, 27 Aug 2002) | 10 lines


 * Juggled includes:
   - All GUI modules should include gui.h
   - All CORE modules shound include gnutella.h
   - Both, gui.h and gnutella.h include common.h
   - Any module included by common.h may not include any module from
     the GUI or CORE.
   Later we will moved files belonging to the different sections of
   gtk-gnutella to sub-directories.

------------------------------------------------------------------------
r1509 | wyldfire | 2002-08-27 07:45:01 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Moved gui_new_version found as version_new_found to version.c

------------------------------------------------------------------------
r1508 | wyldfire | 2002-08-27 07:44:38 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Properly update GUI when listen_ip or listen_port changes (use properties)

------------------------------------------------------------------------
r1507 | wyldfire | 2002-08-27 07:44:08 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Removed gui init calls from share.c

------------------------------------------------------------------------
r1506 | wyldfire | 2002-08-27 07:43:11 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Properly update GUI when listen_ip or listen_port changes

------------------------------------------------------------------------
r1505 | wyldfire | 2002-08-27 07:42:13 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Display message in statusbar when manuall connection to node failed

------------------------------------------------------------------------
r1504 | wyldfire | 2002-08-27 07:41:19 -0400 (Tue, 27 Aug 2002) | 4 lines


 * Moved gui_new_version found as version_new_found to version.c
 * General cleanup

------------------------------------------------------------------------
r1503 | wyldfire | 2002-08-27 07:36:32 -0400 (Tue, 27 Aug 2002) | 3 lines


 * Moved search_extract_host from search.c as node_extract_host to nodes.c

------------------------------------------------------------------------
r1502 | wyldfire | 2002-08-27 07:35:44 -0400 (Tue, 27 Aug 2002) | 4 lines


 * oldconfig.c is now considered GUI code (needs to access gnet and gui
   props

------------------------------------------------------------------------
r1501 | wyldfire | 2002-08-27 07:34:21 -0400 (Tue, 27 Aug 2002) | 4 lines


 * Moved vendor code resolving to vendors.[ch]
 * Moved search_extract_host from search.c as node_extract_host to nodes.c

------------------------------------------------------------------------
r1500 | wyldfire | 2002-08-27 07:30:36 -0400 (Tue, 27 Aug 2002) | 5 lines


 * Moved more gui initialization and shutdown code to main_gui.c
 * Moved main gui timer to main_gui.c
 * Moved loading of legacy config file to main_gui.c

------------------------------------------------------------------------
r1499 | rmanfredi | 2002-08-27 02:11:18 -0400 (Tue, 27 Aug 2002) | 2 lines

Banned URLs with an /uri-res/N2R? where not properly recorded/persisted.

------------------------------------------------------------------------
r1498 | rmanfredi | 2002-08-27 02:10:10 -0400 (Tue, 27 Aug 2002) | 3 lines

When swarming: if we do not upper-bound the chunk, display a "+" after the
displayed chunk size in the download Range column.

------------------------------------------------------------------------
r1497 | vidar | 2002-08-26 18:45:19 -0400 (Mon, 26 Aug 2002) | 2 lines

Added support for numbits-netmasks like "11.11.11.11/24".

------------------------------------------------------------------------
r1496 | vidar | 2002-08-26 17:08:28 -0400 (Mon, 26 Aug 2002) | 2 lines

Updated

------------------------------------------------------------------------
r1495 | vidar | 2002-08-26 17:08:10 -0400 (Mon, 26 Aug 2002) | 2 lines

Added prototype for node_remove_worst().

------------------------------------------------------------------------
r1494 | vidar | 2002-08-26 17:07:31 -0400 (Mon, 26 Aug 2002) | 2 lines

Added to CVS.

------------------------------------------------------------------------
r1493 | vidar | 2002-08-26 17:07:13 -0400 (Mon, 26 Aug 2002) | 3 lines

Added removal of "worst" node if node_count() > max_connections
(which can happen if we get an incoming whitelisted one).

------------------------------------------------------------------------
r1492 | vidar | 2002-08-26 17:06:22 -0400 (Mon, 26 Aug 2002) | 2 lines

Added calls to whitelist_init() and _close().

------------------------------------------------------------------------
r1491 | vidar | 2002-08-26 17:05:56 -0400 (Mon, 26 Aug 2002) | 2 lines

Added connections to whitelist to host_timer().

------------------------------------------------------------------------
r1490 | vidar | 2002-08-26 17:04:28 -0400 (Mon, 26 Aug 2002) | 2 lines

Added whilelist.[ch]

------------------------------------------------------------------------
r1489 | rmanfredi | 2002-08-26 16:59:28 -0400 (Mon, 26 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1488 | rmanfredi | 2002-08-26 16:50:10 -0400 (Mon, 26 Aug 2002) | 2 lines

Fill in Range column of downloads with the actual range requested.

------------------------------------------------------------------------
r1487 | wyldfire | 2002-08-26 16:10:09 -0400 (Mon, 26 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1486 | wyldfire | 2002-08-26 16:06:15 -0400 (Mon, 26 Aug 2002) | 2 lines

* Renamed config_dir to gui_config_dir and export it

------------------------------------------------------------------------
r1485 | wyldfire | 2002-08-26 16:05:12 -0400 (Mon, 26 Aug 2002) | 2 lines

* Only try to set reissue timeout of non-passive searches

------------------------------------------------------------------------
r1484 | wyldfire | 2002-08-26 16:04:06 -0400 (Mon, 26 Aug 2002) | 2 lines

* Clobbered more core includes

------------------------------------------------------------------------
r1483 | wyldfire | 2002-08-26 16:03:34 -0400 (Mon, 26 Aug 2002) | 4 lines


* include settings_gui.h instead of settings.h
* Copy not only visibility, but also column width on switch to a new search.

------------------------------------------------------------------------
r1482 | wyldfire | 2002-08-26 16:00:17 -0400 (Mon, 26 Aug 2002) | 3 lines


* Adjusted to moved properties.

------------------------------------------------------------------------
r1481 | wyldfire | 2002-08-26 15:58:52 -0400 (Mon, 26 Aug 2002) | 2 lines

* Moved search-related callbacks from callbacks.[ch] to search_cb.[cb]

------------------------------------------------------------------------
r1480 | wyldfire | 2002-08-26 15:57:45 -0400 (Mon, 26 Aug 2002) | 2 lines

* Use search minimum speed instead of default minimum speed

------------------------------------------------------------------------
r1479 | wyldfire | 2002-08-26 15:57:01 -0400 (Mon, 26 Aug 2002) | 2 lines

* Added 'Range' column to active downloads

------------------------------------------------------------------------
r1478 | wyldfire | 2002-08-26 15:55:57 -0400 (Mon, 26 Aug 2002) | 3 lines


* Obsoleted gui_update[save|move]_file_path()

------------------------------------------------------------------------
r1477 | wyldfire | 2002-08-26 15:55:14 -0400 (Mon, 26 Aug 2002) | 3 lines


* Moved filter.c to GUI side (use gui_debug instead of dbg)

------------------------------------------------------------------------
r1476 | wyldfire | 2002-08-26 15:52:17 -0400 (Mon, 26 Aug 2002) | 5 lines


* Bumped active downloads column widths array by one (new Range col)
* Moved PROP_MINIMUM_SPEED to gui props as PROP_DEFAULT_MINIMUM_SPEED
* Moved PROP_FILTER_DEFAULT_POLICY to gui props

------------------------------------------------------------------------
r1475 | wyldfire | 2002-08-26 15:48:40 -0400 (Mon, 26 Aug 2002) | 2 lines

* Added 'Range' column to active downloads

------------------------------------------------------------------------
r1474 | rmanfredi | 2002-08-26 15:36:52 -0400 (Mon, 26 Aug 2002) | 3 lines

When HTTP/1.1 download chunk is done, mark it as "Chunk done" and not
as "Completed" to avoid confusion.

------------------------------------------------------------------------
r1473 | rmanfredi | 2002-08-26 15:30:05 -0400 (Mon, 26 Aug 2002) | 3 lines

When cloning downloads, was properly duplicating "push state" of the clone.
Fixed assertion failure when bumping into a BUSY chunk (fixes bug #600272).

------------------------------------------------------------------------
r1472 | wyldfire | 2002-08-26 11:34:46 -0400 (Mon, 26 Aug 2002) | 4 lines


* search.c and nodes.c use a g_hash_table now to resolve handles and don't
  map the internal pointers directly as handles.

------------------------------------------------------------------------
r1471 | wyldfire | 2002-08-26 11:32:43 -0400 (Mon, 26 Aug 2002) | 2 lines

* current_search is no longer exported and must be acessed through search_gui_get_current_search()

------------------------------------------------------------------------
r1470 | wyldfire | 2002-08-26 11:31:03 -0400 (Mon, 26 Aug 2002) | 2 lines

* Moved on_search_selected from callbacks to search_cb

------------------------------------------------------------------------
r1469 | wyldfire | 2002-08-26 10:09:46 -0400 (Mon, 26 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1468 | wyldfire | 2002-08-26 09:58:34 -0400 (Mon, 26 Aug 2002) | 2 lines

* Adjust for search/search_gui split

------------------------------------------------------------------------
r1467 | wyldfire | 2002-08-26 09:57:56 -0400 (Mon, 26 Aug 2002) | 2 lines

* Used wrong record type in file_info_check_results_set. Now use gnet_record_t

------------------------------------------------------------------------
r1466 | wyldfire | 2002-08-26 09:50:51 -0400 (Mon, 26 Aug 2002) | 2 lines

* Adjust for search/search_gui split

------------------------------------------------------------------------
r1465 | wyldfire | 2002-08-26 09:44:55 -0400 (Mon, 26 Aug 2002) | 2 lines

* Adjust for search/search_gui split

------------------------------------------------------------------------
r1464 | wyldfire | 2002-08-26 09:38:15 -0400 (Mon, 26 Aug 2002) | 2 lines

* Made search.[ch] be a core and search_[gui|cb].[ch] be GUI

------------------------------------------------------------------------
r1463 | wyldfire | 2002-08-26 09:35:26 -0400 (Mon, 26 Aug 2002) | 2 lines

* Adjust for search/search_gui split

------------------------------------------------------------------------
r1462 | wyldfire | 2002-08-26 09:24:56 -0400 (Mon, 26 Aug 2002) | 2 lines

* Adjust for search/search_gui split

------------------------------------------------------------------------
r1461 | wyldfire | 2002-08-26 09:21:52 -0400 (Mon, 26 Aug 2002) | 4 lines


* Added Vidar to "About" dialog
* Fixed minimum speed callback in search pane (connect after now)

------------------------------------------------------------------------
r1460 | rmanfredi | 2002-08-25 18:25:07 -0400 (Sun, 25 Aug 2002) | 2 lines

Version of 25/08/2002.

------------------------------------------------------------------------
r1459 | rmanfredi | 2002-08-25 18:23:46 -0400 (Sun, 25 Aug 2002) | 3 lines

Could think we were disconnected from the Internet when not making any
outgoing connections, whilst still receiving some.

------------------------------------------------------------------------
r1458 | rmanfredi | 2002-08-25 18:22:15 -0400 (Sun, 25 Aug 2002) | 2 lines

GUI will now report proper completion speed for the range requested.

------------------------------------------------------------------------
r1457 | rmanfredi | 2002-08-25 18:21:17 -0400 (Sun, 25 Aug 2002) | 4 lines

Added support for HTTP/1.1 connections on downloads.
Swarming code now uses persistent connections and tailored range requests
when remote server is known to support HTTP/1.1.

------------------------------------------------------------------------
r1456 | rmanfredi | 2002-08-25 05:14:15 -0400 (Sun, 25 Aug 2002) | 2 lines

Skip empty lines silently when retrieving banned mesh entries.

------------------------------------------------------------------------
r1455 | rmanfredi | 2002-08-25 05:10:18 -0400 (Sun, 25 Aug 2002) | 2 lines

Use /dev/urandom to initialize seed on systems that have it.

------------------------------------------------------------------------
r1454 | rmanfredi | 2002-08-24 10:01:54 -0400 (Sat, 24 Aug 2002) | 2 lines

Added banning mesh to avoid filling the mesh with URLs we know are bad.

------------------------------------------------------------------------
r1453 | rmanfredi | 2002-08-24 09:59:42 -0400 (Sat, 24 Aug 2002) | 3 lines

Mark changes to the dl_by_time list so we know it was modified when we
are iterating through it.

------------------------------------------------------------------------
r1452 | rmanfredi | 2002-08-24 09:58:09 -0400 (Sat, 24 Aug 2002) | 2 lines

Fixed style issues.

------------------------------------------------------------------------
r1451 | rmanfredi | 2002-08-23 17:07:26 -0400 (Fri, 23 Aug 2002) | 2 lines

Added Vidar Madsen.

------------------------------------------------------------------------
r1450 | rmanfredi | 2002-08-23 16:55:26 -0400 (Fri, 23 Aug 2002) | 2 lines

Version of 23/08/2002.

------------------------------------------------------------------------
r1449 | rmanfredi | 2002-08-23 16:54:18 -0400 (Fri, 23 Aug 2002) | 2 lines

Fixed misparsing of header fields: allow spaces before the ':' separator.

------------------------------------------------------------------------
r1448 | rmanfredi | 2002-08-23 16:52:37 -0400 (Fri, 23 Aug 2002) | 2 lines

Dump handshaking header we got sofar on stderr in case of problems.

------------------------------------------------------------------------
r1447 | rmanfredi | 2002-08-23 16:50:53 -0400 (Fri, 23 Aug 2002) | 3 lines

Properly reparent all downloads after a file_info_recreate() call which
creates a new fileinfo structure to supersede the old one.

------------------------------------------------------------------------
r1446 | vidar | 2002-08-23 05:40:55 -0400 (Fri, 23 Aug 2002) | 2 lines

Added a missing status reset in search.c, which should fix the wrongly set Push flags.

------------------------------------------------------------------------
r1445 | vidar | 2002-08-23 05:40:30 -0400 (Fri, 23 Aug 2002) | 2 lines

Updated

------------------------------------------------------------------------
r1444 | vidar | 2002-08-22 19:24:47 -0400 (Thu, 22 Aug 2002) | 3 lines

Optimized file_info matching by storing the pointer and
sending it to create_download() directly, if available.

------------------------------------------------------------------------
r1443 | vidar | 2002-08-22 15:46:44 -0400 (Thu, 22 Aug 2002) | 2 lines

Minor fixes, added missing hash insertions.

------------------------------------------------------------------------
r1442 | rmanfredi | 2002-08-22 15:14:53 -0400 (Thu, 22 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1441 | rmanfredi | 2002-08-22 14:58:19 -0400 (Thu, 22 Aug 2002) | 3 lines

Doubled allowed max line size and header sizes because too many broken
servents don't use header continuations yet, although it's a standard!

------------------------------------------------------------------------
r1440 | vidar | 2002-08-22 14:57:29 -0400 (Thu, 22 Aug 2002) | 2 lines

Fixed Search Monitor to display urn:sha1-queries properly.

------------------------------------------------------------------------
r1439 | vidar | 2002-08-22 14:56:41 -0400 (Thu, 22 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1438 | rmanfredi | 2002-08-22 14:55:50 -0400 (Thu, 22 Aug 2002) | 2 lines

Detect disconnection from Internet sooner: 150 seconds instead of 300.

------------------------------------------------------------------------
r1437 | rmanfredi | 2002-08-22 14:53:47 -0400 (Thu, 22 Aug 2002) | 3 lines

Refactored scheduling of chunk ranges, and re-enabled checks for completed
file in the "done" directory when swarming.

------------------------------------------------------------------------
r1436 | vidar | 2002-08-22 13:50:27 -0400 (Thu, 22 Aug 2002) | 2 lines

Changed fileinfo.c to use hashes instead of a linked list.

------------------------------------------------------------------------
r1435 | vidar | 2002-08-22 13:49:10 -0400 (Thu, 22 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1434 | vidar | 2002-08-22 12:44:59 -0400 (Thu, 22 Aug 2002) | 2 lines

Made manual node 'Add'ing accept a ":port" suffix

------------------------------------------------------------------------
r1433 | vidar | 2002-08-22 12:44:18 -0400 (Thu, 22 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1432 | wyldfire | 2002-08-21 10:48:04 -0400 (Wed, 21 Aug 2002) | 3 lines


* Never try to give a window a width or height of 0.

------------------------------------------------------------------------
r1431 | rmanfredi | 2002-08-20 17:15:42 -0400 (Tue, 20 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1430 | rmanfredi | 2002-08-20 17:06:18 -0400 (Tue, 20 Aug 2002) | 2 lines

First step towards a Developer's Guide.

------------------------------------------------------------------------
r1429 | rmanfredi | 2002-08-20 17:05:21 -0400 (Tue, 20 Aug 2002) | 2 lines

Moved to doc/devguide/ as GUI-hacking.

------------------------------------------------------------------------
r1428 | rmanfredi | 2002-08-20 16:29:02 -0400 (Tue, 20 Aug 2002) | 3 lines

Stopped downloads now get requeued immediately and no longer lag in the
upper pane.

------------------------------------------------------------------------
r1427 | rmanfredi | 2002-08-20 13:35:16 -0400 (Tue, 20 Aug 2002) | 3 lines

Integrated Christophe Tronche's patch to schedule alternative sources
from the download mesh.

------------------------------------------------------------------------
r1426 | wyldfire | 2002-08-20 10:39:08 -0400 (Tue, 20 Aug 2002) | 4 lines


* Renamed PROP_SEARCH_PICK_ALL to PROP_SEARCH_AUTOSELECT
* Fixed up loose ends after adding fuzzy match to search pane.

------------------------------------------------------------------------
r1425 | vidar | 2002-08-20 10:06:58 -0400 (Tue, 20 Aug 2002) | 2 lines

Added fuzzy autoselection in the Search pane.

------------------------------------------------------------------------
r1424 | vidar | 2002-08-20 10:06:25 -0400 (Tue, 20 Aug 2002) | 2 lines

Updated

------------------------------------------------------------------------
r1423 | wyldfire | 2002-08-20 09:18:07 -0400 (Tue, 20 Aug 2002) | 3 lines


* Added property: search_autoselect_fuzzy

------------------------------------------------------------------------
r1422 | rmanfredi | 2002-08-19 16:26:51 -0400 (Mon, 19 Aug 2002) | 2 lines

Removed spurious printf() statement.

------------------------------------------------------------------------
r1421 | rmanfredi | 2002-08-19 14:42:40 -0400 (Mon, 19 Aug 2002) | 2 lines

All bytes of message GUID are now random: removed internal message counter.

------------------------------------------------------------------------
r1420 | rmanfredi | 2002-08-19 14:41:17 -0400 (Mon, 19 Aug 2002) | 2 lines

Use SHA1 to create a decent random seed, portably (no use of /dev/urandom).

------------------------------------------------------------------------
r1419 | rmanfredi | 2002-08-19 14:38:49 -0400 (Mon, 19 Aug 2002) | 2 lines

Suppress warning about "truncated fileinfo" when file was empty.

------------------------------------------------------------------------
r1418 | wyldfire | 2002-08-19 10:15:06 -0400 (Mon, 19 Aug 2002) | 4 lines


* Added possibility to show/hide settings on search results pane.
* Removed swarming notice from config pane.

------------------------------------------------------------------------
r1417 | wyldfire | 2002-08-19 10:10:48 -0400 (Mon, 19 Aug 2002) | 3 lines


* Added possibility to hide/show settings in search results pane.

------------------------------------------------------------------------
r1416 | wyldfire | 2002-08-19 10:08:58 -0400 (Mon, 19 Aug 2002) | 3 lines


* Restore main window size and position on startup.

------------------------------------------------------------------------
r1415 | rmanfredi | 2002-08-18 16:52:59 -0400 (Sun, 18 Aug 2002) | 2 lines

Fixed macro indentation.

------------------------------------------------------------------------
r1414 | rmanfredi | 2002-08-18 14:50:19 -0400 (Sun, 18 Aug 2002) | 3 lines

No need to flush fileinfo trailer when resetting chunk states for downloads
that are moved back to the queue.

------------------------------------------------------------------------
r1413 | rmanfredi | 2002-08-18 14:47:29 -0400 (Sun, 18 Aug 2002) | 2 lines

Forgot to dispose of file_info structure during final download shutdown.

------------------------------------------------------------------------
r1412 | rmanfredi | 2002-08-18 14:41:35 -0400 (Sun, 18 Aug 2002) | 2 lines

Fixed stupid typo in atoms that caused final memory fault.

------------------------------------------------------------------------
r1411 | rmanfredi | 2002-08-18 10:46:01 -0400 (Sun, 18 Aug 2002) | 2 lines

Added Zygo and Vidar.

------------------------------------------------------------------------
r1410 | rmanfredi | 2002-08-18 10:44:12 -0400 (Sun, 18 Aug 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1409 | rmanfredi | 2002-08-18 10:42:55 -0400 (Sun, 18 Aug 2002) | 3 lines

When comparing filesizes for auto-downloads, account for the possible
swarming trailer within the "download" directory.

------------------------------------------------------------------------
r1408 | rmanfredi | 2002-08-18 09:41:58 -0400 (Sun, 18 Aug 2002) | 2 lines

Query hit parsing now resets Push flag on servers known to wrongly set it.

------------------------------------------------------------------------
r1407 | rmanfredi | 2002-08-18 06:48:11 -0400 (Sun, 18 Aug 2002) | 2 lines

Version of 18/08/2002.

------------------------------------------------------------------------
r1406 | rmanfredi | 2002-08-18 06:46:11 -0400 (Sun, 18 Aug 2002) | 2 lines

Stop scheduling downloads when we detect we're no longer connected.

------------------------------------------------------------------------
r1405 | rmanfredi | 2002-08-18 05:13:55 -0400 (Sun, 18 Aug 2002) | 2 lines

Try to smartly ignore the Push flag and attempt direct connection.

------------------------------------------------------------------------
r1404 | rmanfredi | 2002-08-18 05:12:24 -0400 (Sun, 18 Aug 2002) | 3 lines

Try to smartly ignore the Push flag and attempt direct connection.
Fixed the crash when aborting a stopped download.

------------------------------------------------------------------------
r1403 | rmanfredi | 2002-08-18 05:10:11 -0400 (Sun, 18 Aug 2002) | 3 lines

Only sync metainfo to files every 10 seconds or so, not at every write.
Added duplicate detection and eviction in fileinfo retrieval.

------------------------------------------------------------------------
r1402 | rmanfredi | 2002-08-18 05:07:30 -0400 (Sun, 18 Aug 2002) | 2 lines

Defer disposal of vendor string in nodes for GUI display.

------------------------------------------------------------------------
r1401 | wyldfire | 2002-08-17 18:17:42 -0400 (Sat, 17 Aug 2002) | 4 lines


* Updated offline.xpm and online.xp
* Updated offline.xpm and online.xpm

------------------------------------------------------------------------
r1400 | wyldfire | 2002-08-17 18:17:09 -0400 (Sat, 17 Aug 2002) | 3 lines


* Fixed GUI bug in bandwidth settings.

------------------------------------------------------------------------
r1399 | rmanfredi | 2002-08-17 13:24:59 -0400 (Sat, 17 Aug 2002) | 3 lines

Fixed indentation, and a small off-by-one error I introduced due to my
lack of understanding of Vidar's code.

------------------------------------------------------------------------
r1398 | rmanfredi | 2002-08-17 13:20:34 -0400 (Sat, 17 Aug 2002) | 2 lines

Fixed comments, reflecting my understanding.

------------------------------------------------------------------------
r1397 | rmanfredi | 2002-08-17 13:19:26 -0400 (Sat, 17 Aug 2002) | 2 lines

Obsoleted by new property system.

------------------------------------------------------------------------
r1396 | rmanfredi | 2002-08-17 10:57:23 -0400 (Sat, 17 Aug 2002) | 2 lines

Missed declaration of file_info_init().

------------------------------------------------------------------------
r1395 | rmanfredi | 2002-08-17 10:03:22 -0400 (Sat, 17 Aug 2002) | 2 lines

Version of 17/08/2002.

------------------------------------------------------------------------
r1394 | rmanfredi | 2002-08-17 09:53:25 -0400 (Sat, 17 Aug 2002) | 2 lines

The `dbg' variable is now defined as a property.

------------------------------------------------------------------------
r1393 | rmanfredi | 2002-08-17 09:52:44 -0400 (Sat, 17 Aug 2002) | 2 lines

Ensure `search_table' is initialized early in the process.

------------------------------------------------------------------------
r1392 | rmanfredi | 2002-08-17 09:51:55 -0400 (Sat, 17 Aug 2002) | 2 lines

Integrated swarming patch from Vidar Madsen.

------------------------------------------------------------------------
r1391 | rmanfredi | 2002-08-16 14:33:52 -0400 (Fri, 16 Aug 2002) | 2 lines

Superseded by the new property system.

------------------------------------------------------------------------
r1390 | wyldfire | 2002-08-15 11:45:45 -0400 (Thu, 15 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1389 | wyldfire | 2002-08-15 11:45:33 -0400 (Thu, 15 Aug 2002) | 6 lines


* Added icons for "online" and "offline" state to the statusbar
  (icons taken from Evolution)
* PROP_MIN_DUP_RATIO is now ranged from 0-10000 (meaning 0.00 to
  100.00) and shown as 0.00-100.00 in the gui.

------------------------------------------------------------------------
r1388 | wyldfire | 2002-08-15 11:43:42 -0400 (Thu, 15 Aug 2002) | 4 lines


* Moved gtk_main from main() to main_gui_run() along with some more GUI
  init code.

------------------------------------------------------------------------
r1387 | wyldfire | 2002-08-15 11:41:41 -0400 (Thu, 15 Aug 2002) | 6 lines


 * Added update_window_geometry default callback to settings_gui.c
 * Reordered settings_gui.c and updated comments.
 * Added icons for "online" and "offline" state to the statusbar
 (icons taken from Evolution)

------------------------------------------------------------------------
r1386 | wyldfire | 2002-08-15 11:38:20 -0400 (Thu, 15 Aug 2002) | 5 lines


* Default to PROP_IS_INET_CONNECTED = TRUE
* PROP_MIN_DUP_RATIO is now ranged from 0-10000 (meaning 0.00 to
  100.00) and shown as 0.00-100.00 in the gui.

------------------------------------------------------------------------
r1385 | wyldfire | 2002-08-15 11:34:58 -0400 (Thu, 15 Aug 2002) | 3 lines


* PROP_MIN_DUP_RATIO is now ranged from 0-10000 (meaning 0.00 to                  100.00) and shown as 0.00-100.00 in the gui.

------------------------------------------------------------------------
r1384 | wyldfire | 2002-08-15 10:50:01 -0400 (Thu, 15 Aug 2002) | 3 lines


* Added online.xpm and offline.xpm from Evolution

------------------------------------------------------------------------
r1383 | rmanfredi | 2002-08-15 10:03:55 -0400 (Thu, 15 Aug 2002) | 3 lines

Re-organized firewall detection code, and added Internet connection
monitoring.

------------------------------------------------------------------------
r1382 | wyldfire | 2002-08-14 19:07:17 -0400 (Wed, 14 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1381 | wyldfire | 2002-08-14 19:00:43 -0400 (Wed, 14 Aug 2002) | 3 lines


* Removed reference to gui_update_is_firewalled.

------------------------------------------------------------------------
r1380 | wyldfire | 2002-08-14 18:55:14 -0400 (Wed, 14 Aug 2002) | 5 lines


* Check value of PROP_NODE_SENDQUEUE_SIZE when PROP_NODE_SENDQUEUE_SIZE,
  PROP_SEARCH_QUERIES_KICK_SIZE or PROP_SEARCH_ANSWERS_KICK_SIZE are
  changed and adjust when needed.

------------------------------------------------------------------------
r1379 | wyldfire | 2002-08-14 18:54:47 -0400 (Wed, 14 Aug 2002) | 4 lines


* Ignore incomplete number-vector config lines when reading in
  legacy config file.

------------------------------------------------------------------------
r1378 | wyldfire | 2002-08-14 18:54:15 -0400 (Wed, 14 Aug 2002) | 4 lines


* Set default min/max values (0x0000000/0xFFFFFFFF) for guint32
  properties when not specified in .ag file.

------------------------------------------------------------------------
r1377 | wyldfire | 2002-08-14 18:52:13 -0400 (Wed, 14 Aug 2002) | 4 lines


* Fixed default listen port (typo)
* Don't display "no new version" in the statusbar all the time.

------------------------------------------------------------------------
r1376 | wyldfire | 2002-08-14 18:49:44 -0400 (Wed, 14 Aug 2002) | 3 lines


* Mapped more properties.

------------------------------------------------------------------------
r1375 | wyldfire | 2002-08-14 18:42:24 -0400 (Wed, 14 Aug 2002) | 3 lines


* Support NULL as default value of string properties.

------------------------------------------------------------------------
r1374 | rmanfredi | 2002-08-14 18:27:59 -0400 (Wed, 14 Aug 2002) | 2 lines

The "is_firewalled" flag is now handled by the property system.

------------------------------------------------------------------------
r1373 | wyldfire | 2002-08-14 17:55:16 -0400 (Wed, 14 Aug 2002) | 3 lines


Initial version.

------------------------------------------------------------------------
r1372 | rmanfredi | 2002-08-14 17:47:18 -0400 (Wed, 14 Aug 2002) | 2 lines

Listening socket now initialized in listen_port_changed() callback.

------------------------------------------------------------------------
r1371 | rmanfredi | 2002-08-14 17:31:58 -0400 (Wed, 14 Aug 2002) | 2 lines

Changed.

------------------------------------------------------------------------
r1370 | rmanfredi | 2002-08-14 17:31:22 -0400 (Wed, 14 Aug 2002) | 2 lines

When listening port changes, move back to firewalled state (fixes bug #594477).

------------------------------------------------------------------------
r1369 | rmanfredi | 2002-08-14 17:29:37 -0400 (Wed, 14 Aug 2002) | 3 lines

Send them back a "501 Method not implemented" if we can't figure out
what they send and we see the string HTTP somewhere.

------------------------------------------------------------------------
r1368 | wyldfire | 2002-08-14 08:57:57 -0400 (Wed, 14 Aug 2002) | 3 lines


* Mapped more properties.

------------------------------------------------------------------------
r1367 | wyldfire | 2002-08-14 08:57:22 -0400 (Wed, 14 Aug 2002) | 3 lines


* Fixed bug: changes to bandwidth settings have no effect.

------------------------------------------------------------------------
r1366 | wyldfire | 2002-08-14 08:55:31 -0400 (Wed, 14 Aug 2002) | 4 lines


* bandwidth stats mode (normal/avg) toggle callbacks now compatible with
  property system.

------------------------------------------------------------------------
r1365 | wyldfire | 2002-08-14 08:54:11 -0400 (Wed, 14 Aug 2002) | 3 lines


* More properties configurable from GUI (debug levels, stop_host_get)

------------------------------------------------------------------------
r1364 | wyldfire | 2002-08-14 08:50:22 -0400 (Wed, 14 Aug 2002) | 4 lines


* Makefile target to generate sources from the glade file is now
  glade_files in both Makefiles.

------------------------------------------------------------------------
r1363 | wyldfire | 2002-08-13 20:50:36 -0400 (Tue, 13 Aug 2002) | 4 lines


* Close filter dialog in main_gui_shutdown to have a clean shutdown even
  when the dialog is still open.

------------------------------------------------------------------------
r1362 | wyldfire | 2002-08-13 20:42:20 -0400 (Tue, 13 Aug 2002) | 4 lines


* Special handling for PROP_SEND_PUSHES which is display in reverse logic
  in the GUI

------------------------------------------------------------------------
r1361 | wyldfire | 2002-08-13 20:20:23 -0400 (Tue, 13 Aug 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1360 | wyldfire | 2002-08-13 20:13:43 -0400 (Tue, 13 Aug 2002) | 3 lines


* Added properties for swarming.

------------------------------------------------------------------------
r1359 | wyldfire | 2002-08-13 20:12:41 -0400 (Tue, 13 Aug 2002) | 4 lines


* Always update vendor and protocol information when node information
  changes.

------------------------------------------------------------------------
r1358 | wyldfire | 2002-08-13 20:12:05 -0400 (Tue, 13 Aug 2002) | 3 lines


* Removed gui_update_config_force_ip. Superseded by property system.

------------------------------------------------------------------------
r1357 | wyldfire | 2002-08-13 20:09:40 -0400 (Tue, 13 Aug 2002) | 5 lines


* Generically handle GtkToggleButton<->property bindings now. Moved most
  control code to the property-change listeners in settings_gui.c and remove
  callbacks from settings_cb.c, callbacks.c and gtk-gnutella.glade.

------------------------------------------------------------------------
r1356 | wyldfire | 2002-08-13 19:56:18 -0400 (Tue, 13 Aug 2002) | 4 lines


* Vendor and protocol are now always updated then the node information
  changes.

------------------------------------------------------------------------
r1355 | wyldfire | 2002-08-13 13:00:09 -0400 (Tue, 13 Aug 2002) | 4 lines


* Fixed bug which caused the bounds of the bandwidth limitation
  spinbuttons to be set incorrectly.

------------------------------------------------------------------------
r1354 | wyldfire | 2002-08-13 12:23:39 -0400 (Tue, 13 Aug 2002) | 3 lines


* Turned off debugging messages.

------------------------------------------------------------------------
r1353 | wyldfire | 2002-08-13 12:23:08 -0400 (Tue, 13 Aug 2002) | 3 lines


* Append new listeners instead of prepending them.

------------------------------------------------------------------------
r1352 | wyldfire | 2002-08-13 12:22:09 -0400 (Tue, 13 Aug 2002) | 7 lines


* Removed all spinbutton callbacks which modify a property from settings_cb
  and from the glade file and add callbacks for them manually in
  settings_config_widget(). All call a common callback function which makes
  use of the property map in settings_gui. Some special cases are filtered
  out in this common callback function (spinbutton_adjustment_value_changed).cd

------------------------------------------------------------------------
r1351 | wyldfire | 2002-08-13 12:15:46 -0400 (Tue, 13 Aug 2002) | 4 lines


* Adjusted minimum and default values for all bandwitdh properties to
  1024.

------------------------------------------------------------------------
r1350 | wyldfire | 2002-08-13 12:13:41 -0400 (Tue, 13 Aug 2002) | 4 lines


* Removed "changed" callbacks from all spinbuttons that are associated with
  a property.

------------------------------------------------------------------------
r1349 | wyldfire | 2002-08-13 12:12:17 -0400 (Tue, 13 Aug 2002) | 4 lines


* Remove "changed" callback from all spinbuttons which are associated with
  a property.

------------------------------------------------------------------------
r1348 | wyldfire | 2002-08-13 07:49:21 -0400 (Tue, 13 Aug 2002) | 4 lines


* If possible display vendor already when the node is added and don't wait
  for a signal from the core.

------------------------------------------------------------------------
r1347 | wyldfire | 2002-08-13 07:28:10 -0400 (Tue, 13 Aug 2002) | 3 lines


* Fixed bug which cause the bandwidth settings to be always out of bounds.

------------------------------------------------------------------------
r1346 | wyldfire | 2002-08-13 07:27:36 -0400 (Tue, 13 Aug 2002) | 4 lines


* When bounds-checking on a guint32 property, not only warn but also clamp
  value to smallest/largest value possible.

------------------------------------------------------------------------
r1345 | wyldfire | 2002-08-13 06:54:44 -0400 (Tue, 13 Aug 2002) | 4 lines


* Fixed bug that cause IP addresses not being properly parsed when
  loading the new config files.

------------------------------------------------------------------------
r1344 | wyldfire | 2002-08-13 05:49:25 -0400 (Tue, 13 Aug 2002) | 4 lines


* Some more modifications to make it work with the property system.
* Added some necessary includes.

------------------------------------------------------------------------
r1343 | wyldfire | 2002-08-13 05:35:38 -0400 (Tue, 13 Aug 2002) | 3 lines


no comment

------------------------------------------------------------------------
r1342 | wyldfire | 2002-08-13 05:33:54 -0400 (Tue, 13 Aug 2002) | 3 lines


* Small change to make it work with the property system.

------------------------------------------------------------------------
r1341 | wyldfire | 2002-08-13 05:33:18 -0400 (Tue, 13 Aug 2002) | 3 lines


* More GUI<->core separation.

------------------------------------------------------------------------
r1340 | wyldfire | 2002-08-13 05:26:18 -0400 (Tue, 13 Aug 2002) | 3 lines


* Introduced property system. A property can be monitored for changes.            They are defined in the gui_props.ag and gnet_props.ag files. From those        the actual C sources are generated with autoconf. Properties can be             persistent and thus make the old config.c obsolete. oldconfig.c acts            as a legacy config loader. If none of the new config files are found,           it will read in the old config file and save to the new ones on exit.           The tooltips of widgets and (where applicable) the bounds of values             enterd into the widgets are also read from the property definitions.          * Creating a separation layer between GUI and core. The property system is        part of this. gnet.h contains the core API and common definitions.

------------------------------------------------------------------------
r1339 | wyldfire | 2002-08-13 05:20:16 -0400 (Tue, 13 Aug 2002) | 5 lines


* Added a gtk_spin_button_get_value call for Gtk1 to fetch the value of
  a spinbutton as double instead of float.
* Added clist_collect_data.

------------------------------------------------------------------------
r1338 | wyldfire | 2002-08-13 05:15:55 -0400 (Tue, 13 Aug 2002) | 3 lines


* More GUI<->core separation.

------------------------------------------------------------------------
r1337 | wyldfire | 2002-08-13 05:12:45 -0400 (Tue, 13 Aug 2002) | 4 lines


* Updated to new propery system.
* Added legacy config file loading.

------------------------------------------------------------------------
r1336 | wyldfire | 2002-08-13 05:11:59 -0400 (Tue, 13 Aug 2002) | 4 lines


* Renamed calls to create new searches.
* Beginnings of GUI<->Core separation (not tested or used)

------------------------------------------------------------------------
r1335 | wyldfire | 2002-08-13 05:10:11 -0400 (Tue, 13 Aug 2002) | 5 lines


* Various small changes to make it work with the property system.
* Added beginning callbacks for the search monitor to connect to
  (GUI<->core separation)

------------------------------------------------------------------------
r1334 | wyldfire | 2002-08-13 05:08:27 -0400 (Tue, 13 Aug 2002) | 3 lines


* Various small changes to make it work with the property system.

------------------------------------------------------------------------
r1333 | wyldfire | 2002-08-13 05:05:13 -0400 (Tue, 13 Aug 2002) | 4 lines


* Moved a lot of callback code from callbacks.[ch] to the various *_cb.[ch]
  files.

------------------------------------------------------------------------
r1332 | wyldfire | 2002-08-13 04:55:32 -0400 (Tue, 13 Aug 2002) | 4 lines


* Renamed PROP_* to TAG_* to prevent name-clashes with the property system.
* Search reissue timeout is persistant for every search.

------------------------------------------------------------------------
r1331 | wyldfire | 2002-08-13 04:53:00 -0400 (Tue, 13 Aug 2002) | 4 lines


* Split nodes into GUI and core part. This is the core part. All GUI code
  has been moved to nodes_gui.[ch] and nodes_cb.[ch].

------------------------------------------------------------------------
r1330 | wyldfire | 2002-08-13 04:51:48 -0400 (Tue, 13 Aug 2002) | 4 lines


* A few cosmetic changes.
* New predicate: is_string_ip()

------------------------------------------------------------------------
r1329 | wyldfire | 2002-08-13 04:50:27 -0400 (Tue, 13 Aug 2002) | 4 lines


* Removed already commented out extern definitions of the filter dialog
  widgets.

------------------------------------------------------------------------
r1328 | wyldfire | 2002-08-13 04:49:36 -0400 (Tue, 13 Aug 2002) | 4 lines


* Small changes to make it work with the property system.
* Switched to gtk_spin_button_get_value.

------------------------------------------------------------------------
r1327 | wyldfire | 2002-08-13 04:47:11 -0400 (Tue, 13 Aug 2002) | 3 lines


* Small changes to make it work with the property system.

------------------------------------------------------------------------
r1326 | wyldfire | 2002-08-13 04:45:48 -0400 (Tue, 13 Aug 2002) | 3 lines


* Moved public definitions to gnet.h

------------------------------------------------------------------------
r1325 | wyldfire | 2002-08-13 04:43:09 -0400 (Tue, 13 Aug 2002) | 3 lines


* Introduced property system. A property can be monitored for changes.            They are defined in the gui_props.ag and gnet_props.ag files. From those        the actual C sources are generated with autoconf. Properties can be             persistent and thus make the old config.c obsolete. oldconfig.c acts            as a legacy config loader. If none of the new config files are found,           it will read in the old config file and save to the new ones on exit.           The tooltips of widgets and (where applicable) the bounds of values             enterd into the widgets are also read from the property definitions.          * Creating a separation layer between GUI and core. The property system is        part of this.

------------------------------------------------------------------------
r1324 | wyldfire | 2002-08-13 04:35:27 -0400 (Tue, 13 Aug 2002) | 4 lines


* Was once "config.c". Now most stuff from config.c was moved to settings.c
  and this is only a legacy config file loader.

------------------------------------------------------------------------
r1323 | wyldfire | 2002-08-13 04:34:25 -0400 (Tue, 13 Aug 2002) | 3 lines


* Changed all GtkSpinbutton callbacks to react on the "changed" signal            instead of the "focus lost" and "activate" signals. (Closes #558906)          * Changed some more GtkEntries to GtkSpinbuttons                                * Added "Default reissue timeout" to gnet config pane

------------------------------------------------------------------------
r1322 | wyldfire | 2002-08-13 04:33:11 -0400 (Tue, 13 Aug 2002) | 3 lines


* Various small changes to make the file work the the new property system.

------------------------------------------------------------------------
r1321 | wyldfire | 2002-08-13 04:24:57 -0400 (Tue, 13 Aug 2002) | 3 lines


* GUI code responsible for the Gtk-gnutella statusbar.

------------------------------------------------------------------------
r1320 | wyldfire | 2002-08-13 04:24:21 -0400 (Tue, 13 Aug 2002) | 4 lines


* GUI part of the nodes. Here are widget callbacks and code that reacts
  on events from the core.

------------------------------------------------------------------------
r1319 | wyldfire | 2002-08-13 04:22:33 -0400 (Tue, 13 Aug 2002) | 3 lines


* Recoded a lot of the update calls from gui.c which were responsible             of updating the GUI when a config variable was changed. This is done            via callbacks by the property system now. Moved most of the property-           change callbacks to settings_gui.c.                                           * Moved other calls which update the GUI when something in the core has           changes from gui.c to nodes_gui.c, search_gui.c or statusbar_gui.c.

------------------------------------------------------------------------
r1318 | wyldfire | 2002-08-13 04:16:10 -0400 (Tue, 13 Aug 2002) | 3 lines


* Changed all GtkSpinbutton callbacks to react on the "changed" signal            instead of the "focus lost" and "activate" signals. (Closes #558906)          * Changed some more GtkEntries to GtkSpinbuttons                                * Added "Default reissue timeout" to gnet config pane

------------------------------------------------------------------------
r1317 | wyldfire | 2002-08-13 04:14:44 -0400 (Tue, 13 Aug 2002) | 2 lines

Added 'properties' target to Makefiles

------------------------------------------------------------------------
r1316 | rmanfredi | 2002-08-13 02:21:55 -0400 (Tue, 13 Aug 2002) | 2 lines

First version.

------------------------------------------------------------------------
r1315 | rmanfredi | 2002-08-12 01:53:56 -0400 (Mon, 12 Aug 2002) | 2 lines

Synchronized with the advertised GDF version.

------------------------------------------------------------------------
r1314 | rmanfredi | 2002-08-11 14:31:45 -0400 (Sun, 11 Aug 2002) | 2 lines

Version of 11/08/2002.

------------------------------------------------------------------------
r1313 | rmanfredi | 2002-08-11 14:31:04 -0400 (Sun, 11 Aug 2002) | 2 lines

Regenerated.

------------------------------------------------------------------------
r1312 | rmanfredi | 2002-08-11 14:29:50 -0400 (Sun, 11 Aug 2002) | 2 lines

HTTP server now at the 1.1 level, supporting persistent connections.

------------------------------------------------------------------------
r1311 | rmanfredi | 2002-08-11 14:28:02 -0400 (Sun, 11 Aug 2002) | 2 lines

Renamed socket_monitor_incoming() as socket_timer().

------------------------------------------------------------------------
r1310 | rmanfredi | 2002-08-11 14:26:41 -0400 (Sun, 11 Aug 2002) | 2 lines

We know that gtk-gnutella hosts support /uri-res if they returned HUGE data.

------------------------------------------------------------------------
r1309 | rmanfredi | 2002-08-10 07:30:24 -0400 (Sat, 10 Aug 2002) | 2 lines

Added RCS Id expansion.

------------------------------------------------------------------------
r1308 | rmanfredi | 2002-08-10 07:28:26 -0400 (Sat, 10 Aug 2002) | 2 lines

Fixed display of servent ID in the Info column, vectorized flags procesing.

------------------------------------------------------------------------
r1307 | rmanfredi | 2002-08-10 07:26:16 -0400 (Sat, 10 Aug 2002) | 2 lines

Fixed display of hosts in cache (fixes bug #585830).

------------------------------------------------------------------------
r1306 | rmanfredi | 2002-08-10 07:11:40 -0400 (Sat, 10 Aug 2002) | 2 lines

Added RCS Id expansion.

------------------------------------------------------------------------
r1305 | rmanfredi | 2002-08-10 07:03:53 -0400 (Sat, 10 Aug 2002) | 2 lines

Created.

------------------------------------------------------------------------
r1304 | rmanfredi | 2002-08-09 10:07:02 -0400 (Fri, 09 Aug 2002) | 4 lines

When closing node connection, don't log EOF as a failure: stick to the
original BYE condition.
All protocol exchanges now logged at dbg=3.

------------------------------------------------------------------------
r1303 | rmanfredi | 2002-08-09 10:04:40 -0400 (Fri, 09 Aug 2002) | 2 lines

All protocol exchanges now logged at dbg=3.

------------------------------------------------------------------------
r1302 | rmanfredi | 2002-08-09 10:03:27 -0400 (Fri, 09 Aug 2002) | 3 lines

Forgot to update filename counters when server replied with 301.
All protocol exchanges now logged at dbg=3.

------------------------------------------------------------------------
r1301 | rmanfredi | 2002-07-27 14:24:55 -0400 (Sat, 27 Jul 2002) | 2 lines

Finished writing download_redirect_to_server().

------------------------------------------------------------------------
r1300 | rmanfredi | 2002-07-13 04:33:20 -0400 (Sat, 13 Jul 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1299 | rmanfredi | 2002-07-13 04:32:44 -0400 (Sat, 13 Jul 2002) | 4 lines

Now also triggers "Nothing more to get" when the file to download
is smaller or equal than something we have in the "done" dir,
preventing eclosion of .01, .02 files...

------------------------------------------------------------------------
r1298 | rmanfredi | 2002-07-12 18:23:42 -0400 (Fri, 12 Jul 2002) | 3 lines

Forgot to initialize GUID to NULL in results_set when switching to
the new zone allocator (fixes bug #580817).

------------------------------------------------------------------------
r1297 | rmanfredi | 2002-07-11 16:48:55 -0400 (Thu, 11 Jul 2002) | 2 lines

Version of 11/07/2002.

------------------------------------------------------------------------
r1296 | rmanfredi | 2002-07-11 16:47:16 -0400 (Thu, 11 Jul 2002) | 2 lines

Remove assert in gmsg_cmp(), a routine called many times!

------------------------------------------------------------------------
r1295 | rmanfredi | 2002-07-11 16:46:22 -0400 (Thu, 11 Jul 2002) | 3 lines

Optimized pattern matching and searches further.
Switched to zone allocator.

------------------------------------------------------------------------
r1294 | rmanfredi | 2002-07-11 16:45:26 -0400 (Thu, 11 Jul 2002) | 2 lines

Plugged new zone allocators in.

------------------------------------------------------------------------
r1293 | rmanfredi | 2002-07-11 16:44:54 -0400 (Thu, 11 Jul 2002) | 2 lines

Refactored download scheduling queue for scalability.

------------------------------------------------------------------------
r1292 | rmanfredi | 2002-07-11 16:41:55 -0400 (Thu, 11 Jul 2002) | 2 lines

Forgot to send "Content-Range: bytes */size" on HTTP 416 errors.

------------------------------------------------------------------------
r1291 | rmanfredi | 2002-07-11 16:38:34 -0400 (Thu, 11 Jul 2002) | 2 lines

Added zone allocators.

------------------------------------------------------------------------
r1286 | wyldfire | 2002-07-11 06:18:21 -0400 (Thu, 11 Jul 2002) | 2 lines

* Fixed 'widget not found: popup_nodes_remove' warning

------------------------------------------------------------------------
r1285 | wyldfire | 2002-07-11 06:16:59 -0400 (Thu, 11 Jul 2002) | 2 lines

* Fixed segfault when creating IP rule and fixed some widget names

------------------------------------------------------------------------
r1284 | wyldfire | 2002-07-10 08:47:50 -0400 (Wed, 10 Jul 2002) | 2 lines

* Fixed two serious typos

------------------------------------------------------------------------
r1281 | wyldfire | 2002-07-09 16:12:06 -0400 (Tue, 09 Jul 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1280 | wyldfire | 2002-07-09 15:56:43 -0400 (Tue, 09 Jul 2002) | 2 lines

* Call share_gui_enable_monitor to support clist_monitor _and_ treeview_monitor

------------------------------------------------------------------------
r1279 | wyldfire | 2002-07-09 15:54:37 -0400 (Tue, 09 Jul 2002) | 2 lines

* Optimized refresh of download_queue

------------------------------------------------------------------------
r1278 | wyldfire | 2002-07-09 15:54:01 -0400 (Tue, 09 Jul 2002) | 2 lines

* Moved initialization of clist_monitor to share_gui_init()

------------------------------------------------------------------------
r1277 | wyldfire | 2002-07-09 15:49:29 -0400 (Tue, 09 Jul 2002) | 2 lines

* Have share_gui.c and share_gui2.c now.

------------------------------------------------------------------------
r1276 | wyldfire | 2002-07-09 15:45:32 -0400 (Tue, 09 Jul 2002) | 2 lines

* Added call to share_gui_init()

------------------------------------------------------------------------
r1275 | wyldfire | 2002-07-09 15:44:59 -0400 (Tue, 09 Jul 2002) | 3 lines


* Replaced the monitor CList with a TreeView from Gtk to see how it performs.

------------------------------------------------------------------------
r1274 | wyldfire | 2002-07-09 15:39:32 -0400 (Tue, 09 Jul 2002) | 4 lines


* Have two versions of share_gui (API compatible), one for Gtk1 using
  a GtkCList and one for Gtk2 using a GtkTreeView

------------------------------------------------------------------------
r1273 | wyldfire | 2002-07-09 09:48:13 -0400 (Tue, 09 Jul 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1272 | wyldfire | 2002-07-09 09:26:59 -0400 (Tue, 09 Jul 2002) | 2 lines

* Added missing new _gui files to src/Makefile.am

------------------------------------------------------------------------
r1271 | wyldfire | 2002-07-09 09:24:26 -0400 (Tue, 09 Jul 2002) | 2 lines

* Prepare of splitting gui code from backend code

------------------------------------------------------------------------
r1270 | wyldfire | 2002-07-09 09:20:17 -0400 (Tue, 09 Jul 2002) | 2 lines

* Have two glade files now. One for Gtk1.2 and one for Gtk2

------------------------------------------------------------------------
r1269 | wyldfire | 2002-07-09 09:15:11 -0400 (Tue, 09 Jul 2002) | 2 lines

* Made compileable with Gtk2

------------------------------------------------------------------------
r1266 | rmanfredi | 2002-07-08 10:50:06 -0400 (Mon, 08 Jul 2002) | 3 lines

Installed workaround for the reception of SIGPIPE on broken systems,
despite explicit SIG_IGN action (fixes bug #578151).

------------------------------------------------------------------------
r1265 | rmanfredi | 2002-07-07 16:32:21 -0400 (Sun, 07 Jul 2002) | 2 lines

Opening the 0.91 unstable version...

------------------------------------------------------------------------
r1263 | rmanfredi | 2002-07-07 13:59:52 -0400 (Sun, 07 Jul 2002) | 2 lines

Version 0.90 stable -- 07/07/2002.

------------------------------------------------------------------------
r1262 | rmanfredi | 2002-07-07 13:59:01 -0400 (Sun, 07 Jul 2002) | 2 lines

Updated for 0.90 stable.

------------------------------------------------------------------------
r1261 | rmanfredi | 2002-07-07 13:45:32 -0400 (Sun, 07 Jul 2002) | 2 lines

Signals that this is outdated.

------------------------------------------------------------------------
r1260 | rmanfredi | 2002-07-07 13:28:06 -0400 (Sun, 07 Jul 2002) | 3 lines

Updated, removing obsolete config variables.  Most configuration variables
can now be set from the GUI.  Still, this manpage is incomplete.

------------------------------------------------------------------------
r1259 | rmanfredi | 2002-07-07 04:29:11 -0400 (Sun, 07 Jul 2002) | 2 lines

Raised limit for requeries from 300 to 600 seconds.

------------------------------------------------------------------------
r1258 | rmanfredi | 2002-07-07 03:19:03 -0400 (Sun, 07 Jul 2002) | 2 lines

Version of 06/07/2002.

------------------------------------------------------------------------
r1257 | rmanfredi | 2002-07-07 03:18:18 -0400 (Sun, 07 Jul 2002) | 2 lines

Default TX flow-control timeout of 300 was too much: reduced to 60.

------------------------------------------------------------------------
r1256 | rmanfredi | 2002-07-07 03:16:28 -0400 (Sun, 07 Jul 2002) | 2 lines

Protected more warnings to show only in debugging mode.

------------------------------------------------------------------------
r1255 | rmanfredi | 2002-07-06 07:05:34 -0400 (Sat, 06 Jul 2002) | 3 lines

When notifying for new versions, distinguish between releases and
development, and show their timestamps.

------------------------------------------------------------------------
r1254 | rmanfredi | 2002-07-06 07:04:20 -0400 (Sat, 06 Jul 2002) | 2 lines

Allocate only minimal amount of memory when simply validating query hits.

------------------------------------------------------------------------
r1253 | rmanfredi | 2002-07-06 07:02:17 -0400 (Sat, 06 Jul 2002) | 2 lines

Don't forbid connections to local host on different port.

------------------------------------------------------------------------
r1252 | rmanfredi | 2002-07-06 07:00:52 -0400 (Sat, 06 Jul 2002) | 2 lines

In case there are unfreed atoms at exit time, dump their values.

------------------------------------------------------------------------
r1251 | uid23183 | 2002-07-05 17:31:31 -0400 (Fri, 05 Jul 2002) | 2 lines

Version of 05/07/2002.

------------------------------------------------------------------------
r1250 | uid23183 | 2002-07-05 17:28:49 -0400 (Fri, 05 Jul 2002) | 2 lines

Adjusted sanity IP checks on query hits.

------------------------------------------------------------------------
r1249 | uid23183 | 2002-07-05 17:28:07 -0400 (Fri, 05 Jul 2002) | 2 lines

Plugged alive pings.

------------------------------------------------------------------------
r1248 | uid23183 | 2002-07-05 17:27:42 -0400 (Fri, 05 Jul 2002) | 5 lines

Will now send "connection" pongs during the first 5 minutes of startup,
even if it thinks it's firewalled, in the hope we'll get an incoming
connection.
Plugged alive pings.

------------------------------------------------------------------------
r1247 | uid23183 | 2002-07-05 17:23:52 -0400 (Fri, 05 Jul 2002) | 2 lines

Preserve status message when moving stopped downloads to the queue.

------------------------------------------------------------------------
r1246 | uid23183 | 2002-07-05 17:14:21 -0400 (Fri, 05 Jul 2002) | 2 lines

Added regular alive pings.

------------------------------------------------------------------------
r1245 | rmanfredi | 2002-07-04 15:41:27 -0400 (Thu, 04 Jul 2002) | 2 lines

Added node_bye_if_writable() to simplify code.

------------------------------------------------------------------------
r1244 | rmanfredi | 2002-07-04 15:11:14 -0400 (Thu, 04 Jul 2002) | 2 lines

Don't enter SHA1 filtering rules for records with no SHA1 [From Richard].

------------------------------------------------------------------------
r1243 | rmanfredi | 2002-07-04 15:06:58 -0400 (Thu, 04 Jul 2002) | 2 lines

host_init() was spuriously declaring pcache_init() in its body.

------------------------------------------------------------------------
r1242 | rmanfredi | 2002-07-04 14:59:32 -0400 (Thu, 04 Jul 2002) | 2 lines

Random cleanup: sanity checks in query hits and pongs, RX timeouts.

------------------------------------------------------------------------
r1241 | rmanfredi | 2002-07-03 15:55:23 -0400 (Wed, 03 Jul 2002) | 2 lines

Version of 03/07/2002.

------------------------------------------------------------------------
r1240 | rmanfredi | 2002-07-03 15:47:53 -0400 (Wed, 03 Jul 2002) | 2 lines

Added comment.

------------------------------------------------------------------------
r1239 | rmanfredi | 2002-07-03 15:44:56 -0400 (Wed, 03 Jul 2002) | 3 lines

Added pseudo-extension "--all--" which allows to share all files, whether
they have an extension or not [Debian patch from Zygo Blaxell].

------------------------------------------------------------------------
r1238 | rmanfredi | 2002-07-03 15:42:28 -0400 (Wed, 03 Jul 2002) | 3 lines

When getting an incoming connection, make sure it's not from localhost
(fixes bug #562127).

------------------------------------------------------------------------
r1237 | rmanfredi | 2002-07-03 15:41:36 -0400 (Wed, 03 Jul 2002) | 2 lines

New routine host_name().

------------------------------------------------------------------------
r1236 | rmanfredi | 2002-07-03 15:39:07 -0400 (Wed, 03 Jul 2002) | 2 lines

Don't enter ourselves in the pong/host caches.

------------------------------------------------------------------------
r1235 | rmanfredi | 2002-07-03 14:05:14 -0400 (Wed, 03 Jul 2002) | 12 lines

Fixes from Richard:
. Made the "filter enabled" state work with shadows.
. Filter rule count, rule list and enabled/disabled states should
  properly show after a apply/revert.
. Removed the notion of a "session" from the filter code. Now
  filters_current, filters_added and filters_removed are always
  expected to have valid content.
. Added missing "if (filter_dialog == NULL) return" to some callbacks.
. Try to reduce list updates in filter window to a minimum.
. Fixed some debug messages where refcount was shown wrong.
. Increased debug level on rule matching.

------------------------------------------------------------------------
r1234 | rmanfredi | 2002-07-03 14:01:33 -0400 (Wed, 03 Jul 2002) | 2 lines

Pressing [enter] in search results list will download the selected items.

------------------------------------------------------------------------
r1233 | rmanfredi | 2002-07-03 14:00:52 -0400 (Wed, 03 Jul 2002) | 3 lines

Gave search_xml access to the filters_current list to properly load
the saved filters.

------------------------------------------------------------------------
r1232 | rmanfredi | 2002-07-03 13:58:15 -0400 (Wed, 03 Jul 2002) | 6 lines

Fixes from Richard:
. Added "Apply" and "Revert" buttons to filter dialog.
. Try to preserve expansion state of nodes in the filter tree.
. Removed double meaning of "Ok" button in filter dialog and replaced
  that with the "Add/Replace" button in the rule editors.

------------------------------------------------------------------------
r1231 | rmanfredi | 2002-07-03 12:54:16 -0400 (Wed, 03 Jul 2002) | 2 lines

Remove freeze/thaw calls to node clists during update.

------------------------------------------------------------------------
r1230 | rmanfredi | 2002-07-03 12:52:05 -0400 (Wed, 03 Jul 2002) | 2 lines

Ignore XML payload size in QHD for Swapper.

------------------------------------------------------------------------
r1229 | rmanfredi | 2002-07-03 12:50:51 -0400 (Wed, 03 Jul 2002) | 2 lines

During shutdown, make sure we neither accept nor make Gnet connections.

------------------------------------------------------------------------
r1228 | rmanfredi | 2002-07-02 17:56:53 -0400 (Tue, 02 Jul 2002) | 2 lines

Added BYE 412, created by Jason Thomas.

------------------------------------------------------------------------
r1227 | rmanfredi | 2002-07-02 17:52:01 -0400 (Tue, 02 Jul 2002) | 2 lines

Avoid needless display flickering in search screens [From Richard].

------------------------------------------------------------------------
r1226 | rmanfredi | 2002-07-02 17:50:20 -0400 (Tue, 02 Jul 2002) | 3 lines

When "Nothing more to get" on downloads. remove all identical files from
the queue as well.

------------------------------------------------------------------------
r1225 | rmanfredi | 2002-07-02 17:49:18 -0400 (Tue, 02 Jul 2002) | 3 lines

When overriding upload slots, use recent bandwidth for computation, not
the average, or we'll override more often when the limit is raised.

------------------------------------------------------------------------
r1224 | rmanfredi | 2002-07-02 14:40:05 -0400 (Tue, 02 Jul 2002) | 2 lines

Typo minumum -> minimum in GUI.

------------------------------------------------------------------------
r1222 | rmanfredi | 2002-07-01 16:30:17 -0400 (Mon, 01 Jul 2002) | 2 lines

Version beta2, of 01/07/2002.

------------------------------------------------------------------------
r1221 | rmanfredi | 2002-07-01 15:59:13 -0400 (Mon, 01 Jul 2002) | 2 lines

When closing a search, remove pending messages from all the search queues.

------------------------------------------------------------------------
r1220 | rmanfredi | 2002-07-01 14:01:21 -0400 (Mon, 01 Jul 2002) | 2 lines

Optimized GUI update of node information, traversing list once only.

------------------------------------------------------------------------
r1219 | rmanfredi | 2002-07-01 13:56:24 -0400 (Mon, 01 Jul 2002) | 2 lines

Was wrongly stopping at GGEP magic byte when grabbing XML extension.

------------------------------------------------------------------------
r1218 | rmanfredi | 2002-07-01 13:50:01 -0400 (Mon, 01 Jul 2002) | 2 lines

Added configure check for mandatory zlib.

------------------------------------------------------------------------
r1217 | rmanfredi | 2002-06-30 17:04:50 -0400 (Sun, 30 Jun 2002) | 2 lines

Version of 30/06/2002.

------------------------------------------------------------------------
r1216 | rmanfredi | 2002-06-30 17:03:03 -0400 (Sun, 30 Jun 2002) | 2 lines

Added naming of the 0x31 messages in traces.

------------------------------------------------------------------------
r1215 | rmanfredi | 2002-06-30 15:28:17 -0400 (Sun, 30 Jun 2002) | 2 lines

Fixed auto-selection tuning [From Richard].

------------------------------------------------------------------------
r1214 | rmanfredi | 2002-06-30 14:46:04 -0400 (Sun, 30 Jun 2002) | 3 lines

Fixed upload crash when we can't send back the whole HTTP status
[From Paul Cassella].

------------------------------------------------------------------------
r1213 | rmanfredi | 2002-06-30 06:54:55 -0400 (Sun, 30 Jun 2002) | 3 lines

When removing completed downloads from queue, also remove first-order
aliases by SHA1, if available.

------------------------------------------------------------------------
r1212 | rmanfredi | 2002-06-30 06:53:21 -0400 (Sun, 30 Jun 2002) | 3 lines

Protected a few pong-cache warnings, so that they be emitted only
when running in debugging mode.

------------------------------------------------------------------------
r1211 | rmanfredi | 2002-06-30 06:49:35 -0400 (Sun, 30 Jun 2002) | 3 lines

Tuned auto-selection in search window to be an O(n) algorithm instead
of O(n*n), which greatly improves performance [From Richard].

------------------------------------------------------------------------
r1210 | rmanfredi | 2002-06-29 15:03:37 -0400 (Sat, 29 Jun 2002) | 2 lines

Version of 29/06/2002.

------------------------------------------------------------------------
r1209 | rmanfredi | 2002-06-29 14:59:37 -0400 (Sat, 29 Jun 2002) | 3 lines

Fixed crashes with the filter popup window when search was closed
before the filter popup [From Richard].

------------------------------------------------------------------------
r1208 | rmanfredi | 2002-06-29 14:57:37 -0400 (Sat, 29 Jun 2002) | 2 lines

Rationalize right-click menu handling in all panes [From Richard].

------------------------------------------------------------------------
r1207 | rmanfredi | 2002-06-29 06:42:43 -0400 (Sat, 29 Jun 2002) | 2 lines

Added hardwired list of servent GUIDs to ban for push routes.

------------------------------------------------------------------------
r1206 | rmanfredi | 2002-06-28 17:55:25 -0400 (Fri, 28 Jun 2002) | 2 lines

More Solaris fixes [Uros Bizjak, patch #575037].

------------------------------------------------------------------------
r1205 | rmanfredi | 2002-06-28 16:26:58 -0400 (Fri, 28 Jun 2002) | 2 lines

Version of 28/06/2002.

------------------------------------------------------------------------
r1204 | rmanfredi | 2002-06-28 16:26:25 -0400 (Fri, 28 Jun 2002) | 3 lines

Don't throw away node from hostcache if we can't connect due to lack
of file descriptor.

------------------------------------------------------------------------
r1203 | rmanfredi | 2002-06-28 13:50:30 -0400 (Fri, 28 Jun 2002) | 2 lines

Don't flag as new a version bearing the same timestamp as ours.

------------------------------------------------------------------------
r1202 | rmanfredi | 2002-06-28 13:49:49 -0400 (Fri, 28 Jun 2002) | 2 lines

Raised BYE grace period to 30 seconds to be compatible with shutdown grace.

------------------------------------------------------------------------
r1201 | rmanfredi | 2002-06-28 13:48:29 -0400 (Fri, 28 Jun 2002) | 2 lines

Simplified URL parsing, and accept http:// case-insensitively.

------------------------------------------------------------------------
r1200 | rmanfredi | 2002-06-28 13:47:47 -0400 (Fri, 28 Jun 2002) | 2 lines

Can now enter an urn:sha1: search directly (will beep if invalid).

------------------------------------------------------------------------
r1199 | rmanfredi | 2002-06-28 02:20:20 -0400 (Fri, 28 Jun 2002) | 2 lines

Portability fixes for FreeBSD [From Aron, patch #574111].

------------------------------------------------------------------------
r1198 | rmanfredi | 2002-06-28 02:16:25 -0400 (Fri, 28 Jun 2002) | 2 lines

Portability fix in socks v5 code [From Bruce Momjian, patch #574919].

------------------------------------------------------------------------
r1197 | rmanfredi | 2002-06-27 17:36:23 -0400 (Thu, 27 Jun 2002) | 2 lines

Stop all processing for 0.4 handshaking after Tue Jul  1 00:00:00 2003.

------------------------------------------------------------------------
r1196 | rmanfredi | 2002-06-27 17:14:10 -0400 (Thu, 27 Jun 2002) | 2 lines

Version of 27/06/2002.

------------------------------------------------------------------------
r1195 | rmanfredi | 2002-06-27 17:12:35 -0400 (Thu, 27 Jun 2002) | 2 lines

Added SOCK_BUFSZ constant for the socket's buffer size.

------------------------------------------------------------------------
r1194 | rmanfredi | 2002-06-27 17:11:19 -0400 (Thu, 27 Jun 2002) | 2 lines

Better seed the random number generator.

------------------------------------------------------------------------
r1193 | rmanfredi | 2002-06-27 17:10:26 -0400 (Thu, 27 Jun 2002) | 2 lines

Added configure check for strcasestr(), which is present on some systems.

------------------------------------------------------------------------
r1192 | rmanfredi | 2002-06-27 17:09:16 -0400 (Thu, 27 Jun 2002) | 3 lines

Fixed Gnutella size reading in message headers: alignment constraints
would cause a bus error on some CPUs.

------------------------------------------------------------------------
r1191 | rmanfredi | 2002-06-27 17:07:40 -0400 (Thu, 27 Jun 2002) | 2 lines

Changed getdate to parse dates as DD/MM/YYYY, not as MM/DD/YYYY.

------------------------------------------------------------------------
r1190 | rmanfredi | 2002-06-27 17:06:48 -0400 (Thu, 27 Jun 2002) | 3 lines

Fixed dynamic upload slots spinbutton sensitivity (fixes bug #574592)
[From Richard].

------------------------------------------------------------------------
r1189 | rmanfredi | 2002-06-27 17:04:48 -0400 (Thu, 27 Jun 2002) | 2 lines

Removed heartbeat warnings about skewed clock when not debugging.

------------------------------------------------------------------------
r1188 | rmanfredi | 2002-06-27 17:03:53 -0400 (Thu, 27 Jun 2002) | 3 lines

Fixed base32 decoding to use gint8 instead of gchar to be sure to
get signed characters.

------------------------------------------------------------------------
r1187 | rmanfredi | 2002-06-27 17:03:04 -0400 (Thu, 27 Jun 2002) | 2 lines

Plugged version checking in.

------------------------------------------------------------------------
r1186 | rmanfredi | 2002-06-27 17:00:08 -0400 (Thu, 27 Jun 2002) | 2 lines

Added version checking.

------------------------------------------------------------------------
r1185 | rmanfredi | 2002-06-27 16:56:49 -0400 (Thu, 27 Jun 2002) | 3 lines

Make sure GUI configuration for download overlap does not exceed the
size of the socket's buffer [From Richard].

------------------------------------------------------------------------
r1184 | rmanfredi | 2002-06-27 16:54:31 -0400 (Thu, 27 Jun 2002) | 2 lines

Added configure check for glib >= 1.2.10 [From Richard].

------------------------------------------------------------------------
r1183 | rmanfredi | 2002-06-25 16:34:34 -0400 (Tue, 25 Jun 2002) | 2 lines

Will g_error() if the "bug" manifests itself.

------------------------------------------------------------------------
r1182 | rmanfredi | 2002-06-25 16:28:36 -0400 (Tue, 25 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1181 | rmanfredi | 2002-06-25 16:28:12 -0400 (Tue, 25 Jun 2002) | 2 lines

Fixed bug in dmesh_url_parse(), caused by buggy sscanf(), grrr...

------------------------------------------------------------------------
r1180 | rmanfredi | 2002-06-25 15:46:32 -0400 (Tue, 25 Jun 2002) | 3 lines

Avoid using all file descriptors for banning.  Now configurable via two
new config variables, namely ban_max_fds and ban_ratio_fds.

------------------------------------------------------------------------
r1179 | rmanfredi | 2002-06-25 15:43:54 -0400 (Tue, 25 Jun 2002) | 2 lines

Do not abort when regular expression in queue matching is invalid!

------------------------------------------------------------------------
r1174 | rmanfredi | 2002-06-24 17:24:45 -0400 (Mon, 24 Jun 2002) | 2 lines

Forgot to list getdate.h among the sources.

------------------------------------------------------------------------
r1173 | rmanfredi | 2002-06-24 17:19:31 -0400 (Mon, 24 Jun 2002) | 2 lines

Fixed typo.

------------------------------------------------------------------------
r1172 | rmanfredi | 2002-06-24 17:17:56 -0400 (Mon, 24 Jun 2002) | 2 lines

Version 0.90.

------------------------------------------------------------------------
r1171 | rmanfredi | 2002-06-24 17:13:08 -0400 (Mon, 24 Jun 2002) | 2 lines

Version 0.90 beta.

------------------------------------------------------------------------
r1170 | rmanfredi | 2002-06-24 16:35:01 -0400 (Mon, 24 Jun 2002) | 2 lines

The experimental auto-download feature is gone.

------------------------------------------------------------------------
r1169 | rmanfredi | 2002-06-24 16:33:40 -0400 (Mon, 24 Jun 2002) | 2 lines

Preparing 0.90 beta.

------------------------------------------------------------------------
r1168 | rmanfredi | 2002-06-24 16:30:13 -0400 (Mon, 24 Jun 2002) | 2 lines

Fixed memory leak in regexp probing of the download queue.

------------------------------------------------------------------------
r1167 | rmanfredi | 2002-06-24 16:01:01 -0400 (Mon, 24 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1166 | rmanfredi | 2002-06-24 15:56:59 -0400 (Mon, 24 Jun 2002) | 2 lines

Added Mike Perry.

------------------------------------------------------------------------
r1165 | rmanfredi | 2002-06-24 15:49:04 -0400 (Mon, 24 Jun 2002) | 2 lines

Added nicer servent name for two new servents: RAZA and SWFT.

------------------------------------------------------------------------
r1164 | rmanfredi | 2002-06-24 15:48:02 -0400 (Mon, 24 Jun 2002) | 2 lines

Integrated Richard's filter cleanup patch.

------------------------------------------------------------------------
r1163 | rmanfredi | 2002-06-24 15:46:29 -0400 (Mon, 24 Jun 2002) | 3 lines

Added warning in dmesh_alternate_location() in case we overflow buffer.
Also check returned val from g_snprintf() to account for trailing NUL.

------------------------------------------------------------------------
r1162 | rmanfredi | 2002-06-24 10:33:20 -0400 (Mon, 24 Jun 2002) | 2 lines

Another off-by-one error in test.

------------------------------------------------------------------------
r1161 | rmanfredi | 2002-06-24 07:31:44 -0400 (Mon, 24 Jun 2002) | 2 lines

Version of 24/06/2002.

------------------------------------------------------------------------
r1160 | rmanfredi | 2002-06-24 07:30:06 -0400 (Mon, 24 Jun 2002) | 2 lines

Added vendor information to warning about improper pong-caching.

------------------------------------------------------------------------
r1159 | rmanfredi | 2002-06-24 07:27:49 -0400 (Mon, 24 Jun 2002) | 2 lines

Fixed buggy node_remove_non_nearby() (closes bug #572918).

------------------------------------------------------------------------
r1158 | rmanfredi | 2002-06-24 07:25:53 -0400 (Mon, 24 Jun 2002) | 2 lines

Forgot that dm_expire() could empty the mesh entry (fixes bug #573027).

------------------------------------------------------------------------
r1157 | rmanfredi | 2002-06-24 07:23:16 -0400 (Mon, 24 Jun 2002) | 3 lines

Mark callout queue event as freed to avoid memory corruptions in case
of misuse (i.e. usage bug).

------------------------------------------------------------------------
r1156 | rmanfredi | 2002-06-23 17:58:42 -0400 (Sun, 23 Jun 2002) | 2 lines

Removed spaces in front of a name, replacing them by a single TAB.

------------------------------------------------------------------------
r1155 | rmanfredi | 2002-06-23 17:50:40 -0400 (Sun, 23 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1154 | wyldfire | 2002-06-23 17:38:50 -0400 (Sun, 23 Jun 2002) | 2 lines

* Removed 'search again' from gui for the release

------------------------------------------------------------------------
r1153 | wyldfire | 2002-06-23 17:22:17 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1152 | wyldfire | 2002-06-23 17:21:47 -0400 (Sun, 23 Jun 2002) | 2 lines

* Missed Raphaels name once...

------------------------------------------------------------------------
r1151 | wyldfire | 2002-06-23 17:14:51 -0400 (Sun, 23 Jun 2002) | 2 lines

* Updated credits, made some scrollbars always visible to reduce flickering

------------------------------------------------------------------------
r1150 | wyldfire | 2002-06-23 17:12:53 -0400 (Sun, 23 Jun 2002) | 2 lines

* Free clipboard before exit

------------------------------------------------------------------------
r1149 | wyldfire | 2002-06-23 17:12:13 -0400 (Sun, 23 Jun 2002) | 2 lines

* Added state to RETURN target, added RETURN target back to tree

------------------------------------------------------------------------
r1148 | rmanfredi | 2002-06-23 16:47:36 -0400 (Sun, 23 Jun 2002) | 2 lines

Added periodic savings of the search/filters.

------------------------------------------------------------------------
r1147 | rmanfredi | 2002-06-23 16:45:20 -0400 (Sun, 23 Jun 2002) | 3 lines

Forgot that scheduling in callout queue uses milli-seconds units: was
purging uploading mesh info too often.  Also added mesh info traces.

------------------------------------------------------------------------
r1146 | rmanfredi | 2002-06-23 15:05:39 -0400 (Sun, 23 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1145 | rmanfredi | 2002-06-23 15:00:53 -0400 (Sun, 23 Jun 2002) | 3 lines

Make sure we detect a duplicate node connection before dropping a node
in favour of a local one (fixes bug # 572748).

------------------------------------------------------------------------
r1144 | rmanfredi | 2002-06-23 14:26:15 -0400 (Sun, 23 Jun 2002) | 2 lines

Forgot to include Alex Bennee <alex@bennee.com>.

------------------------------------------------------------------------
r1143 | rmanfredi | 2002-06-23 14:22:16 -0400 (Sun, 23 Jun 2002) | 2 lines

Fixed root cause of GTK critical warnings regarding progress bar.

------------------------------------------------------------------------
r1142 | rmanfredi | 2002-06-23 13:21:05 -0400 (Sun, 23 Jun 2002) | 2 lines

Forgot to clear callout queue callback info before freeing structure.

------------------------------------------------------------------------
r1141 | wyldfire | 2002-06-23 11:43:24 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1140 | wyldfire | 2002-06-23 11:36:39 -0400 (Sun, 23 Jun 2002) | 2 lines

* Removed coloring of builtin targets in filter dialog because I can't set the foreground of the leave node.

------------------------------------------------------------------------
r1139 | wyldfire | 2002-06-23 11:21:57 -0400 (Sun, 23 Jun 2002) | 2 lines

* Removed RETURN target from filter tree in dialog

------------------------------------------------------------------------
r1138 | wyldfire | 2002-06-23 11:16:50 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1137 | wyldfire | 2002-06-23 11:16:04 -0400 (Sun, 23 Jun 2002) | 2 lines

* Correctly unselect when doing a 'connect to host' on download/queue popup

------------------------------------------------------------------------
r1136 | wyldfire | 2002-06-23 11:10:41 -0400 (Sun, 23 Jun 2002) | 2 lines

* Cosmetic change to about dialog

------------------------------------------------------------------------
r1135 | wyldfire | 2002-06-23 10:53:54 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1134 | wyldfire | 2002-06-23 10:52:20 -0400 (Sun, 23 Jun 2002) | 2 lines

* Fix up coloring

------------------------------------------------------------------------
r1133 | wyldfire | 2002-06-23 10:51:27 -0400 (Sun, 23 Jun 2002) | 2 lines

* Enable xml-store by default

------------------------------------------------------------------------
r1132 | wyldfire | 2002-06-23 10:49:45 -0400 (Sun, 23 Jun 2002) | 2 lines

* Removed 'search again' from download/queue popup

------------------------------------------------------------------------
r1131 | rmanfredi | 2002-06-23 10:31:40 -0400 (Sun, 23 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1130 | rmanfredi | 2002-06-23 10:29:21 -0400 (Sun, 23 Jun 2002) | 2 lines

New upload_init() routine.

------------------------------------------------------------------------
r1129 | rmanfredi | 2002-06-23 10:28:30 -0400 (Sun, 23 Jun 2002) | 2 lines

Renamed huge_alternate_location() as huge_collect_locations().

------------------------------------------------------------------------
r1128 | rmanfredi | 2002-06-23 10:27:21 -0400 (Sun, 23 Jun 2002) | 2 lines

Added comments, prevent useless addition to mesh.

------------------------------------------------------------------------
r1127 | rmanfredi | 2002-06-23 10:26:30 -0400 (Sun, 23 Jun 2002) | 2 lines

Mesh information will now only be sent to uploaders when a change occurred.

------------------------------------------------------------------------
r1126 | rmanfredi | 2002-06-23 10:25:18 -0400 (Sun, 23 Jun 2002) | 2 lines

Removed useless atoms_free_all().

------------------------------------------------------------------------
r1125 | rmanfredi | 2002-06-23 10:23:25 -0400 (Sun, 23 Jun 2002) | 2 lines

Added Christophe Tronche.

------------------------------------------------------------------------
r1124 | wyldfire | 2002-06-23 10:08:44 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1123 | wyldfire | 2002-06-23 10:08:07 -0400 (Sun, 23 Jun 2002) | 2 lines

* Mark active 'push' downloads and 'always push' downoads in queue

------------------------------------------------------------------------
r1122 | wyldfire | 2002-06-23 10:06:47 -0400 (Sun, 23 Jun 2002) | 2 lines

* Fixed: active downloads not unfreezed after force_push

------------------------------------------------------------------------
r1121 | wyldfire | 2002-06-23 09:27:49 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1120 | wyldfire | 2002-06-23 09:27:10 -0400 (Sun, 23 Jun 2002) | 2 lines

* Added 'about' dialog

------------------------------------------------------------------------
r1119 | wyldfire | 2002-06-23 09:26:37 -0400 (Sun, 23 Jun 2002) | 2 lines

* Properly update target combos when adding/removing a filter

------------------------------------------------------------------------
r1118 | wyldfire | 2002-06-23 09:25:47 -0400 (Sun, 23 Jun 2002) | 2 lines

* Use FILTER_PROP_STATE_DO instead of numerical value for filter_default_policy

------------------------------------------------------------------------
r1117 | wyldfire | 2002-06-23 09:23:43 -0400 (Sun, 23 Jun 2002) | 3 lines


* Added "about" dialog

------------------------------------------------------------------------
r1116 | wyldfire | 2002-06-23 09:18:05 -0400 (Sun, 23 Jun 2002) | 3 lines


* Added "about" dialog and menu item

------------------------------------------------------------------------
r1115 | wyldfire | 2002-06-23 06:18:23 -0400 (Sun, 23 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1114 | wyldfire | 2002-06-23 06:17:51 -0400 (Sun, 23 Jun 2002) | 3 lines


* Added builtin targets to filter tree to have the stats (not selectable)

------------------------------------------------------------------------
r1113 | wyldfire | 2002-06-23 06:14:24 -0400 (Sun, 23 Jun 2002) | 6 lines


* Added stats to builtin targets
* Remember node state in filter tree
* added filter_find_by_name_in_session routine to filter.c (used to
  determine wether a filter name is valid, i.e. does not exist)

------------------------------------------------------------------------
r1112 | wyldfire | 2002-06-23 06:10:33 -0400 (Sun, 23 Jun 2002) | 3 lines


* BEEP if user tries to create a filter with an invalid nam

------------------------------------------------------------------------
r1111 | rmanfredi | 2002-06-23 05:21:49 -0400 (Sun, 23 Jun 2002) | 3 lines

Obsoleted old "autodownload" feature, since we now have more flexible
download selection features with the filter chains.

------------------------------------------------------------------------
r1110 | wyldfire | 2002-06-22 20:47:38 -0400 (Sat, 22 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1109 | wyldfire | 2002-06-22 20:47:08 -0400 (Sat, 22 Jun 2002) | 3 lines


* Added STATE rule

------------------------------------------------------------------------
r1108 | rmanfredi | 2002-06-22 18:29:50 -0400 (Sat, 22 Jun 2002) | 3 lines

Now displays Server name in downloads as soon as it is known.  Previously,
it needed to be known beforehand (from a previous try) to be displayed.

------------------------------------------------------------------------
r1107 | rmanfredi | 2002-06-22 17:49:21 -0400 (Sat, 22 Jun 2002) | 2 lines

Was missing the "," separator in our size computations for alt locations.

------------------------------------------------------------------------
r1106 | rmanfredi | 2002-06-22 17:02:00 -0400 (Sat, 22 Jun 2002) | 2 lines

Fixed sizing checks done when building alternate location header.

------------------------------------------------------------------------
r1105 | rmanfredi | 2002-06-22 12:15:28 -0400 (Sat, 22 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1104 | rmanfredi | 2002-06-22 12:14:33 -0400 (Sat, 22 Jun 2002) | 2 lines

Unplugged non-functional QRP stuff.

------------------------------------------------------------------------
r1103 | rmanfredi | 2002-06-22 12:03:20 -0400 (Sat, 22 Jun 2002) | 2 lines

Added debugging traces in huge.c cache flushing.

------------------------------------------------------------------------
r1102 | rmanfredi | 2002-06-22 12:00:03 -0400 (Sat, 22 Jun 2002) | 2 lines

Fixed possible use of uninitialized value in analyse_status().

------------------------------------------------------------------------
r1101 | rmanfredi | 2002-06-22 11:59:15 -0400 (Sat, 22 Jun 2002) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r1100 | wyldfire | 2002-06-22 09:32:55 -0400 (Sat, 22 Jun 2002) | 2 lines

* Added RETURN target to the filter dialog

------------------------------------------------------------------------
r1099 | wyldfire | 2002-06-22 09:14:38 -0400 (Sat, 22 Jun 2002) | 2 lines

* Made filter root-nodes in filter dialog not selectable

------------------------------------------------------------------------
r1098 | wyldfire | 2002-06-22 08:50:27 -0400 (Sat, 22 Jun 2002) | 4 lines


* Builtin targets have uppercase names.
* Removed cruft: search_strict_and

------------------------------------------------------------------------
r1097 | wyldfire | 2002-06-22 08:49:10 -0400 (Sat, 22 Jun 2002) | 3 lines


* Removed cruft: search_strict_and

------------------------------------------------------------------------
r1096 | wyldfire | 2002-06-22 08:34:27 -0400 (Sat, 22 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1095 | wyldfire | 2002-06-22 08:33:07 -0400 (Sat, 22 Jun 2002) | 2 lines

* Added filter_gui_update_rule_count routine

------------------------------------------------------------------------
r1094 | wyldfire | 2002-06-22 08:32:11 -0400 (Sat, 22 Jun 2002) | 4 lines


* Rename old searches file when moving to XML mode instead of delting.
  Also move this from search_init to search_shutdown.

------------------------------------------------------------------------
r1093 | wyldfire | 2002-06-22 08:31:04 -0400 (Sat, 22 Jun 2002) | 5 lines


* Removed "autodownload" checkbox
* Item count above results list is correctly updated when the
  search is cleared.

------------------------------------------------------------------------
r1092 | wyldfire | 2002-06-22 08:28:50 -0400 (Sat, 22 Jun 2002) | 6 lines


* Rule count in filter tree is correctly updated when a rule is
  inserted/removed.
* Hopefully now really fixed: access rule members after freeing the rule in
  filter_replace_rule_in_session

------------------------------------------------------------------------
r1091 | wyldfire | 2002-06-22 08:27:57 -0400 (Sat, 22 Jun 2002) | 4 lines


* Removed "autodownload" checkbox from GUI and deleted it's callback
  This is to be replaced by the filtering system.

------------------------------------------------------------------------
r1090 | wyldfire | 2002-06-22 08:22:25 -0400 (Sat, 22 Jun 2002) | 3 lines


* Synced GUI limits with config reader limits. (Closes #557681)

------------------------------------------------------------------------
r1089 | rmanfredi | 2002-06-22 06:45:11 -0400 (Sat, 22 Jun 2002) | 2 lines

Bug fixing in test code exercising QRP compression.

------------------------------------------------------------------------
r1088 | rmanfredi | 2002-06-21 18:57:58 -0400 (Fri, 21 Jun 2002) | 2 lines

Version of 22/06/2002.

------------------------------------------------------------------------
r1087 | rmanfredi | 2002-06-21 18:56:30 -0400 (Fri, 21 Jun 2002) | 2 lines

Forgot to clear the search queue at final cleanup.

------------------------------------------------------------------------
r1086 | rmanfredi | 2002-06-21 18:52:27 -0400 (Fri, 21 Jun 2002) | 2 lines

Random memory cleanup.

------------------------------------------------------------------------
r1085 | rmanfredi | 2002-06-21 18:52:02 -0400 (Fri, 21 Jun 2002) | 2 lines

Would be omitting to send a SHA1 starting with a leading NUL byte.

------------------------------------------------------------------------
r1084 | rmanfredi | 2002-06-21 18:51:11 -0400 (Fri, 21 Jun 2002) | 3 lines

Now attempts to free memory as soon as a search record is removed from
the GUI, and not when the search is closed.

------------------------------------------------------------------------
r1083 | rmanfredi | 2002-06-21 18:49:39 -0400 (Fri, 21 Jun 2002) | 2 lines

Random cleanup.

------------------------------------------------------------------------
r1082 | rmanfredi | 2002-06-21 18:48:11 -0400 (Fri, 21 Jun 2002) | 2 lines

Bandwidth limit is now up to BS_BW_MAX, included.

------------------------------------------------------------------------
r1081 | wyldfire | 2002-06-21 07:02:53 -0400 (Fri, 21 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1080 | wyldfire | 2002-06-21 06:55:34 -0400 (Fri, 21 Jun 2002) | 2 lines

* search_matched: added assertions and only freeze list if we really add something

------------------------------------------------------------------------
r1079 | wyldfire | 2002-06-21 06:47:46 -0400 (Fri, 21 Jun 2002) | 2 lines

* Added popup to rules table in filter dialog (copy(paste), make sure pasted rule has valid target

------------------------------------------------------------------------
r1078 | wyldfire | 2002-06-21 06:47:00 -0400 (Fri, 21 Jun 2002) | 2 lines

* Fixed access-after-free bug in filter_replace_rule_in_session, made filter_free_rule public, added filter_duplicate_rule and filter_is_valid_in_session

------------------------------------------------------------------------
r1077 | wyldfire | 2002-06-21 04:25:57 -0400 (Fri, 21 Jun 2002) | 2 lines

* Added popup to rules table in filter dialog (copy(paste)

------------------------------------------------------------------------
r1076 | rmanfredi | 2002-06-21 03:17:33 -0400 (Fri, 21 Jun 2002) | 2 lines

Previous fix cleared the download queue status.

------------------------------------------------------------------------
r1075 | rmanfredi | 2002-06-21 03:12:52 -0400 (Fri, 21 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r1074 | rmanfredi | 2002-06-21 03:12:36 -0400 (Fri, 21 Jun 2002) | 2 lines

General cleanup to be able to compile with dmalloc.

------------------------------------------------------------------------
r1073 | rmanfredi | 2002-06-21 03:10:41 -0400 (Fri, 21 Jun 2002) | 2 lines

Forgot to properly free the dmesh slot sometimes.

------------------------------------------------------------------------
r1072 | rmanfredi | 2002-06-20 18:00:27 -0400 (Thu, 20 Jun 2002) | 2 lines

Close download mesh before closing the configuration!

------------------------------------------------------------------------
r1071 | rmanfredi | 2002-06-20 14:11:26 -0400 (Thu, 20 Jun 2002) | 2 lines

Version of 20/06/2002.

------------------------------------------------------------------------
r1070 | rmanfredi | 2002-06-20 14:06:46 -0400 (Thu, 20 Jun 2002) | 2 lines

Plugged download mesh initialization and cleanup.

------------------------------------------------------------------------
r1069 | rmanfredi | 2002-06-20 14:05:46 -0400 (Thu, 20 Jun 2002) | 2 lines

HTTP status parsing routine now called http_status_parse().

------------------------------------------------------------------------
r1068 | rmanfredi | 2002-06-20 14:04:42 -0400 (Thu, 20 Jun 2002) | 2 lines

New url_escape_into() routine.

------------------------------------------------------------------------
r1067 | rmanfredi | 2002-06-20 14:03:30 -0400 (Thu, 20 Jun 2002) | 2 lines

Plugged download mesh to the uploading code.

------------------------------------------------------------------------
r1066 | rmanfredi | 2002-06-20 14:01:49 -0400 (Thu, 20 Jun 2002) | 2 lines

Moved HTTP status code sending to http.c.

------------------------------------------------------------------------
r1065 | rmanfredi | 2002-06-20 14:01:03 -0400 (Thu, 20 Jun 2002) | 2 lines

shared_file_by_sha1_base32() is no longer used.

------------------------------------------------------------------------
r1064 | rmanfredi | 2002-06-20 13:58:47 -0400 (Thu, 20 Jun 2002) | 4 lines

Now keeps track of the time we received the query hits, for the download mesh.
Simplified parsing of the trailer, keep only the vendor code around.
Adapted column sorting algorithm accordingly.

------------------------------------------------------------------------
r1063 | rmanfredi | 2002-06-20 13:55:06 -0400 (Thu, 20 Jun 2002) | 2 lines

New date_to_iso_gchar() to emit the ISO date for the download mesh.

------------------------------------------------------------------------
r1062 | rmanfredi | 2002-06-20 13:54:25 -0400 (Thu, 20 Jun 2002) | 2 lines

Removed the gnotella.fileflash.com host cache: host no longer exists.

------------------------------------------------------------------------
r1061 | rmanfredi | 2002-06-20 13:53:14 -0400 (Thu, 20 Jun 2002) | 2 lines

Moved HTTP status parsing code to http.c.

------------------------------------------------------------------------
r1060 | rmanfredi | 2002-06-20 13:52:09 -0400 (Thu, 20 Jun 2002) | 2 lines

Plugged download mesh for downloads.

------------------------------------------------------------------------
r1059 | rmanfredi | 2002-06-20 13:50:05 -0400 (Thu, 20 Jun 2002) | 2 lines

Declare "struct iovec" manually.

------------------------------------------------------------------------
r1058 | rmanfredi | 2002-06-20 13:49:09 -0400 (Thu, 20 Jun 2002) | 2 lines

Lowered max banning period to 3 hours, instead of 1 whole day.

------------------------------------------------------------------------
r1057 | rmanfredi | 2002-06-20 13:47:16 -0400 (Thu, 20 Jun 2002) | 2 lines

First take at download mesh implementation, with code refactoring.

------------------------------------------------------------------------
r1056 | rmanfredi | 2002-06-20 13:36:18 -0400 (Thu, 20 Jun 2002) | 2 lines

Made sha1_hash() visible from the outside.

------------------------------------------------------------------------
r1055 | wyldfire | 2002-06-20 04:32:49 -0400 (Thu, 20 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1054 | wyldfire | 2002-06-20 04:32:11 -0400 (Thu, 20 Jun 2002) | 2 lines

* Added support for filter result properties (display/download for now)

------------------------------------------------------------------------
r1053 | wyldfire | 2002-06-20 04:31:20 -0400 (Thu, 20 Jun 2002) | 2 lines

* Changed to support filter result properties

------------------------------------------------------------------------
r1052 | wyldfire | 2002-06-20 04:30:31 -0400 (Thu, 20 Jun 2002) | 2 lines

* Merged search_gui_update into search_matched, seperated search_gui_add_record out, changed to support filter result properties

------------------------------------------------------------------------
r1051 | wyldfire | 2002-06-20 04:27:45 -0400 (Thu, 20 Jun 2002) | 2 lines

* Added handling of download and nodownload builtin targets

------------------------------------------------------------------------
r1050 | wyldfire | 2002-06-20 04:26:30 -0400 (Thu, 20 Jun 2002) | 2 lines

* Changed handling of filter_default_policy to be compatible with new filtering

------------------------------------------------------------------------
r1049 | wyldfire | 2002-06-20 04:25:46 -0400 (Thu, 20 Jun 2002) | 2 lines

* Added 'Auto-download by [name|hash]' to search popup

------------------------------------------------------------------------
r1048 | wyldfire | 2002-06-20 04:23:45 -0400 (Thu, 20 Jun 2002) | 2 lines

* Added 'Auto-download by [name|hash]' to search popup, fixed segfault in autoselection

------------------------------------------------------------------------
r1047 | rmanfredi | 2002-06-18 17:16:40 -0400 (Tue, 18 Jun 2002) | 2 lines

Was not properly parsing more than one GGEP extension block in a row.

------------------------------------------------------------------------
r1046 | wyldfire | 2002-06-17 18:48:54 -0400 (Mon, 17 Jun 2002) | 2 lines

* Some comments

------------------------------------------------------------------------
r1045 | wyldfire | 2002-06-17 18:42:18 -0400 (Mon, 17 Jun 2002) | 3 lines


* A little script to ease debugging

------------------------------------------------------------------------
r1044 | wyldfire | 2002-06-17 16:59:56 -0400 (Mon, 17 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1043 | wyldfire | 2002-06-17 16:58:01 -0400 (Mon, 17 Jun 2002) | 2 lines

* Column visibility persistance in search panel

------------------------------------------------------------------------
r1042 | wyldfire | 2002-06-17 16:20:30 -0400 (Mon, 17 Jun 2002) | 2 lines

* Changed handling of 'Autoselect identical'

------------------------------------------------------------------------
r1041 | wyldfire | 2002-06-17 16:15:55 -0400 (Mon, 17 Jun 2002) | 2 lines

* Moved 'Dropped messages' below 'gNet messages' in nodes panel

------------------------------------------------------------------------
r1040 | wyldfire | 2002-06-16 20:13:21 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1039 | wyldfire | 2002-06-16 18:03:07 -0400 (Sun, 16 Jun 2002) | 2 lines

* Fixed typo in RULE_FLAG case in filter_apply

------------------------------------------------------------------------
r1038 | wyldfire | 2002-06-16 18:02:04 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added 'Autoselect identical' to search pane

------------------------------------------------------------------------
r1037 | wyldfire | 2002-06-16 17:22:55 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1036 | wyldfire | 2002-06-16 17:22:38 -0400 (Sun, 16 Jun 2002) | 2 lines

* Autoselect result if name OR hash match

------------------------------------------------------------------------
r1035 | wyldfire | 2002-06-16 17:21:58 -0400 (Sun, 16 Jun 2002) | 2 lines

* Propagate column visibility on search switch

------------------------------------------------------------------------
r1034 | wyldfire | 2002-06-16 16:45:42 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1033 | wyldfire | 2002-06-16 16:45:19 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added filename information to sha1 rule

------------------------------------------------------------------------
r1032 | wyldfire | 2002-06-16 16:08:39 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1031 | wyldfire | 2002-06-16 16:07:59 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added '(Globally) drop results with [name|urn] to search popup'

------------------------------------------------------------------------
r1030 | wyldfire | 2002-06-16 16:06:31 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added filter_get_gloval_pre needed for 'Globally drop...' in search popup

------------------------------------------------------------------------
r1029 | wyldfire | 2002-06-16 16:01:38 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added 'Drop results with [name|urn] <globally>'

------------------------------------------------------------------------
r1028 | wyldfire | 2002-06-16 15:59:39 -0400 (Sun, 16 Jun 2002) | 2 lines

* Freeze list when 'download selected' is processed

------------------------------------------------------------------------
r1027 | wyldfire | 2002-06-16 14:43:48 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1026 | wyldfire | 2002-06-16 14:43:10 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added urn:sha1 and flag filtering

------------------------------------------------------------------------
r1025 | wyldfire | 2002-06-16 14:42:41 -0400 (Sun, 16 Jun 2002) | 2 lines

* Use scid_info for temporary informational messages

------------------------------------------------------------------------
r1024 | wyldfire | 2002-06-16 14:40:19 -0400 (Sun, 16 Jun 2002) | 2 lines

* Display 'new' instead of 'none yet' in the stats col for not committed filters/rules

------------------------------------------------------------------------
r1023 | wyldfire | 2002-06-16 14:09:50 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added downloads_remove_all_with_sha1, made download_remove_all* return the number of removed downloads

------------------------------------------------------------------------
r1022 | wyldfire | 2002-06-16 14:05:37 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added 'Abort all with urn:sha1' to queue and downloads popup, display number of removed downloads

------------------------------------------------------------------------
r1021 | wyldfire | 2002-06-16 14:00:47 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added 'Abort all with urn:sha1' to queue and downloads popup

------------------------------------------------------------------------
r1020 | wyldfire | 2002-06-16 09:59:46 -0400 (Sun, 16 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r1019 | wyldfire | 2002-06-16 09:59:17 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added radiobutton_get_active_in_group

------------------------------------------------------------------------
r1018 | wyldfire | 2002-06-16 09:58:49 -0400 (Sun, 16 Jun 2002) | 2 lines

* Elaborate comment on why we can't use clist autosort

------------------------------------------------------------------------
r1017 | wyldfire | 2002-06-16 09:57:45 -0400 (Sun, 16 Jun 2002) | 2 lines

* Changed urn column header to urn:sha1 and centered header in column

------------------------------------------------------------------------
r1016 | wyldfire | 2002-06-16 09:56:20 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added persistance for passive searches, flag and urn:sha1 rules

------------------------------------------------------------------------
r1015 | wyldfire | 2002-06-16 09:55:36 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added base32_sha1 to misc.c to convert base32 encoded sha1 to binary sha1

------------------------------------------------------------------------
r1014 | wyldfire | 2002-06-16 09:54:33 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added urn:sha1 and flag filtering

------------------------------------------------------------------------
r1013 | wyldfire | 2002-06-16 09:52:14 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added urn:sha1 and flag filtering, readded Edit Filter to search popup, moved get_rule and nb_filt_* stuff from filter.[ch] to filter_gui.*

------------------------------------------------------------------------
r1012 | wyldfire | 2002-06-16 09:51:24 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added urn:sha1 and flag filtering, readded Edit Filter to search popup, moved get_rule and nb_filt_* stuff to filter_gui.*

------------------------------------------------------------------------
r1011 | wyldfire | 2002-06-16 09:49:48 -0400 (Sun, 16 Jun 2002) | 2 lines

* Added urn:sha1 and flag filtering, readded Edit Filter to search popup

------------------------------------------------------------------------
r1010 | rmanfredi | 2002-06-15 12:50:25 -0400 (Sat, 15 Jun 2002) | 2 lines

Version of 15/06/2002.

------------------------------------------------------------------------
r1009 | rmanfredi | 2002-06-15 12:48:30 -0400 (Sat, 15 Jun 2002) | 4 lines

Added a few more status codes that can be returned if /uri-res is not
supported.  Will also trace that the server cannot handle those URLs in
the download status, along with the error code returned.

------------------------------------------------------------------------
r1008 | rmanfredi | 2002-06-15 11:12:43 -0400 (Sat, 15 Jun 2002) | 3 lines

Added debugging traces for query hits holding more than 32 extensions.
Added moredetailed debugging information for bad packets.

------------------------------------------------------------------------
r1007 | rmanfredi | 2002-06-15 11:07:41 -0400 (Sat, 15 Jun 2002) | 2 lines

Added debugging traces for queries holding more than 32 extensions.

------------------------------------------------------------------------
r1006 | rmanfredi | 2002-06-15 11:06:33 -0400 (Sat, 15 Jun 2002) | 2 lines

Added comment.

------------------------------------------------------------------------
r1005 | rmanfredi | 2002-06-15 11:03:48 -0400 (Sat, 15 Jun 2002) | 2 lines

Added ext_has_ascii_word().

------------------------------------------------------------------------
r1004 | rmanfredi | 2002-06-15 11:02:39 -0400 (Sat, 15 Jun 2002) | 2 lines

Will now honour 301 Moved replies from other nodes.

------------------------------------------------------------------------
r1003 | wyldfire | 2002-06-15 09:12:06 -0400 (Sat, 15 Jun 2002) | 2 lines

* Sort search results using search_compare

------------------------------------------------------------------------
r1002 | wyldfire | 2002-06-15 09:11:28 -0400 (Sat, 15 Jun 2002) | 2 lines

* Add support for URN column

------------------------------------------------------------------------
r1001 | wyldfire | 2002-06-15 09:10:27 -0400 (Sat, 15 Jun 2002) | 2 lines

* Fixed sorting and add support for URN column

------------------------------------------------------------------------
r1000 | wyldfire | 2002-06-15 09:08:51 -0400 (Sat, 15 Jun 2002) | 2 lines

* Added URN column to search results (hidden by default)

------------------------------------------------------------------------
r999 | wyldfire | 2002-06-15 07:53:32 -0400 (Sat, 15 Jun 2002) | 2 lines

* Added sort order constants (SORT_*)

------------------------------------------------------------------------
r998 | wyldfire | 2002-06-15 07:49:51 -0400 (Sat, 15 Jun 2002) | 2 lines

* Made search_compare public

------------------------------------------------------------------------
r997 | wyldfire | 2002-06-15 07:36:11 -0400 (Sat, 15 Jun 2002) | 2 lines

* Added persistant passive searches

------------------------------------------------------------------------
r996 | rmanfredi | 2002-06-15 04:56:45 -0400 (Sat, 15 Jun 2002) | 3 lines

Reworked upload HTTP parsing so that we can handle HEAD requests on
/uri-res/N2R? queries as well.

------------------------------------------------------------------------
r995 | rmanfredi | 2002-06-15 04:54:22 -0400 (Sat, 15 Jun 2002) | 2 lines

Added comment.

------------------------------------------------------------------------
r994 | rmanfredi | 2002-06-15 04:53:48 -0400 (Sat, 15 Jun 2002) | 3 lines

Until we have received a message from nodes, handle them with the
"connecting" timeout.  This works because of the handshaking ping.

------------------------------------------------------------------------
r993 | rmanfredi | 2002-06-14 14:13:07 -0400 (Fri, 14 Jun 2002) | 3 lines

Removed wrong factorization of "goto failed" in upload file resolution
when a SHA1 is present in the headers.

------------------------------------------------------------------------
r992 | rmanfredi | 2002-06-14 13:38:07 -0400 (Fri, 14 Jun 2002) | 2 lines

Had not properly plugged in the 301 Moved triggering for uploads.

------------------------------------------------------------------------
r991 | rmanfredi | 2002-06-14 13:36:45 -0400 (Fri, 14 Jun 2002) | 2 lines

Propagate SHA1 from query hits to download requests.

------------------------------------------------------------------------
r990 | rmanfredi | 2002-06-13 09:25:21 -0400 (Thu, 13 Jun 2002) | 2 lines

Changed status to "Experimental".

------------------------------------------------------------------------
r989 | rmanfredi | 2002-06-13 02:37:37 -0400 (Thu, 13 Jun 2002) | 3 lines

Only log "query with extension" when we extracted one extension.
Lowered level at which payload is traced.

------------------------------------------------------------------------
r988 | rmanfredi | 2002-06-13 02:36:26 -0400 (Thu, 13 Jun 2002) | 2 lines

Only allow alpha-numeric payload for HUGE.

------------------------------------------------------------------------
r987 | rmanfredi | 2002-06-13 01:43:40 -0400 (Thu, 13 Jun 2002) | 2 lines

Created.

------------------------------------------------------------------------
r986 | rmanfredi | 2002-06-13 01:39:44 -0400 (Thu, 13 Jun 2002) | 2 lines

Version of 13/06/2002.

------------------------------------------------------------------------
r985 | rmanfredi | 2002-06-13 01:38:42 -0400 (Thu, 13 Jun 2002) | 3 lines

Fixed handling of GET /uri-res/N2R: the "urn:sha1:" part is a
case-insensitive string.  Likewise when extracting SHA1 from HTTP headers.

------------------------------------------------------------------------
r984 | rmanfredi | 2002-06-13 01:06:30 -0400 (Thu, 13 Jun 2002) | 2 lines

Now validates SHA1 representation in queries, dropping bad queries.

------------------------------------------------------------------------
r983 | rmanfredi | 2002-06-13 01:05:27 -0400 (Thu, 13 Jun 2002) | 2 lines

Now extracts SHA1 out of query hits for each record.

------------------------------------------------------------------------
r982 | rmanfredi | 2002-06-13 01:02:39 -0400 (Thu, 13 Jun 2002) | 2 lines

Added strcasestr() routine.

------------------------------------------------------------------------
r981 | rmanfredi | 2002-06-13 01:01:55 -0400 (Thu, 13 Jun 2002) | 2 lines

Make sure we use POSIX extended regular expressions.

------------------------------------------------------------------------
r980 | rmanfredi | 2002-06-13 00:58:58 -0400 (Thu, 13 Jun 2002) | 2 lines

Fixed hash table init for GUID/SHA1 atoms.

------------------------------------------------------------------------
r979 | rmanfredi | 2002-06-13 00:57:40 -0400 (Thu, 13 Jun 2002) | 2 lines

Added rigorous extension parsing.

------------------------------------------------------------------------
r978 | wyldfire | 2002-06-11 17:17:53 -0400 (Tue, 11 Jun 2002) | 3 lines


* Adapted to changes in the filter api

------------------------------------------------------------------------
r977 | wyldfire | 2002-06-11 17:16:36 -0400 (Tue, 11 Jun 2002) | 7 lines


* More clean up of the filter api
* More moving gtk code to from filter.c to filter_gui.c
* Adding/removing of filters is also shadowed now (meaning you can
  cancel it in the dialog)
* Added calls to bypass shadowing for adding and removing rules.

------------------------------------------------------------------------
r976 | wyldfire | 2002-06-11 17:15:19 -0400 (Tue, 11 Jun 2002) | 7 lines


* Fixed bug: rule editor not properly cleared when work_filter
  gets removed because it's bound search got removed
* Fixed bug: filter dialog size not remembered correctly
* More clean up of the filter api
* More moving gtk code to from filter.c to filter_gui.c

------------------------------------------------------------------------
r975 | wyldfire | 2002-06-11 17:12:30 -0400 (Tue, 11 Jun 2002) | 2 lines

* Added "don't show" item to search results popup

------------------------------------------------------------------------
r974 | rmanfredi | 2002-06-10 14:26:21 -0400 (Mon, 10 Jun 2002) | 2 lines

Made it clear that this lists categories of events.

------------------------------------------------------------------------
r973 | rmanfredi | 2002-06-09 14:29:52 -0400 (Sun, 09 Jun 2002) | 2 lines

Created.

------------------------------------------------------------------------
r972 | wyldfire | 2002-06-08 20:07:24 -0400 (Sat, 08 Jun 2002) | 2 lines

* Fixed: default filter not set on new passive search

------------------------------------------------------------------------
r971 | wyldfire | 2002-06-08 20:06:02 -0400 (Sat, 08 Jun 2002) | 2 lines

* Clear up rule editor properly when filter gets freed

------------------------------------------------------------------------
r970 | wyldfire | 2002-06-08 20:05:18 -0400 (Sat, 08 Jun 2002) | 2 lines

* Removed search_close_current

------------------------------------------------------------------------
r969 | wyldfire | 2002-06-08 15:15:31 -0400 (Sat, 08 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r968 | wyldfire | 2002-06-08 15:15:03 -0400 (Sat, 08 Jun 2002) | 2 lines

* fixed default filter menu init and added filter_imter

------------------------------------------------------------------------
r967 | wyldfire | 2002-06-08 15:14:21 -0400 (Sat, 08 Jun 2002) | 2 lines

* fixed dynamic bandwidth enabled persistance

------------------------------------------------------------------------
r966 | wyldfire | 2002-06-08 15:13:15 -0400 (Sat, 08 Jun 2002) | 2 lines

* added generic flag stuff

------------------------------------------------------------------------
r965 | wyldfire | 2002-06-08 15:12:48 -0400 (Sat, 08 Jun 2002) | 2 lines

* move to generic flag handling

------------------------------------------------------------------------
r964 | wyldfire | 2002-06-08 15:11:46 -0400 (Sat, 08 Jun 2002) | 2 lines

* Added tree and remove optionmenu, added filter stats and flags, started split

------------------------------------------------------------------------
r963 | wyldfire | 2002-06-08 14:54:33 -0400 (Sat, 08 Jun 2002) | 2 lines

* usual update

------------------------------------------------------------------------
r962 | wyldfire | 2002-06-08 14:51:46 -0400 (Sat, 08 Jun 2002) | 2 lines

* Persistance for more filter gui stuff

------------------------------------------------------------------------
r961 | wyldfire | 2002-06-08 14:51:14 -0400 (Sat, 08 Jun 2002) | 2 lines

* Moved filter callbacks to filter_cb.[ch]

------------------------------------------------------------------------
r960 | wyldfire | 2002-06-08 14:50:21 -0400 (Sat, 08 Jun 2002) | 2 lines

* added filter_cb.[ch] and filter_gui.[ch]

------------------------------------------------------------------------
r959 | wyldfire | 2002-06-08 14:47:58 -0400 (Sat, 08 Jun 2002) | 2 lines

* Remove optionmenu widget for selecting filters from filter dialog and added a tree instead.

------------------------------------------------------------------------
r958 | wyldfire | 2002-06-08 14:28:08 -0400 (Sat, 08 Jun 2002) | 2 lines

* Started to split up filter stuff

------------------------------------------------------------------------
r957 | rmanfredi | 2002-06-08 07:53:10 -0400 (Sat, 08 Jun 2002) | 2 lines

Fixed bad tracing printf() in upload index fixing code.

------------------------------------------------------------------------
r956 | rmanfredi | 2002-06-07 13:42:06 -0400 (Fri, 07 Jun 2002) | 2 lines

Moved assertion a few lines down in share_scan().

------------------------------------------------------------------------
r955 | rmanfredi | 2002-06-07 13:20:14 -0400 (Fri, 07 Jun 2002) | 2 lines

Version of 07/06/2002.

------------------------------------------------------------------------
r954 | rmanfredi | 2002-06-07 13:19:04 -0400 (Fri, 07 Jun 2002) | 2 lines

Added incremental deflating routines for QRP patch compression.

------------------------------------------------------------------------
r953 | rmanfredi | 2002-06-07 13:18:05 -0400 (Fri, 07 Jun 2002) | 6 lines

Will now transparently remap invalid indices.
Send a 301 Moved with proper Location redirection when requesting a file
with an improper index and an X-Gnutella-Content-URN is given and does
not match the request, but another file we have.
Plugged in atom strings.

------------------------------------------------------------------------
r952 | rmanfredi | 2002-06-07 13:15:43 -0400 (Fri, 07 Jun 2002) | 3 lines

Made common warnings silent unless debugging enabled.
Fixed improper dump of incoming data on first long lines.

------------------------------------------------------------------------
r951 | rmanfredi | 2002-06-07 13:14:16 -0400 (Fri, 07 Jun 2002) | 5 lines

New shared_file_by_sha1() and shared_file_by_name() routines.
Plugged in atom strings and reworked library scanning.
Added support for transparent index remapping for older servents sending
a request with an incorrect index.

------------------------------------------------------------------------
r950 | rmanfredi | 2002-06-07 13:10:47 -0400 (Fri, 07 Jun 2002) | 2 lines

Now requests URNs in all our queries.  Plugged in atom strings.

------------------------------------------------------------------------
r949 | rmanfredi | 2002-06-07 13:09:35 -0400 (Fri, 07 Jun 2002) | 2 lines

Moved Gnutella query message definitions to gnutella.h.

------------------------------------------------------------------------
r948 | rmanfredi | 2002-06-07 13:07:39 -0400 (Fri, 07 Jun 2002) | 2 lines

Second stab at QRP: Computes routing table patches incrementally.

------------------------------------------------------------------------
r947 | rmanfredi | 2002-06-07 13:06:00 -0400 (Fri, 07 Jun 2002) | 2 lines

When non-local nodes are removed to favor local ones, send BYE 202 messages.

------------------------------------------------------------------------
r946 | rmanfredi | 2002-06-07 13:04:40 -0400 (Fri, 07 Jun 2002) | 2 lines

Plugged in atom strings.

------------------------------------------------------------------------
r945 | rmanfredi | 2002-06-07 13:04:02 -0400 (Fri, 07 Jun 2002) | 3 lines

Benefits from new `file_path' field (atom) in shared file description.
Plugged in atom strings.

------------------------------------------------------------------------
r944 | rmanfredi | 2002-06-07 13:02:41 -0400 (Fri, 07 Jun 2002) | 2 lines

Fixed typo in comment.

------------------------------------------------------------------------
r943 | rmanfredi | 2002-06-07 13:01:49 -0400 (Fri, 07 Jun 2002) | 2 lines

Moved Gnutella query message definitions from search.h to here.

------------------------------------------------------------------------
r942 | rmanfredi | 2002-06-07 12:56:54 -0400 (Fri, 07 Jun 2002) | 3 lines

Raised default TTL to 7 (was 5) and default max TTL to 10 (was 7) to
match what appears to be a common setting in other servents.

------------------------------------------------------------------------
r941 | rmanfredi | 2002-06-07 12:55:36 -0400 (Fri, 07 Jun 2002) | 2 lines

Use new gui_allow_rescan_dir().

------------------------------------------------------------------------
r940 | rmanfredi | 2002-06-07 12:54:24 -0400 (Fri, 07 Jun 2002) | 2 lines

Added atoms, allowing sharing of common constants.

------------------------------------------------------------------------
r939 | rmanfredi | 2002-06-02 18:46:48 -0400 (Sun, 02 Jun 2002) | 3 lines

Fixed improper semantics of the "contains words" filter.  ALL the
words must be present for a match to occur.

------------------------------------------------------------------------
r938 | wyldfire | 2002-06-02 17:23:29 -0400 (Sun, 02 Jun 2002) | 2 lines

* Activate rules by default when creating new rules

------------------------------------------------------------------------
r937 | wyldfire | 2002-06-02 17:18:59 -0400 (Sun, 02 Jun 2002) | 2 lines

* Fixed IP condition string

------------------------------------------------------------------------
r936 | wyldfire | 2002-06-02 15:37:02 -0400 (Sun, 02 Jun 2002) | 2 lines

no comment

------------------------------------------------------------------------
r935 | rmanfredi | 2002-06-02 15:35:41 -0400 (Sun, 02 Jun 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r934 | rmanfredi | 2002-06-02 15:35:09 -0400 (Sun, 02 Jun 2002) | 2 lines

Prevent propagation of badly formed/too short queries.

------------------------------------------------------------------------
r933 | rmanfredi | 2002-06-02 15:34:02 -0400 (Sun, 02 Jun 2002) | 2 lines

Host idle function is now a glib timeout instead of a GTK one.

------------------------------------------------------------------------
r932 | rmanfredi | 2002-06-02 15:33:25 -0400 (Sun, 02 Jun 2002) | 2 lines

Avoid (improbable) division by zero.

------------------------------------------------------------------------
r931 | rmanfredi | 2002-06-02 15:32:55 -0400 (Sun, 02 Jun 2002) | 3 lines

Use g_idle_add() for timeouts, not gtk_idle_add().
cvs: ----------------------------------------------------------------------

------------------------------------------------------------------------
r930 | wyldfire | 2002-06-02 15:32:07 -0400 (Sun, 02 Jun 2002) | 2 lines

* Switched rule flags

------------------------------------------------------------------------
r929 | rmanfredi | 2002-06-02 15:31:59 -0400 (Sun, 02 Jun 2002) | 2 lines

Added sorting weight for QRP-related messages.

------------------------------------------------------------------------
r928 | wyldfire | 2002-06-02 15:30:23 -0400 (Sun, 02 Jun 2002) | 2 lines

* Added filter dialog size persistance

------------------------------------------------------------------------
r927 | wyldfire | 2002-06-02 15:29:43 -0400 (Sun, 02 Jun 2002) | 2 lines

* Fixed GTK-Critical in option_menu_get_selected_data when no menu was set yet

------------------------------------------------------------------------
r926 | wyldfire | 2002-06-02 15:28:59 -0400 (Sun, 02 Jun 2002) | 2 lines

* Fixed default filter for new search

------------------------------------------------------------------------
r925 | wyldfire | 2002-06-02 15:27:03 -0400 (Sun, 02 Jun 2002) | 2 lines

* Added rule flags, dialog position persistance, better string for RULE_SIZE

------------------------------------------------------------------------
r924 | wyldfire | 2002-06-02 15:23:38 -0400 (Sun, 02 Jun 2002) | 2 lines

* Added 'match' column and flags to filter dialog

------------------------------------------------------------------------
r923 | wyldfire | 2002-06-02 15:21:38 -0400 (Sun, 02 Jun 2002) | 2 lines

* Handle marking new rules properly

------------------------------------------------------------------------
r922 | wyldfire | 2002-06-02 15:20:41 -0400 (Sun, 02 Jun 2002) | 2 lines

* Can now cope with missing rule flags and gives better error messages

------------------------------------------------------------------------
r921 | wyldfire | 2002-06-02 11:02:01 -0400 (Sun, 02 Jun 2002) | 2 lines

* Replaced g_message with printf

------------------------------------------------------------------------
r920 | wyldfire | 2002-06-02 10:57:26 -0400 (Sun, 02 Jun 2002) | 2 lines

* Added 'Create filter' button to filter dialog

------------------------------------------------------------------------
r919 | wyldfire | 2002-06-02 10:50:58 -0400 (Sun, 02 Jun 2002) | 2 lines

* Removed g_message calls

------------------------------------------------------------------------
r918 | wyldfire | 2002-06-02 10:49:06 -0400 (Sun, 02 Jun 2002) | 2 lines

* Replaced g_message with printf and normalize bounds for RULE_SIZE

------------------------------------------------------------------------
r917 | wyldfire | 2002-06-02 10:12:12 -0400 (Sun, 02 Jun 2002) | 2 lines

* Removed g_message calls

------------------------------------------------------------------------
r916 | rmanfredi | 2002-06-02 09:40:29 -0400 (Sun, 02 Jun 2002) | 2 lines

Added nicer to read file size in K/M/G bytes.

------------------------------------------------------------------------
r915 | wyldfire | 2002-06-02 08:34:29 -0400 (Sun, 02 Jun 2002) | 2 lines

* Switched from g_message to printf

------------------------------------------------------------------------
r914 | rmanfredi | 2002-06-02 07:21:38 -0400 (Sun, 02 Jun 2002) | 2 lines

Obsoleted by new filtering code.

------------------------------------------------------------------------
r913 | rmanfredi | 2002-06-02 05:09:08 -0400 (Sun, 02 Jun 2002) | 2 lines

Restored filesize display changes from rev 1.11 that were lost during merge!

------------------------------------------------------------------------
r912 | rmanfredi | 2002-06-02 04:58:19 -0400 (Sun, 02 Jun 2002) | 2 lines

Fixed comment.

------------------------------------------------------------------------
r911 | wyldfire | 2002-06-02 04:40:38 -0400 (Sun, 02 Jun 2002) | 2 lines

Fixed double-gfree bug in filter_apply(), made rule_condition_to_gchar use private buffer

------------------------------------------------------------------------
r910 | rmanfredi | 2002-06-02 04:09:39 -0400 (Sun, 02 Jun 2002) | 2 lines

Version of 02/06/2002.

------------------------------------------------------------------------
r909 | rmanfredi | 2002-06-02 04:08:25 -0400 (Sun, 02 Jun 2002) | 2 lines

Force --enable-xml-store in debian's build.

------------------------------------------------------------------------
r908 | rmanfredi | 2002-06-02 04:06:21 -0400 (Sun, 02 Jun 2002) | 2 lines

Added build dependency on libxml2-dev.

------------------------------------------------------------------------
r907 | rmanfredi | 2002-06-02 04:02:33 -0400 (Sun, 02 Jun 2002) | 2 lines

Version of 02/06/2002.

------------------------------------------------------------------------
r906 | rmanfredi | 2002-06-02 03:50:41 -0400 (Sun, 02 Jun 2002) | 4 lines

Fixed display of filesize rules:  It is not possible to express
"filesize greater" without inverting the logic of the rule.
Simplified boolean negation logic!

------------------------------------------------------------------------
r905 | wyldfire | 2002-06-01 19:15:02 -0400 (Sat, 01 Jun 2002) | 2 lines

* Default filter_default_policy to 'display' and not 'don't display'

------------------------------------------------------------------------
r904 | wyldfire | 2002-06-01 19:12:15 -0400 (Sat, 01 Jun 2002) | 2 lines

* Properly grey out spinbutton_config_ul_usage_min_percentage

------------------------------------------------------------------------
r903 | wyldfire | 2002-06-01 19:10:52 -0400 (Sat, 01 Jun 2002) | 2 lines

* Made size rule string more reabable and continue matching if subchain could not decide

------------------------------------------------------------------------
r902 | wyldfire | 2002-06-01 12:19:14 -0400 (Sat, 01 Jun 2002) | 2 lines

* Fixed typo in help that said xml-store was on by default

------------------------------------------------------------------------
r901 | wyldfire | 2002-06-01 12:18:16 -0400 (Sat, 01 Jun 2002) | 2 lines

* Fixed bug not setting ul_usage_min_percentage properly in gui

------------------------------------------------------------------------
r900 | wyldfire | 2002-06-01 10:38:17 -0400 (Sat, 01 Jun 2002) | 2 lines

* No comment

------------------------------------------------------------------------
r899 | wyldfire | 2002-06-01 10:36:49 -0400 (Sat, 01 Jun 2002) | 2 lines

* Added support for Tobias Frech's minimal upload b/s percentage patch

------------------------------------------------------------------------
r898 | wyldfire | 2002-06-01 10:32:44 -0400 (Sat, 01 Jun 2002) | 2 lines

* Fixed assertion when editing a filter without a search open, can no longer edit builtin filters

------------------------------------------------------------------------
r897 | wyldfire | 2002-06-01 10:30:51 -0400 (Sat, 01 Jun 2002) | 2 lines

* Moved to libxml2 and added internal suport for testing a filter by colorizing search results

------------------------------------------------------------------------
r896 | wyldfire | 2002-06-01 10:28:07 -0400 (Sat, 01 Jun 2002) | 2 lines

* Removed depends on gnome-config and detect libxml2 properly

------------------------------------------------------------------------
r895 | wyldfire | 2002-06-01 10:22:10 -0400 (Sat, 01 Jun 2002) | 2 lines

* Added widgets to configure upload patch from Tobias Frech via gui

------------------------------------------------------------------------
r894 | wyldfire | 2002-06-01 10:15:24 -0400 (Sat, 01 Jun 2002) | 2 lines

* Moved from libxml1 to libxml2

------------------------------------------------------------------------
r893 | rmanfredi | 2002-05-31 13:26:10 -0400 (Fri, 31 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r892 | wyldfire | 2002-05-30 15:02:48 -0400 (Thu, 30 May 2002) | 4 lines


* Adapted to support the optional xml persistance backend for the searches
  and filters.

------------------------------------------------------------------------
r891 | wyldfire | 2002-05-30 14:17:35 -0400 (Thu, 30 May 2002) | 4 lines


* Moved on_search_switch as gui_view_search to gui.c
* Added support for the new filter dialog.

------------------------------------------------------------------------
r890 | wyldfire | 2002-05-30 14:12:22 -0400 (Thu, 30 May 2002) | 10 lines


* Changed searches list from GSList to GList.
* Use search_t instead of struct search.
* Moved to new filter code.
* Began to move search related gtk code to gui.c (gui_search_close)
* Optionally use xml backend or simple text file for makeing searches
  persistent.
* Use "search_close" instead of manually closing searches in
  search_shutdown().

------------------------------------------------------------------------
r889 | rmanfredi | 2002-05-30 14:00:05 -0400 (Thu, 30 May 2002) | 2 lines

Integrated minimal upload b/w percentage patch [From Tobias Frech].

------------------------------------------------------------------------
r888 | wyldfire | 2002-05-30 13:55:22 -0400 (Thu, 30 May 2002) | 9 lines


* Changed handling of "minium speed" widget. Must be changed further.
* Moved the gui part of removing a search from search.c to gui.c
* Removed macro definitions of the notebook page numbers and switched
  to enums.
* Moved main_window and shutdown_window to gui.c and have them as externs
  in gui.h
* Added gui_show_search(search).

------------------------------------------------------------------------
r887 | wyldfire | 2002-05-30 13:47:06 -0400 (Thu, 30 May 2002) | 6 lines


* Changed to use the new filter code. Here this is reduced to changing the
  from filters_init() to filter_init() (same for shutdown) and removing
  the include of "dialog-filters.h"
* Moved main_window and shutdown_window to gui.c.

------------------------------------------------------------------------
r886 | wyldfire | 2002-05-30 13:44:34 -0400 (Thu, 30 May 2002) | 3 lines


* Changed the name of a macro to match the gtk naming scheme.

------------------------------------------------------------------------
r885 | wyldfire | 2002-05-30 13:43:24 -0400 (Thu, 30 May 2002) | 3 lines


* Added some functions to handle option menus more easily.

------------------------------------------------------------------------
r884 | wyldfire | 2002-05-30 13:42:32 -0400 (Thu, 30 May 2002) | 3 lines


* Include "gnutella.h"

------------------------------------------------------------------------
r883 | wyldfire | 2002-05-30 12:44:56 -0400 (Thu, 30 May 2002) | 3 lines


* Almost a complete rewrite.

------------------------------------------------------------------------
r882 | wyldfire | 2002-05-30 12:43:53 -0400 (Thu, 30 May 2002) | 3 lines


* Added widgets for the new filter dialog.

------------------------------------------------------------------------
r881 | wyldfire | 2002-05-30 12:42:00 -0400 (Thu, 30 May 2002) | 4 lines


* Added persistance for columns widths in new filter dialog.
* Added default filter policy.

------------------------------------------------------------------------
r880 | wyldfire | 2002-05-30 12:34:46 -0400 (Thu, 30 May 2002) | 3 lines


* New filter dialog.

------------------------------------------------------------------------
r879 | wyldfire | 2002-05-30 12:26:20 -0400 (Thu, 30 May 2002) | 4 lines


* added option to enable/disable building of xml persistance backend
  for the searches/filters.

------------------------------------------------------------------------
r878 | wyldfire | 2002-05-30 12:14:20 -0400 (Thu, 30 May 2002) | 4 lines


* Initial version: backend for storing and retrieving  information about
  searches and filters in an xml file for persistance.

------------------------------------------------------------------------
r877 | rmanfredi | 2002-05-29 05:00:39 -0400 (Wed, 29 May 2002) | 2 lines

Renamed getdate() to date2time() to avoid conflict on Solaris.

------------------------------------------------------------------------
r876 | rmanfredi | 2002-05-28 17:52:19 -0400 (Tue, 28 May 2002) | 2 lines

When banning, emmit a Retry-After header.

------------------------------------------------------------------------
r875 | rmanfredi | 2002-05-28 17:51:45 -0400 (Tue, 28 May 2002) | 2 lines

Now parses Retry-After in HTTP replies, supersedes user-defined timeouts.

------------------------------------------------------------------------
r874 | rmanfredi | 2002-05-28 17:49:20 -0400 (Tue, 28 May 2002) | 2 lines

Ran autogen.sh after introduction of date parsing.

------------------------------------------------------------------------
r873 | rmanfredi | 2002-05-28 17:48:27 -0400 (Tue, 28 May 2002) | 2 lines

Added date parsing.

------------------------------------------------------------------------
r872 | rmanfredi | 2002-05-28 09:47:13 -0400 (Tue, 28 May 2002) | 2 lines

Forgot to include "base32.h".

------------------------------------------------------------------------
r871 | rmanfredi | 2002-05-27 14:52:39 -0400 (Mon, 27 May 2002) | 2 lines

Truncated long line.

------------------------------------------------------------------------
r870 | rmanfredi | 2002-05-27 14:51:05 -0400 (Mon, 27 May 2002) | 2 lines

Version of 27/05/2002.

------------------------------------------------------------------------
r869 | rmanfredi | 2002-05-27 14:50:12 -0400 (Mon, 27 May 2002) | 2 lines

All SHA1 digests are now stored in binary internally.

------------------------------------------------------------------------
r868 | rmanfredi | 2002-05-27 14:49:42 -0400 (Mon, 27 May 2002) | 4 lines

Was not properly sending back urn:sha1 in query hits (truncating the
':' separator).
All SHA1 digests are now stored in binary internally.

------------------------------------------------------------------------
r867 | rmanfredi | 2002-05-27 14:48:31 -0400 (Mon, 27 May 2002) | 2 lines

Added sha1_base32().

------------------------------------------------------------------------
r866 | rmanfredi | 2002-05-27 14:43:27 -0400 (Mon, 27 May 2002) | 2 lines

Added padding chars to base32 encoding, and "const" in the signatures.

------------------------------------------------------------------------
r865 | rmanfredi | 2002-05-27 12:28:03 -0400 (Mon, 27 May 2002) | 2 lines

Was not properly updating SHA1 info when library was being rebuilt.

------------------------------------------------------------------------
r864 | rmanfredi | 2002-05-27 12:26:15 -0400 (Mon, 27 May 2002) | 2 lines

Typo fix.

------------------------------------------------------------------------
r863 | rmanfredi | 2002-05-27 01:53:48 -0400 (Mon, 27 May 2002) | 2 lines

Fixed ipf_unban() to check rounded integer and not float counter for removal.

------------------------------------------------------------------------
r862 | wyldfire | 2002-05-26 01:38:52 -0400 (Sun, 26 May 2002) | 3 lines


* Added new file_exists([filename]) function

------------------------------------------------------------------------
r861 | wyldfire | 2002-05-26 01:37:30 -0400 (Sun, 26 May 2002) | 3 lines


* Removed prototype for file_exists function, which does not exist

------------------------------------------------------------------------
r860 | rmanfredi | 2002-05-24 14:16:46 -0400 (Fri, 24 May 2002) | 2 lines

Fixed slow GUI startup.

------------------------------------------------------------------------
r859 | rmanfredi | 2002-05-24 12:57:11 -0400 (Fri, 24 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r858 | rmanfredi | 2002-05-24 12:56:01 -0400 (Fri, 24 May 2002) | 2 lines

Added anti-hammering feature.

------------------------------------------------------------------------
r857 | rmanfredi | 2002-05-24 12:55:34 -0400 (Fri, 24 May 2002) | 2 lines

First stab at QRP.  Computes the routing table, but it is not used yet.

------------------------------------------------------------------------
r856 | rmanfredi | 2002-05-24 12:54:45 -0400 (Fri, 24 May 2002) | 2 lines

Always honour HEAD requests, even when busy.

------------------------------------------------------------------------
r855 | rmanfredi | 2002-05-24 12:51:57 -0400 (Fri, 24 May 2002) | 2 lines

First stab at QRP.  Added ultranode states.

------------------------------------------------------------------------
r854 | rmanfredi | 2002-05-24 12:51:01 -0400 (Fri, 24 May 2002) | 3 lines

Was not accounting Gnet header traffic as Gnet bandwidth.
Callout queue is now a global service (moved to main).

------------------------------------------------------------------------
r853 | rmanfredi | 2002-05-24 12:49:36 -0400 (Fri, 24 May 2002) | 2 lines

Exported match_map_string() for QRP.

------------------------------------------------------------------------
r852 | rmanfredi | 2002-05-24 12:48:53 -0400 (Fri, 24 May 2002) | 3 lines

Callout queue is now a global service and is initialized from main.
Try to scan library when GUI is brought up.

------------------------------------------------------------------------
r851 | rmanfredi | 2002-05-24 12:48:20 -0400 (Fri, 24 May 2002) | 2 lines

Added QRP message definition.

------------------------------------------------------------------------
r850 | rmanfredi | 2002-05-24 12:47:45 -0400 (Fri, 24 May 2002) | 2 lines

Plugged in QRP and anti-hammering features.

------------------------------------------------------------------------
r849 | wyldfire | 2002-05-24 07:30:49 -0400 (Fri, 24 May 2002) | 4 lines


* Fixed bug: active search not updated when search is selected from
  sidebar search list

------------------------------------------------------------------------
r848 | wyldfire | 2002-05-24 06:13:58 -0400 (Fri, 24 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r847 | wyldfire | 2002-05-24 06:09:02 -0400 (Fri, 24 May 2002) | 3 lines


* Initial release

------------------------------------------------------------------------
r846 | wyldfire | 2002-05-24 06:06:15 -0400 (Fri, 24 May 2002) | 3 lines


* Usual support update.

------------------------------------------------------------------------
r845 | wyldfire | 2002-05-24 06:05:32 -0400 (Fri, 24 May 2002) | 9 lines


* Moved the updateing of the traffic stats from gui_update_global() to
  gui_update_traffic_stats and only call it in the main timer. No need
  to call it more often (gui_update_global is called from some callbacks
  and stuff).
* Moved menu initialization from main.c to gui.c. This means most of
  the gtk stuff is now removed from main.c
* Added support for the sidebar search list.

------------------------------------------------------------------------
r844 | wyldfire | 2002-05-24 06:04:00 -0400 (Fri, 24 May 2002) | 5 lines


* Added more enums to gui.h to describe important gui values (like
  giving names to notebook pages)
* Added: gui_update_traffic_stats(void)

------------------------------------------------------------------------
r843 | wyldfire | 2002-05-24 06:02:29 -0400 (Fri, 24 May 2002) | 5 lines


* Added support for the search list in the sidebar
* Made notebook tabs in search results tab not hide if there is no search.
  This had conflicted with either showing tabs or sidebar list.

------------------------------------------------------------------------
r842 | wyldfire | 2002-05-24 05:59:54 -0400 (Fri, 24 May 2002) | 19 lines


* Freeze clists during all actions which take place on the the selection.
* Replaced g_assert(0) with g_assert_not_reached() where found.
* Made "unselect" signal callback for downloads and queue call the
  "select" signal. Same actions needed.
* Instead of unrealizing and removing the arrow widget, just destroy
  it.
* If the tab in notebook_main is switched, the tree menu reflects the
  change.
* Carry information about which tab is associated with which menu item
  from the tree menu directly in the user_data of the node instead
  of in a static array.
* Added support for "copy url" and "connect" items in downloads/queue
  popups.
* Fixed bug which caused both, "firewalled" and "not firewalled" icons
  to be displayed when hiding and then showing the statusbar again.
* Added a optional search list to the sidebar. Displays: search name,
  hits, new hits (number and color), paused searches (color)

------------------------------------------------------------------------
r841 | wyldfire | 2002-05-24 05:54:58 -0400 (Fri, 24 May 2002) | 5 lines


* Removed traffic update stuff from gui_update_global and call it in the
  main timer
* Moved ctree menu initialization from to gui_init_menu() (private in gui.c)

------------------------------------------------------------------------
r840 | wyldfire | 2002-05-24 05:53:47 -0400 (Fri, 24 May 2002) | 6 lines


* Added gtk_clist_set_column_name hack to support GtkColumnChooser.
  This is a evil hack because it uses private internals of gtkclist
  which may be changed without further notice.
* Use gtk_events_pending() instead of g_main_pending() in gtk_main_flush().

------------------------------------------------------------------------
r839 | wyldfire | 2002-05-24 05:51:49 -0400 (Fri, 24 May 2002) | 10 lines


* Added: clist_search
         popup_search_config_cols
	 popup_queue_copy_url
	 popup_queue_connect
	 popup_downloads_connect
	 vpaned_sidebar
	 hb_searches
	 notebook_siderbar

------------------------------------------------------------------------
r838 | wyldfire | 2002-05-24 05:50:41 -0400 (Fri, 24 May 2002) | 4 lines


* Almost done cleaning up config.c
* Addes support for column size of search list (sidebar) and sidebar width.

------------------------------------------------------------------------
r837 | wyldfire | 2002-05-24 05:49:33 -0400 (Fri, 24 May 2002) | 4 lines


* Added support for col width in search list (sidebar) and size of the
  sizebar.

------------------------------------------------------------------------
r836 | wyldfire | 2002-05-24 05:48:46 -0400 (Fri, 24 May 2002) | 3 lines


* Added gtkcolumnchooser.c and gtkcolumnchooser.h to the build files.

------------------------------------------------------------------------
r835 | wyldfire | 2002-05-24 05:47:20 -0400 (Fri, 24 May 2002) | 12 lines


* allow shrinking of main window to smaller then minimum size required
  by the child widgets
* Added a optional search list to the sidebar. Displays: search name,
  hits, new hits (number and color), paused searches (color)
* Made tree menu resizable in both directions.
* Added "copy url" item to queue popup
* Added "connect to host" item to queue and downloads popup
* Added "configure columns" item to search results popup.
  Note: the visibility state of the colums is not persistent, this
  is only a proof of concept for the selection widget yet.

------------------------------------------------------------------------
r834 | rmanfredi | 2002-05-24 02:45:16 -0400 (Fri, 24 May 2002) | 2 lines

Fixed wrong assertion.

------------------------------------------------------------------------
r833 | rmanfredi | 2002-05-23 14:39:02 -0400 (Thu, 23 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r832 | rmanfredi | 2002-05-22 16:24:23 -0400 (Wed, 22 May 2002) | 2 lines

Added missing <string.h> include.

------------------------------------------------------------------------
r831 | rmanfredi | 2002-05-21 11:05:34 -0400 (Tue, 21 May 2002) | 3 lines

Fixed search statistics scheduling mess, and removed spurious main
initialization since GUI settings already triggered search_stats_enable().

------------------------------------------------------------------------
r830 | rmanfredi | 2002-05-21 10:12:33 -0400 (Tue, 21 May 2002) | 2 lines

Added UTF-8 decoder for queries, and transformation to ISO-8859-1.

------------------------------------------------------------------------
r829 | rmanfredi | 2002-05-21 09:36:51 -0400 (Tue, 21 May 2002) | 2 lines

Typo fix in comment.

------------------------------------------------------------------------
r828 | rmanfredi | 2002-05-21 04:12:11 -0400 (Tue, 21 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r827 | rmanfredi | 2002-05-20 18:24:17 -0400 (Mon, 20 May 2002) | 2 lines

Another batch of off_t args cast into unsigned long.

------------------------------------------------------------------------
r826 | rmanfredi | 2002-05-20 18:17:44 -0400 (Mon, 20 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r825 | rmanfredi | 2002-05-20 18:17:13 -0400 (Mon, 20 May 2002) | 6 lines

Cast all file sizes to long before printf("%ld") since some machines
have 64-bit off_t (but Gnuetlla only has a 32-bit field for propagating
file sizes, so it does not matter).
Forgot to emit initial header when appending values to persistent cache.
Hacked a quick fix for the duplicate SHA1 work problem.

------------------------------------------------------------------------
r824 | rmanfredi | 2002-05-20 14:12:07 -0400 (Mon, 20 May 2002) | 2 lines

We need "hosts.h" for hosts_in_catcher.

------------------------------------------------------------------------
r823 | rmanfredi | 2002-05-20 14:10:18 -0400 (Mon, 20 May 2002) | 3 lines

Applied structure packing, SOCKS error message fix, and cleanup patch
[From Michael Core].

------------------------------------------------------------------------
r822 | rmanfredi | 2002-05-20 13:40:45 -0400 (Mon, 20 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r821 | rmanfredi | 2002-05-20 10:40:32 -0400 (Mon, 20 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r820 | rmanfredi | 2002-05-20 10:39:57 -0400 (Mon, 20 May 2002) | 2 lines

Applied Solaris compile patch #558202 [From Uros Bizjak].

------------------------------------------------------------------------
r819 | rmanfredi | 2002-05-20 10:28:10 -0400 (Mon, 20 May 2002) | 2 lines

Applied cleanup patch #557071 [From Uros Bizjak].

------------------------------------------------------------------------
r818 | rmanfredi | 2002-05-20 10:22:33 -0400 (Mon, 20 May 2002) | 2 lines

Version of 20/05/2002.

------------------------------------------------------------------------
r817 | rmanfredi | 2002-05-20 10:21:35 -0400 (Mon, 20 May 2002) | 2 lines

Reformatting.

------------------------------------------------------------------------
r816 | rmanfredi | 2002-05-20 10:14:43 -0400 (Mon, 20 May 2002) | 3 lines

Will now send back X-Gnutella-Content-URN in the HTTP reply with the SHA1
(if we have it) on 503 Busy errors.

------------------------------------------------------------------------
r815 | wyldfire | 2002-05-20 08:16:53 -0400 (Mon, 20 May 2002) | 3 lines


* Files had the wrong names. Closes #558219

------------------------------------------------------------------------
r814 | rmanfredi | 2002-05-20 04:22:17 -0400 (Mon, 20 May 2002) | 4 lines

Fixed segfault at shutdown time (dup free of the user_agent field).
Honour X-Gnutella-Content-URN in requests and send a 404 error if
the file we have does not match.

------------------------------------------------------------------------
r813 | rmanfredi | 2002-05-20 04:19:20 -0400 (Mon, 20 May 2002) | 2 lines

Now uses gtk_main_flush() to update the GUI, not the single loop iteration.

------------------------------------------------------------------------
r812 | rmanfredi | 2002-05-20 04:17:52 -0400 (Mon, 20 May 2002) | 3 lines

When the full SHA1 hashing credit is not used, do not perform the
feedback adjustment, since those assume all the credit was used.

------------------------------------------------------------------------
r811 | rmanfredi | 2002-05-20 04:14:49 -0400 (Mon, 20 May 2002) | 3 lines

When queuing a download from the same GUID/file, check the IP:port in
case it changed since we queued it, and not solely reject it as a duplicate.

------------------------------------------------------------------------
r810 | wyldfire | 2002-05-19 20:23:20 -0400 (Sun, 19 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r809 | wyldfire | 2002-05-19 20:22:33 -0400 (Sun, 19 May 2002) | 4 lines


* Remove "stop sorting" from search popup. This can now be achived
  by clicking on the column headers.

------------------------------------------------------------------------
r808 | wyldfire | 2002-05-19 20:21:53 -0400 (Sun, 19 May 2002) | 4 lines


* Display sort order in searches in column header
  (closes #557690)

------------------------------------------------------------------------
r807 | wyldfire | 2002-05-19 20:20:00 -0400 (Sun, 19 May 2002) | 6 lines


* Display sort order in searches in column header
  (closes #557690)
* Remove "stop sorting" from search popup. This can now be achived
  by clicking on the column headers.

------------------------------------------------------------------------
r806 | wyldfire | 2002-05-19 20:18:05 -0400 (Sun, 19 May 2002) | 7 lines


* Added "Server" column to downloads and queue
* Display sort order in searches in column header
  (closes #557690)
* Remove "stop sorting" from search popup. This can now be achived
  by clicking on the column headers.

------------------------------------------------------------------------
r805 | wyldfire | 2002-05-19 19:59:58 -0400 (Sun, 19 May 2002) | 3 lines


* Added note about artwork.

------------------------------------------------------------------------
r804 | wyldfire | 2002-05-19 19:56:51 -0400 (Sun, 19 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r803 | rmanfredi | 2002-05-19 17:58:43 -0400 (Sun, 19 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r802 | wyldfire | 2002-05-19 17:21:52 -0400 (Sun, 19 May 2002) | 3 lines


* Added persistence for new column sizes in uploads, downloads and queue

------------------------------------------------------------------------
r801 | wyldfire | 2002-05-19 17:20:49 -0400 (Sun, 19 May 2002) | 5 lines


* Removed obsolete on_clist_uploads_click_column
* Replaced numeric values in on_clist_search_click_column with
  constants.

------------------------------------------------------------------------
r800 | wyldfire | 2002-05-19 17:18:19 -0400 (Sun, 19 May 2002) | 3 lines


* Added support for the "Server" column in downloads and queue

------------------------------------------------------------------------
r799 | wyldfire | 2002-05-19 17:14:48 -0400 (Sun, 19 May 2002) | 4 lines


* Added support for the new columns "User agent" and "Server" in
  uploads, downloads and queue.

------------------------------------------------------------------------
r798 | wyldfire | 2002-05-19 17:12:20 -0400 (Sun, 19 May 2002) | 4 lines


* Added "User agent" column to uploads
* Added "Server" columns to downloads and queue

------------------------------------------------------------------------
r797 | wyldfire | 2002-05-19 17:10:47 -0400 (Sun, 19 May 2002) | 3 lines


* Added "User agent" column

------------------------------------------------------------------------
r796 | rmanfredi | 2002-05-19 17:06:30 -0400 (Sun, 19 May 2002) | 2 lines

Call huge_close() on shutdown.

------------------------------------------------------------------------
r795 | rmanfredi | 2002-05-19 17:05:58 -0400 (Sun, 19 May 2002) | 4 lines

Use glib timeouts, not gtk ones to not needlessly tie to the GUI.
Improved timer adjustment feedback to shoot for 3/2 of the max life.
Added debugging SHA1 computation rate traces.

------------------------------------------------------------------------
r794 | rmanfredi | 2002-05-19 17:03:38 -0400 (Sun, 19 May 2002) | 2 lines

Typo fixes in comments.

------------------------------------------------------------------------
r793 | rmanfredi | 2002-05-19 14:55:34 -0400 (Sun, 19 May 2002) | 2 lines

Keep track of User-Agent and Server in HTTP requests.

------------------------------------------------------------------------
r792 | rmanfredi | 2002-05-19 14:54:45 -0400 (Sun, 19 May 2002) | 3 lines

Don't run file name searches on small query texts when there is an URN
match attempted.

------------------------------------------------------------------------
r791 | rmanfredi | 2002-05-19 13:07:36 -0400 (Sun, 19 May 2002) | 2 lines

Force creation of config directory if it does not exist (fixes bug #557114).

------------------------------------------------------------------------
r790 | rmanfredi | 2002-05-19 10:51:53 -0400 (Sun, 19 May 2002) | 2 lines

Integrated SHA1 / HUGE patch [From Ch. Tronche].

------------------------------------------------------------------------
r789 | rmanfredi | 2002-05-19 10:48:46 -0400 (Sun, 19 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r788 | rmanfredi | 2002-05-19 10:38:54 -0400 (Sun, 19 May 2002) | 3 lines

Cosmetic fixes (spaces instead of tabs).
Was forgetting to include "gtk-missing.h".

------------------------------------------------------------------------
r787 | wyldfire | 2002-05-19 05:46:39 -0400 (Sun, 19 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r786 | wyldfire | 2002-05-19 05:46:07 -0400 (Sun, 19 May 2002) | 4 lines


* Removed: button_queue_clear
* Added: hpaned_main

------------------------------------------------------------------------
r785 | wyldfire | 2002-05-19 05:45:38 -0400 (Sun, 19 May 2002) | 3 lines


* Added support for persistence of sidebar size.

------------------------------------------------------------------------
r784 | wyldfire | 2002-05-19 05:44:38 -0400 (Sun, 19 May 2002) | 5 lines


* Added gtk_main_flush: Process all pending gtk events (i.e. draw now!)
  Returns TRUE if gtk_main_quit has been called for the innermost mainloop.
  Aborts flush if gtk_main_quit has been called.

------------------------------------------------------------------------
r783 | wyldfire | 2002-05-19 05:43:40 -0400 (Sun, 19 May 2002) | 4 lines


* Increased sleep time during shutdown to 200ms again, but process any
  pending Gtk events before sleeping.

------------------------------------------------------------------------
r782 | wyldfire | 2002-05-19 05:42:53 -0400 (Sun, 19 May 2002) | 3 lines


* Made sidebar size (main_divider_pos) persistent

------------------------------------------------------------------------
r781 | wyldfire | 2002-05-19 05:41:37 -0400 (Sun, 19 May 2002) | 3 lines


* Removed callbacked for "clear" button in queue (which was removed)

------------------------------------------------------------------------
r780 | wyldfire | 2002-05-19 05:40:25 -0400 (Sun, 19 May 2002) | 9 lines


* Removed "clear queue" button. This is not necessary. To clear the
  whole queue, just use a empty regex to select all and then use
  "abort" from the popup menu. We don't want people to accidentially
  purge thier queue.
* Made non-editable entries sensitive, so that at thier content is
  copy-pastable.
* Changed tooltip text for the "local netmask" stuff.

------------------------------------------------------------------------
r779 | rmanfredi | 2002-05-19 05:18:38 -0400 (Sun, 19 May 2002) | 2 lines

Typo fix.

------------------------------------------------------------------------
r778 | rmanfredi | 2002-05-19 02:36:14 -0400 (Sun, 19 May 2002) | 2 lines

Version of 18/05/2002.

------------------------------------------------------------------------
r777 | rmanfredi | 2002-05-19 02:35:16 -0400 (Sun, 19 May 2002) | 4 lines

Pay attention to GUI settings for bandwidth limitation before enabling
the corresponding schedulers: only do so when they explicitly wish
to limit traffic (provided allocated bandwidth is >0).

------------------------------------------------------------------------
r776 | rmanfredi | 2002-05-18 14:57:13 -0400 (Sat, 18 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r775 | rmanfredi | 2002-05-18 14:44:43 -0400 (Sat, 18 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r774 | rmanfredi | 2002-05-18 09:24:49 -0400 (Sat, 18 May 2002) | 2 lines

Reset the "BYE sent" flag when node is removed to avoid timer picking it up.

------------------------------------------------------------------------
r773 | rmanfredi | 2002-05-18 08:07:20 -0400 (Sat, 18 May 2002) | 3 lines

Reorganized the way we detect that BYE was sent, and added support for
probing the size of the TX stack.

------------------------------------------------------------------------
r772 | rmanfredi | 2002-05-18 06:50:13 -0400 (Sat, 18 May 2002) | 2 lines

Grace period is now 30 seconds.

------------------------------------------------------------------------
r771 | rmanfredi | 2002-05-18 06:49:15 -0400 (Sat, 18 May 2002) | 2 lines

Fixed order of calls in host_close().

------------------------------------------------------------------------
r770 | wyldfire | 2002-05-18 06:34:33 -0400 (Sat, 18 May 2002) | 4 lines


* Fixed countdown in shutdown notice and remove unused code snippets
  frmo trying to fix the segfault problem.

------------------------------------------------------------------------
r769 | rmanfredi | 2002-05-18 06:13:16 -0400 (Sat, 18 May 2002) | 2 lines

Moved pong-caching code to pcache.c.

------------------------------------------------------------------------
r768 | rmanfredi | 2002-05-18 03:14:39 -0400 (Sat, 18 May 2002) | 3 lines

Improved shutdown code to avoid segfaults in grace period and deny all
pending Gnet connections cleanly.

------------------------------------------------------------------------
r767 | wyldfire | 2002-05-17 21:38:46 -0400 (Fri, 17 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r766 | wyldfire | 2002-05-17 21:37:36 -0400 (Fri, 17 May 2002) | 7 lines


* Added in the display of the shutdown notice during grace period.
* Tried to fix problem with segfault during shutdown and thus
  disabled timer calls in main timer for things that were
  already closed (uploads/downloads) during grace period.
  Failed miserably because we still have a segfault.

------------------------------------------------------------------------
r765 | wyldfire | 2002-05-17 21:34:34 -0400 (Fri, 17 May 2002) | 4 lines


* Added gui_update_queue_frozed to make to possible for gui o reflect
  changes to the "frozen" state of the queue

------------------------------------------------------------------------
r764 | wyldfire | 2002-05-17 21:33:46 -0400 (Fri, 17 May 2002) | 5 lines


* Made it possible to gui to reflect the "queue frozen" state properly.
* Changed logic for max value on bandwidth progressbars when
  bandwidth control is off. Remember highest value.

------------------------------------------------------------------------
r763 | wyldfire | 2002-05-17 21:31:40 -0400 (Fri, 17 May 2002) | 5 lines


* Split download_freeze_queue to download_freeze_queue and
  download_thaw_queue and made it possible to call them multiple
  times (n times freezing requires n times thawing).

------------------------------------------------------------------------
r762 | wyldfire | 2002-05-17 21:30:21 -0400 (Fri, 17 May 2002) | 3 lines


* Removed callback for "stream" button on search panel.

------------------------------------------------------------------------
r761 | wyldfire | 2002-05-17 21:29:50 -0400 (Fri, 17 May 2002) | 4 lines


* Fixed up freezing of queue while dragging items around in the queue.
* Remove stuff for "stream" button on search panel (which was also removed)

------------------------------------------------------------------------
r760 | wyldfire | 2002-05-17 21:27:21 -0400 (Fri, 17 May 2002) | 4 lines


* Added: label_shutdown_count
* Removed: button_search_stream

------------------------------------------------------------------------
r759 | wyldfire | 2002-05-17 21:26:22 -0400 (Fri, 17 May 2002) | 3 lines


* More tidy up.

------------------------------------------------------------------------
r758 | wyldfire | 2002-05-17 21:25:51 -0400 (Fri, 17 May 2002) | 5 lines


* Added shutdown notification window
* Used gtkvpaned so size of sidebar can be adjusted and made menu expand.
  This because a guys on sourceforge has a problem with 12pt fonts.:

------------------------------------------------------------------------
r757 | rmanfredi | 2002-05-17 16:54:39 -0400 (Fri, 17 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r756 | rmanfredi | 2002-05-17 16:54:14 -0400 (Fri, 17 May 2002) | 2 lines

Added extended copyright notices, per FSF recommendations.

------------------------------------------------------------------------
r755 | rmanfredi | 2002-05-17 16:53:30 -0400 (Fri, 17 May 2002) | 2 lines

Created.

------------------------------------------------------------------------
r754 | rmanfredi | 2002-05-17 14:48:01 -0400 (Fri, 17 May 2002) | 2 lines

Cleaned up some comments.

------------------------------------------------------------------------
r753 | rmanfredi | 2002-05-17 14:43:50 -0400 (Fri, 17 May 2002) | 3 lines

Added exit grace period to make sure final BYE messages get a reasonable
chance of being sent.

------------------------------------------------------------------------
r752 | rmanfredi | 2002-05-17 13:11:27 -0400 (Fri, 17 May 2002) | 3 lines

Fixed guess_local_ip() to never replace a previous non-private IP with
a private one.

------------------------------------------------------------------------
r751 | wyldfire | 2002-05-16 16:40:20 -0400 (Thu, 16 May 2002) | 3 lines


* Fixed g_return_if_fail in function with gint return value any coding style.

------------------------------------------------------------------------
r750 | rmanfredi | 2002-05-16 16:37:59 -0400 (Thu, 16 May 2002) | 2 lines

Display download queue status entries.

------------------------------------------------------------------------
r749 | wyldfire | 2002-05-16 16:31:43 -0400 (Thu, 16 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r748 | wyldfire | 2002-05-16 16:15:07 -0400 (Thu, 16 May 2002) | 4 lines


* Catch drag_start and drag_end signal of the queue clist and freeze
  the queue during drag. This hopefully fixes sourceforge bug #555758

------------------------------------------------------------------------
r747 | wyldfire | 2002-05-16 15:13:16 -0400 (Thu, 16 May 2002) | 4 lines


* Changed Makefile.am to include gtk-missing.c and gtk-missing.h to
  files list

------------------------------------------------------------------------
r746 | wyldfire | 2002-05-16 15:12:16 -0400 (Thu, 16 May 2002) | 3 lines


* Added: vpaned_downloads

------------------------------------------------------------------------
r745 | wyldfire | 2002-05-16 15:10:42 -0400 (Thu, 16 May 2002) | 5 lines


* Added gui_shutdown() to fetch the value of downloads_divider_pos
  before we save the config file.
* Restore position of the divider on the downloads pane.

------------------------------------------------------------------------
r744 | wyldfire | 2002-05-16 15:09:02 -0400 (Thu, 16 May 2002) | 4 lines


* Added gui_shutdown() to fetch the value of downloads_divider_pos
  before we save the config file.

------------------------------------------------------------------------
r743 | wyldfire | 2002-05-16 15:07:49 -0400 (Thu, 16 May 2002) | 3 lines


* Added persistancy for downloads_divider_pos

------------------------------------------------------------------------
r742 | wyldfire | 2002-05-16 15:06:06 -0400 (Thu, 16 May 2002) | 4 lines


* Fiddled around a little with the filter dialog.
* Changed frame-shadows on the stats panel

------------------------------------------------------------------------
r741 | wyldfire | 2002-05-16 15:03:34 -0400 (Thu, 16 May 2002) | 3 lines


* Added gtk-missing.c and gtk-missing.h to the files list.

------------------------------------------------------------------------
r740 | rmanfredi | 2002-05-15 17:05:28 -0400 (Wed, 15 May 2002) | 3 lines

Added comment explaining why a size mismatch is always going to cause
us to abort the download.

------------------------------------------------------------------------
r739 | rmanfredi | 2002-05-15 14:42:37 -0400 (Wed, 15 May 2002) | 2 lines

Applied enum/macro cleanup patch #555837 [From Uros Bizjak].

------------------------------------------------------------------------
r738 | wyldfire | 2002-05-15 09:27:29 -0400 (Wed, 15 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r737 | wyldfire | 2002-05-15 09:20:56 -0400 (Wed, 15 May 2002) | 4 lines


* Added support for new widgets: host_catcher stuff, gNet traffic display
  and gNet bandwidth configuration

------------------------------------------------------------------------
r736 | wyldfire | 2002-05-15 09:19:30 -0400 (Wed, 15 May 2002) | 4 lines


* Added: gui_update_hosts_in_catcher, gui_update_stats_frames
* Ususal updates for new widgets (gNet display status, bandwidth)

------------------------------------------------------------------------
r735 | wyldfire | 2002-05-15 09:17:57 -0400 (Wed, 15 May 2002) | 5 lines


* Changed all *bps* variables to *bws*.
* Still load *bps* from config file for compatibility
* Added support for new widgets (gNet display, bandwidth control)

------------------------------------------------------------------------
r734 | wyldfire | 2002-05-15 09:16:04 -0400 (Wed, 15 May 2002) | 7 lines


* Changed all spinbutton events to "connect after".
* Replace hosts_in_cache entry with progressbar
* Added display for gNet traffic
* Changed some min/max limits on config items
* Added configuration of gNet bandwidth control

------------------------------------------------------------------------
r733 | wyldfire | 2002-05-15 09:13:25 -0400 (Wed, 15 May 2002) | 10 lines


* Changed: *_bps_* -> *_bws_*
	   entry_hosts_in_catcher -> progressbar_hosts_in_catcher
* Added: menu_bws_gin_visible
	 menu_bws_gout_visible
	 checkbutton_config_bws_(gin|gout)
	 spinbutton_config_bws_(gin|gout)
	 progressbar_bws_(gin|gout)
	 frame_bws_(g)inout

------------------------------------------------------------------------
r732 | wyldfire | 2002-05-15 09:10:06 -0400 (Wed, 15 May 2002) | 10 lines


* Added support for new widgets
* created two new statusbar contexts: scid_ip_changed, scid_warn
* Adjusted column width setting code for "status" column in queue
* Added gui_update_stats_frames() to display or hide the enclosing
  frames of the traffic progressbars. They need not be shown when
  no traffic is displayed.
* Added gui_address_changed() to take care of all gui actions that
  take place when our listening address or port change.

------------------------------------------------------------------------
r731 | wyldfire | 2002-05-15 09:05:52 -0400 (Wed, 15 May 2002) | 4 lines


* Separated the "prune cache" part out of host_add to host_prune_cache,
  because I need that for prompt response to changing max_hosts_cached.

------------------------------------------------------------------------
r730 | wyldfire | 2002-05-15 09:04:09 -0400 (Wed, 15 May 2002) | 3 lines


* gui_update_config_port has argument now.

------------------------------------------------------------------------
r726 | wyldfire | 2002-05-14 17:42:29 -0400 (Tue, 14 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r725 | rmanfredi | 2002-05-14 16:52:58 -0400 (Tue, 14 May 2002) | 2 lines

Version of 14/05/2002.

------------------------------------------------------------------------
r724 | rmanfredi | 2002-05-14 16:37:20 -0400 (Tue, 14 May 2002) | 2 lines

Fixed assertions on search sending to account for initial random hop count.

------------------------------------------------------------------------
r723 | rmanfredi | 2002-05-14 16:35:31 -0400 (Tue, 14 May 2002) | 2 lines

Would not enable lower servicing (and therefore hang TX) when 0 bytes written.

------------------------------------------------------------------------
r722 | wyldfire | 2002-05-14 16:20:47 -0400 (Tue, 14 May 2002) | 28 lines


* Added:  entry_config_move_path
          entry_config_save_path
          spinbutton_config_bps_in
	  spinbutton_config_bps_out
	  spinbutton_config_port
	  spinbutton_config_proxy_port
	  spinbutton_config_max_high_ttl_radius
	  spinbutton_config_max_high_ttl_msg
	  spinbutton_config_hard_ttl_limit
	  spinbutton_config_download_overlap_range
	  spinbutton_config_download_max_retries
	  spinbutton_config_download_retry_stopped
	  spinbutton_config_download_retry_refused_delay
	  spinbutton_config_download_retry_busy_delay
	  spinbutton_config_download_retry_timeout_delay
	  spinbutton_config_download_retry_timeout_max
	  spinbutton_config_download_retry_timeout_min
	  spinbutton_config_download_connecting_timeout
	  spinbutton_config_download_push_sent_timeout
	  spinbutton_config_download_connected_timeout
	  spinbutton_config_node_tx_flowc_timeout
	  spinbutton_config_node_connecting_timeout
	  spinbutton_config_node_connected_timeout
	  spinbutton_config_upload_connecting_timeout
	  spinbutton_config_upload_connected_timeout
	  spinbutton_nodes_max_hosts_cached

------------------------------------------------------------------------
r721 | wyldfire | 2002-05-14 16:17:52 -0400 (Tue, 14 May 2002) | 4 lines


* Added lots of widgets control config variables which were missing from
  the gui until now. (to many to list)

------------------------------------------------------------------------
r720 | wyldfire | 2002-05-14 16:15:35 -0400 (Tue, 14 May 2002) | 3 lines


* Remove unused array titles[]

------------------------------------------------------------------------
r719 | rmanfredi | 2002-05-14 16:05:14 -0400 (Tue, 14 May 2002) | 2 lines

Finished Gnet bandwidth limitation on TX.

------------------------------------------------------------------------
r718 | rmanfredi | 2002-05-14 14:17:08 -0400 (Tue, 14 May 2002) | 2 lines

Added support for Gnet bandwidth limiting (core only, no GUI settings).

------------------------------------------------------------------------
r717 | rmanfredi | 2002-05-13 17:33:18 -0400 (Mon, 13 May 2002) | 2 lines

Added traffic compression ratios.

------------------------------------------------------------------------
r716 | rmanfredi | 2002-05-12 13:37:36 -0400 (Sun, 12 May 2002) | 2 lines

Lowered needed debug level for flow-control messages from 10 to 5.

------------------------------------------------------------------------
r715 | rmanfredi | 2002-05-12 13:24:46 -0400 (Sun, 12 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r714 | rmanfredi | 2002-05-12 13:17:55 -0400 (Sun, 12 May 2002) | 2 lines

Removed debugging warning on Z_BUF_ERROR when TX flushing.

------------------------------------------------------------------------
r713 | wyldfire | 2002-05-12 13:13:36 -0400 (Sun, 12 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r712 | rmanfredi | 2002-05-12 13:05:34 -0400 (Sun, 12 May 2002) | 2 lines

Search stats configuration unit is now the second.

------------------------------------------------------------------------
r711 | wyldfire | 2002-05-12 12:45:00 -0400 (Sun, 12 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r710 | wyldfire | 2002-05-12 12:36:57 -0400 (Sun, 12 May 2002) | 3 lines


* Added "Status" column to downloads queue

------------------------------------------------------------------------
r709 | rmanfredi | 2002-05-12 11:42:00 -0400 (Sun, 12 May 2002) | 3 lines

Fixed assertion failure in deflate_rotate_and_send(): the culprit was
deflate_nagle_timeout() which called that routine without checking.

------------------------------------------------------------------------
r708 | wyldfire | 2002-05-12 11:23:05 -0400 (Sun, 12 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r707 | wyldfire | 2002-05-12 11:22:09 -0400 (Sun, 12 May 2002) | 3 lines


* Added "not firewalled" icon

------------------------------------------------------------------------
r706 | wyldfire | 2002-05-12 11:20:13 -0400 (Sun, 12 May 2002) | 3 lines


* Added icon for "not firewalled" state

------------------------------------------------------------------------
r705 | rmanfredi | 2002-05-12 10:44:36 -0400 (Sun, 12 May 2002) | 2 lines

Added NODE_TX_COMPRESSED and NODE_RX_COMPRESSED.

------------------------------------------------------------------------
r704 | rmanfredi | 2002-05-12 10:28:44 -0400 (Sun, 12 May 2002) | 2 lines

Compressed node traffic indicated by TXc and/or RXc in Info field.

------------------------------------------------------------------------
r703 | rmanfredi | 2002-05-12 10:27:49 -0400 (Sun, 12 May 2002) | 2 lines

Added dependency on zlib1g-dev.

------------------------------------------------------------------------
r702 | rmanfredi | 2002-05-12 09:57:17 -0400 (Sun, 12 May 2002) | 2 lines

Critical fixes in cq.c.

------------------------------------------------------------------------
r701 | rmanfredi | 2002-05-12 09:56:06 -0400 (Sun, 12 May 2002) | 6 lines

Rolled back change from last revision (forced zero initialization in events).
Fixed typo that caused hash bucket chaining to be mixed up.
Fixed order in the CH_INSERT_AFTER macro that was corrupting tail too
early (forgot it was a macro, and not a function call), depending on the
nature of its second argument.

------------------------------------------------------------------------
r700 | wyldfire | 2002-05-12 08:56:29 -0400 (Sun, 12 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r699 | wyldfire | 2002-05-12 08:55:44 -0400 (Sun, 12 May 2002) | 5 lines


* Made bandwidth settings display decimal values
* Added "firewalled" icon to statusbar
* Changed bandwidth value units from kbps to K/s

------------------------------------------------------------------------
r698 | wyldfire | 2002-05-12 08:53:49 -0400 (Sun, 12 May 2002) | 3 lines


* Added: pixmal_firewall

------------------------------------------------------------------------
r697 | wyldfire | 2002-05-12 08:53:27 -0400 (Sun, 12 May 2002) | 3 lines


* Call gui_update_is_firewalled() when is_firewalled changes

------------------------------------------------------------------------
r696 | wyldfire | 2002-05-12 08:52:47 -0400 (Sun, 12 May 2002) | 3 lines


* Added gui_update_is_firewalled()

------------------------------------------------------------------------
r695 | wyldfire | 2002-05-12 08:52:27 -0400 (Sun, 12 May 2002) | 4 lines


* Using floats now for bandwidth settings.
* Added gui_update_is_firewalled()

------------------------------------------------------------------------
r694 | wyldfire | 2002-05-12 08:49:41 -0400 (Sun, 12 May 2002) | 5 lines


* Change spinbutton support from using int to using float.
* Fixed decimal values in the bandwidth settings
* Unselect all before using regex to select (more intuitive)

------------------------------------------------------------------------
r693 | wyldfire | 2002-05-12 08:46:37 -0400 (Sun, 12 May 2002) | 3 lines


* Added depends on zlib1g for compression

------------------------------------------------------------------------
r692 | wyldfire | 2002-05-12 08:37:42 -0400 (Sun, 12 May 2002) | 4 lines


* Icon to diplay wether our gtk-gnutella client is running on a firewalled
  machine.

------------------------------------------------------------------------
r691 | rmanfredi | 2002-05-12 08:31:33 -0400 (Sun, 12 May 2002) | 2 lines

Version of 12/05/2002: polished RX/TX stacks.

------------------------------------------------------------------------
r690 | rmanfredi | 2002-05-12 07:46:57 -0400 (Sun, 12 May 2002) | 2 lines

Make sure all fields in the event are initialized to 0.

------------------------------------------------------------------------
r688 | rmanfredi | 2002-05-12 07:06:15 -0400 (Sun, 12 May 2002) | 2 lines

Need to dispose of the RX stack asynchronously, not on the interrupt stack.

------------------------------------------------------------------------
r687 | rmanfredi | 2002-05-12 07:05:45 -0400 (Sun, 12 May 2002) | 2 lines

The TX deflater writev() routine was not accurately detecting flow-control.

------------------------------------------------------------------------
r686 | rmanfredi | 2002-05-12 07:04:42 -0400 (Sun, 12 May 2002) | 2 lines

Added paranoid reset.

------------------------------------------------------------------------
r685 | rmanfredi | 2002-05-12 07:03:20 -0400 (Sun, 12 May 2002) | 2 lines

RX inflater now stops delivering packets as soon as RX is disabled.

------------------------------------------------------------------------
r684 | rmanfredi | 2002-05-12 07:01:52 -0400 (Sun, 12 May 2002) | 2 lines

Made destruction of the RX stack a true depth-first operation.

------------------------------------------------------------------------
r683 | wyldfire | 2002-05-11 20:33:06 -0400 (Sat, 11 May 2002) | 3 lines


* Load old socksv5_(user|pass) values for backwards compatibility

------------------------------------------------------------------------
r682 | rmanfredi | 2002-05-11 19:40:36 -0400 (Sat, 11 May 2002) | 2 lines

Fixed improper comment in cq_insert().

------------------------------------------------------------------------
r681 | rmanfredi | 2002-05-11 19:15:14 -0400 (Sat, 11 May 2002) | 2 lines

Ensured no line is longer than 80 characters.

------------------------------------------------------------------------
r679 | wyldfire | 2002-05-11 15:38:46 -0400 (Sat, 11 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r678 | wyldfire | 2002-05-11 15:38:16 -0400 (Sat, 11 May 2002) | 5 lines


* Moved gtk stuff from config_init() to gui_update_all()
* Introduced some macros to make adding of new config variabled quicker
* Made the state of the so far non-persistent checkbuttons persistent

------------------------------------------------------------------------
r677 | wyldfire | 2002-05-11 15:36:09 -0400 (Sat, 11 May 2002) | 7 lines


* Added: use_autodownload
	 win_[xywh]
	 bps_in_enabled
	 bps_out_enabled
* Changed: socksv5_(user|pass) -> socks_(user|pass)

------------------------------------------------------------------------
r676 | wyldfire | 2002-05-11 15:34:31 -0400 (Sat, 11 May 2002) | 6 lines


* Added callbacks for the new widgets.
* Introduced macros to binding widgets to variables quicker.
* Changed callback of "entry_queue_regex" to select queued downloads
  instead of removing them.

------------------------------------------------------------------------
r675 | wyldfire | 2002-05-11 15:32:32 -0400 (Sat, 11 May 2002) | 3 lines


* The usual update.

------------------------------------------------------------------------
r674 | wyldfire | 2002-05-11 15:31:15 -0400 (Sat, 11 May 2002) | 6 lines


* Added gui_update_* calls for many config variables.
* Defined some macros the make it quicker to bind a config variable
  to gui widgets.
* Moved all gtk stuff from config_init() to gui_update_all()

------------------------------------------------------------------------
r673 | wyldfire | 2002-05-11 15:29:30 -0400 (Sat, 11 May 2002) | 3 lines


* Added gui_update_* calls for lots of config variables

------------------------------------------------------------------------
r672 | wyldfire | 2002-05-11 15:28:24 -0400 (Sat, 11 May 2002) | 3 lines


* Moved the gtk parts of config_init() to gui_update_all().

------------------------------------------------------------------------
r671 | wyldfire | 2002-05-11 15:25:39 -0400 (Sat, 11 May 2002) | 3 lines


* corrected references to socksv5_(user|pass) to socks_(user|pass)

------------------------------------------------------------------------
r670 | wyldfire | 2002-05-11 15:24:33 -0400 (Sat, 11 May 2002) | 14 lines


* Added: checkbutton_config_bps_in
	 checkbutton_config_bps_out
	 checlbutton_search_pick_all
	 entry_nodes_guid
	 entry_nodes_ip

* Changed: entry_config_port -> spinbutton_config_port
           entry_config_socks_host -> entry_config_proxy_ip
	   entry_config_port -> spinbutton_config_port
	   entry_queue_remove_regex -> entry_queue_regex
	   checkbutton_downloads_delete_aborted ->
	   	checkbutton_download_delete_aborted

------------------------------------------------------------------------
r669 | wyldfire | 2002-05-11 15:19:55 -0400 (Sat, 11 May 2002) | 9 lines


* Added "local node" information to the main nodes display.
* Changed "Remove all matching regex" to "Select all matching regex"
  in download pane.
* Changed "Listen port" and "proxy port" to spinbuttons.
* Added "Enable autoselect" to search pane.
* Added boxes around the queue and downloads frames, so the vpaned
  scales better.

------------------------------------------------------------------------
r668 | rmanfredi | 2002-05-11 12:20:21 -0400 (Sat, 11 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r667 | rmanfredi | 2002-05-11 12:18:37 -0400 (Sat, 11 May 2002) | 2 lines

Added Gnet traffic compression.

------------------------------------------------------------------------
r666 | rmanfredi | 2002-05-11 12:15:14 -0400 (Sat, 11 May 2002) | 2 lines

Re-architected RX stack.

------------------------------------------------------------------------
r665 | wyldfire | 2002-05-11 10:04:05 -0400 (Sat, 11 May 2002) | 3 lines


* Removed download_kill (no longer needed)

------------------------------------------------------------------------
r664 | rmanfredi | 2002-05-10 12:00:18 -0400 (Fri, 10 May 2002) | 2 lines

Exported bsched_disable().

------------------------------------------------------------------------
r663 | rmanfredi | 2002-05-09 07:39:55 -0400 (Thu, 09 May 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r662 | rmanfredi | 2002-05-09 07:36:51 -0400 (Thu, 09 May 2002) | 2 lines

Added Roles section.

------------------------------------------------------------------------
r661 | rmanfredi | 2002-05-08 07:41:17 -0400 (Wed, 08 May 2002) | 3 lines

Even if bandwidth scheduler is disabled, go through the EMA computation
of the bandwidth actually used, for GUI display purposes.

------------------------------------------------------------------------
r660 | rmanfredi | 2002-05-08 07:08:30 -0400 (Wed, 08 May 2002) | 3 lines

Dynamically setting bandwidth to 0 prevented all traffic instead of
disabling bandwidth limiting.

------------------------------------------------------------------------
r659 | rmanfredi | 2002-05-08 03:39:22 -0400 (Wed, 08 May 2002) | 2 lines

Ensured no line is longer than 80 characters.

------------------------------------------------------------------------
r658 | rmanfredi | 2002-05-07 02:29:51 -0400 (Tue, 07 May 2002) | 2 lines

Updated

------------------------------------------------------------------------
r657 | rmanfredi | 2002-05-07 02:24:36 -0400 (Tue, 07 May 2002) | 2 lines

Changed "Shutdowning" -> "Closing".

------------------------------------------------------------------------
r656 | rmanfredi | 2002-05-07 02:21:49 -0400 (Tue, 07 May 2002) | 4 lines

Now that local_ip is persistent, we need to refresh it regularily in case
it changes from one invocation to the other, and not always trust its
persisted settings.

------------------------------------------------------------------------
r655 | wyldfire | 2002-05-06 19:01:55 -0400 (Mon, 06 May 2002) | 3 lines


* Fixed bug: entry_queue_remove_regex did not clear after activate.

------------------------------------------------------------------------
r654 | wyldfire | 2002-05-06 18:51:08 -0400 (Mon, 06 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r653 | wyldfire | 2002-05-06 18:50:53 -0400 (Mon, 06 May 2002) | 4 lines


* Added support for "Remove all matching regex from queue" and it's
  "case-sensitive" checkbox.

------------------------------------------------------------------------
r652 | wyldfire | 2002-05-06 18:49:24 -0400 (Mon, 06 May 2002) | 3 lines


* Added config variable: queue_regex_case (not persistent)

------------------------------------------------------------------------
r651 | wyldfire | 2002-05-06 18:48:41 -0400 (Mon, 06 May 2002) | 3 lines


* Fixed memory leak in make_text_filter: g_free(re)

------------------------------------------------------------------------
r650 | wyldfire | 2002-05-06 18:48:04 -0400 (Mon, 06 May 2002) | 4 lines


* Added download_remove_all_regex to support "Remove all matching regex
  from queue" in downloads queue.

------------------------------------------------------------------------
r649 | wyldfire | 2002-05-06 18:47:03 -0400 (Mon, 06 May 2002) | 3 lines


* Added statusbar context id for "queue remove regex"

------------------------------------------------------------------------
r648 | wyldfire | 2002-05-06 18:46:06 -0400 (Mon, 06 May 2002) | 3 lines


* Added: entry_queue_remove_regex, checkbutton_queue_regex_case

------------------------------------------------------------------------
r647 | wyldfire | 2002-05-06 18:44:40 -0400 (Mon, 06 May 2002) | 3 lines


* Added "Remove all matching regex from queue" to downloads panel.

------------------------------------------------------------------------
r646 | rmanfredi | 2002-05-05 03:36:34 -0400 (Sun, 05 May 2002) | 2 lines

Merged older changes in.

------------------------------------------------------------------------
r645 | wyldfire | 2002-05-04 16:21:56 -0400 (Sat, 04 May 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r644 | wyldfire | 2002-05-04 16:21:24 -0400 (Sat, 04 May 2002) | 3 lines


* Added gui_update_max_host_uploads

------------------------------------------------------------------------
r643 | wyldfire | 2002-05-04 16:21:06 -0400 (Sat, 04 May 2002) | 6 lines


* Moved more code from main.c to gui_init()
* removed references to clist_connections which has been removed from
  the gui
* Added gui_update_max_host_uploads

------------------------------------------------------------------------
r642 | wyldfire | 2002-05-04 16:19:00 -0400 (Sat, 04 May 2002) | 4 lines


* Fixed bug: result count in search tab is not correct when
  "remove downloaded items from list" is checked

------------------------------------------------------------------------
r641 | wyldfire | 2002-05-04 16:17:05 -0400 (Sat, 04 May 2002) | 3 lines


* moved more code to gui_init()

------------------------------------------------------------------------
r640 | wyldfire | 2002-05-04 16:14:49 -0400 (Sat, 04 May 2002) | 4 lines


* Added: spinbutton_uploads_max_ip
* Removed: clist_connections

------------------------------------------------------------------------
r639 | wyldfire | 2002-05-04 16:14:00 -0400 (Sat, 04 May 2002) | 3 lines


* removed download_kill()

------------------------------------------------------------------------
r638 | wyldfire | 2002-05-04 16:11:13 -0400 (Sat, 04 May 2002) | 3 lines


* added loading support for "Max uploads to single host"

------------------------------------------------------------------------
r637 | wyldfire | 2002-05-04 15:43:14 -0400 (Sat, 04 May 2002) | 5 lines


* Added support for the "Max uploads to host" spinbutton
* Fixed typo: "QUEUE FREEZED"
* Fixed bug: search entry not cleared

------------------------------------------------------------------------
r636 | wyldfire | 2002-05-04 15:33:06 -0400 (Sat, 04 May 2002) | 8 lines


* The usual cleanup of spacings and labels and stuff I came across
* Added preliminary designs of a new filter dialog to the glade
  file. No functionality yet. Will probably be redesigned before
  actually being integrated.
* removed clist_connections (old stats) from glade and gui code
* Added "Max uploads to single host" to uploads panel

------------------------------------------------------------------------
r635 | rmanfredi | 2002-05-04 14:41:45 -0400 (Sat, 04 May 2002) | 2 lines

Fixed bug #552255: could be wrongly freeing static string.

------------------------------------------------------------------------
r633 | rmanfredi | 2002-05-02 17:14:17 -0400 (Thu, 02 May 2002) | 2 lines

Fixed bug #551185: was not initializing local_netmasks_string.

------------------------------------------------------------------------
r632 | rmanfredi | 2002-05-01 16:39:26 -0400 (Wed, 01 May 2002) | 2 lines

Improved comments, typo fixes, cleanup.

------------------------------------------------------------------------
r631 | rmanfredi | 2002-05-01 11:46:32 -0400 (Wed, 01 May 2002) | 2 lines

Version of 01/05/2002.

------------------------------------------------------------------------
r630 | rmanfredi | 2002-05-01 11:37:14 -0400 (Wed, 01 May 2002) | 2 lines

Must log sent query text before calling mq_putq().

------------------------------------------------------------------------
r629 | rmanfredi | 2002-05-01 11:09:51 -0400 (Wed, 01 May 2002) | 2 lines

Was not resetting counter in sq_clear().

------------------------------------------------------------------------
r628 | rmanfredi | 2002-05-01 11:01:34 -0400 (Wed, 01 May 2002) | 5 lines

Fixed bug #538946: was incorrectly moving complete files out of the
done directory.  Also, "Nothing more to get" error is now reported if
one tries to downloads a smaller file (it was not flagged as an error,
so the "Completed" message was shown instead of the error text).

------------------------------------------------------------------------
r627 | rmanfredi | 2002-05-01 10:32:24 -0400 (Wed, 01 May 2002) | 2 lines

Got rid of the local-config-file overwriting.

------------------------------------------------------------------------
r626 | rmanfredi | 2002-05-01 10:04:14 -0400 (Wed, 01 May 2002) | 2 lines

Must initialize filters before searches now that searches are persistent.

------------------------------------------------------------------------
r625 | rmanfredi | 2002-05-01 09:19:15 -0400 (Wed, 01 May 2002) | 2 lines

Searches now made persistent [From Michael Tesch].

------------------------------------------------------------------------
r624 | rmanfredi | 2002-05-01 08:10:15 -0400 (Wed, 01 May 2002) | 2 lines

Was improperly counting duplicates as "bad" messages.

------------------------------------------------------------------------
r623 | rmanfredi | 2002-05-01 08:09:42 -0400 (Wed, 01 May 2002) | 2 lines

Now displays both dup/bad message counts in the Info column for nodes.

------------------------------------------------------------------------
r622 | rmanfredi | 2002-05-01 08:08:27 -0400 (Wed, 01 May 2002) | 3 lines

Integrated the search queue patch: searches are now sent once every
10 seconds on a per-connection basis. [From Alex Bennee]

------------------------------------------------------------------------
r621 | wyldfire | 2002-04-30 21:00:32 -0400 (Tue, 30 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r620 | wyldfire | 2002-04-30 20:57:06 -0400 (Tue, 30 Apr 2002) | 3 lines


* added: checkbutton_search_remove_downloaded

------------------------------------------------------------------------
r619 | wyldfire | 2002-04-30 20:56:13 -0400 (Tue, 30 Apr 2002) | 3 lines


* added config variabled: search_remove_downloaded (no saving yet)

------------------------------------------------------------------------
r618 | wyldfire | 2002-04-30 20:53:11 -0400 (Tue, 30 Apr 2002) | 4 lines


* added support for the "remove downloaded items from list" checkbox
  on the search panel

------------------------------------------------------------------------
r617 | wyldfire | 2002-04-30 20:50:40 -0400 (Tue, 30 Apr 2002) | 4 lines


* added support for "remove downloaded items from list" checkbox on
  search panels

------------------------------------------------------------------------
r616 | wyldfire | 2002-04-30 20:47:35 -0400 (Tue, 30 Apr 2002) | 3 lines


* added checkbox "remove downloaded items from list" to search panel

------------------------------------------------------------------------
r615 | wyldfire | 2002-04-30 19:29:11 -0400 (Tue, 30 Apr 2002) | 3 lines


* fixed sensitivity state of "copy url" in downloads popup

------------------------------------------------------------------------
r614 | wyldfire | 2002-04-30 19:27:35 -0400 (Tue, 30 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r613 | wyldfire | 2002-04-30 19:13:21 -0400 (Tue, 30 Apr 2002) | 3 lines


* removed popup_downloads_kill

------------------------------------------------------------------------
r612 | wyldfire | 2002-04-30 19:11:41 -0400 (Tue, 30 Apr 2002) | 3 lines


* made gui_search_history_add work

------------------------------------------------------------------------
r611 | wyldfire | 2002-04-30 19:09:57 -0400 (Tue, 30 Apr 2002) | 4 lines


* removed on_popup_downloads_kill_activate (widget removed)
* added support for search history

------------------------------------------------------------------------
r610 | wyldfire | 2002-04-30 14:51:40 -0400 (Tue, 30 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r609 | wyldfire | 2002-04-30 14:51:18 -0400 (Tue, 30 Apr 2002) | 4 lines


* added: combo_search, popup_downloads_abort_named,
  popup_downloads_abort_host

------------------------------------------------------------------------
r608 | wyldfire | 2002-04-30 14:50:10 -0400 (Tue, 30 Apr 2002) | 5 lines


* added more code to properly (de)activate widgets in the downloads
  popup
* added first beginnings of code for the search history

------------------------------------------------------------------------
r607 | wyldfire | 2002-04-30 14:47:01 -0400 (Tue, 30 Apr 2002) | 4 lines


* made on_popup_downloads_remove_file_activate actually do something
* removed some references to widgets that exist no longer

------------------------------------------------------------------------
r606 | wyldfire | 2002-04-30 14:40:21 -0400 (Tue, 30 Apr 2002) | 3 lines


* made build_url_from_download escape the filename properly

------------------------------------------------------------------------
r605 | wyldfire | 2002-04-30 14:39:07 -0400 (Tue, 30 Apr 2002) | 10 lines


* Put statistics into a handlebox so they can be displayed seperatly from
  the main window.
* Went through the gui layout and set a consistent layout style:
  horizonal spacing: 4; vertical spacing: 2; border: 2
* more removing of useless widgets and cleaning up of the widget tree
* removed from downloads popup: "abort and delete file"
* changed widget for entering search strings on search panel from
  GtkEntry to GtkCombo to prepare for search history

------------------------------------------------------------------------
r604 | rmanfredi | 2002-04-29 17:23:02 -0400 (Mon, 29 Apr 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r603 | rmanfredi | 2002-04-29 17:18:17 -0400 (Mon, 29 Apr 2002) | 2 lines

Now compiles on the Alpha, where varargs objects are different.

------------------------------------------------------------------------
r602 | rmanfredi | 2002-04-27 09:24:20 -0400 (Sat, 27 Apr 2002) | 2 lines

Added debug logging of bad packets.

------------------------------------------------------------------------
r601 | rmanfredi | 2002-04-27 07:38:02 -0400 (Sat, 27 Apr 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r600 | rmanfredi | 2002-04-27 07:36:49 -0400 (Sat, 27 Apr 2002) | 4 lines

Added download_remove_file() and download_file_exists().
Check for new "download_delete_aborted" condition in download_abort() to
remove file when it is set.

------------------------------------------------------------------------
r599 | rmanfredi | 2002-04-27 07:11:29 -0400 (Sat, 27 Apr 2002) | 3 lines

Reversed logic for forced IP, to make it behave properly: the IP is
now only updated dynamically when "force IP" is not checked.

------------------------------------------------------------------------
r598 | wyldfire | 2002-04-25 16:34:34 -0400 (Thu, 25 Apr 2002) | 3 lines


Again forgot to disable tabs.

------------------------------------------------------------------------
r597 | wyldfire | 2002-04-25 16:29:59 -0400 (Thu, 25 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r596 | wyldfire | 2002-04-25 16:07:37 -0400 (Thu, 25 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r595 | wyldfire | 2002-04-25 16:07:19 -0400 (Thu, 25 Apr 2002) | 4 lines


Enabled restoration of the state of checkbotton_downloads_delete_aborted,
  now that missing widget is also in CVS.

------------------------------------------------------------------------
r594 | wyldfire | 2002-04-25 16:05:02 -0400 (Thu, 25 Apr 2002) | 3 lines


Moved more initialization code from main.c to gui_init() in gui.c.

------------------------------------------------------------------------
r593 | wyldfire | 2002-04-25 16:02:24 -0400 (Thu, 25 Apr 2002) | 8 lines


added callbacks for "Delete file on abort" checkbutton, "copy url" popup-menu
  item.
removed callbacks for removed widgets: "update" button for port in network
  config panel.
changed general handling of focus-out and activate signals from widgets.
moved file-global variables to top of file and made them static.

------------------------------------------------------------------------
r592 | wyldfire | 2002-04-25 15:58:06 -0400 (Thu, 25 Apr 2002) | 8 lines


added checkbutton "Delete file on abort" to downloads panel.
remove the "update" button for port configuration on the config network
  panel.
replaced more entries in the config panels with GtkSpinButtons.
added "copy url" to downloads popup.
layout changes to the config panels.

------------------------------------------------------------------------
r591 | wyldfire | 2002-04-25 14:11:04 -0400 (Thu, 25 Apr 2002) | 4 lines


Added build_url_from_download to create a url suitable for a browser from
  a download stucture.

------------------------------------------------------------------------
r590 | wyldfire | 2002-04-24 10:08:59 -0400 (Wed, 24 Apr 2002) | 3 lines


Added download_delete_aborted

------------------------------------------------------------------------
r589 | rmanfredi | 2002-04-22 17:55:58 -0400 (Mon, 22 Apr 2002) | 3 lines

Added debugging output for auto-downloads, and refactored list iteration
bits to be more in line with the other uses.

------------------------------------------------------------------------
r588 | rmanfredi | 2002-04-22 17:18:51 -0400 (Mon, 22 Apr 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r587 | rmanfredi | 2002-04-22 17:12:31 -0400 (Mon, 22 Apr 2002) | 2 lines

Ignore SIGXFSZ so that subsequent write() fail.

------------------------------------------------------------------------
r586 | rmanfredi | 2002-04-22 17:07:47 -0400 (Mon, 22 Apr 2002) | 2 lines

Always update actual bandwidth used, even when the scheduler is disabled.

------------------------------------------------------------------------
r585 | rmanfredi | 2002-04-22 15:32:07 -0400 (Mon, 22 Apr 2002) | 3 lines

Fixed tab space value and added note on what I consider standard style, as
far as gtk-gnutella is concerned.

------------------------------------------------------------------------
r584 | wyldfire | 2002-04-21 17:04:04 -0400 (Sun, 21 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r583 | wyldfire | 2002-04-21 17:03:49 -0400 (Sun, 21 Apr 2002) | 3 lines


Fixed typo in bandwidth display (out instead of in)

------------------------------------------------------------------------
r582 | wyldfire | 2002-04-21 17:03:11 -0400 (Sun, 21 Apr 2002) | 3 lines


Forgot to deactivate tabs again.

------------------------------------------------------------------------
r581 | wyldfire | 2002-04-21 16:18:50 -0400 (Sun, 21 Apr 2002) | 3 lines


Added checkbutton_config_proxy_auth.

------------------------------------------------------------------------
r580 | wyldfire | 2002-04-21 16:15:04 -0400 (Sun, 21 Apr 2002) | 6 lines


Changed the way the bandwidth stats are displayed to be more readable.
  We now regenerate the formatstring on each update instead of using
  the capabilities of gtk_progress to display a value.
Added support for a normal and a average display mode of bandwidth stats.

------------------------------------------------------------------------
r579 | wyldfire | 2002-04-21 16:12:39 -0400 (Sun, 21 Apr 2002) | 4 lines


Added support to toggle display mode of bandwidth stats.
Added support for proxy_auth checkbutton.

------------------------------------------------------------------------
r578 | wyldfire | 2002-04-21 16:10:54 -0400 (Sun, 21 Apr 2002) | 3 lines


Added progressbar_bps_out_avg, progressbar_bps_in_avg, proxy_auth

------------------------------------------------------------------------
r577 | wyldfire | 2002-04-21 16:09:24 -0400 (Sun, 21 Apr 2002) | 6 lines


Change config pane layout.
Added "Authenticate to proxy" checkbutton to network config.
Added signals to bandwidth displays to allow changing thier display on a
  mouseclick.

------------------------------------------------------------------------
r576 | rmanfredi | 2002-04-17 14:46:42 -0400 (Wed, 17 Apr 2002) | 2 lines

Version of 17/04/2002.

------------------------------------------------------------------------
r575 | rmanfredi | 2002-04-17 14:35:54 -0400 (Wed, 17 Apr 2002) | 2 lines

Optionally favor local Gnet hosts over remote ones, per netmask [Mike Perry].

------------------------------------------------------------------------
r574 | rmanfredi | 2002-04-17 14:25:25 -0400 (Wed, 17 Apr 2002) | 2 lines

Display either the uptime as "HH:MM:SS" or "d HH:MM" with a blinking ":".

------------------------------------------------------------------------
r573 | rmanfredi | 2002-04-17 14:10:39 -0400 (Wed, 17 Apr 2002) | 2 lines

Refactoring of network TX layer.

------------------------------------------------------------------------
r572 | rmanfredi | 2002-04-16 14:38:02 -0400 (Tue, 16 Apr 2002) | 3 lines

Ensure bandwidth sliding window never displays a value more than the
configured maximum, or it won't show.

------------------------------------------------------------------------
r571 | wyldfire | 2002-04-15 18:04:12 -0400 (Mon, 15 Apr 2002) | 3 lines


Change download_set_freeze to download_freeze_queue.

------------------------------------------------------------------------
r570 | wyldfire | 2002-04-15 17:55:08 -0400 (Mon, 15 Apr 2002) | 3 lines


Fixed some layout stuff in the config pane.

------------------------------------------------------------------------
r569 | rmanfredi | 2002-04-15 17:28:51 -0400 (Mon, 15 Apr 2002) | 2 lines

Renamed queue freezing routines.

------------------------------------------------------------------------
r568 | wyldfire | 2002-04-15 13:33:21 -0400 (Mon, 15 Apr 2002) | 3 lines


Fixed problem with visibility state of bandwidth stats not properly restored.

------------------------------------------------------------------------
r567 | wyldfire | 2002-04-15 13:12:26 -0400 (Mon, 15 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r566 | wyldfire | 2002-04-15 13:11:59 -0400 (Mon, 15 Apr 2002) | 3 lines


Moved to new statusbar handling.

------------------------------------------------------------------------
r565 | wyldfire | 2002-04-15 13:11:31 -0400 (Mon, 15 Apr 2002) | 3 lines


Moved stuff from main.c to function gui_init in gui.c.

------------------------------------------------------------------------
r564 | wyldfire | 2002-04-15 13:09:10 -0400 (Mon, 15 Apr 2002) | 5 lines


Created a gui_init function to move stuff from main.c to gui.c.
Added support for temporary statusbar messages.
Improved overall statusbar handling (new macros/functions), now use stack.

------------------------------------------------------------------------
r563 | wyldfire | 2002-04-15 12:51:00 -0400 (Mon, 15 Apr 2002) | 5 lines


Added new functions download_set_freeze and download_get_freeze to access
  the private freeze_download variable, which controls wether the
  download_timer is doing something or not.

------------------------------------------------------------------------
r562 | wyldfire | 2002-04-15 12:36:49 -0400 (Mon, 15 Apr 2002) | 7 lines


Some naming fixes.
Added code for freeze togglebutton.
Removed on_button_clear_clicked (is done via popup menu now).
Added support for new bandwidth-related widgets.
Adapt the way the statusbar is handled to the new style.

------------------------------------------------------------------------
r561 | wyldfire | 2002-04-15 12:10:28 -0400 (Mon, 15 Apr 2002) | 3 lines


Added support for progressbar_bps_in_visible, progressbar_bps_out_visible.

------------------------------------------------------------------------
r560 | wyldfire | 2002-04-15 11:56:06 -0400 (Mon, 15 Apr 2002) | 11 lines


Added new items to "View" menu: menu_bps_in_visible, menu_bps_out_visible
Changed labels on the connection stats.
Added indicators for the current in/out bandwidth usage.
Moved freeze toggle button from popup menu to queue frame.
More renaming.
Removed the regexp search field from downloads for now. (May add back later)
Made reissue timeout spinbutton on search-pane wider.
Made config pane a tabbed pane.
Added bandwidth control to config pane.

------------------------------------------------------------------------
r559 | rmanfredi | 2002-04-14 07:26:29 -0400 (Sun, 14 Apr 2002) | 3 lines

When sharing is disabled, the condition is retry-able.  Since most servents
understand 503, let's give them that, and not 500, which would be fatal.

------------------------------------------------------------------------
r558 | rmanfredi | 2002-04-11 17:35:23 -0400 (Thu, 11 Apr 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r557 | rmanfredi | 2002-04-11 17:33:40 -0400 (Thu, 11 Apr 2002) | 3 lines

Added routines for on-the-fly bandwidth settings, and access macros for
getting the instantaneous and average bandwidth usage per second.

------------------------------------------------------------------------
r556 | rmanfredi | 2002-04-11 16:18:31 -0400 (Thu, 11 Apr 2002) | 4 lines

When not sharing, return HTTP error 500 instead of 410, since it is a
server-side problem, not a client-side problem.
When facing an HTTP/1.1 request, make sure there is a Host: header.

------------------------------------------------------------------------
r555 | rmanfredi | 2002-04-10 17:23:12 -0400 (Wed, 10 Apr 2002) | 2 lines

Version of 10/04/2002.

------------------------------------------------------------------------
r554 | rmanfredi | 2002-04-10 17:21:29 -0400 (Wed, 10 Apr 2002) | 3 lines

Now accounts for bytes transferred in interrupted uploads as well, and in
particular at servent shutdown time.

------------------------------------------------------------------------
r553 | wyldfire | 2002-04-10 14:33:58 -0400 (Wed, 10 Apr 2002) | 3 lines


Disable popup menu items in popup-queue by default.

------------------------------------------------------------------------
r552 | wyldfire | 2002-04-10 14:33:11 -0400 (Wed, 10 Apr 2002) | 4 lines


Most ttems in popup-queue respect are now only selectable if the
  selection in clist_downloads_queue is not empty.

------------------------------------------------------------------------
r551 | wyldfire | 2002-04-10 14:31:30 -0400 (Wed, 10 Apr 2002) | 4 lines


Started preparations for full statusbar support. Statusbar context-id
  variables start with scid_.

------------------------------------------------------------------------
r550 | wyldfire | 2002-04-10 14:30:28 -0400 (Wed, 10 Apr 2002) | 4 lines


Make state selection of popup_queue_start_now in download_pickup_queued
  respect selection state of clist_downloads_queue.

------------------------------------------------------------------------
r549 | wyldfire | 2002-04-10 14:29:00 -0400 (Wed, 10 Apr 2002) | 4 lines


Added popup_queue_remove_named, popup_queue_remove_host,
  popup_queue_search_again.

------------------------------------------------------------------------
r548 | wyldfire | 2002-04-10 14:27:37 -0400 (Wed, 10 Apr 2002) | 3 lines


Added lost "normalized" column to upload stats again.

------------------------------------------------------------------------
r547 | wyldfire | 2002-04-09 20:48:20 -0400 (Tue, 09 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r546 | wyldfire | 2002-04-09 20:47:29 -0400 (Tue, 09 Apr 2002) | 3 lines


Made declarations match downloads.c

------------------------------------------------------------------------
r545 | wyldfire | 2002-04-09 20:47:07 -0400 (Tue, 09 Apr 2002) | 10 lines


Made download_timer do nothing if queue freeze is enabled.
Added
  download_remove_all_from_peer(const gchar *guid)
  download_remove_all_named(const gchar *name)
Removed already disabled code which refered to no longer
  existing variables.
Disabled every occurence of download_pickup_queued except
  in download_timer to support queue freeeze

------------------------------------------------------------------------
r544 | wyldfire | 2002-04-09 20:44:11 -0400 (Tue, 09 Apr 2002) | 4 lines


Made callback declarations match with callbacks.c again.
Removed old popup_hosts stuff

------------------------------------------------------------------------
r543 | wyldfire | 2002-04-09 20:43:05 -0400 (Tue, 09 Apr 2002) | 19 lines


Moved declaration of select_all_lock to top of file.
Removed dead code:
  on_clist_downloads_click_column
  on_clist_downloads_queue_click_column
  on_download_start_now_activate
Added callbacks for new popup menu items:
  on_popup_downloads_kill_activate
  on_popup_downloads_abort_named_activate
  on_popup_downloads_abort_host_activate
  on_popup_downloads_remove_file_activate
  on_popup_downloads_search_again_activate
  on_popup_queue_start_now_activate
  on_popup_queue_freeze_activate
  on_popup_queue_search_again_activate
  on_popup_queue_remove_named_activate
  on_popup_queue_remove_host_activate
Disabled calls to download_pickup_queued to support queue freeze

------------------------------------------------------------------------
r542 | wyldfire | 2002-04-09 20:36:10 -0400 (Tue, 09 Apr 2002) | 3 lines


Disabled new widgets that are not backed up by code yet.

------------------------------------------------------------------------
r541 | wyldfire | 2002-04-09 20:35:30 -0400 (Tue, 09 Apr 2002) | 3 lines


Added several new popup menu items to popup-download and popup-queue.

------------------------------------------------------------------------
r540 | rmanfredi | 2002-04-09 16:09:13 -0400 (Tue, 09 Apr 2002) | 2 lines

Updated Build-Depends and Description.

------------------------------------------------------------------------
r539 | wyldfire | 2002-04-09 13:11:42 -0400 (Tue, 09 Apr 2002) | 5 lines


Modified download_selection_of_clist to set foreground of search items
selected for download to the color specified for GTK_STATE_ACTIVE for
the current gtk style for the search clist widget.

------------------------------------------------------------------------
r538 | wyldfire | 2002-04-09 13:09:32 -0400 (Tue, 09 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r537 | wyldfire | 2002-04-09 11:54:38 -0400 (Tue, 09 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r536 | wyldfire | 2002-04-09 11:53:27 -0400 (Tue, 09 Apr 2002) | 4 lines


Added function short_uptime, since short_time is in my opinion not
well suited to display uptime.

------------------------------------------------------------------------
r535 | wyldfire | 2002-04-09 11:52:16 -0400 (Tue, 09 Apr 2002) | 3 lines


Added code to update uptime display to gui_global_update().

------------------------------------------------------------------------
r534 | wyldfire | 2002-04-09 11:50:49 -0400 (Tue, 09 Apr 2002) | 3 lines


Added label for displaying uptime of servent to statusbar.

------------------------------------------------------------------------
r533 | wyldfire | 2002-04-08 14:08:04 -0400 (Mon, 08 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r532 | wyldfire | 2002-04-08 14:06:05 -0400 (Mon, 08 Apr 2002) | 5 lines


Modified multiple-selection handling in on_button_uploads_kill_clicked,
on_button_downloads_queue_remove_clicked and on_download_start_now_activate.
Made popup_queue_start_now (de)activate correctly when selection changes.

------------------------------------------------------------------------
r531 | wyldfire | 2002-04-08 14:03:26 -0400 (Mon, 08 Apr 2002) | 4 lines


Removed selected_queued_download and selected_active_download. No longer
needed.

------------------------------------------------------------------------
r530 | wyldfire | 2002-04-08 12:44:57 -0400 (Mon, 08 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r529 | wyldfire | 2002-04-08 12:41:24 -0400 (Mon, 08 Apr 2002) | 3 lines


Hide notebook tabs again. Further reduces minimum window size.

------------------------------------------------------------------------
r528 | wyldfire | 2002-04-08 12:30:52 -0400 (Mon, 08 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r527 | wyldfire | 2002-04-08 12:28:22 -0400 (Mon, 08 Apr 2002) | 5 lines


Rearranged widgets to reduce minimum window size.
Enabled both scrollbars on nodes list.
Closes bug #540610

------------------------------------------------------------------------
r526 | rmanfredi | 2002-04-06 02:04:52 -0500 (Sat, 06 Apr 2002) | 2 lines

Starting 0.90 developments.

------------------------------------------------------------------------
r525 | rmanfredi | 2002-04-06 02:02:22 -0500 (Sat, 06 Apr 2002) | 2 lines

Starting 0.90 development.

------------------------------------------------------------------------
r524 | wyldfire | 2002-04-05 15:50:07 -0500 (Fri, 05 Apr 2002) | 4 lines


Committed after changed to Makefile.am in accordance with the directive
from Raphael to have autogenerated code in cvs.

------------------------------------------------------------------------
r523 | wyldfire | 2002-04-05 15:44:34 -0500 (Fri, 05 Apr 2002) | 3 lines


Fixed typo causing a compiler warning about a nested comment.

------------------------------------------------------------------------
r522 | wyldfire | 2002-04-05 15:39:54 -0500 (Fri, 05 Apr 2002) | 4 lines


Made build-glade target really regenerate the code from gtk-gnutella
by calling src/Makefile glade_files

------------------------------------------------------------------------
r520 | wyldfire | 2002-04-05 15:36:29 -0500 (Fri, 05 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r519 | wyldfire | 2002-04-05 15:31:25 -0500 (Fri, 05 Apr 2002) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r518 | wyldfire | 2002-04-05 15:25:24 -0500 (Fri, 05 Apr 2002) | 3 lines


Changed widget names.

------------------------------------------------------------------------
r517 | wyldfire | 2002-04-05 15:24:54 -0500 (Fri, 05 Apr 2002) | 3 lines


Made monitor items selectable.

------------------------------------------------------------------------
r516 | wyldfire | 2002-04-05 15:23:17 -0500 (Fri, 05 Apr 2002) | 4 lines


Made it possible to select items from the search monitor.
Changed reference from clist_menu to ctree_menu.

------------------------------------------------------------------------
r515 | wyldfire | 2002-04-05 15:22:07 -0500 (Fri, 05 Apr 2002) | 6 lines


Changed code to build a tree menu instead of a flat list menu.
Removed code to set the popup titles insensitive, since those are gone
now.
Changed widget names.

------------------------------------------------------------------------
r514 | wyldfire | 2002-04-05 15:18:48 -0500 (Fri, 05 Apr 2002) | 3 lines


Sorted declarations.

------------------------------------------------------------------------
r513 | wyldfire | 2002-04-05 15:17:53 -0500 (Fri, 05 Apr 2002) | 6 lines


Added gui_nodes_remove_selected.
Added code to minimally support statusbar.
Changed gui_update_c_* functions to also update new progressbars.
Changed widget names.

------------------------------------------------------------------------
r512 | wyldfire | 2002-04-05 15:15:28 -0500 (Fri, 05 Apr 2002) | 5 lines


Take account of changed widget names.
Grouped widgets together.
Output widget names instead of dots.

------------------------------------------------------------------------
r511 | wyldfire | 2002-04-05 15:14:21 -0500 (Fri, 05 Apr 2002) | 3 lines


Adjust to changed widget namings from gtk-gnutella.glade.

------------------------------------------------------------------------
r510 | wyldfire | 2002-04-05 15:12:28 -0500 (Fri, 05 Apr 2002) | 4 lines


Added support to save state of the currently present toggle buttons from
the menu "View".

------------------------------------------------------------------------
r509 | wyldfire | 2002-04-05 15:11:27 -0500 (Fri, 05 Apr 2002) | 4 lines


Added declarations of new callback functions.
Sorted stuff a little seperated sections.

------------------------------------------------------------------------
r508 | wyldfire | 2002-04-05 15:09:09 -0500 (Fri, 05 Apr 2002) | 5 lines


Added several callbacks for new widgets.
Changed behavior of popups to keep selection and execute a popup action
on all selected items.

------------------------------------------------------------------------
r507 | wyldfire | 2002-04-05 15:07:01 -0500 (Fri, 05 Apr 2002) | 4 lines


Added variables for saving visibility state of uploads/downloads/
connection stats, status- and menubar.

------------------------------------------------------------------------
r506 | wyldfire | 2002-04-05 15:05:13 -0500 (Fri, 05 Apr 2002) | 7 lines


Changed lots of stuff in the gui.
Made it scale better, added menu and status bar, removed gnet stats,
hid connection stats and added progress bars to display connection-,
download- and upload-status.
Renamed lots of widgets to start on a more or less consistent naming scheme.

------------------------------------------------------------------------
r505 | wyldfire | 2002-04-05 14:38:11 -0500 (Fri, 05 Apr 2002) | 4 lines


Changed build-glade target to call glade_files target from Makefile in src
directory.

------------------------------------------------------------------------
r502 | rmanfredi | 2002-04-04 15:18:37 -0500 (Thu, 04 Apr 2002) | 2 lines

Version 0.85 stable of 04/04/2002.

------------------------------------------------------------------------
r501 | rmanfredi | 2002-04-04 15:12:50 -0500 (Thu, 04 Apr 2002) | 2 lines

Hidden useless gnutellaNet stats window.

------------------------------------------------------------------------
r500 | rmanfredi | 2002-04-03 13:19:06 -0500 (Wed, 03 Apr 2002) | 2 lines

Changed bzero() into memset() for Solaris [patch #538619].

------------------------------------------------------------------------
r498 | rmanfredi | 2002-03-30 05:48:41 -0500 (Sat, 30 Mar 2002) | 2 lines

Version 0.85 beta2.

------------------------------------------------------------------------
r497 | rmanfredi | 2002-03-30 05:42:40 -0500 (Sat, 30 Mar 2002) | 2 lines

Version 0.85 beta2.

------------------------------------------------------------------------
r496 | rmanfredi | 2002-03-30 05:34:53 -0500 (Sat, 30 Mar 2002) | 2 lines

Fixed spelling error in define, followed by slight code factoring.

------------------------------------------------------------------------
r495 | rmanfredi | 2002-03-30 05:30:29 -0500 (Sat, 30 Mar 2002) | 2 lines

Will now report error 414, "Requested URL Too Large", when encountered.

------------------------------------------------------------------------
r494 | rmanfredi | 2002-03-30 05:28:45 -0500 (Sat, 30 Mar 2002) | 2 lines

Could mistakenly report 404, "Not Found" when rebuilding library.

------------------------------------------------------------------------
r493 | rmanfredi | 2002-03-28 02:23:47 -0500 (Thu, 28 Mar 2002) | 3 lines

Fixed node_sent_ttl0(), which assumed node was kicked-out when Bye is sent,
although it is no longer the case, unless Bye was already sent.

------------------------------------------------------------------------
r492 | rmanfredi | 2002-03-26 17:40:02 -0500 (Tue, 26 Mar 2002) | 2 lines

Increased receive buffer size for nodes from 48K to 112K.

------------------------------------------------------------------------
r491 | rmanfredi | 2002-03-26 14:38:29 -0500 (Tue, 26 Mar 2002) | 2 lines

Was moving to wrong pane when "jump-to-downloads" enabled.

------------------------------------------------------------------------
r490 | rmanfredi | 2002-03-24 18:13:33 -0500 (Sun, 24 Mar 2002) | 2 lines

Fixed memory leak in uploads, in push request handling (bug #534434).

------------------------------------------------------------------------
r489 | rmanfredi | 2002-03-24 17:03:25 -0500 (Sun, 24 Mar 2002) | 2 lines

Shutdown TX side of socket after having sent the Bye message.

------------------------------------------------------------------------
r488 | rmanfredi | 2002-03-24 16:58:47 -0500 (Sun, 24 Mar 2002) | 2 lines

Fixed another memory leak.

------------------------------------------------------------------------
r487 | rmanfredi | 2002-03-24 12:59:18 -0500 (Sun, 24 Mar 2002) | 2 lines

Fixed memory leak.

------------------------------------------------------------------------
r486 | rmanfredi | 2002-03-24 10:38:13 -0500 (Sun, 24 Mar 2002) | 2 lines

Portability fixes for non-linux platforms.

------------------------------------------------------------------------
r485 | rmanfredi | 2002-03-24 10:35:29 -0500 (Sun, 24 Mar 2002) | 2 lines

Added return in bio_sendfile() to shut compiler warning.

------------------------------------------------------------------------
r480 | rmanfredi | 2002-03-23 06:02:19 -0500 (Sat, 23 Mar 2002) | 2 lines

Updated for beta1.

------------------------------------------------------------------------
r479 | rmanfredi | 2002-03-23 05:24:14 -0500 (Sat, 23 Mar 2002) | 2 lines

Updated for 0.85 beta 1.

------------------------------------------------------------------------
r478 | rmanfredi | 2002-03-23 05:04:09 -0500 (Sat, 23 Mar 2002) | 2 lines

Version 0.85 beta1.

------------------------------------------------------------------------
r477 | rmanfredi | 2002-03-23 04:15:37 -0500 (Sat, 23 Mar 2002) | 2 lines

Fixed crash when upload stats are cleared (bug #533904).

------------------------------------------------------------------------
r476 | rmanfredi | 2002-03-23 04:12:03 -0500 (Sat, 23 Mar 2002) | 2 lines

Fixed cornercase, a leftover of bug #530811.

------------------------------------------------------------------------
r475 | rmanfredi | 2002-03-22 15:29:34 -0500 (Fri, 22 Mar 2002) | 2 lines

Ensure minimum value for node_sendqueue_size (1.5 * max packet size).

------------------------------------------------------------------------
r474 | rmanfredi | 2002-03-21 18:31:55 -0500 (Thu, 21 Mar 2002) | 3 lines

Added upload stats "average count" [From Michael Tesch, patch #533257].
Added conversion of existing upload_stats files to the new format.

------------------------------------------------------------------------
r473 | rmanfredi | 2002-03-19 18:58:38 -0500 (Tue, 19 Mar 2002) | 3 lines

Was mistakenly displaying last offset as size in uploads.
Negative range requests are offsets from the end of the file.

------------------------------------------------------------------------
r472 | rmanfredi | 2002-03-18 14:34:05 -0500 (Mon, 18 Mar 2002) | 4 lines

Now handle parsing of 0.6 handshake headers on Ponging connections, to grab
any Node: header and fake a pong.  This also allows Ponging 0.6 hosts to
be seen in the GUI.

------------------------------------------------------------------------
r471 | rmanfredi | 2002-03-18 02:32:53 -0500 (Mon, 18 Mar 2002) | 3 lines

Must call node_disable_read() before calling node_bye(), in case we're facing
a temporary "ponging" connection, which node_bye() happily removes.

------------------------------------------------------------------------
r470 | rmanfredi | 2002-03-17 17:25:43 -0500 (Sun, 17 Mar 2002) | 2 lines

Version of 17/03/2002.

------------------------------------------------------------------------
r469 | rmanfredi | 2002-03-17 16:59:31 -0500 (Sun, 17 Mar 2002) | 2 lines

An off-by-one error could lead url_escape_cntrl() to corrupt memory.

------------------------------------------------------------------------
r468 | rmanfredi | 2002-03-17 11:53:30 -0500 (Sun, 17 Mar 2002) | 3 lines

Don't display bogus percentages for uploads that have not started yet.
Added display of packet reception and queue status for shutdowning nodes.

------------------------------------------------------------------------
r467 | rmanfredi | 2002-03-17 10:37:05 -0500 (Sun, 17 Mar 2002) | 2 lines

Split I/O vectors larger than the max allowed size (fixes bug #530106).

------------------------------------------------------------------------
r466 | rmanfredi | 2002-03-17 06:05:15 -0500 (Sun, 17 Mar 2002) | 2 lines

Must disable a queue becoming empty in mq_clear().

------------------------------------------------------------------------
r465 | rmanfredi | 2002-03-16 19:31:08 -0500 (Sat, 16 Mar 2002) | 2 lines

Save config file and other stats in a temporary file, renamed upon success.

------------------------------------------------------------------------
r464 | rmanfredi | 2002-03-16 19:12:42 -0500 (Sat, 16 Mar 2002) | 2 lines

Save host cache in temporary file, renamed upon sucess.

------------------------------------------------------------------------
r463 | rmanfredi | 2002-03-16 19:09:27 -0500 (Sat, 16 Mar 2002) | 2 lines

Typo in debugging messages.

------------------------------------------------------------------------
r460 | rmanfredi | 2002-03-16 09:44:34 -0500 (Sat, 16 Mar 2002) | 2 lines

Fixed typo in node_bye_all().

------------------------------------------------------------------------
r459 | rmanfredi | 2002-03-16 09:41:56 -0500 (Sat, 16 Mar 2002) | 2 lines

Must duplicate filenames in uploads in case library is rebuilt.

------------------------------------------------------------------------
r458 | rmanfredi | 2002-03-16 07:20:23 -0500 (Sat, 16 Mar 2002) | 2 lines

Portability fixes for FreeBSD.

------------------------------------------------------------------------
r457 | rmanfredi | 2002-03-16 07:12:39 -0500 (Sat, 16 Mar 2002) | 2 lines

Removed unportable and unused <dlfcn.h> inclusion.

------------------------------------------------------------------------
r456 | rmanfredi | 2002-03-16 07:02:56 -0500 (Sat, 16 Mar 2002) | 2 lines

Version of 16/03/2002.

------------------------------------------------------------------------
r455 | rmanfredi | 2002-03-16 06:37:37 -0500 (Sat, 16 Mar 2002) | 3 lines

Reworked on the shutdowning/bye code to maximize chances of proper delivery
of the BYE indication.

------------------------------------------------------------------------
r454 | rmanfredi | 2002-03-16 06:34:37 -0500 (Sat, 16 Mar 2002) | 2 lines

Default retry timeout on busy servers was way too low.

------------------------------------------------------------------------
r453 | rmanfredi | 2002-03-15 18:05:40 -0500 (Fri, 15 Mar 2002) | 2 lines

Removed spurious code in download_store().

------------------------------------------------------------------------
r452 | rmanfredi | 2002-03-15 13:49:54 -0500 (Fri, 15 Mar 2002) | 3 lines

Try to flush queued messages on nodes as fast as possible by turning
on TCP_NODELAY to disable Nagle's algorithm.

------------------------------------------------------------------------
r451 | rmanfredi | 2002-03-14 18:38:37 -0500 (Thu, 14 Mar 2002) | 2 lines

Attempt to flush upload statistics on a regular basis when changed.

------------------------------------------------------------------------
r450 | rmanfredi | 2002-03-14 16:54:39 -0500 (Thu, 14 Mar 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r449 | rmanfredi | 2002-03-14 16:37:15 -0500 (Thu, 14 Mar 2002) | 2 lines

Added upload statistics pane [From Michael Tesch, patch #529294].

------------------------------------------------------------------------
r448 | rmanfredi | 2002-03-14 16:32:01 -0500 (Thu, 14 Mar 2002) | 2 lines

Cleanup, improved efficiency [From Michael Tesch].

------------------------------------------------------------------------
r447 | rmanfredi | 2002-03-13 15:47:37 -0500 (Wed, 13 Mar 2002) | 2 lines

Fobid the multicast IP range, and also the new 169.254/16 private range.

------------------------------------------------------------------------
r446 | rmanfredi | 2002-03-13 15:45:36 -0500 (Wed, 13 Mar 2002) | 11 lines

Changed error message "Route lost" into "Push route lost".
Don't remove queued downloads whose size is greater than the one we completed.
When downloading a file bigger than the one in the done directory,
and provided it's on the same filesystem as the tmp directory, move it out
for resuming.  This is safe now that we perform range overlapping.
Fixed push bug, by allowing several downloads to be recorded for the
same (index, GUID) tuple.
Don't abort with "Push route lost" when we only fell back to push, but the
address does not seem to be private and there was no push indication in the
query hit.

------------------------------------------------------------------------
r445 | rmanfredi | 2002-03-13 13:19:24 -0500 (Wed, 13 Mar 2002) | 2 lines

When rebuilding our library, it's a server error: must be 5xx.

------------------------------------------------------------------------
r444 | rmanfredi | 2002-03-12 17:26:02 -0500 (Tue, 12 Mar 2002) | 2 lines

Version of 12/03/2002.

------------------------------------------------------------------------
r443 | rmanfredi | 2002-03-12 17:24:00 -0500 (Tue, 12 Mar 2002) | 4 lines

Ensure we do not launch two copies of gtk-gnutella backed by the same
configuration, and protect any configuration change made whilst the
program was running by saving a copy of the old configuration if needed.

------------------------------------------------------------------------
r442 | rmanfredi | 2002-03-12 17:22:25 -0500 (Tue, 12 Mar 2002) | 2 lines

Added a header for FreeBSD.

------------------------------------------------------------------------
r441 | rmanfredi | 2002-03-12 14:11:56 -0500 (Tue, 12 Mar 2002) | 3 lines

Warn them with a retryable 408 error if we get a request whilst we're in the
middle of rebuilding the library.

------------------------------------------------------------------------
r440 | rmanfredi | 2002-03-12 13:34:45 -0500 (Tue, 12 Mar 2002) | 4 lines

Since we now update the GUI whilst scanning, make sure noone can query
us about shared files whilst we're in the middle of reconstructing our
data structures.

------------------------------------------------------------------------
r439 | rmanfredi | 2002-03-12 13:27:00 -0500 (Tue, 12 Mar 2002) | 2 lines

Fixed broken recursive scan of the library, with help from Michael Tesch.

------------------------------------------------------------------------
r438 | rmanfredi | 2002-03-11 14:21:08 -0500 (Mon, 11 Mar 2002) | 2 lines

Removed broken support for file_directory_path.

------------------------------------------------------------------------
r437 | rmanfredi | 2002-03-11 14:19:52 -0500 (Mon, 11 Mar 2002) | 2 lines

Disable the "Start now" menu entry if we don't have any more download slot.

------------------------------------------------------------------------
r436 | rmanfredi | 2002-03-10 12:50:15 -0500 (Sun, 10 Mar 2002) | 4 lines

Adeed PEERahna amongst the list of known servents.
If we're firewalled or they don't want to send pushes, then don't display
search results requiring a push explicitly.

------------------------------------------------------------------------
r435 | rmanfredi | 2002-03-09 07:48:35 -0500 (Sat, 09 Mar 2002) | 2 lines

Made the "enable search stats" settings persistent.

------------------------------------------------------------------------
r434 | rmanfredi | 2002-03-09 06:59:57 -0500 (Sat, 09 Mar 2002) | 2 lines

Added search statistics pane [From tesch, patch #524921].

------------------------------------------------------------------------
r433 | rmanfredi | 2002-03-09 05:15:35 -0500 (Sat, 09 Mar 2002) | 2 lines

Apply search filters before auto-downloading.

------------------------------------------------------------------------
r432 | rmanfredi | 2002-03-08 19:18:16 -0500 (Fri, 08 Mar 2002) | 2 lines

Version of 08/03/2002.

------------------------------------------------------------------------
r431 | rmanfredi | 2002-03-08 19:16:59 -0500 (Fri, 08 Mar 2002) | 2 lines

Added Vendor and protocol Ver(sion) columns in the node screen.

------------------------------------------------------------------------
r430 | rmanfredi | 2002-03-08 19:15:51 -0500 (Fri, 08 Mar 2002) | 2 lines

The GUID of a servent is now made persistent and flagged as such.

------------------------------------------------------------------------
r429 | rmanfredi | 2002-03-07 18:05:11 -0500 (Thu, 07 Mar 2002) | 2 lines

Added Size/Range columns to the upload screen.

------------------------------------------------------------------------
r428 | rmanfredi | 2002-03-07 16:37:54 -0500 (Thu, 07 Mar 2002) | 2 lines

Version of 07/03/2002.

------------------------------------------------------------------------
r427 | rmanfredi | 2002-03-07 16:36:15 -0500 (Thu, 07 Mar 2002) | 2 lines

Added routines for adjusting TCP's send/receive buffer size.

------------------------------------------------------------------------
r426 | rmanfredi | 2002-03-07 16:34:17 -0500 (Thu, 07 Mar 2002) | 2 lines

Fixed bug #524988.

------------------------------------------------------------------------
r425 | rmanfredi | 2002-03-07 16:33:35 -0500 (Thu, 07 Mar 2002) | 2 lines

Added Morpheus (MRPH) to the list of vendor codes.

------------------------------------------------------------------------
r424 | rmanfredi | 2002-03-07 16:32:50 -0500 (Thu, 07 Mar 2002) | 2 lines

Added message priorities.

------------------------------------------------------------------------
r423 | rmanfredi | 2002-03-07 16:32:10 -0500 (Thu, 07 Mar 2002) | 5 lines

Tuned TCP input/output buffer sizes.
Node statistics are now updated once per second on the GUI.
Now also emits the Remote-IP header when connecting to other nodes.
Fixed bug #523762.

------------------------------------------------------------------------
r422 | rmanfredi | 2002-03-07 16:27:49 -0500 (Thu, 07 Mar 2002) | 4 lines

Now supports higher priority messages, queued ahead of regular messages.
Tuned flow control to avoid too many memory allocation/free, and saturation
of the queue (lowered high watermark to 50%).

------------------------------------------------------------------------
r421 | rmanfredi | 2002-03-07 16:25:38 -0500 (Thu, 07 Mar 2002) | 2 lines

Fixed bug #524987.

------------------------------------------------------------------------
r420 | rmanfredi | 2002-03-07 16:24:55 -0500 (Thu, 07 Mar 2002) | 2 lines

Alive pings are now replied to with a higher priority pong.

------------------------------------------------------------------------
r419 | rmanfredi | 2002-03-07 16:23:46 -0500 (Thu, 07 Mar 2002) | 2 lines

Fixed bug #524773.

------------------------------------------------------------------------
r418 | rmanfredi | 2002-03-07 16:19:18 -0500 (Thu, 07 Mar 2002) | 3 lines

Node statistics now show amount of messages in queue, and percentage of
the send queue filled with messages.

------------------------------------------------------------------------
r417 | rmanfredi | 2002-03-07 16:17:56 -0500 (Thu, 07 Mar 2002) | 2 lines

Added support for higher-priority control messages.

------------------------------------------------------------------------
r416 | rmanfredi | 2002-03-07 16:15:22 -0500 (Thu, 07 Mar 2002) | 4 lines

Raised TCP reception's buffer size to 112K.
Added debugging traces to get more info should the duplicate push bug
manifest itself again.

------------------------------------------------------------------------
r415 | rmanfredi | 2002-03-07 16:13:20 -0500 (Thu, 07 Mar 2002) | 2 lines

Raise default sendqueue size to 96K, i.e. 150% of the max message size (64K).

------------------------------------------------------------------------
r414 | rmanfredi | 2002-03-07 16:11:32 -0500 (Thu, 07 Mar 2002) | 2 lines

Also log scheduler's name when warning about time jumps.

------------------------------------------------------------------------
r413 | rmanfredi | 2002-02-24 13:13:19 -0500 (Sun, 24 Feb 2002) | 3 lines

Now detects and handles the situation wereby time goes backwards or forwards
due to time synchronization (NTP deaemon).

------------------------------------------------------------------------
r412 | rmanfredi | 2002-02-24 12:59:05 -0500 (Sun, 24 Feb 2002) | 2 lines

Display the time spent uploading or downloading when entry is completed.

------------------------------------------------------------------------
r411 | rmanfredi | 2002-02-22 16:28:24 -0500 (Fri, 22 Feb 2002) | 2 lines

Adapted proxy_connect() signature to be able to get it to compile on IRIX.

------------------------------------------------------------------------
r410 | rmanfredi | 2002-02-22 16:21:53 -0500 (Fri, 22 Feb 2002) | 2 lines

In the "Config" page, show total size of files shared.

------------------------------------------------------------------------
r409 | rmanfredi | 2002-02-22 15:58:09 -0500 (Fri, 22 Feb 2002) | 2 lines

Trace user interface, OS type, OS version and CPU type in User-Agent.

------------------------------------------------------------------------
r408 | rmanfredi | 2002-02-21 17:45:17 -0500 (Thu, 21 Feb 2002) | 4 lines

Huge cleanup: renamed `nodes' as `routes' in the message structure, cleaned
up some wrong assertions, added comments, renamed some functions to make
their purpose clearer and changed their signatures where appropriate.

------------------------------------------------------------------------
r407 | rmanfredi | 2002-02-21 13:42:46 -0500 (Thu, 21 Feb 2002) | 2 lines

Version of 21/02/2002.

------------------------------------------------------------------------
r406 | rmanfredi | 2002-02-21 13:40:39 -0500 (Thu, 21 Feb 2002) | 2 lines

Turn on TCP_CORK when sending pongs on a Ponging connection.

------------------------------------------------------------------------
r405 | rmanfredi | 2002-02-21 13:39:01 -0500 (Thu, 21 Feb 2002) | 3 lines

Turn on TCP_CORK for uploads, to optimize outgoing bandwidth.
Makes use of sendfile(2) if available.

------------------------------------------------------------------------
r404 | rmanfredi | 2002-02-21 13:37:47 -0500 (Thu, 21 Feb 2002) | 2 lines

Added sock_cork().

------------------------------------------------------------------------
r403 | rmanfredi | 2002-02-21 13:36:49 -0500 (Thu, 21 Feb 2002) | 2 lines

Random cleanup.

------------------------------------------------------------------------
r402 | rmanfredi | 2002-02-21 13:36:16 -0500 (Thu, 21 Feb 2002) | 2 lines

Make sure we don't send something to a queue in discard mode.

------------------------------------------------------------------------
r401 | rmanfredi | 2002-02-21 13:35:00 -0500 (Thu, 21 Feb 2002) | 3 lines

Ensure original downloads are saved in downloads.orig, and protect against
sudden death whilst saving.

------------------------------------------------------------------------
r400 | rmanfredi | 2002-02-21 13:34:09 -0500 (Thu, 21 Feb 2002) | 2 lines

Added bio_sendfile().

------------------------------------------------------------------------
r399 | rmanfredi | 2002-02-21 13:33:09 -0500 (Thu, 21 Feb 2002) | 2 lines

Added check for <sys/sendfile.h>.

------------------------------------------------------------------------
r398 | rmanfredi | 2002-02-21 13:31:42 -0500 (Thu, 21 Feb 2002) | 2 lines

Removed three items from the list!

------------------------------------------------------------------------
r397 | rmanfredi | 2002-02-20 13:42:56 -0500 (Wed, 20 Feb 2002) | 3 lines

Cleanup: lower debugging level, factorize b/w limit, update source stats even
if scheduler disabled for proper instantaneous transfer rate display.

------------------------------------------------------------------------
r396 | rmanfredi | 2002-02-19 16:09:32 -0500 (Tue, 19 Feb 2002) | 2 lines

Was missing a "return" statement.

------------------------------------------------------------------------
r395 | rmanfredi | 2002-02-19 15:37:17 -0500 (Tue, 19 Feb 2002) | 2 lines

More cleanup in the routing code, which fixes a potentially harmful bug.

------------------------------------------------------------------------
r394 | rmanfredi | 2002-02-19 13:22:34 -0500 (Tue, 19 Feb 2002) | 3 lines

When current transfer rates are too low, switch to average rate for
estimating time remaining.

------------------------------------------------------------------------
r393 | rmanfredi | 2002-02-18 01:58:46 -0500 (Mon, 18 Feb 2002) | 2 lines

Fixed bug in handling node_bye() for ponging-only connections.

------------------------------------------------------------------------
r392 | rmanfredi | 2002-02-17 17:36:52 -0500 (Sun, 17 Feb 2002) | 2 lines

There is not always an I/O source when updating an upload on the GUI.

------------------------------------------------------------------------
r391 | rmanfredi | 2002-02-17 17:31:54 -0500 (Sun, 17 Feb 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r390 | rmanfredi | 2002-02-17 17:29:55 -0500 (Sun, 17 Feb 2002) | 2 lines

Fixed number of columns in search table to 5.

------------------------------------------------------------------------
r389 | rmanfredi | 2002-02-17 13:24:11 -0500 (Sun, 17 Feb 2002) | 2 lines

Switched to real-time download/upload transfer rate and ETA computations.

------------------------------------------------------------------------
r388 | rmanfredi | 2002-02-17 08:37:40 -0500 (Sun, 17 Feb 2002) | 2 lines

Plugged bandwidth throttling for input.

------------------------------------------------------------------------
r387 | rmanfredi | 2002-02-17 05:14:26 -0500 (Sun, 17 Feb 2002) | 2 lines

Tuning for proper scalability when there are many sources.

------------------------------------------------------------------------
r386 | rmanfredi | 2002-02-16 11:20:31 -0500 (Sat, 16 Feb 2002) | 2 lines

Version of 16/02/2002.

------------------------------------------------------------------------
r385 | rmanfredi | 2002-02-16 11:17:43 -0500 (Sat, 16 Feb 2002) | 2 lines

Include Date and Last-Modified headers in our HTTP success replies.

------------------------------------------------------------------------
r384 | rmanfredi | 2002-02-16 11:16:26 -0500 (Sat, 16 Feb 2002) | 2 lines

HTTP error code 408 is retryable.

------------------------------------------------------------------------
r383 | rmanfredi | 2002-02-16 09:43:14 -0500 (Sat, 16 Feb 2002) | 2 lines

Fixed inversion of factors in theoric bandwidth computation.

------------------------------------------------------------------------
r382 | rmanfredi | 2002-02-16 09:31:39 -0500 (Sat, 16 Feb 2002) | 2 lines

Added output bandwidth management.

------------------------------------------------------------------------
r381 | rmanfredi | 2002-02-16 09:30:33 -0500 (Sat, 16 Feb 2002) | 3 lines

Initial take at bandwidth management.
Only output bandwidth is managed for now, Gnet excluded.

------------------------------------------------------------------------
r380 | rmanfredi | 2002-02-15 03:09:58 -0500 (Fri, 15 Feb 2002) | 3 lines

Could be sending pongs with TTL=0 by mistake.
Was always sending pings with TTL=1 by mistake.

------------------------------------------------------------------------
r379 | rmanfredi | 2002-02-11 17:55:08 -0500 (Mon, 11 Feb 2002) | 2 lines

Fixed probing of Bye message for <cr><lf>.

------------------------------------------------------------------------
r378 | rmanfredi | 2002-02-11 12:15:27 -0500 (Mon, 11 Feb 2002) | 2 lines

Moved all node_remove() logging at the top.

------------------------------------------------------------------------
r377 | rmanfredi | 2002-02-11 11:43:41 -0500 (Mon, 11 Feb 2002) | 2 lines

Handle all Query Hits when we don't know the node's vendor code.

------------------------------------------------------------------------
r376 | rmanfredi | 2002-02-11 11:13:15 -0500 (Mon, 11 Feb 2002) | 2 lines

Release of 11/02/2002.

------------------------------------------------------------------------
r375 | rmanfredi | 2002-02-11 11:12:18 -0500 (Mon, 11 Feb 2002) | 3 lines

Make sure "Force local IP" is true by default, since IP can be
automatically determined now.

------------------------------------------------------------------------
r374 | rmanfredi | 2002-02-11 11:07:15 -0500 (Mon, 11 Feb 2002) | 2 lines

All % completion figures now shown with 2 decimals.

------------------------------------------------------------------------
r373 | rmanfredi | 2002-02-11 07:28:45 -0500 (Mon, 11 Feb 2002) | 2 lines

Fixed improper counting of TX-dropped packets in flow-control as RX-dropped.

------------------------------------------------------------------------
r372 | rmanfredi | 2002-02-11 05:42:29 -0500 (Mon, 11 Feb 2002) | 2 lines

Extract and log vendor information of nodes we connect to.

------------------------------------------------------------------------
r371 | rmanfredi | 2002-02-11 04:44:34 -0500 (Mon, 11 Feb 2002) | 2 lines

Remove shutdowned nodes from count of "active" nodes immediately.

------------------------------------------------------------------------
r370 | rmanfredi | 2002-02-11 03:25:44 -0500 (Mon, 11 Feb 2002) | 2 lines

Fixed formatting of proxy options.

------------------------------------------------------------------------
r369 | rmanfredi | 2002-02-11 03:25:39 -0500 (Mon, 11 Feb 2002) | 2 lines

Normalized Bye messages.

------------------------------------------------------------------------
r368 | rmanfredi | 2002-02-10 17:30:30 -0500 (Sun, 10 Feb 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r367 | rmanfredi | 2002-02-10 17:27:51 -0500 (Sun, 10 Feb 2002) | 3 lines

Properly handle Range requests such as "123-456" and "-567".  Still no
handling for things like "123-456,457-789" though.

------------------------------------------------------------------------
r366 | rmanfredi | 2002-02-10 15:47:13 -0500 (Sun, 10 Feb 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r365 | rmanfredi | 2002-02-10 15:34:26 -0500 (Sun, 10 Feb 2002) | 2 lines

Integrated HTTP proxy patch [From Szabolcs Sel�f].

------------------------------------------------------------------------
r364 | rmanfredi | 2002-02-10 15:14:58 -0500 (Sun, 10 Feb 2002) | 2 lines

Dispatched heartbeat timer routines to the relevant files.

------------------------------------------------------------------------
r363 | rmanfredi | 2002-02-10 04:15:29 -0500 (Sun, 10 Feb 2002) | 2 lines

Added support for the Bye packet.

------------------------------------------------------------------------
r362 | rmanfredi | 2002-02-04 13:25:14 -0500 (Mon, 04 Feb 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r361 | rmanfredi | 2002-02-04 13:22:42 -0500 (Mon, 04 Feb 2002) | 2 lines

Plugged the new transmit path in.

------------------------------------------------------------------------
r360 | rmanfredi | 2002-02-04 13:18:41 -0500 (Mon, 04 Feb 2002) | 2 lines

Second-half of fix for download hammering bug.

------------------------------------------------------------------------
r359 | rmanfredi | 2002-02-04 13:15:28 -0500 (Mon, 04 Feb 2002) | 2 lines

Reduced size of static buffers which was arbitrarily large.

------------------------------------------------------------------------
r358 | rmanfredi | 2002-02-04 13:13:26 -0500 (Mon, 04 Feb 2002) | 2 lines

Fixed host hammering bug when connection could not be made.

------------------------------------------------------------------------
r357 | rmanfredi | 2002-02-04 13:09:41 -0500 (Mon, 04 Feb 2002) | 4 lines

Added the following config variables: download_retry_timeout_delay,
download_retry_busy_delay, download_retry_refused_delay,
download_retry_stopped, download_overlap_range, node_tx_flowc_timeout.

------------------------------------------------------------------------
r356 | rmanfredi | 2002-02-04 13:04:05 -0500 (Mon, 04 Feb 2002) | 3 lines

Added 3 new source files.
cvs: ----------------------------------------------------------------------

------------------------------------------------------------------------
r355 | rmanfredi | 2002-02-04 13:02:00 -0500 (Mon, 04 Feb 2002) | 2 lines

Initial revision.

------------------------------------------------------------------------
r354 | rmanfredi | 2002-02-04 12:51:46 -0500 (Mon, 04 Feb 2002) | 2 lines

Start of post-0.80 submissions.

------------------------------------------------------------------------
r351 | rmanfredi | 2002-01-31 16:15:40 -0500 (Thu, 31 Jan 2002) | 2 lines

Release of 0.80 stable.

------------------------------------------------------------------------
r346 | rmanfredi | 2002-01-22 16:30:04 -0500 (Tue, 22 Jan 2002) | 2 lines

Freeze for 0.80 beta2.

------------------------------------------------------------------------
r345 | rmanfredi | 2002-01-22 15:53:03 -0500 (Tue, 22 Jan 2002) | 2 lines

Stop filling Query Hit packets when we reach our own max size limit.

------------------------------------------------------------------------
r344 | rmanfredi | 2002-01-22 15:41:56 -0500 (Tue, 22 Jan 2002) | 2 lines

Cleanup [From Mark Schreiber]

------------------------------------------------------------------------
r343 | rmanfredi | 2002-01-22 15:32:02 -0500 (Tue, 22 Jan 2002) | 4 lines

Factorized scanned extension string.
Removed commented-out local IP computation, now that I understood why it
was commented-out.

------------------------------------------------------------------------
r342 | rmanfredi | 2002-01-22 13:18:26 -0500 (Tue, 22 Jan 2002) | 2 lines

Was not handling improper header line starting with leading NUL.

------------------------------------------------------------------------
r341 | rmanfredi | 2002-01-21 15:25:38 -0500 (Mon, 21 Jan 2002) | 3 lines

Fixed the *symptoms* of bug #506160, not the root cause.  We're prepared to
handle the bug gracefully anyway.  Investigation will be done after release.

------------------------------------------------------------------------
r340 | rmanfredi | 2002-01-21 15:04:24 -0500 (Mon, 21 Jan 2002) | 2 lines

Make sure final destruction cleans up everything to avoid false leak reports.

------------------------------------------------------------------------
r339 | rmanfredi | 2002-01-21 13:15:51 -0500 (Mon, 21 Jan 2002) | 2 lines

Must format error message before freeing I/O structures.

------------------------------------------------------------------------
r338 | rmanfredi | 2002-01-21 01:56:29 -0500 (Mon, 21 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r337 | rmanfredi | 2002-01-21 01:50:59 -0500 (Mon, 21 Jan 2002) | 2 lines

Re-install SIGPIPE signal handler each time the signal fires.

------------------------------------------------------------------------
r336 | rmanfredi | 2002-01-21 01:45:51 -0500 (Mon, 21 Jan 2002) | 3 lines

Was freeing the I/O callbacks too soon when doing pushes.
Improved the download selection logic on pushes.

------------------------------------------------------------------------
r335 | rmanfredi | 2002-01-21 01:43:21 -0500 (Mon, 21 Jan 2002) | 3 lines

Fixed memory leak in ping counting.  This code is almost useless nowadays
due to the ping/pong reduction scheme and should be discarded soon.

------------------------------------------------------------------------
r334 | rmanfredi | 2002-01-20 09:21:05 -0500 (Sun, 20 Jan 2002) | 2 lines

Don't try to open local "config" directory as a file.

------------------------------------------------------------------------
r333 | rmanfredi | 2002-01-20 06:44:12 -0500 (Sun, 20 Jan 2002) | 2 lines

Also log hops/TTL on dropped messages.

------------------------------------------------------------------------
r332 | rmanfredi | 2002-01-20 06:28:37 -0500 (Sun, 20 Jan 2002) | 2 lines

Now makes accurate use of the HTTP "Connection:" header.

------------------------------------------------------------------------
r331 | rmanfredi | 2002-01-20 06:25:15 -0500 (Sun, 20 Jan 2002) | 3 lines

At end of download, also remove "Retry in 10s" entries bearing same name.
Now makes accurate use of the HTTP "Connection:" header.

------------------------------------------------------------------------
r330 | rmanfredi | 2002-01-20 06:12:40 -0500 (Sun, 20 Jan 2002) | 2 lines

Initial revision.

------------------------------------------------------------------------
r329 | rmanfredi | 2002-01-19 15:33:27 -0500 (Sat, 19 Jan 2002) | 2 lines

Fixed filter memory leaks.

------------------------------------------------------------------------
r328 | rmanfredi | 2002-01-19 14:24:08 -0500 (Sat, 19 Jan 2002) | 2 lines

Fixed I/O memory leaks.

------------------------------------------------------------------------
r324 | rmanfredi | 2002-01-19 05:02:18 -0500 (Sat, 19 Jan 2002) | 2 lines

Code freeze for 0.80 beta.

------------------------------------------------------------------------
r323 | rmanfredi | 2002-01-19 04:29:27 -0500 (Sat, 19 Jan 2002) | 2 lines

Preparing 0.80 beta release.

------------------------------------------------------------------------
r322 | rmanfredi | 2002-01-19 04:14:55 -0500 (Sat, 19 Jan 2002) | 2 lines

Raised payload size sanity check on queries to 3 bytes.

------------------------------------------------------------------------
r321 | rmanfredi | 2002-01-19 04:12:49 -0500 (Sat, 19 Jan 2002) | 2 lines

Changed error message for upload connection timeout.

------------------------------------------------------------------------
r320 | rmanfredi | 2002-01-18 13:24:26 -0500 (Fri, 18 Jan 2002) | 2 lines

Added debug logging of messages we drop due to size constraints.

------------------------------------------------------------------------
r319 | rmanfredi | 2002-01-18 13:22:08 -0500 (Fri, 18 Jan 2002) | 4 lines

Minor reformatting of config file comments, and raising of default max
messages to be more tolerent on replies, whilst reducing greatly the max
size of queries to limit potential of abuse.

------------------------------------------------------------------------
r318 | rmanfredi | 2002-01-18 01:51:51 -0500 (Fri, 18 Jan 2002) | 2 lines

Advertise our node address/port using the Node: header in outgoing handshakes.

------------------------------------------------------------------------
r317 | rmanfredi | 2002-01-17 14:38:57 -0500 (Thu, 17 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r316 | rmanfredi | 2002-01-17 14:31:03 -0500 (Thu, 17 Jan 2002) | 3 lines

Now supports URL-escaped requests, but still sends un-escaped requests to
remote servents.

------------------------------------------------------------------------
r315 | rmanfredi | 2002-01-17 13:23:49 -0500 (Thu, 17 Jan 2002) | 2 lines

The hex -> decimal conversion routine is now called hex2dec().

------------------------------------------------------------------------
r314 | rmanfredi | 2002-01-17 13:18:35 -0500 (Thu, 17 Jan 2002) | 2 lines

Made the hex -> decimal routine public and changed its name.

------------------------------------------------------------------------
r313 | rmanfredi | 2002-01-17 12:40:01 -0500 (Thu, 17 Jan 2002) | 2 lines

Was not escaping '=' due to a typo.

------------------------------------------------------------------------
r312 | rmanfredi | 2002-01-16 18:08:34 -0500 (Wed, 16 Jan 2002) | 2 lines

All initial ping sending done from node_is_now_connected().

------------------------------------------------------------------------
r311 | rmanfredi | 2002-01-16 16:51:45 -0500 (Wed, 16 Jan 2002) | 3 lines

Changed all signatures to unsigned chars to avoid char->int sign extension for
non-ASCII chars.

------------------------------------------------------------------------
r310 | rmanfredi | 2002-01-16 16:33:09 -0500 (Wed, 16 Jan 2002) | 2 lines

Added URL escaping routines.

------------------------------------------------------------------------
r309 | rmanfredi | 2002-01-15 15:21:56 -0500 (Tue, 15 Jan 2002) | 3 lines

Also refresh stored download queue when a download is aborted, so that it
is not accidentally relaunched in case we crash.

------------------------------------------------------------------------
r308 | rmanfredi | 2002-01-14 18:53:33 -0500 (Mon, 14 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r307 | rmanfredi | 2002-01-14 18:44:14 -0500 (Mon, 14 Jan 2002) | 2 lines

When low on hosts in cache, collect "semi-pongs" from Query Hits.

------------------------------------------------------------------------
r306 | rmanfredi | 2002-01-14 17:36:36 -0500 (Mon, 14 Jan 2002) | 3 lines

Avoid continuous (blocking, possibly long) DNS lookups for the public host
caches by computing their IP address once.

------------------------------------------------------------------------
r305 | rmanfredi | 2002-01-14 17:07:47 -0500 (Mon, 14 Jan 2002) | 2 lines

Added recent pong cache.

------------------------------------------------------------------------
r304 | rmanfredi | 2002-01-14 16:59:05 -0500 (Mon, 14 Jan 2002) | 2 lines

Added the NODE_F_ALIEN_IP flag.

------------------------------------------------------------------------
r303 | rmanfredi | 2002-01-14 01:44:59 -0500 (Mon, 14 Jan 2002) | 2 lines

Fixed memory leak and improper copy within X-Try header generation.

------------------------------------------------------------------------
r302 | rmanfredi | 2002-01-13 16:42:57 -0500 (Sun, 13 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r301 | rmanfredi | 2002-01-13 15:50:39 -0500 (Sun, 13 Jan 2002) | 4 lines

Will now automatically determine that the forced local IP is obsolete
and change it on the fly, provided we're connecting to modern servents,
which make use of the Remote-IP header during handshaking.

------------------------------------------------------------------------
r300 | rmanfredi | 2002-01-13 14:01:00 -0500 (Sun, 13 Jan 2002) | 4 lines

Using "double-click" to request downloading will now correctly perform
auto-selection, if configured, and will also unselect list entries.
[From Noel T.Nunkovich]

------------------------------------------------------------------------
r299 | rmanfredi | 2002-01-13 13:00:51 -0500 (Sun, 13 Jan 2002) | 4 lines

Split hostcache into two distinct lists: the reserve, and the list of
nodes we tried and are known to be valid Gnutella servers.  In an attempt
to limit the tendency of the hostcache to remove hosts rapidly.

------------------------------------------------------------------------
r298 | rmanfredi | 2002-01-13 07:10:33 -0500 (Sun, 13 Jan 2002) | 4 lines

Made find_host() use exclusively Gnet information for nodes.
Added sanity check to ensure self pongs have the proper node IP when we
don't have Gnet information for incoming hosts yet.

------------------------------------------------------------------------
r297 | rmanfredi | 2002-01-13 06:41:06 -0500 (Sun, 13 Jan 2002) | 2 lines

Avoid sending searches to temporary connections, and minor cleanup.

------------------------------------------------------------------------
r296 | rmanfredi | 2002-01-12 18:44:56 -0500 (Sat, 12 Jan 2002) | 2 lines

Was persisting the queue too soon on download completion.

------------------------------------------------------------------------
r295 | rmanfredi | 2002-01-12 18:23:18 -0500 (Sat, 12 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r294 | rmanfredi | 2002-01-12 18:18:44 -0500 (Sat, 12 Jan 2002) | 2 lines

Download resuming now checks for proper file via an overlap of 512 bytes.

------------------------------------------------------------------------
r293 | rmanfredi | 2002-01-12 16:46:16 -0500 (Sat, 12 Jan 2002) | 2 lines

Documented the persistent queue file.

------------------------------------------------------------------------
r291 | rmanfredi | 2002-01-12 15:57:11 -0500 (Sat, 12 Jan 2002) | 2 lines

Forgot to set the port in gchar_to_ip_port(). [From Paul Cassella]

------------------------------------------------------------------------
r290 | rmanfredi | 2002-01-12 12:27:27 -0500 (Sat, 12 Jan 2002) | 2 lines

More efficient escape_filename() implementation.

------------------------------------------------------------------------
r289 | rmanfredi | 2002-01-12 12:09:40 -0500 (Sat, 12 Jan 2002) | 3 lines

Now keep both the original file name, with possible '/' in it, and the
escaped form where '_' is used instead of '/'.

------------------------------------------------------------------------
r288 | rmanfredi | 2002-01-12 09:35:21 -0500 (Sat, 12 Jan 2002) | 2 lines

Added download queue persistence.

------------------------------------------------------------------------
r287 | rmanfredi | 2002-01-12 09:32:23 -0500 (Sat, 12 Jan 2002) | 2 lines

Only count the searches we really perform.

------------------------------------------------------------------------
r286 | rmanfredi | 2002-01-12 09:29:49 -0500 (Sat, 12 Jan 2002) | 3 lines

Made extract_field_pongs() use new gchar_to_ip_port() routine.
Added warnings when the X-Try lines cannot be parsed.

------------------------------------------------------------------------
r285 | rmanfredi | 2002-01-12 09:26:38 -0500 (Sat, 12 Jan 2002) | 2 lines

Changed the order of shutdowns at exit time.

------------------------------------------------------------------------
r284 | rmanfredi | 2002-01-12 09:24:36 -0500 (Sat, 12 Jan 2002) | 2 lines

Made hosts_reading_func() use the new gchar_to_ip_port() routine.

------------------------------------------------------------------------
r283 | rmanfredi | 2002-01-12 09:22:25 -0500 (Sat, 12 Jan 2002) | 2 lines

Added gchar_to_ip_port(), hex_to_guid() and str_chomp().

------------------------------------------------------------------------
r282 | rmanfredi | 2002-01-12 09:10:39 -0500 (Sat, 12 Jan 2002) | 2 lines

Was missing declaration of `config_dir'.

------------------------------------------------------------------------
r281 | rmanfredi | 2002-01-12 04:05:46 -0500 (Sat, 12 Jan 2002) | 2 lines

Added X-Live-Since: header to all our replies.

------------------------------------------------------------------------
r280 | rmanfredi | 2002-01-11 19:13:48 -0500 (Fri, 11 Jan 2002) | 2 lines

Ensure we periodically flush the pong cache.

------------------------------------------------------------------------
r279 | rmanfredi | 2002-01-11 19:00:22 -0500 (Fri, 11 Jan 2002) | 2 lines

Changed "open" to "stable" in the info status, since it looks more accurate.

------------------------------------------------------------------------
r278 | rmanfredi | 2002-01-11 18:59:53 -0500 (Fri, 11 Jan 2002) | 3 lines

Was not generating the X-Try line correctly for first pong.
When remote node sends extra hello data, dump the whole header as well.

------------------------------------------------------------------------
r277 | rmanfredi | 2002-01-11 18:57:11 -0500 (Fri, 11 Jan 2002) | 4 lines

Sent pings at too high a TTL by mistake.
After outgoing connection made, only ping the new node, and send regular
ping only if are under our minimum connection quota.

------------------------------------------------------------------------
r276 | rmanfredi | 2002-01-11 16:20:01 -0500 (Fri, 11 Jan 2002) | 2 lines

Got rid of non-standard in_addr_t in favor of good old guint32.

------------------------------------------------------------------------
r275 | rmanfredi | 2002-01-11 15:38:51 -0500 (Fri, 11 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r274 | rmanfredi | 2002-01-11 15:33:51 -0500 (Fri, 11 Jan 2002) | 2 lines

When sharing is disabled, don't reply to queries and tell them on uploads.

------------------------------------------------------------------------
r273 | rmanfredi | 2002-01-11 15:20:51 -0500 (Fri, 11 Jan 2002) | 2 lines

Typo fix.

------------------------------------------------------------------------
r272 | rmanfredi | 2002-01-11 15:20:40 -0500 (Fri, 11 Jan 2002) | 3 lines

Added "memory fault protection" at global destruction, until this bug
is cleared.

------------------------------------------------------------------------
r271 | rmanfredi | 2002-01-11 15:09:37 -0500 (Fri, 11 Jan 2002) | 2 lines

More accurate "strange hello" warnings.

------------------------------------------------------------------------
r270 | rmanfredi | 2002-01-11 14:28:43 -0500 (Fri, 11 Jan 2002) | 3 lines

Was not refreshing GUI properly on handshake downgrading, plus fixed
an improper assertion.

------------------------------------------------------------------------
r269 | rmanfredi | 2002-01-11 14:04:55 -0500 (Fri, 11 Jan 2002) | 2 lines

Finalized 0.6 handshake support: will now initiate them as well.

------------------------------------------------------------------------
r268 | rmanfredi | 2002-01-10 18:27:55 -0500 (Thu, 10 Jan 2002) | 3 lines

When looking for duplicate active downloads, we were wrongly skipping
"waiting" entries, which are still enabled, only delayed for a while.

------------------------------------------------------------------------
r267 | rmanfredi | 2002-01-10 05:17:13 -0500 (Thu, 10 Jan 2002) | 4 lines

Integrated two patches from Mark Schreiber:
* Accept searches even though we might not be connected to the net yet.
* Added Host indication in the download screen.

------------------------------------------------------------------------
r266 | rmanfredi | 2002-01-09 02:21:22 -0500 (Wed, 09 Jan 2002) | 3 lines

Be tolerant on servents that do not send a Content-Length but send
a proper Content-Range line instead (which we tolerantly parse as well).

------------------------------------------------------------------------
r265 | rmanfredi | 2002-01-08 18:53:04 -0500 (Tue, 08 Jan 2002) | 3 lines

Fixed overzealous backwards de-referencing in getline_read() when end
of line was reached. [Found by Falk Hueffner]

------------------------------------------------------------------------
r264 | rmanfredi | 2002-01-08 14:37:32 -0500 (Tue, 08 Jan 2002) | 3 lines

Removed useless and memory hog host catcher list in the gnutellaNet screen.
[From Mark Schreiber]

------------------------------------------------------------------------
r263 | rmanfredi | 2002-01-07 17:11:37 -0500 (Mon, 07 Jan 2002) | 3 lines

Double-clicking on a file in the search window will request downloading of
that file only, despite multiple selections. [From Noel T.Nunkovich]

------------------------------------------------------------------------
r262 | rmanfredi | 2002-01-07 16:08:41 -0500 (Mon, 07 Jan 2002) | 2 lines

Integrated filtering patch [From Robert Bihlmeyer].

------------------------------------------------------------------------
r261 | rmanfredi | 2002-01-06 17:50:22 -0500 (Sun, 06 Jan 2002) | 3 lines

More tweaking in remove_one_message_reference() to try to avoid
a memory fault when called during global shutdown.

------------------------------------------------------------------------
r260 | rmanfredi | 2002-01-06 17:02:06 -0500 (Sun, 06 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r259 | rmanfredi | 2002-01-06 16:55:52 -0500 (Sun, 06 Jan 2002) | 3 lines

Now parses the Query Hit packets only once, no matter how many searches open.
Also moved the "index changed" detection logic to a better place.

------------------------------------------------------------------------
r258 | rmanfredi | 2002-01-06 16:50:19 -0500 (Sun, 06 Jan 2002) | 2 lines

Refactored to be able to route the Push messages correctly.

------------------------------------------------------------------------
r257 | rmanfredi | 2002-01-06 16:45:17 -0500 (Sun, 06 Jan 2002) | 4 lines

New routine node_sent_ttl0() to handle nodes sending messages with TTL=0.
In case the handshaking fails with a remote strange server, read more data
to be able to trace more of their reply.

------------------------------------------------------------------------
r256 | rmanfredi | 2002-01-06 16:44:27 -0500 (Sun, 06 Jan 2002) | 2 lines

Now handles pings with TTL=0.

------------------------------------------------------------------------
r255 | rmanfredi | 2002-01-06 16:43:23 -0500 (Sun, 06 Jan 2002) | 2 lines

Added "string.h" include.

------------------------------------------------------------------------
r254 | rmanfredi | 2002-01-06 16:42:11 -0500 (Sun, 06 Jan 2002) | 5 lines

download_index_changed() now takes an additional GUID parameter.
Push packets are no longer broadcasted but sent to the proper nodes.
A push download will abort with "Route lost" when it is no longer possible
to send the push packet.

------------------------------------------------------------------------
r253 | rmanfredi | 2002-01-06 16:38:05 -0500 (Sun, 06 Jan 2002) | 2 lines

Removed MD5 files from the distribution.  They are no longer used.

------------------------------------------------------------------------
r252 | rmanfredi | 2002-01-06 08:41:37 -0500 (Sun, 06 Jan 2002) | 3 lines

Fixed improper trailer generation in query hits: the last flag byte was
not copied at all.

------------------------------------------------------------------------
r251 | rmanfredi | 2002-01-05 10:29:50 -0500 (Sat, 05 Jan 2002) | 2 lines

Forgot to free list linkable in host_get_caught().

------------------------------------------------------------------------
r250 | rmanfredi | 2002-01-05 04:56:21 -0500 (Sat, 05 Jan 2002) | 3 lines

Will now detect and print failed outgoing connections that sent us
connection pongs before closing the connection.

------------------------------------------------------------------------
r249 | rmanfredi | 2002-01-04 13:25:22 -0500 (Fri, 04 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r248 | rmanfredi | 2002-01-04 13:24:54 -0500 (Fri, 04 Jan 2002) | 4 lines

Created new "Stopped" state, which is used on retry-able error conditions
such as EOF or "Connection reset by peer" errors.  The retry timer was
shortened from 60 to 15 seconds, awaiting to make it configurable.

------------------------------------------------------------------------
r247 | rmanfredi | 2002-01-04 13:18:58 -0500 (Fri, 04 Jan 2002) | 3 lines

When downloading, force push immediately if the host is not connectible,
based on its IP/port inspection.

------------------------------------------------------------------------
r246 | rmanfredi | 2002-01-04 13:17:45 -0500 (Fri, 04 Jan 2002) | 3 lines

Added dumping of more node statistics relevant to the pong caching scheme.
Parses remote handhsking Pong-Caching header.

------------------------------------------------------------------------
r245 | rmanfredi | 2002-01-04 13:15:43 -0500 (Fri, 04 Jan 2002) | 3 lines

Further tweaked the pong caching scheme, and added some debug info as
well as sanity checks, to validate our assumptions.

------------------------------------------------------------------------
r244 | rmanfredi | 2002-01-04 13:12:50 -0500 (Fri, 04 Jan 2002) | 3 lines

Now initializes version string once and for all, at main() time.
This string is then consistently used in all emitted headers.

------------------------------------------------------------------------
r243 | rmanfredi | 2002-01-04 13:07:28 -0500 (Fri, 04 Jan 2002) | 3 lines

Was not validating config variable `min_dup_ratio'.  Adapted its comment,
and made other cosmetic change to the config file output.

------------------------------------------------------------------------
r242 | rmanfredi | 2002-01-04 12:58:14 -0500 (Fri, 04 Jan 2002) | 4 lines

Forgot that search reissue timeout of 0 meant "no reissue".  Fixed, and
adapted the label text in front of the entry textarea.  Also enlarged
the area a bit.  [From: Nate]

------------------------------------------------------------------------
r241 | rmanfredi | 2002-01-03 14:29:21 -0500 (Thu, 03 Jan 2002) | 3 lines

Fixed IP/port setups for socks4 and socks5 proxies: now use network order
instead of native. [From: Robert Bihlmeyer]

------------------------------------------------------------------------
r240 | rmanfredi | 2002-01-02 17:42:44 -0500 (Wed, 02 Jan 2002) | 3 lines

Fixed index-updating bug for downloads in push mode: the mapping was
not updated correctly, resulting in a failed assertion later on.

------------------------------------------------------------------------
r239 | rmanfredi | 2002-01-02 17:39:15 -0500 (Wed, 02 Jan 2002) | 2 lines

Now advertises "Pong-Caching: 0.1" in the 0.6 handshake.

------------------------------------------------------------------------
r238 | rmanfredi | 2002-01-02 16:07:45 -0500 (Wed, 02 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r237 | rmanfredi | 2002-01-02 16:06:25 -0500 (Wed, 02 Jan 2002) | 2 lines

Implemented LimeWire's ping/pong reducing scheme.

------------------------------------------------------------------------
r236 | rmanfredi | 2002-01-02 15:54:26 -0500 (Wed, 02 Jan 2002) | 3 lines

Modified label near connection speed to "kbits/s" to make the unit more
explicit than before.

------------------------------------------------------------------------
r235 | rmanfredi | 2002-01-02 15:47:40 -0500 (Wed, 02 Jan 2002) | 2 lines

Initial revision.

------------------------------------------------------------------------
r234 | rmanfredi | 2002-01-01 03:30:21 -0500 (Tue, 01 Jan 2002) | 4 lines

Forgot to check for duplicates when resuming, which broke an assertion
in download_push_insert().  Changed the assertion into a bug warning since
it's not critical, and it should no longer happen.

------------------------------------------------------------------------
r233 | rmanfredi | 2002-01-01 03:02:15 -0500 (Tue, 01 Jan 2002) | 2 lines

Updated.

------------------------------------------------------------------------
r232 | rmanfredi | 2002-01-01 02:59:09 -0500 (Tue, 01 Jan 2002) | 3 lines

Forgot to record PUSH when forcing initial push mode.
Added sanity check when receiving GIV to check for proper state.

------------------------------------------------------------------------
r231 | rmanfredi | 2002-01-01 02:56:23 -0500 (Tue, 01 Jan 2002) | 2 lines

Added DOWNLOAD_IS_EXPECTING_GIV() and reformatted (aligned) all macros.

------------------------------------------------------------------------
r230 | rmanfredi | 2001-12-31 13:11:12 -0500 (Mon, 31 Dec 2001) | 2 lines

Forgot the two trailing newlines in emitted GIV string.

------------------------------------------------------------------------
r229 | rmanfredi | 2001-12-31 12:56:56 -0500 (Mon, 31 Dec 2001) | 2 lines

Added two more host caches.

------------------------------------------------------------------------
r228 | rmanfredi | 2001-12-31 12:03:45 -0500 (Mon, 31 Dec 2001) | 2 lines

Recognizes more vendor codes in QHD.

------------------------------------------------------------------------
r227 | rmanfredi | 2001-12-31 11:50:48 -0500 (Mon, 31 Dec 2001) | 3 lines

If search results say remote servent is firewalled, start immediately in
push mode when downloading, provided pushes are authorized.

------------------------------------------------------------------------
r226 | rmanfredi | 2001-12-31 10:29:02 -0500 (Mon, 31 Dec 2001) | 2 lines

Added handling of Push requests sent by remote servents.

------------------------------------------------------------------------
r225 | rmanfredi | 2001-12-31 10:26:41 -0500 (Mon, 31 Dec 2001) | 2 lines

Added support for outgoing GIV strings (i.e. Push request replies).

------------------------------------------------------------------------
r224 | rmanfredi | 2001-12-31 10:23:54 -0500 (Mon, 31 Dec 2001) | 2 lines

When in timeout wait state, a download is certainly not "establishing".

------------------------------------------------------------------------
r223 | rmanfredi | 2001-12-31 10:22:01 -0500 (Mon, 31 Dec 2001) | 3 lines

When stopping, don't reset the retry count if the reason is "timeout wait",
or we'll keep retrying forever when sending pushes.

------------------------------------------------------------------------
r222 | rmanfredi | 2001-12-31 07:13:16 -0500 (Mon, 31 Dec 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r221 | rmanfredi | 2001-12-31 07:07:29 -0500 (Mon, 31 Dec 2001) | 2 lines

Plugged back push-reply support (GIV requests).

------------------------------------------------------------------------
r220 | rmanfredi | 2001-12-31 07:04:57 -0500 (Mon, 31 Dec 2001) | 2 lines

Use node_ip() instead of ip_port_to_gchar() to trace node IP:port.

------------------------------------------------------------------------
r219 | rmanfredi | 2001-12-31 07:02:16 -0500 (Mon, 31 Dec 2001) | 2 lines

Added guid_hex_str().

------------------------------------------------------------------------
r218 | rmanfredi | 2001-12-31 07:00:32 -0500 (Mon, 31 Dec 2001) | 2 lines

Calls new download_init().

------------------------------------------------------------------------
r217 | rmanfredi | 2001-12-31 06:57:04 -0500 (Mon, 31 Dec 2001) | 2 lines

GUI updates of downloads were wrongly updating `last_update'.

------------------------------------------------------------------------
r216 | rmanfredi | 2001-12-31 06:52:29 -0500 (Mon, 31 Dec 2001) | 2 lines

Repaired pushes: they now use the main Gnet socket as the connecting point.

------------------------------------------------------------------------
r215 | rmanfredi | 2001-12-31 06:42:20 -0500 (Mon, 31 Dec 2001) | 2 lines

Was missing a return statement.

------------------------------------------------------------------------
r214 | rmanfredi | 2001-12-30 15:21:18 -0500 (Sun, 30 Dec 2001) | 2 lines

Removed spurious & in front of array name.

------------------------------------------------------------------------
r213 | rmanfredi | 2001-12-30 15:18:56 -0500 (Sun, 30 Dec 2001) | 3 lines

Will now send a set of connection pongs to an incoming 0.4 node for which
we have no more Gnet slots.

------------------------------------------------------------------------
r212 | rmanfredi | 2001-12-30 15:17:04 -0500 (Sun, 30 Dec 2001) | 2 lines

Has more states in NODE_IS_CONNECTING() macro, and added NODE_IS_CONNECTED().

------------------------------------------------------------------------
r211 | rmanfredi | 2001-12-30 15:15:51 -0500 (Sun, 30 Dec 2001) | 2 lines

Use NODE_IS_CONNECTED() to probe node state.

------------------------------------------------------------------------
r210 | rmanfredi | 2001-12-30 15:14:36 -0500 (Sun, 30 Dec 2001) | 2 lines

Added host_fill_caught_array().

------------------------------------------------------------------------
r209 | rmanfredi | 2001-12-30 09:08:33 -0500 (Sun, 30 Dec 2001) | 2 lines

Updated

------------------------------------------------------------------------
r208 | rmanfredi | 2001-12-30 08:26:31 -0500 (Sun, 30 Dec 2001) | 5 lines

Fixed a memory leak in uploads (GUI text field not freed).
Count running and registered uploads separately for new statistics.
Fixed HEAD request support, which was not handled, although supported.
Will now abort the upload with a 413 error code if header is too large.

------------------------------------------------------------------------
r207 | rmanfredi | 2001-12-30 08:24:56 -0500 (Sun, 30 Dec 2001) | 2 lines

Added registered_uploads global.

------------------------------------------------------------------------
r206 | rmanfredi | 2001-12-30 08:24:06 -0500 (Sun, 30 Dec 2001) | 2 lines

Plugged new header parsing routine for downloads.

------------------------------------------------------------------------
r205 | rmanfredi | 2001-12-30 08:23:11 -0500 (Sun, 30 Dec 2001) | 3 lines

Added temporary fix in remove_one_message_reference() to try to avoid
memory faults when quiting.

------------------------------------------------------------------------
r204 | rmanfredi | 2001-12-30 08:22:06 -0500 (Sun, 30 Dec 2001) | 3 lines

Now traces nodes upon disconnection, to save some statistics.
Will abort 0.6 handshaking with a 413 error if the header is too large.

------------------------------------------------------------------------
r203 | rmanfredi | 2001-12-30 08:20:45 -0500 (Sun, 30 Dec 2001) | 2 lines

Don't hammer host caches, allow some delay between connections to each one.

------------------------------------------------------------------------
r202 | rmanfredi | 2001-12-30 08:19:44 -0500 (Sun, 30 Dec 2001) | 2 lines

Added host_get_caught() to get pong hosts to use for outgoing connections.

------------------------------------------------------------------------
r201 | rmanfredi | 2001-12-30 08:17:53 -0500 (Sun, 30 Dec 2001) | 2 lines

Improved parse_status_line() to also validate the protocol name.

------------------------------------------------------------------------
r200 | rmanfredi | 2001-12-30 08:17:26 -0500 (Sun, 30 Dec 2001) | 2 lines

Added an extra parameter to parse_status_line().

------------------------------------------------------------------------
r199 | rmanfredi | 2001-12-30 08:16:43 -0500 (Sun, 30 Dec 2001) | 2 lines

Changed signature of gui_update_c_downloads().

------------------------------------------------------------------------
r198 | rmanfredi | 2001-12-30 08:16:10 -0500 (Sun, 30 Dec 2001) | 4 lines

Connection statistics now show two figures, as "x/y": x is the amount of
connected sockets, and y is the amount of attempts made in the background
but not yet fully connected at the application level.

------------------------------------------------------------------------
r197 | rmanfredi | 2001-12-30 08:14:44 -0500 (Sun, 30 Dec 2001) | 3 lines

Added rigourous HTTP header and status line parsing.
Warning: push support has been broken.

------------------------------------------------------------------------
r196 | rmanfredi | 2001-12-30 08:13:14 -0500 (Sun, 30 Dec 2001) | 3 lines

Split DOWNLOAD_IS_RUNNING in two macros: DOWNLOAD_IS_ACTIVE and
DOWNLOAD_IS_ESTABLISHING to use for new statistics.

------------------------------------------------------------------------
r195 | rmanfredi | 2001-12-30 08:12:04 -0500 (Sun, 30 Dec 2001) | 2 lines

Lowered minimum for automatic retries to 300 secs instead of 600.

------------------------------------------------------------------------
r194 | rmanfredi | 2001-12-27 14:03:22 -0500 (Thu, 27 Dec 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r193 | rmanfredi | 2001-12-27 14:00:15 -0500 (Thu, 27 Dec 2001) | 5 lines

Now correctly parses all the HTTP headers before dealing with the upload.
Added support for HEAD requests, where only the response headers are sent.
Prefer calls to upload_remove() instead of socket_destroy(): this allows
to give and log the reason for the cancel.

------------------------------------------------------------------------
r192 | rmanfredi | 2001-12-27 13:57:08 -0500 (Thu, 27 Dec 2001) | 3 lines

Constant refactoring: move upload-related constants and macros there.
Added support for HEAD requests.

------------------------------------------------------------------------
r191 | rmanfredi | 2001-12-27 13:55:00 -0500 (Thu, 27 Dec 2001) | 6 lines

Fixed I/O callback setup problem with proxy connections: one must be
prepared to expect read/write events on proxied outgoing connections,
and write events only on others (the logic was reveresed).
Filled show_error() to report proxy connection errors.
Added support for 0.6 handshaking and proper HTTP header reading on uploads.

------------------------------------------------------------------------
r190 | rmanfredi | 2001-12-27 13:48:43 -0500 (Thu, 27 Dec 2001) | 3 lines

Constant refactoring: moved socket-related macros and constants there.
Added support for incoming 0.6 handshakes.

------------------------------------------------------------------------
r189 | rmanfredi | 2001-12-27 13:39:40 -0500 (Thu, 27 Dec 2001) | 3 lines

Use g_hash_table_foreach_remove() when looping on hash table to remove keys.
Also made search_free_sent_node() static.

------------------------------------------------------------------------
r188 | rmanfredi | 2001-12-27 13:37:28 -0500 (Thu, 27 Dec 2001) | 2 lines

Made free_routing_data() a static routine.

------------------------------------------------------------------------
r187 | rmanfredi | 2001-12-27 13:35:06 -0500 (Thu, 27 Dec 2001) | 2 lines

Added support for incoming 0.6 handshakes.

------------------------------------------------------------------------
r186 | rmanfredi | 2001-12-27 13:32:29 -0500 (Thu, 27 Dec 2001) | 3 lines

Constant refactoring: all node constants and macros moved there.
Added support for 0.6 handshake reception.

------------------------------------------------------------------------
r185 | rmanfredi | 2001-12-27 13:30:28 -0500 (Thu, 27 Dec 2001) | 2 lines

Added Copyright notice for search bin implementation.

------------------------------------------------------------------------
r184 | rmanfredi | 2001-12-27 13:27:48 -0500 (Thu, 27 Dec 2001) | 3 lines

Now also updates download statistics when necessary from the idle loop.
Uploads are now monitored for timeout in the idle loop.

------------------------------------------------------------------------
r183 | rmanfredi | 2001-12-27 13:24:52 -0500 (Thu, 27 Dec 2001) | 2 lines

Factorize code: made check_valid_host() call is_private_ip().

------------------------------------------------------------------------
r182 | rmanfredi | 2001-12-27 13:22:07 -0500 (Thu, 27 Dec 2001) | 3 lines

Will now indicate stalled downloads and uploads.
Made gui_update_download() check the new `last_gui_update' field.

------------------------------------------------------------------------
r181 | rmanfredi | 2001-12-27 13:19:52 -0500 (Thu, 27 Dec 2001) | 2 lines

Constant refactoring: moved constants to their respective include files.

------------------------------------------------------------------------
r180 | rmanfredi | 2001-12-27 13:16:52 -0500 (Thu, 27 Dec 2001) | 6 lines

Macro refactoring: moved state querying macros to downloads.h and
renamed them for consistency with new upload macros.
Cleaned up all g_warning() calls to strip spurious trailing "\n".
Make sure we update `last_update' each time we get data.  The GUI updating
timestamp is now handled via a dedicated `last_gui_update' field.

------------------------------------------------------------------------
r179 | rmanfredi | 2001-12-27 13:12:58 -0500 (Thu, 27 Dec 2001) | 3 lines

Constant refactoring: moved all download-related macros and constants
to one place (this file).

------------------------------------------------------------------------
r178 | rmanfredi | 2001-12-27 13:09:58 -0500 (Thu, 27 Dec 2001) | 3 lines

Enforce a minimum of 600 for the re-query timeout.
Queries of the upload status are now done via macros.

------------------------------------------------------------------------
r177 | rmanfredi | 2001-12-27 13:06:17 -0500 (Thu, 27 Dec 2001) | 2 lines

Added "upload_connecting_timeout" and "upload_connected_timeout" variables.

------------------------------------------------------------------------
r176 | rmanfredi | 2001-12-27 13:02:59 -0500 (Thu, 27 Dec 2001) | 2 lines

Added header.[ch] and getline.[ch] to the sources, and regenerated.

------------------------------------------------------------------------
r175 | rmanfredi | 2001-12-27 12:57:05 -0500 (Thu, 27 Dec 2001) | 3 lines

Documented new configuration variables "upload_connecting_timeout" and
"upload_connected_timeout".

------------------------------------------------------------------------
r174 | rmanfredi | 2001-12-27 12:52:31 -0500 (Thu, 27 Dec 2001) | 2 lines

Initial revision.

------------------------------------------------------------------------
r173 | rmanfredi | 2001-12-21 05:20:46 -0500 (Fri, 21 Dec 2001) | 2 lines

Nate requested that I "obscure" his e-mail address.

------------------------------------------------------------------------
r172 | rmanfredi | 2001-12-21 04:38:50 -0500 (Fri, 21 Dec 2001) | 3 lines

Rewrote NUL detection logic in search query, and now dumps yet unhandled
extra query data (if debugging level permits).

------------------------------------------------------------------------
r171 | rmanfredi | 2001-12-20 18:45:20 -0500 (Thu, 20 Dec 2001) | 2 lines

Moved GUI updating and callbacks from search.c into gui.c and callbacks.c.

------------------------------------------------------------------------
r170 | rmanfredi | 2001-12-20 18:37:58 -0500 (Thu, 20 Dec 2001) | 2 lines

Updated version number in configure.in, and regenerated.

------------------------------------------------------------------------
r169 | rmanfredi | 2001-12-20 11:45:05 -0500 (Thu, 20 Dec 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r168 | rmanfredi | 2001-12-20 11:07:54 -0500 (Thu, 20 Dec 2001) | 2 lines

Assume we're firewalled and advertise so until we get an incoming connection.

------------------------------------------------------------------------
r167 | rmanfredi | 2001-12-20 11:06:15 -0500 (Thu, 20 Dec 2001) | 2 lines

Try to parse all extended Query Hit Data (the open part) assuming BS compat.

------------------------------------------------------------------------
r166 | rmanfredi | 2001-12-19 16:31:05 -0500 (Wed, 19 Dec 2001) | 2 lines

Updated to reflect recent submits.

------------------------------------------------------------------------
r165 | rmanfredi | 2001-12-19 16:23:48 -0500 (Wed, 19 Dec 2001) | 4 lines

Don't send user/password to proxy if none was configured.
Dump problems on connections in hexadecimal to avoid escape chars messing
up a terminal.

------------------------------------------------------------------------
r164 | rmanfredi | 2001-12-19 16:16:19 -0500 (Wed, 19 Dec 2001) | 4 lines

Improved hex dumping routine, adding offset tracking and column headers.
The routine also takes a FILE parameter to dump to anything, instead of
hardwiring a target.

------------------------------------------------------------------------
r163 | rmanfredi | 2001-12-19 16:03:17 -0500 (Wed, 19 Dec 2001) | 2 lines

Declared download_index_changed().

------------------------------------------------------------------------
r162 | rmanfredi | 2001-12-19 15:58:17 -0500 (Wed, 19 Dec 2001) | 4 lines

Trace destination IP/port of sent requests and reply we get.
Added download_index_changed() to patch indices in queued downloads
for search logic to call when it detects a change.

------------------------------------------------------------------------
r161 | rmanfredi | 2001-12-19 15:48:22 -0500 (Wed, 19 Dec 2001) | 6 lines

Automatically and silently ignore 0-byte files in search results.
Silentlently ignore files located in private IPs if we don't send pushes
(this is a temporary hack until someone adds a radio button to achieve this)
Detect changes in indices for files we already found, and update the
download queue accordingly.

------------------------------------------------------------------------
r160 | rmanfredi | 2001-12-19 15:38:59 -0500 (Wed, 19 Dec 2001) | 2 lines

Increased version number to 0.19 alpha.

------------------------------------------------------------------------
r159 | rmanfredi | 2001-12-19 15:33:28 -0500 (Wed, 19 Dec 2001) | 4 lines

Trace source IP of incoming requests and destination IP of sent replies.
Check for valid index/name combination before checking for upload slots.
Call upload_remove() directly instead of via socket_destroy().

------------------------------------------------------------------------
r158 | rmanfredi | 2001-12-19 15:25:58 -0500 (Wed, 19 Dec 2001) | 2 lines

Removed router.limewire.com from the list of pong cache servers.

------------------------------------------------------------------------
r157 | rmanfredi | 2001-12-19 15:21:24 -0500 (Wed, 19 Dec 2001) | 3 lines

File gtk-gnutella.spec now generated at configure time.
All the generated configuration files were updated.

------------------------------------------------------------------------
r153 | rmanfredi | 2001-11-19 13:29:22 -0500 (Mon, 19 Nov 2001) | 3 lines

Debian building tools are very picky about changelog's format.  One need to
append the +0100 of the timezone information...

------------------------------------------------------------------------
r152 | rmanfredi | 2001-11-19 13:19:29 -0500 (Mon, 19 Nov 2001) | 2 lines

Releasing 0.18.

------------------------------------------------------------------------
r151 | rmanfredi | 2001-11-19 13:17:11 -0500 (Mon, 19 Nov 2001) | 2 lines

Ignore XML data size in QHD for LimeWire.

------------------------------------------------------------------------
r146 | rmanfredi | 2001-11-09 13:58:56 -0500 (Fri, 09 Nov 2001) | 3 lines

Also check for tagged alternate files in the "complete dir" before
requesting an automatic download.

------------------------------------------------------------------------
r138 | rmanfredi | 2001-11-04 17:20:23 -0500 (Sun, 04 Nov 2001) | 3 lines

In auto_download_new(), create_download() was called with an improper
file argument, causing random memory faults.

------------------------------------------------------------------------
r137 | rmanfredi | 2001-11-04 17:18:45 -0500 (Sun, 04 Nov 2001) | 2 lines

Minor formatting issues.

------------------------------------------------------------------------
r136 | rmanfredi | 2001-11-04 17:16:37 -0500 (Sun, 04 Nov 2001) | 2 lines

Don't even consider auto-loading if record's size is zero bytes!

------------------------------------------------------------------------
r135 | rmanfredi | 2001-11-04 06:50:18 -0500 (Sun, 04 Nov 2001) | 2 lines

Further improved auto-download to not request things we already got.

------------------------------------------------------------------------
r134 | rmanfredi | 2001-11-03 19:04:40 -0500 (Sat, 03 Nov 2001) | 2 lines

Refuse to record a download if we still have an identical active one.

------------------------------------------------------------------------
r133 | rmanfredi | 2001-11-03 18:08:05 -0500 (Sat, 03 Nov 2001) | 3 lines

Patch from Paul Cassella to correcly make "Clear Results" sensitive now
that the computation of sch->items has changed.

------------------------------------------------------------------------
r132 | rmanfredi | 2001-11-03 15:18:57 -0500 (Sat, 03 Nov 2001) | 4 lines

Made search results sortable by Host and by Info.
Fixed incremental sort logic, which was not accurate for big values.
Integrated search results limiting patch, from Brian St. Pierre.

------------------------------------------------------------------------
r131 | rmanfredi | 2001-11-03 12:23:50 -0500 (Sat, 03 Nov 2001) | 2 lines

New manpage, contributed by Brian St. Pierre.

------------------------------------------------------------------------
r130 | rmanfredi | 2001-11-03 11:45:13 -0500 (Sat, 03 Nov 2001) | 2 lines

Never overwrite files in "completed dir"; rename target file if needed.

------------------------------------------------------------------------
r129 | rmanfredi | 2001-11-03 04:19:28 -0500 (Sat, 03 Nov 2001) | 2 lines

Missed "return" statements in error path for "download resuming" checks.

------------------------------------------------------------------------
r128 | rmanfredi | 2001-11-01 17:21:08 -0500 (Thu, 01 Nov 2001) | 2 lines

Contributed by Brian St. Pierre.

------------------------------------------------------------------------
r127 | rmanfredi | 2001-11-01 16:56:42 -0500 (Thu, 01 Nov 2001) | 4 lines

Auto download parameters now saved in config file (but only the flag
can be set from the GUI).  Patterns are now case-sensitive, and # comments
are ignored in pattern file.

------------------------------------------------------------------------
r126 | rmanfredi | 2001-11-01 09:30:14 -0500 (Thu, 01 Nov 2001) | 2 lines

Integrated auto-download.txt patch from Brian St. Pierre.

------------------------------------------------------------------------
r125 | rmanfredi | 2001-11-01 06:02:50 -0500 (Thu, 01 Nov 2001) | 2 lines

This is now known as version 0.18 alpha.

------------------------------------------------------------------------
r124 | rmanfredi | 2001-11-01 05:59:57 -0500 (Thu, 01 Nov 2001) | 3 lines

Integrated Brian St. Pierre's patch to split gnutella.h in various
smaller entities, for better incremental compilation. [#474217]

------------------------------------------------------------------------
r123 | rmanfredi | 2001-10-28 13:09:32 -0500 (Sun, 28 Oct 2001) | 3 lines

This file contributed by Rickard Osser <ricky@osser.se>.
It is meant to be used to create RPMs.

------------------------------------------------------------------------
r121 | rmanfredi | 2001-10-24 15:13:25 -0400 (Wed, 24 Oct 2001) | 2 lines

Updated for 0.17.

------------------------------------------------------------------------
r120 | rmanfredi | 2001-10-24 15:05:20 -0400 (Wed, 24 Oct 2001) | 2 lines

Preparing version 0.17 stable.

------------------------------------------------------------------------
r119 | rmanfredi | 2001-10-19 17:23:24 -0400 (Fri, 19 Oct 2001) | 2 lines

Added Mark and Kenn.

------------------------------------------------------------------------
r118 | rmanfredi | 2001-10-19 13:18:30 -0400 (Fri, 19 Oct 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r117 | rmanfredi | 2001-10-19 13:05:36 -0400 (Fri, 19 Oct 2001) | 2 lines

Routing table optimization, from Mark Schreiber.

------------------------------------------------------------------------
r116 | rmanfredi | 2001-10-19 12:49:38 -0400 (Fri, 19 Oct 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r115 | rmanfredi | 2001-10-19 12:48:59 -0400 (Fri, 19 Oct 2001) | 2 lines

Index shared files in an array for faster retrieval.

------------------------------------------------------------------------
r114 | rmanfredi | 2001-10-19 12:46:08 -0400 (Fri, 19 Oct 2001) | 2 lines

Shortened default connecting timeouts, especially to other nodes.

------------------------------------------------------------------------
r113 | rmanfredi | 2001-10-06 11:06:36 -0400 (Sat, 06 Oct 2001) | 2 lines

Identify yourself as "0.17 alpha" now.

------------------------------------------------------------------------
r112 | rmanfredi | 2001-10-06 10:37:58 -0400 (Sat, 06 Oct 2001) | 2 lines

Integrated search table bin categorization patch from Kenn Brooks Hamm.

------------------------------------------------------------------------
r110 | rmanfredi | 2001-10-03 13:32:51 -0400 (Wed, 03 Oct 2001) | 2 lines

Updated for release.

------------------------------------------------------------------------
r109 | rmanfredi | 2001-10-03 13:30:36 -0400 (Wed, 03 Oct 2001) | 2 lines

This file is generated, it does not need to be in CVS.

------------------------------------------------------------------------
r108 | rmanfredi | 2001-10-03 13:29:34 -0400 (Wed, 03 Oct 2001) | 2 lines

Updated version number, for release.

------------------------------------------------------------------------
r107 | rmanfredi | 2001-10-03 13:26:39 -0400 (Wed, 03 Oct 2001) | 2 lines

Added necessary info to build a 0.16 package.

------------------------------------------------------------------------
r106 | rmanfredi | 2001-10-03 13:12:04 -0400 (Wed, 03 Oct 2001) | 3 lines

Moved call to queue_remove_all_named() into download_stop(), so that it
is ran before download_pickup_queued()..

------------------------------------------------------------------------
r105 | rmanfredi | 2001-10-01 18:08:47 -0400 (Mon, 01 Oct 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r104 | rmanfredi | 2001-10-01 17:40:39 -0400 (Mon, 01 Oct 2001) | 3 lines

Optimize search by avoiding pattern matching if we know beforehand that
a match is impossible, thanks to the hash mask.

------------------------------------------------------------------------
r103 | rmanfredi | 2001-10-01 17:34:21 -0400 (Mon, 01 Oct 2001) | 2 lines

Added file_mask_hash field to shared_file struct.

------------------------------------------------------------------------
r102 | rmanfredi | 2001-09-30 18:48:09 -0400 (Sun, 30 Sep 2001) | 2 lines

Added two new host caches: gnotella.fileflash.com and public.bearshare.net.

------------------------------------------------------------------------
r101 | rmanfredi | 2001-09-27 02:04:46 -0400 (Thu, 27 Sep 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r100 | rmanfredi | 2001-09-27 01:59:21 -0400 (Thu, 27 Sep 2001) | 5 lines

Added queue_remove_all_named() to purge queued downloads for the same file
that the one we just completed.
Now uses unsigned indices in download GET requests!
Also done some random indentation cleanup.

------------------------------------------------------------------------
r99 | rmanfredi | 2001-09-26 16:19:52 -0400 (Wed, 26 Sep 2001) | 2 lines

Make sure requested file name is the proper one for the file index.

------------------------------------------------------------------------
r98 | rmanfredi | 2001-09-26 16:15:25 -0400 (Wed, 26 Sep 2001) | 4 lines

Optimized query hit packet construction, reducing memory fragmentation.
The payload size of query hits was wronly written in native format,
instead of little-endian.  It could work only on little-endian systems!

------------------------------------------------------------------------
r97 | rmanfredi | 2001-09-26 16:12:39 -0400 (Wed, 26 Sep 2001) | 2 lines

Must use same fields in search_hash_key_compare() and search_hash_func().

------------------------------------------------------------------------
r96 | rmanfredi | 2001-09-26 16:01:45 -0400 (Wed, 26 Sep 2001) | 2 lines

Minor reformatting.

------------------------------------------------------------------------
r95 | rmanfredi | 2001-09-25 16:41:19 -0400 (Tue, 25 Sep 2001) | 2 lines

List GTKG as "Gtk-Gnut", instead of "Gtk-Gnutella".

------------------------------------------------------------------------
r94 | rmanfredi | 2001-09-24 16:25:18 -0400 (Mon, 24 Sep 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r93 | rmanfredi | 2001-09-24 16:23:20 -0400 (Mon, 24 Sep 2001) | 3 lines

Fixed matching of extensions on shared files: we now match case-insensitively
and only real extensions, not anywhere within the file name.

------------------------------------------------------------------------
r92 | rmanfredi | 2001-09-24 16:21:08 -0400 (Mon, 24 Sep 2001) | 2 lines

Added ST_PARSED_TRAILER status flag.

------------------------------------------------------------------------
r91 | rmanfredi | 2001-09-24 16:19:38 -0400 (Mon, 24 Sep 2001) | 3 lines

Unparsed trailers are now flagged, so as to not mistakenly think that all
the status bits were cleared.

------------------------------------------------------------------------
r90 | rmanfredi | 2001-09-24 16:17:45 -0400 (Mon, 24 Sep 2001) | 3 lines

The host cache is now a size-constrained FIFO, and initial hosts are read
in chunks instead of one by one for faster startup.

------------------------------------------------------------------------
r89 | rmanfredi | 2001-09-24 16:16:17 -0400 (Mon, 24 Sep 2001) | 2 lines

Search extension list is now a list of structures.

------------------------------------------------------------------------
r88 | rmanfredi | 2001-09-24 16:15:06 -0400 (Mon, 24 Sep 2001) | 3 lines

Added extension structure, and five new config variables.
The host cache is now a double-linked list to implement a FIFO.

------------------------------------------------------------------------
r87 | rmanfredi | 2001-09-24 16:10:34 -0400 (Mon, 24 Sep 2001) | 2 lines

Minor formatting cleanup.

------------------------------------------------------------------------
r86 | rmanfredi | 2001-09-24 16:08:37 -0400 (Mon, 24 Sep 2001) | 2 lines

Five new config variables, for kicking policies and max host cache size.

------------------------------------------------------------------------
r85 | rmanfredi | 2001-09-24 16:05:27 -0400 (Mon, 24 Sep 2001) | 2 lines

Kicking parameters for high TTL and dup messages are now configurable.

------------------------------------------------------------------------
r84 | rmanfredi | 2001-09-23 18:05:54 -0400 (Sun, 23 Sep 2001) | 2 lines

Removed unneeded inclusion of <mcheck.h>.

------------------------------------------------------------------------
r83 | rmanfredi | 2001-09-23 17:29:14 -0400 (Sun, 23 Sep 2001) | 3 lines

Change "rm" to "rm -f" for spurious symlink.  Apparently only matters
for my Debian system.

------------------------------------------------------------------------
r82 | rmanfredi | 2001-09-21 16:27:42 -0400 (Fri, 21 Sep 2001) | 2 lines

Ran all sources through "indent -kr", plus minimal reformating, ts=4 now.

------------------------------------------------------------------------
r80 | rmanfredi | 2001-09-20 15:29:59 -0400 (Thu, 20 Sep 2001) | 2 lines

Highlight current maintainer.

------------------------------------------------------------------------
r79 | rmanfredi | 2001-09-20 15:26:58 -0400 (Thu, 20 Sep 2001) | 2 lines

Preparing version 0.15, which is now "alpha" and no longer "pre-alpha".

------------------------------------------------------------------------
r78 | rmanfredi | 2001-09-20 15:23:04 -0400 (Thu, 20 Sep 2001) | 3 lines

No longer refer to "interface-glade.h" or "callbacks-glade.h" since those
files are glade-generated, and we need to let them build without glade.

------------------------------------------------------------------------
r77 | rmanfredi | 2001-09-20 14:38:10 -0400 (Thu, 20 Sep 2001) | 5 lines

Will now clean-up *-glade.[ch] and *.bak files on "make clean".
No glade nor tcl is needed for building, but developers need to run
"make glade_files" to regenerate the proper files when glade's config
file changes.

------------------------------------------------------------------------
r76 | rmanfredi | 2001-09-20 14:12:26 -0400 (Thu, 20 Sep 2001) | 3 lines

Auto-connection checks whether we're already connected to selected node.
Now quickly connects to as many nodes as necessary up to the configured min.

------------------------------------------------------------------------
r75 | rmanfredi | 2001-09-20 14:10:26 -0400 (Thu, 20 Sep 2001) | 3 lines

Removed temporisation of 2 seconds between connection attempts on PONGs
within host_add(), but perform all checks before calling the routine.

------------------------------------------------------------------------
r74 | rmanfredi | 2001-09-20 14:09:10 -0400 (Thu, 20 Sep 2001) | 2 lines

New node_connected(), and made have_node() be local.

------------------------------------------------------------------------
r73 | rmanfredi | 2001-09-18 18:03:11 -0400 (Tue, 18 Sep 2001) | 2 lines

Updated.

------------------------------------------------------------------------
r72 | rmanfredi | 2001-09-18 18:02:36 -0400 (Tue, 18 Sep 2001) | 2 lines

Can now stop and resume passive searches to stop/restart appending.

------------------------------------------------------------------------
r71 | rmanfredi | 2001-09-18 18:01:40 -0400 (Tue, 18 Sep 2001) | 2 lines

New attribute `frozen' in searches, to stop passive searches.

------------------------------------------------------------------------
r70 | rmanfredi | 2001-09-18 17:40:11 -0400 (Tue, 18 Sep 2001) | 3 lines

Auto connection to hosts caches only happens when local cache is empty.
Now knows about 4 different host catches, used in round-robin fashion.

------------------------------------------------------------------------
r69 | rmanfredi | 2001-09-18 17:38:58 -0400 (Tue, 18 Sep 2001) | 2 lines

Account for possible NULL socket pointer in nodes.

------------------------------------------------------------------------
r68 | rmanfredi | 2001-09-18 17:37:35 -0400 (Tue, 18 Sep 2001) | 2 lines

Reset n->socket to NULL once node's socket is freed.

------------------------------------------------------------------------
r67 | rmanfredi | 2001-09-17 16:39:48 -0400 (Mon, 17 Sep 2001) | 3 lines

Fixed bug when max_connections == 0.  Also updating the minimal amount
of connections above max_connections now raises the latter to match it.

------------------------------------------------------------------------
r66 | rmanfredi | 2001-09-16 08:17:32 -0400 (Sun, 16 Sep 2001) | 3 lines

Use less memory in caught hash table by sharing list items.
Avoid counting kbytes shared when file count is dubious in pongs.

------------------------------------------------------------------------
r65 | rmanfredi | 2001-09-15 11:38:55 -0400 (Sat, 15 Sep 2001) | 2 lines

Identify as a "modern" client in the GUID.

------------------------------------------------------------------------
r64 | rmanfredi | 2001-09-15 09:03:34 -0400 (Sat, 15 Sep 2001) | 2 lines

Updated with changes made since the 0.14 release.

------------------------------------------------------------------------
r63 | rmanfredi | 2001-09-15 08:53:53 -0400 (Sat, 15 Sep 2001) | 4 lines

Query hit messages now bear a TTL equal to the hop count of the received
query message, not necessarily max_ttl: either they can be routed back to
the original host, following the exact same route, or they won't anyway.

------------------------------------------------------------------------
r62 | rmanfredi | 2001-09-15 08:51:59 -0400 (Sat, 15 Sep 2001) | 5 lines

Attempt to improve routing of messages: replies are no longer dropped on
high TTL, their value is simply adjusted down.  And we use the new higher
hard_ttl_limit instead of max_ttl for comparing (objective: forward those
important replies).  We also kick out nodes sending us messages with TTL=0.

------------------------------------------------------------------------
r61 | rmanfredi | 2001-09-15 08:47:41 -0400 (Sat, 15 Sep 2001) | 4 lines

Data buffer is not allocated once and for all, not each time we receive
a message greater than the socket's internal buffer.
Also report the message type we were receiving in the error messages.

------------------------------------------------------------------------
r60 | rmanfredi | 2001-09-15 08:45:52 -0400 (Sat, 15 Sep 2001) | 2 lines

Make sure to always report the hostname when gethostbyname() fails.

------------------------------------------------------------------------
r59 | rmanfredi | 2001-09-15 08:44:19 -0400 (Sat, 15 Sep 2001) | 2 lines

Replaced gnutellahosts.com by router.limewire.com as the initial host cache.

------------------------------------------------------------------------
r58 | rmanfredi | 2001-09-15 08:42:57 -0400 (Sat, 15 Sep 2001) | 4 lines

Avoid counting files/size in global statistics if they are obviously
wrong in the pong packet.
The pongs we send have now a TTL set to the hop count in the ping.

------------------------------------------------------------------------
r57 | rmanfredi | 2001-09-15 08:40:12 -0400 (Sat, 15 Sep 2001) | 3 lines

The `allocated' field in the node structure now tracks the size of
the dynamically allocated data buffer.

------------------------------------------------------------------------
r56 | rmanfredi | 2001-09-14 14:22:40 -0400 (Fri, 14 Sep 2001) | 2 lines

Fixed typo in prototype of proxy_connect()

------------------------------------------------------------------------
r54 | rmanfredi | 2001-09-13 16:18:30 -0400 (Thu, 13 Sep 2001) | 2 lines

Integration by RAM.

------------------------------------------------------------------------
r53 | rmanfredi | 2001-09-13 16:13:22 -0400 (Thu, 13 Sep 2001) | 2 lines

Integration by RAM.

------------------------------------------------------------------------
r52 | rmanfredi | 2001-09-13 15:47:55 -0400 (Thu, 13 Sep 2001) | 2 lines

Integration by RAM.

------------------------------------------------------------------------
r50 | axiom | 2001-02-27 16:22:48 -0500 (Tue, 27 Feb 2001) | 2 lines

New contributors.

------------------------------------------------------------------------
r49 | axiom | 2001-02-27 16:07:18 -0500 (Tue, 27 Feb 2001) | 2 lines

Null descriptor fix.

------------------------------------------------------------------------
r48 | axiom | 2001-02-27 16:05:58 -0500 (Tue, 27 Feb 2001) | 2 lines

Socks v4/v5 support, and null socket descriptor fix.

------------------------------------------------------------------------
r47 | axiom | 2001-02-27 16:03:06 -0500 (Tue, 27 Feb 2001) | 2 lines

File sharing rework.

------------------------------------------------------------------------
r46 | axiom | 2001-02-27 16:01:02 -0500 (Tue, 27 Feb 2001) | 3 lines

SEARCH_PASSIVE define and search structure move.
SEA

------------------------------------------------------------------------
r45 | axiom | 2001-02-27 15:59:07 -0500 (Tue, 27 Feb 2001) | 2 lines

Search reissue code, plus other updates.

------------------------------------------------------------------------
r44 | axiom | 2001-02-27 15:55:19 -0500 (Tue, 27 Feb 2001) | 2 lines

Routing update. Added node_sent_message funtion.

------------------------------------------------------------------------
r43 | axiom | 2001-02-27 15:51:12 -0500 (Tue, 27 Feb 2001) | 2 lines

Code added for max connections, and enqueue move.

------------------------------------------------------------------------
r42 | axiom | 2001-02-27 15:46:58 -0500 (Tue, 27 Feb 2001) | 2 lines

Auto-connection fix.

------------------------------------------------------------------------
r41 | axiom | 2001-02-27 15:46:03 -0500 (Tue, 27 Feb 2001) | 2 lines

GUI update. Also in glade XML.

------------------------------------------------------------------------
r40 | axiom | 2001-02-27 15:44:04 -0500 (Tue, 27 Feb 2001) | 2 lines

New gui_update functions for search reissue, socks, and max connections.

------------------------------------------------------------------------
r39 | axiom | 2001-02-27 15:42:40 -0500 (Tue, 27 Feb 2001) | 2 lines

Lots of new variables.

------------------------------------------------------------------------
r38 | axiom | 2001-02-27 15:40:25 -0500 (Tue, 27 Feb 2001) | 2 lines

New external variables, and updated for -glade.c files.

------------------------------------------------------------------------
r37 | axiom | 2001-02-27 15:38:11 -0500 (Tue, 27 Feb 2001) | 2 lines

Adds download restart and better HTTP header checking.

------------------------------------------------------------------------
r36 | axiom | 2001-02-27 15:35:34 -0500 (Tue, 27 Feb 2001) | 2 lines

filters_open_dialog functions prototype added.

------------------------------------------------------------------------
r35 | axiom | 2001-02-27 15:34:05 -0500 (Tue, 27 Feb 2001) | 2 lines

Adds config file entries for search reissue, socks, and max connections.

------------------------------------------------------------------------
r34 | axiom | 2001-02-27 15:32:07 -0500 (Tue, 27 Feb 2001) | 2 lines

Callbacks to go with the GUI update.

------------------------------------------------------------------------
r33 | axiom | 2001-02-27 15:28:05 -0500 (Tue, 27 Feb 2001) | 2 lines

Updated to use glade and externs when needed.

------------------------------------------------------------------------
r32 | axiom | 2001-02-27 15:25:16 -0500 (Tue, 27 Feb 2001) | 2 lines

Version line update.

------------------------------------------------------------------------
r31 | axiom | 2001-02-27 15:22:34 -0500 (Tue, 27 Feb 2001) | 2 lines

Adds GUI for search reissue, socks, and max total connections.

------------------------------------------------------------------------
r30 | axiom | 2001-02-27 15:19:02 -0500 (Tue, 27 Feb 2001) | 2 lines

Adds "make build-glade"

------------------------------------------------------------------------
r29 | axiom | 2001-01-13 10:25:39 -0500 (Sat, 13 Jan 2001) | 2 lines

Updated authors and changelog.

------------------------------------------------------------------------
r28 | axiom | 2001-01-05 14:10:21 -0500 (Fri, 05 Jan 2001) | 3 lines


check the change log, lots of changes

------------------------------------------------------------------------
r27 | olrick | 2000-07-24 14:56:06 -0400 (Mon, 24 Jul 2000) | 2 lines

search popup menu changes

------------------------------------------------------------------------
r26 | olrick | 2000-07-24 14:55:14 -0400 (Mon, 24 Jul 2000) | 2 lines

libresolv fix

------------------------------------------------------------------------
r25 | olrick | 2000-06-10 11:22:18 -0400 (Sat, 10 Jun 2000) | 2 lines

filters (GUI updates)

------------------------------------------------------------------------
r24 | olrick | 2000-05-21 12:43:42 -0400 (Sun, 21 May 2000) | 2 lines

Filters & Searches GUI updates

------------------------------------------------------------------------
r23 | olrick | 2000-05-20 11:23:31 -0400 (Sat, 20 May 2000) | 2 lines

updates

------------------------------------------------------------------------
r22 | olrick | 2000-05-20 09:25:11 -0400 (Sat, 20 May 2000) | 2 lines

big fonts update

------------------------------------------------------------------------
r21 | homic | 2000-05-19 22:41:16 -0400 (Fri, 19 May 2000) | 2 lines

Limits the number of downloads from a single host

------------------------------------------------------------------------
r20 | homic | 2000-05-17 12:25:05 -0400 (Wed, 17 May 2000) | 2 lines

updated

------------------------------------------------------------------------
r19 | homic | 2000-05-17 12:23:02 -0400 (Wed, 17 May 2000) | 2 lines

Automatic retry for failed downloads

------------------------------------------------------------------------
r18 | olrick | 2000-05-16 10:21:10 -0400 (Tue, 16 May 2000) | 2 lines

random muid update

------------------------------------------------------------------------
r17 | olrick | 2000-05-16 08:06:18 -0400 (Tue, 16 May 2000) | 2 lines

Paul Cassella mem leaks patch

------------------------------------------------------------------------
r16 | olrick | 2000-05-16 04:31:58 -0400 (Tue, 16 May 2000) | 2 lines

updates

------------------------------------------------------------------------
r15 | olrick | 2000-05-10 08:08:15 -0400 (Wed, 10 May 2000) | 2 lines

gui improvements, forced local ip

------------------------------------------------------------------------
r14 | olrick | 2000-05-08 13:19:42 -0400 (Mon, 08 May 2000) | 2 lines

multiple searches and results filters dialog updates

------------------------------------------------------------------------
r13 | olrick | 2000-05-07 16:58:38 -0400 (Sun, 07 May 2000) | 2 lines

multiple searches updates

------------------------------------------------------------------------
r12 | olrick | 2000-05-07 14:47:46 -0400 (Sun, 07 May 2000) | 2 lines

multiple searches updates

------------------------------------------------------------------------
r11 | olrick | 2000-05-07 14:30:02 -0400 (Sun, 07 May 2000) | 2 lines

Unused file

------------------------------------------------------------------------
r10 | olrick | 2000-05-07 14:20:00 -0400 (Sun, 07 May 2000) | 2 lines

multiple searches updates

------------------------------------------------------------------------
r9 | olrick | 2000-05-07 05:40:11 -0400 (Sun, 07 May 2000) | 2 lines

multiple searches updates

------------------------------------------------------------------------
r4 | olrick | 2000-05-06 09:52:35 -0400 (Sat, 06 May 2000) | 2 lines

Initial revision

------------------------------------------------------------------------
